(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["bundle"],{

/***/ "../webapp/share/javascript/Oscar.js":
/*!*******************************************!*\
  !*** ../webapp/share/javascript/Oscar.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*
 * 
 * Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved. *
 * This software is published under the GPL GNU General Public License. 
 * This program is free software; you can redistribute it and/or 
 * modify it under the terms of the GNU General Public License 
 * as published by the Free Software Foundation; either version 2 
 * of the License, or (at your option) any later version. * 
 * This program is distributed in the hope that it will be useful, 
 * but WITHOUT ANY WARRANTY; without even the implied warranty of 
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the 
 * GNU General Public License for more details. * * You should have received a copy of the GNU General Public License 
 * along with this program; if not, write to the Free Software 
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA. * 
 * 
 * <OSCAR TEAM>
 * 
 * This software was written for the 
 * Department of Family Medicine 
 * McMaster University 
 * Hamilton 
 * Ontario, Canada 
 */

function popup(height, width, url, windowName) {
  return popup2(height, width, 0, 0, url, windowName);
}

function newWindow(url,windowName){
    //this way the w&d works with older browsers as well
    var w = document.getElementsByTagName('body')[0].clientWidth;//window.innerWidth;
    var h = document.getElementsByTagName('body')[0].clientHeight;//window.innerHeight;
    w = Math.max(w, window.innerWidth);
    h = Math.max(h, window.innerHeight);
    
    return popup2(h, w, 0, 0, url, windowName);
 }


function popup2(height, width, top, left, url, windowName){
  if ( typeof popup2.winRefs == 'undefined' ) {	  
	    popup2.winRefs = {};
  }
  if ( typeof popup2.winRefs[windowName] == 'undefined' || popup2.winRefs[windowName].closed ) {  
	  windowprops = "height="+height+",width="+width+",location=no,scrollbars=yes,menubars=no,toolbars=no,resizable=yes,screenX=0,screenY=0,top=" + top + ",left=" + left;
	  popup2.winRefs[windowName]=window.open(url, windowName, windowprops);
  }
  else {
	  popup2.winRefs[windowName].location.href = url;
	  popup2.winRefs[windowName].resizeTo(width,height);
	  popup2.winRefs[windowName].focus();
  }
  
  return popup2.winRefs[windowName];  
}

function confirmNGo(url, message) {
    if (confirm(message)) {
        location.href = url;
    }
    return false;
}


function showHideItem(id){ 
    if(document.getElementById(id).style.display == 'none')
        showItem(id);        
    else
        hideItem(id);        
}

function showItem(id){
        document.getElementById(id).style.display = ''; 
}

function hideItem(id){
        document.getElementById(id).style.display = 'none'; 
}

/*
oElm - Mandatory. This is element in whose children you will look for the attribute.
strTagName - Mandatory. This is the name of the HTML elements you want to look in. Use wildcard (*) if you want to look in all elements.
strAttributeName - Mandatory. The name of the attribute you’re looking for.
strAttributeValue - Optional. If you want the attribute you’re looking for to have a certain value as well. (don't specify it if you don't know it)
*/
document.getElementsByAttribute = function(oElm, strTagName, strAttributeName, strAttributeValue){
    var arrElements = (strTagName == "*" && oElm.all)? oElm.all : oElm.getElementsByTagName(strTagName);
    var arrReturnElements = new Array();
    var oAttributeValue = (typeof strAttributeValue != "undefined")? new RegExp("(^|\\s)" + strAttributeValue + "(\\s|$)") : null;
    var oCurrent;
    var oAttribute;
    for(var i=0; i<arrElements.length; i++){
        oCurrent = arrElements[i];
        oAttribute = oCurrent.getAttribute && oCurrent.getAttribute(strAttributeName);
        if(typeof oAttribute == "string" && oAttribute.length > 0){
            if(typeof strAttributeValue == "undefined" || (oAttributeValue && oAttributeValue.test(oAttribute))){
                arrReturnElements.push(oCurrent);
            }
        }
    }
    return arrReturnElements;
}

function validDate(id) {
   //checks if the <input type="text"> has a valid date format yyyy/mm/dd
   var completeRawDate = document.getElementById(id).value;
   return validDateText(completeRawDate);
}

function validDateText(completeRawDate) {
//Just another method that validates date in a string, useful if you want to make your own
//date checking script.
   var delimiter = '/';
   if (completeRawDate.indexOf('/') == -1)
       delimiter = '-';
   var dateArray = completeRawDate.split(delimiter);
   if (dateArray.length != 3) return false;
   year = (dateArray[0] - 0);
   month = (dateArray[1] - 1);
   day = (dateArray[2] - 0);
   //alert("year: " + year + ", " + month + ", " + day);
   dateObject = new Date(year,month,day);
   return ((day==dateObject.getDate()) && (month==dateObject.getMonth()) && (year==dateObject.getFullYear()));
}

function validDateFieldsByClass(className, parentEle) {
//Checks if the dates are valid, identifies date fields by class name; datefield preferrably type="text"
// parentEle is any object that encloses the fields, usually the form element
   var datefields = document.getElementsByClassName(className, parentEle)
   for (var i=0; i<datefields.length; i++) {
      if (!validDateText(datefields[i].value)) {
        datefields[i].focus();
        return false;
      }
   }
   return true;
}

//returns mouse coordinates
function getMouseCoords(e) {
        var array = new Array(2);
	var posx = 0;
	var posy = 0;
	if (!e) var e = window.event;
	if (e.pageX || e.pageY) 	{
		posx = e.pageX;
		posy = e.pageY;
	}
	else if (e.clientX || e.clientY) 	{
        posx = e.clientX + document.body.scrollLeft
			+ document.documentElement.scrollLeft;
		posy = e.clientY + document.body.scrollTop
			+ document.documentElement.scrollTop;
	}
        array[0] = posx;
        array[1] = posy;
        return array;
}

//example  <input type="checkbox" onclick="checkAll(this, 'parentEle', 'checkclass')">
function checkAll(master, parentEle, className){
   var val = master.checked;
   var chkList = document.getElementsByClassName(className, parentEle);
   for (i =0; i < chkList.length; i++){
      chkList[i].checked = val;
   }
}

//Calls firebugs console log if it's available.  A safer way to use the console because if firebug is not enabled the javascript will error on the console.log line.
function oscarLog(str){
    if(window.console){
       console.log(str);
    }
    
}


//Can be use the enter key in a text box and call javacript function
//example:  <itput type="text" onkeypress="return grabEnter(event,'ReferralScriptAttach1()')"/>
function grabEnter(event,callb){
  if( (window.event && window.event.keyCode == 13) || (event && event.which == 13) )  {
     eval(callb);
     return false;
  }
}



//Checks to see if a String is numeric integer ie. No decimal aloud
function isNumericInt(sText){
   var validNumChars = "0123456789";
   var isNumber=true;
   var chara;
   for (i = 0; i < sText.length && isNumber == true; i++) {
      chara = sText.charAt(i);
      if (validNumChars.indexOf(chara) == -1) {
         isNumber = false;
      }
   }
   return isNumber;
}

//Checks to see if a String is numeric
function isNumeric(sText){
   var validNumChars = "0123456789.";
   var isNumber=true;
   var chara;
   for (i = 0; i < sText.length && isNumber == true; i++) {
      chara = sText.charAt(i);
      if (validNumChars.indexOf(chara) == -1) {
         isNumber = false;
      }
   }
   return isNumber;
}
//remove leading and trailing white space
function trim(str){
   str=str.replace(/^\s+/g,"");
   str=str.replace(/\s+$/g,"");//trim str
   return str;
}

/***/ }),

/***/ "./app.js":
/*!****************!*\
  !*** ./app.js ***!
  \****************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
__webpack_require__(/*! jquery-ui/ui/widgets/draggable */ "./node_modules/jquery-ui/ui/widgets/draggable.js")
__webpack_require__(/*! jquery-ui/themes/base/draggable.css */ "./node_modules/jquery-ui/themes/base/draggable.css");
__webpack_require__(/*! jquery-ui/ui/widgets/resizable */ "./node_modules/jquery-ui/ui/widgets/resizable.js")
__webpack_require__(/*! jquery-ui/themes/base/resizable.css */ "./node_modules/jquery-ui/themes/base/resizable.css");
__webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
__webpack_require__(/*! angular */ "./node_modules/angular/index.js");
__webpack_require__(/*! angular-ui-bootstrap */ "./node_modules/angular-ui-bootstrap/index.js");
__webpack_require__(/*! angular-ui-router */ "./node_modules/angular-ui-router/release/ui-router-angularjs.js");
__webpack_require__(/*! angular-ui-router/release/stateEvents */ "./node_modules/angular-ui-router/release/stateEvents.js");
__webpack_require__(/*! fullcalendar-scheduler */ "./node_modules/fullcalendar-scheduler/dist/scheduler.js");
__webpack_require__(/*! fullcalendar/dist/fullcalendar.min.css */ "./node_modules/fullcalendar/dist/fullcalendar.min.css");
__webpack_require__(/*! fullcalendar-scheduler/dist/scheduler.min.css */ "./node_modules/fullcalendar-scheduler/dist/scheduler.min.css");
__webpack_require__(/*! ng-table/bundles/ng-table */ "./node_modules/ng-table/bundles/ng-table.js");
__webpack_require__(/*! ng-table/bundles/ng-table.css */ "./node_modules/ng-table/bundles/ng-table.css");
__webpack_require__(/*! angular-resource */ "./node_modules/angular-resource/index.js");
__webpack_require__(/*! ng-infinite-scroll */ "./node_modules/ng-infinite-scroll/build/ng-infinite-scroll.js");
__webpack_require__(/*! angular-loading-bar */ "./node_modules/angular-loading-bar/index.js");
__webpack_require__(/*! angular-loading-bar/build/loading-bar.min.css */ "./node_modules/angular-loading-bar/build/loading-bar.min.css");
__webpack_require__(/*! bootstrap-datepicker */ "./node_modules/bootstrap-datepicker/dist/js/bootstrap-datepicker.js");
__webpack_require__(/*! bootstrap-datepicker/dist/css/bootstrap-datepicker.css */ "./node_modules/bootstrap-datepicker/dist/css/bootstrap-datepicker.css");
__webpack_require__(/*! bootstrap-timepicker */ "./node_modules/bootstrap-timepicker/js/bootstrap-timepicker.js");
__webpack_require__(/*! ngstorage */ "./node_modules/ngstorage/ngStorage.js");
__webpack_require__(/*! ./scss/juno.scss */ "./scss/juno.scss");
__webpack_require__(/*! font-awesome/css/font-awesome.min.css */ "./node_modules/font-awesome/css/font-awesome.min.css");


var oscarApp = angular.module('oscarProviderViewModule', [
	'ui.router',
	'ui.router.state.events',
	'ngResource',
	'ui.bootstrap',
	'ui.calendar',
	'angular-loading-bar',
	'ngTable',
	'ngStorage',
	'Common',
	'Common.Services',
	'Common.Filters',
	'Common.Directives',
	'Common.Util',
	'Layout',
	'Tickler',
	'Record',
	'Record.Summary',
	'Record.Tracker',
	'Record.Details',
	'Record.PHR',
	'Record.Forms',
	'Schedule',
	'Settings',
	'Report',
	'Patient',
	'Patient.Search',
	'PatientList',
	'Inbox',
	'Help',
	'Document',
	'Dashboard',
	'Consults',
	'Admin',
	'Admin.Integration',
	'Admin.Integration.Know2act',
	'Admin.Integration.Fax'
]);

oscarApp.config(['$stateProvider', '$urlRouterProvider', function($stateProvider, $urlRouterProvider)
{
	//
	// For any unmatched url, redirect to /state1
	$urlRouterProvider.otherwise("/dashboard");
	//
	// Now set up the states
	$stateProvider
		.state('dashboardManager',
		{
			url: '/dashboard/admin',
			templateUrl: 'src/dashboard/admin/DashboardManager.jsp',
			controller: 'dashboardManagerController'
		})
		.state('dashboard',
		{
			url: '/dashboard',
			templateUrl: 'src/dashboard/dashboard.jsp',
			controller: 'Dashboard.DashboardController'
		})
		.state('inbox',
		{
			url: '/inbox',
			templateUrl: 'src/inbox/inbox_popup.jsp',
			// templateUrl: 'src/inbox/inbox.jsp',
			controller: 'Inbox.InboxController'
		})
		.state('consultRequests',
		{
			url: '/consults',
			templateUrl: 'src/consults/consultRequestList.jsp',
			controller: 'Consults.ConsultRequestListController as consultRequestListCtrl'
		})
		.state('consultResponses',
		{
			url: '/consultResponses',
			templateUrl: 'src/consults/consultResponseList.jsp',
			controller: 'Consults.ConsultResponseListController as consultResponseListCtrl'
		})
		.state('billing',
		{
			url: '/billing',
			templateUrl: 'src/billing/billing_popup.jsp',
			controller: 'BillingCtrl'
		})
		.state('schedule',
		{
			url: '/schedule',
			templateUrl: 'src/schedule/view.jsp',
			controller: 'Schedule.ScheduleController'
		})
		.state('admin',
		{
			url: '/admin',
			templateUrl: 'src/admin/admin_popup.jsp',
			controller: 'AdminCtrl'
		})
		.state('ticklers',
		{
			url: '/ticklers',
			templateUrl: 'src/tickler/ticklerList.jsp',
			controller: 'Tickler.TicklerListController as ticklerListCtrl',
			resolve:
			{
				providers: ['providerService', function(providerService)
				{
					return providerService.searchProviders(
					{
						active: true
					});
				}],
			}
		})
		.state('search',
		{
			url: '/search',
			templateUrl: 'src/patient/search/patientSearch.jsp',
			controller: 'Patient.Search.PatientSearchController as patientSearchCtrl',
			params:
			{
				term: null
			}
		})
		.state('reports',
		{
			url: '/reports',
			templateUrl: 'src/report/reports.jsp',
			//templateUrl: 'src/report/reports_classic.jsp',
			controller: 'Report.ReportsController as reportsCtrl',
		})
		.state('documents',
		{
			url: '/documents',
			templateUrl: 'src/document/documents_classic.jsp',
			controller: 'Document.DocumentsController'
		})
		.state('settings',
		{
			url: '/settings',
			templateUrl: 'src/settings/settings.jsp',
			controller: 'Settings.SettingsController as settingsCtrl',
			resolve:
			{
				user: ['providerService', function(providerService)
				{
					return providerService.getMe();
				}],
				billingServiceTypes: ['billingService', function(billingService)
				{
					return billingService.getUniqueServiceTypes();
				}],
				providerList: ['providerService', function(providerService)
				{
					return providerService.searchProviders(
					{
						'active': true
					});
				}],
				loadedSettings: ['providerService', function(providerService)
				{
					return providerService.getSettings();
				}],
				encounterForms: ['formService', function(formService)
				{
					return formService.getAllEncounterForms();
				}],
				eforms: ['formService', function(formService)
				{
					return formService.getAllEForms();
				}],
				teams: ['providerService', function(providerService)
				{
					return providerService.getActiveTeams();
				}],
				groupNames: ['formService', function(formService)
				{
					return formService.getGroupNames();
				}],
				loadedApps: ['appService', function(appService)
				{
					return appService.getApps();
				}]
			}
		})
		.state('settings.persona',
			{
				url: '/persona',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'persona'
				}
			})
		.state('settings.general',
			{
				url: '/general',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'general'
				}
			})
		.state('settings.schedule',
			{
				url: '/schedule',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'schedule'
				}
			})
		.state('settings.billing',
			{
				url: '/billing',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'billing'
				}
			})
		.state('settings.rx',
			{
				url: '/rx',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'rx'
				}
			})
		.state('settings.masterdemo',
			{
				url: '/masterdemo',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'masterdemo'
				}
			})
		.state('settings.consults',
			{
				url: '/consults',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'consults'
				}
			})
		.state('settings.documents',
			{
				url: '/documents',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'documents'
				}
			})
		.state('settings.summary',
			{
				url: '/summary',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'summary'
				}
			})
		.state('settings.eforms',
			{
				url: '/eforms',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'eforms'
				}
			})
		.state('settings.inbox',
			{
				url: '/inbox',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'inbox'
				}
			})
		.state('settings.programs',
			{
				url: '/programs',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'programs'
				}
			})
		.state('settings.integration',
			{
				url: '/integration',
				templateUrl: 'src/settings/settings.jsp',
				controller: 'Settings.SettingsController as settingsCtrl',
				data: {
					tab: 'integration'
				}
			})
		.state('support',
		{
			url: '/support',
			templateUrl: 'src/help/support.jsp',
			controller: 'Help.SupportController'
		})
		.state('help',
		{
			url: '/help',
			templateUrl: 'src/help/help.jsp',
			controller: 'Help.HelpController'
		})
		.state('record',
		{
			url: '/record/:demographicNo',
			templateUrl: 'src/record/record.jsp',
			controller: 'Record.RecordController as recordCtrl',
			resolve:
			{
				demo: ['$stateParams', 'demographicService', function($stateParams, demographicService)
				{
					return demographicService.getDemographic($stateParams.demographicNo);
				}],
				user: ['providerService', function(providerService)
				{
					return providerService.getMe();
				}],
				properties: ['uxService', function(uxService)
				{
					return uxService.getDisplayProperties();
				}]
			}
		})
		.state('record.details',
		{
			url: '/details',
			templateUrl: 'src/record/details/details.jsp',
			controller: 'Record.Details.DetailsController as detailsCtrl'
		})
		.state('record.summary',
		{
			url: '/summary?appointmentNo&encType',
			templateUrl: 'src/record/summary/summary.jsp',
			controller: 'Record.Summary.SummaryController as summaryCtrl'
		})
		.state('record.forms',
		{
			url: '/forms',
			templateUrl: 'src/record/forms/forms.jsp',
			controller: 'Record.Forms.FormController as formCtrl',
			params: {
				formListId: 0
			}
		})
		.state('record.forms.view',
		{
			url: '/view/:type/:id?name',
			templateUrl: 'src/record/forms/forms.jsp',
			params: { name: { dynamic: true } },
			controller: 'Record.Forms.FormController as formCtrl'
		})
		.state('record.forms.add',
		{
			url: '/add/:type/:id',
			templateUrl: 'src/record/forms/forms.jsp',
			controller: 'Record.Forms.FormController as formCtrl'
		})
		.state('record.consultRequests',
		{
			url: '/consults',
			templateUrl: 'src/consults/consultRequestList.jsp',
			controller: 'Consults.ConsultRequestListController as consultRequestListCtrl'
		})
		.state('record.consultResponses',
		{
			url: '/consultResponses',
			templateUrl: 'src/consults/consultResponseList.jsp',
			controller: 'Consults.ConsultResponseListController as consultResponseListCtrl'
		})
		.state('record.consultRequest',
		{
			url: '/consult/:requestId',
			templateUrl: 'src/consults/consultRequest.jsp',
			controller: 'Consults.ConsultRequestController as consultRequestCtrl',
			resolve:
			{
				consult: ['$stateParams', 'consultService', function($stateParams, consultService)
				{
					if($stateParams.requestId === "new") {
						return consultService.getNewRequest($stateParams.demographicNo);
					}
					return consultService.getRequest($stateParams.requestId);
				}],
				user: ['providerService', function(providerService)
				{
					return providerService.getMe();
				}]
			}
		})
		.state('record.consultResponse',
		{
			url: '/consultResponse/:responseId',
			templateUrl: 'src/consults/consultResponse.jsp',
			controller: 'Consults.ConsultResponseController as consultResponseCtrl',
			resolve:
			{
				consult: ['$stateParams', 'consultService', function($stateParams, consultService)
				{
					return consultService.getResponse($stateParams.responseId, $stateParams.demographicNo);
				}],
				user: ['providerService', function(providerService)
				{
					return providerService.getMe();
				}]
			}
		})
		.state('record.tickler',
		{
			url: '/tickler',
			templateUrl: 'src/tickler/ticklerList.jsp',
			controller: 'Tickler.TicklerListController as ticklerListCtrl',
			resolve:
			{
				providers: ['providerService', function(providerService)
				{
					return providerService.searchProviders(
					{
						active: true
					});
				}]
			}
		}).state('record.tracker',
		{
			url: '/tracker',
			templateUrl: 'src/record/tracker/tracker.jsp',
			controller: 'Record.Tracker.TrackerController as trackerCtrl'
		})
		.state('record.phr',
		{
			url: '/phr',
			templateUrl: 'src/record/phr/phr.jsp',
			controller: 'Record.PHR.PHRController as phrCtrl'
		})
		// .state('admin.integration',
		.state('k2aConfig',
			{
			// url: '/admin/integration',
			url:'/k2aConfig',
			templateUrl: 'src/admin/integration/know2act/Know2actConfiguration.jsp',
			controller: 'Admin.Integration.Know2act.k2aConfigController as k2aConfigCtrl'
		})
		.state('k2aTemplate',
			{
				// url: '/admin/integration',
				url:'/k2aTemplate',
				templateUrl: 'src/admin/integration/know2act/Know2actTemplate.jsp',
				controller: 'Admin.Integration.Know2act.k2aTemplateController as k2aTemplateCtrl'
			})
		.state('k2aNotification',
			{
				url: '/k2aNotification',
				templateUrl: 'src/admin/integration/know2act/Know2actNotifications.jsp',
				controller: 'Admin.Integration.Know2act.k2aNotificationController as k2aNoteCtrl'
			})
		.state('faxConfig',
			{
				url: '/faxConfig',
				templateUrl: 'src/admin/integration/fax/faxConfiguration.jsp',
				controller: 'Admin.Integration.Fax.FaxConfigurationController as faxController'
			})
		.state('faxSendReceive',
			{
				url: '/faxSendReceive',
				templateUrl: 'src/admin/integration/fax/faxSendReceive.jsp',
				controller: 'Admin.Integration.Fax.FaxSendReceiveController as faxSendReceiveController'
			})
	;

}]);

// For debugging purposes
/*
oscarApp.run( function($rootScope, $location) {

$rootScope.$on('$stateChangeStart',function(event, toState, toParams, fromState, fromParams){
	  console.log('$stateChangeStart to '+toState.to+'- fired when the transition begins. toState,toParams : \n',toState, toParams);
	});
	$rootScope.$on('$stateChangeError',function(event, toState, toParams, fromState, fromParams){
	  console.log('$stateChangeError - fired when an error occurs during transition.');
	  console.log(arguments);
	});
	$rootScope.$on('$stateChangeSuccess',function(event, toState, toParams, fromState, fromParams){
	  console.log('$stateChangeSuccess to '+toState.name+'- fired once the state transition is complete.');
	});
	// $rootScope.$on('$viewContentLoading',function(event, viewConfig){
	//   // runs on individual scopes, so putting it in "run" doesn't work.
	//   console.log('$viewContentLoading - view begins loading - dom not rendered',viewConfig);
	// });
	$rootScope.$on('$viewContentLoaded',function(event){
	  console.log('$viewContentLoaded - fired after dom rendered',event);
	});
	$rootScope.$on('$stateNotFound',function(event, unfoundState, fromState, fromParams){
	  console.log('$stateNotFound '+unfoundState.to+'  - fired when a state cannot be found by its name.');
	  console.log(unfoundState, fromState, fromParams);
	});

});
*/



/*

 user: function($stateParams, UserService) {
	  return UserService.find($stateParams.id);
	},
oscarApp.config(['$routeProvider',
					function($routeProvider) {

						when('/settings', {
							templateUrl: 'src/partials/settings-classic.jsp',
							controller: 'Settings.SettingsController'
						}).
						when('/support', {
							templateUrl: 'src/partials/support.jsp',
							controller: 'Help.SupportController'
						}).
						when('/help', {
							templateUrl: 'src/partials/help.jsp',
							controller: 'Help.HelpController'
						}).

						when('/messenger', {
							templateUrl: 'src/partials/messenger.jsp',
							controller: 'MessengerCtrl'
						}).
						when('/eform', {
							templateUrl: 'src/partials/eform.jsp',
							controller: 'EformFullCtrl'
						}).
						when('/eform2', {
							templateUrl: 'src/partials/eform2.jsp',
							controller: 'EformFull2Ctrl'
						}).

					}
]);
*/



//for dev - just to keep the cache clear
/*
oscarApp.run(function($rootScope, $templateCache) {
	$rootScope.$on('$viewContentLoaded', function() {
		$templateCache.removeAll();
		console.log("onclick of tab");
	});
});


//reset the left nav back
oscarApp.run( function($rootScope, $location) {
	$rootScope.$on( "$routeChangeStart", function(event, next, current) {
		$("#left_pane").addClass("col-md-2");
		$("#left_pane").show();
		$("#right_pane").removeClass("col-md-12");
		$("#right_pane").addClass("col-md-10");
	});
});

*/

//this is for the patient list control. Tells us which template to load
/*angular.module('oscarProviderViewModule').factory('Navigation', function($rootScope)
{
	return {
		location: '',

		load: function(msg)
		{
			this.location = msg;
		}
	};
});*/
angular.module('oscarProviderViewModule').factory('Navigation', [
	function()
	{
		return {
			location: '',

			load: function(msg)
			{
				this.location = msg;
			}
		};
	}
]);

/*

angular.module('oscarProviderViewModule').directive('oscarSecurityShow', function ($animate, securityService) {
	  return function(scope, element, attr) {
			scope.$watch(attr.oscarSecurityShow, function ngShowWatchAction(value){
				//console.log('valuee='+value.toSource());

				if(value.objectName != null && value.privilege != null) {
					//securityService.hasHigh(value.objectName,value.privilege,null);
					console.log('gtg');
				}

			  //set value to true to show, or else hide
			  $animate[value ? 'removeClass' : 'addClass'](element, 'ng-hide');
			});
	  };
});
*/


/***/ }),

/***/ "./generated/api/AppointmentApi.ts":
/*!*****************************************!*\
  !*** ./generated/api/AppointmentApi.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 *
 *
 *
 *
 *
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */
exports.__esModule = true;
/* tslint:disable:no-unused-variable member-ordering */
var AppointmentApi = /** @class */ (function () {
    function AppointmentApi($http, $httpParamSerializer, basePath) {
        this.$http = $http;
        this.$httpParamSerializer = $httpParamSerializer;
        this.basePath = 'http://localhost/';
        this.defaultHeaders = {};
        if (basePath !== undefined) {
            this.basePath = basePath;
        }
    }
    /**
     *
     * @param calendarAppointment
     */
    AppointmentApi.prototype.addAppointment = function (calendarAppointment, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/appointment';
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        var httpRequestParams = {
            method: 'POST',
            url: localVarPath,
            data: calendarAppointment,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     * @param appointmentNo
     */
    AppointmentApi.prototype.deleteAppointment = function (appointmentNo, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/appointment/{appointmentNo}'
            .replace('{' + 'appointmentNo' + '}', encodeURIComponent(String(appointmentNo)));
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        // verify required parameter 'appointmentNo' is not null or undefined
        if (appointmentNo === null || appointmentNo === undefined) {
            throw new Error('Required parameter appointmentNo was null or undefined when calling deleteAppointment.');
        }
        var httpRequestParams = {
            method: 'DELETE',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     * @param appointmentNo
     */
    AppointmentApi.prototype.setNextStatus = function (appointmentNo, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/appointment/{appointmentNo}/rotate_status'
            .replace('{' + 'appointmentNo' + '}', encodeURIComponent(String(appointmentNo)));
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        // verify required parameter 'appointmentNo' is not null or undefined
        if (appointmentNo === null || appointmentNo === undefined) {
            throw new Error('Required parameter appointmentNo was null or undefined when calling setNextStatus.');
        }
        var httpRequestParams = {
            method: 'POST',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     * @param calendarAppointment
     */
    AppointmentApi.prototype.updateAppointment = function (calendarAppointment, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/appointment';
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        var httpRequestParams = {
            method: 'PUT',
            url: localVarPath,
            data: calendarAppointment,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    AppointmentApi.$inject = ['$http', '$httpParamSerializer', 'basePath'];
    return AppointmentApi;
}());
exports.AppointmentApi = AppointmentApi;


/***/ }),

/***/ "./generated/api/ScheduleApi.ts":
/*!**************************************!*\
  !*** ./generated/api/ScheduleApi.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 *
 *
 *
 *
 *
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */
exports.__esModule = true;
/* tslint:disable:no-unused-variable member-ordering */
var ScheduleApi = /** @class */ (function () {
    function ScheduleApi($http, $httpParamSerializer, basePath) {
        this.$http = $http;
        this.$httpParamSerializer = $httpParamSerializer;
        this.basePath = 'http://localhost/';
        this.defaultHeaders = {};
        if (basePath !== undefined) {
            this.basePath = basePath;
        }
    }
    /**
     *
     * @param year
     * @param month
     * @param providerNo
     */
    ScheduleApi.prototype.fetchMonthlyData = function (year, month, providerNo, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/fetchMonthly/{providerNo}/{year}/{month}'
            .replace('{' + 'year' + '}', encodeURIComponent(String(year)))
            .replace('{' + 'month' + '}', encodeURIComponent(String(month)))
            .replace('{' + 'providerNo' + '}', encodeURIComponent(String(providerNo)));
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        // verify required parameter 'year' is not null or undefined
        if (year === null || year === undefined) {
            throw new Error('Required parameter year was null or undefined when calling fetchMonthlyData.');
        }
        // verify required parameter 'month' is not null or undefined
        if (month === null || month === undefined) {
            throw new Error('Required parameter month was null or undefined when calling fetchMonthlyData.');
        }
        // verify required parameter 'providerNo' is not null or undefined
        if (providerNo === null || providerNo === undefined) {
            throw new Error('Required parameter providerNo was null or undefined when calling fetchMonthlyData.');
        }
        var httpRequestParams = {
            method: 'GET',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     * @param demographicNo
     */
    ScheduleApi.prototype.findExistAppointments = function (demographicNo, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/{demographicNo}/appointmentHistory'
            .replace('{' + 'demographicNo' + '}', encodeURIComponent(String(demographicNo)));
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        // verify required parameter 'demographicNo' is not null or undefined
        if (demographicNo === null || demographicNo === undefined) {
            throw new Error('Required parameter demographicNo was null or undefined when calling findExistAppointments.');
        }
        var httpRequestParams = {
            method: 'POST',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     * @param appointmentTo1
     */
    ScheduleApi.prototype.getAppointment = function (appointmentTo1, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/getAppointment';
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        var httpRequestParams = {
            method: 'POST',
            url: localVarPath,
            data: appointmentTo1,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     */
    ScheduleApi.prototype.getAppointmentReasons = function (extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/reasons';
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        var httpRequestParams = {
            method: 'GET',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     */
    ScheduleApi.prototype.getAppointmentStatuses = function (extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/statuses';
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        var httpRequestParams = {
            method: 'GET',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     */
    ScheduleApi.prototype.getAppointmentTypes = function (extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/types';
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        var httpRequestParams = {
            method: 'GET',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     * @param providerNo
     * @param date
     */
    ScheduleApi.prototype.getAppointmentsForDay = function (providerNo, date, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/{providerNo}/day/{date}'
            .replace('{' + 'providerNo' + '}', encodeURIComponent(String(providerNo)))
            .replace('{' + 'date' + '}', encodeURIComponent(String(date)));
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        // verify required parameter 'providerNo' is not null or undefined
        if (providerNo === null || providerNo === undefined) {
            throw new Error('Required parameter providerNo was null or undefined when calling getAppointmentsForDay.');
        }
        // verify required parameter 'date' is not null or undefined
        if (date === null || date === undefined) {
            throw new Error('Required parameter date was null or undefined when calling getAppointmentsForDay.');
        }
        var httpRequestParams = {
            method: 'GET',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     * @param date
     */
    ScheduleApi.prototype.getAppointmentsForDay1 = function (date, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/day/{date}'
            .replace('{' + 'date' + '}', encodeURIComponent(String(date)));
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        // verify required parameter 'date' is not null or undefined
        if (date === null || date === undefined) {
            throw new Error('Required parameter date was null or undefined when calling getAppointmentsForDay1.');
        }
        var httpRequestParams = {
            method: 'GET',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     */
    ScheduleApi.prototype.getCalendarAppointmentStatuses = function (extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/calendar/statuses';
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        var httpRequestParams = {
            method: 'GET',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     * @param providerId
     * @param startDate
     * @param endDate
     * @param site
     */
    ScheduleApi.prototype.getCalendarEvents = function (providerId, startDate, endDate, site, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/calendar/{providerId}'
            .replace('{' + 'providerId' + '}', encodeURIComponent(String(providerId)));
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        // verify required parameter 'providerId' is not null or undefined
        if (providerId === null || providerId === undefined) {
            throw new Error('Required parameter providerId was null or undefined when calling getCalendarEvents.');
        }
        if (startDate !== undefined) {
            queryParameters['startDate'] = startDate;
        }
        if (endDate !== undefined) {
            queryParameters['endDate'] = endDate;
        }
        if (site !== undefined) {
            queryParameters['site'] = site;
        }
        var httpRequestParams = {
            method: 'GET',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     */
    ScheduleApi.prototype.getScheduleGroups = function (extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/groups';
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        var httpRequestParams = {
            method: 'GET',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     */
    ScheduleApi.prototype.getScheduleTemplateCodes = function (extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/templateCodes';
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        var httpRequestParams = {
            method: 'GET',
            url: localVarPath,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     * @param id
     * @param appointmentTo1
     */
    ScheduleApi.prototype.updateAppointmentStatus = function (id, appointmentTo1, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/appointment/{id}/updateStatus'
            .replace('{' + 'id' + '}', encodeURIComponent(String(id)));
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        // verify required parameter 'id' is not null or undefined
        if (id === null || id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling updateAppointmentStatus.');
        }
        var httpRequestParams = {
            method: 'POST',
            url: localVarPath,
            data: appointmentTo1,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    /**
     *
     * @param id
     * @param appointmentTo1
     */
    ScheduleApi.prototype.updateAppointmentType = function (id, appointmentTo1, extraHttpRequestParams) {
        var localVarPath = this.basePath + '/schedule/appointment/{id}/updateType'
            .replace('{' + 'id' + '}', encodeURIComponent(String(id)));
        var queryParameters = {};
        var headerParams = Object.assign({}, this.defaultHeaders);
        // verify required parameter 'id' is not null or undefined
        if (id === null || id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling updateAppointmentType.');
        }
        var httpRequestParams = {
            method: 'POST',
            url: localVarPath,
            data: appointmentTo1,
            params: queryParameters,
            headers: headerParams
        };
        if (extraHttpRequestParams) {
            httpRequestParams = Object.assign(httpRequestParams, extraHttpRequestParams);
        }
        return this.$http(httpRequestParams);
    };
    ScheduleApi.$inject = ['$http', '$httpParamSerializer', 'basePath'];
    return ScheduleApi;
}());
exports.ScheduleApi = ScheduleApi;


/***/ }),

/***/ "./node_modules/css-loader/index.js?sourceMap!./node_modules/sass-loader/lib/loader.js?sourceMap&precision=8!./scss/juno.scss":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/css-loader?sourceMap!./node_modules/sass-loader/lib/loader.js?sourceMap&precision=8!./scss/juno.scss ***!
  \***************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

throw new Error("Module build failed: \n\t\tcolor: $dark-grey;\n        ^\n      Undefined variable: \"$dark-grey\".\n      in /home/jordan/oscar/RELEASE_15_BETA/src/main/frontend/src/admin/integration/fax/_fax.scss (line 93, column 10)");

/***/ }),

/***/ "./scss/juno.scss":
/*!************************!*\
  !*** ./scss/juno.scss ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../node_modules/css-loader?sourceMap!../node_modules/sass-loader/lib/loader.js?sourceMap&precision=8!./juno.scss */ "./node_modules/css-loader/index.js?sourceMap!./node_modules/sass-loader/lib/loader.js?sourceMap&precision=8!./scss/juno.scss");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../node_modules/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./src/admin/adminController.js":
/*!**************************************!*\
  !*** ./src/admin/adminController.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('oscarProviderViewModule').controller('AdminCtrl', ['$scope', '$http', function ($scope,$http) {

}]);


/***/ }),

/***/ "./src/admin/integration/fax/faxConfigurationController.js":
/*!*****************************************************************!*\
  !*** ./src/admin/integration/fax/faxConfigurationController.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module("Admin.Integration.Fax").controller('Admin.Integration.Fax.FaxConfigurationController', [
	"$uibModal",
	"faxAccountService",
	"providerService",
	"systemPreferenceService",
	function ($uibModal,
	          faxAccountService,
	          providerService,
	          systemPreferenceService)
	{
		var controller = this;
		controller.faxAccountList = [];
		controller.loggedInProvider = null;
		controller.masterFaxDisabled = true;
		controller.masterFaxEnabledInbound = false;
		controller.masterFaxEnabledOutbound = false;

		controller.initialize = function()
		{
			// if the current provider number is unknown, retrieve it.
			if(controller.loggedInProvider == null)
			{
				providerService.getMe().then(
					function success(response)
					{
						controller.loggedInProvider = response;
					},
					function error(error)
					{
						console.error(error);
					}
				)
			}
			systemPreferenceService.isPreferenceEnabled("masterFaxEnabledInbound", controller.masterFaxEnabledInbound).then(
				function success(response)
				{
					controller.masterFaxEnabledInbound = response;
					controller.updateMasterFaxDisabledStatus();
				},
				function error(error)
				{
					console.error(error);
				}
			);
			systemPreferenceService.isPreferenceEnabled("masterFaxEnabledOutbound", controller.masterFaxEnabledOutbound).then(
				function success(response)
				{
					controller.masterFaxEnabledOutbound = response;
					controller.updateMasterFaxDisabledStatus();
				},
				function error(error)
				{
					console.error(error);
				}
			);

			faxAccountService.listAccounts().then(
				function success(response)
				{
					controller.faxAccountList = response;
				},
				function error(error)
				{
					console.error(error);
				}
			)
		};

		controller.editNewFaxAccount = function editNewFaxAccount()
		{
			controller.editFaxAccount();
		};
		controller.editFaxAccount = function editFaxAccount(faxAccount)
		{
			let isNewAcct = true;
			if(faxAccount)
			{
				isNewAcct = false;
			}

			var modalInstance = $uibModal.open(
				{
					templateUrl: 'admin/integration/fax/faxConfigurationEdit.jsp',
					controller: 'Admin.Integration.Fax.FaxConfigurationEditController as faxConfigEditController',
					backdrop: 'static',
					windowClass: 'faxEditModal',
					resolve:
						{
							faxAccount: function()
							{
								return faxAccount;
							},
							masterFaxEnabledInbound: function()
							{
								return controller.masterFaxEnabledInbound;
							},
							masterFaxEnabledOutbound: function()
							{
								return controller.masterFaxEnabledOutbound;
							}
						}
				});

			modalInstance.result.then(
				// the object passed back on closing
				function success(updatedAccount)
				{
					if(isNewAcct)
					{
						// new accounts get added to the account list
						controller.faxAccountList.push(updatedAccount);
					}
					else
					{
						// clear the existing properties and replace with the updated ones
						angular.copy(updatedAccount, faxAccount);
					}
				},
				function error(errors)
				{
					// do nothing on dismissal
				});
		};

		controller.saveMasterFaxEnabledStateInbound = function saveMasterFaxEnabledState()
		{
			controller.setSystemProperty("masterFaxEnabledInbound", controller.masterFaxEnabledInbound);
			controller.updateMasterFaxDisabledStatus();
		};
		controller.saveMasterFaxEnabledStateOutbound = function saveMasterFaxEnabledState()
		{
			controller.setSystemProperty("masterFaxEnabledOutbound", controller.masterFaxEnabledOutbound);
			controller.updateMasterFaxDisabledStatus();
		};

		controller.updateMasterFaxDisabledStatus = function updateMasterFaxDisabledStatus()
		{
			controller.masterFaxDisabled = !controller.masterFaxEnabledInbound && !controller.masterFaxEnabledOutbound;
		};
		controller.setSystemProperty = function setSystemProperty(key, value)
		{
			systemPreferenceService.setPreference(key, value).then(
				function success(response)
				{
				},
				function error(error)
				{
					console.error(error);
				}
			);
		};

		controller.initialize();
	}
]);

/***/ }),

/***/ "./src/admin/integration/fax/faxConfigurationEditController.js":
/*!*********************************************************************!*\
  !*** ./src/admin/integration/fax/faxConfigurationEditController.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module("Admin.Integration.Fax").controller('Admin.Integration.Fax.FaxConfigurationEditController', [
	"$uibModal",
	"$uibModalInstance",
	"faxAccountService",
	"faxAccount",
	"masterFaxEnabledInbound",
	"masterFaxEnabledOutbound",
	function ($uibModal,
	          $uibModalInstance,
	          faxAccountService,
	          faxAccount,
	          masterFaxEnabledInbound,
	          masterFaxEnabledOutbound)
	{
		var controller = this;
		controller.connectionStatusEnum = Object.freeze({"unknown":1, "success":2, "failure":3});
		controller.coverLetterOptions = [
			"None",
			"Basic",
			"Standard",
			"Company",
			"Personal"
		];

		controller.initialize = function()
		{
			if(faxAccount)
			{
				controller.faxAccount = angular.copy(faxAccount);
				if(!controller.faxAccount.connectionStatus)
				{
					controller.setDefaultConnectionStatus();
				}
			}
			else
			{
				controller.faxAccount = {
					enabled: true,
					enableInbound: false,
					enableOutbound: false,
					accountLogin: null,
					accountEmail: '',
					password: '',
					displayName: '',
					coverLetterOption: '',
					faxNumber: '',
					connectionStatus: controller.connectionStatusEnum.unknown
				};
			}
			// get the master flag status for inbound/outbound settings
			controller.masterFaxEnabledInbound = masterFaxEnabledInbound;
			controller.masterFaxEnabledOutbound = masterFaxEnabledOutbound;

			// switch off settings that are disabled and un-editable.
			// if this is not done, form errors may prevent saving changes to other section
			if(!controller.masterFaxEnabledInbound)
			{
				controller.faxAccount.enableInbound = false;
			}
			if(!controller.masterFaxEnabledOutbound)
			{
				controller.faxAccount.enableOutbound = false;
			}
		};

		controller.saveSettings = function (form)
		{
			if(!form.$valid)
			{
				alert("The form contains errors");
				return;
			}

			let closeSuccess = function(updatedAccount)
			{
				// keep these settings
				updatedAccount.connectionStatus = controller.faxAccount.connectionStatus;
				$uibModalInstance.close(updatedAccount);
			};
			let closeError = function(error)
			{
				console.error(error);
			};

			if (controller.faxAccount.id)
			{
				faxAccountService.updateAccountSettings(controller.faxAccount.id, controller.faxAccount).then(
					closeSuccess,
					closeError
				)
			}
			else
			{
				faxAccountService.addAccountSettings(controller.faxAccount).then(
					closeSuccess,
					closeError
				)
			}
		};
		controller.cancel = function cancel()
		{
			$uibModalInstance.dismiss('cancel');
		};

		controller.testConnection = function()
		{
			faxAccountService.testConnection(controller.faxAccount).then(
				function success(response)
				{
					if(response)
					{
						controller.faxAccount.connectionStatus = controller.connectionStatusEnum.success;
					}
					else
					{
						controller.faxAccount.connectionStatus = controller.connectionStatusEnum.failure;
					}
				},
				function error(error)
				{
					console.error(error);
					controller.faxAccount.connectionStatus = controller.connectionStatusEnum.unknown;
				}
			)
		};
		controller.setDefaultConnectionStatus = function()
		{
			controller.faxAccount.connectionStatus = controller.connectionStatusEnum.unknown;
		};

		controller.initialize();
	}
]);

/***/ }),

/***/ "./src/admin/integration/fax/faxSendReceiveController.js":
/*!***************************************************************!*\
  !*** ./src/admin/integration/fax/faxSendReceiveController.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(moment) {angular.module("Admin.Integration.Fax").controller('Admin.Integration.Fax.FaxSendReceiveController', [
	'NgTableParams',
	'providerService',
	"faxAccountService",
	"faxInboundService",
	"faxOutboundService",
	function (NgTableParams,
	          providerService,
	          faxAccountService,
	          faxInboundService,
	          faxOutboundService)
	{
		var controller = this;
		controller.systemStatusEnum = Object.freeze({"sent":"SENT", "queued":"QUEUED", "error":"ERROR"});
		controller.tabEnum = Object.freeze({"inbox":0, "outbox":1});
		controller.activeTab = controller.tabEnum.outbox;
		controller.loggedInProviderNo = null;

		controller.nextPullTime = null;
		controller.nextPushTime = null;

		controller.selectedFaxAccount = null;
		controller.faxAccountList = [];
		controller.outboxItemList = [];
		controller.inboxItemList = [];

		// ngTable object for storing search parameters
		controller.inbox =
		{
			search: {
				page: 1,
				count: 10,
				sorting: {
					DateSent: "desc"
				}
			},
			startDate: null,
			endDate: null
		};
		// ngTable object for storing search parameters
		controller.outbox =
			{
				search: {
					page: 1,
					count: 10,
					sorting: {
						DateSent: "desc"
					}
				},
				startDate: null,
				endDate: null
			};

		controller.initialize = function()
		{
			faxAccountService.listAccounts().then(
				function success(response)
				{
					controller.faxAccountList = response;
					if(controller.faxAccountList.length > 0)
					{
						controller.selectedFaxAccount = controller.faxAccountList[0];
					}
				},
				function error(error)
				{
					console.error(error);
				}
			);
			controller.loadNextPushTime();
			controller.loadNextPullTime();
		};

		controller.loadOutboxItems = function()
		{
			controller.tableParamsOutbox = new NgTableParams(
				controller.outbox.search,
				{
					getData: function(params)
					{
						controller.outbox.search = params.url();

						let defaults = {
							page: controller.outbox.search.page,
							perPage: controller.outbox.search.count
						};
						let searchParams = {
							startDate:  controller.formatOptionalDateParam(controller.outbox.startDate),
							endDate: controller.formatOptionalDateParam(controller.outbox.endDate),
						};
						var searchListHelper = new Juno.Common.SearchListHelper(defaults, searchParams);
						return faxAccountService.getOutbox(controller.selectedFaxAccount.id, searchListHelper).then(
							function success(response)
							{
								controller.outboxItemList = response.data;
								controller.tableParamsOutbox.total(response.meta.total);
								return controller.outboxItemList;
							},
							function error(error)
							{
								console.error(error);
								alert("Failed to load outbox");
							}
						);
					}
				}
			);
			controller.loadNextPushTime();
		};

		controller.loadInboxItems = function ()
		{
			controller.tableParamsInbox = new NgTableParams(
				controller.inbox.search,
				{
					getData: function (params)
					{
						controller.inbox.search = params.url();
						console.info(controller.inbox);

						let defaults = {
							page: controller.inbox.search.page,
							perPage: controller.inbox.search.count
						};
						let searchParams = {
							startDate:  controller.formatOptionalDateParam(controller.inbox.startDate),
							endDate: controller.formatOptionalDateParam(controller.inbox.endDate),
						};
						var searchListHelper = new Juno.Common.SearchListHelper(defaults, searchParams);
						return faxAccountService.getInbox(controller.selectedFaxAccount.id, searchListHelper).then(
							function success(response)
							{
								controller.inboxItemList = response.data;
								controller.tableParamsInbox.total(response.meta.total);
								return controller.inboxItemList;
							},
							function error(error)
							{
								console.error(error);
								alert("Failed to load inbox");
							}
						);
					}
				}
			);
			controller.loadNextPullTime();
		};

		controller.resendFax = function(outboxItem)
		{
			outboxItem.systemStatus = 'RESEND';
			faxOutboundService.resendOutboundFax(outboxItem.id).then(
				function success(response)
				{
					angular.copy(response, outboxItem);
					console.info(outboxItem);
					if(outboxItem.systemStatus === controller.systemStatusEnum.error)
					{
						alert(outboxItem.systemStatusMessage);
					}
				},
				function error(error)
				{
					outboxItem.systemStatus = controller.systemStatusEnum.error;
					console.error(error);
					alert(error);
				}
			);
		};

		controller.loadNextPullTime = function()
		{
			faxInboundService.getNextPullTime().then(
				function success(response)
				{
					controller.nextPullTime = response;
				},
				function error(error)
				{
					controller.nextPullTime = null;
					console.error(error);
					alert(error);
				}
			);
		};
		controller.loadNextPushTime = function()
		{
			faxOutboundService.getNextPushTime().then(
				function success(response)
				{
					controller.nextPushTime = response;
				},
				function error(error)
				{
					controller.nextPushTime = null;
					console.error(error);
					alert(error);
				}
			);
		};

		controller.changeTab = function(tabId)
		{
			controller.activeTab = tabId;
		};

		controller.openDocument = function(documentId)
		{
			let openDocumentWindow = function()
			{
				let url = "../dms/showDocument.jsp";
				let params = "segmentID="+documentId+"&providerNo="+ controller.loggedInProviderNo + "&status=A&inWindow=true&chartView&demoName=";
				let windowName = "ShowDocument" + documentId;
				window.open(url + "?" + params, windowName, "scrollbars=1,width=1024,height=768");
			};

			// if the current provider number is unknown, retrieve it before opening the new window.
			if(controller.loggedInProviderNo == null)
			{
				providerService.getMe().then(
					function success(response)
					{
						controller.loggedInProviderNo = response.providerNo;
						openDocumentWindow();
					},
					function error(error)
					{
						console.error(error);
					}
				)
			}
			else
			{
				openDocumentWindow();
			}
		};

		controller.viewDownloadFile = function(outboundId)
		{
			let url = faxOutboundService.getDownloadUrl(outboundId);
			let windowName = "ViewFaxFile" + outboundId;
			window.open(url, windowName, "scrollbars=1,width=1024,height=768");
		};

		controller.formatOptionalDateParam = function(dateObj)
		{
			return Juno.Common.Util.isUndefinedOrNull(dateObj)? null : moment(dateObj).format('YYYY-MM-DD')
		};

		controller.initialize();
	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js")))

/***/ }),

/***/ "./src/admin/integration/fax/module.js":
/*!*********************************************!*\
  !*** ./src/admin/integration/fax/module.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Admin.Integration.Fax', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/admin/integration/know2act/Know2actConfigController.js":
/*!********************************************************************!*\
  !*** ./src/admin/integration/know2act/Know2actConfigController.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module("Admin.Integration.Know2act").controller('Admin.Integration.Know2act.k2aConfigController', [
	"k2aService",
	function (k2aService)
	{
		var controller = this;

		controller.PrevListQuantity = 10;
		controller.availablePreventionRuleSets = [];
		controller.currentPreventionRulesSet = [];
		controller.clinicName = "";
		controller.k2aActive = false;

		controller.checkStatus = function ()
		{
			k2aService.isK2AInit().then(
				function success(data)
				{
					controller.k2aActive = data;
					if (controller.k2aActive)
					{
						controller.getPreventionRulesList();
						controller.getCurrentPreventionRulesVersion();
					}
				},
				function failure(error)
				{
					console.error(error);
					alert("Failed to verify K2A Status");
				}
			);
		};
		controller.checkStatus();

		controller.getPreventionRulesList = function ()
		{
			k2aService.preventionRulesList().then(
				function success(data)
				{
					controller.availablePreventionRuleSets = data;
					console.log("availablePreventionRuleSets", controller.availablePreventionRuleSets);
				},
				function failure(error)
				{
					console.error(error);
				}
			);
		};

		controller.getCurrentPreventionRulesVersion = function ()
		{
			k2aService.getCurrentPreventionRulesVersion().then(
				function success(data)
				{
					controller.currentPreventionRulesSet = data;
					console.log("currentPreventionRulesSet", data);
				},
				function failure(error)
				{
					console.error(error);
				}
			);
		};

		controller.loadPreventionRuleById = function (prevSet)
		{

			// if (confirm("<bean:message key="admin.k2a.confirmation"/>")) {
			// prevSet.agreement = "<bean:message key="admin.k2a.confirmation"/>";
			k2aService.loadPreventionRuleById(prevSet).then(function (data)
			{
				k2aService.getCurrentPreventionRulesVersion();
			});
			// }
		};

		controller.increasePrevListQuantity = function ()
		{
			controller.PrevListQuantity = controller.availablePreventionRuleSets.length;
		};

		controller.initK2A = function ()
		{
			k2aService.initK2A(controller.clinicName).then(
				function success(response)
				{
					console.info("Init complete, check status", response);
					controller.checkStatus();
				},
				function failure(error)
				{
					console.log(error);
					alert("Failed to initialize K2A");
				}
			);
		}
	}
]);

/***/ }),

/***/ "./src/admin/integration/know2act/Know2actNotificationController.js":
/*!**************************************************************************!*\
  !*** ./src/admin/integration/know2act/Know2actNotificationController.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module("Admin.Integration.Know2act").controller('Admin.Integration.Know2act.k2aNotificationController', [
	"k2aService",
	function (k2aService)
	{
		var controller = this;
		controller.page = {};
		controller.page.notifications = [];

		controller.readMore = function (notif) {
			k2aService.getMoreNotification(notif).then(
				function success(data) {
					var win = window.open(data, 'moreInfo', 'width=700,height=700');
					win.focus();
				},
				function failure(error) {
					console.error(error);
				});
		};
		controller.archive = function (notif) {
			k2aService.ackNotification(notif).then(
				function success(data) {
					controller.getNotifications();
				},
				function failure(error) {
					console.error(error);
					alert("Failed to acknowledge notification");
				});
		};
		controller.getNotifications = function () {
			k2aService.getNotifications().then(
				function success(data) {
					controller.page.notifications = data;
				},
				function failure(error) {
					console.error(error);
					alert("Failed to load notifications");
				});
		};
		controller.getNotifications();
	}
]);

/***/ }),

/***/ "./src/admin/integration/know2act/Know2actTemplateController.js":
/*!**********************************************************************!*\
  !*** ./src/admin/integration/know2act/Know2actTemplateController.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module("Admin.Integration.Know2act").controller('Admin.Integration.Know2act.k2aTemplateController', [
	"reportByTemplateService",
	"k2aService",
	function (reportByTemplateService,
	          k2aService)
	{
		var controller = this;

		controller.message = "";
		controller.k2aActive = false;
		controller.k2aReports = null;
		controller.K2A_URL = "";

		controller.dtOptions = {};
		// controller.dtOptions = DTOptionsBuilder.newOptions().withOption('order', [1, 'asc']);

		controller.checkStatus = function checkStatus() {
			k2aService.isK2AInit().then(
				function success(data) {
					controller.k2aActive = data;
				},
				function failure(error) {
					console.error(error);
					alert("Failed to verify K2A Status");
				}
			);
		};
		controller.checkStatus();

		controller.getAllK2AReports = function getAllK2AReports(){
			reportByTemplateService.getAllK2AReports().then(function(data){
				controller.k2aReports = data;
				console.log("k2a reports", controller.k2aReports);
			});
		};
		controller.getAllK2AReports();

		controller.saveK2AReport = function saveK2AReport(id){
			reportByTemplateService.getK2AReportById(id).then(function(data){
				controller.message = data;
				console.log(controller.message);
				refreshParent();
			});
		};

		controller.openK2AUrl = function openK2AUrl() {
			reportByTemplateService.getK2AUrl().then(
				function success(data) {
					window.open(data + "/#/ws/rs/posts/browse/Report");
				},
				function failure(error) {
					console.log(error);
				});
		};

		controller.refreshParent = function refreshParent() {
			window.opener.document.location.href = "../../../../oscarReport/reportByTemplate/homePage.jsp";
		};
		window.onunload = controller.refreshParent();
	}
]);

/***/ }),

/***/ "./src/admin/integration/know2act/module.js":
/*!**************************************************!*\
  !*** ./src/admin/integration/know2act/module.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Admin.Integration.Know2act', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/admin/integration/module.js":
/*!*****************************************!*\
  !*** ./src/admin/integration/module.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Admin.Integration', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/admin/module.js":
/*!*****************************!*\
  !*** ./src/admin/module.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Admin', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/billing/billingController.js":
/*!******************************************!*\
  !*** ./src/billing/billingController.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('oscarProviderViewModule').controller('BillingCtrl', [ '$scope', '$http', function ($scope,$http) {

}]);


/***/ }),

/***/ "./src/common/directives/angular-ui-calendar.js":
/*!******************************************************!*\
  !*** ./src/common/directives/angular-ui-calendar.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(moment, $) {/*
*  AngularJs Fullcalendar Wrapper for the JQuery FullCalendar
*  API @ http://arshaw.com/fullcalendar/
*
*  Angular Calendar Directive that takes in the [eventSources] nested array object as the ng-model and watches it deeply changes.
*       Can also take in multiple event urls as a source object(s) and feed the events per view.
*       The calendar will watch any eventSource array and update itself when a change is made.
*
*/

/*
 * Copied and modified for use at Cloudpractice because I couldn't figure out how to keep it from
 * loading before our initialization was done.  I've marked the changes with a CP below.
 */

angular.module('ui.calendar', [])
  .constant('uiCalendarConfig', {calendars: {}})
  .controller('uiCalendarCtrl', ['$scope', 
                                 '$locale', function(
                                  $scope, 
                                  $locale){

      var sources = $scope.eventSources,
          extraEventSignature = $scope.calendarWatchEvent ? $scope.calendarWatchEvent : angular.noop,

          wrapFunctionWithScopeApply = function(functionToWrap){
              return function(){
                  // This may happen outside of angular context, so create one if outside.

                  if ($scope.$root.$$phase) {
                      return functionToWrap.apply(this, arguments);
                  } else {
                      var args = arguments;
                      var self = this;
                      return $scope.$root.$apply(function(){
                          return functionToWrap.apply(self, args);
                      });
                  }
              };
          };

      var eventSerialId = 1;
      // @return {String} fingerprint of the event object and its properties
      this.eventFingerprint = function(e) {
        if (!e._id) {
          e._id = eventSerialId++;
        }
        
        var extraSignature = extraEventSignature({event: e}) || '';
        var start = moment.isMoment(e.start) ? e.start.unix() : (e.start ? moment(e.start).unix() : '');
        var end =   moment.isMoment(e.end)   ? e.end.unix()   : (e.end   ? moment(e.end).unix()   : '');
        
        // This extracts all the information we need from the event. http://jsperf.com/angular-calendar-events-fingerprint/3
        return "" + e._id + (e.id || '') + (e.title || '') + (e.url || '') + start + end +
          (e.allDay || '') + (e.className || '') + extraSignature;
      };

      var sourceSerialId = 1, sourceEventsSerialId = 1;
      // @return {String} fingerprint of the source object and its events array
      this.sourceFingerprint = function(source) {
          var fp = '' + (source.__id || (source.__id = sourceSerialId++)),
              events = angular.isObject(source) && source.events;
          if (events) {
              fp = fp + '-' + (events.__id || (events.__id = sourceEventsSerialId++));
          }
          return fp;
      };

      // @return {Array} all events from all sources
      this.allEvents = function() {
        // do sources.map(&:events).flatten(), but we don't have flatten
        var arraySources = [];
        for (var i = 0, srcLen = sources.length; i < srcLen; i++) {
          var source = sources[i];
          if (angular.isArray(source)) {
            // event source as array
            arraySources.push(source);
          } else if(angular.isObject(source) && angular.isArray(source.events)){
            // event source as object, ie extended form
            var extEvent = {};
            for(var key in source){
              if(key !== '_id' && key !== 'events'){
                 extEvent[key] = source[key];
              }
            }
            for(var eI = 0;eI < source.events.length;eI++){
              angular.extend(source.events[eI],extEvent);
            }
            arraySources.push(source.events);
          }
        }
        return Array.prototype.concat.apply([], arraySources);
      };

      // Track changes in array of objects by assigning id tokens to each element and watching the scope for changes in the tokens
      // @param {Array|Function} arraySource array of objects to watch
      // @param tokenFn {Function} that returns the token for a given object
      // @return {Object}
      //  subscribe: function(scope, function(newTokens, oldTokens))
      //    called when source has changed. return false to prevent individual callbacks from firing
      //  onAdded/Removed/Changed:
      //    when set to a callback, called each item where a respective change is detected
      this.changeWatcher = function(arraySource, tokenFn) {
        var self;
        var getTokens = function() {
          var array = angular.isFunction(arraySource) ? arraySource() : arraySource;
          var result = [], token, el;
          for (var i = 0, n = array.length; i < n; i++) {
            el = array[i];
            token = tokenFn(el);
            map[token] = el;
            result.push(token);
          }
          return result;
        };

        // @param {Array} a
        // @param {Array} b
        // @return {Array} elements in that are in a but not in b
        // @example
        //  subtractAsSets([6, 100, 4, 5], [4, 5, 7]) // [6, 100]
        var subtractAsSets = function(a, b) {
          var result = [], inB = {}, i, n;
          for (i = 0, n = b.length; i < n; i++) {
            inB[b[i]] = true;
          }
          for (i = 0, n = a.length; i < n; i++) {
            if (!inB[a[i]]) {
              result.push(a[i]);
            }
          }
          return result;
        };

        // Map objects to tokens and vice-versa
        var map = {};

        // Compare newTokens to oldTokens and call onAdded, onRemoved, and onChanged handlers for each affected event respectively.
        var applyChanges = function(newTokens, oldTokens) {
          var i, n, el, token;
          var replacedTokens = {};
          var removedTokens = subtractAsSets(oldTokens, newTokens);
          for (i = 0, n = removedTokens.length; i < n; i++) {
            var removedToken = removedTokens[i];
            el = map[removedToken];
            delete map[removedToken];
            var newToken = tokenFn(el);
            // if the element wasn't removed but simply got a new token, its old token will be different from the current one
            if (newToken === removedToken) {
              self.onRemoved(el);
            } else {
              replacedTokens[newToken] = removedToken;
              self.onChanged(el);
            }
          }

          var addedTokens = subtractAsSets(newTokens, oldTokens);
          for (i = 0, n = addedTokens.length; i < n; i++) {
            token = addedTokens[i];
            el = map[token];
            if (!replacedTokens[token]) {
              self.onAdded(el);
            }
          }
        };
        return self = {
          subscribe: function(scope, onArrayChanged) {
            scope.$watch(getTokens, function(newTokens, oldTokens) {
              var notify = !(onArrayChanged && onArrayChanged(newTokens, oldTokens) === false);
              if (notify) {
                applyChanges(newTokens, oldTokens);
              }
            }, true);
          },
          onAdded: angular.noop,
          onChanged: angular.noop,
          onRemoved: angular.noop
        };
      };

      this.getFullCalendarConfig = function(calendarSettings, uiCalendarConfig){
          var config = {};

          angular.extend(config, uiCalendarConfig);
          angular.extend(config, calendarSettings);

          angular.forEach(config, function(value,key){
            if (typeof value === 'function'){
              config[key] = wrapFunctionWithScopeApply(config[key]);
            }
          });

          return config;
      };

    this.getLocaleConfig = function(fullCalendarConfig) {
      if (!fullCalendarConfig.lang || fullCalendarConfig.useNgLocale) {
        // Configure to use locale names by default
        var tValues = function(data) {
          // convert {0: "Jan", 1: "Feb", ...} to ["Jan", "Feb", ...]
          var r, k;
          r = [];
          for (k in data) {
            r[k] = data[k];
          }
          return r;
        };
        var dtf = $locale.DATETIME_FORMATS;
        return {
          monthNames: tValues(dtf.MONTH),
          monthNamesShort: tValues(dtf.SHORTMONTH),
          dayNames: tValues(dtf.DAY),
          dayNamesShort: tValues(dtf.SHORTDAY)
        };
      }
      return {};
    };
  }])
  .directive('uiCalendar', ['uiCalendarConfig', function(uiCalendarConfig) {
    return {
      restrict: 'A',
      scope: {
        eventSources:'=ngModel',
        calendarWatchEvent: '&',
        enabled: '=ngEnabled'     // CP: Added an option to enable the calendar
      },
      controller: 'uiCalendarCtrl',
      link: function(scope, elm, attrs, controller) {

        var sources = scope.eventSources,
            sourcesChanged = false,
            calendar,
            eventSourcesWatcher = controller.changeWatcher(sources, controller.sourceFingerprint),
            eventsWatcher = controller.changeWatcher(controller.allEvents, controller.eventFingerprint),
            options = null;

        function getOptions(){
          var calendarSettings = attrs.uiCalendar ? scope.$parent.$eval(attrs.uiCalendar) : {},
              fullCalendarConfig;

          fullCalendarConfig = controller.getFullCalendarConfig(calendarSettings, uiCalendarConfig);

          var localeFullCalendarConfig = controller.getLocaleConfig(fullCalendarConfig);
          angular.extend(localeFullCalendarConfig, fullCalendarConfig);
          options = { eventSources: sources };
          angular.extend(options, localeFullCalendarConfig);
          //remove calendars from options
          options.calendars = null;

          var options2 = {};
          for(var o in options){
            if(o !== 'eventSources'){
              options2[o] = options[o];
            }
          }
          return JSON.stringify(options2);
        }

        scope.destroyCalendar = function(){
          if(calendar && calendar.fullCalendar){
            calendar.fullCalendar('destroy');
          }
          if(attrs.calendar) {
            calendar = uiCalendarConfig.calendars[attrs.calendar] = $(elm).html('');
          } else {
            calendar = $(elm).html('');
          }
        };

        scope.initCalendar = function(){
          // CP: The calendar won't initialize when it's not enabled
          if(scope.enabled) {
		    if (!calendar) {
		      calendar = angular.element(elm).html('');
		    }
		    calendar.fullCalendar(options);
		    if(attrs.calendar) {
		      uiCalendarConfig.calendars[attrs.calendar] = calendar;
		    }
		  }
        };
        scope.$on('$destroy', function() {
          scope.destroyCalendar();
        });

        eventSourcesWatcher.onAdded = function(source) {
          if (calendar && calendar.fullCalendar) {
            calendar.fullCalendar(options);
            if (attrs.calendar) {
                uiCalendarConfig.calendars[attrs.calendar] = calendar;
            }
            calendar.fullCalendar('addEventSource', source);
            sourcesChanged = true;
          }
        };

        eventSourcesWatcher.onRemoved = function(source) {
          if (calendar && calendar.fullCalendar) {
            calendar.fullCalendar('removeEventSource', source);
            sourcesChanged = true;
          }
        };

        eventSourcesWatcher.onChanged = function() {
          if (calendar && calendar.fullCalendar) {
            calendar.fullCalendar('refetchEvents');
            sourcesChanged = true;
          }

        };

        eventsWatcher.onAdded = function(event) {
          if (calendar && calendar.fullCalendar) {
            calendar.fullCalendar('renderEvent', event, (event.stick ? true : false));
          }
        };

        eventsWatcher.onRemoved = function(event) {
          if (calendar && calendar.fullCalendar) {
            calendar.fullCalendar('removeEvents', event._id);
          }
        };

        eventsWatcher.onChanged = function(event) {
          if (calendar && calendar.fullCalendar) {
            var clientEvents = calendar.fullCalendar('clientEvents', event._id);
            for (var i = 0; i < clientEvents.length; i++) {
              var clientEvent = clientEvents[i];
              clientEvent = angular.extend(clientEvent, event);
              calendar.fullCalendar('updateEvent', clientEvent);
            }
          }
        };

        eventSourcesWatcher.subscribe(scope);
        eventsWatcher.subscribe(scope, function() {
          if (sourcesChanged === true) {
            sourcesChanged = false;
            // return false to prevent onAdded/Removed/Changed handlers from firing in this case
            return false;
          }
        });

        scope.$watch(getOptions, function(newValue, oldValue) {
          if(newValue !== oldValue) {
            scope.destroyCalendar();
            scope.initCalendar();
          } else if((newValue && angular.isUndefined(calendar))) {
            scope.initCalendar();
          }
        });
      }
    };
}]);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js"), __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_alpha.js":
/*!***********************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_alpha.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caFieldAlpha',

	[
		'fieldHelperService',

	function (
		helper
	)
{
	var template_function = function template_function(element, attributes) {
		return helper.resolve_template(attributes, 'src/common/directives/clinicaid/ca_field_alpha');
	};

	return {
		restrict: 'EAC',
		scope: helper.default_scope,
		templateUrl: template_function,
		replace: true,
		link: helper.default_link_function,
		controller: helper.default_controller
	};

}]);


/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_alphadate.js":
/*!***************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_alphadate.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(moment) {angular.module('Common').directive(
	'caFieldAlphadate',

	[
		'fieldHelperService',

	function (
		helper
	)
{
	var template_function = function template_function(element, attributes) {
		return helper.resolve_template(attributes, 'src/common/directives/clinicaid/ca_field_alphadate');
	};

	var scope = angular.copy(helper.default_scope);
	scope.placeholder = '@caPlaceholder';

	var alphadate_link_function = function alphadate_link_function(
		$scope, element, attribute, controller)
	{
		// use the passed-in placeholder or default to 'yyyy-mm-dd'
		$scope.input_placeholder = $scope.placeholder;
		if(!angular.isDefined($scope.input_placeholder))
		{
			$scope.input_placeholder = 'yyyy-mm-dd';
		}

		$scope.on_blur = function on_blur()
		{
			// parse the input as a date, then format as YYYY-MM-DD (or clear it)
			var momentDate = moment($scope.model, ["YYYY-MM-DD", "YYYYMMDD"], true);
			if(momentDate.isValid())
			{
				$scope.model = momentDate.format("YYYY-MM-DD");
			}
			else
			{
				$scope.model = null;
			}
		};

		// run the default field link function
		helper.default_link_function($scope, element, attribute, controller);
	};

	return {
		restrict: 'EAC',
		scope: scope,
		templateUrl: template_function,
		replace: true,
		link: alphadate_link_function,
		controller: helper.default_controller
	};

}]);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js")))

/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_autocomplete.js":
/*!******************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_autocomplete.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caFieldAutocomplete',

	[
		'$q',
		'globalStateService',
		'$timeout',
		'fieldHelperService',
		'autoCompleteService',
		'resultsService',
		'focusService',

	function($q, global_state, $timeout, helper, autocomplete, results_factory, focus)
{
	var min_length_zero_types = [
		'yes_no_boolean',
		'gender',
		'schedule',
		'schedule_type',
		'schedule_template',
		'schedule_event_status',
		'user_roles',
		'user_type',
		'province',
		'country',
		'custom_tax',
		'alberta_location_code',
		'alberta_default_time_role_modifier',
		'service_modifier',
		'ontario_office_code',
		'ontario_service_location_indicator',
		'bc_service_location_code',
		'bc_referral_code',
		'sask_clinic',
		'sask_oop_province',
		'sask_mode',
		'sask_location_of_service',
		'sask_location_of_service_short',
		'sask_corporation_indicator',
		'sask_submission_type',
		'sask_submission_file',
		'provider' ];

	var scope = angular.copy(helper.default_scope);

	scope.placeholder = '@caPlaceholder';
	scope.input_group_class = '@caInputGroupClass';

	// must be a valid generic_ref type
	scope.autocomplete_type = '@caAutocompleteType';

	// Extra params to pass in the REST call
	scope.params = '=caParams';
	scope.params_fn = '&caParamsFn';

	// the on-select function to call, and if applicable, additional data to pass into it
	scope.on_select_fn = '&caOnSelect';
	scope.on_select_data = '=caOnSelectData';

	// the clear function to call, and if applicable, data to pass into it
	scope.on_clear_fn = '&caClear';
	scope.on_clear_data = '=caClearData';

	// the create function to call
	// create option will only appear if function is provided and create_if is met (if also provided)
	// and there is no selected autocomplete value
	scope.on_create_fn = '&caCreate';
	scope.create_if = '=caCreateIf';

	// the modify function to call
	// modify option will only appear if function is provided and modify_if is met (if also provided)
	// and there is a selected autocomplete value
	scope.on_modify_fn = '&caModify';
	scope.modify_if = '=caModifyIf';
	scope.create_on_not_found = '=?caCreateOnNotFound';
	scope.editable = '=?caEditable';

	// List of records to exclude from the results. EG These items are already linked
	// Must be an array of pojo models
	scope.ca_exclude_list = '=caExcludeList';

	var template_function = function template_function(element, attributes) {
		return helper.resolve_template(attributes, 'code/common/directives/ca_field_autocomplete');
	};

	var autocomplete_link_function = function autocomplete_link_function(
		$scope, element, attribute, controller)
	{
		$scope.autocomplete = autocomplete;
		$scope.search_field = null;

		if(!angular.isDefined($scope.model))
		{
			$scope.model = null;
		}

		if(!Juno.Common.Util.exists($scope.create_on_not_found))
		{
			$scope.create_on_not_found = false;
		}

		if(!Juno.Common.Util.exists($scope.editable))
		{
			$scope.editable = false;
		}

		// ensure autocomplete type is either a listed dao or defined in GenericRef
		if(Object.keys($scope.autocomplete.dao_map).indexOf(
					$scope.autocomplete_type) == -1 &&
				Object.keys(Clinicaid.Model.GenericRef.REF_DEFINITIONS).indexOf(
					$scope.autocomplete_type) == -1)
		{
			console.log("invalid autocomplete type:", $scope.autocomplete_type,
				"valid values: (" ,
					Object.keys($scope.autocomplete.dao_map),
					Object.keys(Clinicaid.Model.GenericRef.REF_DEFINITIONS));
			return;
		}

		// default min-length is 1 except for some types
		$scope.autocomplete_min_length =
			(min_length_zero_types.indexOf($scope.autocomplete_type) != -1) ? 0 : 1;

		// use the passed-in placeholder or default to 'Search...'
		$scope.input_placeholder = $scope.placeholder;
		if(!angular.isDefined($scope.input_placeholder))
		{
			$scope.input_placeholder = 'Search...';
		}

		// clear function:
		// call the passed-in function with the passed-in data
		$scope.clear_autocomplete_search = function clear_autocomplete_search()
		{
			$scope.search_field = null;
		};

		$scope.clear_autocomplete_model = function clear_autocomplete_model(focus_input)
		{
			$scope.model = null;
			if(angular.isFunction($scope.on_clear_fn()))
			{
				$scope.on_clear_fn()($scope.on_clear_data);
			}

			if(focus_input)
			{
				focus.element(element.find('input'));
			}
		};

		// select function:
		// call the passed-in function with the autocomplete and passed-in data
		$scope.on_select = function on_select($item, $model, $label, $event)
		{
			$scope.model = $item;
			$scope.change_fn();
			if(angular.isFunction($scope.on_select_fn()))
			{
				$scope.on_select_fn()($item, $model, $label, $event, $scope.on_select_data);
			}
		};

		$scope.create_on_not_found_fn = function create_on_not_found_fn(temp_model)
		{
			if(Juno.Common.Util.exists(temp_model))
			{
				$scope.autocomplete.create_on_not_found(
						temp_model, $scope.autocomplete_type, true).then(
						function success(results)
						{
							$scope.on_select(results.data, results.data, null, null, $scope.on_select_data);
							if (angular.isFunction($scope.change_fn))
							{
								$scope.change_fn();
							}
						}, function error(errors)
						{
							console.log('error:', errors);
						}
				);
			}
		};

		$scope.on_change = function on_change()
		{
			if(!$scope.editable)
			{
				$scope.clear_autocomplete_model();
				return;
			}

			var temp_model = $scope.autocomplete.build_model_object(
					$scope.autocomplete_type, $scope.search_field);

			$scope.on_select(temp_model, temp_model, null, null, $scope.on_select_data);

			if ($scope.create_on_not_found)
			{
				$scope.create_on_not_found_fn(temp_model);
			}
		};

		// blur function
		$scope.on_blur = function on_blur()
		{
			// this is for the case when the user does a search and then blurs the field:
			// if the value is null, call the clear function (since the select function doesn't fire)
			if($scope.model == null)
			{
				$scope.clear_autocomplete_model();
				$scope.clear_autocomplete_search();

				// only run the change function if the model existed when the autocomplete was last focused
				if(Juno.Common.Util.exists($scope.model_on_focus) &&
					angular.isFunction($scope.change_fn))
				{
					$scope.change_fn();
				}
			}

			// call the passed-in function, if provided
			if (angular.isFunction($scope.blur_fn))
			{
				$scope.blur_fn();
			}
		};

		// on focus
		$scope.on_focus = function on_focus()
		{
			// make a copy of the current model (needed for comparison on_blur)
			$scope.model_on_focus = angular.copy($scope.model);

			// call the passed-in function, if provided
			if(angular.isFunction($scope.focus_fn))
			{
				$scope.focus_fn();
			}
		};

		// create function: call the passed-in function, if provided
		$scope.on_create = null;
		if(angular.isFunction($scope.on_create_fn()))
		{
			$scope.on_create = function on_create()
			{
				$scope.on_create_fn()();
			};
		}

		// modify function: call the passed-in function, if provided
		$scope.on_modify = null;
		if(angular.isFunction($scope.on_modify_fn()))
		{
			$scope.on_modify = function on_modify()
			{
				$scope.on_modify_fn()();
			};
		}
		$scope.show_modify_if = (typeof $scope.modify_if === 'undefined' || $scope.modify_if);

		// autocomplete search: invoke configured function
		$scope.autocomplete_items = function autocomplete_items($viewValue)
		{
			var deferred = $q.defer();
			var params = $scope.params ? $scope.params : {};
			if(angular.isFunction($scope.params_fn))
			{
				// If the params_fn definition has arguments, $scope.params_fn() with return the results.
				// If it doesnt have armuments it returns a reference to the funciton which still needs
				// to be executed to get the results
				var params_check = $scope.params_fn();
				if(angular.isFunction(params_check))
				{
					params_check = params_check();
				}
				angular.extend(params, params_check);
			}

			autocomplete.get_items($scope.autocomplete_type, $viewValue, params).then(
					function success(results)
					{
						var out_items = results.data;
						if(Juno.Common.Util.exists($scope.ca_exclude_list))
						{
							out_items = $scope.prune_items(out_items);
						}
						deferred.resolve(out_items);
					}, function error(errors)
					{
						deferred.reject(errors)
					}
			);
			return deferred.promise;
		};

		$scope.prune_items = function prune_items(items)
		{
			var out_items = [];
			for(var i = 0; i < items.length; i++)
			{
				var in_list = false;
				for(var ii = 0; ii < $scope.ca_exclude_list.length; ii++)
				{
					var exclude_item = $scope.ca_exclude_list[ii];
					if(typeof(exclude_item) == 'string')
					{
						if(items[i].data[items[i].value_field] == exclude_item)
						{
							in_list = true;
						}
					} else
					{
						if(items[i].data[items[i].value_field] ==
								exclude_item.data[$scope.ca_exclude_list[ii].value_field])
						{
							in_list = true;
						}
					}
				}
				if(!in_list)
				{
					out_items.push(items[i]);
				}
			}
			return out_items;
		};

		// autocomplete format: format the selection for display in the box
		$scope.autocomplete_input_formatter = function autocomplete_input_formatter($model)
		{
			return $model != null ? $model.autocomplete_input_formatted : null;
		};

		// show the create button?
		$scope.show_create = function show_create()
		{
			return $scope.on_create && !$scope.model &&
				(typeof $scope.create_if === 'undefined' || $scope.create_if);
		};

		// show the modify button?
		$scope.show_modify = function show_modify()
		{
			return $scope.on_modify && $scope.model && !$scope.model.dummy_record &&
				(typeof $scope.modify_if === 'undefined' || $scope.modify_if);
		};

		// show the buttons?
		$scope.show_buttons = function show_buttons()
		{
			return !$scope.disabled && ($scope.model || $scope.show_create());
		};

		// required for initialization of the search field value:
		// the directive is created before the model is populated
		$scope.$watch('model', function(new_value, old_value)
		{
			$scope.search_field = $scope.model;
		});

		// run the default field link function
		helper.default_link_function($scope, element, attribute, controller);
	};

	return {
		restrict: 'E',
		scope: scope,
		templateUrl: template_function,
		replace: true,
		link: autocomplete_link_function,
		controller: helper.default_controller
	};

}]);


/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_boolean.js":
/*!*************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_boolean.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caFieldBoolean',

	[
		'fieldHelperService',

	function(
		helper
	)
{

	var template_function = function template_function(element, attributes) {
		return helper.resolve_template(attributes, 'src/common/directives/clinicaid/ca_field_boolean');
	};

	var link_function = function link_function(
			$scope, element, attribute, controller)
	{
		if(!Juno.Common.Util.exists($scope.model))
		{
			$scope.model = false;
		}

		// run the default field link function
		helper.default_link_function($scope, element, attribute, controller);
	};

	return {
		restrict: 'EAC',
		scope: helper.default_scope,
		templateUrl: template_function,
		replace: true,
		link: link_function,
		controller: helper.default_controller
	};

}]);


/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_button_group.js":
/*!******************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_button_group.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
		'caFieldButtonGroup',

		[
			'fieldHelperService',

			function(
					helper
			)
			{

				var link_function = function link_function($scope, element, attribute, controller)
				{
					// run the default field link function
					helper.default_link_function($scope, element, attribute, controller);

					$scope.selected_values = [$scope.field_default];

					$scope.is_selected = function is_selected(value)
					{
						return $scope.selected_values.indexOf(value) != -1;
					};

					$scope.toggle_selected = function toggle_selected(value)
					{
						var value_index = $scope.selected_values.indexOf(value);
						if(value_index == -1)
						{
							$scope.selected_values.push(value);
						}
						else
						{
							$scope.selected_values.splice(value_index, 1);
						}
						$scope.model = $scope.selected_values.join(",");
					};
				};

				var scope = angular.copy(helper.default_scope);
				scope.field_settings = '=caFieldSettings';
				scope.field_default = '=caFieldDefault';

				return {
					restrict: 'EAC',
					scope: scope,
					templateUrl: 'src/common/directives/clinicaid/ca_field_button_group.jsp',
					replace: true,
					link: link_function,
					controller: helper.default_controller
				};

			}]);


/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_color.js":
/*!***********************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_color.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caFieldColor', 

	[
		'fieldHelperService', 

	function(
		helper
	)
{
    return {
		restrict: 'EAC',
		scope: helper.default_scope,
		templateUrl: 'src/common/directives/clinicaid/ca_field_color.jsp',
		replace: true,
		link: helper.default_link_function,
		controller: helper.default_controller, 
	};
}]);


/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_currency.js":
/*!**************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_currency.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caFieldCurrency', 

	[
		'fieldHelperService', 

	function(
		helper
	)
{
	
	return {
		restrict: 'EAC',
		scope: helper.default_scope,
		templateUrl: 'src/common/directives/clinicaid/ca_field_currency.jsp',
		replace: true,
		link: helper.default_link_function,
		controller: helper.default_controller 
	};
	
}]);


/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_currency_filter.js":
/*!*********************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_currency_filter.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caFieldCurrencyFilter',
	[
		'$filter',
		function ($filter)
		{
			var link_function = function link_function(scope, element, attribute, ngModelController)
			{
				ngModelController.$parsers.push(
					function fromUser(text)
					{
						if (text == null)
						{
							text = "0";
						}

						var tempValue = text.replace(/[$,]/g, '');
						if (tempValue.trim() == "")
						{
							tempValue = "0";
						}
						var newValue = parseFloat(tempValue).toFixed(4);
						if (isNaN(newValue))
						{
							newValue = null;
						}
						return newValue;
					});

				ngModelController.$formatters.unshift(
					function toUser(text)
					{
						if (text == null)
						{
							return null;
						}

						var currencyFilter = $filter('myCurrencyFilter');
						var newValue = currencyFilter(text);

						return newValue;
					});
			};

			return {
				require: 'ngModel',
				restrict: 'EAC',
				link: link_function
			};

		}
	]
);


/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_date.js":
/*!**********************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_date.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) { angular.module('Common').directive(
 'caFieldDate',

 [
	 '$compile',
	 '$timeout',
	 'fieldHelperService',

	 function(
		 $compile,
		 $timeout,
		 helper
	 )
 {
	 var scope = angular.copy(helper.default_scope);

	 scope.date_picker_id = '@caDatePickerId';
	 scope.orientation = '@caOrientation';
	 scope.use_multi_date = '@caUseMultiDate';
	 scope.container_id = '@caContainerId';

	 var template_function = function template_function(element, attributes) {
		 if(attributes['caTemplate'] == 'bare')
		 {
			 return 'src/common/directives/clinicaid/ca_field_date_bare.jsp';
		 }
		 return 'src/common/directives/clinicaid/ca_field_date.jsp';
	 };

	 var link_function = function link_function($scope, element, attribute, controller)
	 {
		 // Creating the datepicker changes the value of the ng-model and fires the
		 // ng-change event. This disables the event until the field initialization is complete
		 $scope.initialization_complete = false;
		 $scope.delayed_change_fn = function()
		 {
			 if($scope.initialization_complete === true)
			 {
				 $scope.change_fn();
			 }
		 };

		 helper.merge_title_messages($scope);

		 $scope.datepicker = null;
		 $scope.is_multi_date = false;
		 $scope.CTRL_KEY = 17;
		 $scope.LEFT_SHIFT_KEY = 16;
		 $scope.ctrl_key_down = false;
		 $scope.shift_key_down = false;
		 $scope.is_visible = false;

		 // Default container for datepicker is "body", but can be overridden
		 $scope.container = $("body");
		 if(!$scope.container_id)
		 {
			 $scope.container = $("#" + $scope.container_id);
		 }

		 var buttons_html_with_picker = "<tfoot><tr>" +
				 "<th style='display: table-cell;' ng-class=\"{active: is_multi_date}\" ng-click='toggle_multi()' colspan='2' class='multi'>Multi</th>" +
				 //"<th style='display: table-cell;' colspan='3' class='today'>Today</th>" +
				 "<th style='display: table-cell;' ng-click='close_date_picker()' colspan='3' class='multi'>Close</th>" +
					 //	"class='close'>Close</th></tr></tfoot>";
				 "<th style='display: table-cell;' colspan='2' class='clear'>Clear</th></tr>";

		 var buttons_html = "<tfoot><tr>" +
				 "<th style='display: table-cell;' colspan='4' class='today'>Today</th>" +
				 "<th style='display: table-cell;' colspan='3' class='clear'>Clear</th></tr>";
				 //"<tr class='close'><th style='display: table-cell;' ng-click='close_date_picker()' colspan='7' " +
		 			//	"class='close'>Close</th></tr></tfoot>";

		 $scope.create_datepicker = function create_datepicker()
		 {
			 // Build datepicker. By default put it in the <body> tag so that it is
			 // placed correctly and is always on top. They container can be overridden
			 // though.
			 if($scope.container_id == null)
			 {
				 $scope.datepicker.datepicker({
					 multidate: $scope.is_multi_date,
					 autoclose: !$scope.is_multi_date,
					 todayHighlight: true,
					 todayBtn: 'linked',
					 clearBtn: true,
					 toggleActive: $scope.is_multi_date,
					 orientation: $scope.orientation,
					 format: 'yyyy-mm-dd',
					 showOnFocus: false,
					 keyboardNavigation: false
				 });
			 }
			 else
			 {
				 $scope.datepicker.datepicker({
					 multidate: $scope.is_multi_date,
					 autoclose: !$scope.is_multi_date,
					 todayHighlight: true,
					 todayBtn: 'linked',
					 clearBtn: true,
					 toggleActive: $scope.is_multi_date,
					 orientation: $scope.orientation,
					 format: 'yyyy-mm-dd',
					 container: '#' + $scope.container_id,
					 showOnFocus: false,
					 keyboardNavigation: false
				 });

			 }

			 $scope.datepicker.datepicker().on('show', function ()
			 {
				 $scope.is_visible = true;
			 });

			 $scope.datepicker.datepicker().on('hide', function ()
			 {
				 $scope.is_visible = false;
			 });
		 };

		 $scope.toggle_multi = function toggle_multi(force_true, input_string)
		 {
			 if($scope.use_multi_date == 'true')
			 {
				 $scope.is_multi_date = force_true || !$scope.is_multi_date;
				 $scope.datepicker.datepicker('remove');
				 $scope.create_datepicker();
				 $scope.datepicker.datepicker('show');

				 // Datepicker forces valid dates on the input box when the datepicker opens. This breaks
				 // manual entry when you istart to enter a second date and auto switch to multi date mode.
				 // We put the date string back in after the parse occurs, to account for this
				 if(input_string && input_string.length > 0)
				 {
					 element.find("input").val(input_string);
				 }
			 }
		 };

		 // We assume the client is done picking multiple dates when they release control
		 // Close the datepicker
		 $scope.key_up = function key_up(event)
		 {
			 if ($scope.use_multi_date == 'true')
			 {
				 // Switch to multi-date if a date seperator (comma) is entered
				 if (!$scope.is_multi_date)
				 {
					 var input_value = element.find("input").val();
					 if (input_value.search(",") != -1)
					 {
						 $scope.toggle_multi(true, input_value);
					 }
				 }

				 if (event.keyCode == $scope.CTRL_KEY)
				 {
					 $scope.close_date_picker(event);
					 $scope.ctrl_key_down = false;
				 }
				 else if (event.keyCode == $scope.LEFT_SHIFT_KEY)
				 {
					 $scope.close_date_picker(event);
					 $scope.shift_key_down = false;
				 }
			 }
		 };

		 // Switch to multi-date mode when control or shift is pressed
		 $scope.key_down = function key_down(event)
		 {
			 if ($scope.use_multi_date == 'true')
			 {
				 // Switch to multi-date when ctrl is pressed. For selecting arbitrary dates
				 if ($scope.ctrl_key_down)
				 {
					 return;
				 }

				 if (event.keyCode == $scope.CTRL_KEY)
				 {
					 $scope.ctrl_key_down = true;
					 $scope.toggle_multi(true);
				 }
				 // Switch to multi-date when shift. For selecting date ranges. NOT IMPLEMENTED
				 else if (event.keyCode == $scope.LEFT_SHIFT_KEY)
				 {
					 $scope.shift_key_down = true;
					 $scope.toggle_multi(true);
				 }
			 }
		 };

		 $scope.on_focus = function on_focus(event)
		 {
			 // Prevent toggling datepicker on click and on focus
			 if(!$scope.is_visible)
			 {
				 $scope.open_date_picker(event);
			 }

			 $scope.focus_fn();
		 };

		 $scope.on_click = function on_click(event)
		 {
			 // Toggle datepicker open/closed
			 if(!$scope.is_visible)
			 {
				 $scope.open_date_picker(event);
			 }
		 };

		 $scope.open_date_picker = function open_date_picker(event)
		 {
			 var dates = element.find("input").val().split(',');
			 var new_is_multi_date = false;

			 // Use whatever dates are in the input box when opening datepicker
			 if(dates && dates.length > 1)
			 {
				 new_is_multi_date = true;
			 }

			 $scope.datepicker.datepicker('setDates', dates);

			 // Switch between multi date and single date picker depending on number of dates in
			 // input box
			 if($scope.use_multi_date == 'true' && new_is_multi_date != $scope.is_multi_date)
			 {
				 $scope.toggle_multi();
			 }
			 else
			 {
				 $scope.datepicker.datepicker('show');
			 }
		 };

		 $scope.close_date_picker = function close_date_picker(event)
		 {
			 $scope.datepicker.datepicker('hide');
		 };

		 // wrap focus function the same way as the field_helper
		 $scope.focus_fn = function on_focus()
		 {
			 if(angular.isFunction($scope.on_focus_fn))
			 {
				 // only call the focus function if the field still has focus after a timeout
				 $timeout(function() {
					 if($(element).find(" input:enabled, select:enabled, textarea:enabled ").is(':focus'))
					 {
						 $scope.on_focus_fn();
					 }
					 else
					 {
						 console.log('ignoring on focus function - element is no longer in focus', $scope.name)
					 }
				 });
			 }
		 };

		 $scope.$watch('focus_field', function()
		 {
			 if($scope.focus_field == $scope.name)
			 {
				 var input_box = element.find("input");
				 // Focus and select the input element
				 $timeout(function()
				 {
					 if(!input_box.is(':focus'))
					 {
						 input_box.focus();
					 }
					 input_box.select();
				 });
			 }
		 });

		 // Initial Datepicker setup
		 $timeout( function() {
			 var date_picker_id = attribute.caDatePickerId;
			 if(!date_picker_id)
			 {
				 date_picker_id = 'ca-date-picker';
			 }
			 $scope.datepicker = $('#' + date_picker_id).find('input');
			 $scope.create_datepicker();

			 $scope.datepicker.on('show', function(e) {

				 // Show multi button only if this is a multi-date picker
				 var dropdown = $(".datepicker.datepicker-dropdown");
				 var footer = dropdown.find('tfoot');
				 if($scope.use_multi_date == 'true')
				 {
					 footer.replaceWith(buttons_html_with_picker);
				 }
				 else
				 {
					 footer.replaceWith(buttons_html);
				 }
				 footer = dropdown.find('tfoot');
				 $compile(footer.contents())($scope);
				 $scope.initialization_complete = true;
			 })
		 });
	 };

	 return {
		 restrict: 'EA',
		 scope: scope,
		 replace: true,
		 templateUrl: template_function,
		 link: link_function,
		 controller: helper.default_controller
	 };

 }]);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_date3.js":
/*!***********************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_date3.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {angular.module('Common').directive(
	'caFieldDate3',

	[
		'$timeout',
		'fieldHelperService',

	function(
		$timeout, helper
	)
{
	var default_scope = angular.copy(helper.default_scope);

	delete default_scope.focus_fn;
	default_scope.on_focus_fn_year = '&caFocusYear';
	default_scope.on_focus_fn_month = '&caFocusMonth';
	default_scope.on_focus_fn_day = '&caFocusDay';

	var get_date = function get_date(new_value, old_value, $scope)
	{
		$scope.field_year = '';
		$scope.field_month = '';
		$scope.field_day = '';

		if(!new_value)
		{
			return;
		}

		var date_part_array = new_value.split('-');

		if(angular.isDefined(date_part_array[0]))
		{
			$scope.field_year = date_part_array[0];
		}

		if(angular.isDefined(date_part_array[1]))
		{
			$scope.field_month = date_part_array[1];
		}

		if(angular.isDefined(date_part_array[2]))
		{
			$scope.field_day = date_part_array[2];
		}
	};

	var put_date = function put_date(new_value, old_value, $scope)
	{
		if(!$scope.field_year && !$scope.field_month && !$scope.field_day)
		{
			$scope.model = null;
		}
		else
		{
			$scope.model = $scope.field_year + '-' +
				$scope.field_month + '-' +
				$scope.field_day;
		}
	};

	var template_function = function template_function(element, attributes) {
		return helper.resolve_template(attributes, 'src/common/directives/clinicaid/ca_field_date3');
	};

	var link_function = function link_function($scope, element, attribute, controller)
	{
		// Don't call the helper default link function, we want to do it differently
		// We do still need to merge the title messages though
		helper.merge_title_messages($scope);

		$scope.field_year = '';
		$scope.field_month = '';
		$scope.field_day = '';

		// wrap each of the focus functions the same way as the field_helper

		$scope.focus_fn_year = function focus_fn_year()
		{
			if(angular.isFunction($scope.on_focus_fn_year))
			{
				// only call the focus function if the field still has focus after a timeout
				$timeout(function() {
					if($(element).find(" input:enabled, select:enabled, textarea:enabled ").is(':focus'))
					{
						$scope.on_focus_fn_year();
					}
					else
					{
						console.log('ignoring on focus function - element is no longer in focus', $scope.name)
					}
				});
			}
		};

		$scope.focus_fn_month = function focus_fn_month()
		{
			if(angular.isFunction($scope.on_focus_fn_month))
			{
				// only call the focus function if the field still has focus after a timeout
				$timeout(function() {
					if($(element).find(" input:enabled, select:enabled, textarea:enabled ").is(':focus'))
					{
						$scope.on_focus_fn_month();
					}
					else
					{
						console.log('ignoring on focus function - element is no longer in focus', $scope.name)
					}
				});
			}
		};

		$scope.focus_fn_day = function focus_fn_day()
		{
			if(angular.isFunction($scope.on_focus_fn_day))
			{
				// only call the focus function if the field still has focus after a timeout
				$timeout(function() {
					if($(element).find(" input:enabled, select:enabled, textarea:enabled ").is(':focus'))
					{
						$scope.on_focus_fn_day();
					}
					else
					{
						console.log('ignoring on focus function - element is no longer in focus', $scope.name)
					}
				});
			}
		};

		$scope.$watch('focus_field',
			function update_focus(new_value, old_value, $scope)
		{
			if($scope.focus_field == $scope.name + "[year]")
			{
				// Focus the input element
				$(element).find(".ca-field-date3 input").get(0).focus().select();
			}
			else if($scope.focus_field == $scope.name + "[month]")
			{
				// Focus the input element
				$(element).find(".ca-field-date3 input").get(1).focus().select();
			}
			else if($scope.focus_field == $scope.name + "[day]")
			{
				// Focus the input element
				$(element).find(".ca-field-date3 input").get(2).focus().select();
			}
		});

		// listen for focusCaFocusField event: when it matches, focus the element
		$scope.$on('focusCaFocusField', function(e, focus)
		{
			if(Juno.Common.Util.exists($scope.name) && $scope.name == focus)
			{
				$(element).find(".ca-field-date3 input").get(0).focus().select();
			}
		});

		$scope.$watch('model', get_date);

		$scope.$watch('field_year', put_date);
		$scope.$watch('field_month', put_date);
		$scope.$watch('field_day', put_date);
	};

	return {
		restrict: 'E',
		scope: default_scope,
		templateUrl: template_function,
		replace: true,
		link: link_function,
		controller: helper.default_controller
	};

}]);


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_number.js":
/*!************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_number.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caFieldNumber',

	[
		'fieldHelperService',

	function(
		helper
	)
{
	var scope = angular.copy(helper.default_scope);
	scope.pad_length = '@caPadLength';

	var link_function = function link_function($scope, element, attribute, controller)
	{
		if(!$scope.pad_length)
		{
			$scope.pad_length = 0;
		}

		// run the default field link function
		helper.default_link_function($scope, element, attribute, controller);
	};

	return {
		restrict: 'EAC',
		scope: scope,
		templateUrl: 'src/common/directives/clinicaid/ca_field_number.jsp',
		replace: true,
		link: link_function,
		controller: helper.default_controller
	};

}]);


/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_select.js":
/*!************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_select.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caFieldSelect',

	[
		'fieldHelperService',

	function(
		helper
	)
{
	var scope = angular.copy(helper.default_scope);

	scope.options = '=caOptions';
	scope.include_empty_option = '@caEmptyOption';

	var template_function = function template_function(element, attributes) {
		return helper.resolve_template(attributes, 'src/common/directives/clinicaid/ca_field_select');
	};

  return {
		restrict: 'EAC',
		scope: scope,
		templateUrl: template_function,
		replace: true,
		link: helper.default_link_function,
		controller: helper.default_controller
	};
}]);


/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_text.js":
/*!**********************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_text.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caFieldText',

	[
		'fieldHelperService',

	function(
		helper
	)
{
	var scope = angular.copy(helper.default_scope);

	scope.rows = '@caRows';
	scope.max_characters = '@caMaxCharacters';

	var template_function = function template_function(element, attributes) {
		return helper.resolve_template(attributes, 'src/common/directives/clinicaid/ca_field_text');
	};

	var link_function = function link_function($scope, element, attribute, controller)
	{
		if(!$scope.model)
		{
			$scope.model = '';
		}

		$scope.$watch('model', function(new_value, old_value)
		{
			if(Juno.Common.Util.exists($scope.model) && $scope.model.length > $scope.max_characters)
			{
				$scope.error_message = "Character limit exceeded. Max allowed: " + $scope.max_characters;
			}
		});

		helper.default_link_function($scope, element, attribute, controller);
	};

	return {
		restrict: 'EAC',
		scope: scope,
		templateUrl: template_function,
		replace: true,
		link: link_function,
		controller: helper.default_controller
	};

}]);



/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_time.js":
/*!**********************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_time.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {angular.module('Common').directive(
	'caFieldTime',

	[
		'fieldHelperService',
		'$timeout',

	function (
		helper,
		$timeout)
{

	var scope = angular.copy(helper.default_scope);

	scope.minute_step = '=caMinuteStep';

	/* These are all available for the timepicker, but are not wired up yet
	 scope.input_size = '@caInputSize';
	 scope.template = '@caTemplate';
	 scope.max_hours = '@caMaxHours';
	 scope.snap_to_step = '@caSnapToStep';
	 scope.show_seconds = '@caShowSeconds';
	 scope.default_time = '@caDefaultTime';
	 scope.show_meridian = '@caShowMeridian';
	 scope.show_inputs = '@caShowInputs';
	 scope.disable_focus = '@caDisableFocus';
	 scope.disable_mousewheel = '@caDisableMousewheel';
	 scope.disable_unit_hightlight = '@disableUnitHightlight';
	 scope.modal_backdrop = '@caModalBackdrop';
	 scope.append_widget_to = '@caAppendWidgetTo';
	 scope.explicit_mode = '@caExplicitMode';
	 scope.icons = '@caIcons';
	*/

	var template_function = function template_function(element, attributes) {
		return helper.resolve_template(attributes, 'src/common/directives/clinicaid/ca_field_time');
	};

	var link_function = function link_function($scope, element, attribute, controller)
	{
		$scope.picker_container = null;
		$scope.toggle_widget = function toggle_widget()
		{
			$scope.picker_container.timepicker('showWidget');
		};

		$timeout(function()
		{
			$scope.picker_container = $('#input-' + $scope.name);
			$scope.picker_container.timepicker(
				{
					defaultTime: false,
					minuteStep: $scope.minute_step,
					//disableFocus: true,
					//showInputs: false,
					icons: {
						up: "fa fa-chevron-up",
						down: "fa fa-chevron-down"
					}
				}
			);
		});

		// run the default field link function
		helper.default_link_function($scope, element, attribute, controller);

	};

	return {
		restrict: 'EAC',
		scope: scope,
		templateUrl: template_function,
		replace: true,
		link: link_function,
		controller: helper.default_controller
	};

}]);


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/common/directives/clinicaid/ca_field_toggle.js":
/*!************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_field_toggle.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
		'caFieldToggle',

		[
			'fieldHelperService',

			function(
					helper
			)
			{

				var template_function = function template_function(element, attributes) {
					return helper.resolve_template(attributes, 'src/common/directives/clinicaid/ca_field_toggle');
				};

				var link_function = function link_function($scope, element, attribute, controller)
				{
					// run the default field link function
					helper.default_link_function($scope, element, attribute, controller);
				};

				var scope = angular.copy(helper.default_scope);
				scope.true_text = '@caTrueText';
				scope.false_text = '@caFalseText';
				scope.true_value = '@caTrueValue';
				scope.false_value = '@caFalseValue';

				return {
					restrict: 'EAC',
					scope: scope,
					templateUrl: template_function,
					replace: true,
					link: link_function,
					controller: helper.default_controller
				};

			}]);


/***/ }),

/***/ "./src/common/directives/clinicaid/ca_focus_field.js":
/*!***********************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_focus_field.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {


angular.module('Common').directive(
	'caFocusField',
	[
		function()
{

	var link_function = function($scope, element, attr, field_controllers)
	{
		var field = attr[ 'caName' ];

		// Forget the whole thing if there is already a controller that tells us to
		var ignore = false;
		for(var i = 0; i < field_controllers.length; i++)
		{
			if (field_controllers[ i ] &&
				field_controllers[ i ].ignore_focus_field())
			{
				ignore = true;
				break;
			}
		}

		if(angular.isDefined($scope.form_nav) && !ignore)
		{
			var focus_field = attr['caFocusField'];

			// watch the focus field: when it matches, focus the element
			$scope.$watch(focus_field, function()
			{
				if(Juno.Common.Util.exists(field) && field == $scope.form_nav.focus_field)
				{
					element[0].focus().select();
				}
			});

			// listen for focusCaFocusField event: when it matches, focus the element
			$scope.$on('focusCaFocusField', function(e, focus)
			{
				if(Juno.Common.Util.exists(field) && field == focus)
				{
					element[0].focus().select();
				}
			});
		}
	};

	return {
		restrict: 'A',
		replace: false,
		priority: 100,
		require: [
			'?^caFieldAlpha',
			'?^caFieldAlphadate',
			'?^caFieldAutocomplete',
			'?^caFieldBoolean',
			'?^caFieldColor',
			'?^caFieldCurrency',
			'?^caFieldDate',
			'?^caFieldDate3',
			'?^caFieldNumber',
			'?^caFieldSelect',
			'?^caFieldText',
			'?^caFieldTime'
		],
		link: link_function
	};

}]);



/***/ }),

/***/ "./src/common/directives/clinicaid/ca_info_messages.js":
/*!*************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_info_messages.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caInfoMessages',

	[ function()
{

	var scope = {
		saving: '=?caSavingFlag',
		errors: '=caErrorsObject',
		field_value_map: '=?caFieldValueMap',
		success_message: '@caSuccessMessage',
		field_value_map_label_key: '@caFieldValueMapLabelKey',
		displayFieldErrors: '=?caDisplayFieldErrors',
		prepend_name_to_field_errors: '=?caPrependNameToFieldErrors',
		error_link_functions: '=?caErrorLinkFunctions'
	};

	var link_function = function link_function($scope, element, attribute, controller)
	{
		if(!Juno.Common.Util.exists($scope.displayFieldErrors) ||
			$scope.displayFieldErrors !== false)
		{
			$scope.displayFieldErrors = true;
		}

		if(!Juno.Common.Util.exists($scope.prepend_name_to_field_errors) ||
			$scope.prepend_name_to_field_errors !== false)
		{
			$scope.prepend_name_to_field_errors = true;
		}

		// get a field label given a key
		$scope.get_label = function get_label(key)
		{
			var label = key;
			if(Juno.Common.Util.exists($scope.field_value_map) && $scope.field_value_map.hasOwnProperty(key))
			{
				if(Juno.Common.Util.exists($scope.field_value_map_label_key))
				{
					label = $scope.field_value_map[key][$scope.field_value_map_label_key];
				}
				else
				{
					label = $scope.field_value_map[key];
				}
			}
			return label;
		};

		// Ensure the item is an array of elements
		$scope.force_array = function force_array(item)
		{
			if(!angular.isArray(item))
			{
				return [item];
			}
			return item;
		};

		$scope.has_sub_errors = function has_sub_errors(errors)
		{
			return !angular.isString(errors) && angular.isObject(errors);
		};

		$scope.error_link_has_function = function error_link_has_function(index)
		{
			var error_link = $scope.errors.error_links()[index];

			// error link must have a js function in its data
			// and the function is implemented in error_link_functions
			return $scope.error_link_functions &&
				error_link['js_fn'] &&
				angular.isFunction($scope.error_link_functions[error_link['js_fn']]);
		};

		// execute the ng-click action on error links
		$scope.execute_error_link_fn = function execute_error_link_fn(index)
		{
			var error_link = $scope.errors.error_links()[index];

			// shouldn't be called unless the error link function is
			if(!$scope.error_link_has_function(index))
			{
				console.log("error link does not have a function!", error_link);
				return;
			}

			// basic implementation: always pass the 'uuid' field in as a parameter
			// (may require other options in the future)
			$scope.error_link_functions[error_link['js_fn']](error_link['uuid']);
		};

		$scope.should_display_field_errors = function should_display_field_errors()
		{
			return Juno.Common.Util.exists($scope.errors) &&
				$scope.errors.has_field_errors() &&
				$scope.displayFieldErrors &&
				$scope.errors.displayFieldErrors;
		};
	};

	return {
		restrict: 'E',
		scope: scope,
		templateUrl: 'src/common/directives/clinicaid/ca_info_messages.jsp',
		link: link_function
	};

}]);



/***/ }),

/***/ "./src/common/directives/clinicaid/ca_key_bind_scope.js":
/*!**************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_key_bind_scope.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {angular.module('Common').directive(
		'caKeyBindScope',[

			'$rootScope',

			function($rootScope)
			{

				var scope = {
					identifier: '@caIdentifier',
					key_combo: '@caKeyCombo',
					callback_fn: '=caCallbackFn',
					key_bind_settings: '=caKeyBindSettings',
				};

				var build_hierarchy = function build_hierarchy(element)
				{
					var parents = element.parents("ca-key-bind-scope");

					var hierarchy = [];
					$.each( parents, function( index, value )
					{
						try
						{
							hierarchy.unshift(value.attributes['ca-identifier'].nodeValue);
						} catch(error)
						{
							console.log("This ca-key-bind-scope element has an invalid parent: ");
							console.log(element);
						}
					});
					return hierarchy
				};

				var link_function = function link_function($scope, element, attribute, controller)
				{
					// identifier is required
					if($scope.identifier == null)
					{
						console.log("The following ca_key_bind_scope element is missing the required " +
								"ca-identifier attribute");
						console.log(element);
						return;
					}

					var hierarchy = build_hierarchy(element);

					if($scope.key_bind_settings != null)
					{
						for (var key_combo in $scope.key_bind_settings)
						{
							$rootScope.ca_key_binding.bind_key_element(
									$scope, element, $scope.identifier, angular.copy(hierarchy),
									key_combo,
									$scope.key_bind_settings[key_combo]);
						}
					}
					else
					{
						console.log("No key bind settings set for ca-key-bind-scope directive (" +
								$scope.identifier + ")");
					}
				};

				return {
					scope: scope,
					restrict: 'EA',
					link: link_function
				}
			}]
);


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/common/directives/clinicaid/ca_pagination.js":
/*!**********************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_pagination.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caPagination',

	[ '$timeout',

	function($timeout)
{

	var scope = {
		pagination: '=caModel',
		change_page_callback: '=caChangePage'
	};

	var link_function = function link_function($scope, element, attribute, controller)
	{
		$scope.mode = 'pages';

		$scope.change_page = function change_page(page_number)
		{
			if(Juno.Common.Util.exists(page_number) &&
				page_number != $scope.pagination.current_page &&
				page_number > 0 &&
				page_number <= $scope.pagination.total_pages)
			{
				$scope.change_page_callback(page_number);
			}
		};

		$scope.expand_ellipsis = function expand_ellipsis()
		{
			$scope.go_to_page_num = $scope.pagination.current_page;
			$scope.mode = 'goto';
			$timeout(function()
			{
				element.find("input").focus().select();
			});
		};

		$scope.close_ellipsis = function close_ellipsis()
		{
			$scope.mode = 'pages';
		};

		$scope.go_to_page = function go_to_page()
		{
			if(Juno.Common.Util.isIntegerString($scope.go_to_page_num))
			{
				var page_int = parseInt($scope.go_to_page_num);
				if(page_int <= 0)
				{
					page_int = 1;
				}
				else if (page_int > $scope.pagination.total_pages)
				{
					page_int = $scope.pagination.total_pages;
				}
				$scope.change_page(page_int);

				$scope.close_ellipsis();
			}
		}
	};

	return {
		restrict: 'E',
		scope: scope,
		templateUrl: 'src/common/directives/clinicaid/ca_pagination.jsp',
		replace: true,
		link: link_function
	};

}]);



/***/ }),

/***/ "./src/common/directives/clinicaid/ca_quill.js":
/*!*****************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_quill.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive('caQuill',
	[

			'$timeout',

	function($timeout)
{
		var link_function = function link_function(scope, element, attrs, ngModel)
		{

			var updateModel = function updateModel(value) {
					scope.$apply(function () {
						ngModel.$setViewValue(value);
					});
				},
				options = {
					modules: {
						'toolbar': { container: '.wysiwyg-toolbar' },
						'image-tooltip': true,
						'link-tooltip': true
					},
					theme: 'snow'
				},
				extraOptions = attrs.quill ?
														scope.$eval(attrs.quill) : {},
				editor;

			angular.extend(options, extraOptions);

			$timeout(function () {

				editor = new Quill(element.children()[1], options);

				ngModel.$render();

				editor.on('text-change', function(delta, source) {
					updateModel(this.getHTML());
				});

				/*
				editor.once('selection-change', function(hasFocus) {
					$(editor).toggleClass('focus', hasFocus);
					// Hack for inability to scroll on mobile
					if (/mobile/i.test(navigator.userAgent)) {
						$(editor).css('height', quill.root.scrollHeight + 30)   // 30 for padding
					}
				});
				*/

			});


			ngModel.$render = function () {
				if (angular.isDefined(editor)) {
					$timeout(function() {
						editor.setHTML(ngModel.$viewValue || '');
					});
				}

			};

		};
	return {
		restrict: 'A',
		require: "ngModel",
		replace: true,
		templateUrl: 'src/common/directives/clinicaid/ca_quill.jsp',
		link: link_function
	}
}]);



/***/ }),

/***/ "./src/common/directives/clinicaid/ca_sticky_search_results_footer.js":
/*!****************************************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_sticky_search_results_footer.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {angular.module('Common').directive(
	'caStickySearchResultsFooter',

	[ '$document', '$timeout',

	function($document, $timeout)
{
	var scope = {
		eventName: '@caEventName'
	};

	var link_function = function link_function($scope, element, attribute, controller)
	{
		var searchResultsRecordsElement =
			angular.element(element[0].querySelector('.search-results-records'));

		var scrollbarWrapperElement = angular.element(element[0].querySelector('.search-results-scrollbar'));
		var scrollbarElement = angular.element(scrollbarWrapperElement[0].querySelector('.scrollbar'));

		var tableWrapperElement = angular.element(element[0].querySelector('.stickied-table-wrapper'));
		var tableElement = angular.element(tableWrapperElement[0].querySelector('table'));

		var footerElement = angular.element(element[0].querySelector('.search-results-footer'));
		var searchResultsElement = angular.element(element[0].querySelector('.search-results-records'));

		var contentWrapperElement = angular.element($document.find('#center-panel-wrapper'));
		var layoutSidebarElement = angular.element($document.find('#layout-sidebar'));

		// connect the dummy scrollbar in the footer with the table scrollbar
		scrollbarWrapperElement.scroll(function()
		{
			tableWrapperElement.scrollLeft(scrollbarWrapperElement.scrollLeft());
		});
		tableWrapperElement.scroll(function()
		{
			scrollbarWrapperElement.scrollLeft(tableWrapperElement.scrollLeft());
		});

		// resize and position the footer when the specified event is fired
		$scope.$on($scope.eventName, function()
		{
			$timeout($scope.update_search_results_footer);
		});

		$scope.update_search_results_footer = function update_search_results_footer()
		{
			// for a fixed footer, main content must be longer than the sidebar,
			// and the search results must extend beyond the bottom of the screen
			var fixedFooter = (contentWrapperElement.height() >= layoutSidebarElement.height()) &&
				searchResultsElement.offset().top + searchResultsElement.height() > $(window).height();

			if(fixedFooter)
			{
				// fixed footer at bottom of screen, with scrollbar
				footerElement.addClass('fixed').removeClass('static');

				footerElement.css('width', searchResultsRecordsElement.width());

				scrollbarWrapperElement.width(tableWrapperElement.width());
				scrollbarElement.width(tableElement.width());

				if(scrollbarWrapperElement.width() < scrollbarElement.width())
				{
					tableWrapperElement.css('padding-bottom', footerElement.height() - 15);
				}
				else
				{
					tableWrapperElement.css('padding-bottom', footerElement.height());
				}
			}
			else
			{
				// static footer below search results
				footerElement.addClass('static').removeClass('fixed');
				footerElement.css('width', 'initial');
				tableWrapperElement.css('padding-bottom', 0);
			}
		};
	};

	return {
		restrict: 'A',
		scope: scope,
		link: link_function
	};

}]);


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/common/directives/clinicaid/ca_zero_pad.js":
/*!********************************************************!*\
  !*** ./src/common/directives/clinicaid/ca_zero_pad.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'zeroPad', 

	[
		'$filter',

	function(
		$filter
	)
{
    return {
		restrict: 'A',
		link: function (scope, element, attrs, ctrl) {
			ctrl.$formatters.unshift(function (data) {
				return $filter('numberFixedLength')(data, 4);
			});

			ctrl.$parsers.unshift(function (data) {
				return $filter('numberFixedLength')(data, 4);
			});            
		},
	};
}]);


/***/ }),

/***/ "./src/common/directives/clinicaid/compile_html.js":
/*!*********************************************************!*\
  !*** ./src/common/directives/clinicaid/compile_html.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'compileHtml',
	[ '$compile',
	function($compile)
	{
		// this directive is like ng-bind-html but it will angular-compile the content
		return function(scope, element, attrs)
		{
			scope.$watch(
				function(scope)
				{
					return scope.$eval(attrs.compileHtml);
				},
				function(value)
				{
					element.jsp(value);
					$compile(element.contents())(scope);
				}
			)
		};
	}
]);


/***/ }),

/***/ "./src/common/directives/clinicaid/file_model.js":
/*!*******************************************************!*\
  !*** ./src/common/directives/clinicaid/file_model.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive('fileModel', ['$parse', function ($parse) {
    return {
        restrict: 'A',
        link: function(scope, element, attrs) {
            var model = $parse(attrs.fileModel);
            var modelSetter = model.assign;
            
            element.bind('change', function(){
                scope.$apply(function(){
                    modelSetter(scope, element[0].files[0]);
                });
            });
        }
    };
}]);


/***/ }),

/***/ "./src/common/directives/clinicaid/resize.js":
/*!***************************************************!*\
  !*** ./src/common/directives/clinicaid/resize.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive('resize',
	[
		'$window',
		function($window)
		{
			// this directive broadcasts resize::resize on window resize
			// use the resize-handler directive to listen for and handle the event

			return {
				link: function(scope) {
					angular.element($window).on('resize', function(e)
					{
						// use name of directive + event to avoid collisions
						scope.$broadcast('resize::resize');
					});
				}
			}
		}
	]
);


/***/ }),

/***/ "./src/common/directives/clinicaid/resize_handler.js":
/*!***********************************************************!*\
  !*** ./src/common/directives/clinicaid/resize_handler.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'resizeHandler',[
	'$parse',
	function($parse)
	{
		// the resize directive broadcasts resize::resize on window resize
		// use this directive to listen and handle the resize event
		return {
			restrict: 'A',
			link: function (scope, element, attrs) {
				scope.$on('resize::resize', function () {
					$parse(attrs.resizeHandler)(scope);
				});
			}
		}
	}]
);



/***/ }),

/***/ "./src/common/directives/clinicaid/scroll.js":
/*!***************************************************!*\
  !*** ./src/common/directives/clinicaid/scroll.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive('scroll',
	[
		'$window',
		function($window)
		{
			// this directive broadcasts scroll::scroll on window scroll
			// use the scroll-handler directive to listen for and handle the event

			return {
				link: function(scope) {
					angular.element($window).on('scroll', function(e)
					{
						// use name of directive + event to avoid collisions
						scope.$broadcast('scroll::scroll');
					});
				}
			}
		}
	]
);


/***/ }),

/***/ "./src/common/directives/clinicaid/scroll_handler.js":
/*!***********************************************************!*\
  !*** ./src/common/directives/clinicaid/scroll_handler.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'scrollHandler', [
	'$parse',
	function($parse)
	{
		// the scroll directive broadcasts scroll::scroll on window scroll
		// use this directive to listen and handle the scroll event
		return {
			restrict: 'A',
			link: function (scope, element, attrs) {
				scope.$on('scroll::scroll', function () {
					$parse(attrs.scrollHandler)(scope);
				});
			}
		}
	}]
);



/***/ }),

/***/ "./src/common/directives/clinicaid/zero_pad.js":
/*!*****************************************************!*\
  !*** ./src/common/directives/clinicaid/zero_pad.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common').directive(
	'caZeroPad', 

	[
		'$filter',

	function(
		$filter
	)
{
    return {
		restrict: 'A',
		require: 'ngModel',
		link: function (scope, element, attrs, ctrl) {

			ctrl.$formatters.unshift(function (data) {
				var pad_length = attrs.caZeroPad;
				if(!pad_length)
				{
					pad_length = 0;
				}
				return $filter('numberFixedLength')(data, pad_length);
			});

			ctrl.$parsers.unshift(function (data) {
				var pad_length = attrs.caZeroPad;
				if(!pad_length)
				{
					pad_length = 0;
				}
				return $filter('numberFixedLength')(data, pad_length);
			});            
		},
	};
}]);


/***/ }),

/***/ "./src/common/directives/datepickerPopup.js":
/*!**************************************************!*\
  !*** ./src/common/directives/datepickerPopup.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common.Directives').directive('junoDatepickerPopup', [

	function()
	{
		var scope = {


		};

		scope.model = '=junoModel';
		scope.placeholder = '@';
		scope.showIcon = '=';
		scope.disableInput = '=';

		var linkFunction = function link_function($scope, element, attribute, controller)
		{
			$scope.format = 'yyyy-MM-dd';

			$scope.dateOptions = {
				showWeeks: false
			};

			$scope.opened = false;

			$scope.openDatepicker = function()
			{
				$scope.opened = true;
			};

		};

		return {
			restrict: 'E',
			scope: scope,
			templateUrl: function(elem, attribute)
			{
				return 'src/common/directives/datepickerPopup' + attribute.type + '.jsp';
			},
			replace: true,
			link: linkFunction
		};

	}
]);

/***/ }),

/***/ "./src/common/directives/jqueryUIDraggable.js":
/*!****************************************************!*\
  !*** ./src/common/directives/jqueryUIDraggable.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Common.Directives').directive('draggable', [
	function()
	{
		console.log('DRAGGABLE DIRECTIVE LOADED');

		return {
			restrict: 'A',
			link: function postLink(scope, elem, attrs)
			{
				elem.draggable(
				{
					axis: "x",
					containment: "#main-body"
				});
			}
		};
	}
]);

/***/ }),

/***/ "./src/common/directives/jqueryUIResizable.js":
/*!****************************************************!*\
  !*** ./src/common/directives/jqueryUIResizable.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {
__webpack_require__(/*! jquery-ui/ui/widgets/resizable */ "./node_modules/jquery-ui/ui/widgets/resizable.js");

angular.module('Common.Directives').directive('resizable', [
	function()
	{
		console.log('RESIZABLE DIRECTIVE LOADED');

		return {
			restrict: 'A',
			scope:
			{
				callback: '&onResize'
			},
			link: function postLink(scope, elem, attrs)
			{

				console.log('RESIZABLE DIRECTIVE HEIGHT ', $(".note-editor-textarea").height());
				elem.resizable(
				{
					handles: 'n, nw, ne',
					minHeight: 250,
					minWidth: 510,
					maxWidth: window.innerWidth,
					maxHeight: window.innerHeight / 1.5,
					// containment: "#main-body"
				});
				elem.on('resizestop', function(evt, ui)
				{
					if (scope.callback)
					{
						scope.callback();
					}

				});
				elem.on('resize', function()
				{
					$(".note-editor-textarea").css('height', elem.height() - 145 - $(".note-editor-issues").height());
				});

				// Workaround, need to either replace JqueryUI or find a better way to account for dynamic changes to resizable div size
				// Doesn't seem to be an easy way to dynamically set minHeight appropriately
				scope.$on('noteIssueAdded', function()
				{
					var newHeight = $('#note-editor').height() + 33;
					$('#note-editor').height(newHeight);
				});

				// Workaround, need to either replace JqueryUI or find a better way to account for dynamic changes to resizable div size
				// Doesn't seem to be an easy way to dynamically set minHeight appropriately
				scope.$on('noteIssueRemoved', function()
				{
					var newHeight = $('#note-editor').height() - 33;
					$('#note-editor').height(newHeight);
				});


			}
		};
	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/common/directives/module.js":
/*!*****************************************!*\
  !*** ./src/common/directives/module.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common.Directives', [ 'Common.Services' ]);



/***/ }),

/***/ "./src/common/directives/patientSearchTypeahead.js":
/*!*********************************************************!*\
  !*** ./src/common/directives/patientSearchTypeahead.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common.Directives').directive('junoPatientSearchTypeahead', [
	'$q',
	'typeaheadHelper',
	'demographicsService',

	function($q, typeaheadHelper, demographicsService)
	{
		var scope = typeaheadHelper.defaultTypeaheadScope();

		var linkFunction = function link_function($scope, element, attribute, controller)
		{
			typeaheadHelper.initTypeahead($scope);

			$scope.optionsTemplateUrl = 'src/common/directives/patientSearchTypeaheadOption.jsp';

			$scope.findMatches = function findMatches(search)
			{
				var deferred = $q.defer();
				demographicsService.quickSearch(search).then(
					function success(results)
					{
						var matches = results.data;
						var meta = results.meta;

						if(meta.total > 10)
						{
							matches.push({
								moreResults: true,
								total: meta.total,
								searchQuery: search
							});
						}
						deferred.resolve(matches);
					},
					function error()
					{
						deferred.reject();
					});
				return deferred.promise;
			};

			$scope.formatMatchSelection = function formatMatchSelection(demographic)
			{
				if(demographic.moreResults)
				{
					return null;
				}

				return Juno.Common.Util.formatName(demographic.firstName, demographic.lastName);
			};
		};

		return {
			restrict: 'E',
			scope: scope,
			templateUrl: 'src/common/directives/typeahead.jsp',
			replace: true,
			link: linkFunction
		};

	}
]);


/***/ }),

/***/ "./src/common/directives/patientTypeahead.js":
/*!***************************************************!*\
  !*** ./src/common/directives/patientTypeahead.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common.Directives').directive('junoPatientTypeahead', [
	'$q',
	'typeaheadHelper',
	'demographicsService',

	function($q, typeaheadHelper, demographicsService)
	{
		var scope = typeaheadHelper.defaultTypeaheadScope();

		var linkFunction = function link_function($scope, element, attribute, controller)
		{
			typeaheadHelper.initTypeahead($scope);

			$scope.forceSelection = true;

			$scope.findMatches = function findMatches(search)
			{
				var deferred = $q.defer();

				var params = {
					type: 'Name',
					'term': search,
					active: true,
					integrator: false,
					outofdomain: true
				};
				demographicsService.search(params, 0, 25).then(function success(data)
					{
						deferred.resolve(data.content);
						console.log('dataa', data);
					},
					function error()
					{
						deferred.reject();
					});

				return deferred.promise;
			};

			$scope.formatMatchSelection = function formatMatchSelection(demographic)
			{
				return demographic.lastName + ', ' + demographic.firstName;
			};

			$scope.typeaheadLabel = function(match)
			{
				return $scope.formatMatchSelection(match);
			};
		};

		return {
			restrict: 'E',
			scope: scope,
			templateUrl: 'src/common/directives/typeahead.jsp',
			replace: true,
			link: linkFunction
		};

	}
]);


/***/ }),

/***/ "./src/common/directives/typeaheadHelper.js":
/*!**************************************************!*\
  !*** ./src/common/directives/typeaheadHelper.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Directives").service("typeaheadHelper", [
	'$timeout',
	function($timeout)
	{
		var helper = {};

		helper.defaultTypeaheadScope = function()
		{
			var scope = {};

			// holds the selected match
			scope.model = '=junoModel';

			// placeholder for the text input
			scope.placeholder = '@junoPlaceholder';

			// called when the search button is clicked (search button will only appear if defined)
			scope.onSearchFn = '&junoOnSearchFn';

			scope.onAddFn = '&junoOnAddFn';
			// title for the search button
			scope.searchButtonTitle = '@junoSearchButtonTitle';

			scope.addButtonTitle = '@junoAddButtonTitle';

			return scope;
		};

		helper.initTypeahead = function initTypeahead($scope)
		{
			//=========================================================================
			// typeahead directives must define/override these
			//=========================================================================

			$scope.findMatches = function findMatches($viewValue)
			{
				console.log('findMatches function must be defined by the typeahead implementation');
			};

			$scope.formatMatchSelection = function formatMatchSelection($model)
			{
				console.log('formatMatch function must be defined by the typeahead implementation');
			};

			//=========================================================================
			// typeahead directives may define/override these
			//=========================================================================

			$scope.optionsTemplateUrl = null;
			$scope.forceSelection = false;

			//=========================================================================
			// common initialization for $scope, for use on all typeahead directives
			//=========================================================================

			// the internal ng-model
			$scope.searchField = null;

			// ng-model-options
			$scope.typeaheadModelOptions = {
				debounce:
				{
					default: 250,
					blur: 250
				}
			};

			// the passed-in model that holds the selection
			if (!angular.isDefined($scope.model))
			{
				$scope.model = null;
			}

			$scope.autocompleteMinLength = 1;

			$scope.hasButtons = function hasButtons()
			{
				return $scope.hasSearchButton() || $scope.hasAddButton();
			};

			$scope.hasSearchButton = function hasSearchButton()
			{
				return angular.isFunction($scope.onSearchFn());
			};

			$scope.hasAddButton = function hasAddButton()
			{
				return angular.isFunction($scope.onAddFn());
			};

			$scope.hasTemplateUrl = function hasTemplateUrl()
			{
				return Juno.Common.Util.exists($scope.optionsTemplateUrl);
			};

			$scope.hasForceSelectionEnabled = function hasForceSelectionEnabled()
			{
				return Juno.Common.Util.exists($scope.forceSelection) && $scope.forceSelection;
			};

			$scope.formatMatch = function formatMatch($model)
			{
				console.log("- Formatting Match -------------");
				console.log($model);
				console.log("--------------------------------");
				if (!Juno.Common.Util.exists($model))
				{
					return null;
				}

				if ($scope.isDummySelection($model))
				{
					return $model.searchQuery;
				}

				return $scope.formatMatchSelection($model);
			};

			$scope.onSelect = function onSelect($item, $model, $label, $event)
			{
				console.log('typeaheadHelper::onSelect - setting model', $item);
				$scope.model = $item;
			};

			$scope.onBlur = function onBlur()
			{
				if ($scope.hasForceSelectionEnabled() && angular.isString($scope.searchField))
				{
					console.log('typeaheadHelper::onBlur - setting model to null (forceSelectionEnabled)');
					// the searchField is not a valid selection and force selection is enabled
					// if there is a select, onSelect will fire after
					$scope.model = null;
				}
			};

			$scope.onChange = function onChange()
			{
				if (!$scope.hasForceSelectionEnabled())
				{
					console.log('typeaheadHelper::onChange - setting model (isTypeaheadSearchQuery)');
					// as user types into the typeahead, select a 'dummy' selection;
					// consumers need to check the isTypeaheadSearchQuery property
					$scope.onSelect($scope.createDummySelection());
				}
			};

			$scope.onSearch = function onSearch()
			{
				// must be in a $timeout because model may not be populated yet
				// because of delay specified by ng-model-options
				$timeout(function()
				{
					if (angular.isFunction($scope.onSearchFn()))
					{
						$scope.onSearchFn()($scope.model);
					}
				});
			};

			$scope.onAdd = function onAdd()
			{
				// must be in a $timeout because model may not be populated yet
				// because of delay specified by ng-model-options
				$timeout(function()
				{
					if (angular.isFunction($scope.onAddFn()))
					{
						$scope.onAddFn()($scope.model);
					}
				});
			};

			$scope.createDummySelection = function createDummySelection()
			{
				return {
					isTypeaheadSearchQuery: true,
					searchQuery: $scope.searchField
				};
			};

			$scope.isDummySelection = function isDummySelection(match)
			{
				return Juno.Common.Util.exists(match) && match.isTypeaheadSearchQuery;
			};

			$scope.$watch('model', function()
			{
				// when the 'external' model is updated, update the 'internal' model
				$scope.searchField = $scope.model;
			});

		};

		return helper;
	}

]);

/***/ }),

/***/ "./src/common/displayMessages.js":
/*!***************************************!*\
  !*** ./src/common/displayMessages.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";



window.Juno = window.Juno || {};
window.Juno.Common = window.Juno.Common || {};

window.Juno.Common.DisplayMessages = function DisplayMessages(messages_hash, options)
{
	var me = this;

	/*************************************************************/
	// Local Variables
	/*************************************************************/

	me.messages_hash = {};
	me.display_field_errors = true;
	me.field_errors_label_map = {};
	me.field_errors_label_map_key = null;
	me.extra_info = {};
	me.meta = {};

	me.saving_message = 'Saving...';

	/*************************************************************/
	// Initialize
	// @param {messages_hash} Error hash from Juno API
	// @param {options} Hash
	//		- {display_field_errors} Boolean : Sets flag
	//		- {field_errors_label_map} Hash : Can pass a hash in to get field
	// 		labels for displaying field errors. Assumed to be field => label
	//		- {field_errors_label_map_key} String : Allows for
	// 		field => Hash[key] lookup for label.
	/*************************************************************/

	me.init = function init()
	{
		if (Juno.Common.Util.exists(messages_hash))
		{
			me.messages_hash = messages_hash;
		}

		// Datamapper field errors are inconsistent and can return either a
		// hash -> array or hash -> string
		me.force_field_error_arrays();

		// Parse options
		if (Juno.Common.Util.exists(options))
		{
			if (Juno.Common.Util.exists(options.display_field_errors) && options.display_field_errors === false)
			{
				me.display_field_errors = false;
			}
			if (Juno.Common.Util.exists(options.field_errors_label_map))
			{
				me.field_errors_label_map = options.field_errors_label_map;
				if (Juno.Common.Util.exists(options.field_errors_label_map_key))
				{
					me.field_errors_label_map_key = options.field_errors_label_map_key;
				}
			}
		}
	};

	// merge another display messages object into this one
	me.merge = function merge(display_messages)
	{
		// does not merge extra_info or meta - just messages

		me.messages_hash = angular.merge(me.messages_hash, display_messages.messages_hash);
	};

	/*************************************************************/
	// Alert Warnings
	/*************************************************************/

	me.has_alert_warnings = function has_alert_warnings()
	{
		return me.alert_warnings().length > 0;
	};

	me.alert_warnings = function alert_warnings()
	{
		if (Juno.Common.Util.exists(me.messages_hash) &&
				Juno.Common.Util.exists(me.messages_hash.alert_warnings))
		{
			return me.messages_hash.alert_warnings;
		}
		return [];
	};

	me.add_alert_warning = function add_alert_warning(message)
	{
		if (!me.has_alert_warnings())
		{
			me.messages_hash.alert_warnings = [];
		}
		me.messages_hash.alert_warnings.push(message);
	};

	/*************************************************************/
	// Standard Errors
	// Generic errors not tied to any specific element.
	/*************************************************************/

	// Returns true if there are any field errors
	me.has_validation_warnings = function has_validation_warnings()
	{
		return me.validation_warnings().length > 0;
	};

	me.add_validation_warning = function add_validation_warning(message)
	{
		if (!me.has_validation_warnings())
		{
			me.messages_hash.validation_warnings = [];
		}
		me.messages_hash.validation_warnings.push(message);
	};

	me.validation_warnings = function validation_warnings()
	{
		if (Juno.Common.Util.exists(me.messages_hash) &&
				Juno.Common.Util.exists(me.messages_hash.validation_warnings))
		{
			return me.messages_hash.validation_warnings;
		}
		return [];
	};

	/*************************************************************/
	// Standard Errors
	// Generic errors not tied to any specific element.
	/*************************************************************/

	me.has_standard_errors = function has_standard_errors()
	{
		return me.standard_errors().length > 0;
	};

	me.standard_errors = function standard_errors()
	{
		if (Juno.Common.Util.exists(me.messages_hash) &&
				Juno.Common.Util.exists(me.messages_hash.standard_errors))
		{
			return me.messages_hash.standard_errors;
		}
		return [];
	};

	me.add_standard_error = function add_standard_error(message)
	{
		if (!me.has_standard_errors())
		{
			me.messages_hash.standard_errors = [];
		}
		me.messages_hash.standard_errors.push(message);
	};

	me.add_generic_fatal_error = function add_generic_fatal_error()
	{
		// TODO: change this
		me.add_standard_error("Fatal Error");
		//		Juno.Context.Settings.interface_preferences.generic_fatal_error_message);
	};

	/*************************************************************/
	// Standard Warnings
	// Generic warnings not tied to any specific element.
	/*************************************************************/

	me.has_standard_warnings = function has_standard_warnings()
	{
		return me.standard_warnings().length > 0;
	};

	me.standard_warnings = function standard_warnings()
	{
		if (Juno.Common.Util.exists(me.messages_hash) &&
				Juno.Common.Util.exists(me.messages_hash.standard_warnings))
		{
			return me.messages_hash.standard_warnings;
		}
		return [];
	};

	me.add_standard_warning = function add_standard_warning(message)
	{
		if (!me.has_standard_warnings())
		{
			me.messages_hash.standard_warnings = [];
		}
		me.messages_hash.standard_warnings.push(message);
	};

	/*************************************************************/
	// Standard Info Message
	// Generic info message not tied to any specific element.
	/*************************************************************/

	me.has_standard_info = function has_standard_info()
	{
		return me.standard_info().length > 0;
	};

	me.standard_info = function standard_info()
	{
		if (Juno.Common.Util.exists(me.messages_hash) &&
				Juno.Common.Util.exists(me.messages_hash.standard_info))
		{
			return me.messages_hash.standard_info;
		}
		return [];
	};

	me.add_standard_info = function add_standard_info(message)
	{
		if (!me.has_standard_info())
		{
			me.messages_hash.standard_info = [];
		}
		me.messages_hash.standard_info.push(message);
	};

	/*************************************************************/
	// Standard Success Message
	// Generic success message not tied to any specific element.
	/*************************************************************/

	me.has_standard_success = function has_standard_success()
	{
		return me.standard_success().length > 0;
	};

	me.standard_success = function standard_success()
	{
		if (Juno.Common.Util.exists(me.messages_hash) &&
				Juno.Common.Util.exists(me.messages_hash.standard_success))
		{
			return me.messages_hash.standard_success;
		}
		return [];
	};

	me.add_standard_success = function add_standard_success(message)
	{
		if (!me.has_standard_success())
		{
			me.messages_hash.standard_success = [];
		}
		me.messages_hash.standard_success.push(message);
	};

	/*************************************************************/
	// Field Errors
	// These errors are directly related to form fields.
	/*************************************************************/

	// Returns true if there are any field errors
	me.has_field_errors = function has_field_errors()
	{
		return me.field_errors() && !angular.equals(me.field_errors(), {});
	};

	// Returns a hash of field errors
	me.field_errors = function field_errors(prepend_label)
	{
		var field_errors = {}
		if (Juno.Common.Util.exists(me.messages_hash) &&
				Juno.Common.Util.exists(me.messages_hash.field_errors))
		{
			if (Juno.Common.Util.exists(prepend_label) && prepend_label === true)
			{
				for (var key in me.messages_hash.field_errors)
				{
					field_errors[key] = me.prepend_label(
							key, me.messages_hash.field_errors[key]);
				}
			}
			else
			{
				field_errors = me.messages_hash.field_errors;
			}
		}
		return field_errors;
	};

	// Returns true if there is a field error for any of the passed in keys
	me.has_one_of_field_error = function has_one_of_field_error(keys)
	{
		if (!angular.isArray(keys))
		{
			keys = [keys];
		}

		for (var i in keys)
		{
			if (me.has_field_error(keys[i]))
			{
				return true;
			}
		}
		return false;
	};

	// Returns true if this field error exists and this error object has the matching index.
	// Used for invoice multi post which posts multiple invoices line items, and returns an index
	// corresponding to the line item with the error
	me.has_indexed_field_error = function has_indexed_field_error(key, index)
	{
		if(Juno.Common.Util.exists(me.extra_info) &&
				Juno.Common.Util.exists(me.extra_info.index) &&
				me.extra_info.index == index)
		{
			return me.has_field_error(key);
		}
		return false;
	};

	// Returns true if this field error exists
	me.has_field_error = function has_field_error(key)
	{
		if (me.has_field_errors())
		{
			if (key in me.field_errors())
			{
				return true;
			}
		}
		return false;
	};

	// Converts all field errors to strings. Concatinates arrays. Useful for our ca-field
	// directives that use ca-error as it doesn't accept a boolean value.
	me.field_error_string = function field_error_string(key, concat_string)
	{
		if (me.has_field_error(key))
		{
			if (!Juno.Common.Util.exists(concat_string))
			{
				concat_string = ", ";
			}
			return me.field_errors()[key].join(concat_string);
		}
		return "";
	};

	// Adds a new field error with the given message
	me.add_field_error = function add_field_error(key, message)
	{
		if (!me.has_field_errors())
		{
			me.messages_hash.field_errors = {};
		}
		if (!me.has_field_error(key))
		{
			me.messages_hash.field_errors[key] = [];
		}
		me.messages_hash.field_errors[key].push(message)
	};

	// Removes a field error.
	me.remove_field_error = function remove_field_error(key)
	{
		if(me.has_field_error(key))
		{
			delete me.messages_hash.field_errors[key];
		}
	};

	/*************************************************************/
	// Error links
	// These are error messages that have an embeded link in them
	// Eg: This patient already exists. Press "here" to view patient.
	/*************************************************************/

	me.has_error_links = function has_error_links()
	{
		return me.error_links().length > 0;
	};

	me.add_error_link = function add_error_link(message)
	{
		if (!me.has_error_links())
		{
			me.messages_hash.error_links = [];
		}
		me.messages_hash.error_links.push(message);
	};

	me.error_links = function error_links()
	{
		if (Juno.Common.Util.exists(me.messages_hash) &&
				Juno.Common.Util.exists(me.messages_hash.error_links))
		{
			return me.messages_hash.error_links;
		}
		return [];
	};

	/*************************************************************/
	// Helpers
	/*************************************************************/

	me.has_errors = function has_errors()
	{
		if (me.has_field_errors() ||
				me.has_standard_errors() ||
				me.has_error_links())
		{
			return true;
		}
		return false;
	};

	me.clear = function clear()
	{
		me.messages_hash = {};
	};

	// Make sure each field error value is an array of messages even if there
	// is only one element.
	me.force_field_error_arrays = function force_field_error_arrays()
	{
		if (me.has_field_errors())
		{
			for (var i in me.messages_hash.field_errors)
			{
				if (!angular.isArray(me.messages_hash.field_errors[i]))
				{
					me.messages_hash.field_errors[i] = [
						angular.copy(me.messages_hash.field_errors[i])
					];
				}
			}
		}
	};

	// Prepend field label to all field error messages
	me.prepend_label = function prepend_label(field, field_errors)
	{
		var label = "";
		var out_field_errors = [];
		if (field in me.field_errors_label_map)
		{
			// Lookup label in basic key -> label map
			label = me.field_errors_label_map[field];

			// If label map is a hash of hashes, grab the label from the
			// provided label field
			if (Juno.Common.Util.exists(me.field_errors_label_map_key))
			{
				label = me.field_errors_label_map[field][
						me.field_errors_label_map_key];
			}

			// Append label
			for (var i in field_errors)
			{
				var error_message = [label, field_errors[i]].join(" ").trim();
				out_field_errors.push(error_message);
			}
		}
		else
		{
			out_field_errors = field_errors;
		}
		return out_field_errors;
	};

	me.merge_messages = function merge_messages(merge_display_messages)
	{
		var field_errors = merge_display_messages.field_errors();
		var error_links = merge_display_messages.error_links();
		var standard_infos = merge_display_messages.standard_info();
		var standard_warnings = merge_display_messages.standard_warnings();
		var standard_errors = merge_display_messages.standard_errors();
		var alert_warnings = merge_display_messages.alert_warnings();
		var validation_warnings = merge_display_messages.validation_warnings();
		var standard_success = merge_display_messages.standard_success();

		for(var i = 0; i < standard_success.length; i++)
		{
			me.add_standard_success(standard_success[i]);
		}

		for(i = 0; i < standard_infos.length; i++)
		{
			me.add_standard_info(standard_infos[i]);
		}

		for(i = 0; i < standard_warnings.length; i++)
		{
			me.add_standard_warning(standard_warnings[i]);
		}

		for(i = 0; i < standard_errors.length; i++)
		{
			me.add_standard_error(standard_errors[i]);
		}

		for(i = 0; i < alert_warnings.length; i++)
		{
			me.add_alert_warning(alert_warnings[i]);
		}

		for(i = 0; i < validation_warnings.length; i++)
		{
			me.add_validation_warning(validation_warnings[i]);
		}

		for(i = 0; i < error_links.length; i++)
		{
			me.add_error_link(error_links[i]);
		}

		for(var key in field_errors)
		{
			if(field_errors.hasOwnProperty(key))
			{
				for(i = 0; i < field_errors[key].length; i++)
				{
					me.add_field_error(key, field_errors[key][i]);
				}
			}
		}
	};

	me.init();
};



/***/ }),

/***/ "./src/common/filters/age.js":
/*!***********************************!*\
  !*** ./src/common/filters/age.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common.Filters').filter('age', [
	function()
	{
		return function(input)
		{
			if (input !== null && input.years !== null)
			{
				if (input.years < 1 && input.months < 1)
				{
					return input.days + "d";
				}

				if (input.years < 2)
				{
					return input.months + "m";
				}

				return input.years + " y";
			}

			return "";
		};
	}
]);

/***/ }),

/***/ "./src/common/filters/cut.js":
/*!***********************************!*\
  !*** ./src/common/filters/cut.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common.Filters').filter('cut', [
	function()
	{
		return function(value, wordwise, max, tail)
		{
			if (!value) return '';

			max = parseInt(max, 10);
			if (!max) return value;
			if (value.length <= max) return value;

			value = value.substr(0, max);
			if (wordwise)
			{
				var lastspace = value.lastIndexOf(' ');
				if (lastspace !== -1)
				{
					value = value.substr(0, lastspace);
				}
			}

			return value + (tail || ' …');
		};
	}
]);

/***/ }),

/***/ "./src/common/filters/module.js":
/*!**************************************!*\
  !*** ./src/common/filters/module.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common.Filters', []);



/***/ }),

/***/ "./src/common/filters/offset.js":
/*!**************************************!*\
  !*** ./src/common/filters/offset.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common.Filters').filter('offset', [
	function()
	{
		return function(input, start)
		{
			if (input === null)
			{
				return 0;
			}
			start = parseInt(start, 10);
			return input.slice(start);
		};
	}
]);

/***/ }),

/***/ "./src/common/filters/startFrom.js":
/*!*****************************************!*\
  !*** ./src/common/filters/startFrom.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common.Filters').filter('startFrom', [
	function()
	{
		return function(input, start)
		{
			start = +start; //parse to int
			// return input.slice(start);
			return input;
		};
	}
]);

/***/ }),

/***/ "./src/common/module.js":
/*!******************************!*\
  !*** ./src/common/module.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common', []);

/***/ }),

/***/ "./src/common/services/appService.js":
/*!*******************************************!*\
  !*** ./src/common/services/appService.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("appService", [
	'$http', '$q',
	function($http, $q)
	{
		var service = {};

		service.apiPath = '../ws/rs/app';

		service.getApps = function getApps()
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/getApps',
				method: "GET",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("appServices::getApps error", errors);
					deferred.reject("An error occured while getting app content");
				});

			return deferred.promise;
		};

		return service;
	}

]);

/***/ }),

/***/ "./src/common/services/autoCompleteService.js":
/*!****************************************************!*\
  !*** ./src/common/services/autoCompleteService.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(moment) {

/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("autoCompleteService", [
	"$q",
	"demographicService",
	function(
		$q,
		demographicService
	)
	{
		var service = {};

		service.init_autocomplete_values = function init_autocomplete_values(patient, autocomplete_values){
			var deferred = $q.defer();

			demographicService.getDemographic(patient.patient).then(function(result){
				console.log(result);
				result.dob = moment([result.dobYear, result.dobMonth, result.dobDay]);

				deferred.resolve({
					data:{
						patient:{
							data: service.formatDemographic(result)
						}
					}
				});

			});

			return deferred.promise;
		};

		service.formatDemographic = function formatDemographic(result)
		{
			return {
				uuid: result.demographicNo,
				full_name: result.lastName + ',' + result.firstName,
				birth_date: Juno.Common.Util.formatMomentDate(result.dob),
				health_number: result.hin,
				phone_number_primary: result.phone
			};
		};

		return service;
	}
]);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js")))

/***/ }),

/***/ "./src/common/services/billingService.js":
/*!***********************************************!*\
  !*** ./src/common/services/billingService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("billingService", [
	'$http', '$q',
	function($http, $q)
	{
		var service = {};

		service.apiPath = '../ws/rs/';

		service.getUniqueServiceTypes = function getUniqueServiceTypes()
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + 'billing/uniqueServiceTypes',
				Juno.Common.ServiceHelper.configHeadersWithCache()).then(
				function success(results)
				{
					deferred.resolve(results.data.content);
				},
				function error(errors)
				{
					console.log("billingService::getUniqueServiceTypes error", errors);
					deferred.reject("An error occured while fetching billing service types");
				});

			return deferred.promise;
		};

		service.getBillingRegion = function getBillingRegion()
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + 'billing/billingRegion',
				Juno.Common.ServiceHelper.configHeadersWithCache()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("billingService::getBillingRegion error", errorsz);
					deferred.reject("An error occured while setting billingRegion");
				});

			return deferred.promise;
		};

		service.getDefaultView = function getDefaultView()
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + 'billing/defaultView',
				Juno.Common.ServiceHelper.configHeadersWithCache()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("billingService::getDefaultView error", errors);
					deferred.reject("An error occured while setting defaultView");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/consultService.js":
/*!***********************************************!*\
  !*** ./src/common/services/consultService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(moment) {

/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("consultService", [
	'$http',
	'$q',
	'junoHttp',
	function($http,
	         $q,
	         junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/consults/';

		service.searchRequests = function searchRequests(search)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = search;
			
			junoHttp.get(service.apiPath + 'searchRequests', config).then(
				function success(results)
				{
					deferred.resolve(results);
				},
				function error(errors)
				{
					console.log("consultService::searchRequests error", errors);
					deferred.reject("An error occurred while searching consult requests");
				});

			return deferred.promise;
		};

		service.getRequest = function getRequest(requestId)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();

			junoHttp.get(service.apiPath + 'getRequest/' + encodeURIComponent(requestId), config).then(
				function success(results)
				{
					if(results.data.referralDate) results.data.referralDate = moment(results.data.referralDate).toDate();
					if(results.data.appointmentDate) results.data.appointmentDate = moment(results.data.appointmentDate).toDate();
					if(results.data.followUpDate) results.data.followUpDate = moment(results.data.followUpDate).toDate();

					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("consultService::getRequest error", errors);
					deferred.reject(
						"An error occurred while getting consult request (requestId=" + requestId + ")");
				});

			return deferred.promise;
		};
		service.getNewRequest = function getRequest(demographicNo)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				demographicNo: demographicNo
			};

			junoHttp.get(service.apiPath + 'getNewRequest', config).then(
				function success(results)
				{
					if(results.data.referralDate) results.data.referralDate = moment(results.data.referralDate).toDate();
					if(results.data.appointmentDate) results.data.appointmentDate = moment(results.data.appointmentDate).toDate();
					if(results.data.followUpDate) results.data.followUpDate = moment(results.data.followUpDate).toDate();

					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("consultService::getNewRequest error", errors);
					deferred.reject(
						"An error occurred while getting new consult request");
				});

			return deferred.promise;
		};

		service.getRequestAttachments = function getRequestAttachments(
			requestId, demographicId, attached)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				'demographicId': encodeURIComponent(demographicId),
				'attached': encodeURIComponent(attached)
			};

			junoHttp.get(service.apiPath + 'getRequestAttachments/' + encodeURIComponent(requestId), config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("consultService::getRequestAttachments error", errors);
					deferred.reject("An error occured while getting consult attachments (requestId=" + requestId + ")");
				});

			return deferred.promise;
		};

		service.saveRequest = function saveRequest(request)
		{
			var deferred = $q.defer();
			junoHttp.post(service.apiPath + 'saveRequest', request).then(

				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("consultService::saveRequest error", error);
					deferred.reject("An error occurred while fetching consult request after save");
				});

			return deferred.promise;
		};

		service.eSendRequest = function eSendRequest(requestId)
		{
			var deferred = $q.defer();

			junoHttp.get(service.apiPath + 'eSendRequest/' + encodeURIComponent(requestId),
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("consultService::eSendRequest error", errors);
					deferred.reject(
						"An error occurred while e-sending consult request (requestId=" + requestId + ")");
				});

			return deferred.promise;
		};

		service.searchResponses = function searchRequests(search)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = search;
			junoHttp.get(service.apiPath + 'searchResponses', config).then(
				function success(results)
				{
					deferred.resolve(results);
				},
				function error(errors)
				{
					console.log("consultService::searchRequests error", errors);
					deferred.reject("An error occured while searching consult requests");
				});

			return deferred.promise;
		};

		service.getResponse = function getResponse(responseId, demographicNo)
		{
			var deferred = $q.defer();

			if (responseId === "new")
			{
				responseId = 0;
			}

			$http.get(service.apiPath + 'getResponse',
			{
				params:
				{
					responseId: responseId,
					demographicNo: demographicNo
				}
			}).then(
				function success(results)
				{

					if(results.data.responseDate) results.data.responseDate = moment(results.data.responseDate).toDate();
					if(results.data.referralDate) results.data.referralDate = moment(results.data.referralDate).toDate();
					if(results.data.appointmentDate) results.data.appointmentDate = moment(results.data.appointmentDate).toDate();
					if(results.data.followUpDate) results.data.followUpDate = moment(results.data.followUpDate).toDate();
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("consultService::getResponse error", errors);
					deferred.reject(
						"An error occurred while getting consult response (responseId=" + responseId + ")");
				});

			return deferred.promise;
		};

		service.getResponseAttachments = function getResponseAttachments(
			responseId, demographicNo, attached)
		{
			var deferred = $q.defer();
			$http.get(
				service.apiPath + 'getResponseAttachments?responseId=' + encodeURIComponent(responseId) +
				'&demographicNo=' + encodeURIComponent(demographicNo) +
				'&attached=' + encodeURIComponent(attached)).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("consultService::getResponseAttachments error", errors);
					deferred.reject(
						"An error occurred while getting consult response attachments (responseId=" +
						responseId + ")");
				});

			return deferred.promise;
		};

		service.saveResponse = function saveResponse(response)
		{
			var deferred = $q.defer();

			$http.post(service.apiPath + 'saveResponse', response).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("consultService::saveResponse error", errors);
					deferred.reject("An error occurred while fetching consult response after save");
				});

			return deferred.promise;
		};

		service.getReferralPathwaysByService = function getReferralPathwaysByService(serviceName)
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + 'getReferralPathwaysByService?serviceName=' +
				encodeURIComponent(serviceName)).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("consultService::getReferralPathwaysByService error", errors);
					deferred.reject("An error occured while fetching referral pathways");
				});

			return deferred.promise;
		};

		service.getLetterheadList = function getLetterheadList()
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			junoHttp.get(service.apiPath + 'getLetterheadList', config).then(
				function success(results)
				{
					deferred.resolve(results);
				},
				function error(errors)
				{
					console.log("consultService::getLetterheadList error", errors);
					deferred.reject("An error occurred while fetching letterheads");
				});

			return deferred.promise;
		};

		return service;
	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js")))

/***/ }),

/***/ "./src/common/services/demographicService.js":
/*!***************************************************!*\
  !*** ./src/common/services/demographicService.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(moment) {

/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("demographicService", [
    '$q',
    'junoHttp',
    function($q, junoHttp)
    {
        var service = {};

        service.apiPath = '../ws/rs/demographic';

        service.getDemographic = function getDemographic(demographicNo)
        {
            var deferred = $q.defer();

	        junoHttp.get(service.apiPath + '/' + encodeURIComponent(demographicNo),
                Juno.Common.ServiceHelper.configHeaders()).then(
                function success(results)
                {
                    if(results.data.effDate) results.data.effDate = moment(results.data.effDate).toDate();
	                if(results.data.hcRenewDate)results.data.hcRenewDate = moment(results.data.hcRenewDate).toDate();
	                if(results.data.endDate)results.data.endDate = moment(results.data.endDate).toDate();
	                if(results.data.patientStatusDate)results.data.patientStatusDate = moment(results.data.patientStatusDate).toDate();
	                if(results.data.onWaitingListSinceDate)results.data.onWaitingListSinceDate = moment(results.data.onWaitingListSinceDate).toDate();
	                if(results.data.scrPaperChartArchivedDate)results.data.scrPaperChartArchivedDate = moment(results.data.scrPaperChartArchivedDate).toDate();
	                if(results.data.dateJoined)results.data.dateJoined = moment(results.data.dateJoined).toDate();
	                if(results.data.rosterTerminationDate)results.data.rosterTerminationDate = moment(results.data.rosterTerminationDate).toDate();
	                if(results.data.rosterDate)results.data.rosterDate = moment(results.data.rosterDate).toDate();
                    console.log('converted RESULTS: ', results.data);
                    deferred.resolve(results.data);
                },
                function error(errors)
                {
                    console.log("demographicServices::getDemographic error", errors);
                    deferred.reject("An error occurred while fetching demographic");
                });

            return deferred.promise;
        };

	    service.getDemographicContacts = function getDemographicContacts(demographicNo,contactCategory)
	    {
		    var deferred = $q.defer();

		    var config = Juno.Common.ServiceHelper.configHeaders();
		    config.params = {
			    category: contactCategory
		    };

		    junoHttp.get(service.apiPath + '/' + encodeURIComponent(demographicNo) + "/contacts", config).then(
			    function success(results)
			    {
				    deferred.resolve(results.data);
			    },
			    function error(errors)
			    {
				    console.log("demographicServices::getDemographicContacts error", errors);
				    deferred.reject("An error occurred while fetching demographic contacts");
			    });

		    return deferred.promise;
	    };

        service.saveDemographic = function saveDemographic(demographic)
        {
            var deferred = $q.defer();

	        junoHttp.post(service.apiPath, demographic).then(
                function success(results)
                {
                    deferred.resolve(results.data);
                },
                function error(errors)
                {
                    console.log("demographicServices::updateDemographic error", errors);
                    deferred.reject("An error occurred while saving demographic");
                });

            return deferred.promise;
        };

        service.updateDemographic = function updateDemographic(demographic)
        {
            var deferred = $q.defer();

	        junoHttp.put(service.apiPath, demographic).then(
                function success(results)
                {
                    deferred.resolve(results.data);
                },
                function error(errors)
                {
                    console.log("demographicServices::updateDemographic error", errors);
                    deferred.reject("An error occurred while updating demographic");
                });

            return deferred.promise;
        };

        return service;
    }
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js")))

/***/ }),

/***/ "./src/common/services/demographicsService.js":
/*!****************************************************!*\
  !*** ./src/common/services/demographicsService.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("demographicsService", [
	'$q',
	'junoHttp',
	function($q, junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/demographics';

		service.quickSearch = function quickSearch(search)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				query: search
			};

			junoHttp.get(service.apiPath + '/quickSearch', config).then(
				function success(results)
				{
					deferred.resolve(results);
				},
				function error(errors)
				{
					console.log("demographicsService::quickSearch error", errors);
					deferred.reject("An error occurred while searching");
				});

			return deferred.promise;
		};

		service.search = function search(search, startIndex, itemsToReturn)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				jsonData: search,
				startIndex: startIndex,
				itemsToReturn: itemsToReturn
			};

			junoHttp.get(service.apiPath + '/search', config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("demographicsService::search error", errors);
					deferred.reject("An error occurred while searching");
				});

			return deferred.promise;
		};

		service.searchIntegrator = function searchIntegrator(search, itemsToReturn)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				jsonData: search,
				itemsToReturn: itemsToReturn
			};

			junoHttp.get(service.apiPath + '/searchIntegrator', config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("demographicsService::searchIntegrator error", errors);
					deferred.reject("An error occurred while searching");
				});

			return deferred.promise;
		};

		service.getStatusList = function getStatusList(listType)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				type: listType
			};

			junoHttp.get(service.apiPath + '/statusList', config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("demographicsService::getStatusList error", errors);
					deferred.reject("An error occurred while getting status list");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/diseaseRegistryService.js":
/*!*******************************************************!*\
  !*** ./src/common/services/diseaseRegistryService.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("diseaseRegistryService", [
	'$http',
	'$q',
	'junoHttp',

	function(
		$http,
		$q,
		junoHttp
        )
	{
		var service = {};

		service.apiPath = '../ws/rs/dxRegisty/';

		service.getQuickLists = function getQuickLists()
		{
			var deferred = $q.defer();
			junoHttp.get(service.apiPath + 'quickLists/',
				Juno.Common.ServiceHelper.configHeadersWithCache()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("diseaseRegistryService::getQuickLists error", errors);
					deferred.reject("An error occurred while fetching quick lists");
				});

			return deferred.promise;
		};

        service.getIssueQuickLists = function getIssueQuickLists()
        {
            var deferred = $q.defer();
            junoHttp.get(service.apiPath + 'issueQuickLists/',
                Juno.Common.ServiceHelper.configHeadersWithCache()).then(
                function success(results)
                {
                    deferred.resolve(results.data);
                },
                function error(errors)
                {
                    console.log("diseaseRegistryService::getIssueQuickLists error", errors);
                    deferred.reject("An error occurred while fetching quick lists");
                });

            return deferred.promise;
        };

		service.addToDxRegistry = function addToDxRegistry(demographicNo, disease)
		{
			var deferred = $q.defer();

			var issueToSend = {};
			issueToSend.id = disease.id;
			issueToSend.type = disease.type;
			issueToSend.code = disease.code;
			issueToSend.description = disease.description;

			$http.post(service.apiPath + encodeURIComponent(demographicNo) + '/add', issueToSend).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("diseaseRegistryService::addToDxRegistry error", errors);
					deferred.reject("An error occurred while adding to dx registry");
				});

			return deferred.promise;
		};

		service.findDxIssue = function findDxIssue(code, codingSystem)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeadersWithCache();
			config.params = {
				codingSystem: codingSystem,
				code: code
            };

            junoHttp.get(service.apiPath + 'findDxIssue', config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("diseaseRegistryService::findDxIssue error", errors);
					deferred.reject("An error occurred while retrieving a dx issue");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/errorsService.js":
/*!**********************************************!*\
  !*** ./src/common/services/errorsService.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";



angular.module('Common.Services').factory(
	'errorsService',

	[

		function()
		{
			var messages = {};

			/*************************************************************/
			// Factory
			// @param {errorsHash} Error hash from Clinicaid API
			// @param {options} Hash
			//		- {displayFieldErrors} Boolean : Sets flag
			//		- {fieldErrorsLabelMap} Hash : Can pass a hash in to get field
			// 		labels for displaying field errors. Assumed to be field => label
			//		- {fieldErrorsLabelMapKey} String : Allows for
			// 		field => Hash[key] lookup for label.
			/*************************************************************/
			messages.factory = function factory(errorsHash, options)
			{
				return new Juno.Common.DisplayMessages(errorsHash, options);
			};

			return messages;
		}]
);

/***/ }),

/***/ "./src/common/services/faxAccountService.js":
/*!**************************************************!*\
  !*** ./src/common/services/faxAccountService.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

    Copyright (c) 2012-2018. CloudPractice Inc. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for
    CloudPractice Inc.
    Victoria, British Columbia
    Canada

 */

angular.module("Common.Services").service("faxAccountService", [
	'$q',
	'junoHttp',
	function($q, junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/faxAccount';

		service.listAccounts = function listAccounts(page, perPage)
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				page: page,
				perPage: perPage
			};

			junoHttp.get(service.apiPath + '/search', config).then(
				function success(response) {
					deferred.resolve(response.data);
				},
				function error(error) {
					console.log("faxService::listAccounts error", error);
					deferred.reject("An error occurred while getting fax account data");
				});
			return deferred.promise;
		};

		service.isEnabled = function isEnabled(id)
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();

			junoHttp.get(service.apiPath + '/' + id + '/enabled', config).then(
				function success(response) {
					deferred.resolve(response.data);
				},
				function error(error) {
					console.log("faxService::isEnabled error", error);
					deferred.reject("An error occurred while getting fax account data");
				});
			return deferred.promise;
		};
		service.getAccountSettings = function getAccountSettings(id)
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();

			junoHttp.get(service.apiPath + '/' + id, config).then(
				function success(response) {
					deferred.resolve(response.data);
				},
				function error(error) {
					console.log("faxService::getAccountSettings error", error);
					deferred.reject("An error occurred while getting fax account data");
				});
			return deferred.promise;
		};

		service.addAccountSettings = function addAccountSettings(transfer)
		{
			var deferred = $q.defer();

			junoHttp.post(service.apiPath, transfer).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("faxService::setAccountSettings error", error);
					deferred.reject("An error occurred while setting fax account data");
				});
			return deferred.promise;
		};

		service.updateAccountSettings = function updateAccountSettings(id, transfer)
		{
			var deferred = $q.defer();

			junoHttp.put(service.apiPath + '/' + id, transfer).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("faxService::setAccountSettings error", error);
					deferred.reject("An error occurred while updating fax account data");
				});
			return deferred.promise;
		};

		service.testConnection = function testConnection(transfer)
		{
			var deferred = $q.defer();

			let id = transfer.id;
			let url = service.apiPath + '/testConnection';

			if(id && id != null && id !== '')
			{
				url = service.apiPath + '/' + transfer.id + '/testConnection'
			}

			junoHttp.post(url, transfer).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("faxService::validateLogin error", error);
					deferred.reject("An error occurred while testing connection");
				});

			return deferred.promise;
		};

		service.getInbox = function getInbox(accountId, searchListHelper)
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = searchListHelper.getParams();

			junoHttp.get(service.apiPath + '/' + accountId + '/inbox', config).then(
				function success(response)
				{
					deferred.resolve(response);
				},
				function error(error)
				{
					console.log("faxService::getInbox error", error);
					deferred.reject("An error occurred while retrieving inbox data");
				});

			return deferred.promise;
		};

		service.getOutbox = function getOutbox(accountId, searchListHelper)
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = searchListHelper.getParams();

			junoHttp.get(service.apiPath + '/' + accountId + '/outbox', config).then(
				function success(response)
				{
					deferred.resolve(response);
				},
				function error(error)
				{
					console.log("faxService::getOutbox error", error);
					deferred.reject("An error occurred while retrieving outbox data");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/faxInboundService.js":
/*!**************************************************!*\
  !*** ./src/common/services/faxInboundService.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

    Copyright (c) 2012-2018. CloudPractice Inc. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for
    CloudPractice Inc.
    Victoria, British Columbia
    Canada

 */

angular.module("Common.Services").service("faxInboundService", [
	'$q',
	'junoHttp',
	function($q, junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/faxInbound';

		service.getNextPullTime = function getNextPullTime()
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();

			junoHttp.get(service.apiPath + '/getNextPullTime', config).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("faxService::getNextPullTime error", error);
					deferred.reject("An error occurred while getting scheduled pull time");
				});
			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/faxOutboundService.js":
/*!***************************************************!*\
  !*** ./src/common/services/faxOutboundService.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

    Copyright (c) 2012-2018. CloudPractice Inc. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for
    CloudPractice Inc.
    Victoria, British Columbia
    Canada

 */

angular.module("Common.Services").service("faxOutboundService", [
	'$q',
	'junoHttp',
	function($q, junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/faxOutbound';

		service.resendOutboundFax = function resendFax(id)
		{
			var deferred = $q.defer();

			junoHttp.put(service.apiPath + '/' + id + '/resend').then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("faxService::resendFax error", error);
					deferred.reject("An error occurred while resending a fax");
				});
			return deferred.promise;
		};


		service.getNextPushTime = function getNextPushTime()
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();

			junoHttp.get(service.apiPath + '/getNextPushTime', config).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("faxService::getNextPushTime error", error);
					deferred.reject("An error occurred while getting scheduled push time");
				});
			return deferred.promise;
		};

		/* provide the endpoint url for downloading the faxed pdf document */
		service.getDownloadUrl = function(id)
		{
			return service.apiPath + '/' + id + '/download';
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/fieldHelperService.js":
/*!***************************************************!*\
  !*** ./src/common/services/fieldHelperService.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function($) {

angular.module('Common.Services').factory(
	'fieldHelperService',
	[
		'$timeout',

		function(
			$timeout
		)
		{
			var helper = {};

			helper.default_scope = {

				form_group_class: '@caFormGroupClass',
				label_size: '@caLabelSize',
				input_size: '@caInputSize',
				text_length: '@caTextLength',
				hide_label_colon: '@caTitleNoColon',
				template: '@caTemplate',

				name: '@caName',

				title: '@caTitle',
				hint: '@caHint',

				tab_index: '@caTabindex',

				error_message: '@caError',
				warning_message: '@caWarning',

				depends_on_field: '@caDependsOnField',
				depends_on_value: '@caDependsOnValue',

				model: '=caModel',
				disabled: '=caDisabled',
				hide: '=caHide',
				focus_field: '=caFocusField',

				on_focus_fn: '&caFocus',
				change_fn: '&caChange',
				blur_fn: '&caBlur'
			};

			helper.resolve_template = function(attributes, base_default_template)
			{
				// if tag has a ca-template on it, add it to the template path
				if(Juno.Common.Util.exists(attributes['caTemplate']))
				{
					return base_default_template + '_' + attributes['caTemplate'] + '.jsp';
				}
				return base_default_template + '.jsp';
			};

			helper.merge_title_messages = function merge_title_messages($scope)
			{
				// Merge error and warning records so they both can be displayed in the hover over
				$scope.title_array = [];
				if(Juno.Common.Util.exists($scope.error_message))
				{
					$scope.title_array.push($scope.error_message);
				}
				if(Juno.Common.Util.exists($scope.warning_message))
				{
					$scope.title_array.push($scope.warning_message);
				}

				if($scope.title_array.length == 0 && Juno.Common.Util.exists($scope.hint))
				{
					$scope.title_array.push($scope.hint);
				}
				$scope.title_string = $scope.title_array.join('|');
			};

			helper.default_link_function = function default_link_function(
				$scope, element, attribute, controller)
			{
				helper.merge_title_messages($scope);
				$scope.focus_fn = function on_focus()
				{
					if(angular.isFunction($scope.on_focus_fn))
					{
						// only call the focus function if the field still has focus after a timeout
						$timeout(function() {
							if(($(element).is("input:enabled, select:enabled, textarea:enabled") &&
								$(element).is(':focus')) ||
								$(element).find(" input:enabled, select:enabled, textarea:enabled ").is(':focus'))
							{
								$scope.on_focus_fn();
							}
							else
							{
								console.log('ignoring on focus function - element is no longer in focus', $scope.name)
							}
						});
					}
				};

				// watch the focus field: when it matches the name, focus the element
				$scope.$watch('focus_field', function()
				{
					if(Juno.Common.Util.exists($scope.name) &&
						$scope.focus_field == $scope.name)
					{
						// Focus and select the input element
						$timeout(function()
						{
							if($(element).is("input:enabled, select:enabled, textarea:enabled"))
							{
								$(element).focus().select();
							}
							else
							{
								$(element).find(
									"input:enabled, select:enabled, textarea:enabled").first().focus().select();
							}
						});
					}
				});

				// listen for focusCaFocusField event: when it matches, focus the element
				$scope.$on('focusCaFocusField', function(e, focus)
				{
					if(Juno.Common.Util.exists($scope.name) && $scope.name == focus)
					{
						if($(element).is("input:enabled, select:enabled, textarea:enabled"))
						{
							$(element).focus().select();
						}
						else
						{
							$(element).find(
								"input:enabled, select:enabled, textarea:enabled").first().focus().select();
						}
					}
				});
			};

			helper.default_controller = ['$scope', '$element', '$attrs', function default_controller($scope, $element, $attrs)
			{
				// These field directives have a built-in handling of the focus field,
				// so this tells the caFocusField directive to ignore them.
				this.ignore_focus_field = function ignore_focus_field()
				{
					return true;
				}
			}];

			return helper;
		}]);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/common/services/focusService.js":
/*!*********************************************!*\
  !*** ./src/common/services/focusService.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function($) {

angular.module('Common.Services').factory(
	'focusService',

	[
		'$timeout',
		'$window',

		function (
			$timeout, $window
		)
		{
			var focus = {};

			// focuses element
			focus.element = function element(selector)
			{
				$timeout(function()
				{
					$(selector).focus();
				});
			};

			// focuses first visible and enabled form input
			// if selector is provided, only looks within that selector
			focus.first_form_input = function first_form_element(selector)
			{
				if(!selector)
				{
					selector = "form:visible:first";
				}

				$timeout(function()
				{
					$(selector + " input:enabled, " +
						selector + " select:enabled, " +
						selector + " textarea:enabled ").first().focus();
				});
			};

			// focuses first 'has-error' form input and scrolls to alert
			// if opts['selector'] is provided, only looks within that selector
			// if opts['scroll_offset'] is provided, used in first_alert
			focus.first_error_input = function first_error_input(opts)
			{
				if(!angular.isObject(opts))
				{
					opts = {};
				}
				var selector = opts['selector'] || '';
				$timeout(function()
				{
					$(selector + " .has-error:first input:enabled, " +
						selector + " .has-error:first select:enabled, " +
						selector + " .has-error:first textarea:enabled ").first().focus();
					focus.first_alert(opts);
				});
			};

			// scrolls to the first visible alert (not actually a focus)
			// if modal is open, will just scroll to top of modal
			// if opts['selector'] is provided, only looks within that selector
			// if opts['scroll_offset'] is provided, scrolls to that offset above alert
			focus.first_alert = function first_alert(opts)
			{
				if(!angular.isObject(opts))
				{
					opts = {};
				}
				var selector = opts['selector'] || '';
				var scroll_offset = opts['scroll_offset'];

				if(!scroll_offset || scroll_offset < 0)
				{
					scroll_offset = 10;
				}

				$timeout(function()
				{
					if($('body').hasClass('modal-open'))
					{
						// there's a modal open - scroll to the top
						$('.modal').animate({ scrollTop: 0 });
					}
					else
					{
						// no modal open - scroll to just above the first alert
						$('html, body').animate({
							scrollTop: $(selector + " .alert:visible:first").offset().top - scroll_offset
						}, 500);
					}
				});
			};

			return focus;

		}]);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/common/services/formService.js":
/*!********************************************!*\
  !*** ./src/common/services/formService.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("formService", [
	'$http', '$q', 'junoHttp',
	function($http, $q, junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/forms';

		service.getAllFormsByHeading = function getAllFormsByHeading(demographicNo, heading)
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/all?heading=' + encodeURIComponent(heading),
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("formService::getAllFormsByHeading error", errors);
					deferred.reject("An error occurred while fetching forms");
				});

			return deferred.promise;
		};

		service.getAllEncounterForms = function getAllEncounterForms()
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + '/allEncounterForms',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("formService::getAllEncounterForms error", errors);
					deferred.reject("An error occurred while fetching encounter forms");
				});

			return deferred.promise;
		};

		service.getSelectedEncounterForms = function getSelectedEncounterForms()
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + '/selectedEncounterForms',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("formService::getSelectedEncounterForms error", errors);
					deferred.reject("An error occurred while fetching selected encounter forms");
				});

			return deferred.promise;
		};

		service.getCompletedEncounterForms = function getCompletedEncounterForms(demographicNo)
		{
			var deferred = $q.defer();
			junoHttp.get(service.apiPath + '/' + demographicNo + '/completedEncounterForms',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("formService::getCompletedEncounterForms error", errors);
					deferred.reject("An error occurred while fetching completed encounter forms");
				});

			return deferred.promise;
		};

		service.getAllEForms = function getAllEForms()
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + '/allEForms',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data.content);
				},
				function error(errors)
				{
					console.log("formService::getAllEForms error", errors);
					deferred.reject("An error occurred while fetching eforms");
				});

			return deferred.promise;
		};

		service.getGroupNames = function getGroupNames()
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + '/groupNames',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data.content);
				},
				function error(errors)
				{
					console.log("formService::getGroupNames error", errors);
					deferred.reject("An error occurred while fetching group names");
				});

			return deferred.promise;
		};

		service.getFormGroups = function getFormGroups()
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + '/getFormGroups',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("formService::getFormGroups error", errors);
					deferred.reject("An error occurred while fetching form groups");
				});

			return deferred.promise;
		};

		service.getFavouriteFormGroup = function getFavouriteFormGroup()
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + '/getFavouriteFormGroup',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("formService::getFavouriteFormGroup error", errors);
					deferred.reject("An error occurred while fetching favourite form groups");
				});

			return deferred.promise;
		};

		service.getFormOptions = function getFormOptions(demographicNo)
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) + '/formOptions',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("formService::getFormOptions error", errors);
					deferred.reject("An error occurred while fetching form options");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/globalStateService.js":
/*!***************************************************!*\
  !*** ./src/common/services/globalStateService.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

	Copyright (c) 2012-2018. CloudPractice Inc. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

	This software was written for
	CloudPractice Inc.
	Victoria, British Columbia
	Canada

 */
angular.module("Common.Services").service("globalStateService", [
	function()
	{
		var service = {
				global_settings: {
					interface_preferences: {
						scheduler_license_key: ""
					}
				}
		};

		return service;
	}
]);


/***/ }),

/***/ "./src/common/services/inboxService.js":
/*!*********************************************!*\
  !*** ./src/common/services/inboxService.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module("Common.Services").service("inboxService", [
	'$http', '$q',
	function($http, $q)
	{
		var service = {};

		service.apiPath = '../ws/rs/inbox';

		service.getDashboardItems = function getDashboardItems(limit)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/mine?limit=' + encodeURIComponent(limit),
				method: "GET",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("inboxService::getDashboardItems error", errors);
					deferred.reject("An error occured while getting inbox content");
				});

			return deferred.promise;
		};

		service.getUnAckLabDocCount = function getUnAckLabDocCount()
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/mine/count',
				method: "GET",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("inboxService::getUnAckLabDocCount error", errors);
					deferred.reject("An error occured while getting inbox content");
				});
			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/k2aService.js":
/*!*******************************************!*\
  !*** ./src/common/services/k2aService.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module("Common.Services").service("k2aService", [
	'$q',
	'junoHttp',
	function($q, junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs';

		service.getK2aFeed = function getK2aFeed(startPoint, numberOfRows)
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				key:'k2a',
				startPoint:encodeURIComponent(startPoint),
				numberOfRows:encodeURIComponent(numberOfRows)
			};

			junoHttp.get(service.apiPath + '/rssproxy/rss', config).then(
				function success(response) {
					deferred.resolve(response.data);
				},
				function error(error) {
					console.log("k2aService::getK2aFeed error", error);
					deferred.reject("An error occured while getting k2a content");
				});
			return deferred.promise;
		};

		service.isK2AInit = function isK2AInit()
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();

			junoHttp.get(service.apiPath + '/app/K2AActive', config).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("k2aService::isK2AInit error", error);
					deferred.reject("An error occured while getting k2a content");
				});

			return deferred.promise;
		};

		service.initK2A = function initK2A(clinicName)
		{
			var deferred = $q.defer();
			var transferObj = {
				name: clinicName
			};

			junoHttp.post(service.apiPath + '/app/K2AInit', transferObj).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("k2aService::initK2A error", error);
					deferred.reject("An error occured while trying to initialize k2a");
				});

			return deferred.promise;
		};

		service.postK2AComment = function postK2AComment(post)
		{
			var deferred = $q.defer();

			var commentItem = {
				post:post
			};
			junoHttp.post(service.apiPath + '/app/comment', commentItem).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("k2aService::postK2AComment error", error);
					deferred.reject("An error occured while trying to post a comment to k2a");
				});

			return deferred.promise;
		};

		service.removeK2AComment = function removeK2AComment(commentId)
		{
			var deferred = $q.defer();

			junoHttp.del(service.apiPath + '/app/comment/' + encodeURIComponent(commentId)).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("k2aService::removeK2AComment error", error);
					deferred.reject("An error occured while trying to remove a comment from k2a");
				});

			return deferred.promise;
		};

		service.preventionRulesList = function preventionRulesList()
		{
			var deferred = $q.defer();

			junoHttp.get(service.apiPath + '/resources/preventionRulesList',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("k2aService::preventionRulesList error", error);
					deferred.reject("An error occured while trying to remove a comment from k2a");
				});

			return deferred.promise;
		};

		service.loadPreventionRuleById = function loadPreventionRuleById(id)
		{
			var deferred = $q.defer();

			junoHttp.post(service.apiPath + '/resources/loadPreventionRulesById/' +
				encodeURIComponent(id.id), id).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("k2aService::loadPreventionRuleById error", error);
					deferred.reject("An error occured while trying to loadPreventionRulesById");
				});

			return deferred.promise;
		};

		service.getCurrentPreventionRulesVersion = function getCurrentPreventionRulesVersion()
		{
			var deferred = $q.defer();
			junoHttp.get(service.apiPath + '/resources/currentPreventionRulesVersion',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("k2aService::getCurrentPreventionRulesVersion error", error);
					deferred.reject("An error occured while trying to getCurrentPreventionRulesVersion");
				});

			return deferred.promise;
		};

		service.getNotifications = function getNotifications()
		{
			var deferred = $q.defer();
			junoHttp.get(service.apiPath + '/resources/notifications',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("k2aService::getNotifications error", error);
					deferred.reject("An error occured while trying to getNotifications");
				});

			return deferred.promise;
		};

		service.getMoreNotification = function getMoreNotification(id)
		{
			var deferred = $q.defer();

			junoHttp.post(service.apiPath + '/resources/notifications/readmore',
				id, Juno.Common.ServiceHelper.configHeaders()).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("k2aService::getMoreNotification error", error);
					deferred.reject("An error occured while trying to /resources/notifications/readmore");
				});

			return deferred.promise;
		};

		service.ackNotification = function ackNotification(id)
		{
			var deferred = $q.defer();
			junoHttp.post(service.apiPath + '/resources/notifications/' + id + '/ack',
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(response)
				{
					deferred.resolve(response.data);
				},
				function error(error)
				{
					console.log("k2aService::ackNotification error", error);
					deferred.reject("An error occured while trying to /resources/notifications/ack");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/messageService.js":
/*!***********************************************!*\
  !*** ./src/common/services/messageService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module("Common.Services").service("messageService", [
	'$http', '$q',
	function($http, $q)
	{
		var service = {};

		service.apiPath = '../ws/rs/messaging';

		service.getUnread = function getUnread(limit)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/unread?startIndex=0&limit=' + encodeURIComponent(limit),
				method: "GET",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("messageService::getUnread error", errors);
					deferred.reject("An error occurred while getting messages");
				});

			return deferred.promise;
		};

		service.getUnreadCount = function getUnreadCount()
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/count',
				method: "GET",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("messageService::getUnreadCount error", errors);
					deferred.reject("An error occurred while getting messages");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/module.js":
/*!***************************************!*\
  !*** ./src/common/services/module.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common.Services', ['Common.Util']);

/***/ }),

/***/ "./src/common/services/noteService.js":
/*!********************************************!*\
  !*** ./src/common/services/noteService.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("noteService", [
	'$http',
	'$q',
	'junoHttp',
	function(
		$http,
		$q,
		junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/notes';

		service.getNotesFrom = function getNotesFrom(demographicNo, offset, numberToReturn, noteConfig)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				offset: encodeURIComponent(offset),
				numToReturn: encodeURIComponent(numberToReturn),
				noteConfig: noteConfig
			};

			junoHttp.post(service.apiPath + '/' + encodeURIComponent(demographicNo) + '/all', config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::getNotesFrom error", errors);
					deferred.reject("An error occurred while fetching notes");
				});

			return deferred.promise;
		};

		service.saveNote = function saveNote(demographicNo, note)
		{
			var deferred = $q.defer();

			junoHttp.post(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/save', note).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::saveNote error", errors);
					deferred.reject("An error occurred while saving note");
				});

			return deferred.promise;
		};

		service.saveIssueNote = function saveIssueNote(demographicNo, note)
		{
			var deferred = $q.defer();

			$http.post(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/saveIssueNote', note).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::saveIssueNote error", errors);
					deferred.reject("An error occurred while saving issue note");
				});

			return deferred.promise;
		};

		service.getCurrentNote = function getCurrentNote(demographicNo, config)
		{
			var deferred = $q.defer();

			$http.post(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/getCurrentNote', config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::getCurrentNote error", errors);
					deferred.reject("An error occurred while fetching current note");
				});

			return deferred.promise;
		};

		service.tmpSave = function tmpSave(demographicNo, note)
		{
			var deferred = $q.defer();

			$http.post(service.apiPath + '/' +
				encodeURIComponent(demographicNo) + '/tmpSave', note).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::tmpSave error", errors);
					deferred.reject("An error occurred while posting tmp save");
				});

			return deferred.promise;
		};

		service.getNoteExt = function getNoteExt(noteId)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/getGroupNoteExt/' + encodeURIComponent(noteId)).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::getNoteExt error", errors);
					deferred.reject("An error occurred while fetching note ext");
				});

			return deferred.promise;
		};

		service.getIssueNote = function getIssueNote(noteId)
		{
			var deferred = $q.defer();

			junoHttp.get(service.apiPath + '/getIssueNote/' + encodeURIComponent(noteId),
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::getIssueNote error", errors);
					deferred.reject("An error occurred while fetching issue note");
				});

			return deferred.promise;
		};

		service.getIssueId = function getIssueId(issueCode)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/getIssueId/' + encodeURIComponent(issueCode)).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::getIssueId error", errors);
					deferred.reject("An error occurred while fetching issue id");
				});

			return deferred.promise;
		};

		service.getTicklerNote = function getTicklerNote(ticklerId)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/ticklerGetNote/' + encodeURIComponent(ticklerId),
			{
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::getTicklerNote error", errors);
					deferred.reject("An error occurred while fetching tickler note");
				});

			return deferred.promise;
		};

		service.saveTicklerNote = function saveTicklerNote(ticklerNote)
		{
			var deferred = $q.defer();
			$http(
			{
				url: service.apiPath + '/ticklerSaveNote',
				method: "POST",
				data: JSON.stringify(ticklerNote),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::saveTicklerNote error", errors);
					deferred.reject("An error occurred while saving tickler note");
				});

			return deferred.promise;
		};

		service.searchIssues = function searchIssues(search, startIndex, itemsToReturn)
		{
			var deferred = $q.defer();

			$http.post(service.apiPath + '/searchIssues?startIndex=' +
				encodeURIComponent(startIndex) + "&itemsToReturn=" +
				encodeURIComponent(itemsToReturn), search).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::searchIssues error", errors);
					deferred.reject("An error occurred while searching issues");
				});

			return deferred.promise;
		};

		service.getIssue = function getIssue(issueId)
		{
			var deferred = $q.defer();

			$http.post(service.apiPath + '/getIssueById/' + encodeURIComponent(issueId)).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::getIssue error", errors);
					deferred.reject("An error occurred while fetching issue");
				});

			return deferred.promise;
		};

		service.setEditingNoteFlag = function setEditingNoteFlag(noteUUID, userId)
		{
			var deferred = $q.defer();

			$http.post(service.apiPath + '/setEditingNoteFlag?noteUUID=' +
				encodeURIComponent(noteUUID) + "&userId=" +
				encodeURIComponent(userId)).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::setEditingNoteFlag error", errors);
					deferred.reject("An error occurred while setting editing note flag");
				});

			return deferred.promise;
		};

		service.checkEditNoteNew = function checkEditNoteNew(noteUUID, userId)
		{
			var deferred = $q.defer();

			$http.post(service.apiPath + '/checkEditNoteNew?noteUUID=' +
				encodeURIComponent(noteUUID) + "&userId=" +
				encodeURIComponent(userId)).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::checkEditNoteNew error", errors);
					deferred.reject("An error occurred while checking edit note new");
				});

			return deferred.promise;
		};

		service.removeEditingNoteFlag = function removeEditingNoteFlag(noteUUID, userId)
		{
			var deferred = $q.defer();

			$http.post(service.apiPath + '/removeEditingNoteFlag?noteUUID=' +
				encodeURIComponent(noteUUID) + "&userId=" +
				encodeURIComponent(userId)).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("noteService::removeEditingNoteFlag error", errors);
					deferred.reject("An error occurred while removing editing note flag");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/patientDetailStatusService.js":
/*!***********************************************************!*\
  !*** ./src/common/services/patientDetailStatusService.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("patientDetailStatusService", [
	'$http', '$q',
	function($http, $q)
	{

		var service = {};

		service.apiPath = '../ws/rs/patientDetailStatusService';

		service.getStatus = function getStatus(demographicNo)
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + "/getStatus?demographicNo=" + encodeURIComponent(demographicNo),
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("patientDetailStatusService::getStatus error", errors);
					deferred.reject("An error occurred while fetching status");
				});

			return deferred.promise;
		};

		service.validateHC = function validateHC(healthCardNo, versionCode)
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + "/validateHC?hin=" + encodeURIComponent(healthCardNo) +
				"&ver=" + encodeURIComponent(versionCode),
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("patientDetailStatusService::validateHC error", errors);
					deferred.reject("An error occurred while fetching health card validation info");
				});

			return deferred.promise;
		};

		service.isUniqueHC = function isUniqueHC(healthCardNo, demographicNo)
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + "/isUniqueHC?hin=" +
				encodeURIComponent(healthCardNo) + "&demographicNo=" +
				encodeURIComponent(demographicNo),
				Juno.Common.ServiceHelper.configHeaders()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("patientDetailStatusService::isUniqueHC error", errors);
					deferred.reject("An error occurred while checking health card uniqueness");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/personaService.js":
/*!***********************************************!*\
  !*** ./src/common/services/personaService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("personaService", [
	'$http', '$q',
	function($http, $q)
	{
		var service = {};

		service.apiPath = '../ws/rs/persona';

		service.getDashboardMenu = function getDashboardMenu()
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/dashboardMenu',
				method: "GET",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("personaService::getDashboardMenu error", errors);
					deferred.reject("An error occured while getting the dashboard menu from persona");
				});

			return deferred.promise;
		};

		service.getNavBar = function getNavBar()
		{
			var deferred = $q.defer();
			$http(
			{
				url: service.apiPath + '/navbar',
				method: "GET",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("personaService::getNavBar error", errors);
					deferred.reject("An error occured while getting navbar from persona");
				});

			return deferred.promise;
		};

		service.getPatientListConfig = function getPatientListConfig()
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/patientList/config',
				method: "GET",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("personaService::getPatientListConfig error", errors);
					deferred.reject("An error occured while getting getPatientListConfig from persona");
				});

			return deferred.promise;
		};

		service.setPatientListConfig = function setPatientListConfig(patientListConfig)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/patientList/config',
				method: "POST",
				data: patientListConfig,
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(result)
				{
					deferred.resolve(result.data);
				},
				function error(errors)
				{
					console.log("personaService::setPatientListConfig error", errors);
					deferred.reject("An error occured while setting setPatientListConfig from persona");
				});

			return deferred.promise;
		};

		service.setCurrentProgram = function setCurrentProgram(programId)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath +
					'/setDefaultProgramInDomain?programId=' +
					encodeURIComponent(programId),
				method: "GET",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(result)
				{
					deferred.resolve(result.data);
				},
				function error(errors)
				{
					console.log("personaService::setCurrentProgram error", errors);
					deferred.reject("An error occured while setting current");
				});

			return deferred.promise;
		};

		service.getDashboardPreferences = function getDashboardPreferences()
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/preferences',
				method: "POST",
				data:
				{
					type: 'dashboard'
				},
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(result)
				{
					deferred.resolve(result.data);
				},
				function error(errors)
				{
					console.log("personaService::getDashboardPreferences error", errors);
					deferred.reject("An error occured while getting preferences from persona");
				});

			return deferred.promise;
		};

		service.updateDashboardPreferences = function updateDashboardPreferences(prefs)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/updatePreferences',
				method: "POST",
				data: JSON.stringify(prefs),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(result)
				{
					deferred.resolve(result.data);
				},
				function error(errors)
				{
					console.log("personaService::updateDashboardPreferences error", errors);
					deferred.reject("An error occured while updating preferences");
				});
			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/programService.js":
/*!***********************************************!*\
  !*** ./src/common/services/programService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("programService", [
	'$http', '$q',
	function($http, $q)
	{
		var service = {};

		service.apiPath = '../ws/rs/';

		service.getPrograms = function getPrograms()
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + 'program/programList',
				Juno.Common.ServiceHelper.configHeadersWithCache()).then(
				function success(results)
				{
					console.log(results.data);
					deferred.resolve(results.data.content);
				},
				function error(errors)
				{
					console.log("error fetching program list:", errors);
					deferred.reject("An error occured while fetching program list");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/providerService.js":
/*!************************************************!*\
  !*** ./src/common/services/providerService.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module("Common.Services").service("providerService", [
	'$http',
	'$q',
	'junoHttp',
	function($http, $q, junoHttp)
	{

		var service = {};

		service.apiPath = '../ws/rs/providerService';

		service.getMe = function getMe()
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/provider/me', service.configHeaders).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("providerService::getMe error", errors);
					deferred.reject("An error occured while getting user data");
				});

			return deferred.promise;
		};

		service.getProvider = function getProvider(id)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/provider/' + encodeURIComponent(id),
				service.configHeaders).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("providerService::getProvider error", errors);
					deferred.reject("An error occured while getting user data");
				});

			return deferred.promise;
		};

		service.searchProviders = function searchProviders(filter)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/providers/search',
				method: "POST",
				data: JSON.stringify(filter),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data.content);
				},
				function error(errors)
				{
					console.log("providerService::searchProviders error", errors);
					deferred.reject("An error occured while fetching provider list");
				});

			return deferred.promise;
		};

		service.getSettings = function getSettings()
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/settings/get',
				method: "GET"
			}).then(
				function success(results)
				{
					deferred.resolve(results.data.content[0]);
				},
				function error(errors)
				{
					console.log("providerService::getSettings error", errors);
					deferred.reject("An error occured while fetching provider settings");
				});

			return deferred.promise;
		};

		service.saveSettings = function saveSettings(providerNo, settings)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/settings/' + providerNo + '/save',
				method: "POST",
				data: JSON.stringify(settings),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("providerService::saveSettings error", errors);
					deferred.reject("An error occured while saving settings");
				});

			return deferred.promise;
		};

		service.getActiveTeams = function getActiveTeams()
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/getActiveTeams',
				method: "GET"
			}).then(
				function success(results)
				{
					deferred.resolve(results.data.content);
				},
				function error(errors)
				{
					console.log("providerService::getActiveTeams error", errors);
					deferred.reject("An error occured while fetching provider teams");
				});

			return deferred.promise;
		};

		service.getRecentPatientList = function getRecentPatientList()
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();

			junoHttp.get(service.apiPath + '/getRecentDemographicsViewed', config).then(
				function success(response) {
					deferred.resolve(response.data);
				},
				function error(error) {
					console.log("providerService::getRecentDemographicsViewed error", error);
					deferred.reject("An error occurred while getting RecentDemographicsViewed");
				});
			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/providersService.js":
/*!*************************************************!*\
  !*** ./src/common/services/providersService.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module("Common.Services").service("providersService", [
	'$q',
	'junoHttp',
	function($q, junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/providers';

		service.search = function search(searchText, searchMode, page, perPage)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				searchText: searchText,
				searchMode: searchMode,
				page: page,
				perPage: perPage
			};

			junoHttp.get(service.apiPath, config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("providersService::search error", errors);
					deferred.reject("An error occurred while getting providers data");
				});

			return deferred.promise;
		};

		service.getBySecurityRole = function getBySecurityRole(role)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				role: role
			};

			junoHttp.get(service.apiPath + '/bySecurityRole', config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("providersService::getBySecurityRole error", errors);
					deferred.reject("An error occurred while getting providers data");
				});

			return deferred.promise;
		};

		service.getByType = function getByProviderType(type)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				type: type
			};

			junoHttp.get(service.apiPath + '/byType', config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("providersService::getByType error", errors);
					deferred.reject("An error occurred while getting providers data");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/referralDoctorsService.js":
/*!*******************************************************!*\
  !*** ./src/common/services/referralDoctorsService.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("referralDoctorsService", [
	'$q',
	'junoHttp',
	function($q,junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/referralDoctors/';

		service.searchReferralDoctors = function searchReferralDoctors(searchName, searchRefNo, page, perPage)
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				searchName: searchName,
				searchRefNo:searchRefNo,
				page:page,
				perPage:perPage
			};
			junoHttp.get(service.apiPath, config).then(
				function success(response) {
					deferred.resolve(response.data);
				},
				function error(error) {
					console.log("ReferralDoctorsService::searchReferralDoctors error", error);
					deferred.reject("An error occurred while searching ReferralDoctors");
				});
			return deferred.promise;
		};
		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/reportByTemplateService.js":
/*!********************************************************!*\
  !*** ./src/common/services/reportByTemplateService.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("reportByTemplateService", [
	'$http',
	'$q',
	'junoHttp',
	function($http,
	         $q,
	         junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs';

		service.isK2AInit = function isK2AInit()
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/reportByTemplate/K2AActive',
				method: "GET",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("reportByTemplateService::isK2AInit error", errors);
					deferred.reject("An error occurred while fetching k2a content");
				});

			return deferred.promise;
		};

		service.getAllK2AReports = function getAllK2AReports()
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			junoHttp.get(service.apiPath + '/reportByTemplate/allReports', config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("reportByTemplateService::getAllK2AReports error", errors);
					deferred.reject("An error occurred while fetching k2a reports");
				});

			return deferred.promise;
		};

		service.getK2AReportById = function getK2AReportById(id)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/reportByTemplate/getReportById/' + encodeURIComponent(id),
				method: "POST",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("reportByTemplateService::getK2AReportById error", errors);
					deferred.reject("An error occurred while fetching k2a report");
				});

			return deferred.promise;
		};

		service.getK2AUrl = function getK2AUrl()
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			junoHttp.get(service.apiPath + '/reportByTemplate/K2AUrl/', config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("reportByTemplateService::getK2AUrl error", errors);
					deferred.reject("An error occurred while fetching k2a url");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/reportingService.js":
/*!*************************************************!*\
  !*** ./src/common/services/reportingService.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

    Copyright (c) 2012-2018. CloudPractice Inc. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for
    CloudPractice Inc.
    Victoria, British Columbia
    Canada

 */
angular.module("Common.Services").service("reportingService", [
	'$q',
	'junoHttp',
	function($q, junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/reporting/';

		service.getDemographicSetList = function getDemographicSetList()
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();

			junoHttp.get(service.apiPath + 'demographicSets/list', config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("reportingService::demographicSets error", errors);
					deferred.reject("An error occurred while fetching demographicSets");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/resultsService.js":
/*!***********************************************!*\
  !*** ./src/common/services/resultsService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("resultsService", [
	function()
	{
		var service = {};

		/*************************************************************/
		// Factory
		// @param {results_hash} Result hash from Clinicaid API
		// @param {meta_hash} Meta info hash from Clinicaid API
		/*************************************************************/
		service.factory = function factory(results_hash, meta_hash)
		{

			/*************************************************************/
			// Initialize
			/*************************************************************/
			var results_object = {
				data: {},
				meta: {},
				has_results: false,
				error_type: null
			};

			if(util.exists(results_hash) && !angular.equals(results_hash, {}))
			{
				results_object.data = results_hash;
				if(!angular.equals(results_hash, {}) && !angular.equals(results_hash, []))
				{
					results_object.has_results = true;
				}
			}
			if(util.exists(meta_hash))
			{
				results_object.meta = meta_hash;
			}
			else
			{
				results_object.meta = {};
				results_object.meta.pagination = {
					page: 1,
					per_page: 10,
					total: 0,
					total_pages: 0
				};
			}

			return results_object;
		};

		return service;
	}
]);


/***/ }),

/***/ "./src/common/services/scheduleService.js":
/*!************************************************!*\
  !*** ./src/common/services/scheduleService.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("scheduleService", [
	'$http',
	'$q',
	'junoHttp',

	function(
		$http,
		$q,
		junoHttp
	)
	{
		var service = {};

		service.apiPath = '../ws/rs/';

		service.selectedDate = null;

		service.getStatuses = function getStatuses()
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + 'schedule/statuses',
				service.configHeadersWithCache).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::getStatuses error", errors);
					deferred.reject("An error occurred while fetching statuses");
				});

			return deferred.promise;
		};

		service.getTypes = function getTypes()
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + 'schedule/types',
				Juno.Common.ServiceHelper.configHeadersWithCache()).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::getStatuses error", errors);
					deferred.reject("An error occurred while fetching types");
				});

			return deferred.promise;
		};

		service.getAppointments = function getAppointments(day)
		{
			var deferred = $q.defer();

			var config = Juno.Common.ServiceHelper.configHeaders();
			junoHttp.get(service.apiPath + 'schedule/day/' + encodeURIComponent(day), config).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::getAppointments error", errors);
					deferred.reject("An error occurred while getting appointments");
				});

			return deferred.promise;
		};

		service.addAppointment = function addAppointment(appointment)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + 'schedule/add',
				method: "POST",
				data: JSON.stringify(appointment),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::addAppointment error", errors);
					deferred.reject("An error occurred while saving appointment");
				});

			return deferred.promise;
		};

		service.getAppointment = function getAppointment(apptNo)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + 'schedule/getAppointment',
				method: "POST",
				data:
				{
					'id': apptNo
				},
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data.appointment);
				},
				function error(errors)
				{
					console.log("scheduleService::getAppointment error", errors);
					deferred.reject("An error occurred while getting appointment");
				});

			return deferred.promise;
		};

		service.deleteAppointment = function deleteAppointment(apptNo)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + 'schedule/deleteAppointment',
				method: "POST",
				data:
				{
					'id': apptNo
				},
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::deleteAppointment error", errors);
					deferred.reject("An error occurred while deleting appointment");
				});

			return deferred.promise;
		};

		service.appointmentHistory = function appointmentHistory(demoNo)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + 'schedule/' +
					encodeURIComponent(demoNo) + "/appointmentHistory",
				method: "POST",
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::appointmentHistory error", errors);
					deferred.reject("An error occurred while getting appointment history");
				});

			return deferred.promise;
		};

		service.cancelAppointment = function cancelAppointment(apptNo)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + 'schedule/appointment/' +
					encodeURIComponent(apptNo) + "/updateStatus",
				method: "POST",
				data:
				{
					status: 'C'
				},
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::cancelAppointment error", errors);
					deferred.reject("An error occurred while cancelling appointment");
				});

			return deferred.promise;
		};

		service.noShowAppointment = function noShowAppointment(apptNo)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + 'schedule/appointment/' +
					encodeURIComponent(apptNo) + "/updateStatus",
				method: "POST",
				data:
				{
					status: 'N'
				},
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::noShowAppointment error", errors);
					deferred.reject("An error occurred while setting no show appointment");
				});

			return deferred.promise;
		};

		service.getScheduleGroups = function getScheduleGroups()
		{
			var deferred = $q.defer();

			junoHttp.get(
				service.apiPath + 'schedule/groups',
				{headers: Juno.Common.ServiceHelper.configHeaders()}
			).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::getScheduleGroups error", errors);
					deferred.reject();
				}
			);

			return deferred.promise;
		};

		service.getSchedulesForCalendar = function getSchedulesForCalendar(
			providerId,
			startDate,
			endDate,
			siteName
		)
		{
			var deferred = $q.defer();

			var url = service.apiPath + 'schedule/calendar/';
			url += encodeURIComponent(providerId) + '/';
			url += '?startDate=' + encodeURIComponent(startDate);
			url += '&endDate=' + encodeURIComponent(endDate);

			if(siteName != null)
			{
				url += '&site=' + encodeURIComponent(siteName);
			}

			junoHttp.get(
				url,
				{headers: Juno.Common.ServiceHelper.configHeaders()}
			).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::getSchedulesForCalendar error", errors);
					deferred.reject();
				}
			);

			return deferred.promise;
		};

		service.getScheduleTemplateCodes = function getAvailabilityCodes()
		{
			var deferred = $q.defer();

			junoHttp.get(
				service.apiPath + 'schedule/templateCodes',
				{headers: Juno.Common.ServiceHelper.configHeaders()}
			).then(
				function success(results)
				{

					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::getAvailabilityTypes error", errors);
					deferred.reject();
				}
			);

			return deferred.promise;
		};

		service.getAppointmentStatuses = function getAppointmentStatuses()
		{
			var deferred = $q.defer();

			junoHttp.get(
				service.apiPath + 'schedule/calendar/statuses',
				{headers: Juno.Common.ServiceHelper.configHeaders()}
			).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::getAppointmentStatuses error", errors);
					deferred.reject();
				}
			);

			return deferred.promise;
		};

		service.getSites = function getSites()
		{
			var deferred = $q.defer();

			junoHttp.get(
				service.apiPath + 'sites',
				{headers: Juno.Common.ServiceHelper.configHeaders()}
			).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("scheduleService::getSites error", errors);
					deferred.reject();
				}
			);

			return deferred.promise;
		};

		return service;
	}
]);


/***/ }),

/***/ "./src/common/services/securityService.js":
/*!************************************************!*\
  !*** ./src/common/services/securityService.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("securityService", [
	'$http', '$q',
	function($http, $q)
	{
		var service = {};

		service.apiPath = '../ws/rs/';

		service.user = null;

		service.getUser = function getUser()
		{
			return service.user;
		};

		service.setUser = function setUser(u)
		{
			service.user = u;
		};

		service.hasRight = function hasRight(objectName, privilege, demographicNo)
		{
			var deferred = $q.defer();

			var url = service.apiPath + 'persona/hasRight?objectName=' +
				encodeURIComponent(objectName) +
				'&privilege=' +
				encodeURIComponent(privilege) +
				'&demographicNo=' +
				encodeURIComponent(demographicNo);

			$http.get(url, service.configHeadersWithCache).then(
				function success(results)
				{
					deferred.resolve(results.data.success);
				},
				function error(errors)
				{
					console.log("securityService::hasRight error", errors);
					deferred.reject("An error occured while fetching access right");
				});

			return deferred.promise;
		};

		service.hasRights = function hasRights(listOfItems)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + 'persona/hasRights',
				method: "POST",
				data: JSON.stringify(listOfItems),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("securityService::hasRights error", errors);
					deferred.reject("An error occured while fetching access rights");
				});

			return deferred.promise;
		};

		service.isAllowedAccessToPatientRecord = function isAllowedAccessToPatientRecord(demographicNo)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + 'persona/isAllowedAccessToPatientRecord',
				method: "POST",
				data: JSON.stringify(
				{
					"demographicNo": demographicNo
				}),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("securityService::isAllowedAccessToPatientRecord error", errors);
					deferred.reject("An error occured while fetching access rights");
				});

			return deferred.promise;
		};

		service.hasOneOfPermissions = function hasOneOfPermissions(permission_array)
		{
			return true;
		};

		service.hasPermission = function hasPermission(permission)
		{
			return true;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/specialistsService.js":
/*!***************************************************!*\
  !*** ./src/common/services/specialistsService.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("specialistsService", [
	'$q',
	'junoHttp',
	function($q,junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/specialists/';

		service.searchSpecialists = function searchSpecialists(searchName, searchRefNo, page, perPage)
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				searchName: searchName,
				searchRefNo:searchRefNo,
				page:page,
				perPage:perPage
			};
			console.log("params", config.params);

			junoHttp.get(service.apiPath, config).then(
				function success(response) {
					deferred.resolve(response.data);
				},
				function error(error) {
					console.log("SpecialistsService::searchSpecialists error", error);
					deferred.reject("An error occurred while searching Specialists");
				});
			return deferred.promise;
		};
		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/staticDataService.js":
/*!**************************************************!*\
  !*** ./src/common/services/staticDataService.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("staticDataService", [
	function()
	{
		var service = {};

		service.getGenders = function getGenders()
		{
			var genders = [];
			genders.push(
			{
				"value": "M",
				"label": "Male"
			});
			genders.push(
			{
				"value": "F",
				"label": "Female"
			});
			genders.push(
			{
				"value": "T",
				"label": "Transgender"
			});
			genders.push(
			{
				"value": "O",
				"label": "Other"
			});
			genders.push(
			{
				"value": "U",
				"label": "Undefined"
			});
			return genders;
		};

		service.getTitles = function getTitles()
		{
			var titles = [];
			titles.push(
			{
				"value": "MISS",
				"label": "MISS"
			});
			titles.push(
			{
				"value": "MRS",
				"label": "MRS"
			});
			titles.push(
			{
				"value": "MS",
				"label": "MS"
			});
			titles.push(
			{
				"value": "MR",
				"label": "MR"
			});
			titles.push(
			{
				"value": "MSSR",
				"label": "MSSR"
			});
			titles.push(
			{
				"value": "DR",
				"label": "DR"
			});
			titles.push(
			{
				"value": "PROF",
				"label": "PROF"
			});
			titles.push(
			{
				"value": "REEVE",
				"label": "REEVE"
			});
			titles.push(
			{
				"value": "REV",
				"label": "REV"
			});
			titles.push(
			{
				"value": "RT_HON",
				"label": "RT_HON"
			});
			titles.push(
			{
				"value": "SEN",
				"label": "SEN"
			});
			titles.push(
			{
				"value": "SGT",
				"label": "SGT"
			});
			titles.push(
			{
				"value": "SR",
				"label": "SR"
			});
			return titles;
		};

		service.getProvinces = function getProvinces()
		{
			var provinces = [];
			provinces.push(
			{
				"value": "AB",
				"label": "AB-Alberta"
			});
			provinces.push(
			{
				"value": "BC",
				"label": "BC-British Columbia"
			});
			provinces.push(
			{
				"value": "MB",
				"label": "MB-Manitoba"
			});
			provinces.push(
			{
				"value": "NB",
				"label": "NB-New Brunswick"
			});
			provinces.push(
			{
				"value": "NL",
				"label": "NL-Newfoundland Labrador"
			});
			provinces.push(
			{
				"value": "NT",
				"label": "NT-Northwest Territory"
			});
			provinces.push(
			{
				"value": "NS",
				"label": "NS-Nova Scotia"
			});
			provinces.push(
			{
				"value": "NU",
				"label": "NU-Nunavut"
			});
			provinces.push(
			{
				"value": "ON",
				"label": "ON-Ontario"
			});
			provinces.push(
			{
				"value": "PE",
				"label": "PE-Prince Edward Island"
			});
			provinces.push(
			{
				"value": "QC",
				"label": "QC-Quebec"
			});
			provinces.push(
			{
				"value": "SK",
				"label": "SK-Saskatchewan"
			});
			provinces.push(
			{
				"value": "YT",
				"label": "YT-Yukon"
			});
			provinces.push(
			{
				"value": "US",
				"label": "US resident"
			});
			provinces.push(
			{
				"value": "US-AK",
				"label": "US-AK-Alaska"
			});
			provinces.push(
			{
				"value": "US-AL",
				"label": "US-AL-Alabama"
			});
			provinces.push(
			{
				"value": "US-AR",
				"label": "US-AR-Arkansas"
			});
			provinces.push(
			{
				"value": "US-AZ",
				"label": "US-AZ-Arizona"
			});
			provinces.push(
			{
				"value": "US-CA",
				"label": "US-CA-California"
			});
			provinces.push(
			{
				"value": "US-CO",
				"label": "US-CO-Colorado"
			});
			provinces.push(
			{
				"value": "US-CT",
				"label": "US-CT-Connecticut"
			});
			provinces.push(
			{
				"value": "US-CZ",
				"label": "US-CZ-Canal Zone"
			});
			provinces.push(
			{
				"value": "US-DC",
				"label": "US-DC-District Of Columbia"
			});
			provinces.push(
			{
				"value": "US-DE",
				"label": "US-DE-Delaware"
			});
			provinces.push(
			{
				"value": "US-FL",
				"label": "US-FL-Florida"
			});
			provinces.push(
			{
				"value": "US-GA",
				"label": "US-GA-Georgia"
			});
			provinces.push(
			{
				"value": "US-GU",
				"label": "US-GU-Guam"
			});
			provinces.push(
			{
				"value": "US-HI",
				"label": "US-HI-Hawaii"
			});
			provinces.push(
			{
				"value": "US-IA",
				"label": "US-IA-Iowa"
			});
			provinces.push(
			{
				"value": "US-ID",
				"label": "US-ID-Idaho"
			});
			provinces.push(
			{
				"value": "US-IL",
				"label": "US-IL-Illinois"
			});
			provinces.push(
			{
				"value": "US-IN",
				"label": "US-IN-Indiana"
			});
			provinces.push(
			{
				"value": "US-KS",
				"label": "US-KS-Kansas"
			});
			provinces.push(
			{
				"value": "US-KY",
				"label": "US-KY-Kentucky"
			});
			provinces.push(
			{
				"value": "US-LA",
				"label": "US-LA-Louisiana"
			});
			provinces.push(
			{
				"value": "US-MA",
				"label": "US-MA-Massachusetts"
			});
			provinces.push(
			{
				"value": "US-MD",
				"label": "US-MD-Maryland"
			});
			provinces.push(
			{
				"value": "US-ME",
				"label": "US-ME-Maine"
			});
			provinces.push(
			{
				"value": "US-MI",
				"label": "US-MI-Michigan"
			});
			provinces.push(
			{
				"value": "US-MN",
				"label": "US-MN-Minnesota"
			});
			provinces.push(
			{
				"value": "US-MO",
				"label": "US-MO-Missouri"
			});
			provinces.push(
			{
				"value": "US-MS",
				"label": "US-MS-Mississippi"
			});
			provinces.push(
			{
				"value": "US-MT",
				"label": "US-MT-Montana"
			});
			provinces.push(
			{
				"value": "US-NC",
				"label": "US-NC-North Carolina"
			});
			provinces.push(
			{
				"value": "US-ND",
				"label": "US-ND-North Dakota"
			});
			provinces.push(
			{
				"value": "US-NE",
				"label": "US-NE-Nebraska"
			});
			provinces.push(
			{
				"value": "US-NH",
				"label": "US-NH-New Hampshire"
			});
			provinces.push(
			{
				"value": "US-NJ",
				"label": "US-NJ-New Jersey"
			});
			provinces.push(
			{
				"value": "US-NM",
				"label": "US-NM-New Mexico"
			});
			provinces.push(
			{
				"value": "US-NU",
				"label": "US-NU-Nunavut"
			});
			provinces.push(
			{
				"value": "US-NV",
				"label": "US-NV-Nevada"
			});
			provinces.push(
			{
				"value": "US-NY",
				"label": "US-NY-New York"
			});
			provinces.push(
			{
				"value": "US-OH",
				"label": "US-OH-Ohio"
			});
			provinces.push(
			{
				"value": "US-OK",
				"label": "US-OK-Oklahoma"
			});
			provinces.push(
			{
				"value": "US-OR",
				"label": "US-OR-Oregon"
			});
			provinces.push(
			{
				"value": "US-PA",
				"label": "US-PA-Pennsylvania"
			});
			provinces.push(
			{
				"value": "US-PR",
				"label": "US-PR-Puerto Rico"
			});
			provinces.push(
			{
				"value": "US-RI",
				"label": "US-RI-Rhode Island"
			});
			provinces.push(
			{
				"value": "US-SC",
				"label": "US-SC-South Carolina"
			});
			provinces.push(
			{
				"value": "US-SD",
				"label": "US-SD-South Dakota"
			});
			provinces.push(
			{
				"value": "US-TN",
				"label": "US-TN-Tennessee"
			});
			provinces.push(
			{
				"value": "US-TX",
				"label": "US-TX-Texas"
			});
			provinces.push(
			{
				"value": "US-UT",
				"label": "US-UT-Utah"
			});
			provinces.push(
			{
				"value": "US-VA",
				"label": "US-VA-Virginia"
			});
			provinces.push(
			{
				"value": "US-VI",
				"label": "US-VI-Virgin Islands"
			});
			provinces.push(
			{
				"value": "US-VT",
				"label": "US-VT-Vermont"
			});
			provinces.push(
			{
				"value": "US-WA",
				"label": "US-WA-Washington"
			});
			provinces.push(
			{
				"value": "US-WI",
				"label": "US-WI-Wisconsin"
			});
			provinces.push(
			{
				"value": "US-WV",
				"label": "US-WV-West Virginia"
			});
			provinces.push(
			{
				"value": "US-WY",
				"label": "US-WY-Wyoming"
			});
			provinces.push(
			{
				"value": "OT",
				"label": "Other"
			});
			return provinces;
		};

		service.getCountries = function getCountries()
		{
			var countries = [];
			countries.push(
			{
				"value": "AF",
				"label": "AFGHANISTAN"
			});
			countries.push(
			{
				"value": "AX",
				"label": "ALAND ISLANDS"
			});
			countries.push(
			{
				"value": "AL",
				"label": "ALBANIA"
			});
			countries.push(
			{
				"value": "DZ",
				"label": "ALGERIA"
			});
			countries.push(
			{
				"value": "AS",
				"label": "AMERICAN SAMOA"
			});
			countries.push(
			{
				"value": "AD",
				"label": "ANDORRA"
			});
			countries.push(
			{
				"value": "AO",
				"label": "ANGOLA"
			});
			countries.push(
			{
				"value": "AI",
				"label": "ANGUILLA"
			});
			countries.push(
			{
				"value": "AQ",
				"label": "ANTARCTICA"
			});
			countries.push(
			{
				"value": "AG",
				"label": "ANTIGUA AND BARBUDA"
			});
			countries.push(
			{
				"value": "AR",
				"label": "ARGENTINA"
			});
			countries.push(
			{
				"value": "AM",
				"label": "ARMENIA"
			});
			countries.push(
			{
				"value": "AW",
				"label": "ARUBA"
			});
			countries.push(
			{
				"value": "AU",
				"label": "AUSTRALIA"
			});
			countries.push(
			{
				"value": "AT",
				"label": "AUSTRIA"
			});
			countries.push(
			{
				"value": "AZ",
				"label": "AZERBAIJAN"
			});
			countries.push(
			{
				"value": "BS",
				"label": "BAHAMAS"
			});
			countries.push(
			{
				"value": "BH",
				"label": "BAHRAIN"
			});
			countries.push(
			{
				"value": "BD",
				"label": "BANGLADESH"
			});
			countries.push(
			{
				"value": "BB",
				"label": "BARBADOS"
			});
			countries.push(
			{
				"value": "BY",
				"label": "BELARUS"
			});
			countries.push(
			{
				"value": "BE",
				"label": "BELGIUM"
			});
			countries.push(
			{
				"value": "BZ",
				"label": "BELIZE"
			});
			countries.push(
			{
				"value": "BJ",
				"label": "BENIN"
			});
			countries.push(
			{
				"value": "BM",
				"label": "BERMUDA"
			});
			countries.push(
			{
				"value": "BT",
				"label": "BHUTAN"
			});
			countries.push(
			{
				"value": "BO",
				"label": "BOLIVIA"
			});
			countries.push(
			{
				"value": "BA",
				"label": "BOSNIA AND HERZEGOVINA"
			});
			countries.push(
			{
				"value": "BW",
				"label": "BOTSWANA"
			});
			countries.push(
			{
				"value": "BV",
				"label": "BOUVET ISLAND"
			});
			countries.push(
			{
				"value": "BR",
				"label": "BRAZIL"
			});
			countries.push(
			{
				"value": "IO",
				"label": "BRITISH INDIAN OCEAN TERRITORY"
			});
			countries.push(
			{
				"value": "BN",
				"label": "BRUNEI DARUSSALAM"
			});
			countries.push(
			{
				"value": "BG",
				"label": "BULGARIA"
			});
			countries.push(
			{
				"value": "BF",
				"label": "BURKINA FASO"
			});
			countries.push(
			{
				"value": "BI",
				"label": "BURUNDI"
			});
			countries.push(
			{
				"value": "KH",
				"label": "CAMBODIA"
			});
			countries.push(
			{
				"value": "CM",
				"label": "CAMEROON"
			});
			countries.push(
			{
				"value": "CA",
				"label": "CANADA"
			});
			countries.push(
			{
				"value": "CV",
				"label": "CAPE VERDE"
			});
			countries.push(
			{
				"value": "KY",
				"label": "CAYMAN ISLANDS"
			});
			countries.push(
			{
				"value": "CF",
				"label": "CENTRAL AFRICAN REPUBLIC"
			});
			countries.push(
			{
				"value": "TD",
				"label": "CHAD"
			});
			countries.push(
			{
				"value": "CL",
				"label": "CHILE"
			});
			countries.push(
			{
				"value": "CN",
				"label": "CHINA"
			});
			countries.push(
			{
				"value": "CX",
				"label": "CHRISTMAS ISLAND"
			});
			countries.push(
			{
				"value": "CC",
				"label": "COCOS (KEELING) ISLANDS"
			});
			countries.push(
			{
				"value": "CO",
				"label": "COLOMBIA"
			});
			countries.push(
			{
				"value": "KM",
				"label": "COMOROS"
			});
			countries.push(
			{
				"value": "CG",
				"label": "CONGO"
			});
			countries.push(
			{
				"value": "CD",
				"label": "CONGO, THE DEMOCRATIC REPUBLIC OF THE"
			});
			countries.push(
			{
				"value": "CK",
				"label": "COOK ISLANDS"
			});
			countries.push(
			{
				"value": "CR",
				"label": "COSTA RICA"
			});
			countries.push(
			{
				"value": "CI",
				"label": "CÃ¯TE D IVOIRE"
			});
			countries.push(
			{
				"value": "HR",
				"label": "CROATIA"
			});
			countries.push(
			{
				"value": "CU",
				"label": "CUBA"
			});
			countries.push(
			{
				"value": "CY",
				"label": "CYPRUS"
			});
			countries.push(
			{
				"value": "CZ",
				"label": "CZECH REPUBLIC"
			});
			countries.push(
			{
				"value": "DK",
				"label": "DENMARK"
			});
			countries.push(
			{
				"value": "DJ",
				"label": "DJIBOUTI"
			});
			countries.push(
			{
				"value": "DM",
				"label": "DOMINICA"
			});
			countries.push(
			{
				"value": "DO",
				"label": "DOMINICAN REPUBLIC"
			});
			countries.push(
			{
				"value": "EC",
				"label": "ECUADOR"
			});
			countries.push(
			{
				"value": "EG",
				"label": "EGYPT"
			});
			countries.push(
			{
				"value": "SV",
				"label": "EL SALVADOR"
			});
			countries.push(
			{
				"value": "GQ",
				"label": "EQUATORIAL GUINEA"
			});
			countries.push(
			{
				"value": "ER",
				"label": "ERITREA"
			});
			countries.push(
			{
				"value": "EE",
				"label": "ESTONIA"
			});
			countries.push(
			{
				"value": "ET",
				"label": "ETHIOPIA"
			});
			countries.push(
			{
				"value": "FK",
				"label": "FALKLAND ISLANDS (MALVINAS)"
			});
			countries.push(
			{
				"value": "FO",
				"label": "FAROE ISLANDS"
			});
			countries.push(
			{
				"value": "FJ",
				"label": "FIJI"
			});
			countries.push(
			{
				"value": "FI",
				"label": "FINLAND"
			});
			countries.push(
			{
				"value": "FR",
				"label": "FRANCE"
			});
			countries.push(
			{
				"value": "GF",
				"label": "FRENCH GUIANA"
			});
			countries.push(
			{
				"value": "PF",
				"label": "FRENCH POLYNESIA"
			});
			countries.push(
			{
				"value": "TF",
				"label": "FRENCH SOUTHERN TERRITORIES"
			});
			countries.push(
			{
				"value": "GA",
				"label": "GABON"
			});
			countries.push(
			{
				"value": "GM",
				"label": "GAMBIA"
			});
			countries.push(
			{
				"value": "GE",
				"label": "GEORGIA"
			});
			countries.push(
			{
				"value": "DE",
				"label": "GERMANY"
			});
			countries.push(
			{
				"value": "GH",
				"label": "GHANA"
			});
			countries.push(
			{
				"value": "GI",
				"label": "GIBRALTAR"
			});
			countries.push(
			{
				"value": "GR",
				"label": "GREECE"
			});
			countries.push(
			{
				"value": "GL",
				"label": "GREENLAND"
			});
			countries.push(
			{
				"value": "GD",
				"label": "GRENADA"
			});
			countries.push(
			{
				"value": "GP",
				"label": "GUADELOUPE"
			});
			countries.push(
			{
				"value": "GU",
				"label": "GUAM"
			});
			countries.push(
			{
				"value": "GT",
				"label": "GUATEMALA"
			});
			countries.push(
			{
				"value": "GG",
				"label": "GUERNSEY"
			});
			countries.push(
			{
				"value": "GN",
				"label": "GUINEA"
			});
			countries.push(
			{
				"value": "GW",
				"label": "GUINEA-BISSAU"
			});
			countries.push(
			{
				"value": "GY",
				"label": "GUYANA"
			});
			countries.push(
			{
				"value": "HT",
				"label": "HAITI"
			});
			countries.push(
			{
				"value": "HM",
				"label": "HEARD ISLAND AND MCDONALD ISLANDS"
			});
			countries.push(
			{
				"value": "VA",
				"label": "HOLY SEE (VATICAN CITY STATE)"
			});
			countries.push(
			{
				"value": "HN",
				"label": "HONDURAS"
			});
			countries.push(
			{
				"value": "HK",
				"label": "HONG KONG"
			});
			countries.push(
			{
				"value": "HU",
				"label": "HUNGARY"
			});
			countries.push(
			{
				"value": "IS",
				"label": "ICELAND"
			});
			countries.push(
			{
				"value": "IN",
				"label": "INDIA"
			});
			countries.push(
			{
				"value": "ID",
				"label": "INDONESIA"
			});
			countries.push(
			{
				"value": "IR",
				"label": "IRAN, ISLAMIC REPUBLIC OF"
			});
			countries.push(
			{
				"value": "IQ",
				"label": "IRAQ"
			});
			countries.push(
			{
				"value": "IE",
				"label": "IRELAND"
			});
			countries.push(
			{
				"value": "IM",
				"label": "ISLE OF MAN"
			});
			countries.push(
			{
				"value": "IL",
				"label": "ISRAEL"
			});
			countries.push(
			{
				"value": "IT",
				"label": "ITALY"
			});
			countries.push(
			{
				"value": "JM",
				"label": "JAMAICA"
			});
			countries.push(
			{
				"value": "JP",
				"label": "JAPAN"
			});
			countries.push(
			{
				"value": "JE",
				"label": "JERSEY"
			});
			countries.push(
			{
				"value": "JO",
				"label": "JORDAN"
			});
			countries.push(
			{
				"value": "KZ",
				"label": "KAZAKHSTAN"
			});
			countries.push(
			{
				"value": "KE",
				"label": "KENYA"
			});
			countries.push(
			{
				"value": "KI",
				"label": "KIRIBATI"
			});
			countries.push(
			{
				"value": "KP",
				"label": "KOREA, DEMOCRATIC PEOPLES REPUBLIC OF"
			});
			countries.push(
			{
				"value": "KR",
				"label": "KOREA, REPUBLIC OF"
			});
			countries.push(
			{
				"value": "KW",
				"label": "KUWAIT"
			});
			countries.push(
			{
				"value": "KG",
				"label": "KYRGYZSTAN"
			});
			countries.push(
			{
				"value": "LA",
				"label": "LAO PEOPLES DEMOCRATIC REPUBLIC"
			});
			countries.push(
			{
				"value": "LV",
				"label": "LATVIA"
			});
			countries.push(
			{
				"value": "LB",
				"label": "LEBANON"
			});
			countries.push(
			{
				"value": "LS",
				"label": "LESOTHO"
			});
			countries.push(
			{
				"value": "LR",
				"label": "LIBERIA"
			});
			countries.push(
			{
				"value": "LY",
				"label": "LIBYAN ARAB JAMAHIRIYA"
			});
			countries.push(
			{
				"value": "LI",
				"label": "LIECHTENSTEIN"
			});
			countries.push(
			{
				"value": "LT",
				"label": "LITHUANIA"
			});
			countries.push(
			{
				"value": "LU",
				"label": "LUXEMBOURG"
			});
			countries.push(
			{
				"value": "MO",
				"label": "MACAO"
			});
			countries.push(
			{
				"value": "MK",
				"label": "MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF"
			});
			countries.push(
			{
				"value": "MG",
				"label": "MADAGASCAR"
			});
			countries.push(
			{
				"value": "MW",
				"label": "MALAWI"
			});
			countries.push(
			{
				"value": "MY",
				"label": "MALAYSIA"
			});
			countries.push(
			{
				"value": "MV",
				"label": "MALDIVES"
			});
			countries.push(
			{
				"value": "ML",
				"label": "MALI"
			});
			countries.push(
			{
				"value": "MT",
				"label": "MALTA"
			});
			countries.push(
			{
				"value": "MH",
				"label": "MARSHALL ISLANDS"
			});
			countries.push(
			{
				"value": "MQ",
				"label": "MARTINIQUE"
			});
			countries.push(
			{
				"value": "MR",
				"label": "MAURITANIA"
			});
			countries.push(
			{
				"value": "MU",
				"label": "MAURITIUS"
			});
			countries.push(
			{
				"value": "YT",
				"label": "MAYOTTE"
			});
			countries.push(
			{
				"value": "MX",
				"label": "MEXICO"
			});
			countries.push(
			{
				"value": "FM",
				"label": "MICRONESIA, FEDERATED STATES OF"
			});
			countries.push(
			{
				"value": "MD",
				"label": "MOLDOVA"
			});
			countries.push(
			{
				"value": "MC",
				"label": "MONACO"
			});
			countries.push(
			{
				"value": "MN",
				"label": "MONGOLIA"
			});
			countries.push(
			{
				"value": "ME",
				"label": "MONTENEGRO"
			});
			countries.push(
			{
				"value": "MS",
				"label": "MONTSERRAT"
			});
			countries.push(
			{
				"value": "MA",
				"label": "MOROCCO"
			});
			countries.push(
			{
				"value": "MZ",
				"label": "MOZAMBIQUE"
			});
			countries.push(
			{
				"value": "MM",
				"label": "MYANMAR"
			});
			countries.push(
			{
				"value": "NA",
				"label": "NAMIBIA"
			});
			countries.push(
			{
				"value": "NR",
				"label": "NAURU"
			});
			countries.push(
			{
				"value": "NP",
				"label": "NEPAL"
			});
			countries.push(
			{
				"value": "NL",
				"label": "NETHERLANDS"
			});
			countries.push(
			{
				"value": "AN",
				"label": "NETHERLANDS ANTILLES"
			});
			countries.push(
			{
				"value": "NC",
				"label": "NEW CALEDONIA"
			});
			countries.push(
			{
				"value": "NZ",
				"label": "NEW ZEALAND"
			});
			countries.push(
			{
				"value": "NI",
				"label": "NICARAGUA"
			});
			countries.push(
			{
				"value": "NE",
				"label": "NIGER"
			});
			countries.push(
			{
				"value": "NG",
				"label": "NIGERIA"
			});
			countries.push(
			{
				"value": "NU",
				"label": "NIUE"
			});
			countries.push(
			{
				"value": "NF",
				"label": "NORFOLK ISLAND"
			});
			countries.push(
			{
				"value": "MP",
				"label": "NORTHERN MARIANA ISLANDS"
			});
			countries.push(
			{
				"value": "NO",
				"label": "NORWAY"
			});
			countries.push(
			{
				"value": "OM",
				"label": "OMAN"
			});
			countries.push(
			{
				"value": "PK",
				"label": "PAKISTAN"
			});
			countries.push(
			{
				"value": "PW",
				"label": "PALAU"
			});
			countries.push(
			{
				"value": "PS",
				"label": "PALESTINIAN TERRITORY, OCCUPIED"
			});
			countries.push(
			{
				"value": "PA",
				"label": "PANAMA"
			});
			countries.push(
			{
				"value": "PG",
				"label": "PAPUA NEW GUINEA"
			});
			countries.push(
			{
				"value": "PY",
				"label": "PARAGUAY"
			});
			countries.push(
			{
				"value": "PE",
				"label": "PERU"
			});
			countries.push(
			{
				"value": "PH",
				"label": "PHILIPPINES"
			});
			countries.push(
			{
				"value": "PN",
				"label": "PITCAIRN"
			});
			countries.push(
			{
				"value": "PL",
				"label": "POLAND"
			});
			countries.push(
			{
				"value": "PT",
				"label": "PORTUGAL"
			});
			countries.push(
			{
				"value": "PR",
				"label": "PUERTO RICO"
			});
			countries.push(
			{
				"value": "QA",
				"label": "QATAR"
			});
			countries.push(
			{
				"value": "RE",
				"label": "RÆUNION"
			});
			countries.push(
			{
				"value": "RO",
				"label": "ROMANIA"
			});
			countries.push(
			{
				"value": "RU",
				"label": "RUSSIAN FEDERATION"
			});
			countries.push(
			{
				"value": "RW",
				"label": "RWANDA"
			});
			countries.push(
			{
				"value": "BL",
				"label": "SAINT BARTHÆLEMY"
			});
			countries.push(
			{
				"value": "SH",
				"label": "SAINT HELENA"
			});
			countries.push(
			{
				"value": "KN",
				"label": "SAINT KITTS AND NEVIS"
			});
			countries.push(
			{
				"value": "LC",
				"label": "SAINT LUCIA"
			});
			countries.push(
			{
				"value": "MF",
				"label": "SAINT MARTIN"
			});
			countries.push(
			{
				"value": "PM",
				"label": "SAINT PIERRE AND MIQUELON"
			});
			countries.push(
			{
				"value": "VC",
				"label": "SAINT VINCENT AND THE GRENADINES"
			});
			countries.push(
			{
				"value": "WS",
				"label": "SAMOA"
			});
			countries.push(
			{
				"value": "SM",
				"label": "SAN MARINO"
			});
			countries.push(
			{
				"value": "ST",
				"label": "SAO TOME AND PRINCIPE"
			});
			countries.push(
			{
				"value": "SA",
				"label": "SAUDI ARABIA"
			});
			countries.push(
			{
				"value": "SN",
				"label": "SENEGAL"
			});
			countries.push(
			{
				"value": "RS",
				"label": "SERBIA"
			});
			countries.push(
			{
				"value": "SC",
				"label": "SEYCHELLES"
			});
			countries.push(
			{
				"value": "SL",
				"label": "SIERRA LEONE"
			});
			countries.push(
			{
				"value": "SG",
				"label": "SINGAPORE"
			});
			countries.push(
			{
				"value": "SK",
				"label": "SLOVAKIA"
			});
			countries.push(
			{
				"value": "SI",
				"label": "SLOVENIA"
			});
			countries.push(
			{
				"value": "SB",
				"label": "SOLOMON ISLANDS"
			});
			countries.push(
			{
				"value": "SO",
				"label": "SOMALIA"
			});
			countries.push(
			{
				"value": "ZA",
				"label": "SOUTH AFRICA"
			});
			countries.push(
			{
				"value": "GS",
				"label": "SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS"
			});
			countries.push(
			{
				"value": "ES",
				"label": "SPAIN"
			});
			countries.push(
			{
				"value": "LK",
				"label": "SRI LANKA"
			});
			countries.push(
			{
				"value": "SD",
				"label": "SUDAN"
			});
			countries.push(
			{
				"value": "SR",
				"label": "SURINAME"
			});
			countries.push(
			{
				"value": "SJ",
				"label": "SVALBARD AND JAN MAYEN"
			});
			countries.push(
			{
				"value": "SZ",
				"label": "SWAZILAND"
			});
			countries.push(
			{
				"value": "SE",
				"label": "SWEDEN"
			});
			countries.push(
			{
				"value": "CH",
				"label": "SWITZERLAND"
			});
			countries.push(
			{
				"value": "SY",
				"label": "SYRIAN ARAB REPUBLIC"
			});
			countries.push(
			{
				"value": "TW",
				"label": "TAIWAN, PROVINCE OF CHINA"
			});
			countries.push(
			{
				"value": "TJ",
				"label": "TAJIKISTAN"
			});
			countries.push(
			{
				"value": "TZ",
				"label": "TANZANIA, UNITED REPUBLIC OF"
			});
			countries.push(
			{
				"value": "TH",
				"label": "THAILAND"
			});
			countries.push(
			{
				"value": "TL",
				"label": "TIMOR-LESTE"
			});
			countries.push(
			{
				"value": "TG",
				"label": "TOGO"
			});
			countries.push(
			{
				"value": "TK",
				"label": "TOKELAU"
			});
			countries.push(
			{
				"value": "TO",
				"label": "TONGA"
			});
			countries.push(
			{
				"value": "TT",
				"label": "TRINIDAD AND TOBAGO"
			});
			countries.push(
			{
				"value": "TN",
				"label": "TUNISIA"
			});
			countries.push(
			{
				"value": "TR",
				"label": "TURKEY"
			});
			countries.push(
			{
				"value": "TM",
				"label": "TURKMENISTAN"
			});
			countries.push(
			{
				"value": "TC",
				"label": "TURKS AND CAICOS ISLANDS"
			});
			countries.push(
			{
				"value": "TV",
				"label": "TUVALU"
			});
			countries.push(
			{
				"value": "UG",
				"label": "UGANDA"
			});
			countries.push(
			{
				"value": "UA",
				"label": "UKRAINE"
			});
			countries.push(
			{
				"value": "AE",
				"label": "UNITED ARAB EMIRATES"
			});
			countries.push(
			{
				"value": "GB",
				"label": "UNITED KINGDOM"
			});
			countries.push(
			{
				"value": "US",
				"label": "UNITED STATES"
			});
			countries.push(
			{
				"value": "UM",
				"label": "UNITED STATES MINOR OUTLYING ISLANDS"
			});
			countries.push(
			{
				"value": "UY",
				"label": "URUGUAY"
			});
			countries.push(
			{
				"value": "UZ",
				"label": "UZBEKISTAN"
			});
			countries.push(
			{
				"value": "VU",
				"label": "VANUATU"
			});
			countries.push(
			{
				"value": "VA",
				"label": "VATICAN CITY STATE"
			});
			countries.push(
			{
				"value": "VE",
				"label": "VENEZUELA"
			});
			countries.push(
			{
				"value": "VN",
				"label": "VIET NAM"
			});
			countries.push(
			{
				"value": "VG",
				"label": "VIRGIN ISLANDS, BRITISH"
			});
			countries.push(
			{
				"value": "VI",
				"label": "VIRGIN ISLANDS, U.S."
			});
			countries.push(
			{
				"value": "WF",
				"label": "WALLIS AND FUTUNA"
			});
			countries.push(
			{
				"value": "EH",
				"label": "WESTERN SAHARA"
			});
			countries.push(
			{
				"value": "YE",
				"label": "YEMEN"
			});
			countries.push(
			{
				"value": "ZM",
				"label": "ZAMBIA"
			});
			countries.push(
			{
				"value": "ZW",
				"label": "ZIMBABWE"
			});
			return countries;
		};

		service.getEngFre = function getEngFre()
		{
			var langs = [];
			langs.push(
			{
				"value": "English",
				"label": "English"
			});
			langs.push(
			{
				"value": "French",
				"label": "French"
			});
			langs.push(
			{
				"value": "Other",
				"label": "Other"
			});
			return langs;
		};

		service.getSpokenLanguages = function getSpokenLanguages()
		{
			var langs = [];
			langs.push(
			{
				"value": "English",
				"label": "English"
			});
			langs.push(
			{
				"value": "French",
				"label": "French"
			});
			langs.push(
			{
				"value": "Abkhazian",
				"label": "Abkhazian"
			});
			langs.push(
			{
				"value": "Achinese",
				"label": "Achinese"
			});
			langs.push(
			{
				"value": "Acoli",
				"label": "Acoli"
			});
			langs.push(
			{
				"value": "Adangme",
				"label": "Adangme"
			});
			langs.push(
			{
				"value": "Adyghe",
				"label": "Adyghe"
			});
			langs.push(
			{
				"value": "Afar",
				"label": "Afar"
			});
			langs.push(
			{
				"value": "Afrihili",
				"label": "Afrihili"
			});
			langs.push(
			{
				"value": "Afrikaans",
				"label": "Afrikaans"
			});
			langs.push(
			{
				"value": "Afro-Asiatic (Other)",
				"label": "Afro-Asiatic"
			});
			langs.push(
			{
				"value": "Ainu",
				"label": "Ainu"
			});
			langs.push(
			{
				"value": "Akan",
				"label": "Akan"
			});
			langs.push(
			{
				"value": "Akkadian",
				"label": "Akkadian"
			});
			langs.push(
			{
				"value": "Albanian",
				"label": "Albanian"
			});
			langs.push(
			{
				"value": "Aleut",
				"label": "Aleut"
			});
			langs.push(
			{
				"value": "Algonquian Languages",
				"label": "Algonquian Languages"
			});
			langs.push(
			{
				"value": "Altaic (Other)",
				"label": "Altaic"
			});
			langs.push(
			{
				"value": "Amharic",
				"label": "Amharic"
			});
			langs.push(
			{
				"value": "Angika",
				"label": "Angika"
			});
			langs.push(
			{
				"value": "Apache Languages",
				"label": "Apache Languages"
			});
			langs.push(
			{
				"value": "Arabic",
				"label": "Arabic"
			});
			langs.push(
			{
				"value": "Aramaic",
				"label": "Aramaic"
			});
			langs.push(
			{
				"value": "Arapaho",
				"label": "Arapaho"
			});
			langs.push(
			{
				"value": "Araucanian",
				"label": "Araucanian"
			});
			langs.push(
			{
				"value": "Arawak",
				"label": "Arawak"
			});
			langs.push(
			{
				"value": "Argonese",
				"label": "Argonese"
			});
			langs.push(
			{
				"value": "Armenian",
				"label": "Armenian"
			});
			langs.push(
			{
				"value": "Aromanian",
				"label": "Aromanian"
			});
			langs.push(
			{
				"value": "Artificial (Other)",
				"label": "Artificial"
			});
			langs.push(
			{
				"value": "Assamese",
				"label": "Assamese"
			});
			langs.push(
			{
				"value": "Asturian",
				"label": "Asturian"
			});
			langs.push(
			{
				"value": "Athapascan Languages",
				"label": "Athapascan Languages"
			});
			langs.push(
			{
				"value": "Australian Languages",
				"label": "Australian Languages"
			});
			langs.push(
			{
				"value": "Austronesian (Other)",
				"label": "Austronesian"
			});
			langs.push(
			{
				"value": "Avaric",
				"label": "Avaric"
			});
			langs.push(
			{
				"value": "Avestan",
				"label": "Avestan"
			});
			langs.push(
			{
				"value": "Awadhi",
				"label": "Awadhi"
			});
			langs.push(
			{
				"value": "Aymara",
				"label": "Aymara"
			});
			langs.push(
			{
				"value": "Azerbaijani",
				"label": "Azerbaijani"
			});
			langs.push(
			{
				"value": "Balinese",
				"label": "Balinese"
			});
			langs.push(
			{
				"value": "Baltic (Other)",
				"label": "Baltic"
			});
			langs.push(
			{
				"value": "Baluchi",
				"label": "Baluchi"
			});
			langs.push(
			{
				"value": "Bambara",
				"label": "Bambara"
			});
			langs.push(
			{
				"value": "Bamileke Languages",
				"label": "Bamileke Languages"
			});
			langs.push(
			{
				"value": "Banda",
				"label": "Banda"
			});
			langs.push(
			{
				"value": "Bantu (Other)",
				"label": "Bantu"
			});
			langs.push(
			{
				"value": "Basa",
				"label": "Basa"
			});
			langs.push(
			{
				"value": "Bashkir",
				"label": "Bashkir"
			});
			langs.push(
			{
				"value": "Basque",
				"label": "Basque"
			});
			langs.push(
			{
				"value": "Batak (Indonesia)",
				"label": "Batak (Indonesia)"
			});
			langs.push(
			{
				"value": "Beja",
				"label": "Beja"
			});
			langs.push(
			{
				"value": "Belarusian",
				"label": "Belarusian"
			});
			langs.push(
			{
				"value": "Bemba",
				"label": "Bemba"
			});
			langs.push(
			{
				"value": "Bengali",
				"label": "Bengali"
			});
			langs.push(
			{
				"value": "Berber (Other)",
				"label": "Berber"
			});
			langs.push(
			{
				"value": "Bhojpuri",
				"label": "Bhojpuri"
			});
			langs.push(
			{
				"value": "Bihari",
				"label": "Bihari"
			});
			langs.push(
			{
				"value": "Bikol",
				"label": "Bikol"
			});
			langs.push(
			{
				"value": "Bini",
				"label": "Bini"
			});
			langs.push(
			{
				"value": "Bislama",
				"label": "Bislama"
			});
			langs.push(
			{
				"value": "Blin",
				"label": "Blin"
			});
			langs.push(
			{
				"value": "Bokmal, Norwegian",
				"label": "Bokmal, Norwegian"
			});
			langs.push(
			{
				"value": "Bosnian",
				"label": "Bosnian"
			});
			langs.push(
			{
				"value": "Braj",
				"label": "Braj"
			});
			langs.push(
			{
				"value": "Breton",
				"label": "Breton"
			});
			langs.push(
			{
				"value": "Buginese",
				"label": "Buginese"
			});
			langs.push(
			{
				"value": "Bulgarian",
				"label": "Bulgarian"
			});
			langs.push(
			{
				"value": "Buriat",
				"label": "Buriat"
			});
			langs.push(
			{
				"value": "Burmese",
				"label": "Burmese"
			});
			langs.push(
			{
				"value": "Caddo",
				"label": "Caddo"
			});
			langs.push(
			{
				"value": "Cantonese",
				"label": "Cantonese"
			});
			langs.push(
			{
				"value": "Carib",
				"label": "Carib"
			});
			langs.push(
			{
				"value": "Catalan",
				"label": "Catalan"
			});
			langs.push(
			{
				"value": "Caucasian (Other)",
				"label": "Caucasian"
			});
			langs.push(
			{
				"value": "Cebuano",
				"label": "Cebuano"
			});
			langs.push(
			{
				"value": "Celtic (Other)",
				"label": "Celtic"
			});
			langs.push(
			{
				"value": "Central American Indian (Other)",
				"label": "Central American Indian"
			});
			langs.push(
			{
				"value": "Chagatai",
				"label": "Chagatai"
			});
			langs.push(
			{
				"value": "Chamic Languages",
				"label": "Chamic Languages"
			});
			langs.push(
			{
				"value": "Chamorro",
				"label": "Chamorro"
			});
			langs.push(
			{
				"value": "Chechen",
				"label": "Chechen"
			});
			langs.push(
			{
				"value": "Cherokee",
				"label": "Cherokee"
			});
			langs.push(
			{
				"value": "Cheyenne",
				"label": "Cheyenne"
			});
			langs.push(
			{
				"value": "Chibcha",
				"label": "Chibcha"
			});
			langs.push(
			{
				"value": "Chichewa",
				"label": "Chichewa"
			});
			langs.push(
			{
				"value": "Chinese",
				"label": "Chinese"
			});
			langs.push(
			{
				"value": "Chinook Jargon",
				"label": "Chinook Jargon"
			});
			langs.push(
			{
				"value": "Chipewyan",
				"label": "Chipewyan"
			});
			langs.push(
			{
				"value": "Choctaw",
				"label": "Choctaw"
			});
			langs.push(
			{
				"value": "Chuukese",
				"label": "Chuukese"
			});
			langs.push(
			{
				"value": "Chuvash",
				"label": "Chuvash"
			});
			langs.push(
			{
				"value": "Classical Nepal Bhasa",
				"label": "Classical Nepal Bhasa"
			});
			langs.push(
			{
				"value": "Coptic",
				"label": "Coptic"
			});
			langs.push(
			{
				"value": "Cornish",
				"label": "Cornish"
			});
			langs.push(
			{
				"value": "Corsican",
				"label": "Corsican"
			});
			langs.push(
			{
				"value": "Cree",
				"label": "Cree"
			});
			langs.push(
			{
				"value": "Creek",
				"label": "Creek"
			});
			langs.push(
			{
				"value": "Creoles And Pidgins (Other)",
				"label": "Creoles & Pidgins"
			});
			langs.push(
			{
				"value": "Creoles And Pidgins, English-Based (Other)",
				"label": "Creoles & Pidgins, ENG-Based"
			});
			langs.push(
			{
				"value": "Creoles And Pidgins, French-Based (Other)",
				"label": "Creoles & Pidgins, FRE-Based"
			});
			langs.push(
			{
				"value": "Creoles And Pidgins, Portuguese-Based (Other)",
				"label": "Creoles & Pidgins, POR-Based"
			});
			langs.push(
			{
				"value": "Crimean Tatar",
				"label": "Crimean Tatar"
			});
			langs.push(
			{
				"value": "Croatian",
				"label": "Croatian"
			});
			langs.push(
			{
				"value": "Cushitic (Other)",
				"label": "Cushitic"
			});
			langs.push(
			{
				"value": "Czech",
				"label": "Czech"
			});
			langs.push(
			{
				"value": "Dakota",
				"label": "Dakota"
			});
			langs.push(
			{
				"value": "Danish",
				"label": "Danish"
			});
			langs.push(
			{
				"value": "Dargwa",
				"label": "Dargwa"
			});
			langs.push(
			{
				"value": "Dayak",
				"label": "Dayak"
			});
			langs.push(
			{
				"value": "Delaware",
				"label": "Delaware"
			});
			langs.push(
			{
				"value": "Dhivehi",
				"label": "Dhivehi"
			});
			langs.push(
			{
				"value": "Dinka",
				"label": "Dinka"
			});
			langs.push(
			{
				"value": "Dogri",
				"label": "Dogri"
			});
			langs.push(
			{
				"value": "Dogrib",
				"label": "Dogrib"
			});
			langs.push(
			{
				"value": "Dravidian (Other)",
				"label": "Dravidian"
			});
			langs.push(
			{
				"value": "Duala",
				"label": "Duala"
			});
			langs.push(
			{
				"value": "Dutch",
				"label": "Dutch"
			});
			langs.push(
			{
				"value": "Dyula",
				"label": "Dyula"
			});
			langs.push(
			{
				"value": "Dzongkha",
				"label": "Dzongkha"
			});
			langs.push(
			{
				"value": "Eastern Frisian",
				"label": "Eastern Frisian"
			});
			langs.push(
			{
				"value": "Efik",
				"label": "Efik"
			});
			langs.push(
			{
				"value": "Egyptian (Ancient)",
				"label": "Egyptian (Ancient)"
			});
			langs.push(
			{
				"value": "Ekajuk",
				"label": "Ekajuk"
			});
			langs.push(
			{
				"value": "Elamite",
				"label": "Elamite"
			});
			langs.push(
			{
				"value": "Erzya",
				"label": "Erzya"
			});
			langs.push(
			{
				"value": "Esperanto",
				"label": "Esperanto"
			});
			langs.push(
			{
				"value": "Estonian",
				"label": "Estonian"
			});
			langs.push(
			{
				"value": "Ewe",
				"label": "Ewe"
			});
			langs.push(
			{
				"value": "Ewondo",
				"label": "Ewondo"
			});
			langs.push(
			{
				"value": "Fang",
				"label": "Fang"
			});
			langs.push(
			{
				"value": "Fanti",
				"label": "Fanti"
			});
			langs.push(
			{
				"value": "Faroese",
				"label": "Faroese"
			});
			langs.push(
			{
				"value": "Fijian",
				"label": "Fijian"
			});
			langs.push(
			{
				"value": "Filipino; Pilipino",
				"label": "Filipino; Pilipino"
			});
			langs.push(
			{
				"value": "Finnish",
				"label": "Finnish"
			});
			langs.push(
			{
				"value": "Finno-Ugrian (Other)",
				"label": "Finno-Ugrian"
			});
			langs.push(
			{
				"value": "Fon",
				"label": "Fon"
			});
			langs.push(
			{
				"value": "Friulian",
				"label": "Friulian"
			});
			langs.push(
			{
				"value": "Fulah",
				"label": "Fulah"
			});
			langs.push(
			{
				"value": "Ga",
				"label": "Ga"
			});
			langs.push(
			{
				"value": "Gaelic",
				"label": "Gaelic"
			});
			langs.push(
			{
				"value": "Gallegan",
				"label": "Gallegan"
			});
			langs.push(
			{
				"value": "Ganda",
				"label": "Ganda"
			});
			langs.push(
			{
				"value": "Gayo",
				"label": "Gayo"
			});
			langs.push(
			{
				"value": "Gbaya",
				"label": "Gbaya"
			});
			langs.push(
			{
				"value": "Geez",
				"label": "Geez"
			});
			langs.push(
			{
				"value": "Georgian",
				"label": "Georgian"
			});
			langs.push(
			{
				"value": "German",
				"label": "German"
			});
			langs.push(
			{
				"value": "Germanic (Other)",
				"label": "Germanic"
			});
			langs.push(
			{
				"value": "Gikuyu",
				"label": "Gikuyu"
			});
			langs.push(
			{
				"value": "Gilbertese",
				"label": "Gilbertese"
			});
			langs.push(
			{
				"value": "Gondi",
				"label": "Gondi"
			});
			langs.push(
			{
				"value": "Gorontalo",
				"label": "Gorontalo"
			});
			langs.push(
			{
				"value": "Gothic",
				"label": "Gothic"
			});
			langs.push(
			{
				"value": "Grebo",
				"label": "Grebo"
			});
			langs.push(
			{
				"value": "Greek, Modern (1453-)",
				"label": "Greek, Modern (1453-)"
			});
			langs.push(
			{
				"value": "Guarani",
				"label": "Guarani"
			});
			langs.push(
			{
				"value": "Gujarati",
				"label": "Gujarati"
			});
			langs.push(
			{
				"value": "Gwich'in",
				"label": "Gwich'in"
			});
			langs.push(
			{
				"value": "Haida",
				"label": "Haida"
			});
			langs.push(
			{
				"value": "Haitian Creole",
				"label": "Haitian Creole"
			});
			langs.push(
			{
				"value": "Hausa",
				"label": "Hausa"
			});
			langs.push(
			{
				"value": "Hawaiian",
				"label": "Hawaiian"
			});
			langs.push(
			{
				"value": "Hebrew",
				"label": "Hebrew"
			});
			langs.push(
			{
				"value": "Herero",
				"label": "Herero"
			});
			langs.push(
			{
				"value": "Hiligaynon",
				"label": "Hiligaynon"
			});
			langs.push(
			{
				"value": "Himachali",
				"label": "Himachali"
			});
			langs.push(
			{
				"value": "Hindi",
				"label": "Hindi"
			});
			langs.push(
			{
				"value": "Hiri Motu",
				"label": "Hiri Motu"
			});
			langs.push(
			{
				"value": "Hittite",
				"label": "Hittite"
			});
			langs.push(
			{
				"value": "Hmong",
				"label": "Hmong"
			});
			langs.push(
			{
				"value": "Hungarian",
				"label": "Hungarian"
			});
			langs.push(
			{
				"value": "Hupa",
				"label": "Hupa"
			});
			langs.push(
			{
				"value": "Iban",
				"label": "Iban"
			});
			langs.push(
			{
				"value": "Icelandic",
				"label": "Icelandic"
			});
			langs.push(
			{
				"value": "Ido",
				"label": "Ido"
			});
			langs.push(
			{
				"value": "Igbo",
				"label": "Igbo"
			});
			langs.push(
			{
				"value": "Ijo",
				"label": "Ijo"
			});
			langs.push(
			{
				"value": "Iloko",
				"label": "Iloko"
			});
			langs.push(
			{
				"value": "Inari Sami",
				"label": "Inari Sami"
			});
			langs.push(
			{
				"value": "Indic (Other)",
				"label": "Indic"
			});
			langs.push(
			{
				"value": "Indo-European (Other)",
				"label": "Indo-European"
			});
			langs.push(
			{
				"value": "Indonesian",
				"label": "Indonesian"
			});
			langs.push(
			{
				"value": "Ingush",
				"label": "Ingush"
			});
			langs.push(
			{
				"value": "Interlingua (International Auxiliary Lang. Assoc.)",
				"label": "Interlingua (IALA)"
			});
			langs.push(
			{
				"value": "Interlingue",
				"label": "Interlingue"
			});
			langs.push(
			{
				"value": "Inuktitut",
				"label": "Inuktitut"
			});
			langs.push(
			{
				"value": "Inupiaq",
				"label": "Inupiaq"
			});
			langs.push(
			{
				"value": "Iranian (Other)",
				"label": "Iranian"
			});
			langs.push(
			{
				"value": "Irish",
				"label": "Irish"
			});
			langs.push(
			{
				"value": "Iroquoian Languages",
				"label": "Iroquoian Languages"
			});
			langs.push(
			{
				"value": "Italian",
				"label": "Italian"
			});
			langs.push(
			{
				"value": "Japanese",
				"label": "Japanese"
			});
			langs.push(
			{
				"value": "Javanese",
				"label": "Javanese"
			});
			langs.push(
			{
				"value": "Judeo-Arabic",
				"label": "Judeo-Arabic"
			});
			langs.push(
			{
				"value": "Judeo-Persian",
				"label": "Judeo-Persian"
			});
			langs.push(
			{
				"value": "Kabardian",
				"label": "Kabardian"
			});
			langs.push(
			{
				"value": "Kabyle",
				"label": "Kabyle"
			});
			langs.push(
			{
				"value": "Kachin",
				"label": "Kachin"
			});
			langs.push(
			{
				"value": "Kalaallisut",
				"label": "Kalaallisut"
			});
			langs.push(
			{
				"value": "Kalmyk",
				"label": "Kalmyk"
			});
			langs.push(
			{
				"value": "Kamba",
				"label": "Kamba"
			});
			langs.push(
			{
				"value": "Kannada",
				"label": "Kannada"
			});
			langs.push(
			{
				"value": "Kanuri",
				"label": "Kanuri"
			});
			langs.push(
			{
				"value": "Kara-Kalpak",
				"label": "Kara-Kalpak"
			});
			langs.push(
			{
				"value": "Karachay-Balkar",
				"label": "Karachay-Balkar"
			});
			langs.push(
			{
				"value": "Karelian",
				"label": "Karelian"
			});
			langs.push(
			{
				"value": "Karen",
				"label": "Karen"
			});
			langs.push(
			{
				"value": "Kashmiri",
				"label": "Kashmiri"
			});
			langs.push(
			{
				"value": "Kashubian",
				"label": "Kashubian"
			});
			langs.push(
			{
				"value": "Kawi",
				"label": "Kawi"
			});
			langs.push(
			{
				"value": "Kazakh",
				"label": "Kazakh"
			});
			langs.push(
			{
				"value": "Khasi",
				"label": "Khasi"
			});
			langs.push(
			{
				"value": "Khmer",
				"label": "Khmer"
			});
			langs.push(
			{
				"value": "Khoisan (Other)",
				"label": "Khoisan"
			});
			langs.push(
			{
				"value": "Khotanese",
				"label": "Khotanese"
			});
			langs.push(
			{
				"value": "Kimbundu",
				"label": "Kimbundu"
			});
			langs.push(
			{
				"value": "Kinyarwanda",
				"label": "Kinyarwanda"
			});
			langs.push(
			{
				"value": "Kirghiz",
				"label": "Kirghiz"
			});
			langs.push(
			{
				"value": "Klingon",
				"label": "Klingon"
			});
			langs.push(
			{
				"value": "Komi",
				"label": "Komi"
			});
			langs.push(
			{
				"value": "Kongo",
				"label": "Kongo"
			});
			langs.push(
			{
				"value": "Konkani",
				"label": "Konkani"
			});
			langs.push(
			{
				"value": "Korean",
				"label": "Korean"
			});
			langs.push(
			{
				"value": "Kosraean",
				"label": "Kosraean"
			});
			langs.push(
			{
				"value": "Kpelle",
				"label": "Kpelle"
			});
			langs.push(
			{
				"value": "Kru",
				"label": "Kru"
			});
			langs.push(
			{
				"value": "Kumyk",
				"label": "Kumyk"
			});
			langs.push(
			{
				"value": "Kurdish",
				"label": "Kurdish"
			});
			langs.push(
			{
				"value": "Kurukh",
				"label": "Kurukh"
			});
			langs.push(
			{
				"value": "Kutenai",
				"label": "Kutenai"
			});
			langs.push(
			{
				"value": "Kwanyama",
				"label": "Kwanyama"
			});
			langs.push(
			{
				"value": "Ladino",
				"label": "Ladino"
			});
			langs.push(
			{
				"value": "Lahnda",
				"label": "Lahnda"
			});
			langs.push(
			{
				"value": "Lamba",
				"label": "Lamba"
			});
			langs.push(
			{
				"value": "Lao",
				"label": "Lao"
			});
			langs.push(
			{
				"value": "Latin",
				"label": "Latin"
			});
			langs.push(
			{
				"value": "Latvian",
				"label": "Latvian"
			});
			langs.push(
			{
				"value": "Lezghian",
				"label": "Lezghian"
			});
			langs.push(
			{
				"value": "Limburgish",
				"label": "Limburgish"
			});
			langs.push(
			{
				"value": "Lingala",
				"label": "Lingala"
			});
			langs.push(
			{
				"value": "Lithuanian",
				"label": "Lithuanian"
			});
			langs.push(
			{
				"value": "Lojban",
				"label": "Lojban"
			});
			langs.push(
			{
				"value": "Low German",
				"label": "Low German"
			});
			langs.push(
			{
				"value": "Lower Sorbian",
				"label": "Lower Sorbian"
			});
			langs.push(
			{
				"value": "Lozi",
				"label": "Lozi"
			});
			langs.push(
			{
				"value": "Luba-Katanga",
				"label": "Luba-Katanga"
			});
			langs.push(
			{
				"value": "Luba-Lulua",
				"label": "Luba-Lulua"
			});
			langs.push(
			{
				"value": "Luiseno",
				"label": "Luiseno"
			});
			langs.push(
			{
				"value": "Lule Sami",
				"label": "Lule Sami"
			});
			langs.push(
			{
				"value": "Lunda",
				"label": "Lunda"
			});
			langs.push(
			{
				"value": "Luo (Kenya And Tanzania)",
				"label": "Luo (Kenya & Tanzania)"
			});
			langs.push(
			{
				"value": "Lushai",
				"label": "Lushai"
			});
			langs.push(
			{
				"value": "Luxembourgish",
				"label": "Luxembourgish"
			});
			langs.push(
			{
				"value": "Macedonian",
				"label": "Macedonian"
			});
			langs.push(
			{
				"value": "Madurese",
				"label": "Madurese"
			});
			langs.push(
			{
				"value": "Magahi",
				"label": "Magahi"
			});
			langs.push(
			{
				"value": "Maithili",
				"label": "Maithili"
			});
			langs.push(
			{
				"value": "Makasar",
				"label": "Makasar"
			});
			langs.push(
			{
				"value": "Malagasy",
				"label": "Malagasy"
			});
			langs.push(
			{
				"value": "Malay",
				"label": "Malay"
			});
			langs.push(
			{
				"value": "Malayalam",
				"label": "Malayalam"
			});
			langs.push(
			{
				"value": "Maltese",
				"label": "Maltese"
			});
			langs.push(
			{
				"value": "Manchu",
				"label": "Manchu"
			});
			langs.push(
			{
				"value": "Mandar",
				"label": "Mandar"
			});
			langs.push(
			{
				"value": "Mandarin",
				"label": "Mandarin"
			});
			langs.push(
			{
				"value": "Mandingo",
				"label": "Mandingo"
			});
			langs.push(
			{
				"value": "Manipuri",
				"label": "Manipuri"
			});
			langs.push(
			{
				"value": "Manobo Languages",
				"label": "Manobo Languages"
			});
			langs.push(
			{
				"value": "Manx",
				"label": "Manx"
			});
			langs.push(
			{
				"value": "Maori",
				"label": "Maori"
			});
			langs.push(
			{
				"value": "Marathi",
				"label": "Marathi"
			});
			langs.push(
			{
				"value": "Mari",
				"label": "Mari"
			});
			langs.push(
			{
				"value": "Marshall",
				"label": "Marshall"
			});
			langs.push(
			{
				"value": "Marwari",
				"label": "Marwari"
			});
			langs.push(
			{
				"value": "Masai",
				"label": "Masai"
			});
			langs.push(
			{
				"value": "Mayan Languages",
				"label": "Mayan Languages"
			});
			langs.push(
			{
				"value": "Mende",
				"label": "Mende"
			});
			langs.push(
			{
				"value": "Micmac",
				"label": "Micmac"
			});
			langs.push(
			{
				"value": "Minangkabau",
				"label": "Minangkabau"
			});
			langs.push(
			{
				"value": "Mirandese",
				"label": "Mirandese"
			});
			langs.push(
			{
				"value": "Miscellaneous Languages",
				"label": "Miscellaneous Languages"
			});
			langs.push(
			{
				"value": "Mohawk",
				"label": "Mohawk"
			});
			langs.push(
			{
				"value": "Moksha",
				"label": "Moksha"
			});
			langs.push(
			{
				"value": "Moldavian",
				"label": "Moldavian"
			});
			langs.push(
			{
				"value": "Mon-Khmer (Other)",
				"label": "Mon-Khmer"
			});
			langs.push(
			{
				"value": "Mongo",
				"label": "Mongo"
			});
			langs.push(
			{
				"value": "Mongolian",
				"label": "Mongolian"
			});
			langs.push(
			{
				"value": "Mossi",
				"label": "Mossi"
			});
			langs.push(
			{
				"value": "Multiple Languages",
				"label": "Multiple Languages"
			});
			langs.push(
			{
				"value": "Munda Languages",
				"label": "Munda Languages"
			});
			langs.push(
			{
				"value": "N'Ko",
				"label": "N'Ko"
			});
			langs.push(
			{
				"value": "Nahuatl",
				"label": "Nahuatl"
			});
			langs.push(
			{
				"value": "Nauru",
				"label": "Nauru"
			});
			langs.push(
			{
				"value": "Navajo",
				"label": "Navajo"
			});
			langs.push(
			{
				"value": "Ndonga",
				"label": "Ndonga"
			});
			langs.push(
			{
				"value": "Neapolitan",
				"label": "Neapolitan"
			});
			langs.push(
			{
				"value": "Nepal Bhasa",
				"label": "Nepal Bhasa"
			});
			langs.push(
			{
				"value": "Nepali",
				"label": "Nepali"
			});
			langs.push(
			{
				"value": "Nias",
				"label": "Nias"
			});
			langs.push(
			{
				"value": "Niger-Kordofanian (Other)",
				"label": "Niger-Kordofanian"
			});
			langs.push(
			{
				"value": "Nilo-Saharan (Other)",
				"label": "Nilo-Saharan"
			});
			langs.push(
			{
				"value": "Niuean",
				"label": "Niuean"
			});
			langs.push(
			{
				"value": "Nogai",
				"label": "Nogai"
			});
			langs.push(
			{
				"value": "Norse, Old",
				"label": "Norse, Old"
			});
			langs.push(
			{
				"value": "North American Indian (Other)",
				"label": "North American Indian"
			});
			langs.push(
			{
				"value": "North Ndebele",
				"label": "North Ndebele"
			});
			langs.push(
			{
				"value": "Northern Frisian",
				"label": "Northern Frisian"
			});
			langs.push(
			{
				"value": "Northern Sami",
				"label": "Northern Sami"
			});
			langs.push(
			{
				"value": "Northern Sotho",
				"label": "Northern Sotho"
			});
			langs.push(
			{
				"value": "Norwegian",
				"label": "Norwegian"
			});
			langs.push(
			{
				"value": "Norwegian Nynorsk",
				"label": "Norwegian Nynorsk"
			});
			langs.push(
			{
				"value": "Nubian Languages",
				"label": "Nubian Languages"
			});
			langs.push(
			{
				"value": "Nyamwezi",
				"label": "Nyamwezi"
			});
			langs.push(
			{
				"value": "Nyankole",
				"label": "Nyankole"
			});
			langs.push(
			{
				"value": "Nyoro",
				"label": "Nyoro"
			});
			langs.push(
			{
				"value": "Nzima",
				"label": "Nzima"
			});
			langs.push(
			{
				"value": "Occitan (Post 1500)",
				"label": "Occitan (Post 1500)"
			});
			langs.push(
			{
				"value": "Ojibwa",
				"label": "Ojibwa"
			});
			langs.push(
			{
				"value": "Old Church Slavonic",
				"label": "Old Church Slavonic"
			});
			langs.push(
			{
				"value": "Oriya",
				"label": "Oriya"
			});
			langs.push(
			{
				"value": "Oromo",
				"label": "Oromo"
			});
			langs.push(
			{
				"value": "Osage",
				"label": "Osage"
			});
			langs.push(
			{
				"value": "Ossetic",
				"label": "Ossetic"
			});
			langs.push(
			{
				"value": "Otomian Languages",
				"label": "Otomian Languages"
			});
			langs.push(
			{
				"value": "Pahlavi",
				"label": "Pahlavi"
			});
			langs.push(
			{
				"value": "Palauan",
				"label": "Palauan"
			});
			langs.push(
			{
				"value": "Pali",
				"label": "Pali"
			});
			langs.push(
			{
				"value": "Pampanga",
				"label": "Pampanga"
			});
			langs.push(
			{
				"value": "Pangasinan",
				"label": "Pangasinan"
			});
			langs.push(
			{
				"value": "Papiamento",
				"label": "Papiamento"
			});
			langs.push(
			{
				"value": "Papuan (Other)",
				"label": "Papuan"
			});
			langs.push(
			{
				"value": "Persian",
				"label": "Persian"
			});
			langs.push(
			{
				"value": "Philippine (Other)",
				"label": "Philippine"
			});
			langs.push(
			{
				"value": "Phoenician",
				"label": "Phoenician"
			});
			langs.push(
			{
				"value": "Pohnpeian",
				"label": "Pohnpeian"
			});
			langs.push(
			{
				"value": "Polish",
				"label": "Polish"
			});
			langs.push(
			{
				"value": "Portuguese",
				"label": "Portuguese"
			});
			langs.push(
			{
				"value": "Prakrit Languages",
				"label": "Prakrit Languages"
			});
			langs.push(
			{
				"value": "Punjabi",
				"label": "Punjabi"
			});
			langs.push(
			{
				"value": "Pushto",
				"label": "Pushto"
			});
			langs.push(
			{
				"value": "Quechua",
				"label": "Quechua"
			});
			langs.push(
			{
				"value": "Raeto-Romance",
				"label": "Raeto-Romance"
			});
			langs.push(
			{
				"value": "Rajasthani",
				"label": "Rajasthani"
			});
			langs.push(
			{
				"value": "Rapanui",
				"label": "Rapanui"
			});
			langs.push(
			{
				"value": "Rarotongan",
				"label": "Rarotongan"
			});
			langs.push(
			{
				"value": "Romance (Other)",
				"label": "Romance"
			});
			langs.push(
			{
				"value": "Romanian",
				"label": "Romanian"
			});
			langs.push(
			{
				"value": "Romany",
				"label": "Romany"
			});
			langs.push(
			{
				"value": "Rundi",
				"label": "Rundi"
			});
			langs.push(
			{
				"value": "Russian",
				"label": "Russian"
			});
			langs.push(
			{
				"value": "Salishan Languages",
				"label": "Salishan Languages"
			});
			langs.push(
			{
				"value": "Samaritan Aramaic",
				"label": "Samaritan Aramaic"
			});
			langs.push(
			{
				"value": "Sami Languages",
				"label": "Sami Languages"
			});
			langs.push(
			{
				"value": "Samoan",
				"label": "Samoan"
			});
			langs.push(
			{
				"value": "Sandawe",
				"label": "Sandawe"
			});
			langs.push(
			{
				"value": "Sango",
				"label": "Sango"
			});
			langs.push(
			{
				"value": "Sanskrit",
				"label": "Sanskrit"
			});
			langs.push(
			{
				"value": "Santali",
				"label": "Santali"
			});
			langs.push(
			{
				"value": "Sardinian",
				"label": "Sardinian"
			});
			langs.push(
			{
				"value": "Sasak",
				"label": "Sasak"
			});
			langs.push(
			{
				"value": "Scots",
				"label": "Scots"
			});
			langs.push(
			{
				"value": "Selkup",
				"label": "Selkup"
			});
			langs.push(
			{
				"value": "Semitic (Other)",
				"label": "Semitic"
			});
			langs.push(
			{
				"value": "Serbian",
				"label": "Serbian"
			});
			langs.push(
			{
				"value": "Serer",
				"label": "Serer"
			});
			langs.push(
			{
				"value": "Shan",
				"label": "Shan"
			});
			langs.push(
			{
				"value": "Shona",
				"label": "Shona"
			});
			langs.push(
			{
				"value": "Sichuan Yi",
				"label": "Sichuan Yi"
			});
			langs.push(
			{
				"value": "Sicilian",
				"label": "Sicilian"
			});
			langs.push(
			{
				"value": "Sidamo",
				"label": "Sidamo"
			});
			langs.push(
			{
				"value": "Sign Languages",
				"label": "Sign Languages"
			});
			langs.push(
			{
				"value": "Siksika",
				"label": "Siksika"
			});
			langs.push(
			{
				"value": "Sindhi",
				"label": "Sindhi"
			});
			langs.push(
			{
				"value": "Sinhalese",
				"label": "Sinhalese"
			});
			langs.push(
			{
				"value": "Sino-Tibetan (Other)",
				"label": "Sino-Tibetan"
			});
			langs.push(
			{
				"value": "Siouan Languages",
				"label": "Siouan Languages"
			});
			langs.push(
			{
				"value": "Skolt Sami",
				"label": "Skolt Sami"
			});
			langs.push(
			{
				"value": "Slave (Athapascan)",
				"label": "Slave (Athapascan)"
			});
			langs.push(
			{
				"value": "Slavic (Other)",
				"label": "Slavic"
			});
			langs.push(
			{
				"value": "Slovak",
				"label": "Slovak"
			});
			langs.push(
			{
				"value": "Slovenian",
				"label": "Slovenian"
			});
			langs.push(
			{
				"value": "Sogdian",
				"label": "Sogdian"
			});
			langs.push(
			{
				"value": "Somali",
				"label": "Somali"
			});
			langs.push(
			{
				"value": "Songhai",
				"label": "Songhai"
			});
			langs.push(
			{
				"value": "Soninke",
				"label": "Soninke"
			});
			langs.push(
			{
				"value": "Sorbian Languages",
				"label": "Sorbian Languages"
			});
			langs.push(
			{
				"value": "Sotho, Southern",
				"label": "Sotho, Southern"
			});
			langs.push(
			{
				"value": "South American Indian (Other)",
				"label": "South American Indian"
			});
			langs.push(
			{
				"value": "South Ndebele",
				"label": "South Ndebele"
			});
			langs.push(
			{
				"value": "Southern Altai",
				"label": "Southern Altai"
			});
			langs.push(
			{
				"value": "Southern Sami",
				"label": "Southern Sami"
			});
			langs.push(
			{
				"value": "Spanish; Castilian",
				"label": "Spanish; Castilian"
			});
			langs.push(
			{
				"value": "Sranan Togo",
				"label": "Sranan Togo"
			});
			langs.push(
			{
				"value": "Sukuma",
				"label": "Sukuma"
			});
			langs.push(
			{
				"value": "Sumerian",
				"label": "Sumerian"
			});
			langs.push(
			{
				"value": "Sundanese",
				"label": "Sundanese"
			});
			langs.push(
			{
				"value": "Susu",
				"label": "Susu"
			});
			langs.push(
			{
				"value": "Swahili",
				"label": "Swahili"
			});
			langs.push(
			{
				"value": "Swati",
				"label": "Swati"
			});
			langs.push(
			{
				"value": "Swedish",
				"label": "Swedish"
			});
			langs.push(
			{
				"value": "Swiss German",
				"label": "Swiss German"
			});
			langs.push(
			{
				"value": "Syriac",
				"label": "Syriac"
			});
			langs.push(
			{
				"value": "Tagalog",
				"label": "Tagalog"
			});
			langs.push(
			{
				"value": "Tahitian",
				"label": "Tahitian"
			});
			langs.push(
			{
				"value": "Tai (Other)",
				"label": "Tai"
			});
			langs.push(
			{
				"value": "Tajik",
				"label": "Tajik"
			});
			langs.push(
			{
				"value": "Tamashek",
				"label": "Tamashek"
			});
			langs.push(
			{
				"value": "Tamil",
				"label": "Tamil"
			});
			langs.push(
			{
				"value": "Tatar",
				"label": "Tatar"
			});
			langs.push(
			{
				"value": "Telugu",
				"label": "Telugu"
			});
			langs.push(
			{
				"value": "Tereno",
				"label": "Tereno"
			});
			langs.push(
			{
				"value": "Tetum",
				"label": "Tetum"
			});
			langs.push(
			{
				"value": "Thai",
				"label": "Thai"
			});
			langs.push(
			{
				"value": "Tibetan",
				"label": "Tibetan"
			});
			langs.push(
			{
				"value": "Tigre",
				"label": "Tigre"
			});
			langs.push(
			{
				"value": "Tigrinya",
				"label": "Tigrinya"
			});
			langs.push(
			{
				"value": "Timne",
				"label": "Timne"
			});
			langs.push(
			{
				"value": "Tiv",
				"label": "Tiv"
			});
			langs.push(
			{
				"value": "Tlingit",
				"label": "Tlingit"
			});
			langs.push(
			{
				"value": "Tok Pisin",
				"label": "Tok Pisin"
			});
			langs.push(
			{
				"value": "Tokelau",
				"label": "Tokelau"
			});
			langs.push(
			{
				"value": "Tonga (Nyasa)",
				"label": "Tonga (Nyasa)"
			});
			langs.push(
			{
				"value": "Tonga (Tonga Islands)",
				"label": "Tonga (Tonga Islands)"
			});
			langs.push(
			{
				"value": "Tsimshian",
				"label": "Tsimshian"
			});
			langs.push(
			{
				"value": "Tsonga",
				"label": "Tsonga"
			});
			langs.push(
			{
				"value": "Tswana",
				"label": "Tswana"
			});
			langs.push(
			{
				"value": "Tumbuka",
				"label": "Tumbuka"
			});
			langs.push(
			{
				"value": "Tupi Languages",
				"label": "Tupi Languages"
			});
			langs.push(
			{
				"value": "Turkish",
				"label": "Turkish"
			});
			langs.push(
			{
				"value": "Turkmen",
				"label": "Turkmen"
			});
			langs.push(
			{
				"value": "Tuvalu",
				"label": "Tuvalu"
			});
			langs.push(
			{
				"value": "Tuvinian",
				"label": "Tuvinian"
			});
			langs.push(
			{
				"value": "Twi",
				"label": "Twi"
			});
			langs.push(
			{
				"value": "Udmurt",
				"label": "Udmurt"
			});
			langs.push(
			{
				"value": "Ugaritic",
				"label": "Ugaritic"
			});
			langs.push(
			{
				"value": "Ukrainian",
				"label": "Ukrainian"
			});
			langs.push(
			{
				"value": "Umbundu",
				"label": "Umbundu"
			});
			langs.push(
			{
				"value": "Undetermined",
				"label": "Undetermined"
			});
			langs.push(
			{
				"value": "Upper Sorbian",
				"label": "Upper Sorbian"
			});
			langs.push(
			{
				"value": "Urdu",
				"label": "Urdu"
			});
			langs.push(
			{
				"value": "Uyghur",
				"label": "Uyghur"
			});
			langs.push(
			{
				"value": "Uzbek",
				"label": "Uzbek"
			});
			langs.push(
			{
				"value": "Vai",
				"label": "Vai"
			});
			langs.push(
			{
				"value": "Venda",
				"label": "Venda"
			});
			langs.push(
			{
				"value": "Vietnamese",
				"label": "Vietnamese"
			});
			langs.push(
			{
				"value": "Volapuk",
				"label": "Volapuk"
			});
			langs.push(
			{
				"value": "Votic",
				"label": "Votic"
			});
			langs.push(
			{
				"value": "Wakashan Languages",
				"label": "Wakashan Languages"
			});
			langs.push(
			{
				"value": "Walamo",
				"label": "Walamo"
			});
			langs.push(
			{
				"value": "Walloon",
				"label": "Walloon"
			});
			langs.push(
			{
				"value": "Waray",
				"label": "Waray"
			});
			langs.push(
			{
				"value": "Washo",
				"label": "Washo"
			});
			langs.push(
			{
				"value": "Welsh",
				"label": "Welsh"
			});
			langs.push(
			{
				"value": "Western Frisian",
				"label": "Western Frisian"
			});
			langs.push(
			{
				"value": "Wolof",
				"label": "Wolof"
			});
			langs.push(
			{
				"value": "Xhosa",
				"label": "Xhosa"
			});
			langs.push(
			{
				"value": "Yakut",
				"label": "Yakut"
			});
			langs.push(
			{
				"value": "Yao",
				"label": "Yao"
			});
			langs.push(
			{
				"value": "Yapese",
				"label": "Yapese"
			});
			langs.push(
			{
				"value": "Yiddish",
				"label": "Yiddish"
			});
			langs.push(
			{
				"value": "Yoruba",
				"label": "Yoruba"
			});
			langs.push(
			{
				"value": "Yupik Languages",
				"label": "Yupik Languages"
			});
			langs.push(
			{
				"value": "Zande",
				"label": "Zande"
			});
			langs.push(
			{
				"value": "Zapotec",
				"label": "Zapotec"
			});
			langs.push(
			{
				"value": "Zazaki",
				"label": "Zazaki"
			});
			langs.push(
			{
				"value": "Zenaga",
				"label": "Zenaga"
			});
			langs.push(
			{
				"value": "Zhuang",
				"label": "Zhuang"
			});
			langs.push(
			{
				"value": "Zulu",
				"label": "Zulu"
			});
			langs.push(
			{
				"value": "Zuni",
				"label": "Zuni"
			});
			return langs;
		};

		service.getRosterTerminationReasons = function getRosterTerminationReasons()
		{
			var reasons = [];
			reasons.push(
			{
				"value": "39",
				"label": "Assigned member status ended; roster transferred per physician request"
			});
			reasons.push(
			{
				"value": "59",
				"label": "Enrolment ended; patient out of geographic area"
			});
			reasons.push(
			{
				"value": "57",
				"label": "Enrolment terminated by patient"
			});
			reasons.push(
			{
				"value": "12",
				"label": "Health Number error"
			});
			reasons.push(
			{
				"value": "38",
				"label": "Long Term Care enrolment ended; patient has left Long Term Care"
			});
			reasons.push(
			{
				"value": "82",
				"label": "Ministry has not received enrolment/ Consent form"
			});
			reasons.push(
			{
				"value": "60",
				"label": "No current eligibility"
			});
			reasons.push(
			{
				"value": "73",
				"label": "No current eligibility"
			});
			reasons.push(
			{
				"value": "74",
				"label": "No current eligibility"
			});
			reasons.push(
			{
				"value": "37",
				"label": "Original enrolment ended; patient now enrolled as Long Term Care"
			});
			reasons.push(
			{
				"value": "36",
				"label": "Original enrolment ended; patient now re-enroled"
			});
			reasons.push(
			{
				"value": "24",
				"label": "Patient added to roster in error"
			});
			reasons.push(
			{
				"value": "14",
				"label": "Patient identified as deceased on ministry database"
			});
			reasons.push(
			{
				"value": "51",
				"label": "Patient no longer meets selection criteria for your roster"
			});
			reasons.push(
			{
				"value": "41",
				"label": "Patient no longer meets selection criteria for your roster - assigned to another physician"
			});
			reasons.push(
			{
				"value": "61",
				"label": "Patient out of geographic area; address over-ride applied"
			});
			reasons.push(
			{
				"value": "62",
				"label": "Patient out of geographic area; address over-ride removed"
			});
			reasons.push(
			{
				"value": "35",
				"label": "Patient transferred from roster per physician request"
			});
			reasons.push(
			{
				"value": "42",
				"label": "Physician ended enrolment; patient entered Long Term Care facility"
			});
			reasons.push(
			{
				"value": "54",
				"label": "Physician ended enrolment; patient left province"
			});
			reasons.push(
			{
				"value": "53",
				"label": "Physician ended enrolment; patient moved out of geographic area"
			});
			reasons.push(
			{
				"value": "56",
				"label": "Physician ended enrolment; per patient request"
			});
			reasons.push(
			{
				"value": "44",
				"label": "Physician ended patient enrolment"
			});
			reasons.push(
			{
				"value": "40",
				"label": "Physician reported member as deceased"
			});
			reasons.push(
			{
				"value": "32",
				"label": "Pre-member/ Assigned member ended; now enrolled or registered with photo health card"
			});
			reasons.push(
			{
				"value": "30",
				"label": "Pre-member/ Assigned member ended; now enrolled or registered with red and white health card"
			});
			reasons.push(
			{
				"value": "33",
				"label": "Termination reason cannot be released (due to patient confidentiality)"
			});
			reasons.push(
			{
				"value": "84",
				"label": "Termination reason cannot be released (due to patient confidentiality)"
			});
			reasons.push(
			{
				"value": "90",
				"label": "Termination reason cannot be released (due to patient confidentiality)"
			});
			reasons.push(
			{
				"value": "91",
				"label": "Termination reason cannot be released (due to patient confidentiality)"
			});
			return reasons;
		};

		service.getSecurityQuestions = function getSecurityQuestions()
		{
			var questions = [];
			questions.push(
			{
				"value": "What was the name of your high school?",
				"label": "What was the name of your high school?"
			});
			questions.push(
			{
				"value": "What is your spouse's maiden name?",
				"label": "What is your spouse's maiden name?"
			});
			questions.push(
			{
				"value": "What is the name of the street you grew up on?",
				"label": "What is the name of the street you grew up on?"
			});
			questions.push(
			{
				"value": "In what city were you born?",
				"label": "In what city were you born?"
			});
			questions.push(
			{
				"value": "What is the middle name of your oldest child?",
				"label": "What is the middle name of your oldest child?"
			});
			questions.push(
			{
				"value": "What is your oldest cousin's first name?",
				"label": "What is your oldest cousin's first name?"
			});
			questions.push(
			{
				"value": "What is your mother's middle name?",
				"label": "What is your mother's middle name?"
			});
			questions.push(
			{
				"value": "What is your grandmother's first name?",
				"label": "What is your grandmother's first name?"
			});
			questions.push(
			{
				"value": "What year did you graduate from high school?",
				"label": "What year did you graduate from high school?"
			});
			return questions;
		};

		service.getConsultUrgencies = function getConsultUrgencies()
		{
			var urgencies = [];
			urgencies.push(
			{
				value: "2",
				name: "Non-Urgent"
			});
			urgencies.push(
			{
				value: "1",
				name: "Urgent"
			});
			urgencies.push(
			{
				value: "3",
				name: "Return"
			});
			return urgencies;
		};

		service.getConsultRequestStatuses = function getConsultRequestStatuses()
		{
			var statuses = [];
			statuses.push(
			{
				value: "1",
				name: "Not Complete"
			});
			statuses.push(
			{
				value: "2",
				name: "Preliminary Pending Specialist"
			});
			statuses.push(
			{
				value: "3",
				name: "Pending Callback"
			});
			statuses.push(
			{
				value: "4",
				name: "Completed"
			});
			statuses.push(
			{
				value: "5",
				name: "Cancelled"
			});
			statuses.push(
			{
				value: "6",
				name: "Appointment Booked"
			});
			statuses.push(
			{
				value: "7",
				name: "Deleted"
			});
			return statuses;
		};

		service.getConsultResponseStatuses = function getConsultResponseStatuses()
		{
			var statuses = [];
			statuses.push(
			{
				value: 1,
				name: "Not Complete"
			});
			statuses.push(
			{
				value: 2,
				name: "Pending Referring Doctor Callback"
			});
			statuses.push(
			{
				value: 3,
				name: "Pending Patient Callback"
			});
			statuses.push(
			{
				value: 4,
				name: "Completed"
			});
			statuses.push(
			{
				value: 5,
				name: "Cancelled"
			});
			return statuses;
		};

		service.getHours = function getHours()
		{
			return ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12",
				"13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23"
			];
		};

		service.getMinutes = function getMinutes()
		{
			return ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10",
				"11", "12", "13", "14", "15", "16", "17", "18", "19", "20",
				"21", "22", "23", "24", "25", "26", "27", "28", "29", "30",
				"31", "32", "33", "34", "35", "36", "37", "38", "39", "40",
				"41", "42", "43", "44", "45", "46", "47", "48", "49", "50",
				"51", "52", "53", "54", "55", "56", "57", "58", "59"
			];
		};

		service.getRxInteractionLevels = function getRxInteractionLevels()
		{
			var levels = [];
			levels.push(
			{
				value: 0,
				name: "Not Specified"
			});
			levels.push(
			{
				value: 1,
				name: "Low"
			});
			levels.push(
			{
				value: 2,
				name: "Medium"
			});
			levels.push(
			{
				value: 3,
				name: "High"
			});
			levels.push(
			{
				value: 4,
				name: "None"
			});
			return levels;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/summaryService.js":
/*!***********************************************!*\
  !*** ./src/common/services/summaryService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("summaryService", [
	'$http', '$q',
	function($http, $q)
	{
		var service = {};

		service.apiPath = '../ws/rs/recordUX';

		service.getSummaryHeaders = function(demographicNo, key)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/summary/' + key).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("summaryService::getSummaryHeaders error", errors);
					deferred.reject("An error occurred while fetching summary headers");
				});

			return deferred.promise;
		};

		service.getFullSummary = function(demographicNo, summaryCode)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/fullSummary/' + summaryCode).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("summaryService::getFullSummary error", errors);
					deferred.reject("An error occurred while fetching full summary");
				});

			return deferred.promise;
		};

		service.getFamilyHistory = function(demographicNo)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/getFamilyHistory').then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("summaryService::getFamilyHistory error", errors);
					deferred.reject("An error occurred while fetching family history");
				});

			return deferred.promise;
		};

		service.getMedicalHistory = function(demographicNo)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/getMedicalHistory').then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("summaryService::getMedicalHistory error", errors);
					deferred.reject("An error occurred while fetching medical history");
				});

			return deferred.promise;
		};

		service.getSocialHistory = function getSocialHistory(demographicNo)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/getSocialHistory').then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("summaryService::getSocialHistory error", errors);
					deferred.reject("An error occurred while fetching social history");
				});

			return deferred.promise;
		};

		service.getOngoingConcerns = function(demographicNo)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/getOngoingConcerns').then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("summaryService::getOngoingConcerns error", errors);
					deferred.reject("An error occurred while fetching ongoing concerns");
				});

			return deferred.promise;
		};

		service.getOtherMeds = function getOtherMeds(demographicNo)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/getOtherMeds').then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("summaryService::getOtherMeds error", errors);
					deferred.reject("An error occurred while fetching other meds");
				});

			return deferred.promise;
		};

		service.getReminders = function getReminders(demographicNo)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/getReminders').then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("summaryService::getReminders error", errors);
					deferred.reject("An error occurred while fetching reminders");
				});

			return deferred.promise;
		};

		service.getRiskFactors = function getRiskFactors(demographicNo)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/getRiskFactors').then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("summaryService::getRiskFactors error", errors);
					deferred.reject("An error occurred while fetching risk factors");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/systemPreferenceService.js":
/*!********************************************************!*\
  !*** ./src/common/services/systemPreferenceService.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

    Copyright (c) 2012-2018. CloudPractice Inc. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for
    CloudPractice Inc.
    Victoria, British Columbia
    Canada

 */

angular.module("Common.Services").service("systemPreferenceService", [
	'$q',
	'junoHttp',
	function($q, junoHttp)
	{
		var service = {};

		service.apiPath = '../ws/rs/systemPreference';

		service.getPreference = function getPreference(key, defaultValue)
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				default: defaultValue
			};

			junoHttp.get(service.apiPath + '/' + key, config).then(
				function success(response) {
					deferred.resolve(response.data);
				},
				function error(error) {
					console.log("systemPreferenceService::getPreference error", error);
					deferred.reject("An error occurred while getting system preference data");
				});
			return deferred.promise;
		};

		service.setPreference = function setPreference(key, value)
		{
			var deferred = $q.defer();

			junoHttp.put(service.apiPath + '/' + key, value).then(
				function success(response) {
					deferred.resolve(response.data);
				},
				function error(error) {
					console.log("systemPreferenceService::setPreference error", error);
					deferred.reject("An error occurred while setting system preference data");
				});
			return deferred.promise;
		};

		service.isPreferenceEnabled = function isPreferenceEnabled(key, defaultValue)
		{
			var deferred = $q.defer();
			var config = Juno.Common.ServiceHelper.configHeaders();
			config.params = {
				default: defaultValue
			};

			junoHttp.get(service.apiPath + '/' + key + '/enabled', config).then(
				function success(response) {
					deferred.resolve(response.data);
				},
				function error(error) {
					console.log("systemPreferenceService::isPreferenceEnabled error", error);
					deferred.reject("An error occurred while getting system preference enabled status");
				});
			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/ticklerService.js":
/*!***********************************************!*\
  !*** ./src/common/services/ticklerService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("ticklerService", [
	'$http', '$q',
	function($http, $q)
	{
		var service = {};

		service.apiPath = '../ws/rs/tickler';

		service.setCompleted = function setCompleted(ticklerIds)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/complete',
				method: "POST",
				data: JSON.stringify(
				{
					"ticklers": ticklerIds
				}),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("ticklerService::setCompleted error", errors);
					deferred.reject("An error occurred while setting ticklers to completed status");
				});

			return deferred.promise;
		};

		service.setDeleted = function setDeleted(ticklerIds)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/delete',
				method: "POST",
				data: JSON.stringify(
				{
					"ticklers": ticklerIds
				}),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("ticklerService::setDeleted error", errors);
					deferred.reject("An error occurred while setting ticklers to deleted status");
				});

			return deferred.promise;
		};

		service.search = function search(filter, startIndex, limit)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/search?startIndex=' +
					encodeURIComponent(startIndex) +
					'&limit=' +
					encodeURIComponent(limit),
				method: "POST",
				data: JSON.stringify(filter),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("ticklerService::search error", errors);
					deferred.reject("An error occurred while searching ticklers");
				});

			return deferred.promise;
		};

		service.update = function update(tickler)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/update',
				method: "POST",
				data: JSON.stringify(tickler),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("ticklerService::update error", errors);
					deferred.reject("An error occurred while updating tickler");
				});

			return deferred.promise;
		};

		service.getTextSuggestions = function getTextSuggestions()
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/textSuggestions',
				method: "GET"
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("ticklerService::getTextSuggestions error", errors);
					deferred.reject("An error occurred while getting tickler text suggestions");
				});

			return deferred.promise;
		};

		service.add = function add(tickler)
		{
			var deferred = $q.defer();

			$http(
			{
				url: service.apiPath + '/add',
				method: "POST",
				data: JSON.stringify(tickler),
				headers: Juno.Common.ServiceHelper.configHeaders()
			}).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("ticklerService::add error", errors);
					deferred.reject("An error occurred while saving tickler");
				});

			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/services/uxService.js":
/*!******************************************!*\
  !*** ./src/common/services/uxService.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Services").service("uxService", [
	'$http', '$q',
	function($http, $q)
	{
		var service = {};

		service.apiPath = '../ws/rs/recordUX';

		service.menu = function menu(demographicNo)
		{
			var deferred = $q.defer();

			$http.get(service.apiPath + '/' + encodeURIComponent(demographicNo) +
				'/recordMenu').then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("uxService::menu error", errors);
					deferred.reject("An error occurred while fetching menu");
				});

			return deferred.promise;
		};

		service.searchTemplates = function searchTemplates(search, startIndex, itemsToReturn)
		{
			var deferred = $q.defer();

			$http.post(service.apiPath + '/searchTemplates?startIndex=' +
				encodeURIComponent(startIndex) + "&itemsToReturn=" +
				encodeURIComponent(itemsToReturn), search).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("uxService::searchTemplates error", errors);
					deferred.reject("An error occurred while searching templates");
				});

			return deferred.promise;
		};

		service.getTemplate = function getTemplate(name)
		{
			var deferred = $q.defer();
			$http.post(service.apiPath + '/template', name).then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("uxService::getTemplate error", errors);
					deferred.reject("An error occurred while fetching template");
				});

			return deferred.promise;
		};

		service.getDisplayProperties = function getDisplayProperties()
		{
			var deferred = $q.defer();
			$http.get(service.apiPath + '/properties').then(
				function success(results)
				{
					deferred.resolve(results.data);
				},
				function error(errors)
				{
					console.log("uxService:getDisplayProperties error", errors);
					deferred.reject("An error occurred while fetching display properties.")
				}
			);
			return deferred.promise;
		};

		return service;
	}
]);

/***/ }),

/***/ "./src/common/util/angular-util.js":
/*!*****************************************!*\
  !*** ./src/common/util/angular-util.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module("Common.Util").service("angularUtil", [
	'$window',

	function($window)
	{
		var service = {};

		// Set to true if we are in a mobile view (<768px), false if otherwise
		service.inMobileView = function inMobileView()
		{
			return $window.innerWidth < 768;
		};

		return service;
	}

]);

/***/ }),

/***/ "./src/common/util/junoHttp.js":
/*!*************************************!*\
  !*** ./src/common/util/junoHttp.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Common.Util').service("junoHttp", [
        '$http',
        '$window',
        '$q',

        function (
            $http,
            $window,
            $q
        )
        {
            // This service wraps the methods in $http so that authentication can be added.
            var http_util = {};

            http_util.request =  function request(request_hash)
            {
                var deferred = $q.defer();

                $http(request_hash).then(
                    function success(response)
                    {
                        http_util.success_function(response, request_hash, deferred);
                    }, function error(errors)
                    {
                        http_util.errors_function(errors, request_hash, deferred);
                    }, function notify(progress)
                    {
                        deferred.notify(progress);
                    });

                return deferred.promise;
            };

            http_util.success_function = function success_function(response, request_hash, deferred)
            {
                var request_result = response;
                try {
                    if (request_result.data.status === 'SUCCESS') {
                        var results = {
                            meta: angular.copy(request_result.data.headers),
                            data: angular.copy(request_result.data.body)
                        };
                        deferred.resolve(results);
                    }
                    else if (request_result.data.status === 'ERROR'){
                        var errors = {
                            meta: angular.copy(request_result.data.headers),
                            data: angular.copy(request_result.data.error.message)
                        };
                        deferred.reject(errors);
                    }
                    else {
                        throw "Invalid Response Status";
                    }
                }
                catch(e) {
                    var errors = {
                        meta: {},
                        data: "An Error has occurred. please contact technical support"
                    };
                    deferred.reject(errors);
                }
            };

            http_util.errors_function = function errors_function(errors, request_hash, deferred)
            {
                deferred.reject(errors);
            };

            http_util.call = function call(method, url, data)
            {
                var request_hash = {
                    method: method,
                    url: url,
                    data: data
                };
                return http_util.request(request_hash);
            };

            http_util.get = function get(url, config)
            {
                var request_hash = {
                    method: 'GET',
                    url: url
                };
                Juno.Common.Util.mergeHash(request_hash, config);
                return http_util.request(request_hash);
            };

            http_util.post = function post(url,data)
            {
                var request_hash = {
                    method: 'POST',
                    url: url,
                    data: data
                };
                return http_util.request(request_hash);
            };

            http_util.put = function put(url,data)
            {
                var request_hash = {
                    method: 'PUT',
                    url: url,
                    data: data
                };
                return http_util.request(request_hash);
            };

            // 'delete' is a reserved keyword -- leave me alone
            http_util.del = function del(url,data)
            {
                var request_hash = {
                    method: 'DELETE',
                    url: url,
                    data: data
                };
                return http_util.request(request_hash);
            };

            return http_util;
        }
    ]
);


/***/ }),

/***/ "./src/common/util/module.js":
/*!***********************************!*\
  !*** ./src/common/util/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Common.Util', []);

/***/ }),

/***/ "./src/common/util/searchListHelper.js":
/*!*********************************************!*\
  !*** ./src/common/util/searchListHelper.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

    Copyright (c) 2012-2018. CloudPractice Inc. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for
    CloudPractice Inc.
    Victoria, British Columbia
    Canada

 */

window.Juno = window.Juno || {};
Juno.Common = Juno.Common || {};

Juno.Common.SearchListHelper = function SearchListHelper(defaultParams, searchParams)
{
	var me = this;

	me.searchParams = searchParams || {};
	me.defaults = {
		page: 1,
		perPage: 10,
	};

	me.initSearchParameters = function initSearchParameters()
	{
		var fieldName;

		// Merge default params
		if(Juno.Common.Util.exists(defaultParams))
		{
			for(fieldName in defaultParams)
			{
				if(defaultParams.hasOwnProperty(fieldName))
				{
					me.defaults[fieldName] = defaultParams[fieldName];
				}
			}
		}
	};

	me.getParams = function getParams()
	{
		var outParams = {};
		for(var fieldName in me.searchParams)
		{
			if(me.searchParams.hasOwnProperty(fieldName))
			{
				outParams[fieldName] = me.searchParams[fieldName];
			}
		}
		for(var fieldName in me.defaults)
		{
			if(!outParams.hasOwnProperty(fieldName))
			{
				outParams[fieldName] = me.defaults[fieldName];
			}
		}
		return outParams;
	};

	me.initSearchParameters();
};


/***/ }),

/***/ "./src/common/util/serviceHelper.js":
/*!******************************************!*\
  !*** ./src/common/util/serviceHelper.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


window.Juno = window.Juno || {};
Juno.Common = Juno.Common || {};

Juno.Common.ServiceHelper = {};

Juno.Common.ServiceHelper.configHeaders = function configHeaders() {
	return {
		headers: {
			"Content-Type": "application/json",
			"Accept": "application/json"
		}
	};
};

Juno.Common.ServiceHelper.configHeadersWithCache = function configHeadersWithCache()
{
	return {
		headers: {
			"Content-Type": "application/json",
			"Accept": "application/json"
		},
		cache: true
	};
};


/***/ }),

/***/ "./src/common/util/util.js":
/*!*********************************!*\
  !*** ./src/common/util/util.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(moment, $) {

if (!window.Juno) window.Juno = {};


if (!Juno.Common) Juno.Common = {};

Juno.Common.Util = {};

Juno.Common.Util.settings = {
	datetime_format: "YYYY-MM-DDTHH:mm:ssZ",
	datetime_no_timezone_format: "YYYY-MM-DDTHH:mm:ss",
	time_format: "h:mma",
	date_format: "YYYY-MM-DD",
	dayofweek_format: "dddd"
};

Juno.Common.Util.exists = function exists(object) {
	// not undefined and not null
	return angular.isDefined(object) && object !== null;
};

Juno.Common.Util.isBlank = function isBlank(object) {
	// undefined or null or empty string
	return !Juno.Common.Util.exists(object) || object === "";
};

Juno.Common.Util.toArray = function toArray(obj) { //convert single object to array
	if (obj instanceof Array) return obj;
	else if (obj == null) return [];
	else return [obj];
};

Juno.Common.Util.pad0 = function pad0(n) {
	var s = n.toString();
	if (s.length == 1) s = "0" + s;
	return s;
};

Juno.Common.Util.toTrimmedString = function toTrimmedString(s) {
	if (s == null) s = "";
	if (s instanceof String) s = s.trim();
	return s;
};

Juno.Common.Util.formatDate = function formatDate(d) {
	d = Juno.Common.Util.toTrimmedString(d);
	if (d) {
		if (!(d instanceof Date)) d = new Date(d);
		d = d.getFullYear() + "-" + Juno.Common.Util.pad0(d.getMonth() + 1) + "-" + Juno.Common.Util.pad0(d.getDate());
	}
	return d;
};

Juno.Common.Util.formatTime = function formatTime(d) {
	d = Juno.Common.Util.toTrimmedString(d);
	if (d) {
		if (!(d instanceof Date)) d = new Date(d);
		d = Juno.Common.Util.pad0(d.getHours()) + ":" + Juno.Common.Util.pad0(d.getMinutes());
	}
	return d;
};

Juno.Common.Util.formatMomentDate = function formatMomentDate(d) {
	return d.format(Juno.Common.Util.settings.date_format);
};

Juno.Common.Util.formatMomentTime = function formatMomentTime(d, format) {
	if(!format) {
		format = Juno.Common.Util.settings.time_format;
	}
	return d.format(format);
};

Juno.Common.Util.formatMomentDateTimeNoTimezone = function formatMomentDateTimeNoTimezone(d) {
	return d.format(Juno.Common.Util.settings.datetime_no_timezone_format);
};

Juno.Common.Util.getDateMoment = function getDateMoment(date_string)
{
	return moment.utc(date_string, Juno.Common.Util.settings.date_format, true);
};

Juno.Common.Util.getTimeMoment = function getTimeMoment(time_string)
{
	return moment.utc(time_string, Juno.Common.Util.settings.time_format, true);
};

Juno.Common.Util.getDateMomentFromComponents = function getDateMomentFromComponents(year_string, month_string, day_string)
{
	return moment.utc({year: year_string, month: month_string, day: day_string});
};

Juno.Common.Util.getDateAndTimeMoment = function getCombinedMoment(dateString, timeString)
{
	return moment.utc(dateString + " " + timeString,
		Juno.Common.Util.settings.date_format + " " +
		Juno.Common.Util.settings.time_format, true);
};

Juno.Common.Util.getDatetimeNoTimezoneMoment = function getDatetimeNoTimezoneMoment(datetime_string)
{
	return moment.utc(datetime_string,
		Juno.Common.Util.settings.datetime_no_timezone_format, true);
};

Juno.Common.Util.validateDateString = function validateDateString(
	dateString, displayErrors, field, fieldDisplayName, required)
{
	if(Juno.Common.Util.exists(dateString))
	{
		var moment = Juno.Common.Util.getDateMoment(dateString);
		if(!moment.isValid())
		{
			displayErrors.add_field_error(field, fieldDisplayName + ' is invalid');
		}
	}
	else if(required)
	{
		displayErrors.add_field_error(field, fieldDisplayName + 'is required');
	}
};

Juno.Common.Util.validateTimeString = function validateTimeString(
	timeString, displayErrors, field, fieldDisplayName, required)
{
	if (Juno.Common.Util.exists(timeString))
	{
		var moment = Juno.Common.Util.getTimeMoment(timeString);
		if (!moment.isValid())
		{
			displayErrors.add_field_error(field, fieldDisplayName + 'is invalid');
		}
	}
	else if (required)
	{
		displayErrors.add_field_error(field, fieldDisplayName + 'is required');
	}
};

Juno.Common.Util.addNewLine = function addNewLine(line, mssg) {
	if (line == null || line.trim() == "") return mssg;

	if (mssg == null || mssg.trim() == "") mssg = line.trim();
	else mssg += "\n" + line.trim();

	return mssg;
};

Juno.Common.Util.calcAge = function calcAge(dobYear, dobMonth, dobDay)
 {

	var dateOfBirth = new Date(parseInt(dobYear, 10), parseInt(dobMonth, 10), parseInt(dobDay, 10));
	var currDate = new Date();

	var years = (currDate.getFullYear() - dateOfBirth.getFullYear());

	if (currDate.getMonth() < dateOfBirth.getMonth() ||
		currDate.getMonth() == dateOfBirth.getMonth() && currDate.getDate() < dateOfBirth.getDate())
	{
		years--;
	}
	return years;
};

Juno.Common.Util.isInArray = function isInArray(value, array) 
{
	return array.indexOf(value) > -1;
};

/**
 * recursively merges two js hashes. the baseHash will be modified
 * @param baseHash
 * @param toMerge
 */
Juno.Common.Util.mergeHash = function mergeHash(baseHash, toMerge)
{
	if (toMerge === 'undefined') {
		return false;
	}
	$.extend(true, baseHash, toMerge);
	return true;
};

Juno.Common.Util.noNull = function noNull(val)
{
    if (typeof val === 'string')
    {
        val =  val.trim();
    }
    else if ( val === null)
    {
		val = "";
    }

    return val;
};

Juno.Common.Util.isUndefinedOrNull = function isUndefinedOrNull(val)
{
	return angular.isUndefined(val) || val === null;
};

Juno.Common.Util.isDefinedAndNotNull = function isDefinedAndNotNull(val)
{
	return (angular.isDefined(val) && val !== null);
};

Juno.Common.Util.objectArrayIndexOf = function objectArrayIndexOf(array, searchTerm, property)
{
	for(var i = 0, len = array.length; i < len; i++) {
		if (array[i][property] === searchTerm) return i;
	}
	return -1;
};

Juno.Common.Util.isIntegerString = function isIntegerString(string)
{
	var parsed_string = parseInt(string);

	if (/^-?\d+$/.test(string.toString()))
	{
		return true;
	}

	return false;
};

Juno.Common.Util.escapeHtml = function escapeHtml(str)
{
	var entityMap = {
		"&": "&amp;",
		"<": "&lt;",
		">": "&gt;",
		'"': '&quot;',
		"'": '&#39;',
		"/": '&#x2F;'
	};

	return String(str).replace(/[&<>"'\/]/g, function (s)
	{
		return entityMap[s];
	});
};

Juno.Common.Util.formatName = function formatName(firstName, lastName)
{
	if(!lastName && !firstName)
	{
		return null;
	}
	else if(!firstName)
	{
		return lastName;
	}
	else if(!lastName)
	{
		return firstName;
	}

	return lastName + ', ' + firstName;
};

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js"), __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/consults/common.js":
/*!********************************!*\
  !*** ./src/consults/common.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


window.Juno = window.Juno ||
{};
Juno.Consults = Juno.Consults ||
{};

Juno.Consults.Common = {};

Juno.Consults.Common.sortAttachmentDocs = function sortAttachmentDocs(arrayOfDocs)
{
	arrayOfDocs.sort(function(doc1, doc2)
	{
		if (doc1.documentType < doc2.documentType) return -1;
		else if (doc1.documentType > doc2.documentType) return 1;
		else
		{
			if (doc1.displayName < doc2.displayName) return -1;
			else if (doc1.displayName > doc2.displayName) return 1;
		}
		return 0;
	});
};

/***/ }),

/***/ "./src/consults/consultRequestAttachmentController.js":
/*!************************************************************!*\
  !*** ./src/consults/consultRequestAttachmentController.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {angular.module('Consults').controller('Consults.ConsultRequestAttachmentController', [

	'$uibModalInstance',
	'consultService',
	'consult',

	function(
		$uibModalInstance,
		consultService,
		consult)
	{

		var controller = this;

		controller.atth = {};
		controller.atth.patientName = consult.demographic.lastName + ", " + consult.demographic.firstName;
		controller.atth.attachedDocs = consult.attachments;
		if (controller.atth.attachedDocs[0] != null) controller.atth.selectedAttachedDoc = controller.atth.attachedDocs[0];

		var consultId = 0;

		if (consult.id != null) consultId = consult.id;
		consultService.getRequestAttachments(consultId, consult.demographicId).then(
			function success(results)
			{
				if (consult.availableDocs == null) consult.availableDocs = Juno.Common.Util.toArray(results);
				controller.atth.availableDocs = consult.availableDocs;
				if (controller.atth.availableDocs[0] != null) controller.atth.selectedAvailableDoc = controller.atth.availableDocs[0];
			},
			function error(errors)
			{
				console.log(errors);
			});

		controller.openDoc = function openDoc(doc)
		{
			window.open("../" + doc.url);
		};

		controller.attach = function attach()
		{
			if (controller.atth.selectedAvailableDoc == null) return;

			controller.atth.attachedDocs.push(controller.atth.selectedAvailableDoc);
			controller.atth.selectedAttachedDoc = controller.atth.selectedAvailableDoc;
			controller.atth.selectedAttachedDoc.attached = true;

			//Get index to remove by document id and document type
			var removeIndex = controller.atth.availableDocs.map(function(item)
			{
				return item.documentNo+item.documentType;
			}).indexOf(controller.atth.selectedAvailableDoc.documentNo+controller.atth.selectedAvailableDoc.documentType);
			controller.atth.availableDocs.splice(removeIndex, 1);

			var selectionIndex = $("#selAvailDoc")[0].selectedIndex;
			if (selectionIndex >= controller.atth.availableDocs.length) selectionIndex = controller.atth.availableDocs.length - 1;
			controller.atth.selectedAvailableDoc = controller.atth.availableDocs[selectionIndex];

			consult.attachmentsChanged = true;
		};

		controller.detach = function detach()
		{
			if (controller.atth.selectedAttachedDoc == null) return;

			controller.atth.availableDocs.push(controller.atth.selectedAttachedDoc);
			controller.atth.selectedAvailableDoc = controller.atth.selectedAttachedDoc;
			controller.atth.selectedAvailableDoc.attached = false;

			//Get index to remove by document id and document type
			var removeIndex = controller.atth.attachedDocs.map(function(item)
			{
				return item.documentNo+item.documentType;
			}).indexOf(controller.atth.selectedAttachedDoc.documentNo+controller.atth.selectedAttachedDoc.documentType);
			controller.atth.attachedDocs.splice(removeIndex, 1);

			var selectionIndex = $("#selAttachDoc")[0].selectedIndex;
			if (selectionIndex >= controller.atth.attachedDocs.length) selectionIndex = controller.atth.attachedDocs.length - 1;
			controller.atth.selectedAttachedDoc = controller.atth.attachedDocs[selectionIndex];

			consult.attachmentsChanged = true;
		};

		controller.done = function done()
		{
			console.log('CLOSE MODAL');
			$uibModalInstance.close();
		};
	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/consults/consultRequestController.js":
/*!**************************************************!*\
  !*** ./src/consults/consultRequestController.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($, moment) {angular.module('Consults').controller('Consults.ConsultRequestController', [

	'$scope',
	'$http',
	'$q',
	'$resource',
	'$location',
	'$uibModal',
	'consultService',
	'demographicService',
	'securityService',
	'summaryService',
	'staticDataService',
	'consult',
	'user',

	function(
		$scope,
		$http,
		$q,
		$resource,
		$location,
		$uibModal,
		consultService,
		demographicService,
		securityService,
		summaryService,
		staticDataService,
		consult,
		user)
	{

		var controller = this;

		controller.consult = consult;

		consult.faxList = Juno.Common.Util.toArray(consult.faxList);
		consult.serviceList = Juno.Common.Util.toArray(consult.serviceList);
		consult.sendToList = Juno.Common.Util.toArray(consult.sendToList);

		controller.urgencies = staticDataService.getConsultUrgencies();
		controller.statuses = staticDataService.getConsultRequestStatuses();
		controller.hours = staticDataService.getHours();
		controller.minutes = staticDataService.getMinutes();

		controller.parseTime = function parseTime(time)
		{
			var tArray = time.split(":");
			consult.appointmentHour = tArray[0];
			consult.appointmentMinute = tArray[1];
		};
		/* If appointment time is present, we must parse the hours and minutes in order to
		   populate the hour and minute selectors */
		if (consult.appointmentTime !== null)
		{
			controller.parseTime(consult.appointmentTime);

		}

		controller.initialize = function()
		{
			//get access rights
			securityService.hasRight("_con", "r").then(
				function success(results)
				{
					controller.consultReadAccess = results;
				},
				function error(errors)
				{
					console.error(errors);
				});
			securityService.hasRight("_con", "u").then(
				function success(results)
				{
					controller.consultUpdateAccess = results;
				},
				function error(errors)
				{
					console.error(errors);
				});
			securityService.hasRight("_con", "w").then(
				function success(results)
				{
					controller.consultWriteAccess = results;
				},
				function error(errors)
				{
					console.error(errors);
				});

			//set demographic info
			demographicService.getDemographic(consult.demographicId).then(
				function success(results)
				{
					consult.demographic = results;

					//set cell phone
					consult.demographic.extras = Juno.Common.Util.toArray(consult.demographic.extras);
					for (var i = 0; i < consult.demographic.extras.length; i++)
					{
						if (consult.demographic.extras[i].key == "demo_cell")
						{
							consult.demographic.cellPhone = consult.demographic.extras[i].value;
							break;
						}
					}
				},
				function error(errors)
				{
					console.error(errors);
				});

			consultService.getLetterheadList().then(
				function success(results)
				{
					consult.letterheadList = Juno.Common.Util.toArray(results.data);
					if(consult.letterhead === null)
					{
						controller.changeLetterhead(consult.letterheadList[0]);
					}
					else
					{
						for (var i = 0; i < consult.letterheadList.length; i++)
						{
							if (consult.letterheadList[i].id === consult.letterheadName)
							{
								controller.changeLetterhead(consult.letterheadList[i]);
								break;
							}
						}
					}
				},
				function error(errors)
				{
					console.error(errors);
				}
			);

			//set specialist list
			for (var i = 0; i < consult.serviceList.length; i++)
			{
				if (consult.serviceList[i].serviceId == consult.serviceId)
				{
					controller.specialists = Juno.Common.Util.toArray(consult.serviceList[i].specialists);
					break;
				}
			}
			angular.forEach(controller.specialists, function(spec)
			{
				if (consult.professionalSpecialist && spec.id == consult.professionalSpecialist.id)
				{
					consult.professionalSpecialist = spec;
				}
			});

			//set attachments
			consult.attachments = Juno.Common.Util.toArray(consult.attachments);
			Juno.Consults.Common.sortAttachmentDocs(consult.attachments);
		};
		controller.initialize();

		controller.changeLetterhead = function changeLetterhead(letterhead)
		{
			consult.letterhead = letterhead;

			// these are required for current print functionality
			consult.letterheadName = consult.letterhead.id;
			consult.letterheadAddress = consult.letterhead.address;
			consult.letterheadPhone = consult.letterhead.phone;
			consult.letterheadFax = consult.letterhead.fax;
		};

		//monitor data changed
		controller.consultChanged = 0;
		$scope.$watchCollection(function()
			{
				return controller.consult;
			},
			function(newVal, oldVal)
			{
				controller.consultChanged++;
			});

		//remind user of unsaved data
		$scope.$on("$stateChangeStart", function(event)
		{
			if (controller.consultChanged > 0)
			{
				var discard = confirm("You may have unsaved data. Are you sure to leave?");
				if (!discard) event.preventDefault();
			}
		});

		controller.changeService = function changeService(id)
		{
			var index = $("#serviceId")[0].selectedIndex;
			if (index === null)
			{
				$scope.specialists = null;
				return;
			}
			controller.specialists = toArray(consult.serviceList[index].specialists);
		};

		controller.writeToBox = function writeToBox(results, boxId)
		{
			var items = Juno.Common.Util.toArray(results.summaryItem);
			var boxData = null;
			for (var i = 0; i < items.length; i++)
			{
				boxData = Juno.Common.Util.addNewLine(items[i].displayName, boxData);
			}
			if (boxId == "clinicalInfo") consult.clinicalInfo = Juno.Common.Util.addNewLine(boxData, consult.clinicalInfo);
			else if (boxId == "concurrentProblems") consult.concurrentProblems = Juno.Common.Util.addNewLine(boxData, consult.concurrentProblems);
			else if (boxId == "currentMeds") consult.currentMeds = Juno.Common.Util.addNewLine(boxData, consult.currentMeds);
		};


		controller.getFamilyHistory = function getFamilyHistory(boxId)
		{
			summaryService.getFamilyHistory(consult.demographicId).then(
				function success(results)
				{
					if (results.summaryItem.length === 0)
						alert("No family history");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing family history!");
					console.error(errors);
				});
		};

		controller.getMedicalHistory = function getMedicalHistory(boxId)
		{
			summaryService.getMedicalHistory(consult.demographicId).then(
				function success(results)
				{
					if (results.summaryItem.length === 0)
						alert("No medical history");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing medical history!");
					console.error(errors);
				});
		};

		controller.getSocialHistory = function getSocialHistory(boxId)
		{
			summaryService.getSocialHistory(consult.demographicId).then(
				function success(results)
				{
					if (results.summaryItem.length === 0)
						alert("No social history");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing social history!");
					console.error(errors);
				});
		};

		controller.getOngoingConcerns = function getOngoingConcerns(boxId)
		{
			summaryService.getOngoingConcerns(consult.demographicId).then(
				function success(results)
				{
					if (results.summaryItem.length === 0)
						alert("No ongoing concerns");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing ongoing concerns!");
					console.error(errors);
				});
		};

		controller.getOtherMeds = function getOtherMeds(boxId)
		{
			summaryService.getOtherMeds(consult.demographicId).then(
				function success(results)
				{
					if (results.summaryItem.length === 0)
						alert("No other meds");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing other meds!");
					console.error(errors);
				});
		};

		controller.getReminders = function getReminders(boxId)
		{
			summaryService.getReminders(consult.demographicId).then(
				function success(results)
				{
					if (results.summaryItem.length === 0)
						alert("No reminders");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing reminders!");
					console.error(errors);
				});
		};

		// New function, doesn't work
		controller.getAllergies = function getAllergies(boxId)
		{
			summaryService.getAllergies(consult.demographicId).then(
				function success(results)
				{
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					console.error(errors);
				});
		};
		
		controller.invalidData = function invalidData()
		{
			if (!controller.consult.urgency)
			{
				alert("Please select an Urgency");
				return true;
			}
			if (!controller.consult.letterheadName)
			{
				alert("Please select a Letterhead");
				return true;
			}
			if (!controller.consult.professionalSpecialist)
			{
				alert("Please select a Specialist");
				return true;
			}
			if (controller.consult.demographic == null || controller.consult.demographic == "")
			{
				alert("Error! Invalid patient!");
				return true;
			}
			return false;
		};

		controller.setAppointmentTime = function setAppointmentTime()
		{
			if (consult.appointmentHour != null && consult.appointmentMinute != null && !consult.patientWillBook)
			{
				apptTime = moment(Date.now());
				apptTime.set('hours', consult.appointmentHour);
				apptTime.set('minute', consult.appointmentMinute);
				consult.appointmentTime = apptTime;
			}
			else
			{
				consult.appointmentTime = null;
			}
		};

		controller.openAttach = function openAttach(attachment)
		{
			window.open("../" + attachment.url);
		};

		controller.attachFiles = function attachFiles()
		{
			var modalInstance = $uibModal.open(
				{
					templateUrl: "src/consults/consultAttachment.jsp",
					controller: 'Consults.ConsultRequestAttachmentController as consultAttachmentCtrl',
					windowClass: "attachment-modal-window",
					size: 'lg',
					resolve:
						{
							consult: function()
							{
								return consult;
							}
						}
				});

			modalInstance.result.then(
				function success()
				{
					if (consult.attachmentsChanged)
					{
						controller.consultChanged++;
						consult.attachmentsChanged = false;
					}
				},
				function error(errors)
				{
					console.error(errors);
				});
		};

		//show/hide e-send button
		controller.setESendEnabled = function setESendEnabled()
		{
			controller.eSendEnabled = consult.professionalSpecialist != null && consult.professionalSpecialist.eDataUrl != null && consult.professionalSpecialist.eDataUrl.trim() != "";
		};

		controller.setESendEnabled(); //execute once on form open

		controller.save = function save()
		{
			var deferred = $q.defer();
			var valid = true;

			if (!controller.consultWriteAccess && consult.id == null)
			{
				alert("You don't have right to save new consult");
				valid = false;
			}
			if (!controller.consultUpdateAccess)
			{
				alert("You don't have right to update consult");
				valid = false;
			}
			if (controller.invalidData())
			{
				valid = false;
			}

			if(valid)
			{
				controller.consultSaving = true; //show saving banner
				controller.setAppointmentTime();

				consultService.saveRequest(consult).then(
					function success(results)
					{
						if (consult.id == null)
						{
							$location.path("/record/" + consult.demographicId + "/consult/" + results.id);
						}
						deferred.resolve(results.id);
					},
					function error(errors)
					{
						console.error(errors);
						deferred.reject(errors);
					})
					.finally(
						function()
						{
							controller.setESendEnabled();
							controller.consultSaving = false; //hide saving banner
							controller.consultChanged = 0; //reset change count
						}
					);
			}
			else
			{
				deferred.reject("Invalid");
			}
			return deferred.promise;
		};

		controller.close = function close()
		{
			if ($location.search().list === "patient")
			{
				$location.path("/record/" + consult.demographicId + "/consults");
			}
			else
			{
				$location.path("/consults");
			}
		};

		controller.saveAndFax = function saveAndPrint()
		{
			controller.save().then(
				function success(reqId)
				{
					var demographicNo = consult.demographicId;
					var letterheadFax = Juno.Common.Util.noNull(consult.letterhead.fax);
					var fax = Juno.Common.Util.noNull(consult.professionalSpecialist.faxNumber);

					window.open("../fax/CoverPage.jsp?reqId=" + reqId + "&demographicNo=" + demographicNo + "&letterheadFax=" + letterheadFax + "&fax=" + fax);
				},
				function failure(error)
				{
				}
			);
		};

		controller.eSend = function eSend()
		{
			if (controller.eSendEnabled)
			{
				consultService.eSendRequest(consult.id).then(
					function success(results)
					{
						alert(results.message);
					},
					function error(errors)
					{
						console.error(errors);
					});
			}
		};

		controller.saveAndPrint = function saveAndPrint()
		{
			controller.save().then(
				function success(reqId)
				{
					controller.print(reqId);
				},
				function failure(error)
				{
				}
			);
		};

		controller.print = function print(reqId)
		{
			window.open("../oscarEncounter/oscarConsultationRequest/printPdf2.do?reqId=" + reqId + "&demographicNo=" + consult.demographicId);
		};
	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js"), __webpack_require__(/*! moment */ "./node_modules/moment/moment.js")))

/***/ }),

/***/ "./src/consults/consultRequestListController.js":
/*!******************************************************!*\
  !*** ./src/consults/consultRequestListController.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(moment) {angular.module('Consults').controller('Consults.ConsultRequestListController', [

	'$scope',
	'$timeout',
	'$state',
	'$location',
	// '$defer',
	'NgTableParams',
	'consultService',
	'providerService',
	'demographicService',
	'demographicsService',
	'securityService',
	'staticDataService',

	function(
		$scope,
		$timeout,
		$state,
		$location,
		// $defer,
		NgTableParams,
		consultService,
		providerService,
		demographicService,
		demographicsService,
		securityService,
		staticDataService)
	{

		var controller = this;

		//get access rights
		securityService.hasRight("_con", "r").then(
			function success(results)
			{
				controller.consultReadAccess = results;
			},
			function error(errors)
			{
				console.log(errors);
			});
		securityService.hasRight("_con", "u").then(
			function success(results)
			{
				controller.consultUpdateAccess = results; //to be used with batch operations (not yet implemented)
			},
			function error(errors)
			{
				console.log(errors);
			});
		securityService.hasRight("_con", "w").then(
			function success(results)
			{
				controller.consultWriteAccess = results;
			},
			function error(errors)
			{
				console.log(errors);
			});

		//set search statuses
		controller.statuses = staticDataService.getConsultRequestStatuses();

		//get urgencies list
		controller.urgencies = staticDataService.getConsultUrgencies();

		controller.lastResponse = "";
		controller.teams = [];
		controller.consult = {};

		var allTeams = "All Teams";
		controller.search = {
			team: allTeams,
			startIndex: 0,
			numToReturn: 10
		};

		providerService.getActiveTeams().then(
			function success(results)
			{
				controller.teams = results;
				controller.teams.unshift(allTeams);
				console.log(JSON.stringify(results));
			},
			function error(errors)
			{
				alert(errors);
				console.log(errors);
			});

		controller.searchPatients = function searchPatients(term)
		{
			var search = {
				type: 'Name',
				'term': term,
				status: 'active',
				integrator: false,
				outofdomain: true
			};
			return demographicsService.search(search, 0, 25).then(
				function success(response)
				{
					var resp = [];
					for (var x = 0; x < response.content.length; x++)
					{
						resp.push(
						{
							demographicNo: response.content[x].demographicNo,
							name: response.content[x].lastName + ', ' + response.content[x].firstName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.searchMrps = function searchMrps(term)
		{
			var search = {
				searchTerm: term,
				active: true
			};
			return providerService.searchProviders(search).then(
				function success(response)
				{
					var resp = [];
					for (var x = 0; x < response.length; x++)
					{
						resp.push(
						{
							mrpNo: response[x].providerNo,
							name: response[x].name
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.updateMrpNo = function updateMrpNo(model)
		{
			if (model instanceof Object)
			{ //mrp set in search box
				controller.search.mrpNo = Number(model.mrpNo);
				controller.consult.mrpName = model.name;
			}
			else
			{ //mrp specified in url (come back from another consults) 
				providerService.getProvider(model).then(
					function success(results)
					{
						controller.consult.mrpName = results.lastName + ", " + results.firstName;
					},
					function error(errors)
					{
						console.log(errors);
					});
			}
		};

		controller.updateDemographicNo = function updateDemographicNo(item, model)
		{
			if (item != null)
			{ //demo set in search box
				controller.search.demographicNo = item.demographicNo;
				controller.consult.demographicName = item.name;
			}
			else
			{ //demo specified in url (come back from another consults)
				demographicService.getDemographic(model).then(
					function success(results)
					{
						controller.consult.demographicName = results.lastName + ", " + results.firstName;
					},
					function error(errors)
					{
						console.log(errors);
					});
			}
		};

		controller.checkAll = function checkAll()
		{
			angular.forEach(controller.lastResponse, function(item)
			{
				item.checked = true;
			});
		};

		controller.checkNone = function checkNone()
		{
			angular.forEach(controller.lastResponse, function(item)
			{
				item.checked = false;
			});
		};

		controller.editConsult = function editConsult(consult)
		{
			var url = "/record/" + consult.demographic.demographicNo + "/consult/" + consult.id;
			$location.path(url).search(controller.searchParams);
		};

		controller.addConsult = function addConsult()
		{
			if (!controller.consultWriteAccess)
			{
				alert("You don't have right to create new consult");
				return false;
			}
			var url = "/record/" + controller.search.demographicNo + "/consult/new";
			$location.path(url).search(controller.searchParams);
		};

		controller.removeDemographicAssignment = function removeDemographicAssignment()
		{
			controller.search.demographicNo = null;
			controller.consult.demographicName = null;
		};

		controller.removeMrpAssignment = function removeMrpAssignment()
		{
			controller.search.mrpNo = null;
			controller.consult.mrpName = null;
		};

		controller.doSearch = function doSearch()
		{
			controller.tableParams.reload();
		};

		controller.clear = function clear()
		{
			controller.removeDemographicAssignment();
			controller.removeMrpAssignment();

			var searchDemoNo = $state.params.demographicNo == null ? null : Number($state.params.demographicNo);
			controller.search = {
				team: allTeams,
				startIndex: 0,
				numToReturn: 10,
				demographicNo: searchDemoNo
			};
			controller.doSearch();
		};

		//retain search & filters for users to come back
		controller.setSearchParams = function setSearchParams()
		{
			controller.searchParams = {};

			if ($state.$current.name === "record.consultRequests")
				controller.searchParams.list = "patient";
			else if (controller.search.demographicNo != null) controller.searchParams.srhDemoNo = controller.search.demographicNo;

			if (controller.search.mrpNo != null) controller.searchParams.srhMrpNo = controller.search.mrpNo;
			if (controller.search.status != null) controller.searchParams.srhStatus = controller.search.status;
			if (controller.search.team != allTeams) controller.searchParams.srhTeam = controller.search.team;
			if (controller.search.referralStartDate != null) controller.searchParams.srhRefStartDate = controller.search.referralStartDate.getTime();
			if (controller.search.referralEndDate != null) controller.searchParams.srhRefEndDate = controller.search.referralEndDate.getTime();
			if (controller.search.appointmentStartDate != null) controller.searchParams.srhApptStartDate = controller.search.appointmentStartDate.getTime();
			if (controller.search.appointmentEndDate != null) controller.searchParams.srhApptEndDate = controller.search.appointmentEndDate.getTime();

			if (controller.search.page != null) controller.searchParams.srhToPage = controller.search.page;
			if (controller.search.perPage != null) controller.searchParams.srhCountPerPage = controller.search.perPage;
			if (controller.search.sortDirection != null)
			{
				controller.searchParams.srhSortMode = controller.search.sortColumn;
				controller.searchParams.srhSortDir = controller.search.sortDirection;
			}
		};

		controller.justOpen = true;

		// default parameters
		controller.search.sortColumn="ReferralDate";
		controller.search.sortDirection="desc";

		controller.tableParams = new NgTableParams(
		{
			page: 1, // show first page
			count: 10, // initial count per page
			sorting: {
				ReferralDate: 'desc'
			}
		},
		{
			getData: function(params)
			{
				if (controller.justOpen)
				{
					controller.getSavedSearchVals();
					controller.justOpen = false;
				}

				controller.setSearchParams();

				var count = params.url().count;
				var page = params.url().page;

				// shouldn't need these anymore
				//TODO refactor out of all uses here (I think these are used elsewhere).
				controller.search.startIndex = ((page - 1) * count);
				controller.search.numToReturn = parseInt(count);

				controller.search.page = params.url().page;
				controller.search.perPage = params.url().count;

				// need to parse out the ng-tables sort column/direction values
				// for use in our get parameters.
				var myRegexp = /sorting\[(\w+)\]/g;
				for(var key in params.url()) {
					var match = myRegexp.exec(String(key));
					if(match) {
						controller.search.sortColumn = match[1];
						controller.search.sortDirection = params.url()[String(key)];
					}
				}

				// copy to the get parameters hash
				var search1 = angular.copy(controller.search);

				if (search1.team === allTeams)
				{
					search1.team = null;
				}

				return consultService.searchRequests(search1).then(
					function success(result)
					{
						params.total(parseInt(result.meta.total[0]));

						for (var i = 0; i < result.data.length; i++)
						{
							var consult = result.data[i];

							//add statusDescription
							for (var j = 0; j < controller.statuses.length; j++)
							{
								if (consult.status == controller.statuses[j].value)
								{
									consult.statusDescription = controller.statuses[j].name;
									break;
								}
							}

							//add urgencyDescription
							for (var j = 0; j < controller.urgencies.length; j++)
							{
								if (consult.urgency == controller.urgencies[j].value)
								{
									consult.urgencyDescription = controller.urgencies[j].name;
									break;
								}
							}

							//add urgencyColor if consult urgency=Urgent(1)
							if (consult.urgency == 1)
							{
								consult.urgencyColor = "text-danger"; //= red text
							}

							//add notification if outstanding (incomplete requests > 1 month)
							if (consult.status != 4 && consult.status != 5 && consult.status != 7)
							{
								var refDate = moment(consult.referralDate).toDate();
								refDate.setMonth(refDate.getMonth() + 1);
								if ((new Date()) >= refDate)
								{
									consult.outstanding = true;
								}
							}
						}
						controller.lastResponse = result.data;
						return result.data;
					},
					function error(errors)
					{
						alert(errors);
						console.log(errors);
					});
			}

		});

		controller.getSavedSearchVals = function getSavedSearchVals()
		{
			//process demographicNo in url, run only once
			if ($state.params.demographicNo != null)
			{
				//called from patient record
				controller.hideSearchPatient = true;
				controller.search.demographicNo = Number($state.params.demographicNo);
			}
			else if ($location.search().srhDemoNo != null)
			{
				//come back from another consults
				controller.search.demographicNo = Number($location.search().srhDemoNo);
				controller.updateDemographicNo(null, $location.search().srhDemoNo);
			}

			//process other search parameters in url
			if ($location.search().srhMrpNo != null)
			{
				controller.search.mrpNo = Number($location.search().srhMrpNo);
				controller.updateMrpNo($location.search().srhMrpNo);
			}
			if ($location.search().srhRefStartDate != null) controller.search.referralStartDate = new Date(Number($location.search().srhRefStartDate));
			if ($location.search().srhRefEndDate != null) controller.search.referralEndDate = new Date(Number($location.search().srhRefEndDate));
			if ($location.search().srhApptStartDate != null) controller.search.appointmentStartDate = new Date(Number($location.search().srhApptStartDate));
			if ($location.search().srhApptEndDate != null) controller.search.appointmentEndDate = new Date(Number($location.search().srhApptEndDate));
			if ($location.search().srhStatus != null) controller.search.status = Number($location.search().srhStatus);
			if ($location.search().srhTeam != null) controller.search.team = $location.search().srhTeam;
			if ($location.search().srhCountPerPage != null) controller.search.perPage = $location.search().srhCountPerPage;

			if ($location.search().srhToPage != null) controller.search.page = $location.search().srhToPage;
			if ($location.search().srhSortMode != null && $location.search().srhSortDir != null)
			{
				controller.search.sortColumn = $location.search().sortMode;
				controller.search.sortDirection = $location.search().srhSortDir;
			}
		};

		controller.popup = function popup(vheight, vwidth, varpage, winname)
		{
			windowprops = "height=" + vheight + ",width=" + vwidth + ",location=no,scrollbars=yes,menubars=no,toolbars=no,resizable=yes,screenX=0,screenY=0,top=0,left=0";
			var popup = window.open(varpage, winname, windowprops);
			if (popup != null)
			{
				if (popup.opener == null)
				{
					popup.opener = self;
				}
			}
		};

	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js")))

/***/ }),

/***/ "./src/consults/consultResponseAttachmentController.js":
/*!*************************************************************!*\
  !*** ./src/consults/consultResponseAttachmentController.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {angular.module('Consults').controller('Consults.ConsultResponseAttachmentController', [

	'$uibModalInstance',
	'consultService',
	'consult',

	function(
		$uibModalInstance,
		consultService,
		consult)
	{
		controller.atth = {};
		controller.atth.patientName = consult.demographic.lastName + ", " + consult.demographic.firstName;

		controller.atth.attachedDocs = consult.attachments;
		if (controller.atth.attachedDocs[0] != null) controller.atth.selectedAttachedDoc = controller.atth.attachedDocs[0];

		var consultId = 0;
		if (consult.id != null) consultId = consult.id;
		consultService.getResponseAttachments(consultId, consult.demographic.demographicNo).then(
			function success(results)
			{
				if (consult.availableDocs == null) consult.availableDocs = Juno.Common.Util.toArray(results);
				controller.atth.availableDocs = consult.availableDocs;
				Juno.Consults.Common.sortAttachmentDocs(controller.atth.availableDocs);
				if (controller.atth.availableDocs[0] != null) controller.atth.selectedAvailableDoc = controller.atth.availableDocs[0];
			},
			function error(errors)
			{
				console.log(errors);
			});

		controller.openDoc = function openDoc(doc)
		{
			window.open("../" + doc.url);
		};

		controller.attach = function attach()
		{
			if (controller.atth.selectedAvailableDoc == null) return;

			controller.atth.attachedDocs.push(controller.atth.selectedAvailableDoc);
			controller.atth.selectedAttachedDoc = controller.atth.selectedAvailableDoc;
			controller.atth.selectedAttachedDoc.attached = true;
			Juno.Consults.Common.sortAttachmentDocs(controller.atth.attachedDocs);

			var x = $("#selAvailDoc").val();
			controller.atth.availableDocs.splice(x, 1);
			if (x >= controller.atth.availableDocs.length) x = controller.atth.availableDocs.length - 1;
			controller.atth.selectedAvailableDoc = controller.atth.availableDocs[x];

			consult.attachmentsChanged = true;
		};

		controller.detach = function detach()
		{
			if (controller.atth.selectedAttachedDoc == null) return;

			controller.atth.availableDocs.push(controller.atth.selectedAttachedDoc);
			controller.atth.selectedAvailableDoc = controller.atth.selectedAttachedDoc;
			controller.atth.selectedAvailableDoc.attached = false;
			Juno.Consults.Common.sortAttachmentDocs(controller.atth.availableDocs);

			var x = $("#selAttachDoc").val();
			controller.atth.attachedDocs.splice(x, 1);
			if (x >= controller.atth.attachedDocs.length) x = controller.atth.attachedDocs.length - 1;
			controller.atth.selectedAttachedDoc = controller.atth.attachedDocs[x];

			consult.attachmentsChanged = true;
		};

		controller.done = function done()
		{
			$uibModalInstance.close();
		};
	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/consults/consultResponseController.js":
/*!***************************************************!*\
  !*** ./src/consults/consultResponseController.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(moment, $) {angular.module('Consults').controller('Consults.ConsultResponseController', [

	'$scope',
	'$http',
	'$resource',
	'$location',
	'$uibModal',
	'consultService',
	'demographicService',
	'securityService',
	'summaryService',
	'staticDataService',
	'consult',
	'user',

	function(
		$scope,
		$http,
		$resource,
		$location,
		$uibModal,
		consultService,
		demographicService,
		securityService,
		summaryService,
		staticDataService,
		consult,
		user)
	{

		var controller = this;

		controller.initialize = function()
		{
			//get access rights
			securityService.hasRight("_con", "r").then(
				function success(results)
				{
					controller.consultReadAccess = results;
				},
				function error(errors)
				{
					console.log(errors);
				});
			securityService.hasRight("_con", "u").then(
				function success(results)
				{
					controller.consultUpdateAccess = results;
				},
				function error(errors)
				{
					console.log(errors);
				});
			securityService.hasRight("_con", "w").then(
				function success(results)
				{
					controller.consultWriteAccess = results;
				},
				function error(errors)
				{
					console.log(errors);
				});

			controller.consult = consult;
			consult.referringDoctorList = Juno.Common.Util.toArray(consult.referringDoctorList);
			consult.faxList = Juno.Common.Util.toArray(consult.faxList);
			consult.sendToList = Juno.Common.Util.toArray(consult.sendToList);

			//set attachments
			consult.attachments = Juno.Common.Util.toArray(consult.attachments);
			Juno.Consults.Common.sortAttachmentDocs(consult.attachments);


			consultService.getLetterheadList().then(
				function success(results)
				{
					consult.letterheadList = Juno.Common.Util.toArray(results.data);

					//set default letterhead
					if(consult.letterhead === null)
					{
						controller.changeLetterhead(consult.letterheadList[0]);
					}
					else
					{
						for (var i = 0; i < consult.letterheadList.length; i++)
						{
							if (consult.letterheadList[i].id === consult.letterheadName)
							{
								controller.changeLetterhead(consult.letterheadList[i]);
								break;
							}
						}
					}
				},
				function error(errors)
				{
					console.log(errors);
				}
			);

			//show referringDoctor in list
			angular.forEach(consult.referringDoctorList, function(referringDoc)
			{
				if(consult.referringDoctor !== null)
				{
					if (referringDoc.id === consult.referringDoctor.id)
					{
						consult.referringDoctor = referringDoc;
					}
				}
			});

			//set patient cell phone
			consult.demographic.extras = Juno.Common.Util.toArray(consult.demographic.extras);
			for (var i = 0; i < consult.demographic.extras.length; i++)
			{
				if (consult.demographic.extras[i].key == "demo_cell")
				{
					consult.demographic.cellPhone = consult.demographic.extras[i].value;
					break;
				}
			}
		};
		controller.initialize();

		controller.changeLetterhead = function changeLetterhead(letterhead)
		{
			consult.letterhead = letterhead;

			// these are required for current print functionality
			consult.letterheadName = consult.letterhead.id;
			consult.letterheadAddress = consult.letterhead.address;
			consult.letterheadPhone = consult.letterhead.phone;
			consult.letterheadFax = consult.letterhead.fax;
		};


		controller.urgencies = staticDataService.getConsultUrgencies();
		controller.statuses = staticDataService.getConsultResponseStatuses();
		controller.hours = staticDataService.getHours();
		controller.minutes = staticDataService.getMinutes();

		controller.parseTime = function parseTime(time)
		{
			var tArray = time.split(":");
			consult.appointmentHour = tArray[0];
			consult.appointmentMinute = tArray[1];
		};
		/* If appointment time is present, we must parse the hours and minutes in order to
		   populate the hour and minute selectors */
		if (consult.appointmentTime !== null)
		{
			controller.parseTime(consult.appointmentTime);

		}

		//monitor data changed
		controller.consultChanged = -1;
		$scope.$watchCollection(function()
			{
				return controller.consult;
			}, function()
			{
				controller.consultChanged++;
			});

		//remind user of unsaved data
		$scope.$on("$stateChangeStart", function(event)
		{
			if (controller.consultChanged > 0)
			{
				var discard = confirm("You may have unsaved data. Are you sure to leave?");
				if (!discard) event.preventDefault();
			}
		});

		controller.writeToBox = function writeToBox(data, boxId)
		{
			var items = Juno.Common.Util.toArray(data.summaryItem);
			var boxData = null;
			for (var i = 0; i < items.length; i++)
			{
				boxData = Juno.Common.Util.addNewLine(items[i].displayName, boxData);
			}
			if (boxId == "clinicalInfo") consult.clinicalInfo = Juno.Common.Util.addNewLine(boxData, consult.clinicalInfo);
			else if (boxId == "concurrentProblems") consult.concurrentProblems = Juno.Common.Util.addNewLine(boxData, consult.concurrentProblems);
			else if (boxId == "currentMeds") consult.currentMeds = Juno.Common.Util.addNewLine(boxData, consult.currentMeds);
		};

		controller.getFamilyHistory = function getFamilyHistory(boxId)
		{
			summaryService.getFamilyHistory(consult.demographic.demographicNo).then(
				function success(results)
				{
					if(results.summaryItem.length === 0)
						alert("No family history");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing family history!");
					console.log(errors);
				});
		};
		controller.getMedicalHistory = function getMedicalHistory(boxId)
		{
			summaryService.getMedicalHistory(consult.demographic.demographicNo).then(
				function success(results)
				{
					if(results.summaryItem.length === 0)
						alert("No medical history");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing medical history!");
					console.log(errors);
				});
		};
		controller.getSocialHistory = function getSocialHistory(boxId)
		{
			summaryService.getSocialHistory(consult.demographic.demographicNo).then(
				function success(results)
				{
					if(results.summaryItem.length === 0)
						alert("No social history");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing social history!");
					console.log(errors);
				});
		};
		controller.getOngoingConcerns = function getOngoingConcerns(boxId)
		{
			summaryService.getOngoingConcerns(consult.demographic.demographicNo).then(
				function success(results)
				{
					if(results.summaryItem.length === 0)
						alert("No ongoing concerns");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing ongoing concerns!");
					console.log(errors);
				});
		};
		controller.getOtherMeds = function getOtherMeds(boxId)
		{
			summaryService.getOtherMeds(consult.demographic.demographicNo).then(
				function success(results)
				{
					if(results.summaryItem.length === 0)
						alert("No other meds");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing other meds!");
					console.log(errors);
				});
		};
		controller.getReminders = function getReminders(boxId)
		{
			summaryService.getReminders(consult.demographic.demographicNo).then(
				function success(results)
				{
					if(results.summaryItem.length === 0)
						alert("No reminders");
					controller.writeToBox(results, boxId);
				},
				function error(errors)
				{
					alert("Error grabbing reminders!");
					console.log(errors);
				});
		};

		controller.invalidData = function invalidData()
		{
			if (!controller.consult.urgency)
			{
				alert("Please select an Urgency");
				return true;
			}
			if (!controller.consult.letterheadName)
			{
				alert("Please select a Letterhead");
				return true;
			}
			if (Juno.Common.Util.isUndefinedOrNull(controller.consult.referringDoctor))
			{
				alert("Please select a Referring Doctor");
				return true;
			}
			if (!controller.consult.demographic || controller.consult.demographic === "")
			{
				alert("Error! Invalid patient!");
				return true;
			}
			return false;
		};

		controller.setAppointmentTime = function setAppointmentTime()
		{
			if (consult.appointmentHour !== null && consult.appointmentMinute !== null)
			{
				apptTime = moment(Date.now());
				apptTime.set('hours', consult.appointmentHour);
				apptTime.set('minute', consult.appointmentMinute);
				consult.appointmentTime = apptTime;
			}
			else
			{
				consult.appointmentTime = null;
			}
		};

		controller.openAttach = function openAttach(attachment)
		{
			window.open("../" + attachment.url);
		};

		controller.attachFiles = function attachFiles()
		{
			var modalInstance = $uibModal.open(
			{
				templateUrl: "src/consults/consultAttachment.jsp",
				controller: "Consults.ConsultResponseAttachmentController as consultAttachmentCtrl",
				windowClass: "attachment-modal-window",
				backdrop: "static",
				resolve:
				{
					consult: function()
					{
						return consult;
					}
				}
			});

			modalInstance.result.then(
				function success(results)
				{
					if (consult.attachmentsChanged)
					{
						controller.consultChanged++;
						consult.attachmentsChanged = false;
					}
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.save = function save()
		{
			if (!controller.consultWriteAccess && consult.id == null)
			{
				alert("You don't have right to save new consult");
				return false;
			}
			if (!controller.consultUpdateAccess)
			{
				alert("You don't have right to update consult");
				return false;
			}

			if (controller.invalidData()) return false;

			controller.consultSaving = true; //show saving banner
			controller.setAppointmentTime();

			consultService.saveResponse(consult).then(
				function success(results)
				{
					//update url for new consultation
					if (consult.id === null) {
						$location.path("/record/" + consult.demographic.demographicNo + "/consultResponse/" + results.body.id);
					}
				},
				function error(errors)
				{
					console.log(errors);
				});
			controller.consultSaving = false; //hide saving banner
			controller.consultChanged = -1; //reset change count
			return true;
		};

		controller.close = function close()
		{
			if ($location.search().list === "patient") $location.path("/record/" + consult.demographic.demographicNo + "/consultResponses");
			else $location.path("/consultResponses");
		};

		//fax & print functions
		var p_page1 = "<html><style>body{width:800px;font-family:arial,verdana,tahoma,helvetica,sans serif}table{width:100%}th{text-align:left;font-weight:bold;width:1px;white-space:nowrap}td{vertical-align:top}label{font-weight:bold}em{font-size:small}.large{font-size:large}.center{text-align:center}</style><style media='print'>button{display:none}.noprint{display:none}</style><script>function printAttachments(url){window.open('../'+url);}</script><body>";

		controller.sendFax = function sendFax()
		{
			var p_urgency = Juno.Common.Util.toTrimmedString(controller.urgencies[$("#urgency").val()].name);
			var p_letterheadName = Juno.Common.Util.toTrimmedString(consult.letterheadList[$("#letterhead").val()].name);
			var p_page2 = Juno.Common.Util.getPrintPage2(p_urgency, p_letterheadName, consult, user);

			var consultResponsePage = encodeURIComponent(p_page1 + p_page2);
			var reqId = consult.id;
			var demographicNo = consult.demographic.demographicNo;
			var letterheadFax = Juno.Common.Util.toTrimmedString(consult.letterheadFax);
			var fax = Juno.Common.Util.toTrimmedString(consult.referringDoctor.faxNumber);

			window.open("../fax/CoverPage.jsp?consultResponsePage=" + consultResponsePage + "&reqId=" + reqId + "&demographicNo=" + demographicNo + "&letterheadFax=" + letterheadFax + "&fax=" + fax);
		};

		controller.printPreview = function printPreview()
		{
			if (controller.invalidData()) return;

			var printWin = window.open("", "consultResponsePrintWin", "width=830,height=900,scrollbars=yes,location=no");
			printWin.document.open();

			var p_buttons = "<button onclick='window.print()'>Print</button><button onclick='window.close()'>Close</button>";
			var p_attachments = "";
			for (var i = 0; i < consult.attachments.length; i++)
			{
				p_attachments += "<div class='noprint'><button onclick=printAttachments('" + consult.attachments[i].url + "')>Print attachment</button> " + consult.attachments[i].displayName + "</div>";
			}

			var p_urgency = Juno.Common.Util.toTrimmedString(controller.urgencies[$("#urgency").val()].name);
			var p_letterheadName = Juno.Common.Util.toTrimmedString(consult.letterheadList[$("#letterhead").val()].name);
			var p_page2 = controller.getPrintPage2(p_urgency, p_letterheadName, consult, user);

			printWin.document.write(p_page1 + p_buttons + p_attachments + p_page2);
			printWin.document.close();
		};

		controller.getPrintPage2 = function getPrintPage2(p_urgency, p_letterheadName, consult, user)
		{
			var p_clinicName = Juno.Common.Util.toTrimmedString(consult.letterheadList[0].name);
			var p_responseDate = Juno.Common.Util.formatDate(consult.responseDate);
			var p_referralDate = Juno.Common.Util.formatDate(consult.referralDate);
			var p_letterheadAddress = Juno.Common.Util.toTrimmedString(consult.letterheadAddress);
			var p_letterheadPhone = Juno.Common.Util.toTrimmedString(consult.letterheadPhone);
			var p_letterheadFax = Juno.Common.Util.toTrimmedString(consult.letterheadFax);
			var p_consultantName = Juno.Common.Util.toTrimmedString(consult.referringDoctor.name);
			var p_consultantPhone = Juno.Common.Util.toTrimmedString(consult.referringDoctor.phoneNumber);
			var p_consultantFax = Juno.Common.Util.toTrimmedString(consult.referringDoctor.faxNumber);
			var p_consultantAddress = Juno.Common.Util.toTrimmedString(consult.referringDoctor.streetAddress);
			var p_patientName = Juno.Common.Util.toTrimmedString(consult.demographic.lastName) + ", " + Juno.Common.Util.toTrimmedString(consult.demographic.firstName);
			var p_patientPhone = Juno.Common.Util.toTrimmedString(consult.demographic.phone);
			var p_patientWorkPhone = Juno.Common.Util.toTrimmedString(consult.demographic.alternativePhone);
			var p_patientBirthdate = Juno.Common.Util.formatDate(consult.demographic.dateOfBirth);
			var p_patientSex = Juno.Common.Util.toTrimmedString(consult.demographic.sexDesc);
			var p_patientHealthCardNo = Juno.Common.Util.toTrimmedString(consult.demographic.hin) + "-" + Juno.Common.Util.toTrimmedString(consult.demographic.ver);
			var p_patientChartNo = Juno.Common.Util.toTrimmedString(consult.demographic.chartNo);
			var p_patientAddress = "";
			if (consult.demographic.address != null)
			{
				p_patientAddress = Juno.Common.Util.toTrimmedString(consult.demographic.address.address) + ", " +
					Juno.Common.Util.toTrimmedString(consult.demographic.address.city) + ", " +
					Juno.Common.Util.toTrimmedString(consult.demographic.address.province) + " " +
					Juno.Common.Util.toTrimmedString(consult.demographic.address.postal);
			}
			var p_appointmentDate = Juno.Common.Util.formatDate(consult.appointmentDate);
			var p_appointmentTime = Juno.Common.Util.formatTime(consult.appointmentTime);
			var p_reason = Juno.Common.Util.toTrimmedString(consult.reasonForReferral);
			var p_examination = Juno.Common.Util.toTrimmedString(consult.examination);
			var p_impression = Juno.Common.Util.toTrimmedString(consult.impression);
			var p_plan = Juno.Common.Util.toTrimmedString(consult.plan);
			var p_clinicalInfo = Juno.Common.Util.toTrimmedString(consult.clinicalInfo);
			var p_concurrentProblems = Juno.Common.Util.toTrimmedString(consult.concurrentProblems);
			var p_currentMeds = Juno.Common.Util.toTrimmedString(consult.currentMeds);
			var p_allergies = Juno.Common.Util.toTrimmedString(consult.allergies);
			var p_provider = Juno.Common.Util.toTrimmedString(user.lastName) + ", " + Juno.Common.Util.toTrimmedString(user.firstName);

			return "<div class='center'><label class='large'>" + p_clinicName + "</label><br/><label>Consultation Response</label><br/></div><br/><table><tr><td><label>Date: </label>" + p_responseDate + "</td><td rowspan=6 width=10></td><td><label>Status: </label>" + p_urgency + "</td></tr><tr><td colspan=2></td></tr><tr><th>FROM:</th><th>TO:</th></tr><tr><td><p class='large'>" + p_letterheadName + "</p>" + p_letterheadAddress + "<br/><label>Tel: </label>" + p_letterheadPhone + "<br/><label>Fax: </label>" + p_letterheadFax + "</td><td><table><tr><th>Referring Doctor:</th><td>" + p_consultantName + "</td></tr><tr><th>Phone:</th><td>" + p_consultantPhone + "</td></tr><tr><th>Fax:</th><td>" + p_consultantFax + "</td></tr><tr><th>Address:</th><td>" + p_consultantAddress + "</td></tr></table></td></tr><tr><td colspan=2></td></tr><tr><td><table><tr><th>Patient:</th><td>" + p_patientName + "</td></tr><tr><th>Address:</th><td>" + p_patientAddress + "</td></tr><tr><th>Phone:</th><td>" + p_patientPhone + "</td></tr><tr><th>Work Phone:</th><td>" + p_patientWorkPhone + "</td></tr><tr><th>Birthdate:</th><td>" + p_patientBirthdate + "</td></tr></table></td><td><table><tr><th>Sex:</th><td>" + p_patientSex + "</td></tr><tr><th>Health Card No:</th><td>" + p_patientHealthCardNo + "</td></tr><tr><th>Appointment date:</th><td>" + p_appointmentDate + "</td></tr><tr><th>Appointment time:</th><td>" + p_appointmentTime + "</td></tr><tr><th>Chart No:</th><td>" + p_patientChartNo + "</td></tr></table></td></tr></table><br/><table><tr><th>Examination:</th></tr><tr><td>" + p_examination + "<hr></td></tr><tr><th>Impression:</th></tr><tr><td>" + p_impression + "<hr></td></tr><tr><th>Plan:</th></tr><tr><td>" + p_plan + "<hr></td></tr><tr><td></td></tr><tr><th>Reason for consultation: (Date: " + p_referralDate + ")</th></tr><tr><td>" + p_reason + "<hr></td></tr><tr><th>Pertinent Clinical Information:</th></tr><tr><td>" + p_clinicalInfo + "<hr></td></tr><tr><th>Significant Concurrent Problems:</th></tr><tr><td>" + p_concurrentProblems + "<hr></td></tr><tr><th>Current Medications:</th></tr><tr><td>" + p_currentMeds + "<hr></td></tr><tr><th>Allergies:</th></tr><tr><td>" + p_allergies + "<hr></td></tr><tr><td><label>Consultant: </label>" + p_provider + "</td></tr><tr><td></td></tr><tr><td><div class='center'><em>Created by: OSCAR The open-source EMR www.oscarcanada.org</em></div></td></tr></table></body></html>";
		};
	}
]);

/* html for fax & print, kept here for easy reference
<html>
<style>
	body{width:800px;font-family:arial,verdana,tahoma,helvetica,sans serif}
	table{width:100%}
	th{text-align:left;font-weight:bold;width:1;white-space:nowrap}
	td{vertical-align:top}
	label{font-weight:bold}
	em{font-size:small}
	.large{font-size:large}
	.center{text-align:center}
</style>
<style media='print'>
	button{display:none}
	.noprint{display:none}
</style>
<script>
	function printAttachments(url){
		window.open('../'+url);
	}
</script>
<body>

<!-- Print preview page exclusive -->
	<!-- p_buttons -->
	<button onclick='window.print()'>Print</button>
	<button onclick='window.close()'>Close</button>
	<!-- p_buttons -->

	<!-- p_attachments, 1 or more -->
	<div class='noprint'>
		<button onclick=printAttachments('"+consult.attachments[i].url+"')>Print attachment</button> "+consult.attachments[i].displayName+"
	</div>
	<!-- p_attachments -->
<!-- Print preview page exclusive -->

	<div class='center'>
		<label class='large'>"+p_clinicName+"</label><br/>
		<label>Consultation Response</label><br/>
	</div>
	<br/>
	<table>
		<tr>
			<td>
				<label>Date: </label>"+p_responseDate+"
			</td>
			<td rowspan=6 width=10></td>
			<td>
				<label>Status: </label>"+p_urgency+"
			</td>
		</tr>
		<tr><td colspan=2></td></tr>
		<tr>
			<th>FROM:</th>
			<th>TO:</th>
		</tr>
		<tr>
			<td>
				<p class='large'>"+p_letterheadName+"</p>
				"+p_letterheadAddress+"<br/>
				<label>Tel: </label>"+p_letterheadPhone+"<br/>
				<label>Fax: </label>"+p_letterheadFax+"
			</td>
			<td>
				<table>
					<tr>
						<th>Referring Doctor:</th>
						<td>"+p_consultantName+"</td>
					</tr>
					<tr>
						<th>Phone:</th>
						<td>"+p_consultantPhone+"</td>
					</tr>
					<tr>
						<th>Fax:</th>
						<td>"+p_consultantFax+"</td>
					</tr>
					<tr>
						<th>Address:</th>
						<td>"+p_consultantAddress+"</td>
					</tr>
				</table>
			</td>
		</tr>
		<tr><td colspan=2></td></tr>
		<tr>
			<td>
				<table>
					<tr>
						<th>Patient:</th>
						<td>"+p_patientName+"</td>
					</tr>
					<tr>
						<th>Address:</th>
						<td>"+p_patientAddress+"</td>
					</tr>
					<tr>
						<th>Phone:</th>
						<td>"+p_patientPhone+"</td>
					</tr>
					<tr>
						<th>Work Phone:</th>
						<td>"+p_patientWorkPhone+"</td>
					</tr>
					<tr>
						<th>Birthdate:</th>
						<td>"+p_patientBirthdate+"</td>
					</tr>
				</table>
			</td>
			<td>
				<table>
					<tr>
						<th>Sex:</th>
						<td>"+p_patientSex+"</td>
					</tr>
					<tr>
						<th>Health Card No:</th>
						<td>"+p_patientHealthCardNo+"</td>
					</tr>
					<tr>
						<th>Appointment date:</th>
						<td>"+p_appointmentDate+"</td>
					</tr>
					<tr>
						<th>Appointment time:</th>
						<td>"+p_appointmentTime+"</td>
					</tr>
					<tr>
						<th>Chart No:</th>
						<td>"+p_patientChartNo+"</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
	<br/>
	<table>
		<tr><th>Examination:</th></tr>
		<tr><td>"+p_examination+"<hr></td></tr>
		<tr><th>Impression:</th></tr>
		<tr><td>"+p_impression+"<hr></td></tr>
		<tr><th>Plan:</th></tr>
		<tr><td>"+p_plan+"<hr></td></tr>
		<tr><td></td></tr>
		<tr><th>Reason for consultation: (Date: "+p_referralDate+")</th></tr>
		<tr><td>"+p_reason+"<hr></td></tr>
		<tr><th>Pertinent Clinical Information:</th></tr>
		<tr><td>"+p_clinicalInfo+"<hr></td></tr>
		<tr><th>Significant Concurrent Problems:</th></tr>
		<tr><td>"+p_concurrentProblems+"<hr></td></tr>
		<tr><th>Current Medications:</th></tr>
		<tr><td>"+p_currentMeds+"<hr></td></tr>
		<tr><th>Allergies:</th></tr>
		<tr><td>"+p_allergies+"<hr></td></tr>
		<tr><td><label>Consultant: </label>"+p_provider+"</td></tr>
		<tr><td></td></tr>
		<tr><td><div class='center'><em>Created by: OSCAR The open-source EMR www.oscarcanada.org</em></div></td></tr>
	</table>
</body>
</html>
*/
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js"), __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/consults/consultResponseListController.js":
/*!*******************************************************!*\
  !*** ./src/consults/consultResponseListController.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Consults').controller('Consults.ConsultResponseListController', [

	'$scope',
	'$timeout',
	'$state',
	'$location',
	'NgTableParams',
	'consultService',
	'providerService',
	'demographicService',
	'demographicsService',
	'securityService',
	'staticDataService',

	function(
		$scope,
		$timeout,
		$state,
		$location,
		NgTableParams,
		consultService,
		providerService,
		demographicService,
		demographicsService,
		securityService,
		staticDataService)
	{

		var controller = this;

		controller.onRecordPage = false;
		controller.demographicNo = null;
		controller.statuses = staticDataService.getConsultResponseStatuses(); 	//set search statuses
		controller.urgencies = staticDataService.getConsultUrgencies(); //get urgencies list
		controller.lastResponse = "";
		controller.teams = [];
		controller.consult = {};

		var allTeams = "All Teams";
		controller.search = {
			team: allTeams,
			startIndex: 0,
			numToReturn: 10
		};



		// Initialize the controller
		controller.init = function init()
		{
			if($state.params.demographicNo){
				controller.demographicNo = parseInt($state.params.demographicNo);
				controller.onRecordPage = true;
				controller.search.list = "patient";
			}

			controller.getAccessRights();
			controller.getTeams();
		};

		controller.getAccessRights = function getAccessRights()
		{
			//get access rights
			securityService.hasRight("_con", "r").then(
				function success(results)
				{
					controller.consultReadAccess = results;
				},
				function error(errors)
				{
					console.log(errors);
				});
			securityService.hasRight("_con", "u").then(
				function success(results)
				{
					controller.consultUpdateAccess = results; //to be used with batch operations (not yet implemented)
				},
				function error(errors)
				{
					console.log(errors);
				});
			securityService.hasRight("_con", "w").then(
				function success(results)
				{
					controller.consultWriteAccess = results;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};


		controller.getTeams = function getTeams()
		{
			providerService.getActiveTeams().then(
				function success(results)
				{
					controller.teams = results;
					controller.teams.unshift(allTeams);
					controller.search.team = allTeams;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.searchPatients = function searchPatients(term)
		{
			var search = {
				type: 'Name',
				'term': term,
				status: 'active',
				integrator: false,
				outofdomain: true
			};
			return demographicsService.search(search, 0, 25).then(
				function success(results)
				{
					var resp = [];
					for (var x = 0; x < results.content.length; x++)
					{
						resp.push(
						{
							demographicNo: results.content[x].demographicNo,
							name: results.content[x].lastName + ', ' + results.content[x].firstName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.searchMrps = function searchMrps(term)
		{
			var search = {
				searchTerm: term,
				active: true
			};
			return providerService.searchProviders(search).then(
				function success(results)
				{
					var resp = [];
					for (var x = 0; x < results.length; x++)
					{
						resp.push(
						{
							mrpNo: results[x].providerNo,
							name: results[x].name
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.updateMrpNo = function updateMrpNo(model)
		{
			if (Juno.Common.Util.exists(model))
			{
				controller.search.mrpNo = Number(model.mrpNo);
				controller.consult.mrpName = model.name;
			}
			else
			{
				providerService.getProvider(model).then(
					function success(results)
					{
						controller.search.mrpNo = Number(model);
						controller.consult.mrpName = results.lastName + ", " + results.firstName;
						controller.doSearch(true);
					},
					function error(errors)
					{
						console.log(errors);
					});
			}
		};

		controller.updateDemographicNo = function updateDemographicNo(item, model, label)
		{
			if(item !== null)
			{
				controller.demographicName = item.name;
				controller.demographicNo = item.demographicNo;
				controller.tableParams.reload();
			}
		};

		controller.checkAll = function checkAll()
		{
			angular.forEach(controller.lastResponse, function(item)
			{
				item.checked = true;
			});
		};

		controller.checkNone = function checkNone()
		{
			angular.forEach(controller.lastResponse, function(item)
			{
				item.checked = false;
			});
		};

		controller.editConsult = function editConsult(consult)
		{
			if(consult)
			{
				url = "/record/" + consult.demographic.demographicNo + "/consultResponse/" + consult.id;
				$location.path(url).search(controller.search);
				return true;
			}

			alert("Something went wrong");
			return false;
		};

		controller.addConsult = function addConsult()
		{
			if (!controller.consultWriteAccess)
			{
				alert("You don't have right to create new consult response");
				return false;
			}

			// User shouldn't be able to access this function unless demoNo is populated, but check just in case
			if(controller.demographicNo)
			{
				var url = "/record/" + controller.demographicNo + "/consultResponse/new";
				$location.path(url).search(controller.search);
				return true;
			}

			alert("Something went wrong");
			return false;
		};

		controller.removeDemographicAssignment = function removeDemographicAssignment()
		{
			controller.demographicNo = null;
			controller.demographicName = null;
			controller.tableParams.reload();
		};

		controller.removeMrpAssignment = function removeMrpAssignment()
		{
			controller.search.mrpNo = null;
			controller.consult.mrpName = null;
			controller.tableParams.reload();
		};

		controller.clear = function clear()
		{
			if(!controller.onRecordPage)
				controller.removeDemographicAssignment();
			controller.removeMrpAssignment();
			controller.search = {
				team: allTeams,
				startIndex: 0,
				numToReturn: 10,
			};

			controller.doSearch();
		};

		controller.doSearch = function doSearch(init)
		{
			$location.search(controller.search);
			controller.tableParams.reload();
		};

		controller.tableParams = new NgTableParams(
		{
			page: 1, // show first page
			count: 10, // initial count per page
			sorting:
			{
				ReferralDate: 'desc' // initial sorting
			}
		},
		{
			// total: 0, // length of data
			getData: function(params)
			{
				controller.getSavedSearchParams();
		
				var count = params._params.count;
				var page = params.url().page;

				controller.search.startIndex = ((page - 1) * count);
				controller.search.numToReturn = parseInt(count);

				controller.search.page = params.url().page;
				controller.search.perPage = params.url().count;

				var myRegexp = /sorting\[(\w+)\]/g;
				for(var key in params.url()) {
					var match = myRegexp.exec(String(key));
					if(match) {
						controller.search.sortColumn = match[1];
						controller.search.sortDirection = params.url()[String(key)];
					}
				}

				var tmpSearch = angular.copy(controller.search);

				if (tmpSearch.team === allTeams)
				{
					tmpSearch.team = null;
				}

				if(controller.demographicNo)
				{
					tmpSearch.demographicNo = controller.demographicNo;
				}

				return consultService.searchResponses(tmpSearch).then(
					function success(results)
					{
						params.total(parseInt(results.meta.total[0]));

						for (var i = 0; i < results.data.length; i++)
						{
							var consult = results.data[i];

							//add statusDescription
							for (var j = 0; j < controller.statuses.length; j++)
							{
								if (consult.status === controller.statuses[j].value)
								{
									consult.statusDescription = controller.statuses[j].name;
									break;
								}
							}

							//add urgencyDescription
							for (var j = 0; j < controller.urgencies.length; j++)
							{
								if (consult.urgency === controller.urgencies[j].value)
								{
									consult.urgencyDescription = controller.urgencies[j].name;
									break;
								}
							}

							//add urgencyColor if consult urgency=Urgent(1)
							if (consult.urgency === 1)
							{
								consult.urgencyColor = "text-danger"; //= red text
							}
						}

						controller.lastResponse = results.data;
						return results.data;
					},
					function error(errors)
					{
						console.log(errors);
					});
			}
		});

		controller.getSavedSearchParams = function getSavedSearchParams()
		{
			//process search parameters
			if ($state.params.demographicNo != null)
			{
				controller.hideSearchPatient = true;
				controller.updateDemographicNo(null, $state.params.demographicNo);
			}
			else if ($location.search().srhDemoNo != null)
			{
				controller.updateDemographicNo(null, $location.search().srhDemoNo);
			}
			if ($location.search().srhMrpNo != null) controller.updateMrpNo($location.search().srhMrpNo);
			if ($location.search().referralStartDate) controller.search.referralStartDate = new Date($location.search().referralStartDate);
			if ($location.search().referralEndDate != null) controller.search.referralEndDate = new Date($location.search().referralEndDate);
			if ($location.search().appointmentStartDate != null) controller.search.appointmentStartDate = new Date($location.search().appointmentStartDate);
			if ($location.search().appointmentEndDate != null) controller.search.appointmentEndDate = new Date($location.search().appointmentEndDate);
			if ($location.search().status != null) controller.search.status = Number($location.search().status);
			if ($location.search().team != null) controller.search.team = $location.search().team;
			if ($location.search().countPerPage != null) controller.countPerPage = $location.search().countPerPage;
			if ($location.search().toPage != null) controller.toPage = $location.search().toPage;
			if ($location.search().sortColumn != null && $location.search().sortDirection != null)
			{
				controller.search.sortColumn = $location.search().sortColumn;
				controller.search.sortDirection = $location.search().sortDirection;
			}
		};

		controller.init();
	}
]);

/***/ }),

/***/ "./src/consults/module.js":
/*!********************************!*\
  !*** ./src/consults/module.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Consults', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/dashboard/dashboardController.js":
/*!**********************************************!*\
  !*** ./src/dashboard/dashboardController.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*

    Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for the
    Department of Family Medicine
    McMaster University
    Hamilton
    Ontario, Canada

*/
angular.module('Dashboard').controller('Dashboard.DashboardController', [

    '$scope',
    '$uibModal',
    'NgTableParams',
    'providerService',
    'ticklerService',
    'messageService',
    'inboxService',
    'k2aService',
    'noteService',
    'securityService',
    'personaService',

    function($scope,
             $uibModal,
             NgTableParams,
             providerService,
             ticklerService,
             messageService,
             inboxService,
             k2aService,
             noteService,
             securityService,
             personaService)
    {

        var controller = this;

        //header
        controller.displayDate = function displayDate()
        {
            return new Date();
        };
        console.log('TABLE PARAMS', NgTableParams);
        controller.me = null;
        controller.k2aActive = false;
	    controller.k2aFeedActive = false;

	    controller.busyLoadingData = false;

        personaService.getDashboardPreferences().then(
            function success(results)
            {
                controller.prefs = results.dashboardPreferences;
            },
            function error(errors)
            {
                console.log(errors);
            });

        securityService.hasRights(
            {
                items: [
                    {
                        objectName: '_tickler',
                        privilege: 'w'
                    },
                    {
                        objectName: '_tickler',
                        privilege: 'r'
                    }]
            }).then(
            function success(results)
            {
                if (results.content != null && results.content.length == 2)
                {
                    controller.ticklerWriteAccess = results.content[0];
                    controller.ticklerReadAccess = results.content[1];
                }
            },
            function error(errors)
            {
                console.log(errors);
            });

        controller.inboxTableParams = new NgTableParams(
            {
                page: 1, // show first page
                count: 10
            },
            {
                // total: 0, // length of data
                getData: function(params)
                {


                    return inboxService.getDashboardItems(params.count()).then(
                        function success(results)
                        {
                            console.log('INBOX DATA: ', results);
                            params.total(results.total); // recal. page nav controls
                            return results.content;
                        },
                        function error(errors)
                        {
                            console.log(errors);
                        });
                }
            });

        controller.openInbox = function openInbox()
        {
            newwindow = window.open('../dms/inboxManage.do?method=prepareForIndexPage', 'inbox', 'height=700,width=1000');
            if (window.focus)
            {
                newwindow.focus();
            }
        };


	    controller.updateK2aActive = function ()
	    {
		    k2aService.isK2AInit().then(
			    function success(data)
			    {
				    controller.k2aActive = data;
			    }
		    );
	    };
	    controller.loadMoreK2aFeed = function ()
	    {
		    controller.updateFeed(controller.k2afeed.length, 10);
	    };

	    controller.authenticateK2A = function (id)
	    {
		    window.open('../apps/oauth1.jsp?id=' + id, 'appAuth', 'width=700,height=450');
	    };

	    controller.agreeWithK2aPost = function (item)
	    {
		    if (item.agree)
		    {
			    k2aService.removeK2AComment(item.agreeId).then(
				    function (response)
				    {
					    item.agree = false;
					    item.agreeCount--;
					    item.agreeId = '';
				    },
				    function (reason)
				    {
					    alert(reason);
				    });
		    }
		    else if (!(item.agree || item.disagree))
		    {
			    if (typeof item.newComment === 'undefined')
			    {
				    item.newComment = {};
			    }
			    item.newComment.agree = true;
			    item.newComment.body = '';

			    controller.commentOnK2aPost(item);
		    }
	    };

	    controller.disagreeWithK2aPost = function (item)
	    {
		    if (item.disagree)
		    {
			    k2aService.removeK2AComment(item.agreeId).then(
				    function (response)
				    {
					    item.disagree = false;
					    item.disagreeCount--;
					    item.agreeId = '';
				    },
				    function (reason)
				    {
					    alert(reason);
				    });
		    }
		    if (!(item.agree || item.disagree))
		    {
			    if (typeof item.newComment === 'undefined')
			    {
				    item.newComment = {};
			    }
			    item.newComment.agree = false;
			    item.newComment.body = '';

			    controller.commentOnK2aPost(item);
		    }
	    };

	    controller.commentOnK2aPost = function (item)
	    {
		    item.newComment.postId = item.id;
		    k2aService.postK2AComment(item.newComment).then(
			    function (response)
			    {
				    item.newComment.body = '';
				    item.newComment.agree = '';
				    item.agreeId = response.agreeId;
				    if (!(typeof response.post[0].agree === 'undefined'))
				    {
					    if (response.post[0].agree)
					    {
						    item.agree = true;
						    item.agreeId = response.post[0].agreeId;
						    item.agreeCount++;
					    }
					    else
					    {
						    item.disagree = true;
						    item.agreeId = response.post[0].agreeId;
						    item.disagreeCount++;
					    }
				    }
				    else
				    {
					    item.commentCount++;
					    item.comments.unshift(response.post[0]);
				    }
			    },
			    function (reason)
			    {
				    alert(reason);
			    });
	    };

        controller.updateTicklers = function updateTicklers()
        {
            //consider the option to have overdue only or not
            ticklerService.search(
                {
                    status: 'A',
                    creator: controller.me.providerNo,
                    overdueOnly: 'property'
                }, 0, 6).then(
                function success(results)
                {
                    controller.totalTicklers = results.total;
                    if (results.content == null)
                    {
                        return;
                    }

                    if (results.content instanceof Array)
                    {
                        controller.ticklers = results.content;
                    }
                    else
                    {
                        var arr = new Array();
                        arr[0] = results.content;
                        controller.ticklers = arr;
                    }
                },
                function error(errors)
                {
                    console.log(errors);
                });
        };

        controller.updateMessages = function updateMessages()
        {
            messageService.getUnread(6).then(
                function success(results)
                {
                    controller.totalMessages = results.total;

                    if (results.content == null)
                    {
                        return;
                    }

                    if (results.content instanceof Array)
                    {
                        controller.messages = results.content;
                    }
                    else
                    {
                        var arr = new Array();
                        arr[0] = results.content;
                        controller.messages = arr;
                    }
                },
                function error(errors)
                {
                    console.log(errors);
                });

        };

        controller.updateReports = function updateReports()
        {
            //TODO: changed to return 5 since that is all we are using at the moment
            inboxService.getDashboardItems(5).then(
                function success(results)
                {
                    if (results.content == null)
                    {
                        return;
                    }

                    if (results.content instanceof Array)
                    {
                        controller.inbox = results.content;
                    }
                    else
                    {
                        var arr = new Array();
                        arr[0] = results.content;
                        controller.inbox = arr;
                    }
                    controller.totalInbox = results.total;
                },
                function error(errors)
                {
                    console.log(errors);
                });
        };

        controller.updateFeed = function updateFeed(startPoint, numberOfRows)
        {
            if (controller.busyLoadingData) return;
            controller.busyLoadingData = true;
            k2aService.getK2aFeed(startPoint, numberOfRows).then(
                function(response)
                {
                	console.log("k2a feed response", response);

	                if (response.content instanceof Array)
	                {
	                	var content = response.content;
		                for (var i = 0; i < content.length; i++)
		                {
			                if (!Array.isArray(content[i].comments))
			                {
				                var arr = new Array();
				                arr[0] = content[i].comments;
				                content[i].comments = arr;
			                }
		                }
		                if (typeof controller.k2afeed === 'undefined')
		                {
			                controller.k2afeed = content;
		                }
		                else
		                {
			                controller.k2afeed = controller.k2afeed.concat(content);
		                }
		                controller.k2aFeedActive = true;
		                controller.busyLoadingData = false;
	                }
	                else
	                {
		                if (response.content.authenticatek2a)
		                {
			                controller.authenticatek2a = response.content.description;
		                }
		                else
		                {
			                var arr = new Array();
			                arr[0] = response.content;
			                controller.k2afeed = arr;
			                controller.k2aFeedActive = true;
		                }
	                }

                },
                function(reason)
                {
                    alert(reason);
                    controller.busyLoadingData = false;
                });
        };

        controller.updateDashboard = function updateDashboard()
        {
            controller.updateTicklers();
            controller.updateMessages();
            controller.updateReports();
            controller.updateFeed(0, 10);
            controller.updateK2aActive();

        };

        $scope.$watch(function()
        {
            return securityService.getUser();
        }, function(newVal)
        {
            controller.me = newVal;

            if (newVal != null)
            {
                controller.updateDashboard();
            }
        }, true);


        controller.isTicklerExpiredOrHighPriority = function isTicklerExpiredOrHighPriority(tickler)
        {
            var ticklerDate = Date.parse(tickler.serviceDate);
            var now = new Date();
            var result = false;
            if (ticklerDate < now)
            {
                result = true;
            }
            if (tickler.priority == 'High')
            {
                result = true;
            }

            return result;
        };

        controller.isTicklerHighPriority = function isTicklerHighPriority(tickler)
        {
            var ticklerDate = Date.parse(tickler.serviceDate);
            var now = new Date();
            var result = false;

            if (tickler.priority == 'High')
            {
                result = true;
            }

            return result;
        };

        controller.openClassicMessenger = function openClassicMessenger()
        {
            if (controller.me != null)
            {
                window.open('../oscarMessenger/DisplayMessages.do?providerNo=' + controller.me.providerNo, 'msgs', 'height=700,width=1024,scrollbars=1');
            }
        };

        controller.viewMessage = function viewMessage(message)
        {
            window.open('../oscarMessenger/ViewMessage.do?messageID=' + message.id + '&boxType=0', 'msg' + message.id, 'height=700,width=1024,scrollbars=1');
        };

        controller.viewTickler = function viewTickler(tickler)
        {
            var modalInstance = $uibModal.open(
                {
                    templateUrl: 'src/tickler/ticklerView.jsp',
                    controller: 'Tickler.TicklerViewController as  ticklerViewCtrl',
                    backdrop: 'static',
                    size: 'lg',
                    resolve:
                        {
                            tickler: function()
                            {
                                return tickler;
                            },
                            ticklerNote: function()
                            {
                                return noteService.getTicklerNote(tickler.id);
                            },
                            ticklerWriteAccess: function()
                            {
                                return controller.ticklerWriteAccess;
                            },
                            me: function()
                            {
                                return controller.me;
                            }
                        }
                });

            modalInstance.result.then(
                function success(results)
                {
                    //console.log('data from modalInstance '+data);
                    if (results != null && results == true)
                    {
                        controller.updateTicklers();
                    }
                },
                function error(errors)
                {
                    console.log(errors);
                });

        };

        controller.configureTicklers = function configureTicklers()
        {
            var modalInstance = $uibModal.open(
                {
                    templateUrl: 'src/tickler/configureDashboard.jsp',
                    controller: 'Dashboard.TicklerConfigureController as ticklerConfigureCtrl',
                    backdrop: 'static',
                    size: 'md',
                    resolve:
                        {
                            prefs: function()
                            {
                                return personaService.getDashboardPreferences();
                            }
                        }
                });

            modalInstance.result.then(
                function success(results)
                {
                    if (results == true)
                    {
                        controller.updateTicklers();
                        personaService.getDashboardPreferences().then(
                            function(results)
                            {
                                controller.prefs = results.dashboardPreferences;
                            });
                    }
                },
                function error(errors)
                {
                    console.log(errors);
                });

        };
    }
]);

/***/ }),

/***/ "./src/dashboard/module.js":
/*!*********************************!*\
  !*** ./src/dashboard/module.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Dashboard', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/dashboard/ticklerConfigureController.js":
/*!*****************************************************!*\
  !*** ./src/dashboard/ticklerConfigureController.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Dashboard').controller('Dashboard.TicklerConfigureController', [

	'$scope',
	'$uibModalInstance',
	'personaService',
	'prefs',

	function(
		$scope,
		$uibModalInstance,
		personaService,
		prefs)
	{

		var controller = this;

		controller.prefs = prefs.dashboardPreferences;

		controller.close = function close()
		{
			$uibModalInstance.close(false);
		};

		controller.save = function save()
		{

			personaService.updateDashboardPreferences(controller.prefs).then(
				function success(results)
				{
					$uibModalInstance.close(true);
				},
				function error(errors)
				{
					$uibModalInstance.close(false);
					console.log(errors);
				});

		};
	}
]);

/***/ }),

/***/ "./src/document/documentsController.js":
/*!*********************************************!*\
  !*** ./src/document/documentsController.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Document').controller('Document.DocumentsController', [

	'$scope',
	'securityService',

	function(
		$scope,
		securityService)
	{
		var controller = this;
		controller.me = null;

		$scope.$watch(function()
		{
			return securityService.getUser();
		}, function(newVal)
		{
			controller.me = newVal;

			if (newVal != null)
			{
				window.open('../dms/documentReport.jsp?function=provider&functionid=' + controller.me.providerNo, 'edocView', 'height=700,width=1024');
			}
		}, true);


		controller.openPopup = function openPopup()
		{
			window.open('../dms/documentReport.jsp?function=provider&functionid=' + controller.me.providerNo, 'edocView', 'height=700,width=1024');
		};
	}
]);

/***/ }),

/***/ "./src/document/module.js":
/*!********************************!*\
  !*** ./src/document/module.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Document', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/help/helpController.js":
/*!************************************!*\
  !*** ./src/help/helpController.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Help').controller('Help.HelpController', [

	'$scope',
	'$http',

	function(
		$scope,
		$http) {

	}
]);

/***/ }),

/***/ "./src/help/module.js":
/*!****************************!*\
  !*** ./src/help/module.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Help', []);

/***/ }),

/***/ "./src/help/supportController.js":
/*!***************************************!*\
  !*** ./src/help/supportController.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Help').controller('Help.SupportController', [

	'$scope',
	'$http',

	function(
		$scope,
		$http)
	{

		$scope.ospInfo = {
			name: 'OscarHost.ca',
			phone: '250-900-7373',
			contact: 'Oscarhost Support',
			email: 'support@oscarhost.ca',
			url: 'https://help.oscarhost.ca'
		};

		$scope.buildInfo = {
			versionDisplayName: '15-Beta',
			version: 'master-0000'
		};
	}
]);

/***/ }),

/***/ "./src/inbox/inboxController.js":
/*!**************************************!*\
  !*** ./src/inbox/inboxController.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Inbox').controller('Inbox.InboxController', [

	'$scope',
	'$http',

	function(
		$scope,
		$http) {

	}
]);

/***/ }),

/***/ "./src/inbox/module.js":
/*!*****************************!*\
  !*** ./src/inbox/module.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Inbox', []);

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

exports.__esModule = true;
//import {CalendarApiAdapter} from './schedule/calendarApiAdapter';
/*
angular.module('Schedule').service(
    'Schedule.CalendarApiAdapter', CalendarApiAdapter);
    */


/***/ }),

/***/ "./src/layout/bodyController.js":
/*!**************************************!*\
  !*** ./src/layout/bodyController.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Layout').controller('Layout.BodyController', [
	'$rootScope',
	'$scope',
	'providerService',
	'securityService',
	function($rootScope, $scope, providerService, securityService)
	{
		var controller = this;

		//=========================================================================
		// Initialization
		//=========================================================================

		controller.init = function init()
		{
			providerService.getMe().then(
				function success(results)
				{
					securityService.setUser(results);
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		// flag for whether the patient list should be showing or not
		// can be set from controllers with $emit: $scope.$emit('configureShowPatientList', false);
		controller.showPatientList = true;

		// controllers can update the showPatientList value by calling an $emit
		// e.g. $scope.$emit('configureShowPatientList', false);
		$scope.$on('configureShowPatientList',
			function(event, value)
			{
				console.log("Layout.BodyController updating showPatientList", value);
				controller.showPatientList = value;
			});
	}
]);

/***/ }),

/***/ "./src/layout/module.js":
/*!******************************!*\
  !*** ./src/layout/module.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */

angular.module('Layout', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/layout/navBarController.js":
/*!****************************************!*\
  !*** ./src/layout/navBarController.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function($) {

/*

    Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for the
    Department of Family Medicine
    McMaster University
    Hamilton
    Ontario, Canada

*/

angular.module('Layout').controller('Layout.NavBarController', [

	'$rootScope',
	'$scope',
	'$q',
	'$timeout',
	'$location',
	'$state',
	'$uibModal',
	'securityService',
	'personaService',
	'billingService',
	'inboxService',
	'messageService',

	function(
		$rootScope,
		$scope,
		$q,
		$timeout,
		$location,
		$state,
		$uibModal,
		securityService,
		personaService,
		billingService,
		inboxService,
		messageService)
	{
		var controller = this;

		//=========================================================================
		// Initialization
		//=========================================================================

		controller.init = function init()
		{
			controller.unAckLabDocTotal = 0;
			controller.unreadMessageTotal = 0;
			controller.demographicSearch = null;

			billingService.getBillingRegion().then(
				function success(results)
				{
					controller.billRegion = results.message;
				},
				function error(errors)
				{
					console.log(errors);
				});

			securityService.hasRights(
			{
				items: [
				{
					objectName: '_search',
					privilege: 'r'
				},
				{
					objectName: '_demographic',
					privilege: 'w'
				},
				{
					objectName: '_msg',
					privilege: 'r'
				}]
			}).then(
				function success(results)
				{
					if (results.content !== null)
					{
						controller.searchRights = results.content[0];
						controller.newDemographicRights = results.content[1];
						controller.messageRights = results.content[2];
					}
				},
				function error(errors)
				{
					console.log(errors);
				});

			personaService.getDashboardMenu().then(
				function success(results)
				{
					if (results.menus)
					{
						controller.dashboardMenu = results.menus.menu;
					}
				},
				function error(errors)
				{
					console.log(errors);
				});

			personaService.getNavBar().then(
				function success(results)
				{
					controller.currentProgram = results.currentProgram.program;

					if (results.programDomain.program instanceof Array)
					{
						controller.programDomain = results.programDomain.program;
					}
					else
					{
						controller.programDomain = [results.programDomain.program];
					}

					controller.unreadMessagesCount = results.unreadMessagesCount;
					controller.unreadPatientMessagesCount = results.unreadPatientMessagesCount;
					controller.getUnAckLabDocCount();
					controller.getUnreadMessageCount();
					controller.demographicSearchDropDownItems = results.menus.patientSearchMenu.items;
					controller.menuItems = results.menus.menu.items;
					controller.userMenuItems = results.menus.userMenu.items;
					controller.messengerMenu = results.menus.messengerMenu.items;
				},
				function error(errors)
				{
					console.log(errors);
				});

		};

		//=========================================================================
		// Watches
		//=========================================================================

		$scope.$watch(
			function()
			{
				return securityService.getUser();
			},
			function(newVal)
			{
				controller.me = newVal;
			},
			true);

		$scope.$watch(function()
			{
				return controller.demographicSearch;
			},
			function(new_value)
			{
				if (new_value != null && !new_value.isTypeaheadSearchQuery)
				{
					// selection from the patient search typeahead changed
					if (new_value.moreResults)
					{
						// the 'more results' option was selected
						controller.goToPatientSearch(new_value.searchQuery);
					}
					else
					{
						// patient was selected
						controller.goToPatientRecord(new_value.demographicNo);
					}

					// clear the selection
					controller.demographicSearch = null;
				}
			}, true);

		//=========================================================================
		// Methods
		//=========================================================================

		controller.getUnAckLabDocCount = function getUnAckLabDocCount()
		{
			inboxService.getUnAckLabDocCount().then(
				function success(results)
				{
					controller.unAckLabDocTotal = results;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.getUnreadMessageCount = function getUnreadMessageCount()
		{
			messageService.getUnreadCount().then(
				function success(results)
				{
					controller.unreadMessageTotal = results;
				},
				function error(errors)
				{
					console.log(errors);
				});

		};

		controller.getNavBar = function getNavBar()
		{
			personaService.getNavBar().then(
				function success(results)
				{
					controller.currentProgram = results.currentProgram.program;
					if (results.programDomain.program instanceof Array)
					{
						controller.programDomain = results.programDomain.program;
					}
					else
					{
						controller.programDomain = [results.programDomain.program];
					}

					controller.unreadMessagesCount = results.unreadMessagesCount;
					controller.unreadPatientMessagesCount = results.unreadPatientMessagesCount;
					controller.demographicSearchDropDownItems = results.menus.patientSearchMenu.items;
					controller.menuItems = results.menus.menu.items;
					controller.userMenuItems = results.menus.userMenu.items;
					controller.messengerMenu = results.menus.messengerMenu.items;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		// when patient typeahead search button is clicked
		controller.onPatientSearch = function onPatientSearch(search)
		{
			if (search === null)
			{
				controller.goToPatientSearch();

			}
			else if (search.isTypeaheadSearchQuery) // should only happen when search isTypeaheadSearchQuery
			{
				controller.goToPatientSearch(search.searchQuery);
			}

			// clear the selection
			controller.demographicSearch = null;
		};

		controller.goToPatientSearch = function goToPatientSearch(search)
		{
			$state.go('search',
			{
				term: search
			},
			{
				reload: 'search'
			});
		};

		controller.goToPatientRecord = function goToPatientRecord(demographicNo)
		{
			$state.go('record.details',
			{
				demographicNo: demographicNo,
				hideNote: true
			},
			{
				reload: 'record.details'
			});
		};

		//to help ng-clicks on buttons
		controller.transition = function transition(item)
		{
			console.log('transition', item);

			var newWindow;

			if (angular.isDefined(item) &&
				angular.isDefined(item.state) &&
				item.state !== null)
			{

				var url = "";
				var wname = "";

				if (item.label === "Inbox")
				{
					url = "../dms/inboxManage.do?method=prepareForIndexPage";
					wname = "inbox";
				}
				else if (item.label === "Billing")
				{
					url = "../billing.do?billRegion=CLINICAID&action=invoice_reports";
					wname = "billing";
				}
				else if (item.label === "Admin")
				{
					url = "../administration/";
					wname = "admin";
				}
				else if (item.label === "eDocs")
				{
					url = "../dms/documentReport.jsp?function=provider&functionid=" +
						encodeURIComponent(controller.me.providerNo);
					wname = "edocView";
				}
				else
				{
					$timeout(function()
					{
						$state.go(item.state);
					});
				}

				if (url !== "" && wname !== "")
				{
					newWindow = window.open(
						url, wname, 'scrollbars=1,height=700,width=1000');
					if (window.focus)
					{
						newWindow.focus();
					}
				}
			}
			else if (angular.isDefined(item) &&
				angular.isDefined(item.url) &&
				item.url !== null)
			{

				if (item.label === "Schedule")
				{
					var qs = "";
					var path = $location.path();
					path = path.substring(1); //remove leading /
					var param = path.split("/");

					if (param.length === 1)
					{
						qs = "?module=" + encodeURIComponent(param[0]);
					}
					else if (param.length === 3)
					{
						qs = "?record=" + encodeURIComponent(param[1]) +
							"&module=" + encodeURIComponent(param[2]);
					}

					window.location = item.url + qs;
					return false;

				}
				else if (angular.isDefined(item) &&
					angular.isDefined(item.openNewWindow) &&
					item.openNewWindow)
				{
					newWindow = window.open(item.url);
					if (window.focus)
					{
						newWindow.focus();
					}
				}
				else
				{
					window.location = item.url;
				}
			}
		};

		controller.openMessenger = function(item)
		{
			if (controller.me != null)
			{
				if (angular.isDefined(item) &&
					angular.isDefined(item.url) &&
					item.url === 'phr')
				{
					window.open('../phr/PhrMessage.do?method=viewMessages',
						'INDIVOMESSENGER' + encodeURIComponent(controller.me.providerNo),
						'height=700,width=1024,scrollbars=1');
				}
				else if (angular.isDefined(item) &&
					angular.isDefined(item.url) &&
					item.url === 'k2a')
				{
					var win;
					if (item.extra === "-")
					{
						//If user is not logged in
						win = window.open('../apps/oauth1.jsp?id=K2A',
							'appAuth', 'width=700,height=450,scrollbars=1');
						win.focus();
					}
					else
					{
						win = window.open('../apps/notifications.jsp',
							'appAuth', 'width=450,height=700,scrollbars=1');
						win.focus();
					}
				}
				else
				{
					// by default open classic messenger
					window.open('../oscarMessenger/DisplayMessages.do?providerNo=' +
						encodeURIComponent(controller.me.providerNo),
						'msgs', 'height=700,width=1024,scrollbars=1');
				}
			}
		};

		controller.newDemographic = function newDemographic(size)
		{
			var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/patient/newPatient.jsp',
				controller: 'Patient.NewPatientController as newPatientCtrl',
				backdrop: 'static',
				size: size
			});

			modalInstance.result.then(
				function success(results)
				{
					console.log(results);
					console.log('patient #: ', results.demographicNo);
					console.log($location.path());

					$location.path('/record/' +
						encodeURIComponent(results.demographicNo) +
						'/details');

					console.log($location.path());
				},
				function error(errors)
				{
					console.log('Modal dismissed at: ' + new Date());
					console.log(errors);
				});

			console.log($('#myModal'));
		};

		controller.isActive = function(tab)
		{
			return ($state.current.name === tab.state);
		};

		controller.changeProgram = function changeProgram(programId)
		{
			personaService.setCurrentProgram(programId).then(
				function success(results)
				{
					controller.getNavBar();
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		// For some reason Angular does not allow for the evaluation of the inverse of custom filters, thus, we have the the following masterpiece
		// If inverse === false, return true if the given item is supposed to be shown outside the 'more' dropdown on the medium view
		// If inverse === true, return the inverse of the above statement,
		controller.mediumNavItemFilter = function mediumNavItemFilter(inverse)
		{
			return function(item)
			{

				var labelsToShow = ['Dashboard', 'Schedule', 'Inbox', 'Consultations', 'Ticklers'];
				var filterValue = $.inArray(item.label, labelsToShow) != -1;

				if (inverse === true)
				{
					return !filterValue;
				}

				return filterValue;
			};
		};
		controller.smallNavItemFilter = function mediumNavItemFilter(inverse)
		{
			return function(item)
			{
				var labelsToShow = ['Dashboard'];
				var filterValue = $.inArray(item.label, labelsToShow) != -1;

				if (inverse === true)
				{
					return !filterValue;
				}

				return filterValue;
			};
		};
	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/patient/module.js":
/*!*******************************!*\
  !*** ./src/patient/module.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Patient', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/patient/newPatientController.js":
/*!*********************************************!*\
  !*** ./src/patient/newPatientController.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

    Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for the
    Department of Family Medicine
    McMaster University
    Hamilton
    Ontario, Canada

*/

angular.module('Patient').controller('Patient.NewPatientController', [

	'$scope',
	'$uibModal',
	'$uibModalInstance',
	'demographicService',
	'securityService',
	'programService',
	'staticDataService',

	function(
		$scope,
		$uibModal,
		$uibModalInstance,
		demographicService,
		securityService,
		programService,
		staticDataService)
	{
		var controller = this;

		controller.demographic = {};

		controller.submitDisabled = false;

		//get access right for creating new patient
		securityService.hasRight("_demographic", "w").then(
			function success(results)
			{
				controller.hasRight = results;
			},
			function error(errors)
			{
				console.log(errors);
			});

		//get programs to be selected
		programService.getPrograms().then(
			function success(results)
			{
				controller.programs = results;
				if (controller.programs.length == 1)
				{
					controller.demographic.admissionProgramId = controller.programs[0].id;
				}
			},
			function error(errors)
			{
				console.log(errors);
			});

		//get genders to be selected
		controller.genders = staticDataService.getGenders();

		controller.save = function save(ngModelContoller)
		{
			console.log(controller.demographic.lastName);
			console.log(controller.demographic.firstName);
			console.log(controller.demographic.dobYear);
			console.log(controller.demographic.dobMonth);
			console.log(controller.demographic.dobDay);
			console.log(controller.demographic.sex);
			console.log(controller.demographic);
			console.log(ngModelContoller.$valid);
			console.log($scope);

			controller.submitDisabled = true;

			if (ngModelContoller.$valid)
			{
				console.log("Saving...");

				if (!controller.isCorrectDate(controller.demographic.dobYear,
						controller.demographic.dobMonth, controller.demographic.dobDay))
				{
					alert("Incorrect Date of Birth!");
					controller.submitDisabled = false;
					return;
				}

				controller.demographic.dateOfBirth =
					controller.demographic.dobYear + '-' +
					controller.demographic.dobMonth + "-" +
					controller.demographic.dobDay;

				controller.demographic.patientStatusDate = new Date();
				controller.demographic.dateJoined = new Date();
				controller.demoRetVal = {};

				demographicService.saveDemographic(controller.demographic).then(
					function success(results)
					{
						console.log(results);
						controller.demoRetVal = results;
						$uibModalInstance.close(results);
					},
					function error(errors)
					{
						console.log(errors);
						controller.submitDisabled = false;
					});

			}
			else
			{
				console.log("ERR!!");
				controller.submitDisabled = false;
			}
		};

		controller.ok = function ok()
		{
			$uibModalInstance.close(controller.selected.item);
		};

		controller.cancel = function cancel()
		{
			$uibModalInstance.dismiss('cancel');
		};

		controller.capName = function capName()
		{
			if (controller.demographic.lastName != null)
			{
				controller.demographic.lastName = controller.demographic.lastName.toUpperCase();
			}

			if (controller.demographic.firstName != null)
			{
				controller.demographic.firstName = controller.demographic.firstName.toUpperCase();
			}
		};

		controller.isCorrectDate = function isCorrectDate(year, month, day)
		{
			var d = new Date(year, month - 1, day);

			if (d == "Invalid Date") return false;
			if (d.getFullYear() != year) return false;
			if (d.getMonth() != month - 1) return false;
			if (d.getDate() != day) return false;

			return true;
		};
	}
]);

/***/ }),

/***/ "./src/patient/search/module.js":
/*!**************************************!*\
  !*** ./src/patient/search/module.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Patient.Search', [ 'Common.Services' ]);


/***/ }),

/***/ "./src/patient/search/patientSearchController.js":
/*!*******************************************************!*\
  !*** ./src/patient/search/patientSearchController.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(moment) {

/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module('Patient.Search').controller('Patient.Search.PatientSearchController', [

	'$q',
	'$state',
	'$stateParams',
	'$uibModal',
	'NgTableParams',
	'securityService',
	'demographicsService',

	function(
		$q,
		$state,
		$stateParams,
		$uibModal,
		NgTableParams,
		securityService,
		demographicsService)
	{
		var controller = {};

		//=========================================================================
		// Initialization
		//=========================================================================

		controller.demographicReadAccess = null;
		controller.search = null;

		controller.init = function init()
		{
			controller.clearParams();
			if (Juno.Common.Util.exists($stateParams.term))
			{
				controller.search.term = $stateParams.term;
			}

			securityService.hasRights(
			{
				items: [
				{
					objectName: '_demographic',
					privilege: 'r'
				}]
			}).then(
				function success(results)
				{
					if (Juno.Common.Util.exists(results.content) && results.content.length === 1)
					{
						controller.demographicReadAccess = results.content[0];
						if (controller.demographicReadAccess)
						{
							controller.initTable();
						}
					}
					else
					{
						console.log('failed to load rights', results);
						controller.demographicReadAccess = false;
					}
				},
				function error(errors)
				{
					console.log(errors);
					controller.demographicReadAccess = false;
				});
		};

		//=========================================================================
		// Methods
		//=========================================================================

		controller.initTable = function initTable()
		{
			controller.tableParams = new NgTableParams(
			{
				page: 1,
				count: 10,
				sorting:
				{
					Name: 'asc'
				}
			},
			{
				getData: function(params)
				{
					var deferred = $q.defer();

					var count = params.url().count;
					var page = params.url().page;

					controller.search.params = params.url();

					var promiseArray = [];
					promiseArray.push(demographicsService.search(
						controller.search, ((page - 1) * count), count));

					controller.integratorResults = null;
					if (controller.search.integrator)
					{
						promiseArray.push(demographicsService.searchIntegrator(
							controller.search, 100));
					}

					$q.all(promiseArray).then(
						function success(results)
						{
							var demographicSearchResults = results[0];
							params.total(demographicSearchResults.total);

							if (controller.search.integrator)
							{
								controller.integratorResults = results[1];
							}

							deferred.resolve(demographicSearchResults.content);
						},
						function error(promiseErrors)
						{
							console.log('patient search failed', promiseErrors);
							deferred.reject();
						});

					return deferred.promise;
				}
			});
		};

		controller.searchPatients = function searchPatients()
		{
			if (controller.search.type === "DOB")
			{
				var dobMoment = moment(controller.search.term, ["YYYY-MM-DD", "YYYY/MM/DD"], true);
				if (dobMoment.isValid())
				{
					controller.search.term = dobMoment.format("YYYY-MM-DD");
				}
				else
				{
					alert("Please enter Date of Birth in format YYYY-MM-DD.");
					return;
				}
			}

			// reset to page 1 for new searches
			controller.tableParams.page(1);
			controller.tableParams.reload();
		};

		controller.clearParams = function(searchType)
		{
			// default search type
			if (!Juno.Common.Util.exists(searchType))
			{
				searchType = 'Name';
			}

			// reset the parameters
			controller.search = {
				type: searchType,
				term: '',
				status: "all",
				integrator: false,
				outofdomain: true
			};

			// update the placeholder
			controller.searchTermPlaceHolder = (controller.search.type === "DOB") ?
				"YYYY-MM-DD" : "Search Term";

			// do the search (if initialized)
			if (Juno.Common.Util.exists(controller.tableParams))
			{
				controller.tableParams.page(1);
				controller.tableParams.reload();
			}
		};

		controller.toggleParam = function toggleParam(param)
		{
			if (['integrator', 'outofdomain'].indexOf(param) > -1)
			{
				controller.search[param] = !controller.search[param];
			}
		};

		controller.loadRecord = function loadRecord(demographicNo)
		{
			$state.go('record.details',
			{
				demographicNo: demographicNo,
				hideNote: true
			});
		};

		controller.showIntegratorResults = function showIntegratorResults()
		{
			var results = [];
			var total = 0;

			if (Juno.Common.Util.exists(controller.integratorResults))
			{
				results = controller.integratorResults.content;
				total = controller.integratorResults.total;
			}

			$uibModal.open(
			{
				templateUrl: 'src/patientsearch/remotePatientResults.jsp',
				controller: 'RemotePatientResultsController',
				resolve:
				{
					results: function()
					{
						return results;
					},
					total: function()
					{
						return total;
					}
				}
			});
		};

		return controller;
	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js")))

/***/ }),

/***/ "./src/patient/search/remotePatientResultsController.js":
/*!**************************************************************!*\
  !*** ./src/patient/search/remotePatientResultsController.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*

 Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
 This software is published under the GPL GNU General Public License.
 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

 This software was written for the
 Department of Family Medicine
 McMaster University
 Hamilton
 Ontario, Canada

 */
angular.module('Patient.Search').controller('Patient.Search.RemotePatientResultsController', [

	'$http',
	'$scope',
	'$uibModalInstance',
	'results',
	'total',

	function(
		$http,
		$scope,
		$uibModalInstance,
		results,
		total)
	{
		$scope.results = results;
		$scope.total = total;

		$scope.currentPage = 1;
		$scope.pageSize = 5;
		$scope.startIndex = 0;


		$scope.close = function close()
		{
			$uibModalInstance.close("Someone Closed Me");
		};

		$scope.doImport = function doImport(d)
		{
			var myUrl = '../appointment/copyRemoteDemographic.jsp?remoteFacilityId=' + d.remoteFacilityId + '&demographic_no=' + d.demographicNo;
			window.open(myUrl, "ImportDemo", "width=700, height=1027");
		};

		$scope.save = function save()
		{
			$uibModalInstance.close("Someone Saved Me");
		};

		$scope.prevPage = function prevPage()
		{
			if ($scope.startIndex == 0)
			{
				return;
			}
			$scope.currentPage--;
			$scope.startIndex = ($scope.currentPage - 1) * $scope.pageSize;

		};

		$scope.nextPage = function nextPage()
		{
			if ($scope.startIndex + $scope.pageSize > $scope.total)
			{
				return;
			}
			$scope.currentPage++;
			$scope.startIndex = ($scope.currentPage - 1) * $scope.pageSize;
		};


	}
]);

/***/ }),

/***/ "./src/patientlist/module.js":
/*!***********************************!*\
  !*** ./src/patientlist/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('PatientList', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/patientlist/patientListAppointmentListController.js":
/*!*****************************************************************!*\
  !*** ./src/patientlist/patientListAppointmentListController.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('PatientList').controller('PatientList.PatientListAppointmentListController', [

	'$scope',
	'$http',
	'$q',
	'$filter',
	'$uibModal',
	'$state',
	'Navigation',
	'scheduleService',
	'providerService',
	'patientListState',

	function(
		$scope,
		$http,
		$q,
		$filter,
		$uibModal,
		$state,
		Navigation,
		scheduleService,
		providerService,
		patientListState)
	{

		var controller = this;

		controller.statusCodeMap = new Map();
		controller.statuses = null;

		controller.dateOptions = {
			showWeeks: false
		};


		//=========================================================================
		// Watches
		//=========================================================================/

		$scope.selectedDate = null;

		$scope.$watch('selectedDate', function(newValue, oldValue)
		{
			if(newValue !== oldValue)
			{
				scheduleService.selectedDate = newValue;
			}
		});


		//=========================================================================
		// Load Remote Data
		//=========================================================================/

		scheduleService.getStatuses().then(
			function success(results)
			{
				controller.statuses = results.content;
				controller.statusCodeMap = new Map(controller.statuses.map(i => [i.status, i]));
			},
			function error(errors)
			{
				console.log(errors);
			});


		//=========================================================================
		// Public Methods
		//=========================================================================/

		controller.getAppointmentStatusDescriptionByStatusCode = function (statusCode)
		{
			let status = controller.statusCodeMap.get(statusCode);
			let description = "";
			if(status)
			{
				description = status.description;
			}
			return description;
		};

		controller.getAppointmentStatusColourByStatusCode = function (statusCode)
		{
			let status = controller.statusCodeMap.get(statusCode);
			let colour = "#000000";
			if(status)
			{
				colour = status.color;
			}
			return colour;
		};

		controller.today = function today()
		{
			controller.appointmentDate = new Date();
		};

		controller.today();

		controller.clear = function clear()
		{
			controller.appointmentDate = null;
		};

		controller.open = function open($event)
		{
			$event.preventDefault();
			$event.stopPropagation();
			controller.opened = true;
		};

		Date.prototype.AddDays = function AddDays(noOfDays)
		{
			this.setTime(this.getTime() + (noOfDays * (1000 * 60 * 60 * 24)));
			return this;
		};

		controller.switchDay = function switchDay(n)
		{
			var dateNew = controller.appointmentDate;
			dateNew.AddDays(n);

			controller.appointmentDate = dateNew;

			var formattedDate = $filter('date')(dateNew, 'yyyy-MM-dd');

			controller.changeApptList(formattedDate);


		};

		controller.changeApptDate = function changeApptDate()
		{
			if (controller.appointmentDate == undefined)
			{
				controller.today();
			}
			var formattedDate = $filter('date')(controller.appointmentDate, 'yyyy-MM-dd');
			controller.changeApptList(formattedDate);
		};

		controller.changeApptList = function changeApptList(day)
		{
			controller.currenttab = patientListState.tabItems[0];
			controller.currenttab.serviceMethod = function ()
			{
				return scheduleService.getAppointments(day).then(
					function success(results)
					{
						return results.patients;
					}
				);
			};
			controller.showFilter = true;
			$scope.$emit('juno:patientListRefresh');
		};

		controller.addNewAppointment = function addNewAppointment()
		{
			var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/schedule/appointmentAdd.jsp',
				controller: 'Schedule.AppointmentAddController as appointmentAddCtrl',
				backdrop: 'static',
				size: 'lg',
				resolve:
				{
					me: function()
					{
						return providerService.getMe();
					},
					apptDate: function()
					{
						return controller.appointmentDate;
					}
				}
			});

			modalInstance.result.then(
				function success(results)
				{
					controller.switchDay(0);
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.viewAppointment = function viewAppointment(apptNo)
		{
			var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/schedule/appointmentView.jsp',
				controller: 'Schedule.AppointmentViewController as appointmentViewCtrl',
				backdrop: 'static',
				size: 'lg',
				resolve:
				{
					me: function()
					{
						return providerService.getMe();
					},
					appointment: function()
					{
						return scheduleService.getAppointment(apptNo);
					},
					statusList: function()
					{
						return scheduleService.getStatuses();
					}
				}
			});

			modalInstance.result.then(
				function success(results)
				{
					controller.switchDay(0);
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.isScheduleActive = function isScheduleActive()
		{
			return $state.current.name == 'schedule';
		};
	}
]);

/***/ }),

/***/ "./src/patientlist/patientListConfigController.js":
/*!********************************************************!*\
  !*** ./src/patientlist/patientListConfigController.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('PatientList').controller('PatientList.PatientListConfigController', [

	'$scope',
	'$uibModalInstance',
	'config',

	function(
		$scope,
		$uibModalInstance,
		config)
	{
		var controller = this;

		controller.patientListConfig = config;

		controller.cancel = function cancel()
		{
			$uibModalInstance.dismiss();
		};

		controller.saveConfiguration = function saveConfiguration()
		{
			$uibModalInstance.close(controller.patientListConfig);
		};
	}
]);

/***/ }),

/***/ "./src/patientlist/patientListController.js":
/*!**************************************************!*\
  !*** ./src/patientlist/patientListController.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*

    Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for the
    Department of Family Medicine
    McMaster University
    Hamilton
    Ontario, Canada

*/

angular.module('PatientList').controller('PatientList.PatientListController', [

	'$scope',
	'$http',
	'$state',
	'$uibModal',
	'angularUtil',
	'Navigation',
	'personaService',
	'providerService',
	'patientListState',
	'scheduleService',
	'reportingService',

	function(
		$scope,
		$http,
		$state,
		$uibModal,
		angularUtil,
		Navigation,
		personaService,
		providerService,
		patientListState,
		scheduleService,
		reportingService)
	{

		var controller = this;
		controller.sidebar = Navigation;
		controller.showFilter = true;
		controller.patientListConfig = {};


		controller.goToRecord = function goToRecord(patient)
		{
			if (patient.demographicNo != 0)
			{
				var params = {
					demographicNo: patient.demographicNo
				};
				if (angular.isDefined(patient.appointmentNo))
				{
					params.appointmentNo = patient.appointmentNo;
					params.encType = "face to face encounter with client";

					if (angularUtil.inMobileView())
					{
						controller.hidePatientList();
						console.log('hiding patientlist');
					}
				}
				console.log("params", params);
				$state.go('record.summary', params);
			}
		};

		//for filter box
		controller.query = '';


		controller.isActive = function isActive(temp)
		{
			if (controller.currenttab === null)
			{
				return false;
			}
			return temp === controller.currenttab.id;
		};

		controller.isMoreActive = function isMoreActive(temp)
		{
			if (controller.currentmoretab === null)
			{
				return false;
			}
			return temp === controller.currentmoretab.id;
		};

		controller.showPatientList = function showPatientList()
		{
			$scope.$emit('configureShowPatientList', true);
		};

		controller.hidePatientList = function hidePatientList()
		{
			$scope.$emit('configureShowPatientList', false);
		};

		controller.changeMoreTab = function changeMoreTab(moreTabItemsIndex, filter)
		{
			var beforeChangeTab = controller.currentmoretab;
			controller.currentmoretab = controller.moreTabItems[moreTabItemsIndex];

			controller.showFilter = true;
			controller.currenttab = null;
			controller.refresh(filter);
		};

		controller.changeTab = function changeTab(tabItemIndex, filter)
		{
			if(controller.currenttab !== patientListState.tabItems[tabItemIndex])
			{
				controller.currenttab = patientListState.tabItems[tabItemIndex];
				controller.showFilter = true;
				controller.currentmoretab = null;
				controller.refresh(filter);
			}
		};

		controller.getMoreTabClass = function getMoreTabClass(id)
		{
			if (controller.currentmoretab != null && id == controller.currentmoretab.id)
			{
				return "more-tab-highlight";
			}
			return "";
		};

		controller.currentPage = 0;
		controller.pageSize = 8;
		controller.patients = null;

		controller.numberOfPages = function numberOfPages()
		{
			if (controller.nPages == null || controller.nPages == 0)
			{
				return 1;
			}
			return controller.nPages;
		};


		$scope.$on('updatePatientListPagination', function(event, data)
		{
			console.log('updatePatientListPagination=' + data);
			controller.nPages = Math.ceil(data / controller.pageSize);
			console.log('nPages=' + controller.nPages);
		});


		controller.changePage = function changePage(pageNum)
		{
			controller.currentPage = pageNum;
			//broadcast the change page
			$scope.$broadcast('updatePatientList',
			{
				currentPage: controller.currentPage,
				pageSize: controller.pageSize
			});
		};

		$scope.$on('togglePatientListFilter', function(event, data)
		{
			console.log("received a togglePatientListFilter event:" + data);
			controller.showFilter = data;
		});


		controller.process = function process(tab, filter)
		{
			tab.serviceMethod().then(
				function success(resultList)
				{
					controller.patients = resultList;

					controller.nPages = 1;
					if (controller.patients != null && controller.patients.length > 0)
					{
						controller.nPages = Math.ceil(controller.patients.length / controller.pageSize);
					}

					controller.template = tab.template;
					Navigation.load(controller.template);
					controller.changePage(0);
				},
				function error(error)
				{
					alert('error loading data for patient list:' + error);
				}
			);
		};

		controller.refresh = function refresh(filter)
		{

			if (controller.currenttab != null)
			{
				controller.process(controller.currenttab, filter);
			}
			if (controller.currentmoretab != null)
			{
				controller.process(controller.currentmoretab, filter);
			}

		};

		$scope.$on('juno:patientListRefresh', function()
		{
			controller.refresh();
		});

		providerService.getRecentPatientList().then(
			function success(results)
			{
				controller.recentPatientList = results;
			},
			function error(errors)
			{
				console.log(errors);
			});
		personaService.getPatientListConfig().then(
			function success(results)
			{
				controller.patientListConfig = results;
				controller.pageSize = controller.patientListConfig.numberOfApptstoShow;
			},
			function error(errors)
			{
				console.log(errors);
			});


		controller.getTabItems = function getTabItems()
		{
			return patientListState.tabItems;
		};

		controller.manageConfiguration = function manageConfiguration()
		{
			var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/patientlist/patientListConfiguration.jsp',
				controller: 'PatientList.PatientListConfigController as patientListConfigCtrl',
				backdrop: false,
				size: 'lg',
				resolve:
				{
					config: function()
					{
						return controller.patientListConfig;
					}
				}
			});

			modalInstance.result.then(
				function success(results)
				{
					personaService.setPatientListConfig(results).then(
						function success(results)
						{
							controller.patientListConfig = results;
							controller.pageSize = controller.patientListConfig.numberOfApptstoShow;
							$scope.$emit('updatePatientListPagination', controller.patients.length);
						},
						function error(errors)
						{
							console.log(errors);
						});
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		patientListState.tabItems = [
			{
				id: 0,
				label: "Appts.",
				template: "src/patientlist/patientList1.jsp",
				serviceMethod: function ()
				{
					// this gets overwritten by the appointmentListController, when it sets specific dates
					return scheduleService.getAppointments('today').then(
						function success(results)
						{
							return results.patients;
						}
					);
				}
			},
			{
				id: 1,
				label: "Recent",
				template: "src/patientlist/recent.jsp",
				serviceMethod: function ()
				{
					return providerService.getRecentPatientList().then(
						function success(results)
						{
							controller.recentPatientList = results;
							return results;
						}
					);
				}
			}
		];
		controller.moreTabItems = [
			{
				id: 0,
				label: "Patient Sets",
				template: "src/patientlist/demographicSets.jsp",
				serviceMethod: function ()
				{
					return reportingService.getDemographicSetList().then(
						function success(results)
						{
							return results.content;
						}
					);
				}
			},
			{
				id: 1,
				label: "Caseload",
				template: "src/patientlist/program.jsp",
				serviceMethod: function ()
				{
					return Promise.resolve([]);
				}
			}
		];
		controller.changeTab(0);
	}
]);


/***/ }),

/***/ "./src/patientlist/patientListDemographicSetController.js":
/*!****************************************************************!*\
  !*** ./src/patientlist/patientListDemographicSetController.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('PatientList').controller('PatientList.PatientListDemographicSetController', [
	'$scope',
	'$http',
	'reportingService',

	function(
		$scope,
		$http,
		reportingService)
	{

		var controller = this;

		reportingService.getDemographicSetList().then(
			function success(results)
			{
				controller.sets = results.content;
			},
			function error(error)
			{
				alert('Failed to get sets lists.');
			});
	}
]);

/***/ }),

/***/ "./src/patientlist/patientListProgramController.js":
/*!*********************************************************!*\
  !*** ./src/patientlist/patientListProgramController.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('PatientList').controller('PatientList.PatientListProgramController', [

	'$scope',
	'$http',

	function(
		$scope,
		$http)
	{

		var controller = this;


		$scope.$on('updatePatientList', function(event, data)
		{
			console.log('updatePatientList=' + JSON.stringify(data));
			controller.updateData(data.currentPage, data.pageSize);
		});


		//the currentPage is 0 based
		controller.updateData = function updateData(currentPage, pageSize)
		{
			var startIndex = currentPage * pageSize;

			$http(
			{
				url: '../ws/rs/program/patientList?startIndex=' + startIndex + '&numToReturn=' + pageSize,
				method: "GET",
				headers:
				{
					'Content-Type': 'application/json'
				}
			}).then(
				function success(results)
				{
					controller.admissions = results.data.content;
					$scope.$emit('updatePatientListPagination', results.data.total);
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		//initialize..
		controller.updateData(0, controller.pageSize);
		$scope.$emit('togglePatientListFilter', false);

	}
]);

/***/ }),

/***/ "./src/patientlist/patientListState.js":
/*!*********************************************!*\
  !*** ./src/patientlist/patientListState.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module("PatientList").service("patientListState", [
	// Store variables here that must be accessible across controllers in patientlist
	function()
	{
		var service = this;

		service.tabItems = [];

	}
]);

/***/ }),

/***/ "./src/record/details/detailsController.js":
/*!*************************************************!*\
  !*** ./src/record/details/detailsController.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*

    Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for the
    Department of Family Medicine
    McMaster University
    Hamilton
    Ontario, Canada

*/
angular.module('Record.Details').controller('Record.Details.DetailsController', [

	'$scope',
	'$http',
	'$location',
	'$stateParams',
	'$state',
	'$window',
	'demographicService',
	'demographicsService',
	'providersService',
	'patientDetailStatusService',
	'securityService',
	'staticDataService',
	'referralDoctorsService',
	'user',

	function(
		$scope,
		$http,
		$location,
		$stateParams,
		$state,
		$window,
		demographicService,
		demographicsService,
		providersService,
		patientDetailStatusService,
		securityService,
		staticDataService,
		referralDoctorsService,
		user)
	{

		var controller = this;
		controller.page = {};

		// Global variables
		var posExtras = {};
		var hcParts = {};
		var phoneNum = {};
		var colorAttn = "#ffff99";
		var defPhTitle = "Check to set preferred contact number";
		var prefPhTitle = "Preferred contact number";
		var hin0;
		var ver0;
		var chartNo0;
		var cytolNum0;
		var referralDocNo0;
		var familyDocNo0;
		var sin0;
		var effDate0;
		var hcRenewDate0;
		var rosterDate0;
		var rosterTerminationDate0;
		var patientStatusDate0;
		var dateJoined0;
		var endDate0;
		var onWaitingListSinceDate0;
		var paperChartArchivedDate0;

		controller.properties = $scope.$parent.recordCtrl.properties;

		controller.init = function init()
		{
			demographicService.getDemographic($stateParams.demographicNo).then(
				function success(results)
				{
					controller.page.demo = results;
					controller.initDemographicVars();
					controller.checkAccess();

					// retrieve provider types for dropdown selection
					//TODO - are roles determined by security role or provider type?
					providersService.getBySecurityRole("doctor").then(
						function success(data) {
							controller.page.doctors = data;
						}
					);
					providersService.getBySecurityRole("nurse").then(
						function success(data) {
							controller.page.nurses = data;
						}
					);
					providersService.getBySecurityRole("midwife").then(
						function success(data) {
							controller.page.midwives = data;
						}
					);

					// retrieve contact lists for demographic
					demographicService.getDemographicContacts(controller.page.demo.demographicNo, "personal").then(
						function success(data) {
							controller.page.demoContacts = demoContactShow(data);
						}
					);
					demographicService.getDemographicContacts(controller.page.demo.demographicNo, "professional").then(
						function success(data) {
							controller.page.demoContactPros = demoContactShow(data);
						}
					);

					//show notes
					if (controller.page.demo.notes != null)
					{
						controller.page.demo.scrNotes = controller.page.demo.notes;
						if (/^<unotes>[\s\S]*/.test(controller.page.demo.scrNotes)) controller.page.demo.scrNotes = controller.page.demo.scrNotes.substring("<unotes>".length);
						if (/[\s\S]*<\/unotes>$/.test(controller.page.demo.scrNotes)) controller.page.demo.scrNotes = controller.page.demo.scrNotes.substring(0, controller.page.demo.scrNotes.lastIndexOf("</unotes>"));
					}

					//show referral doctor
					if (controller.page.demo.familyDoctor != null)
					{
						var referralDoc = controller.formatDocOutput(controller.page.demo.familyDoctor);
						controller.page.demo.scrReferralDocNo = referralDoc.number;
						controller.page.demo.scrReferralDoc = referralDoc.name;
					}

					//show family doctor
					if (controller.page.demo.familyDoctor2 != null)
					{
						var familyDoc = controller.formatDocOutput(controller.page.demo.familyDoctor2);
						controller.page.demo.scrFamilyDocNo = familyDoc.number;
						controller.page.demo.scrFamilyDoc = familyDoc.name;
					}

					if (controller.page.demo.extras != null)
					{
						controller.page.demo.extras = toArray(controller.page.demo.extras);
						for (var i = 0; i < controller.page.demo.extras.length; i++)
						{
							if (controller.page.demo.extras[i].key == "demo_cell") controller.page.demo.scrDemoCell = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "aboriginal") controller.page.demo.scrAboriginal = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "hPhoneExt") controller.page.demo.scrHPhoneExt = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "wPhoneExt") controller.page.demo.scrWPhoneExt = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "cytolNum") controller.page.demo.scrCytolNum = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "phoneComment") controller.page.demo.scrPhoneComment = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "paper_chart_archived") controller.page.demo.scrPaperChartArchived = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "paper_chart_archived_date") controller.page.demo.scrPaperChartArchivedDate = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "usSigned") controller.page.demo.scrUsSigned = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "privacyConsent") controller.page.demo.scrPrivacyConsent = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "informedConsent") controller.page.demo.scrInformedConsent = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "securityQuestion1") controller.page.demo.scrSecurityQuestion1 = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "securityAnswer1") controller.page.demo.scrSecurityAnswer1 = controller.page.demo.extras[i].value;
							else if (controller.page.demo.extras[i].key == "rxInteractionWarningLevel") controller.page.demo.scrRxInteractionLevel = controller.page.demo.extras[i].value;


							//record array position of extras by keys - to be used on saving
							posExtras[controller.page.demo.extras[i].key] = i;
						}
					}

					//show phone numbers with preferred check
					controller.page.demo.scrCellPhone = getPhoneNum(controller.page.demo.scrDemoCell);
					controller.page.demo.scrHomePhone = getPhoneNum(controller.page.demo.phone);
					controller.page.demo.scrWorkPhone = getPhoneNum(controller.page.demo.alternativePhone);

					//show waitingListNames
					if (controller.page.demo.waitingListNames != null)
					{
						if (controller.page.demo.waitingListNames.id != null)
						{ //only 1 entry, convert to array
							var tmp = {};
							tmp.id = controller.page.demo.waitingListNames.id;
							tmp.name = controller.page.demo.waitingListNames.name;
							tmp.groupNo = controller.page.demo.waitingListNames.groupNo;
							tmp.providerNo = controller.page.demo.waitingListNames.providerNo;
							tmp.createDate = controller.page.demo.waitingListNames.createDate;
							tmp.isHistory = controller.page.demo.waitingListNames.isHistory;
							controller.page.demo.waitingListNames = [tmp];
						}
					}


					controller.page.cellPhonePreferredMsg = defPhTitle;
					controller.page.homePhonePreferredMsg = defPhTitle;
					controller.page.workPhonePreferredMsg = defPhTitle;
					if (isPreferredPhone(controller.page.demo.scrDemoCell))
					{
						controller.page.demo.scrPreferredPhone = "C";
						controller.page.preferredPhoneNumber = controller.page.demo.scrCellPhone;
						controller.page.cellPhonePreferredMsg = prefPhTitle;
						controller.page.cellPhonePreferredColor = colorAttn;
					}
					else if (isPreferredPhone(controller.page.demo.phone))
					{
						controller.page.demo.scrPreferredPhone = "H";
						controller.page.preferredPhoneNumber = controller.page.demo.scrHomePhone;
						controller.page.homePhonePreferredMsg = prefPhTitle;
						controller.page.homePhonePreferredColor = colorAttn;
					}
					else if (isPreferredPhone(controller.page.demo.alternativePhone))
					{
						controller.page.demo.scrPreferredPhone = "W";
						controller.page.preferredPhoneNumber = controller.page.demo.scrWorkPhone;
						controller.page.workPhonePreferredMsg = prefPhTitle;
						controller.page.workPhonePreferredColor = colorAttn;
					}
					else
					{
						controller.page.preferredPhoneNumber = controller.page.demo.scrHomePhone;
					}

					controller.page.dataChanged = false;

					//get static lists to be selected
					controller.page.genders = staticDataService.getGenders();
					controller.page.titles = staticDataService.getTitles();
					controller.page.provinces = staticDataService.getProvinces();
					controller.page.countries = staticDataService.getCountries();
					controller.page.engFre = staticDataService.getEngFre();
					controller.page.spokenlangs = staticDataService.getSpokenLanguages();
					controller.page.rosterTermReasons = staticDataService.getRosterTerminationReasons();
					controller.page.securityQuestions = staticDataService.getSecurityQuestions();
					controller.page.rxInteractionLevels = staticDataService.getRxInteractionLevels();

					//get patient detail status
					patientDetailStatusService.getStatus($stateParams.demographicNo).then(
						function success(results)
						{
							controller.page.macPHRLoggedIn = results.macPHRLoggedIn;
							controller.page.macPHRIdsSet = results.macPHRIdsSet;
							controller.page.macPHRVerificationLevel = results.macPHRVerificationLevel;

							controller.page.integratorEnabled = results.integratorEnabled;
							controller.page.integratorOffline = results.integratorOffline;
							controller.page.integratorAllSynced = results.integratorAllSynced;

							controller.page.conformanceFeaturesEnabled = results.conformanceFeaturesEnabled;
							controller.page.workflowEnhance = results.workflowEnhance;
							controller.page.billregion = results.billregion;
							controller.page.defaultView = results.defaultView;
							controller.page.hospitalView = results.hospitalView;

							if (controller.page.integratorEnabled)
							{
								if (controller.page.integratorOffline)
								{
									controller.page.integratorStatusColor = "#ff5500";
									controller.page.integratorStatusMsg = "NOTE: Integrator is not available at this time";
								}
								else if (!controller.page.integratorAllSynced)
								{
									controller.page.integratorStatusColor = "#ff5500";
									controller.page.integratorStatusMsg = "NOTE: Integrated Community is not synced";
								}
							}

							controller.page.billingHistoryLabel = "Invoice List";
							if (controller.page.billregion == "ON") controller.page.billingHistoryLabel = "Billing History";
						},
						function error(errors)
						{
							console.log(errors);
						});

					//show patientStatusList & rosterStatusList values
					demographicsService.getStatusList("roster").then(
						function success(data)
						{
							controller.page.rosterStatusList = toArray(data);
							controller.page.rosterStatusList.unshift(
								{
									"value": "FS",
									"label": "FS - fee for service"
								});
							controller.page.rosterStatusList.unshift(
								{
									"value": "TE",
									"label": "TE - terminated"
								});
							controller.page.rosterStatusList.unshift(
								{
									"value": "NR",
									"label": "NR - not rostered"
								});
							controller.page.rosterStatusList.unshift(
								{
									"value": "RO",
									"label": "RO - rostered"
								});
						}
					);
					demographicsService.getStatusList("patient").then(
						function success(data)
						{
							controller.page.patientStatusList = toArray(data);
							controller.page.patientStatusList.unshift(
								{
									"value": "FI",
									"label": "FI - Fired"
								});
							controller.page.patientStatusList.unshift(
								{
									"value": "MO",
									"label": "MO - Moved"
								});
							controller.page.patientStatusList.unshift(
								{
									"value": "DE",
									"label": "DE - Deceased"
								});
							controller.page.patientStatusList.unshift(
								{
									"value": "IN",
									"label": "IN - Inactive"
								});
							controller.page.patientStatusList.unshift(
								{
									"value": "AC",
									"label": "AC - Active"
								});
						}
					);

					controller.formatDate("DobM"); //done on page load
					controller.formatDate("DobD"); //done on page load
					controller.page.demo.age = Juno.Common.Util.calcAge(controller.page.demo.dobYear, controller.page.demo.dobMonth, controller.page.demo.dobDay);
					controller.formatLastName(); //done on page load
					controller.formatFirstName(); //done on page load
					controller.setSwipeReady(); //done on page load
					controller.validateHCSave();
				},
				function error(errors)
				{
					alert('Error loading demographic: ', errors) // TODO: Display actual error message
				}
			);

			// controller.page.demo = demo;
		};

		controller.initDemographicVars = function initDemographicVars()
		{
			phoneNum["C"] = controller.page.demo.scrCellPhone;
			phoneNum["H"] = controller.page.demo.scrHomePhone;
			phoneNum["W"] = controller.page.demo.scrWorkPhone;
			phoneNum["HX"] = controller.page.demo.scrHPhoneExt;
			phoneNum["WX"] = controller.page.demo.scrWPhoneExt;
			hin0 = controller.page.demo.hin;
			ver0 = controller.page.demo.ver;
			chartNo0 = controller.page.demo.chartNo;
			cytolNum0 = controller.page.demo.scrCytolNum;
			referralDocNo0 = controller.page.demo.scrReferralDocNo;
			sin0 = controller.page.demo.sin;
			effDate0 = controller.page.demo.effDate;
			hcRenewDate0 = controller.page.demo.hcRenewDate;
			rosterDate0 = controller.page.demo.rosterDate;
			rosterTerminationDate0 = controller.page.demo.rosterTerminationDate;
			patientStatusDate0 = controller.page.demo.patientStatusDate;
			dateJoined0 = controller.page.demo.dateJoined;
			endDate0 = controller.page.demo.endDate;
			onWaitingListSinceDate0 = controller.page.demo.onWaitingListSinceDate;
			paperChartArchivedDate0 = controller.page.demo.scrPaperChartArchivedDate;
		};

		controller.checkAccess = function checkAccess()
		{
			//get access rights
			securityService.hasRight("_demographic", "r", controller.page.demo.demographicNo).then(
				function success(results)
				{
					controller.page.canRead = results;
				},
				function error(errors)
				{
					console.log(errors);
				});
			securityService.hasRight("_demographic", "u", controller.page.demo.demographicNo).then(
				function success(results)
				{
					controller.page.cannotChange = !results;
				},
				function error(errors)
				{
					console.log(errors);
				});

		};

		// Is there a shared location where this could be accessed from any controller? i.e. a utils file
		controller.isNaN = function(num)
		{
			return isNaN(num);
		};

		//disable click and keypress if user only has read-access
		controller.checkAction = function checkAction(event)
		{
			if (controller.page.cannotChange)
			{
				event.preventDefault();
				event.stopPropagation();
				controller.setSwipeReady();
			}
		};

		//----------------------//
		// on-screen operations //
		//----------------------//
		//monitor data changed
		$scope.$watch(function()
		{
			return controller.page.demo;
		}, function(newValue, oldValue)
		{
			if (newValue !== oldValue && angular.isDefined(oldValue) && angular.isDefined(newValue))
			{
				controller.page.dataChanged = true;
			}

		}, true);

		$window.onbeforeunload = function ()
		{
			/* Have to check if we are on the details page since the controller is
				not necessarily destroyed upon leaving the page
			*/
			if (controller.page.dataChanged === true && $state.current.name === 'record.details')
			{
				return 'You have unsaved patient data. Are you sure you want to leave?';
			}
		};

		$scope.$on('$destroy', function() {
			delete $window.onbeforeunload;
		});

		// Warn user about unsaved data before a state change
		$scope.$on("$stateChangeStart", function(event)
		{
			if (controller.page.dataChanged === true)
			{
				var discard = confirm("You have unsaved patient data. Are you sure you want to leave?");
				if (!discard)
				{
					event.preventDefault();
				} else {
					demographicService.getDemographic($stateParams.demographicNo).then(
						function success(results)
						{
							// TODO: Celebrate
						},
						function error(errors)
						{
							alert('Error loading demographic: ', errors) // TODO: Display actual error message
						}
					);
				
				}
			}
		});

		//format lastname, firstname
		controller.formatLastName = function formatLastName()
		{
			controller.page.demo.lastName = controller.page.demo.lastName.toUpperCase();
		};
		controller.formatFirstName = function formatFirstName()
		{
			controller.page.demo.firstName = controller.page.demo.firstName.toUpperCase();
		};


		// //calculate age
		// var now = new Date();
		// controller.calculateAge = function calculateAge()
		// {
		// 	controller.page.demo.age = now.getFullYear() - controller.page.demo.dobYear;
		// 	if (now.getMonth() < controller.page.demo.dobMonth - 1) controller.page.demo.age--;
		// 	else if (now.getMonth() == controller.page.demo.dobMonth - 1 && now.getDate() < controller.page.demo.dobDay) controller.page.demo.age--;
		// };
		//
		// controller.calculateAge(); //done on page load

		//set ready for swipe card
		controller.setSwipeReady = function setSwipeReady(status)
		{
			if (status == "off")
			{
				controller.page.readyForSwipe = "";
				controller.page.swipecardMsg = "Click for Card Swipe";
			}
			else if (status == "done")
			{
				controller.page.readyForSwipe = "btn-primary";
			}
			else
			{
				controller.page.readyForSwipe = "btn-success";
				controller.page.swipecardMsg = "Ready for Card Swipe";
				controller.page.swipecard = "";
			}
		};

		//Health card verification
		controller.healthCardHandler = function healthCardHandler(keycode)
		{
			if (keycode == 13)
			{ //carriage-return
				var swipeCardData = controller.page.swipecard;
				controller.page.swipecard = "";

				if (swipeCardData.substring(0, 3) == "%E?")
				{ //swipe card error
					alert("Error reading card");
				}
				else
				{
					if (swipeCardData.substring(2, 8) == "610054")
					{ //Ontario
						hcParts["issuer"] = "ON";
						hcParts["hin"] = swipeCardData.substring(8, 18);

						var namePos = swipeCardData.indexOf("^") + 1;
						var endNamePos = swipeCardData.indexOf("^", namePos);
						hcParts["fullName"] = swipeCardData.substring(namePos, endNamePos);
						hcParts["lastName"] = hcParts["fullName"].split("/")[0];
						hcParts["firstName"] = hcParts["fullName"].split("/")[1].trim();

						hcParts["sex"] = swipeCardData.substring(endNamePos + 8, endNamePos + 9);
						hcParts["dob"] = swipeCardData.substring(endNamePos + 9, endNamePos + 17);
						hcParts["hinExp"] = swipeCardData.substring(endNamePos + 1, endNamePos + 5) + hcParts["dob"].substring(6, 8);
						hcParts["hinVer"] = swipeCardData.substring(endNamePos + 17, endNamePos + 19);
						hcParts["firstNameShort"] = swipeCardData.substring(endNamePos + 19, endNamePos + 24);
						hcParts["issueDate"] = swipeCardData.substring(endNamePos + 24, endNamePos + 30);
						hcParts["lang"] = swipeCardData.substring(endNamePos + 30, endNamePos + 32);

						if (!isNumber(hcParts["dob"]))
						{
							hcParts["dob"] = null;
							hcParts["hinExp"] = null;
						}
						if (!isNumber(hcParts["hinExp"]))
						{
							hcParts["hinExp"] = null;
						}
						if (!isNumber(hcParts["issueDate"]))
						{
							hcParts["issueDate"] = null;
						}

						controller.setSwipeReady("done");
						controller.healthCardUpdateDemographics();
					}
					else
					{
						alert("Not Ontario Health Card");
					}
					controller.validateHC(); //Run HCValidation
				}
			}
		};

		controller.healthCardUpdateDemographics = function healthCardUpdateDemographics()
		{
			var now = new Date();
			if (controller.page.demo.hcType != hcParts["issuer"])
			{
				controller.page.demo.hcType = hcParts["issuer"];
				controller.page.hcTypeColor = colorAttn;
			}
			if (controller.page.demo.lastName != hcParts["lastName"])
			{
				controller.page.demo.lastName = hcParts["lastName"];
				controller.page.lastNameColor = colorAttn;
			}
			if (controller.page.demo.firstName != hcParts["firstName"])
			{
				controller.page.demo.firstName = hcParts["firstName"];
				controller.page.firstNameColor = colorAttn;
			}
			if (isNumber(hcParts["hin"]) && controller.page.demo.hin != hcParts["hin"])
			{
				controller.page.demo.hin = hcParts["hin"];
				controller.page.hinColor = colorAttn;
			}
			if (controller.page.demo.ver != hcParts["hinVer"])
			{
				controller.page.demo.ver = hcParts["hinVer"];
				controller.page.verColor = colorAttn;
			}
			var hcSex = hcParts["sex"] == 1 ? "M" : (hcParts["sex"] == 2 ? "F" : null);
			if (hcSex != null && controller.page.demo.sex != hcSex)
			{
				controller.page.demo.sex = hcSex;
				controller.page.sexColor = colorAttn;
			}
			var dateParts = {};
			if (hcParts["dob"] != null)
			{
				dateParts["year"] = hcParts["dob"].substring(0, 4);
				dateParts["month"] = hcParts["dob"].substring(4, 6);
				dateParts["day"] = hcParts["dob"].substring(6);
				if (controller.page.demo.dobYear != dateParts["year"])
				{
					controller.page.demo.dobYear = dateParts["year"];
					controller.page.dobYearColor = colorAttn;
				}
				if (controller.page.demo.dobMonth != dateParts["month"])
				{
					controller.page.demo.dobMonth = dateParts["month"];
					controller.page.dobMonthColor = colorAttn;
				}
				if (controller.page.demo.dobDay != dateParts["day"])
				{
					controller.page.demo.dobDay = dateParts["day"];
					controller.page.dobDayColor = colorAttn;
				}
			}
			if (hcParts["issueDate"] != null)
			{
				var swipeDate = "20" + hcParts["issueDate"].substring(0, 2) + "-" + hcParts["issueDate"].substring(2, 4) + "-" + hcParts["issueDate"].substring(4);
				if (controller.page.demo.effDate != swipeDate)
				{
					controller.page.demo.effDate = swipeDate;
					controller.page.effDateColor = colorAttn;
				}
			}
			if (hcParts["hinExp"] != null)
			{
				var swipeDate = "20" + hcParts["hinExp"].substring(0, 2) + "-" + hcParts["hinExp"].substring(2, 4) + "-" + hcParts["hinExp"].substring(4);
				if (controller.page.demo.hcRenewDate != swipeDate)
				{
					controller.page.demo.hcRenewDate = swipeDate;
					controller.page.hcRenewDateColor = colorAttn;
				}
				var hinExpDate = buildDate("20" + hcParts["hinExp"].substring(0, 2), hcParts["hinExp"].substring(2, 4), hcParts["hinExp"].substring(4));
				if (hinExpDate != null && now > hinExpDate)
				{
					alert("This health card has expired!");
					controller.page.hcRenewDateColor = colorAttn;
				}
			}
		}

		//HCValidation
		controller.validateHC = function validateHC()
		{
			if (controller.page.demo.hcType != "ON" || controller.page.demo.hin == null || controller.page.demo.hin == "") return;
			if (controller.page.demo.ver == null) controller.page.demo.ver = "";
			patientDetailStatusService.validateHC(controller.page.demo.hin, controller.page.demo.ver).then(
				function success(results)
				{
					if (results.valid == null)
					{
						controller.page.HCValidation = "n/a";
						controller.page.swipecardMsg = "Done Health Card Action";
					}
					else
					{
						controller.page.HCValidation = results.valid ? "valid" : "invalid";
						controller.page.swipecardMsg = results.responseDescription + " (" + results.responseCode + ")";
					}
				},
				function error(errors)
				{
					console.log(errors);
				});
		}

		//manage hin/hinVer entries
		controller.checkHin = function checkHin()
		{
			if (controller.page.demo.hcType == "ON" && controller.page.demo.hin != null && controller.page.demo.hin != "")
			{
				if (controller.page.demo.hin.length > 10) controller.page.demo.hin = hin0;
				if (!isNumber(controller.page.demo.hin)) controller.page.demo.hin = hin0;
			}
			hin0 = controller.page.demo.hin;
			controller.page.HCValidation = null;
		}
		controller.checkHinVer = function checkHinVer()
		{
			if (controller.page.demo.hcType == "ON")
			{
				if (controller.page.demo.ver.length > 2) controller.page.demo.ver = ver0;
				if (!(/^[a-zA-Z()]*$/.test(controller.page.demo.ver))) controller.page.demo.ver = ver0;
				controller.page.demo.ver = controller.page.demo.ver.toUpperCase();
			}
			ver0 = controller.page.demo.ver;
		}

		//manage date entries
		controller.checkDate = function checkDate(id)
		{
			if (id == "DobY")
			{
				controller.page.demo.dobYear = checkYear(controller.page.demo.dobYear);
			}
			else if (id == "DobM")
			{
				controller.page.demo.dobMonth = checkMonth(controller.page.demo.dobMonth);
			}
			else if (id == "DobD")
			{
				controller.page.demo.dobDay = checkDay(controller.page.demo.dobDay, controller.page.demo.dobMonth, controller.page.demo.dobYear);
			}
			console.log('MONTH: ', controller.page.demo.dobMonth);
			controller.page.demo.age = Juno.Common.Util.calcAge(controller.page.demo.dobYear, controller.page.demo.dobMonth, controller.page.demo.dobDay);
		};

		controller.formatDate = function formatDate(id)
		{
			// controller.calculateAge();

			if (id == "DobM" && controller.page.demo.dobMonth != null && String(controller.page.demo.dobMonth).length == 1)
			{
				controller.page.demo.dobMonth = "0" + controller.page.demo.dobMonth;
			}
			else if (id == "DobD" && controller.page.demo.dobDay != null && String(controller.page.demo.dobDay).length == 1)
			{
				controller.page.demo.dobDay = "0" + controller.page.demo.dobDay;
			}
		};

		//check Patient Status if endDate is entered
		controller.checkPatientStatus = function checkPatientStatus()
		{
			var now = new Date();
			if (controller.page.demo.patientStatus == "AC")
			{
				if (controller.page.demo.endDate != null && controller.page.demo.endDate != "")
				{
					if (dateValid(controller.page.demo.endDate))
					{
						var datePart = controller.page.demo.endDate.split("-");
						var endDate = new Date(datePart[0], datePart[1] - 1, datePart[2]);
						if (now > endDate)
						{
							alert("Patient Status cannot be Active after End Date.");
							return false;
						}
					}
				}
			}
			return true;
		}

		controller.isPostalComplete = function isPostalComplete()
		{
			var province = controller.page.demo.address.province;
			var postal = controller.page.demo.address.postal;
			// If Canadian province is selected, proceed with validation
			if (postal !== null && province !== null && province !== "OT" && province.indexOf("US") !== 0)
			{
				if (controller.isPostalValid())
				{
					return true;
				}

				controller.resetEditState();
				return false;
			}

			return true;
		};

		controller.isPostalValid = function isPostalValid()
		{
			var postal = controller.page.demo.address.postal.replace(/\s/g, ""); // Trim whitespace

			// If postal code is an empty string, set it to null and continue
			if(postal.length === 0)
			{
				controller.page.demo.address.postal = null;
				return true;
			}

			var regex = new RegExp(/^[A-Za-z]\d[A-Za-z]\d[A-Za-z]\d$/); // Match to Canadian postal code standard (minus the space)
			if (regex.test(postal))
			{
				// Format postal code to Canadian standard
				controller.page.demo.address.postal = postal.substring(0, 3) + " " + postal.substring(3);
				return true;
			}else {
				alert("Invalid/Incomplete Postal Code"); // TODO: Display proper error message
				return false;
			}
		};

		//check email
		controller.checkEmail = function checkEmail()
		{
			if (controller.page.demo.email == null || controller.page.demo.email == "") return true;

			var regex = /^[^@]+@[^@]+$/;
			if (regex.test(controller.page.demo.email))
			{
				var email = controller.page.demo.email.split("@");

				regex = /^[!#%&'=`~\{}\-\$\*\+\/\?\^\|\w]+(\.[!#%&'=`~\{}\-\$\*\+\/\?\^\|\w]+)*$/;
				if (regex.test(email[0]))
				{ //test email local address part

					regex = /^[^\W_]+(([^\W_]|-)+[^\W_]+)*(\.[^\W_]+(([^\W_]|-)+[^\W_]+)*)*\.[^\W_]{2,3}$/;
					if (regex.test(email[1])) return true; //test email address domain part
				}
			}
			alert("Invalid email address");
			return false;
		}

		//check Chart No (length)
		controller.checkChartNo = function checkChartNo()
		{
			if (controller.page.demo.chartNo == null || controller.page.demo.chartNo == "")
			{
				chartNo0 = controller.page.demo.chartNo;
				return;
			}
			if (controller.page.demo.chartNo.length > 10) controller.page.demo.chartNo = chartNo0;
			else chartNo0 = controller.page.demo.chartNo;
		}

		//check Cytology Number
		controller.checkCytoNum = function checkCytoNum()
		{
			if (controller.page.demo.scrCytolNum == null || controller.page.demo.scrCytolNum == "")
			{
				cytolNum0 = controller.page.demo.scrCytolNum;
				return;
			}
			if (!isNumber(controller.page.demo.scrCytolNum)) controller.page.demo.scrCytolNum = cytolNum0;
			else cytolNum0 = controller.page.demo.scrCytolNum;
		};

		//check Referral Doctor No
		controller.checkReferralDocNo = function checkReferralDocNo()
		{
			var isValid = controller.validateDocNo(controller.page.demo.scrReferralDocNo, true);
			if (isValid)
				referralDocNo0 = controller.page.demo.scrReferralDocNo;
			else
				controller.page.demo.scrReferralDocNo = referralDocNo0;
		};

		//check Family Doctor No
		controller.checkFamilyDocNo = function checkFamilyDocNo()
		{
			var isValid = controller.validateDocNo(controller.page.demo.scrFamilyDocNo, true);
			if (isValid)
				familyDocNo0 = controller.page.demo.scrFamilyDocNo;
			else
				controller.page.demo.scrFamilyDocNo = familyDocNo0;
		};

		controller.validateDocNo = function validateDocNo(docNo, quiet)
		{
			if (docNo == null || docNo === "" || (isNumber(docNo) && docNo.length < 10))
				return true;

			if (!quiet)
				alert("Invalid Doctor Number");

			return false;
		};

		//check SIN
		controller.checkSin = function checkSin()
		{
			if (controller.page.demo.sin == null || controller.page.demo.sin == "")
			{
				sin0 = controller.page.demo.sin;
				return;
			}

			var sin = controller.page.demo.sin.replace(/\s/g, "");
			if (!isNumber(sin) || sin.length > 9)
			{
				controller.page.demo.sin = sin0;
			}
			else
			{
				if (sin.length > 6)
				{
					controller.page.demo.sin = sin.substring(0, 3) + " " + sin.substring(3, 6) + " " + sin.substring(6);
				}
				else if (sin.length > 3)
				{
					controller.page.demo.sin = sin.substring(0, 3) + " " + sin.substring(3);
				}
				sin0 = controller.page.demo.sin;
			}
		}

		controller.validateSin = function validateSin()
		{
			if (controller.page.demo.sin == null || controller.page.demo.sin == "") return true;

			var sin = controller.page.demo.sin.replace(/\s/g, "");
			if (isNumber(sin) && sin.length == 9)
			{
				var sinNumber = 0;
				for (var i = 0; i < sin.length; i++)
				{
					var n = Number(sin.charAt(i)) * (i % 2 + 1);
					sinNumber += n % 10 + Math.floor(n / 10);
				}
				if (sinNumber % 10 == 0) return true;
			}
			alert("Invalid SIN #");
			return false;
		}

		//prevent manual input dates
		controller.preventManualEffDate = function preventManualEffDate()
		{
			if (controller.page.demo.effDate == null) controller.page.demo.effDate = effDate0;
			else effDate0 = controller.page.demo.effDate;
		}
		controller.preventManualHcRenewDate = function preventManualHcRenewDate()
		{
			if (controller.page.demo.hcRenewDate == null) controller.page.demo.hcRenewDate = hcRenewDate0;
			else hcRenewDate0 = controller.page.demo.hcRenewDate;
		}
		controller.preventManualRosterDate = function preventManualRosterDate()
		{
			if (controller.page.demo.rosterDate == null) controller.page.demo.rosterDate = rosterDate0;
			else rosterDate0 = controller.page.demo.rosterDate;
		}
		controller.preventManualRosterTerminationDate = function preventManualRosterTerminationDate()
		{
			if (controller.page.demo.rosterTerminationDate == null) controller.page.demo.rosterTerminationDate = rosterTerminationDate0;
			else rosterTerminationDate0 = controller.page.demo.rosterTerminationDate;
		}
		controller.preventManualPatientStatusDate = function preventManualPatientStatusDate()
		{
			if (controller.page.demo.patientStatusDate == null) controller.page.demo.patientStatusDate = patientStatusDate0;
			else patientStatusDate0 = controller.page.demo.patientStatusDate;
		}
		controller.preventManualDateJoined = function preventManualDateJoined()
		{
			if (controller.page.demo.dateJoined == null) controller.page.demo.dateJoined = dateJoined0;
			else dateJoined0 = controller.page.demo.dateJoined;
		}
		controller.preventManualEndDate = function preventManualEndDate()
		{
			if (controller.page.demo.endDate == null) controller.page.demo.endDate = endDate0;
			else endDate0 = controller.page.demo.endDate;
		}
		controller.preventManualOnWaitingListSinceDate = function preventManualOnWaitingListSinceDate()
		{
			if (controller.page.demo.onWaitingListSinceDate == null) controller.page.demo.onWaitingListSinceDate = onWaitingListSinceDate0;
			else onWaitingListSinceDate0 = controller.page.demo.onWaitingListSinceDate;
		}
		controller.preventManualPaperChartArchivedDate = function preventManualPaperChartArchivedDate()
		{
			if (controller.page.demo.scrPaperChartArchivedDate == null) controller.page.demo.scrPaperChartArchivedDate = paperChartArchivedDate0;
			else paperChartArchivedDate0 = controller.page.demo.scrPaperChartArchivedDate;
		}

		//show/hide items
		// TODO: FIGURE OUT BETTER WAY TO SYNCHRONIZE THIS WITH DEMOGRAPHIC LOADING
		controller.isRosterTerminated = function isRosterTerminated()
		{
			if(controller.page.demo !== null && controller.page.demo !== undefined)
				return (controller.page.demo.rosterStatus === "TE");

			return null;
		};
		controller.showReferralDocList = function showReferralDocList()
		{
			controller.page.showReferralDocList = !controller.page.showReferralDocList;
		};

		controller.searchReferralDocsName = function searchReferralDocsName(searchName)
		{
			return controller.searchReferralDocs(searchName, null);
		};
		controller.searchReferralDocsRefNo = function searchReferralDocsRefNo(searchRefNo)
		{
			return controller.searchReferralDocs(null, searchRefNo);
		};
		controller.searchReferralDocs = function searchReferralDocs(searchName, searchRefNo)
		{
			return referralDoctorsService.searchReferralDoctors(searchName, searchRefNo, 1, 10).then(
				function success(results) {

					var referralDoctors = new Array(results.length);
					for (var i = 0; i < results.length; i++)
					{
						var displayName = results[i].lastName + ', ' + results[i].firstName;
						referralDoctors[i] = {
							label: displayName,
							name: displayName,
							referralNo: results[i].referralNo
						};
						if (results[i].specialtyType != null && results[i].specialtyType != "")
						{
							referralDoctors[i].label += " [" + results[i].specialtyType + "]";
						}
					}
					return referralDoctors;
				},
				function failure(errors) {
					return [];
				}
			);
		};
		controller.chooseReferralDoc = function chooseReferralDoc(item, model, label)
		{
			controller.page.demo.scrReferralDocNo = item.referralNo;
			controller.page.demo.scrReferralDoc = item.name;
			controller.checkReferralDocNo();
		};
		controller.chooseFamilyDoc = function chooseFamilyDoc(item, model, label)
		{
			controller.page.demo.scrFamilyDocNo = item.referralNo;
			controller.page.demo.scrFamilyDoc = item.name;
			controller.checkFamilyDocNo();
		};
		controller.showAddNewRosterStatus = function showAddNewRosterStatus()
		{
			controller.page.showAddNewRosterStatus = !controller.page.showAddNewRosterStatus;
			controller.page.newRosterStatus = null;
		};
		controller.showAddNewPatientStatus = function showAddNewPatientStatus()
		{
			controller.page.showAddNewPatientStatus = !controller.page.showAddNewPatientStatus;
			controller.page.newPatientStatus = null;
		};

		//add new Roster Status
		controller.addNewRosterStatus = function addNewRosterStatus()
		{
			if (controller.page.newRosterStatus != null && controller.page.newRosterStatus != "")
			{
				controller.page.rosterStatusList.push(
				{
					"value": controller.page.newRosterStatus,
					"label": controller.page.newRosterStatus
				});
				controller.page.demo.rosterStatus = controller.page.newRosterStatus;
			}
			controller.showAddNewRosterStatus();
		}

		//add new Patient Status
		controller.addNewPatientStatus = function addNewPatientStatus()
		{
			if (controller.page.newPatientStatus != null && controller.page.newPatientStatus != "")
			{
				controller.page.patientStatusList.push(
				{
					"value": controller.page.newPatientStatus,
					"label": controller.page.newPatientStatus
				});
				controller.page.demo.patientStatus = controller.page.newPatientStatus;
			}
			controller.showAddNewPatientStatus();
		}

		//check phone numbers
		controller.checkPhone = function checkPhone(type)
		{
			if (type == "C")
			{
				if (invalidPhoneNumber(controller.page.demo.scrCellPhone)) controller.page.demo.scrCellPhone = phoneNum["C"];
				else phoneNum["C"] = controller.page.demo.scrCellPhone;
			}
			else if (type == "H")
			{
				if (invalidPhoneNumber(controller.page.demo.scrHomePhone)) controller.page.demo.scrHomePhone = phoneNum["H"];
				else phoneNum["H"] = controller.page.demo.scrHomePhone;
			}
			else if (type == "W")
			{
				if (invalidPhoneNumber(controller.page.demo.scrWorkPhone)) controller.page.demo.scrWorkPhone = phoneNum["W"];
				else phoneNum["W"] = controller.page.demo.scrWorkPhone;
			}
			else if (type == "HX" && controller.page.demo.scrHPhoneExt != null && controller.page.demo.scrHPhoneExt != "")
			{
				if (!isNumber(controller.page.demo.scrHPhoneExt)) controller.page.demo.scrHPhoneExt = phoneNum["HX"];
				else phoneNum["HX"] = controller.page.demo.scrHPhoneExt;
			}
			else if (type == "WX" && controller.page.demo.scrWPhoneExt != null && controller.page.demo.scrWPhoneExt != "")
			{
				if (!isNumber(controller.page.demo.scrWPhoneExt)) controller.page.demo.scrWPhoneExt = phoneNum["WX"];
				else phoneNum["WX"] = controller.page.demo.scrWPhoneExt;
			}
		}

		//set preferred contact phone number
		controller.setPreferredPhone = function setPreferredPhone()
		{
			controller.page.cellPhonePreferredMsg = defPhTitle;
			controller.page.cellPhonePreferredColor = "";
			controller.page.homePhonePreferredMsg = defPhTitle;
			controller.page.homePhonePreferredColor = "";
			controller.page.workPhonePreferredMsg = defPhTitle;
			controller.page.workPhonePreferredColor = "";

			if (controller.page.demo.scrPreferredPhone == "C")
			{
				controller.page.preferredPhoneNumber = controller.page.demo.scrCellPhone;
				controller.page.cellPhonePreferredMsg = prefPhTitle;
				controller.page.cellPhonePreferredColor = colorAttn;
			}
			else if (controller.page.demo.scrPreferredPhone == "H")
			{
				controller.page.preferredPhoneNumber = controller.page.demo.scrHomePhone;
				controller.page.homePhonePreferredMsg = prefPhTitle;
				controller.page.homePhonePreferredColor = colorAttn;
			}
			else if (controller.page.demo.scrPreferredPhone == "W")
			{
				controller.page.preferredPhoneNumber = controller.page.demo.scrWorkPhone;
				controller.page.workPhonePreferredMsg = prefPhTitle;
				controller.page.workPhonePreferredColor = colorAttn;
			}
		}

		//disable set-preferred if phone number empty
		controller.isPhoneVoid = function isPhoneVoid(phone)
		{
			return (phone == null || phone == "");
		}

		//show enrollment history (roster staus history)
		controller.showEnrollmentHistory = function showEnrollmentHistory()
		{
			var url = "../demographic/EnrollmentHistory.jsp?demographicNo=" + controller.page.demo.demographicNo;
			window.open(url, "enrollmentHistory", "width=650, height=1000");
		}

		//upload photo
		controller.launchPhoto = function launchPhoto()
		{
			var url = "../casemgmt/uploadimage.jsp?demographicNo=" + controller.page.demo.demographicNo;
			window.open(url, "uploadWin", "width=500, height=300");
		}

		//manage contacts
		controller.manageContacts = function manageContacts()
		{
			var discard = true;
			if (controller.page.dataChanged > 0)
			{
				discard = confirm("You may have unsaved data. Are you sure to leave?");
			}
			if (discard)
			{
				var url = "../demographic/Contact.do?method=manage&demographic_no=" + controller.page.demo.demographicNo;
				window.open(url, "ManageContacts", "width=960, height=700");
			}
		}

		//print buttons
		controller.printLabel = function printLabel(label)
		{
			var url = null;
			if (label == "PDFLabel") url = "../demographic/printDemoLabelAction.do?appointment_no=null&demographic_no=" + controller.page.demo.demographicNo;
			else if (label == "PDFAddress") url = "../demographic/printDemoAddressLabelAction.do?demographic_no=" + controller.page.demo.demographicNo;
			else if (label == "PDFChart") url = "../demographic/printDemoChartLabelAction.do?demographic_no=" + controller.page.demo.demographicNo;
			else if (label == "PrintLabel") url = "../demographic/demographiclabelprintsetting.jsp?demographic_no=" + controller.page.demo.demographicNo;
			else if (label == "ClientLab") url = "../demographic/printClientLabLabelAction.do?demographic_no=" + controller.page.demo.demographicNo;
			window.open(url, "Print", "width=960, height=700");
		}

		//integrator buttons
		controller.integratorDo = function integratorDo(func)
		{
			var url = null;
			if (func == "ViewCommunity") url = "../admin/viewIntegratedCommunity.jsp";
			else if (func == "Linking") url = "../integrator/manage_linked_clients.jsp?demographicId=" + controller.page.demo.demographicNo;
			else if (func == "Compare") url = "../demographic/DiffRemoteDemographics.jsp?demographicId=" + controller.page.demo.demographicNo;
			else if (func == "Update") url = "../demographic/copyLinkedDemographicInfoAction.jsp?displaymode=edit&dboperation=search_detail&demographicId=" + controller.page.demo.demographicNo + "&demographic_no=" + controller.page.demo.demographicNo;
			else if (func == "SendNote") url = "../demographic/followUpSelection.jsp?demographicId=" + controller.page.demo.demographicNo;
			window.open(url, "Integrator", "width=960, height=700");
		}

		//MacPHR buttons
		controller.macPHRDo = function macPHRDo(func)
		{
			var url = null;
			if (func == "Register")
			{
				if (!controller.page.macPHRLoggedIn)
				{
					alert("Please login to PHR first");
					return;
				}
				url = "../phr/indivo/RegisterIndivo.jsp?demographicNo=" + controller.page.demo.demographicNo;
			}
			else if (func == "SendMessage")
			{
				url = "../phr/PhrMessage.do?method=createMessage&providerNo=" + user.providerNo + "&demographicNo=" + controller.page.demo.demographicNo;
			}
			else if (func == "ViewRecord")
			{
				url = "../demographic/viewPhrRecord.do?demographic_no=" + controller.page.demo.demographicNo;
			}
			else if (func == "Verification")
			{
				url = "../phr/PHRVerification.jsp?demographic_no=" + controller.page.demo.demographicNo;
			}
			window.open(url, "MacPHR", "width=960, height=700");
		}

		//appointment buttons
		controller.appointmentDo = function appointmentDo(func)
		{
			var url = null;
			if (func == "ApptHistory") url = "../demographic/demographiccontrol.jsp?displaymode=appt_history&dboperation=appt_history&limit1=0&limit2=25&orderby=appttime&demographic_no=" + controller.page.demo.demographicNo + "&last_name=" + encodeURI(controller.page.demo.lastName) + "&first_name=" + encodeURI(controller.page.demo.firstName);
			else if (func == "WaitingList") url = "../oscarWaitingList/SetupDisplayPatientWaitingList.do?demographic_no=" + controller.page.demo.demographicNo;
			window.open(url, "Appointment", "width=960, height=700");
		}

		controller.isClinicaidBilling = function isClinicaidBilling()
		{
			return controller.page.billregion == "CLINICAID";
		}

		//billing buttons
		controller.billingDo = function billingDo(func)
		{
			var now = new Date();
			var url = null;
			if (func == "BillingHistory")
			{
				if (controller.page.billregion == "CLINICAID")
				{
					url = "../billing.do?billRegion=CLINICAID&action=invoice_reports&patient_remote_id=" + controller.page.demo.demographicNo;
				}
				else if (controller.page.billregion == "ON")
				{
					url = "../billing/CA/ON/billinghistory.jsp?demographic_no=" + controller.page.demo.demographicNo + "&last_name=" + encodeURI(controller.page.demo.lastName) + "&first_name=" + encodeURI(controller.page.demo.firstName) + "&orderby=appointment_date&displaymode=appt_history&dboperation=appt_history&limit1=0&limit2=10";
				}
				else
				{
					url = "../billing/CA/BC/billcontroller.page.jsp?lastName=" + encodeURI(controller.page.demo.lastName) + "&firstName=" + encodeURI(controller.page.demo.firstName) + "&filterPatient=true&demographicNo=" + controller.page.demo.demographicNo;
				}
			}
			else if (func == "CreateInvoice")
			{
				url = "../billing.do?billRegion=" + controller.page.billregion + "&billForm=" + controller.page.defaultView + "&hotclick=&appointment_no=0&demographic_name=" + encodeURI(controller.page.demo.lastName) + encodeURI(",") + encodeURI(controller.page.demo.firstName) + "&demographic_no=" + controller.page.demo.demographicNo + "&providerview=" + controller.page.demo.providerNo + "&user_no=" + user.providerNo + "&apptProvider_no=none&appointment_date=" + now.getFullYear + "-" + (now.getMonth() + 1) + "-" + now.getDate() + "&start_time=00:00:00&bNewForm=1&status=t";
			}
			else if (func == "FluBilling")
			{
				url = "../billing/CA/ON/specialtyBilling/fluBilling/addFluBilling.jsp?function=demographic&functionid=" + controller.page.demo.demographicNo + "&creator=" + user.providerNo + "&demographic_name=" + encodeURI(controller.page.demo.lastName) + encodeURI(",") + encodeURI(controller.page.demo.firstName) + "&hin=" + controller.page.demo.hin + controller.page.demo.ver + "&demo_sex=" + controller.page.demo.sex + "&demo_hctype=" + controller.page.demo.hcType + "&rd=" + encodeURI(controller.page.demo.scrReferralDoc) + "&rdohip=" + controller.page.demo.scrReferralDocNo + "&dob=" + controller.page.demo.dobYear + controller.page.demo.dobMonth + controller.page.demo.dobDay + "&mrp=" + controller.page.demo.providerNo;
			}
			else if (func == "HospitalBilling")
			{
				url = "../billing/CA/ON/billingShortcutPg1.jsp?billRegion=" + controller.page.billregion + "&billForm=" + encodeURI(controller.page.hospitalView) + "&hotclick=&appointment_no=0&demographic_name=" + encodeURI(controller.page.demo.lastName) + encodeURI(",") + encodeURI(controller.page.demo.firstName) + "&demographic_no=" + controller.page.demo.demographicNo + "&providerview=" + controller.page.demo.providerNo + "&user_no=" + user.providerNo + "&apptProvider_no=none&appointment_date=" + now.getFullYear + "-" + (now.getMonth() + 1) + "-" + now.getDate() + "&start_time=00:00:00&bNewForm=1&status=t";
			}
			else if (func == "AddBatchBilling")
			{
				url = "../billing/CA/ON/addBatchBilling.jsp?demographic_no=" + controller.page.demo.demographicNo + "&creator=" + user.providerNo + "&demographic_name=" + encodeURI(controller.page.demo.lastName) + encodeURI(",") + encodeURI(controller.page.demo.firstName) + "&hin=" + controller.page.demo.hin + controller.page.demo.ver + "&dob=" + controller.page.demo.dobYear + controller.page.demo.dobMonth + controller.page.demo.dobDay;
			}
			else if (func == "AddINR")
			{
				url = "../billing/CA/ON/inr/addINRbilling.jsp?function=demographic&functionid=" + controller.page.demo.demographicNo + "&creator=" + user.providerNo + "&demographic_name=" + encodeURI(controller.page.demo.lastName) + encodeURI(",") + encodeURI(controller.page.demo.firstName) + "&hin=" + controller.page.demo.hin + controller.page.demo.ver + "&dob=" + controller.page.demo.dobYear + controller.page.demo.dobMonth + controller.page.demo.dobDay;
			}
			else if (func == "BillINR")
			{
				url = "../billing/CA/ON/inr/reportINR.jsp?provider_no=" + user.providerNo;
			}
			window.open(url, "Billing", "width=960, height=700");
		}

		//export demographic
		controller.exportDemographic = function exportDemographic()
		{
			var url = "../demographic/demographicExport.jsp?demographicNo=" + controller.page.demo.demographicNo;
			window.open(url, "DemographicExport", "width=960, height=700");
		}

		controller.formatDocOutput = function formatDocOutput(value)
		{
			var number, name;
			var begin = value.indexOf("<rdohip>") + "<rdohip>".length;
			var end = value.indexOf("</rdohip>");
			if (end > begin && end >= 0 && begin >= 0) number = value.substring(begin, end);

			begin = value.indexOf("<rd>") + "<rd>".length;
			end = value.indexOf("</rd>");
			if (end > begin && end >= 0 && begin >= 0) name = value.substring(begin, end);

			return {"number": number, "name": name};
		};

		controller.formatDocInput = function formatDocInput(name, number)
		{
			var docNo = "<rdohip></rdohip>";
			var doc = "<rd></rd>";
			if (number != null && number !== "")
			{
				docNo = "<rdohip>" + number + "</rdohip>";
			}
			if (name != null && name !== "")
			{
				doc = "<rd>" + name + "</rd>";
			}
			return docNo + doc;
		};

		//HCValidation on open & save
		controller.validateHCSave = function validateHCSave(doSave)
		{
			if (controller.page.demo.hin == null || controller.page.demo.hin == "")
			{
				if (doSave) controller.save();
			}
			else
			{
				patientDetailStatusService.isUniqueHC(controller.page.demo.hin, controller.page.demo.demographicNo).then(
					function success(results)
					{
						if (!results.success)
						{
							alert("HIN is already in use!");
						}
						else if (controller.page.demo.hcType != "ON")
						{
							if (doSave) controller.save();
						}
						else
						{
							if (controller.page.demo.ver == null) controller.page.demo.ver = "";
							patientDetailStatusService.validateHC(controller.page.demo.hin, controller.page.demo.ver).then(
								function success(results)
								{
									if (results.valid == null)
									{
										controller.page.HCValidation = "n/a";
									}
									else if (!results.valid)
									{
										alert("Health Card Validation failed: " + results.responseDescription + " (" + results.responseCode + ")");
										doSave = false;
									}
									if (doSave) controller.save();
								},
								function error(errors)
								{
									console.log(errors);
								});
						}
					},
					function error(errors)
					{
						console.log(errors);
					});
			}
		};

		//-----------------//
		// save operations //
		//-----------------//
		controller.save = function save()
		{
			controller.page.saving = true;

			//check required fields
			if (controller.page.demo.lastName == null || controller.page.demo.lastName == "")
			{
				alert("Last Name is required");
				return;
			}
			else if (controller.page.demo.firstName == null || controller.page.demo.firstName == "")
			{
				alert("First Name is required");
				return;
			}
			else if (controller.page.demo.sex == null || controller.page.demo.sex == "")
			{
				alert("Sex is required");
				return;
			}
			else if (dateEmpty(controller.page.demo.dobYear, controller.page.demo.dobMonth, controller.page.demo.dobDay))
			{
				alert("Date of Birth is required");
				return;
			}

			//validate field inputs
			controller.page.demo.dateOfBirth = buildDate(controller.page.demo.dobYear, controller.page.demo.dobMonth, controller.page.demo.dobDay);
			if (controller.page.demo.dateOfBirth == null)
			{
				alert("Invalid Date of Birth");
				return;
			}
			if (!controller.checkPatientStatus()) return;
			if (!controller.isPostalComplete()) return;
			if (!controller.validateSin()) return;
			if (!controller.validateDocNo(controller.page.demo.scrReferralDocNo)) return;
			if (!controller.validateDocNo(controller.page.demo.scrFamilyDocNo)) return;

			//save notes
			if (controller.page.demo.scrNotes != null)
			{
				controller.page.demo.notes = "<unotes>" + controller.page.demo.scrNotes + "</unotes>";
			}

			//save referral doctor (familyDoctor)
			controller.page.demo.familyDoctor = controller.formatDocInput(controller.page.demo.scrReferralDoc, controller.page.demo.scrReferralDocNo);

			//save family doctor (familyDoctor2)
			controller.page.demo.familyDoctor2 = controller.formatDocInput(controller.page.demo.scrFamilyDoc, controller.page.demo.scrFamilyDocNo);

			//save phone numbers
			controller.page.demo.scrDemoCell = controller.page.demo.scrCellPhone;
			controller.page.demo.phone = controller.page.demo.scrHomePhone;
			controller.page.demo.alternativePhone = controller.page.demo.scrWorkPhone;

			if (controller.page.demo.scrPreferredPhone == "C") controller.page.demo.scrDemoCell += "*";
			else if (controller.page.demo.scrPreferredPhone == "H") controller.page.demo.phone += "*";
			else if (controller.page.demo.scrPreferredPhone == "W") controller.page.demo.alternativePhone += "*";

			//save extras
			var newDemoExtras = [];
			newDemoExtras = updateDemoExtras("demo_cell", controller.page.demo.scrDemoCell, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("aboriginal", controller.page.demo.scrAboriginal, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("hPhoneExt", controller.page.demo.scrHPhoneExt, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("wPhoneExt", controller.page.demo.scrWPhoneExt, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("cytolNum", controller.page.demo.scrCytolNum, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("phoneComment", controller.page.demo.scrPhoneComment, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("paper_chart_archived", controller.page.demo.scrPaperChartArchived, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("paper_chart_archived_date", controller.page.demo.scrPaperChartArchivedDate, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("usSigned", controller.page.demo.scrUsSigned, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("privacyConsent", controller.page.demo.scrPrivacyConsent, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("informedConsent", controller.page.demo.scrInformedConsent, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("securityQuestion1", controller.page.demo.scrSecurityQuestion1, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("securityAnswer1", controller.page.demo.scrSecurityAnswer1, posExtras, controller.page.demo.extras, newDemoExtras);
			newDemoExtras = updateDemoExtras("rxInteractionWarningLevel", controller.page.demo.scrRxInteractionLevel, posExtras, controller.page.demo.extras, newDemoExtras);
			controller.page.demo.extras = newDemoExtras;

			//save to database
			demographicService.updateDemographic(controller.page.demo).then(
				function success()
				{
					controller.resetEditState();
				},

				function error()
				{
					controller.page.saving = false;
					alert('Failed to save demographic');
					// TODO: handle error
				}
			);
		};

		controller.resetEditState = function resetEditState()
		{
			controller.page.saving = false;
			controller.page.dataChanged = false;
		};

		controller.init(); // Initialize the controller
	}
]);


// Move these?
function updateDemoExtras(extKey, newVal, posExtras, oldExtras, newExtras)
{
	if (newVal == null) return newExtras;

	var pos = posExtras[extKey];
	if (pos != null && oldExtras[pos] != null)
	{ //existing ext
		if (oldExtras[pos].value != newVal)
		{
			newExtras.push(
			{
				id: oldExtras[pos].id,
				key: extKey,
				value: newVal,
				hidden: oldExtras[pos].hidden
			});
		}
	}
	else
	{ //newly added ext
		newExtras.push(
		{
			key: extKey,
			value: newVal
		});
	}
	return newExtras;
}

function buildDate(year, month, day)
{
	if (dateEmpty(year, month, day)) return "";
	if (date3Valid(year, month, day)) return year + "-" + month + "-" + day;
	return null;
}

function checkYear(year)
{
	for (var i = 0; i < year.length; i++)
	{
		if (!isNumber(year.charAt(i)))
		{
			year = year.substring(0, i) + year.substring(i + 1);
		}
	}
	if (year != "")
	{
		year = parseInt(year).toString();
		if (year.length > 4) year = year.substring(0, 4);
		if (year == 0) year = "";
	}
	return year;
}

function checkMonth(month)
{
	for (var i = 0; i < month.length; i++)
	{
		if (!isNumber(month.charAt(i)))
		{
			month = month.substring(0, i) + month.substring(i + 1);
		}
	}
	if (month != "")
	{
		if (month.length > 2) month = month.substring(0, 2);
		if (month > 12) month = month.substring(0, 1);
	}
	return month;
}

var daysOfMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

function checkDay(day, month, year)
{
	for (var i = 0; i < day.length; i++)
	{
		if (!isNumber(day.charAt(i)))
		{
			day = day.substring(0, i) + day.substring(i + 1);
		}
	}
	if (day != "")
	{
		if (day.length > 2) day = day.substring(0, 2);

		if (month == null)
		{
			if (day > 31) day = day.substring(0, 1);
		}
		else if (year == null)
		{
			if (day > daysOfMonth[month - 1]) day.substring(0, 1);
		}
		else if (!date3Valid(year, month, day))
		{
			day = day.substring(0, 1);
		}
	}
	return day;
}

function date3Valid(year, month, day)
{
	if (year != null && year != "" && month != null && month != "" && day != null && day != "")
	{
		var maxDaysOfMonth = daysOfMonth[month - 1];
		if (month == 2)
		{
			if ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0)
			{
				maxDaysOfMonth = 29;
			}
		}
		return (day > 0 && day <= maxDaysOfMonth);
	}
	return dateEmpty(year, month, day);
}

function dateEmpty(year, month, day)
{
	return ((year == null || year == "") && (month == null || month == "") && (day == null || day == ""));
}

function dateValid(dateStr)
{ //valid date format: yyyy-MM-dd
	if (dateStr == null || dateStr == "") return true;

	var datePart = dateStr.toString().split("-");
	if (datePart.length != 3) return false;

	var dateDate = new Date(datePart[0], datePart[1] - 1, datePart[2]);
	if (isNaN(dateDate.getTime())) return false;

	if (dateDate.getFullYear() != datePart[0]) return false;
	if (dateDate.getMonth() != datePart[1] - 1) return false;
	if (dateDate.getDate() != datePart[2]) return false;

	return true;
}

function isNumber(s)
{
	return /^[0-9]+$/.test(s);
}

function invalidPhoneNumber(phone)
{
	if (phone == null) return false; //phone number is NOT invalid
	return !(/^[0-9 \-\()]*$/.test(phone));
}

function isPreferredPhone(phone)
{
	phone = String(phone);
	if (phone != null && phone != "")
	{
		if (phone.charAt(phone.length - 1) == "*") return true;
	}
	return false;
}

function getPhoneNum(phone)
{
	if (isPreferredPhone(phone))
	{
		phone = phone.substring(0, phone.length - 1);
	}
	return phone;
}

function demoContactShow(demoContact)
{
	var contactShow = demoContact;
	if (demoContact.role != null)
	{ //only 1 entry
		var tmp = {};
		tmp.role = demoContact.role;
		tmp.sdm = demoContact.sdm;
		tmp.ec = demoContact.ec;
		tmp.category = demoContact.category;
		tmp.lastName = demoContact.lastName;
		tmp.firstName = demoContact.firstName;
		tmp.phone = demoContact.phone;
		contactShow = [tmp];
	}
	for (var i = 0; i < contactShow.length; i++)
	{
		if (contactShow[i].sdm == true) contactShow[i].role += " /sdm";
		if (contactShow[i].ec == true) contactShow[i].role += " /ec";
		if (contactShow[i].role == null || contactShow[i].role == "") contactShow[i].role = "-";

		if (contactShow[i].phone == null || contactShow[i].phone == "")
		{
			contactShow[i].phone = "-";
		}
		else if (contactShow[i].phone.charAt(contactShow[i].phone.length - 1) == "*")
		{
			contactShow[i].phone = contactShow[i].phone.substring(0, contactShow[i].phone.length - 1);
		}
	}
	return contactShow;
}

function toArray(obj)
{ //convert single object to array
	if (obj instanceof Array) return obj;
	else if (obj == null) return [];
	else return [obj];
}

/***/ }),

/***/ "./src/record/details/module.js":
/*!**************************************!*\
  !*** ./src/record/details/module.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Record.Details', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/record/forms/formsController.js":
/*!*********************************************!*\
  !*** ./src/record/forms/formsController.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {/*

    Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for the
    Department of Family Medicine
    McMaster University
    Hamilton
    Ontario, Canada

*/
angular.module('Record.Forms').controller('Record.Forms.FormController', [

	'$scope',
	'$http',
	'$location',
	'$stateParams',
	'$state',
	'demographicService',
	'demo',
	'formService',
	'user',
	'securityService',

	function(
		$scope,
		$http,
		$location,
		$stateParams,
		$state,
		demographicService,
		demo,
		formService,
		user,
		securityService)
	{

		var controller = this;

		console.log("form ctrl ", $stateParams, $state);

		controller.demographicNo = $stateParams.demographicNo;
		controller.providerNo = user.providerNo;

		controller.page = {};
		controller.page.currentFormList = [];
		controller.page.currentForm = {};
		controller.page.currentlistId = $stateParams.formListId;

		console.log("What is the state " + $state.params.type + " : " + angular.isUndefined($state.params.type) + " id " + $state.params.id, $state); // Use this to load the current form if the page is refreshed

		securityService.hasRights(
		{
			items: [
			{
				objectName: '_admin',
				privilege: 'w'
			},
			{
				objectName: '_admin.eform',
				privilege: 'w'
			}]
		}).then(
			function success(results)
			{
				controller.adminAccess = results.content[0];
				controller.adminEformAccess = results.content[1];
				if (results.content != null && results.content.length == 2)
				{
					if (controller.adminAccess || controller.adminEformAccess)
					{
						controller.hasAdminAccess = true;
					}
				}
				else
				{
					alert('failed to load rights');
				}
			},
			function error(errors)
			{
				console.log(errors);
			});


		controller.page.formlists = [
		{
			id: 0,
			label: 'Completed'
		},
		{
			id: 1,
			label: 'Library'
		}]; //Need to get this from the server.

		controller.page.formlists.forEach(function(item, index)
		{
			console.log('What is the item ', item);
			formService.getAllFormsByHeading($stateParams.demographicNo, item.label).then(
				function success(results)
				{
					controller.page.currentFormList[index] = Juno.Common.Util.toArray(results.list);
				},
				function error(errors)
				{
					console.log(errors);
				});
		});


		controller.page.encounterFormlist = [];
		controller.page.formGroups = [];
		controller.getFormGroups = function getFormGroups()
		{
			formService.getFormGroups().then(
				function success(results)
				{
					if (results instanceof Array)
					{
						controller.page.formGroups = results;
					}
					else
					{
						controller.page.formGroups.push(results);
					}

					for (var i = 0; i < controller.page.formGroups.length; i++)
					{
						if (!(controller.page.formGroups[i].summaryItem instanceof Array))
						{
							controller.page.formGroups[i].summaryItem = [controller.page.formGroups[i].summaryItem];
						}
					}
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.getFormGroups();
		controller.page.formOptions = [];
		controller.favouriteGroup = null;

		getFavouriteFormGroup = function getFavouriteFormGroup()
		{
			formService.getFavouriteFormGroup().then(
				function success(results)
				{
					controller.favouriteGroup = results;

					if (!(controller.favouriteGroup.summaryItem instanceof Array))
					{
						controller.favouriteGroup.summaryItem = [controller.favouriteGroup.summaryItem];
					}

				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		getFavouriteFormGroup();

		formService.getFormOptions(controller.demographicNo).then(
			function success(results)
			{
				console.log("data", results);

				if (results.items instanceof Array)
				{
					controller.page.formOptions = results.items;
				}
				else
				{
					controller.page.formOptions.push(results.items);
				}


				console.log("form options", controller.page.formOptions);
			},
			function error(errors)
			{
				console.log(errors);
			});

		formService.getCompletedEncounterForms($stateParams.demographicNo).then(
			function success(results)
			{
				controller.page.encounterFormlist[0] = results;
			},
			function error(errors)
			{
				console.log(errors);
			});

		formService.getSelectedEncounterForms().then(
			function success(results)
			{
				controller.page.encounterFormlist[1] = results;
			},
			function error(errors)
			{
				console.log(errors);
			});


		controller.changeTo = function changeTo(listId)
		{
			controller.page.currentlistId = listId;
			console.log('set currentlist to ' + listId);
			if (listId == 0)
			{
				formService.getAllFormsByHeading($stateParams.demographicNo, 'Completed').then(
					function success(results)
					{
						console.debug('whats the index' + 0, results);
						controller.page.currentFormList[0] = Juno.Common.Util.toArray(results.list);
					},
					function error(errors)
					{
						console.log(errors);
					});
			}
		};

		controller.viewFormState = function viewFormState(item, view)
		{

			while (document.getElementById('formInViewFrame').hasChildNodes())
			{
				document.getElementById('formInViewFrame').removeChild(document.getElementById('formInViewFrame').firstChild);
			}

			var queryName = $location.search().name;
			var params = {
				demographicNo: $stateParams.demographicNo,
				type: item.type === 'eform' ? 'eform' : 'form',
				id: item.id || item.formId
			};

			// The items sent from the server are such that
			// 1. Existing eforms have a formId and an id
			// 2. Existing forms have a formId only
			// 3. Library/available eforms have a formId only
			// 4. Library/available forms have neither
			if ((item.type === 'eform' && item.id) || (item.type === 'form' && item.formId))
			{
				params.name = item.type === 'form' ? item.name || queryName : '';
				$state.go('record.forms.view', params);
			}
			else if (item.type === 'eform')
			{
				$state.go('record.forms.add', params);
			}
			else
			{
				$state.go('record.forms');
			}

			/*
			* 1=frame
			* 2=newwindow
			*/
			if (view === undefined)
			{
				view = 1;
			}

			var url = '';
			if (item.type === 'eform')
			{
				if (!Juno.Common.Util.isUndefinedOrNull(item.id))
				{
					url = '../eform/efmshowform_data.jsp?fdid=' + item.id;
				}
				else
				{
					url = '../eform/efmformadd_data.jsp?fid=' + item.formId + '&demographic_no=' + $stateParams.demographicNo;
				}
			}
			else
			{ //form
				if (angular.isDefined(item.formId))
				{
					var name = item.name || queryName;
					url = '../form/forwardshortcutname.jsp?formname=' + name + '&demographic_no=' + $stateParams.demographicNo + '&formId=' + item.formId;
				}
				else
				{
					url = item.formValue + $stateParams.demographicNo + "&formId=0&provNo=" + user.providerNo + "&parentAjaxId=forms";
				}
			}

			if (view === 1)
			{
				$("html, body").animate(
					{
						scrollTop: 0
					}, "slow");
			}
			else if (view === 2)
			{
				var rnd = Math.round(Math.random() * 1000);
				win = "win" + rnd;

				window.open(url, win, "scrollbars=yes, location=no, width=900, height=600", "");
				return;
			}

			controller.page.currentForm = item;
			var pymParent = new pym.Parent('formInViewFrame', url,
			{});
			controller.pymParent = pymParent;

			/*if(item.type != 'eform' && view==1){
				document.getElementById('formInViewFrame').firstChild.style.height = "1600px"; //temp hack for the forms
			}*/

			//resize iframe for both form and eforms
			$('iframe').load(function()
			{
				var maxheight = Math.max(document.getElementById('formInViewFrame').firstChild.contentWindow.document.body.scrollHeight, document.getElementById('formInViewFrame').firstChild.contentWindow.document.body.offsetHeight) + 30 + 'px';
				document.getElementById('formInViewFrame').firstChild.style.height = maxheight;
			});

		};

		controller.isEmpty = function isEmpty(obj)
		{
			for (var i in obj)
				if (obj.hasOwnProperty(i)) return false;
			return true;
		};

		controller.currentEformGroup = {};

		controller.setCurrentEFormGroup = function setCurrentEFormGroup(mod)
		{
			controller.currentEformGroup = mod;
		};

		controller.openFormFromGroups = function openFormFromGroups(item)
		{
			console.log("group item", item);
			item.formId = item.id;
			delete item.id;
			controller.viewFormState(item, 2);
		};

		controller.formOption = function formOption(opt)
		{
			var atleastOneItemSelected = false;
			if (opt.extra == "send2PHR")
			{
				var docIds = "";
				for (var i = 0; i < controller.page.currentFormList[controller.page.currentlistId].length; i++)
				{
					if (controller.page.currentFormList[controller.page.currentlistId][i].isChecked)
					{
						docIds = docIds + '&sendToPhr=' + controller.page.currentFormList[controller.page.currentlistId][i].id;
						atleastOneItemSelected = true;
					}
				}
				if (atleastOneItemSelected)
				{
					var rnd = Math.round(Math.random() * 1000);
					win = "win" + rnd;
					var url = '../eform/efmpatientformlistSendPhrAction.jsp?clientId=' + controller.demographicNo + docIds;
					window.open(url, win, "scrollbars=yes, location=no, width=900, height=600", "");
				}
			}

			if (!atleastOneItemSelected)
			{
				alert("No Documents Selected");
			}
		};


		/*
		 * Used to make the left side list tab be active
		 */
		controller.getListClass = function getListClass(listId)
		{
			if (listId === controller.page.currentlistId)
			{
				return "active";
			}
		};

		/*
		 * Used to make group setting active
		 */
		controller.getGroupListClass = function getGroupListClass(grp)
		{
			if (grp === controller.currentEformGroup)
			{
				return "active";
			}
		};

		/*
		 * Used to mark which form is active.
		 */
		controller.getActiveFormClass = function getActiveFormClass(item)
		{
			if (item.type === controller.page.currentForm.type && item.id === controller.page.currentForm.id && !Juno.Common.Util.isUndefinedOrNull(item.id))
			{
				return "active";
			}
			else if (item.type === controller.page.currentForm.type && item.formId === controller.page.currentForm.formId && Juno.Common.Util.isUndefinedOrNull(item.id))
			{
				return "active";
			}
		}

		var currentState = $state.current.name;
		if (currentState === 'record.forms.view' || currentState === 'record.forms.add')
		{
			var item = {};
			item.type = $state.params.type;

			// set item properties in a way that matches the content that the server returns
			if (currentState === 'record.forms.view' && item.type === 'eform')
			{
				item.id = $state.params.id;
			}
			else
			{
				item.formId = $state.params.id;
			}

			controller.viewFormState(item);
			controller.changeTo(currentState === 'record.forms.view' ? 0 : 1);
		}

		/*
		 * This still needs to be tested
		 */
		controller.keypress = function keypress(event)
		{
			if (event.altKey == true && event.keyCode == 38)
			{ //up
				console.log("up", event);
				console.log(controller.page.currentFormList[controller.page.currentlistId].indexOf(controller.page.currentForm));
				var currIdx = controller.page.currentFormList[controller.page.currentlistId].indexOf(controller.page.currentForm);
				if (currIdx > 0)
				{
					controller.page.currentForm = controller.page.currentFormList[controller.page.currentlistId][currIdx - 1];
					controller.viewFormState(controller.page.currentForm);
				}
			}
			else if (event.altKey == true && event.keyCode == 40)
			{ //Down
				console.log("down", event);
				var currIdx = controller.page.currentFormList[controller.page.currentlistId].indexOf(controller.page.currentForm);
				console.log(currIdx, controller.page.currentFormList[controller.page.currentlistId].length);
				if (currIdx <= controller.page.currentFormList[controller.page.currentlistId].length)
				{
					controller.page.currentForm = controller.page.currentFormList[controller.page.currentlistId][currIdx + 1];
					controller.viewFormState(controller.page.currentForm);
				}
			}
			else
			{
				console.log("keypress", event.altKey, event.key, event);
			}
		};


	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/record/forms/module.js":
/*!************************************!*\
  !*** ./src/record/forms/module.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Record.Forms', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/record/module.js":
/*!******************************!*\
  !*** ./src/record/module.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Record', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/record/phr/module.js":
/*!**********************************!*\
  !*** ./src/record/phr/module.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Record.PHR', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/record/phr/phrController.js":
/*!*****************************************!*\
  !*** ./src/record/phr/phrController.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*

    Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for the
    Department of Family Medicine
    McMaster University
    Hamilton
    Ontario, Canada

*/
angular.module('Record.PHR').controller('Record.PHR.PHRController', [

	'$scope',
	'$http',
	'$location',
	'$state',
	'$stateParams',
	'demographicService',
	'demo',
	'formService',

	function(
		$scope,
		$http,
		$location,
		$state,
		$stateParams,
		demographicService,
		demo,
		formService)
	{

		var controller = this;

		console.log("phr ctrl ", $stateParams, $state);

		controller.page = {};
		controller.page.currentFormList = [];
		controller.page.currentForm = {};
		controller.page.currentlistId = 0;

		console.log("What is the state " + $state.params.type + " : " + angular.isUndefined($state.params.type) + " id " + $state.params.id, $state); // Use this to load the current form if the page is refreshed


		controller.page.formlists = [
		{
			id: 0,
			label: 'Data'
		}]; //,{id:1,label:'Msgs'}];  //Need to get this from the server.

		controller.page.currentFormList[0] = [
		{
			id: 0,
			name: 'Glucose',
			url: '../oscarEncounter/myoscar/measurements_glucose.do?type=GLUCOSE&demoNo=',
			type: 'frame'
		},
		{
			id: 1,
			name: 'BP',
			url: '../oscarEncounter/myoscar/measurements_blood_pressure.do?type=BLOOD_PRESSURE&demoNo=',
			type: 'frame'
		},
		{
			id: 2,
			name: 'Height & Weight',
			url: '../oscarEncounter/myoscar/measurements_height_and_weight.do?type=HEIGHT_AND_WEIGHT&demoNo=',
			type: 'frame'
		},
		{
			id: 3,
			name: 'Open Record',
			url: '../demographic/viewPhrRecord.do?demographic_no=',
			type: 'window'
		},
		{
			id: 4,
			name: 'Send a Message',
			url: '../phr/PhrMessage.do?method=createMessage&demographicNo=',
			type: 'window'
		},
		{
			id: 5,
			name: 'Data Sync',
			url: '../admin/oscar_myoscar_sync_config_redirect.jsp?uselessParam=',
			type: 'window'
		}];



		/*controller.page.formlists.forEach(function (item, index) {
			console.log('What is the item ',item);
			formService.getAllFormsByHeading($stateParams.demographicNo,item.label).then(function(data) {
		        console.debug('whats the index'+index,data);
		        controller.page.currentFormList[index] = data.list;
		    });
		});
		*/

		controller.changeTo = function changeTo(listId)
		{
			controller.page.currentlistId = listId;
			console.log('set currentlist to ' + listId);
			if (listId == 0)
			{
				formService.getAllFormsByHeading($stateParams.demographicNo, 'Completed').then(
					function success(results)
					{
						console.debug('whats the index' + 0, results);
						controller.page.currentFormList[0] = results.list;
					},
					function error(errors)
					{
						console.log(errors);
					});
			}
		};

		controller.viewFormState = function viewFormState(item)
		{

			while (document.getElementById('formInViewFrame').hasChildNodes())
			{
				document.getElementById('formInViewFrame').removeChild(document.getElementById('formInViewFrame').firstChild);
			}

			var url = item.url + $stateParams.demographicNo;
			console.log("item", item);

			if (item.type == 'frame')
			{
				controller.page.currentForm = item;
				var pymParent = new pym.Parent('formInViewFrame', url,
				{});
				controller.pymParent = pymParent;
			}
			else
			{
				var rnd = Math.round(Math.random() * 1000);
				win = "win" + rnd;
				window.open(url, win, "scrollbars=yes, location=no, width=900, height=600", "");
				return;
			}


		};



		/*
		 * Used to make the left side list tab be active
		 */
		controller.getListClass = function getListClass(listId)
		{
			if (listId === controller.page.currentlistId)
			{
				return "active";
			}
		};

		/*
		 * Used to mark which form is active.
		 */
		controller.getActiveFormClass = function getActiveFormClass(item)
		{
			if (item.type == controller.page.currentForm.type && item.id == controller.page.currentForm.id && angular.isDefined(item.id))
			{
				return "active";
			}
			else if (item.type == controller.page.currentForm.type && angular.isUndefined(item.id) && item.formId == controller.page.currentForm.formId)
			{
				return "active";
			}
		};

		// Remove this?
		function handleError(errorMessage)
		{
			console.log(errorMessage);
		}

		/*
		 * This still needs to be tested
		 */
		controller.keypress = function keypress(event)
		{
			if (event.altKey == true && event.key == "Up")
			{
				console.log("up", event);
				console.log(controller.page.currentFormList[controller.page.currentlistId].indexOf(controller.page.currentForm));
				var currIdx = controller.page.currentFormList[controller.page.currentlistId].indexOf(controller.page.currentForm);
				if (currIdx > 0)
				{
					controller.page.currentForm = controller.page.currentFormList[controller.page.currentlistId][currIdx - 1];
					controller.viewFormState(controller.page.currentForm);
				}
			}
			else if (event.altKey == true && event.key == "Down")
			{
				console.log("down", event);
				var currIdx = controller.page.currentFormList[controller.page.currentlistId].indexOf(controller.page.currentForm);
				console.log(currIdx, controller.page.currentFormList[controller.page.currentlistId].length);
				if (currIdx <= controller.page.currentFormList[controller.page.currentlistId].length)
				{
					controller.page.currentForm = controller.page.currentFormList[controller.page.currentlistId][currIdx + 1];
					controller.viewFormState(controller.page.currentForm);
				}
			}
			else
			{
				console.log("keypress", event.altKey, event.key, event);
			}
		};
	}
]);

/***/ }),

/***/ "./src/record/recordController.js":
/*!****************************************!*\
  !*** ./src/record/recordController.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($, moment) {/*

    Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for the
    Department of Family Medicine
    McMaster University
    Hamilton
    Ontario, Canada

*/

angular.module('Record').controller('Record.RecordController', [

	'$rootScope',
	'$scope',
	'$window',
	'$http',
	'$localStorage',
	'$location',
	'$state',
	'$stateParams',
	'$timeout',
	'$interval',
	'$uibModal',
	'demographicService',
	'demo',
	'user',
	'properties',
	'noteService',
	'uxService',
	'securityService',
	'scheduleService',
	'billingService',

	function(
		$rootScope,
		$scope,
		$window,
		$http,
		$localStorage,
		$location,
		$state,
		$stateParams,
		$timeout,
		$interval,
		$uibModal,
		demographicService,
		demo,
		user,
		properties,
		noteService,
		uxService,
		securityService,
		scheduleService,
		billingService)
	{

		var controller = this;

		controller.demographicNo = $stateParams.demographicNo;
		controller.demographic = demo;
		controller.properties = properties;
		controller.page = {};
		controller.page.assignedCMIssues = [];

		/*
		 * handle concurrent note edit - EditingNoteFlag
		 */
		controller.page.itvSet = null;
		controller.page.itvCheck = null;
		controller.page.editingNoteId = null;
		controller.page.isNoteSaved = false; // Track save state of note TODO: Potentially add this to the encounterNote object on the backend

		controller.$storage = $localStorage; // Define persistent storage
		/*
		controller.recordtabs2 = [ 
		 {id : 0,name : 'Master',url : 'partials/master.html'},
		 {id : 1,name : 'Summary',url : 'partials/summary.html'},
		 {id : 2,name : 'Rx',url : 'partials/rx.jsp'},
		 {id : 3,name : 'Msg',url : 'partials/summary.html'},
		 {id : 4,name : 'Trackers',url : 'partials/tracker.jsp'},
		 {id : 5,name : 'Consults',url : 'partials/summary.html'},
		 {id : 6,name : 'Forms',url : 'partials/formview.html'},
		 {id : 7,name : 'Prevs/Measurements',url : 'partials/summary.html'},
		 {id : 8,name : 'Ticklers',url : 'partials/summary.html'},
		 {id : 9,name : 'MyOscar',url : 'partials/blank.jsp'},
		 {id : 10,name : 'Allergies',url : 'partials/summary.html'},
		 {id : 11,name : 'CPP',url : 'partials/cpp.html'},
		 {id : 12,name : 'Labs/Docs',url : 'partials/labview.html'},
		 {id : 13,name : 'Billing',url : 'partials/billing.jsp'}	
		*/
		controller.recordtabs2 = [];
		/*
		                 	 {id : 0,displayName : 'Details'  ,path : 'record.details'},
		                 	 {id : 1,displayName : 'Summary'  ,path : 'record.summary'},
		                 	 {id : 2,displayName : 'Forms'    ,path : 'record.forms'},
		                 	 {id : 3,displayName : 'Labs/Docs',path : 'partials/eform.jsp'},
		                 	 {id : 4,displayName : 'Rx'       ,path : 'partials/eform.jsp'}];
		*/

		controller.init = function init()
		{
			controller.fillMenu();
		};

		//get access rights
		securityService.hasRight("_eChart", "w", controller.demographicNo).then(
			function success(results)
			{
				controller.page.cannotChange = !results;
			},
			function error(errors)
			{
				console.log(errors);
			});

		//disable click and keypress if user only has read-access
		controller.checkAction = function checkAction(event)
		{
			if (controller.page.cannotChange)
			{
				event.preventDefault();
				event.stopPropagation();
			}
		};

		// Is there a shared location where this could be accessed from any controller? i.e. a utils file
		controller.isNaN = function(num)
		{
			return isNaN(num);
		};

		controller.fillMenu = function fillMenu()
		{
			uxService.menu($stateParams.demographicNo).then(
				function success(results)
				{
					controller.recordtabs2 = results;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		//var transitionP = $state.transitionTo(controller.recordtabs2[0].path,$stateParams,{location:'replace',notify:true});
		//console.log("transition ",transitionP);

		controller.changeTab = function changeTab(temp)
		{
			controller.currenttab2 = controller.recordtabs2[temp.id];

			if (Juno.Common.Util.isDefinedAndNotNull(temp.state))
			{
				if(Juno.Common.Util.isDefinedAndNotNull(temp.demoId)){
					$state.go(temp.state,
						{
							demographicNo: temp.demoId
						});
				}
				else
				{
					$state.go(temp.state);
				}
			}
			else if (angular.isDefined(temp.url))
			{
				if (temp.label == "Rx")
				{
					win = temp.label + controller.demographicNo;
				}
				else
				{
					var rnd = Math.round(Math.random() * 1000);
					win = "win" + rnd;
				}
				window.open(temp.url, win, "scrollbars=yes, location=no, width=1000, height=600", "");
			}
			//console.log(controller.recordtabs2[temp].path);
		};

		controller.isActive = function isActive(tab)
		{
			if(Juno.Common.Util.isDefinedAndNotNull($state.current.name) &&
				Juno.Common.Util.isDefinedAndNotNull(tab.state))
			{
				return ($state.current.name === tab.state);
			}

			return false;
		};

		// Check if there have been potential changes to a note, display a warning if needed
		$window.onbeforeunload = function (event) {
			if (Juno.Common.Util.isDefinedAndNotNull(controller.page.encounterNote))
			{
				if(controller.page.encounterNote.note.trim().length !== 0 && controller.page.isNoteSaved === false)
				{
					return 'You have made changes to a note, but you did not save them yet.\nLeaving the page will revert all changes.';
				}
			}
		};

		$scope.$on('$destroy', function() {
			delete $window.onbeforeunload;
		});

		// Warn user about unsaved data before a state change
		$scope.$on("$stateChangeStart", function(event, data)
		{
			// If the encounter note is not null/undefined and the new state is not a child of record, continue
			if (Juno.Common.Util.isDefinedAndNotNull(controller.page.encounterNote) &&
				controller.page.isNoteSaved === false && data.name.indexOf('record.') === -1)
			{
				if(controller.page.encounterNote.note.trim().length !== 0)
				{
					var discard = confirm("You have unsaved note data. Are you sure you want to leave?");
					if (!discard)
					{
						event.preventDefault();
					}
				}
			}
		});

		//////AutoSave
		var saveIntervalSeconds = 2;

		var timeout = null;
		var saveUpdates = function saveUpdates()
		{
			if (controller.page.encounterNote.note == controller.page.initNote) return; //user did not input anything, don't save

			console.log("save", controller.page.encounterNote);
			noteService.tmpSave($stateParams.demographicNo, controller.page.encounterNote);
		};
		var skipTmpSave = false;
		var noteDirty = false;

		var delayTmpSave = function delayTmpSave(newVal, oldVal)
		{
			console.log("whats the val ", (newVal != oldVal));
			if (!skipTmpSave)
			{
				if (newVal != oldVal)
				{
					noteDirty = true;
					if (timeout)
					{
						$timeout.cancel(timeout);
					}
					timeout = $timeout(saveUpdates, saveIntervalSeconds * 1000);
				}
				else
				{
					noteDirty = false;
				}
			}
			skipTmpSave = false; // only skip once
		};
		$scope.$watch('controller.page.encounterNote.note', delayTmpSave);

		//////

		//////Timer
		var d = new Date(); //the start

		var totalSeconds = 0;
		var myVar = setInterval(setTime, 1000);

		controller.getCurrentTimerToggle = function getCurrentTimerToggle()
		{
			if (angular.isDefined(myVar))
			{
				return "fa-pause";
			}
			return "fa-play";
		};

		controller.toggleTimer = function toggleTimer()
		{
			if ($("#aToggle").hasClass("fa-pause"))
			{
				$("#aToggle").removeClass("fa-pause");
				$("#aToggle").addClass("fa-play");
				clearInterval(myVar);
			}
			else
			{
				$("#aToggle").removeClass("fa-play");
				$("#aToggle").addClass("fa-pause");
				myVar = setInterval(setTime, 1000);
			}
		};

		controller.pasteTimer = function pasteTimer()
		{
			var ed = new Date();
			controller.page.encounterNote.note += "\n" + document.getElementById("startTag").value + ": " + d.getHours() + ":" + pad(d.getMinutes()) + "\n" + document.getElementById("endTag").value + ": " + ed.getHours() + ":" + pad(ed.getMinutes()) + "\n" + pad(parseInt(totalSeconds / 3600)) + ":" + pad(parseInt((totalSeconds / 60) % 60)) + ":" + pad(totalSeconds % 60);
		};

		function setTime()
		{
			++totalSeconds;
			document.getElementById("aTimer").innerHTML = pad(parseInt(totalSeconds / 60)) + ":" + pad(totalSeconds % 60);
			if (totalSeconds == 1200)
			{
				$("#aTimer").css("background-color", "#DFF0D8");
			} //1200 sec = 20 min light green
			if (totalSeconds == 3000)
			{
				$("#aTimer").css("background-color", "#FDFEC7");
			} //3600 sec = 50 min light yellow
		}

		function pad(val)
		{
			var valString = val + "";
			if (valString.length < 2)
			{
				return "0" + valString;
			}
			else
			{
				return valString;
			}
		}
		$scope.$on('$destroy', function()
		{
			clearInterval(myVar);
		});
		//////		


		// Note Input Logic
		controller.toggleNote = function toggleNote()
		{
			if (controller.$storage.hideNote)
			{
				controller.$storage.hideNote = false;
			}
			else
			{
				controller.$storage.hideNote = true;
			}
		};

		// TODO
		controller.cancelNoteEdit = function cancelNoteEdit()
		{
			console.log('CANCELLING EDIT');
			controller.page.encounterNote = null;
			$rootScope.$emit('stopEditingNote');
			skipTmpSave = true;
			controller.getCurrentNote(false);
			controller.removeEditingNoteFlag();
			controller.$storage.hideNote = true;
		};

		controller.saveNote = function saveNote()
		{
			// Don't let users save an empty note
			if (controller.page.encounterNote.note.length === 0)
			{
				alert("Can't save a blank note!"); // Placeholder error handling
				return;
			}
			// Check if this is a new note, if it isn't, we don't want to overwrite the existing observationDate
			// Need to find a better way of preventing this date overwrite
			controller.page.encounterNote.assignedIssues = controller.page.assignedCMIssues;
			controller.page.encounterNote.issueDescriptions = [];
			if(!Juno.Common.Util.isInArray(user.displayName,  controller.page.encounterNote.editorNames))
				controller.page.encounterNote.editorNames.push(user.displayName);

			for (var i = 0; i < controller.page.assignedCMIssues.length; i++)
			{
				// if (controller.page.encounterNote.issueDescriptions == null)
				// {
				// 	controller.page.encounterNote.issueDescriptions = controller.page.assignedCMIssues[i].issue.description;
				// }
				// else
				// {
				// 	controller.page.encounterNote.issueDescriptions += "," + controller.page.assignedCMIssues[i].issue.description;
				// }
				controller.page.encounterNote.issueDescriptions.push(controller.page.assignedCMIssues[i].issue.description);
			}

			noteService.saveNote($stateParams.demographicNo, controller.page.encounterNote).then(
				function success(results)
				{
					controller.page.isNoteSaved = true;
					$rootScope.$emit('noteSaved', results);
					skipTmpSave = true;
					controller.page.encounterNote = results;
					controller.$storage.hideNote = true;
					controller.getCurrentNote(false);
					controller.page.assignedCMIssues = [];
				},
				function error(errors)
				{
					console.log(errors);
				});
			controller.removeEditingNoteFlag();
		};

		controller.saveSignNote = function saveSignNote()
		{
			controller.page.encounterNote.isSigned = true;
			controller.saveNote();
		};

		controller.saveSignVerifyNote = function saveSignVerifyNote()
		{
			controller.page.encounterNote.isVerified = true;
			controller.page.encounterNote.isSigned = true;
			controller.saveNote();
		};

		billingService.getBillingRegion().then(
			function success(results)
			{
				controller.page.billregion = results.message;
			},
			function error(errors)
			{
				console.log(errors);
			});
		billingService.getDefaultView().then(
			function success(results)
			{
				controller.page.defaultView = results.message;
			},
			function error(errors)
			{
				console.log(errors);
			});
		if ($location.search().appointmentNo != null)
		{
			scheduleService.getAppointment($location.search().appointmentNo).then(
				function success(results)
				{
					controller.page.appointment = results;
				},
				function error(errors)
				{
					console.log(errors);
				});
		}

		controller.saveSignBillNote = function saveSignBillNote()
		{
			controller.page.encounterNote.isSigned = true;
			controller.saveNote();

			var dxCode = "";
			for (var i = 0; i < controller.page.assignedCMIssues.length; i++)
			{
				dxCode += "&dxCode=" + controller.page.assignedCMIssues[i].issue.code.substring(0, 3);
			}

			var apptNo = "",
				apptProvider = "",
				apptDate = "",
				apptStartTime = "";
			if (controller.page.appointment != null)
			{
				apptNo = controller.page.appointment.id;
				apptProvider = controller.page.appointment.providerNo;
				var dt = moment(controller.page.appointment.appointmentDate).toDate();
				apptDate = dt.getFullYear() + "-" + zero(dt.getMonth() + 1) + "-" + zero(dt.getDate());
				dt = new Date(controller.page.appointment.startTime);
				apptStartTime = zero(dt.getHours()) + ":" + zero(dt.getMinutes()) + ":" + zero(dt.getSeconds());
			}

			var url = "../billing.do?billRegion=" + encodeURIComponent(controller.page.billregion);
			url += "&billForm=" + encodeURIComponent(controller.page.defaultView);
			url += "&demographic_name=" + encodeURIComponent(demo.lastName + "," + demo.firstName);
			url += "&demographic_no=" + demo.demographicNo;
			url += "&providerview=" + user.providerNo + "&user_no=" + user.providerNo;
			url += "&appointment_no=" + apptNo + "&apptProvider_no=" + apptProvider;
			url += "&appointment_date=" + apptDate + "&start_time=" + apptStartTime;
			url += "&hotclick=&status=t&bNewForm=1" + dxCode;

			window.open(url, "billingWin", "scrollbars=yes, location=no, width=" + screen.width + ", height=" + screen.height, "");
		};


		console.log('RecordCtrlEnd', $state);

		controller.page.currentNoteConfig = {};


		controller.getIssueNote = function getIssueNote()
		{
			if (controller.page.encounterNote.noteId != null)
			{
				noteService.getIssueNote(controller.page.encounterNote.noteId).then(
					function success(results)
					{
						if (results != null) controller.page.assignedCMIssues = toArray(results.assignedCMIssues);
					},
					function error(errors)
					{
						console.log(errors);
					});
			}
		};

		controller.getCurrentNote = function getCurrentNote(showNoteAfterLoadingFlag)
		{
			noteService.getCurrentNote($stateParams.demographicNo, $location.search()).then(
				function success(results)
				{
					controller.page.encounterNote = results;
					controller.page.initNote = results.note; //compare this with current note content to determine tmpsave or not
					controller.getIssueNote();
					// controller.hideNote = showNoteAfterLoadingFlag;
					// controller.$storage.hideNote = showNoteAfterLoadingFlag;
					$rootScope.$emit('currentlyEditingNote', controller.page.encounterNote);
					controller.initAppendNoteEditor();
					controller.initObservationDate();
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.getCurrentNote(true);

		controller.editNote = function editNote(note)
		{
			$rootScope.$emit('', note);
		};

		$rootScope.$on('loadNoteForEdit', function(event, data)
		{
			// Check if another note is currently being edited
			if (controller.page.editingNoteId !== null)
			{
				console.log('Note is already being edited! Do you want to save changes?');
				controller.displayWarning(data);
				return;
			}
			controller.page.encounterNote = angular.copy(data);
			controller.getIssueNote();

			//Need to check if note has been saved yet.
			controller.$storage.hideNote = false;
			$rootScope.$emit('currentlyEditingNote', controller.page.encounterNote);

			controller.removeEditingNoteFlag();
		});

		controller.initAppendNoteEditor = function initAppendNoteEditor()
		{
			if ($location.search().noteEditorText != null)
			{
				controller.page.encounterNote.note = controller.page.encounterNote.note + $location.search().noteEditorText;
			}
		};

		// Initialize the observationDate for new notes
		controller.initObservationDate = function initObservationDate()
		{
			if (controller.page.encounterNote.observationDate === null)
			{
				controller.page.encounterNote.observationDate = new Date();
			}
		};


		$rootScope.$on("$stateChangeStart", function()
		{
			controller.removeEditingNoteFlag();
		});

		controller.doSetEditingNoteFlag = function doSetEditingNoteFlag()
		{
			noteService.setEditingNoteFlag(controller.page.editingNoteId, user.providerNo).then(
				function success(results)
				{
					if (!results.success)
					{
						if (results.message == "Parameter error") alert("Parameter Error: noteUUID[" + controller.page.editingNoteId + "] userId[" + user.providerNo + "]");
						else alert("Warning! Another user is editing this note now.");
					}
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.setEditingNoteFlag = function setEditingNoteFlag()
		{
			if (controller.page.encounterNote.uuid == null) return;
			controller.page.isNoteSaved = false;
			controller.page.editingNoteId = controller.page.encounterNote.uuid;
			if (controller.page.itvSet == null)
			{
				controller.page.itvSet = $interval(controller.doSetEditingNoteFlag(), 30000); //set flag every 5 min until canceled
			}
			if (controller.page.itvCheck == null)
			{ //warn once only when the 1st time another user tries to edit this note
				controller.page.itvCheck = $interval(function()
				{
					noteService.checkEditNoteNew(controller.page.editingNoteId, user.providerNo).then(
						function success(results)
						{
							if (!results.success)
							{ //someone else wants to edit this note
								alert("Warning! Another user tries to edit this note. Your update may be replaced by later revision(s).");
								$interval.cancel(controller.page.itvCheck);
								controller.page.itvCheck = null;
							}
						},
						function error(errors)
						{
							console.log(errors);
						});
				}, 10000); //check for new edit every 10 seconds
			}
		};

		controller.removeEditingNoteFlag = function removeEditingNoteFlag()
		{
			if (controller.page.editingNoteId != null)
			{
				noteService.removeEditingNoteFlag(controller.page.editingNoteId, user.providerNo);
				$interval.cancel(controller.page.itvSet);
				$interval.cancel(controller.page.itvCheck);
				controller.page.itvSet = null;
				controller.page.itvCheck = null;
				controller.page.editingNoteId = null;
			}
		};


		controller.searchTemplates = function searchTemplates(term)
		{
			var search = {
				name: term
			};

			return uxService.searchTemplates(search, 0, 25).then(
				function success(results)
				{
					var resp = [];
					for (var x = 0; x < results.templates.length; x++)
					{
						resp.push(
						{
							encounterTemplateName: results.templates[x].encounterTemplateName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.insertTemplate = function insertTemplate(item, model, label)
		{
			
			uxService.getTemplate(
			{
				name: model
			}).then(
				function success(results)
				{
					if (results.templates !== null)
					{
						var template = results.templates[0];
						controller.page.encounterNote.note = controller.page.encounterNote.note + template.encounterTemplateValue;
						controller.options = {
							magicVal: ''
						};
					}

				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.displayWarning = function displayWarning(noteToEdit)
		{
			var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/record/summary/saveWarning.jsp',
				controller: 'Record.Summary.SaveWarningController as saveWarningCtrl',
				backdrop: 'static',
				size: 'md',
				resolve:
				{
					saveSignNote: function()
					{
						return controller.saveSignNote;
					},
					cancelNoteEdit: function()
					{
						return controller.cancelNoteEdit;
					}
				}
			});

			// Might need to keep this to continue the original edit action
			modalInstance.result.then(
				function success(results)
				{
					console.log(results);
				},
				function error(errors)
				{
					console.log('Modal dismissed at: ' + new Date());
					console.log(errors);
				});
		};

		controller.searchIssues = function searchIssues(term)
		{
			console.log('SEARCHING FOR ISSUE: ', term);
			var search = {
				'term': term
			};
			return noteService.searchIssues(search, 0, 100).then(
				function success(results)
				{
					var resp = [];
					for (var x = 0; x < results.content.length; x++)
					{
						resp.push(
						{
							issueId: results.content[x].id,
							code: results.content[x].description + '(' + results.content[x].code + ')'
						});
					}
					if (results.total > results.content.length)
					{
						//warn user there's more results somehow?
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.assignIssue = function assignIssue(item, model, label)
		{
			for (var x = 0; x < controller.page.assignedCMIssues.length; x++)
			{
				if (controller.page.assignedCMIssues[x].issue.id == model)
				{
					return;
				}
			}

			noteService.getIssue(model).then(
				function success(results)
				{
					var cmIssue = {
						acute: false,
						certain: false,
						issue: results,
						issue_id: item.issueId,
						major: false,
						resolved: false,
						unsaved: true
					};
					controller.page.assignedCMIssues.push(cmIssue);

					$scope.$broadcast('noteIssueAdded');
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.removeIssue = function removeIssue(i)
		{
			console.log('removed issue in record ctrl');
			i.unchecked = true;
			var newList = [];
			for (var x = 0; x < controller.page.assignedCMIssues.length; x++)
			{
				if (controller.page.assignedCMIssues[x].issue_id != i.issue_id)
				{
					newList.push(controller.page.assignedCMIssues[x]);
				}
			}
			controller.page.assignedCMIssues = newList;

			$scope.$broadcast('noteIssueRemoved');
		};

		// If inverse === false, return true if the given item is supposed to be shown outisde the 'more' dropdown on the medium view
		// If inverse === true, return the inverse of the above statement,
		controller.mediumNavItemFilter = function mediumNavItemFilter(inverse)
		{
			return function(item)
			{
				var labelsToShow = ['Details', 'Summary', 'Forms', 'Tickler', 'Health Tracker', 'Rx', 'Consultations'];
				var filterValue = $.inArray(item.label, labelsToShow) != -1;

				if (inverse === true)
				{
					return !filterValue;
				}

				return filterValue;
			};
		};

		controller.demographic.age = Juno.Common.Util.calcAge(controller.demographic.dobYear, controller.demographic.dobMonth, controller.demographic.dobDay);
		controller.init();
	}
]);

function toArray(obj)
{ //convert single object to array
	if (obj instanceof Array) return obj;
	if (obj == null) return [];
	return [obj];
}

function zero(n)
{
	if (n < 10) n = "0" + n;
	return n;
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js"), __webpack_require__(/*! moment */ "./node_modules/moment/moment.js")))

/***/ }),

/***/ "./src/record/summary/groupNotesController.js":
/*!****************************************************!*\
  !*** ./src/record/summary/groupNotesController.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Record.Summary').controller('Record.Summary.GroupNotesController', [

	'$scope',
	'$uibModal',
	'$uibModalInstance',
	'$stateParams',
	'$state',
	'$interval',
	'mod',
	'action',
	'user',
	'noteService',
	'securityService',
	'diseaseRegistryService',

	function(
		$scope,
		$uibModal,
		$uibModalInstance,
		$stateParams,
		$state,
		$interval,
		mod,
		action,
		user,
		noteService,
		securityService,
		diseaseRegistryService)
	{

		var controller = this;


		controller.page = {};
		controller.page.title = mod.displayName;
		controller.page.items = mod.summaryItem;
		controller.page.quickLists = [];
		
		//controller.action = action;
		controller.page.code = mod.summaryCode;

		controller.groupNotesForm = {
			assignedCMIssues: []
		};
		controller.groupNotesForm.encounterNote = {
			position: 1
		};


		//set hidden which can can move out of hidden to $scope values
		var now = new Date();
		controller.groupNotesForm.annotation_attrib = "anno" + now.getTime();


		//get access rights
		securityService.hasRight("_eChart", "u", $stateParams.demographicNo).then(
			function success(results)
			{
				controller.page.cannotChange = !results;
			},
			function error(errors)
			{
				console.log(errors);
			});

		diseaseRegistryService.getIssueQuickLists().then(
			function success(results)
			{
				console.log(results);
				controller.page.quickLists = results;
			},
			function error(errors)
			{
				console.log(errors);
			});

		controller.addDxItem = function addDxItem(item)
		{
			for (var x = 0; x < controller.groupNotesForm.assignedCMIssues.length; x++)
			{
				if (controller.groupNotesForm.assignedCMIssues[x].issue.code === item.code && controller.groupNotesForm.assignedCMIssues[x].issue.type === item.codingSystem)
				{
					return;
				}
			}

			diseaseRegistryService.findDxIssue(item.code, item.codingSystem).then(
				function success(results)
				{
					var cmIssue = {
						acute: false,
						certain: false,
						issue: results,
						issue_id: results.id,
						major: false,
						resolved: false,
						unsaved: true
					};
					controller.groupNotesForm.assignedCMIssues.push(cmIssue);
				},
				function error(errors)
				{
					console.log(errors);
				});


		};

		//disable click and keypress if user only has read-access
		controller.checkAction = function checkAction(event)
		{
			if (controller.page.cannotChange)
			{
				event.preventDefault();
				event.stopPropagation();
			}
		};

		displayIssueId = function displayIssueId(issueCode)
		{
			noteService.getIssueId(issueCode).then(
				function success(results)
				{
					controller.page.issueId = results.id;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		displayIssueId(controller.page.code);

		displayGroupNote = function displayGroupNote(item, itemId)
		{
			if (controller.page.items[itemId].noteId != null)
			{
				noteService.getIssueNote(controller.page.items[itemId].noteId).then(
					function success(results)
					{
						//controller.master = angular.copy( "iNote----" +  JSON.stringify(iNote) );
						controller.groupNotesForm.encounterNote = results.encounterNote;
						controller.groupNotesForm.encounterNote.editorNames = mod.editorNames; // Get editor names. TODO: Add editor names to the object on the back end
						controller.groupNotesForm.groupNoteExt = results.groupNoteExt;
						controller.groupNotesForm.assignedCMIssues = results.assignedCMIssues;

						controller.groupNotesForm.assignedCMIssues = [];

						if (results.assignedCMIssues instanceof Array)
						{
							controller.groupNotesForm.assignedCMIssues = results.assignedCMIssues;
						}
						else
						{
							if (results.assignedCMIssues != null)
							{
								controller.groupNotesForm.assignedCMIssues.push(results.assignedCMIssues);
							}
						}

						action = itemId;
						controller.setAvailablePositions();

						controller.removeEditingNoteFlag();

						if (controller.groupNotesForm.encounterNote.position < 1)
						{
							controller.groupNotesForm.encounterNote.position = 1;
						}

					},
					function error(errors)
					{
						console.log(errors);
					});
			}
			else if (controller.page.items[itemId].type === "dx_reg")
			{
				controller.groupNotesForm.assignedCMIssues = [];
				var itemExtra = controller.page.items[itemId].extra;
				diseaseRegistryService.findDxIssue(itemExtra.code, itemExtra.codingSystem).then(
					function success(results)
					{
						var cmIssue = {
							acute: false,
							certain: false,
							issue: results,
							issue_id: results.issueId,
							major: false,
							resolved: false,
							unsaved: true
						};
						console.log("find like issue ", cmIssue, results);
						controller.groupNotesForm.assignedCMIssues.push(cmIssue);
						controller.groupNotesForm.encounterNote = {};
						controller.groupNotesForm.groupNoteExt = {};
						controller.groupNotesForm.encounterNote = {
							position: 1
						};
						action = itemId;
					},
					function error(errors)
					{
						console.log(errors);
					});
			}
		};

		//action is NULL when new , action is some id when not
		if (action != null)
		{
			displayGroupNote(controller.page.items, action);
		}
		else
		{
			//new entry
		}

		controller.setAvailablePositions = function setAvailablePositions()
		{
			controller.availablePositions = [];
			if (controller.page.items == null || controller.page.items.length == 0)
			{
				controller.availablePositions.push(1);
			}
			else
			{
				var x = 0;
				for (x = 0; x < controller.page.items.length; x++)
				{
					controller.availablePositions.push(x + 1);
				}
				if (action == null)
				{
					controller.availablePositions.push(x + 1);
				}
			}
		};

		controller.setAvailablePositions();

		controller.changeNote = function changeNote(item, itemId)
		{
			return displayGroupNote(item, itemId);
		};

		controller.saveGroupNotes = function saveGroupNotes()
		{
			if (controller.groupNotesForm.encounterNote.noteId == null)
			{
				controller.groupNotesForm.encounterNote.noteId = 0;
			}
			controller.groupNotesForm.encounterNote.cpp = true;
			controller.groupNotesForm.encounterNote.editable = true;
			controller.groupNotesForm.encounterNote.isSigned = true;
			controller.groupNotesForm.encounterNote.observationDate = new Date();
			controller.groupNotesForm.encounterNote.appointmentNo = $stateParams.appointmentNo; //TODO: make this dynamic so it changes on edit
			controller.groupNotesForm.encounterNote.encounterType = "";
			controller.groupNotesForm.encounterNote.encounterTime = "";
			controller.groupNotesForm.encounterNote.assignedIssues = controller.groupNotesForm.assignedCMIssues;
			controller.groupNotesForm.encounterNote.summaryCode = controller.page.code; //'ongoingconcerns';

			noteService.saveIssueNote($stateParams.demographicNo, controller.groupNotesForm).then(
				function success(results)
				{
					$uibModalInstance.dismiss('cancel');
					$state.transitionTo($state.current, $stateParams, {
						reload: true,
						inherit: false,
						notify: true
					});

				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.removeGroupNoteIssue = function removeGroupNoteIssue(i)
		{
			console.log('removing issue');
			i.unchecked = true;
			var newList = [];
			for (var x = 0; x < controller.groupNotesForm.assignedCMIssues.length; x++)
			{
				if (controller.groupNotesForm.assignedCMIssues[x].issue_id != i.issue_id)
				{
					newList.push(controller.groupNotesForm.assignedCMIssues[x]);
				}
			}
			controller.groupNotesForm.assignedCMIssues = newList;
			console.log('NEW LIST: ', newList);
		};

		/*
		 * handle concurrent note edit - EditingNoteFlag
		 */
		controller.doSetEditingNoteFlag = function doSetEditingNoteFlag()
		{
			noteService.setEditingNoteFlag(editingNoteId, user.providerNo).then(
				function success(results)
				{
					if (!results.success)
					{
						if (results.message == "Parameter error") alert("Parameter Error: noteUUID[" + editingNoteId + "] userId[" + user.providerNo + "]");
						else alert("Warning! Another user is editing this note now.");
					}
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.setEditingNoteFlag = function setEditingNoteFlag()
		{
			if (controller.groupNotesForm.encounterNote.uuid == null) return;

			controller.removeEditingNoteFlag(); //remove any previous flag actions
			editingNoteId = controller.groupNotesForm.encounterNote.uuid;

			itvSet = $interval(controller.doSetEditingNoteFlag(), 30000); //set flag every 5 min
			itvCheck = $interval(function()
			{
				noteService.checkEditNoteNew(editingNoteId, user.providerNo).then(
					function success(results)
					{
						if (!results.success)
						{ //someone else wants to edit this note
							alert("Warning! Another user tries to edit this note. Your update may be replaced by later revision(s).");

							//cancel 10sec check after 1st time warning when another user tries to edit this note
							$interval.cancel(itvCheck);
							itvCheck = null;
						}
					},
					function error(errors)
					{
						console.log(errors);
					});
			}, 10000); //check for new edit every 10 sec
		};

		controller.removeEditingNoteFlag = function removeEditingNoteFlag()
		{
			if (editingNoteId != null)
			{
				noteService.removeEditingNoteFlag(editingNoteId, user.providerNo);
				$interval.cancel(itvSet);
				$interval.cancel(itvCheck);
				itvSet = null;
				itvCheck = null;
				editingNoteId = null;
			}
		};


		controller.removeIssue = function removeIssue(i)
		{
			i.unchecked = true;
		};
		controller.restoreIssue = function restoreIssue(i)
		{
			i.unchecked = false;
		};

		controller.archiveGroupNotes = function archiveGroupNotes()
		{
			//controller.master = angular.copy(controller.groupNotesForm);
			controller.groupNotesForm.encounterNote.archived = true;
			controller.saveGroupNotes();
		};

		controller.cancel = function cancel()
		{
			$uibModalInstance.dismiss('cancel');
		};

		//temp load into pop-up
		controller.openRevisionHistory = function openRevisionHistory(encounterNote)
		{
			console.log(controller.groupNotesForm);
			var rnd = Math.round(Math.random() * 1000);
			win = "win" + rnd;
			var url = "../CaseManagementEntry.do?method=notehistory&noteId=" + encounterNote.noteId;
			window.open(url, win, "scrollbars=yes, location=no, width=647, height=600", "");
		};

		controller.searchIssues = function searchIssues(term)
		{
			var search = {
				'term': term
			};
			return noteService.searchIssues(search, 0, 100).then(
				function success(results)
				{
					var resp = [];
					for (var x = 0; x < results.content.length; x++)
					{
						resp.push({
							issueId: results.content[x].id,
							code: results.content[x].description + '(' + results.content[x].code + ')'
						});
					}
					if (results.total > results.content.length)
					{
						//warn user there's more results somehow?
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.assignIssue = function assignIssue(item, model, label)
		{
			for (var x = 0; x < controller.groupNotesForm.assignedCMIssues.length; x++)
			{
				if (controller.groupNotesForm.assignedCMIssues[x].issue.id == model)
				{
					return;
				}
			}

			noteService.getIssue(model).then(
				function success(results)
				{
					var cmIssue = {
						acute: false,
						certain: false,
						issue: results,
						issue_id: item.issueId,
						major: false,
						resolved: false,
						unsaved: true
					};
					controller.groupNotesForm.assignedCMIssues.push(cmIssue);
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.isSelected = function isSelected(item)
		{
			if (item.id == action)
			{
				return "group-note-selected";
			}
		};

		controller.addToDxRegistry = function addToDxRegistry(issue)
		{
			diseaseRegistryService.addToDxRegistry($stateParams.demographicNo, issue).then(
				function success(results)
				{
					console.log(results);
				},
				function error(errors)
				{
					console.log(errors);
				});

		};

	}
]);

/***/ }),

/***/ "./src/record/summary/module.js":
/*!**************************************!*\
  !*** ./src/record/summary/module.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Record.Summary', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/record/summary/recordPrintController.js":
/*!*****************************************************!*\
  !*** ./src/record/summary/recordPrintController.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Record.Summary').controller('Record.Summary.RecordPrintController', [

	'$scope',
	'$uibModal',
	'$uibModalInstance',
	'$filter',
	'mod',
	'action',
	'$stateParams',
	'summaryService',

	function(
		$scope,
		$uibModal,
		$uibModalInstance,
		$filter,
		mod,
		action,
		$stateParams,
		summaryService)
	{

		var controller = this;

		controller.pageOptions = {};
		controller.pageOptions.printType = {};
		controller.pageOptions.dates = {};
		controller.page = {};
		controller.page.selectedWarning = false;

		/*
		 *If mod length > 0 than the user has selected a note. = Default to Note
		 *Other wise default to All
		 */
		var atleastOneSelected = false;
		for (var i = 0; i < mod.length; i++)
		{
			if (mod[i].isSelected)
			{
				atleastOneSelected = true;
				i = mod.length;
			}
		}

		if (atleastOneSelected)
		{
			console.log("mod len ", mod.length);
			controller.pageOptions.printType = 'selected';
		}
		else
		{
			console.log("printType = all");
			controller.pageOptions.printType = 'all';
		}

		controller.printToday = function printToday()
		{
			controller.pageOptions.printType = 'dates';
			var date = new Date();
			controller.pageOptions.dates.start = date;
			controller.pageOptions.dates.end = date;
		};

		controller.cancelPrint = function cancelPrint()
		{
			$uibModalInstance.dismiss('cancel');
		};


		controller.sendToPhr = function sendToPhr()
		{
			var queryString = "demographic_no=" + $stateParams.demographicNo;
			queryString = queryString + "&module=echart";

			if (controller.pageOptions.printType == 'all')
			{
				queryString = queryString + '&notes2print=ALL_NOTES';
			}
			else if (controller.pageOptions.printType == 'selected')
			{
				//get array
				var selectedList = [];
				for (var i = 0; i < mod.length; i++)
				{
					if (mod[i].isSelected)
					{
						selectedList.push(mod[i].noteId);
					}
				}
				queryString = queryString + '&notes2print=' + selectedList.join();
			}
			else if (controller.pageOptions.printType == 'dates')
			{
				queryString = queryString + '&notes2print=ALL_NOTES';
				queryString = queryString + '&startDate=' + controller.pageOptions.dates.start.getTime();
				queryString = queryString + '&endDate=' + controller.pageOptions.dates.end.getTime();
			}

			if (controller.pageOptions.cpp)
			{
				queryString = queryString + '&printCPP=true';
			}
			if (controller.pageOptions.cpp)
			{
				queryString = queryString + '&printRx=true';
			}
			if (controller.pageOptions.cpp)
			{
				queryString = queryString + '&printLabs=true';
			}
			console.log("QS" + queryString);

			if (controller.pageOptions.printType === 'selected' && selectedList.length == 0)
			{
				controller.page.selectedWarning = true;
				return;
			}
			else
			{
				controller.page.selectedWarning = false;
			}

			window.open('../SendToPhr.do?' + queryString, '_blank');
		};

		controller.print = function print()
		{
			var selectedList = [];
			for (var i = 0; i < mod.length; i++)
			{
				if (mod[i].isSelected)
				{
					selectedList.push(mod[i].noteId);
				}
			}

			if (controller.pageOptions.printType === 'selected' && selectedList.length == 0)
			{
				controller.page.selectedWarning = true;
				return;
			}
			else
			{
				controller.page.selectedWarning = false;
			}

			controller.pageOptions.selectedList = selectedList;
			var ops = encodeURIComponent(JSON.stringify(controller.pageOptions));
			window.open('../ws/rs/recordUX/' + $stateParams.demographicNo + '/print?printOps=' + ops, '_blank');



		};
	}
]);

/***/ }),

/***/ "./src/record/summary/saveWarningController.js":
/*!*****************************************************!*\
  !*** ./src/record/summary/saveWarningController.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Record.Summary').controller('Record.Summary.SaveWarningController', [

	'$rootScope',
	'$scope',
	'$uibModal',
	'$uibModalInstance',
	'saveSignNote',
	'cancelNoteEdit',

	function(
		$rootScope,
		$scope,
		$uibModal,
		$uibModalInstance,
		saveSignNote,
		cancelNoteEdit)
	{

		var controller = this;

		// Cancel warning and maintain note changes
		controller.cancel = function cancel()
		{
			$uibModalInstance.dismiss('cancel');
		};

		// Save changes to the note
		controller.save = function save()
		{
			if (angular.isFunction(saveSignNote))
			{
				saveSignNote();
			}
			$uibModalInstance.close(true);
		};

		// Clear changes to the note
		controller.clearChanges = function clearChanges()
		{
			if (angular.isFunction(cancelNoteEdit))
			{
				cancelNoteEdit();
			}
			$uibModalInstance.close(true);
		};
	}
]);

/***/ }),

/***/ "./src/record/summary/summaryController.js":
/*!*************************************************!*\
  !*** ./src/record/summary/summaryController.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {/*

    Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for the
    Department of Family Medicine
    McMaster University
    Hamilton
    Ontario, Canada

*/
angular.module('Record.Summary').controller('Record.Summary.SummaryController', [

	'$rootScope',
	'$scope',
	'$http',
	'$location',
	'$stateParams',
	'$state',
	'$filter',
	'$uibModal',
	'$interval',
	'user',
	'noteService',
	'summaryService',
	'securityService',

	function(
		$rootScope,
		$scope,
		$http,
		$location,
		$stateParams,
		$state,
		$filter,
		$uibModal,
		$interval,
		user,
		noteService,
		summaryService,
		securityService)
	{

		var controller = this;

		console.log("in summary Ctrl ", $stateParams);

		controller.page = {};
		controller.page.columnOne = {};
		controller.page.columnOne.modules = {};

		controller.page.columnThree = {};
		controller.page.columnThree.modules = {};
		controller.page.selectedNotes = [];

		controller.page.notes = {};
		controller.index = 0;
		controller.page.notes = {};
		controller.page.notes.notelist = [];
		controller.busy = false;
		controller.page.noteFilter = {};
		controller.page.currentFilter = 'none';
		controller.page.onlyNotes = false; // Filter for only showing encounter notes
		controller.page.onlyMine = false; // Filter for only showing notes the current user has created/edited

		controller.demographicNo = $stateParams.demographicNo;

		//get access rights
		securityService.hasRight("_eChart", "r", $stateParams.demographicNo).then(
			function success(results)
			{
				controller.page.canRead = results;
			},
			function error(errors)
			{
				console.log(errors);
			});
		securityService.hasRight("_eChart", "u", $stateParams.demographicNo).then(
			function success(results)
			{
				controller.page.cannotChange = !results;
			},
			function error(errors)
			{
				console.log(errors);
			});
		securityService.hasRight("_eChart", "w", $stateParams.demographicNo).then(
			function success(results)
			{
				controller.page.cannotAdd = !results;
			},
			function error(errors)
			{
				console.log(errors);
			});

		//disable click and keypress if user only has read-access
		controller.checkAction = function checkAction(event)
		{
			if (controller.page.cannotChange)
			{
				event.preventDefault();
				event.stopPropagation();
			}
		};

		controller.openRevisionHistory = function openRevisionHistory(note)
		{
			//var rnd = Math.round(Math.random() * 1000);
			win = "revision";
			var url = "../CaseManagementEntry.do?method=notehistory&noteId=" + note.noteId;
			window.open(url, win, "scrollbars=yes, location=no, width=647, height=600", "");
		};

		controller.openRx = function openRx(demoNo)
		{
			win = "Rx" + demoNo;
			var url = "../oscarRx/choosePatient.do?demographicNo=" + demoNo;
			window.open(url, win, "scrollbars=yes, location=no, width=900, height=600", "");
		};

		controller.openAllergies = function openAllergies(demoNo)
		{
			win = "Allergy" + demoNo;
			var url = "../oscarRx/showAllergy.do?demographicNo=" + demoNo;
			window.open(url, win, "scrollbars=yes, location=no, width=900, height=600", "");
			return false;
		};

		controller.openPreventions = function openPreventions(demoNo)
		{
			win = "prevention" + demoNo;
			var url = "../oscarPrevention/index.jsp?demographic_no=" + demoNo;
			window.open(url, win, "scrollbars=yes, location=no, width=900, height=600", "");
			return false;
		};

		controller.openAssessments = function openAssessments()
		{
			// open forms tab with "Library" list selected
			$state.go('record.forms', {formListId: 1});
		};

		//Note display functions
		controller.addMoreItems = function addMoreItems()
		{
			console.log(controller.busy);
			if (controller.busy) return;

			controller.busy = true;

			noteService.getNotesFrom($stateParams.demographicNo, controller.index, 20, controller.page.noteFilter).then(
				function success(results)
				{
					console.log('whats the data', angular.isUndefined(results.notelist), results.notelist);
					if (angular.isDefined(results.notelist))
					{
						//controller.page.notes = data;
						if (results.notelist instanceof Array)
						{
							console.log("ok its in an array", controller.busy);
							for (var i = 0; i < results.notelist.length; i++)
							{
								controller.page.notes.notelist.push(results.notelist[i]);
							}
						}
						else
						{
							controller.page.notes.notelist.push(results.notelist);
						}
						controller.index = controller.page.notes.notelist.length;
					}
					controller.busy = false;
				},
				function error(errors)
				{
					console.log(errors);
					controller.error = errors;
					controller.busy = false;
				}
			);

		};

		controller.addMoreItems();

		controller.editNote = function editNote(note)
		{
			$rootScope.$emit('loadNoteForEdit', note);
		};

		// Call the findGroupNote function and search for the given note, if found, open the groupNote editor
		controller.editGroupNote = function editGroupNote(note)
		{
			var obj = controller.findGroupNote(note);

			if (obj !== null)
			{
				obj.module.editorNames = note.editorNames;
				controller.gotoState(obj.note, obj.module, obj.note.id);
				return;
			}
		};

		// There is probably a better way of doing this
		controller.findGroupNote = function findGroupNote(note)
		{
			var moduleList = controller.page.columnOne.modules;
			for (var i = 0; i < moduleList.length; i++)
			{

				var summaryItems = moduleList[i].summaryItem;
				for (var k = 0; k < summaryItems.length; k++)
				{
					if (summaryItems[k].noteId === note.noteId)
					{
						return {
							note: summaryItems[k],
							module: moduleList[i]
						};
					}
				}
			}
			return null;
		};

		controller.page.currentEditNote = {};

		controller.isNoteBeingEdited = function isNoteBeingEdited(note)
		{

			if (note.uuid === controller.page.currentEditNote.uuid && note.uuid !== null)
			{
				return true;
			}

			return false;
		};

		$rootScope.$on('currentlyEditingNote', function(event, data)
		{
			controller.page.currentEditNote = data;
		});

		// TODO
		$rootScope.$on('stopEditingNote', function()
		{
			controller.page.currentEditNote = {};
		});

		$rootScope.$on('noteSaved', function(event, data)
		{
			console.log('new data coming in', data);
			var noteFound = false;
			for (var notecount = 0; notecount < controller.page.notes.notelist.length; notecount++)
			{
				if (data.uuid == controller.page.notes.notelist[notecount].uuid)
				{
					console.log('uuid ' + data.uuid + ' notecount ' + notecount, data, controller.page.notes.notelist[notecount]);
					controller.page.notes.notelist[notecount] = data;
					noteFound = true;
					break;
				}
			}

			if (noteFound == false)
			{
				controller.page.notes.notelist.unshift(data);
			}
			controller.index = controller.page.notes.notelist.length;
		});

		// Check if note regular note, if not, we must either display the group note edit window or have no edit option
		controller.isRegularNote = function isRegularNote(note)
		{
			if (note.document || note.rxAnnotation || note.eformData || note.encounterForm || note.invoice || note.ticklerNote || note.cpp)
			{
				return false;
			}

			return true;
		};

		//Note display functions
		controller.setColor = function setColor(note)
		{
			if (note.eformData)
			{
				return {
					'border-left-color': '#DFF0D8',
				};
			}
			else if (note.document)
			{
				return {
					'border-left-color': '#617CB2',
				};
			}
			else if (note.rxAnnotation)
			{
				return {
					'border-left-color': '#D3D3D3',
				};
			}
			else if (note.encounterForm)
			{
				return {
					'border-left-color': '#BCAD75',
				};
			}
			else if (note.invoice)
			{
				return {
					'border-left-color': '##FF7272',
				};
			}
			else if (note.ticklerNote)
			{
				return {
					'border-left-color': '#FFA96F',
				};
			}
			else if (note.cpp)
			{
				return {
					'border-left-color': '#9B8166',
				};
			}
		};

		controller.showNoteHeader = function showNoteHeader(note)
		{
			if (controller.page.onlyNotes)
			{
				if (note.document || note.rxAnnotation || note.eformData || note.encounterForm || note.invoice || note.ticklerNote || note.cpp)
				{
					return false;
				}
			}
			return true;
		};

		controller.showNote = function showNote(note)
		{
			if (controller.page.onlyNotes)
			{
				if (note.document || note.rxAnnotation || note.eformData || note.encounterForm || note.invoice || note.ticklerNote || note.cpp)
				{
					return false;
				}
			}

			if(controller.page.onlyMine)
			{
				// Hide note if the current user is not in the list of editors.
				// TODO: Decide later if we want to filter based on this rather than the author alone
				// if (!Juno.Common.Util.isInArray(user.formattedName, note.editorNames))
				// 	return false;

				// Hide the note if the current user's provder number does not match that of the note author
				if (user.providerNo !== note.providerNo)
					return false;
			}
			return !note.deleted;
		};

		controller.getNoteHeader = function firstLine(noteObj)
		{
			return  noteObj.note.trim().split('\n')[0]; // First line of the note text, split by newline
		};

		controller.trackerUrl = "";

		controller.getTrackerUrl = function getTrackerUrl(demographicNo)
		{
			controller.trackerUrl = '../oscarEncounter/oscarMeasurements/HealthTrackerPage.jspf?template=tracker&demographic_no=' + demographicNo + '&numEle=4&tracker=slim';
		};

		controller.toggleList = function toggleList(mod)
		{

			// If all the items are displayed, reset displaySize to 5 (min), else, show all the items
			if (mod.displaySize >= mod.summaryItem.length)
			{
				mod.displaySize = 5;
			}
			else
			{
				mod.displaySize = mod.summaryItem.length;
			}
		};

		controller.showMoreItems = function showMoreItems(mod)
		{

			if (!angular.isDefined(mod.summaryItem))
			{
				return false;
			}

			if (mod.summaryItem.length == 0)
			{
				return false;
			}

			return true;
		};

		// Return true if a given section is expanded, otherwise return false
		controller.isSectionExpanded = function isSectionExpanded(mod)
		{
			if (mod.displaySize > 5)
			{
				return true;
			}

			return false;
		};

		// Return true if a given section is empty, otherwise return false
		controller.isSectionEmpty = function isSectionEmpty(mod)
		{
			if (mod.summaryItem.length <= 5)
			{
				return true;
			}

			return false;
		};

		// Returns true if the given note is an unsigned encounter note
		controller.isUnsignedEncounterNote = function isUnsignedEncounterNote(note)
		{
			return (!note.isSigned && !note.cpp && !note.document && !note.ticklerNote && !note.eformData);
		};

		// controller.showMoreItemsSymbol = function(mod)
		// {
		// 	if (!angular.isDefined(mod.summaryItem))
		// 	{
		// 		return "";
		// 	}

		// 	if ((mod.displaySize < mod.summaryItem.length) && mod.displaySize == initialDisplayLimit)
		// 	{
		// 		return "glyphicon glyphicon-chevron-down hand-hover pull-right";
		// 	}
		// 	else if ((mod.displaySize == mod.summaryItem.length) && mod.displaySize != initialDisplayLimit)
		// 	{
		// 		return "glyphicon glyphicon-chevron-up hand-hover pull-right";
		// 	}
		// 	else if (mod.summaryItem.length <= initialDisplayLimit)
		// 	{
		// 		return "glyphicon glyphicon-chevron-down glyphicon-chevron-down-disabled pull-right";
		// 	}
		// 	else
		// 	{
		// 		return "";
		// 	}

		// 	if (controller.isSectionExpanded(mod))
		// 	{
		// 		return "glyphicon glyphicon-chevron-up hand-hover pull-right";
		// 	}

		// 	return "glyphicon glyphicon-chevron-down hand-hover pull-right";

		// };

		function getLeftItems()
		{
			summaryService.getSummaryHeaders($stateParams.demographicNo, 'left').then(
				function success(results)
				{
					console.log("left", results);
					controller.page.columnOne.modules = results;
					fillItems(controller.page.columnOne.modules);
				},
				function error(errors)
				{
					console.log(errors);
					controller.error = errors;
				});
		}

		getLeftItems();


		function getRightItems()
		{
			summaryService.getSummaryHeaders($stateParams.demographicNo, 'right').then(
				function success(results)
				{
					console.log("right", results);
					controller.page.columnThree.modules = results;
					fillItems(controller.page.columnThree.modules);
				},
				function error(errors)
				{
					console.log(errors);
					controller.error = errors;
				});
		}

		getRightItems();

		var summaryLists = {};

		function fillItems(itemsToFill)
		{

			for (var i = 0; i < itemsToFill.length; i++)
			{
				summaryLists[itemsToFill[i].summaryCode] = itemsToFill[i];

				summaryService.getFullSummary($stateParams.demographicNo, itemsToFill[i].summaryCode).then(
					function success(results)
					{
						if (angular.isDefined(results.summaryItem))
						{
							if (results.summaryItem instanceof Array)
							{
								summaryLists[results.summaryCode].summaryItem = results.summaryItem;
							}
							else
							{
								summaryLists[results.summaryCode].summaryItem = [results.summaryItem];
							}
						}
					},
					function error(errors)
					{
						console.log(errors);
					});
			}
		}


		controller.editGroupedNotes = function editGroupedNotes(size, mod, action)
		{

			var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/record/summary/groupNotes.jsp',
				controller: 'Record.Summary.GroupNotesController as groupNotesCtrl',
				backdrop: 'static',
				windowClass: 'notesModal',
				size: size,
				resolve:
				{
					mod: function()
					{
						return mod;
					},
					action: function()
					{
						return action;
					},
					user: function()
					{
						return user;
					}
				}
			});

			modalInstance.result.then(
				function success(results)
				{
					console.log(results);
				},
				function error(errors)
				{
					if (editingNoteId != null)
					{
						noteService.removeEditingNoteFlag(editingNoteId, user.providerNo);
						$interval.cancel(itvSet);
						itvSet = null;
						$interval.cancel(itvCheck);
						itvCheck = null;
						editingNoteId = null;
					}
					console.log('Modal dismissed at: ' + new Date());
					console.log(errors);
				});

			console.log($('#myModal'));
		};


		controller.gotoState = function gotoState(item, mod, itemId)
		{
			console.log('ITEM: ', item);
			console.log('MOD: ', mod);

			if (item == "add")
			{
				controller.editGroupedNotes('md', mod, null);

			}
			else if (item.action == 'add' && item.type == 'dx_reg')
			{

				controller.editGroupedNotes('lg', mod, itemId);

			}
			else if (item.type == 'lab' || item.type == 'document' || item.type == 'rx' || item.type == 'allergy' || item.type == 'prevention' || item.type == 'dsguideline')
			{

				if (item.type == 'rx')
				{
					win = "Rx" + $stateParams.demographicNo;
				}
				else if (item.type == 'allergy')
				{
					win = "Allergy" + $stateParams.demographicNo;
				}
				else if (item.type == 'prevention')
				{
					win = "prevention" + $stateParams.demographicNo;
				}
				else
				{
					//item.type == 'lab' || item.type == 'document'
					//var rnd = Math.round(Math.random() * 1000);
					win = "win_item.type_";
				}

				window.open(item.action, win, "scrollbars=yes, location=no, width=900, height=600", "");
				return false;
			}
			else if (item.action == 'action')
			{
				controller.editGroupedNotes('lg', mod, itemId);

			}
			else
			{
				$state.transitionTo(item.action,
				{
					demographicNo: $stateParams.demographicNo,
					type: item.type,
					id: item.id
				},
				{
					location: 'replace',
					notify: true
				});
			}

		};

		controller.viewEform = function viewEform(eFormId)
		{
			$state.transitionTo('record.forms.view',
				{
					demographicNo: $stateParams.demographicNo,
					type: 'eform',
					id: eFormId
				},
				{
					location: 'replace',
					notify: true
				});
		};
		controller.viewDocument = function viewDocument(documentId)
		{
			// get only document summary items
			let itemArray = summaryLists['incoming'].summaryItem;
			let item = null;

			// find the summary item that matches the document id
			for (let i=0; i < itemArray.length; i++)
			{
				if(itemArray[i].id === documentId) {
					item = itemArray[i];
					break;
				}
			}

			// if we found a matching document, open it
			if(item != null) {
				controller.gotoState(item);
			}
			else
			{
				console.error("item not linked to valid document id:" + documentId);
			}
		};


		controller.showPrintModal = function showPrintModal(mod, action)
		{
			var size = 'lg';
			var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/record/print.jsp',
				controller: 'Record.Summary.RecordPrintController as recordPrintCtrl',
				backdrop: 'static',
				size: size,
				resolve:
				{
					mod: function()
					{
						return mod;
					},

					action: function()
					{
						return action;
					}
				}
			});

			modalInstance.result.then(
				function success(results)
				{
					console.log(results);

				},
				function error(errors)
				{
					console.log('Modal dismissed at: ' + new Date());
					console.log(errors);
				});
		};

		// Toggle whether the note is selected for printing
		controller.toggleIsSelectedForPrint = function toggleIsSelectedForPrint(note)
		{
			note.isSelected = !note.isSelected;
		};

	}
]);


var itvSet = null;
var itvCheck = null;
var editingNoteId = null;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/record/tracker/module.js":
/*!**************************************!*\
  !*** ./src/record/tracker/module.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Record.Tracker', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/record/tracker/trackerController.js":
/*!*************************************************!*\
  !*** ./src/record/tracker/trackerController.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*

    Copyright (c) 2001-2002. Department of Family Medicine, McMaster University. All Rights Reserved.
    This software is published under the GPL GNU General Public License.
    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

    This software was written for the
    Department of Family Medicine
    McMaster University
    Hamilton
    Ontario, Canada

*/

angular.module('Record.Tracker').controller('Record.Tracker.TrackerController', [

	'$rootScope',
	'$scope',
	'$http',
	'$location',
	'$stateParams',
	'$state',
	'$timeout',
	'demographicService',
	'noteService',
	'uxService',

	function(
		$rootScope,
		$scope,
		$http,
		$location,
		$stateParams,
		$state,
		$timeout,
		demographicService,
		noteService,
		uxService)
	{

		var controller = this;
		controller.getTrackerUrl = function getTrackerUrl()
		{

			url = '../oscarEncounter/oscarMeasurements/HealthTrackerPage.jspf?template=tracker&demographic_no=' + $stateParams.demographicNo;

			return url;

		};

		controller.resizeIframe = function resizeIframe(iframe)
		{

			var h = iframe.contentWindow.document.body.scrollHeight;
			if (h > 0)
			{
				iframe.height = h + "px";
				//alert("h > 0");
			}
			//alert("h" + h);
		};
	}
]);

/***/ }),

/***/ "./src/report/module.js":
/*!******************************!*\
  !*** ./src/report/module.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Report', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/report/reportBadAppointmentSheetController.js":
/*!***********************************************************!*\
  !*** ./src/report/reportBadAppointmentSheetController.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Report').controller('Report.ReportBadAppointmentSheetController', [

	'$scope',
	'$log',
	'providerService',
	'$filter',

	function(
		$scope,
		$log,
		providerService,
		$filter)
	{

		var controller = this;

		controller.params = {
			providerNo: '',
			startDate: new Date()
		};

		controller.searchProviders = function searchProviders(val)
		{
			var search = {
				searchTerm: val,
				active: true
			};
			return providerService.searchProviders(search, 0, 10).then(
				function success(results)
				{
					var resp = [];
					for (var x = 0; x < results.length; x++)
					{
						resp.push(
						{
							providerNo: results[x].providerNo,
							name: results[x].firstName + ' ' + results[x].lastName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};
		controller.updateProviderNo = function updateProviderNo(item, model, label)
		{
			controller.params.providerNo = model;
			controller.params.name = label;
		};

		controller.generateReport = function generateReport()
		{
			var p = controller.params;
			var startDate = $filter('date')(p.startDate, 'yyyy-MM-dd');

			var url = '../report/reportapptsheet.jsp?dsmode=all&provider_no=' + p.providerNo + '&sdate=' + startDate;
			window.open(url, 'report_badApptSheet', 'height=900,width=700');
		};
	}
]);

/***/ }),

/***/ "./src/report/reportDaySheetController.js":
/*!************************************************!*\
  !*** ./src/report/reportDaySheetController.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Report').controller('Report.ReportDaySheetController', [

	'$scope',
	'$log',
	'$filter',
	'providerService',

	function(
		$scope,
		$log,
		$filter,
		providerService)
	{

		var controller = this;

		controller.params = {
			providerNo: '',
			type: '',
			startDate: new Date(),
			endDate: new Date(),
			startTime: null,
			endTime: null
		};

		controller.searchProviders = function searchProviders(val)
		{
			var search = {
				searchTerm: val,
				active: true
			};
			return providerService.searchProviders(search, 0, 10).then(
				function success(results)
				{
					var resp = [];
					for (var x = 0; x < results.length; x++)
					{
						resp.push(
						{
							providerNo: results[x].providerNo,
							name: results[x].firstName + ' ' + results[x].lastName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};
		controller.updateProviderNo = function updateProviderNo(item, model, label)
		{
			controller.params.providerNo = model;
			controller.data.providerNo = label;
		};

		controller.generateReport = function generateReport()
		{
			var p = controller.params;
			if (p.type === 'all' || p.type === 'all-nr')
			{
				var startDate = $filter('date')(p.startDate, 'yyyy-MM-dd');
				var endDate = $filter('date')(p.endDate, 'yyyy-MM-dd');

				var startTime = $filter('date')(p.startTime, 'HH:mm');
				var endTime = $filter('date')(p.endTime, 'HH:mm');

				var url = '../report/reportdaysheet.jsp?dsmode=all&provider_no=' + (p.providerNo === '' ? '*' : p.providerNo) + '&sdate=' + startDate + '&edate=' + endDate + '&sTime=' + startTime + '&eTime=' + endTime;

				if (p.type === 'all-nr')
				{
					url += '&rosteredStatus=true';
				}

				window.open(url, 'report_daysheet', 'height=900,width=700');
			}

			if (p.type === 'new')
			{
				var startDate = $filter('date')(p.startDate, 'yyyy-MM-dd');
				var url = '../report/reportdaysheet.jsp?dsmode=new&provider_no=' + (p.providerNo === '' ? '*' : p.providerNo) + '&sdate=' + startDate;
				window.open(url, 'report_daysheet', 'height=900,width=700');
			}
			if (p.type === 'lab')
			{
				var startDate = $filter('date')(p.startDate, 'yyyy-MM-dd');
				var url = '../report/printLabDaySheetAction.do?xmlStyle=labDaySheet.xml&input_date=' + startDate;
				window.open(url, 'report_daysheet', 'height=900,width=700');

			}
			if (p.type === 'billing')
			{
				var startDate = $filter('date')(p.startDate, 'yyyy-MM-dd');
				var url = '../report/printLabDaySheetAction.do?xmlStyle=billDaySheet.xml&input_date=' + startDate;
				window.open(url, 'report_daysheet', 'height=900,width=700');
			}
			if (p.type === 'tab')
			{
				var startDate = $filter('date')(p.startDate, 'yyyy-MM-dd');
				var url = '../report/tabulardaysheetreport.jsp?provider_no=' + (p.providerNo === '' ? '*' : p.providerNo) + '&sdate=' + startDate;
				window.open(url, 'report_daysheet', 'height=900,width=700');
			}
		};

		controller.reset = function reset()
		{
			controller.params = {
				providerNo: '',
				type: '',
				startDate: new Date(),
				endDate: new Date(),
				startTime: null,
				endTime: null
			};
		};
	}
]);

/***/ }),

/***/ "./src/report/reportEdbListController.js":
/*!***********************************************!*\
  !*** ./src/report/reportEdbListController.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Report').controller('Report.ReportEdbListController', [

	'$scope',
	'$log',
	'$filter',

	function(
		$scope,
		$log,
		$filter)
	{

		var controller = this;

		controller.params = {
			startDate: new Date(),
			endDate: new Date(),
			version: '',
			region: 'ON'
		}; //todo: grab region from somewhere

		controller.generateReport = function generateReport()
		{
			$log.log('run edb report');
			var startDate = $filter('date')(controller.params.startDate, 'yyyy-MM-dd');
			var endDate = $filter('date')(controller.params.endDate, 'yyyy-MM-dd');

			var url = '';

			if (controller.params.region === 'BC')
			{
				if (controller.params.version == '05')
				{
					url = '../report/reportbcedblist2007.jsp?startDate=' + startDate + '&endDate=' + endDate;
				}
				else
				{
					url = '../report/reportbcedblist.jsp?startDate=' + startDate + '&endDate=' + endDate;
				}
			}

			if (controller.params.region === 'ON')
			{
				if (controller.params.version == '05')
				{
					url = '../report/reportonedblist.jsp?startDate=' + startDate + '&endDate=' + endDate;
				}
				else
				{
					url = '../report/reportnewedblist.jsp?startDate=' + startDate + '&endDate=' + endDate;
				}
			}


			window.open(url, 'report_edb', 'height=900,width=700');

		};
	}
]);

/***/ }),

/***/ "./src/report/reportFollowUpIntakeController.js":
/*!******************************************************!*\
  !*** ./src/report/reportFollowUpIntakeController.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Report').controller('Report.ReportFollowUpIntakeController', [

	'$scope',
	'$log',
	'$filter',

	function(
		$scope,
		$log,
		$filter)
	{

		var controller = this;

		controller.params = {
			startDate: new Date(),
			endDate: new Date(),
			includePastForms: true
		};

		controller.generateReport = function generateReport()
		{
			$log.log('run follow up intake report');
			var startDate = $filter('date')(controller.params.startDate, 'yyyy-MM-dd');
			var endDate = $filter('date')(controller.params.endDate, 'yyyy-MM-dd');

			var url = '../PMmodule/GenericIntake/Report.do?method=report&type=indepth&startDate=' + startDate + '&endDate=' + endDate + '&includePast=' + controller.params.includePastForms;
			window.open(url, 'report_followup_intake', 'height=900,width=700');

		};
	}
]);

/***/ }),

/***/ "./src/report/reportNoShowAppointmentSheetController.js":
/*!**************************************************************!*\
  !*** ./src/report/reportNoShowAppointmentSheetController.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Report').controller('Report.ReportNoShowAppointmentSheetController', [

	'$scope',
	'$log',
	'$filter',
	'providerService',

	function(
		$scope,
		$log,
		$filter,
		providerService)
	{

		var controller = this;

		controller.params = {
			providerNo: '',
			startDate: new Date()
		};

		controller.searchProviders = function searchProviders(val)
		{
			var search = {
				searchTerm: val,
				active: true
			};
			return providerService.searchProviders(search, 0, 10).then(
				function success(results)
				{
					var resp = [];
					for (var x = 0; x < results.length; x++)
					{
						resp.push(
						{
							providerNo: results[x].providerNo,
							name: results[x].firstName + ' ' + results[x].lastName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};
		controller.updateProviderNo = function updateProviderNo(item, model, label)
		{
			controller.params.providerNo = model;
			controller.params.name = label;
		};

		controller.generateReport = function generateReport()
		{
			var p = controller.params;
			var startDate = $filter('date')(p.startDate, 'yyyy-MM-dd');
			var url = '../report/reportnoshowapptlist.jsp?provider_no=' + p.providerNo + '&sdate=' + startDate;
			window.open(url, 'report_noShowApptSheet', 'height=900,width=700');
		};
	}
]);

/***/ }),

/***/ "./src/report/reportOldPatientsController.js":
/*!***************************************************!*\
  !*** ./src/report/reportOldPatientsController.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Report').controller('Report.ReportOldPatientsController', [

	'$scope',
	'$log',
	'providerService',

	function(
		$scope,
		$log,
		providerService)
	{

		var controller = this;

		controller.params = {
			providerNo: '',
			age: 65
		};

		controller.searchProviders = function searchProviders(val)
		{
			var search = {
				searchTerm: val,
				active: true
			};
			return providerService.searchProviders(search, 0, 10).then(
				function success(response)
				{
					var resp = [];
					for (var x = 0; x < response.length; x++)
					{
						resp.push(
						{
							providerNo: response[x].providerNo,
							name: response[x].firstName + ' ' + response[x].lastName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};
		controller.updateProviderNo = function updateProviderNo(item, model, label)
		{
			controller.params.providerNo = model;
			controller.params.name = label;
		};

		controller.generateReport = function generateReport()
		{
			var p = controller.params;
			var url = '../report/reportpatientchartlistspecial.jsp?provider_no=' + (p.providerNo === '' ? '*' : p.providerNo) + '&age=' + p.age;
			window.open(url, 'report_oldpatients', 'height=900,width=700');
		};
	}
]);

/***/ }),

/***/ "./src/report/reportPatientChartListController.js":
/*!********************************************************!*\
  !*** ./src/report/reportPatientChartListController.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Report').controller('Report.ReportPatientChartListController', [

	'$scope',
	'$log',
	'providerService',

	function(
		$scope,
		$log,
		providerService)
	{

		var controller = this;

		controller.params = {};

		controller.searchProviders = function searchProviders(val)
		{
			var search = {
				searchTerm: val,
				active: true
			};
			return providerService.searchProviders(search, 0, 10).then(
				function success(results)
				{
					var resp = [];
					for (var x = 0; x < results.length; x++)
					{
						resp.push(
						{
							providerNo: results[x].providerNo,
							name: results[x].firstName + ' ' + results[x].lastName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};
		controller.updateProviderNo = function updateProviderNo(item, model, label)
		{
			controller.params.providerNo = model;
			controller.params.name = label;
		};

		controller.generateReport = function generateReport()
		{
			var p = controller.params;
			if (!p.providerNo)
			{
				alert('Please enter a provider');
				return false;
			}
			var url = '../report/reportpatientchartlist.jsp?provider_no=' + p.providerNo;
			window.open(url, 'report_patientchartlist', 'height=900,width=700');
		};
	}
]);

/***/ }),

/***/ "./src/report/reportRegistrationIntakeController.js":
/*!**********************************************************!*\
  !*** ./src/report/reportRegistrationIntakeController.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Report').controller('Report.ReportRegistrationIntakeController', [

	'$scope',
	'$log',
	'$filter',

	function(
		$scope,
		$log,
		$filter)
	{

		var controller = this;

		controller.params = {
			startDate: new Date(),
			endDate: new Date(),
			includePastForms: true
		};

		controller.generateReport = function generateReport()
		{
			$log.log('run registration intake report');
			var startDate = $filter('date')(controller.params.startDate, 'yyyy-MM-dd');
			var endDate = $filter('date')(controller.params.endDate, 'yyyy-MM-dd');

			var url = '../PMmodule/GenericIntake/Report.do?method=report&type=quick&startDate=' + startDate + '&endDate=' + endDate + '&includePast=' + controller.params.includePastForms;
			window.open(url, 'report_registration_intake', 'height=900,width=700');

		};
	}
]);

/***/ }),

/***/ "./src/report/reportSHMentalHealthController.js":
/*!******************************************************!*\
  !*** ./src/report/reportSHMentalHealthController.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Report').controller('Report.ReportSHMentalHealthController', [

	'$scope',
	'$log',
	'$filter',

	function(
		$scope,
		$log,
		$filter)
	{
		var controller = this;

		controller.params = {
			startDate: new Date()
		};

		controller.generateReport = function generateReport()
		{
			$log.log('run sh mental health report');
			var startDate = $filter('date')(controller.params.startDate, 'yyyy-MM-dd');

			var url = '../PMmodule/StreetHealthIntakeReportAction.do?startDate=' + startDate;
			window.open(url, 'report_sh', 'height=900,width=700');

		};
	}
]);

/***/ }),

/***/ "./src/report/reportsController.js":
/*!*****************************************!*\
  !*** ./src/report/reportsController.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Figure out what to do with this. 
angular.module('oscarProviderViewModule').factory('ReportNavigation', [ '$rootScope', function($rootScope)
{
	return {
		location: '',

		load: function(msg)
		{
			this.location = msg;
		}
	};
}]);

angular.module('Report').controller('Report.ReportsController', [

	'$scope',
	'$state',
	'$filter',
	'$log',
	'ReportNavigation',

	function(
		$scope,
		$state,
		$filter,
		$log,
		ReportNavigation)
	{

		var controller = this;

		$scope.$emit('configureShowPatientList', false);

		controller.reports = [
			{
				name: 'Daysheets',
				templateUrl: 'src/report/report_daysheet.jsp'
			},
			{
				name: 'Active Patients',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../report/reportactivepatientlist.jsp'
			},
			{
				name: 'Old Patients',
				templateUrl: 'src/report/report_oldPatients.jsp'
			},
			{
				name: 'Patient Chart List',
				templateUrl: 'src/report/report_patientChartList.jsp'
			},
			{
				name: 'EDB List',
				templateUrl: 'src/report/report_edb_list.jsp'
			},
			{
				name: 'Bad Appointments',
				templateUrl: 'src/report/report_badAppointments.jsp'
			},
			{
				name: 'No Show Appointments',
				templateUrl: 'src/report/report_noShowAppointments.jsp'
			},
			{
				name: 'Consultations',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../oscarReport/ConsultationReport.jsp'
			},
			{
				name: 'Lab Requisitions',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../oscarReport/LabReqReport.jsp'
			},
			{
				name: 'Preventions',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../oscarPrevention/PreventionReporting.jsp'
			},
			{
				name: 'Injections',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../oscarReport/InjectionReport2.jsp'
			},
			{
				name: 'Demographic Report Tool',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../oscarReport/ReportDemographicReport.jsp'
			},
			{
				name: 'Patient Study List',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../report/demographicstudyreport.jsp'
			},
			{
				name: 'Chronic Disease Management',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../oscarReport/oscarMeasurements/SetupSelectCDMReport.do'
			},
			{
				name: 'Waiting List',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../oscarWaitingList/SetupDisplayWaitingList.do?waitingListId='
			},
			{
				name: 'Forms',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../report/reportFormRecord.jsp'
			},
			{
				name: 'Clinical',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../report/ClinicalReports.jsp'
			},
			{
				name: 'SCBP demographic Report',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../report/reportBCARDemo.jsp'
			},
			{
				name: 'Report By Template',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../oscarReport/reportByTemplate/homePage.jsp'
			},
			{
				name: 'General Forms',
				group: 'CAISI',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../PMmodule/ClientManager.do?method=getGeneralFormsReport'
			},
			{
				name: 'Registration Intake',
				group: 'CAISI',
				templateUrl: 'src/report/report_registration_intake.jsp'
			},
			{
				name: 'Follow-up Intake',
				group: 'CAISI',
				templateUrl: 'src/report/report_followup_intake.jsp'
			},
			{
				name: 'Activity Report',
				group: 'CAISI',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../PMmodule/Reports/ProgramActivityReport.do'
			},
			{
				name: 'UCF Report',
				group: 'CAISI',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../SurveyManager.do?method=reportForm'
			},
			{
				name: 'SH Mental Health Report',
				group: 'CAISI',
				templateUrl: 'src/report/report_sh_mental_health.jsp'
			},
			{
				name: 'OSIS Report',
				group: 'Public Health',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../oscarReport/OSISReport.jsp'
			},
			{
				name: 'One Time Consult CDS Report',
				group: 'Public Health',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../oscarReport/CDSOneTimeConsultReport.jsp'
			},

		];

		controller.init = function init()
		{
			controller.reportGroup = "";
			controller.reportGroups = controller.getReportGroups();
			controller.reportSidebar = ReportNavigation;
			controller.test = controller.reportSidebar.url;
		};

		controller.editDemographicSet = function editDemographicSet()
		{
			controller.selectReport(
			{
				name: 'Demographic Set Edit',
				templateUrl: 'src/report/report_iframe.jsp',
				iframeUrl: '../oscarReport/demographicSetEdit.jsp'
			});
		};

		controller.getReports = function getReports()
		{
			if (controller.reportGroup != null && controller.reportGroup.length > 0)
			{
				var filtered = $filter('filter')(controller.reports,
				{
					group: controller.reportGroup
				});
				return filtered;

			}
			return controller.reports;
		};

		controller.getReportGroups = function getReportGroups()
		{
			var groups = [
			{
				value: '',
				label: 'All Groups'
			}];
			var groupMap = {};

			for (var i = 0; i < controller.reports.length; i++)
			{
				if (controller.reports[i].group != null)
				{
					groupMap[controller.reports[i].group] = controller.reports[i].group;
				}
			}

			for (var key in groupMap)
			{
				groups.push(
				{
					value: key,
					label: key
				});
			}

			return groups;
		};

		controller.selectReport = function selectReport(report)
		{
			controller.currentReport = report;

			if (report.direct === true)
			{
				window.open(report.window.url, report.name, 'width=' + report.window.width + '&height=' + report.window.height);
			}
			else
			{
				ReportNavigation.load(report.templateUrl);
			}
		};


		// controller.selectReport(controller.reports[0]);

		// controller.openReportWindow = function openReportWindow(url, name)
		// {
		// 	window.open(url, name, 'height=900,width=700');
		// };
	}
]);

/***/ }),

/***/ "./src/schedule/appointmentAddController.js":
/*!**************************************************!*\
  !*** ./src/schedule/appointmentAddController.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Schedule').controller('Schedule.AppointmentAddController', [

	'$scope',
	'$filter',
	'$uibModalInstance',
	'$timeout',
	'demographicService',
	'demographicsService',
	'me',
	'providerService',
	'scheduleService',
	'apptDate',

	function(
		$scope,
		$filter,
		$uibModalInstance,
		$timeout,
		demographicService,
		demographicsService,
		me,
		providerService,
		scheduleService,
		apptDate)
	{

		var controller = this;

		controller.types = [];

		controller.urgencies = [
		{
			value: '',
			label: 'Normal'
		},
		{
			value: 'critical',
			label: 'Critical'
		}];

		controller.me = me;

		controller.appointment = {
			status: 't',
			appointmentDate: $filter('date')(apptDate, 'yyyy-MM-dd'),
			startTime: '09:00 AM',
			type: '',
			duration: 15,
			providerName: me.formattedName,
			providerNo: me.providerNo,
			reason: '',
			notes: '',
			location: '',
			resources: '',
			critical: ''
		};

		scheduleService.getTypes().then(
			function success(results)
			{
				controller.types = results.types;
				controller.types.unshift(
				{
					name: '',
					duration: 15,
					location: '',
					notes: '',
					reason: '',
					resources: ''
				});
				console.log(JSON.stringify(results));
			},
			function error(errors)
			{
				console.log(errors);
			});

		controller.selectType = function selectType()
		{
			var type = null;

			for (var x = 0; x < controller.types.length; x++)
			{
				if (controller.types[x].name == controller.appointment.type)
				{
					type = controller.types[x];
					break;
				}
			}
			if (type != null)
			{
				controller.appointment.duration = type.duration;
				controller.appointment.location = type.location;
				controller.appointment.notes = type.notes;
				controller.appointment.reason = type.reason;
				controller.appointment.resources = type.resources;

			}

		};

		controller.close = function close()
		{
			if (controller.needsUpdate)
			{
				if (confirm("You have unsaved changes, are you sure?"))
				{
					$uibModalInstance.close(false);
				}
			}
			else
			{
				$uibModalInstance.close(false);
			}

		};

		controller.validate = function validate()
		{
			var t = controller.appointment;

			controller.errors = [];

			if (t.demographic == null)
			{
				controller.errors.push('You must select a patient');
			}
			if (t.providerNo == null)
			{
				controller.errors.push('You must select a provider');
			}
			if (t.startTime == null || t.startTime.length == 0)
			{
				controller.errors.push('start time is required');
			}
			if (t.duration == null || t.duration.length == 0)
			{
				controller.errors.push('start time is required');
			}

			if (controller.errors.length > 0)
			{
				return false;
			}
			return true;
		};

		controller.save = function save()
		{
			controller.showErrors = true;
			if (!controller.validate())
			{
				return;
			}

			var x = {};
			x.status = controller.appointment.status;
			x.appointmentDate = controller.appointment.appointmentDate;
			x.startTime12hWithMedian = controller.appointment.startTime;
			x.type = controller.appointment.type;
			x.duration = controller.appointment.duration;
			x.providerNo = controller.appointment.providerNo;
			x.reason = controller.appointment.reason;
			x.notes = controller.appointment.notes;
			x.location = controller.appointment.location;
			x.resources = controller.appointment.resources;
			x.urgency = controller.appointment.critical;
			x.demographicNo = controller.appointment.demographicNo;

			// TODO: make sure this works with the updated backend service (response changed)
			console.log(JSON.stringify(x));
			scheduleService.addAppointment(x).then(
				function success(results)
				{
					$uibModalInstance.close(true);
				},
				function error(errors)
				{
					console.log(errors);
				});


		};


		controller.updateDemographicNo = function updateDemographicNo(item, model, label)
		{

			demographicService.getDemographic(model).then(
				function success(results)
				{
					controller.appointment.demographicNo = results.demographicNo;
					controller.appointment.demographicName = '';
					controller.appointment.demographic = results;

				},
				function error(errors)
				{
					console.log(errors);
				});

		};

		controller.searchPatients = function searchPatients(term)
		{
			var search = {
				type: 'Name',
				'term': term,
				active: true,
				integrator: false,
				outofdomain: true
			};
			return demographicsService.search(search, 0, 25).then(
				function(results)
				{
					var resp = [];
					for (var x = 0; x < results.content.length; x++)
					{
						resp.push(
						{
							demographicNo: results.content[x].demographicNo,
							name: results.content[x].lastName + ',' + results.content[x].firstName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.searchProviders = function searchProviders(val)
		{
			var search = {
				searchTerm: val,
				active: true
			};
			return providerService.searchProviders(search, 0, 10).then(
				function success(results)
				{
					var resp = [];
					for (var x = 0; x < results.length; x++)
					{
						resp.push(
						{
							providerNo: results[x].providerNo,
							name: results[x].firstName + ' ' + results[x].lastName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};


		controller.updateProviderNo = function updateProviderNo(item, model, label)
		{
			controller.appointment.providerNo = model;
			controller.appointment.providerName = label;
		};
	}
]);

/***/ }),

/***/ "./src/schedule/appointmentViewController.js":
/*!***************************************************!*\
  !*** ./src/schedule/appointmentViewController.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Schedule').controller('Schedule.AppointmentViewController', [

	'$scope',
	'$filter',
	'$uibModalInstance',
	'$timeout',
	'demographicService',
	'me',
	'providerService',
	'scheduleService',
	'appointment',
	'statusList',

	function(
		$scope,
		$filter,
		$uibModalInstance,
		$timeout,
		demographicService,
		me,
		providerService,
		scheduleService,
		appointment,
		statusList)
	{

		var controller = this;

		controller.me = me;
		controller.appointment = appointment;
		controller.statusList = statusList.content;
		controller.appointmentUpdate = {};

		controller.appointmentWriteAccess = false;

		controller.getStatus = function getStatus(status)
		{

			for (var x = 0; x < controller.statusList.length; x++)
			{
				console.log(JSON.stringify(controller.statusList[x]));
				if (controller.statusList[x].status == status)
				{
					return controller.statusList[x].description;
				}
			}
			return status;
		};

		controller.close = function close()
		{
			$uibModalInstance.close(false);
		};

		controller.deleteAppointment = function deleteAppointment()
		{
			if (confirm('Are you sure you want to delete this appointment?'))
			{
				scheduleService.deleteAppointment(controller.appointment.id).then(
					function success(results)
					{
						$uibModalInstance.close(true);
					},
					function error(errors)
					{
						console.log(errors);
					});
			}
		};

		controller.searchProviders = function searchProviders(val)
		{
			var search = {
				searchTerm: val,
				active: true
			};
			return providerService.searchProviders(search, 0, 10).then(
				function success(results)
				{
					var resp = [];
					for (var x = 0; x < results.length; x++)
					{
						resp.push(
						{
							providerNo: results[x].providerNo,
							name: results[x].firstName + ' ' + results[x].lastName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};


		controller.updateProviderNo = function updateProviderNo(item, model, label)
		{
			controller.appointment.providerNo = model;
			controller.appointment.providerName = label;
		};


		controller.editProvider = function editProvider()
		{
			controller.showProviderFormControl = true;
			controller.appointmentUpdate.providerNo = controller.appointment.providerNo;
			controller.appointmentUpdate.providerName = controller.appointment.provider.lastName + "," + controller.appointment.provider.lastName;
		};

		controller.updateProvider = function updateProvider(item, model, label)
		{
			controller.needsUpdate = true;
			controller.appointment.providerNo = model;
			controller.appointment.providerName = label;
			controller.showProviderFormControl = false;
		};

		controller.cancelProviderUpdate = function cancelProviderUpdate()
		{
			controller.appointmentUpdate.providerNo = null;
			controller.appointmentUpdate.providerName = null;

			controller.showProviderFormControl = false;

		};

		controller.showAppointmentHistory = function showAppointmentHistory()
		{
			scheduleService.appointmentHistory(controller.appointment.demographicNo).then(
				function success(results)
				{
					alert(JSON.stringify(results));
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.noShowAppointment = function noShowAppointment()
		{
			scheduleService.noShowAppointment(controller.appointment.id).then(
				function success(results)
				{
					$uibModalInstance.close(true);
				},
				function error(errors)
				{
					console.log(errors);
				});

		};

		controller.cancelAppointment = function cancelAppointment()
		{
			scheduleService.cancelAppointment(controller.appointment.id).then(
				function success(results)
				{
					$uibModalInstance.close(true);
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

	}
]);

/***/ }),

/***/ "./src/schedule/eventController.js":
/*!*****************************************!*\
  !*** ./src/schedule/eventController.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(moment, $) {


//=========================================================================
// Calendar Event Controller
//=========================================================================/

angular.module('Schedule').controller('Schedule.EventController', [

		'$scope',
		'$q',
		'$timeout',
		'$state',
		'$uibModal',
		'$uibModalInstance',

		'errorsService',

		'demographicService',
		'securityService',
		'keyBinding',
		'focus',
		'type', 'parentScope', 'label', 'editMode', 'data',

	function (
		$scope, $q, $timeout, $state, $uibModal, $uibModalInstance,

		messagesFactory,

		demographicService,
		securityService,
		keyBinding,
		focus,
		type, parentScope, label, editMode, data
	)
{
	$scope.parentScope = parentScope;


	//=========================================================================
	// Access Control
	//=========================================================================/


	//=========================================================================
	// Local scope variables
	//=========================================================================/

	$scope.label = label;
	$scope.editMode = editMode;

	$scope.keyBinding = keyBinding;
	$scope.eventUuid = null;

	$scope.schedule = data.schedule;

	$scope.eventData = {
		startDate: null,
		startTime: null,
		endDate: null,
		endTime: null,
		reason: null,
		notes: null
	};

	$scope.timeInterval = data.timeInterval;

	$scope.lastEventLength = null;

	$scope.patientTypeahead = {};
	$scope.autocompleteValues = {};

	$scope.activeTemplateEvents = [];

	$scope.eventStatuses = $scope.parentScope.eventStatuses;
	$scope.eventStatusOptions = [];
	$scope.selectedEventStatus = null;
	$scope.defaultEventStatus = null;

	$scope.selectedSiteName = null;

	$scope.timepickerFormat = "h:mm A";

	$scope.fieldValueMapping = {
		startDate: 'Start Date',
		startTime: 'Start Time',
		endDate: 'End Date',
		endTime: 'End Time'
	};
	$scope.displayMessages = messagesFactory.factory();

	$scope.initialized = false;
	$scope.working = false;

	$scope.demographicModel = {
		demographicNo: null,
		fullName: null,
		hasPhoto: true,
		patientPhotoUrl: '/imageRenderingServlet?source=local_client&clientId=0',
		data: {
			birthDate: null,
			healthNumber: null,
			ontarioVersionCode: null,
			phoneNumberPrimary: null
		},
		clear: function clear()
		{
			this.demographicNo = null;
			this.fullName = null;
			this.patientPhotoUrl = '/imageRenderingServlet?source=local_client&clientId=0';
			this.data.birthDate = null;
			this.data.healthNumber = null;
			this.data.ontarioVersionCode = null;
			this.data.phoneNumberPrimary = null;
		},
		fillData: function fillData(data)
		{
			this.demographicNo = data.demographicNo;
			this.fullName = Juno.Common.Util.formatName(data.firstName, data.lastName);
			this.patientPhotoUrl = '/imageRenderingServlet?source=local_client&clientId=' + (data.demographicNo? data.demographicNo: 0);

			var dateOfBirth = null;
			if(Juno.Common.Util.exists(data.dob))
			{
				// XXX: Perhaps put this in util?  Is this date format common for juno?
				dateOfBirth = moment(data.dob, "YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ", false);
			}
			else
			{
				dateOfBirth = Juno.Common.Util.getDateMomentFromComponents(
					data.dobYear, data.dobMonth, data.dobDay);
			}
			this.data.birthDate = Juno.Common.Util.formatMomentDate(dateOfBirth);


			this.data.healthNumber = data.hin;
			// XXX: no version code when loaded from autocomplete?  Does that matter?
			this.data.ontarioVersionCode = data.ver;
			this.data.phoneNumberPrimary = data.phone;
		},
		uploadPhoto: function uploadPhoto(file){}
	};

	//=========================================================================
	// Init
	//=========================================================================/

	$scope.init = function init()
	{
		if (!securityService.hasPermission('scheduling_create'))
		{
			$timeout(function ()
			{
				$scope.cancel();
			});
		}

		$scope.demographicModel.clear();

		var momentStart = data.startTime;
		var momentEnd = data.endTime;

		$scope.eventData.startTime = Juno.Common.Util.formatMomentTime(momentStart, $scope.timepickerFormat);
		$scope.eventData.endTime = Juno.Common.Util.formatMomentTime(momentEnd, $scope.timepickerFormat);
		$scope.eventData.startDate = Juno.Common.Util.formatMomentDate(momentStart);
		$scope.eventData.endDate = Juno.Common.Util.formatMomentDate(momentEnd);

		$scope.lastEventLength = momentEnd.diff(momentStart, 'minutes');

		// maintain a list of the 'active' templates based on start time
		$scope.setActiveTemplateEvents();

		//$scope.eventStatusOptions.push("");
		for(var key in $scope.eventStatuses)
		{
			if($scope.eventStatuses.hasOwnProperty(key))
			{
				$scope.eventStatusOptions.push($scope.eventStatuses[key]);
			}
		}
		$scope.defaultEventStatus = data.defaultEventStatus;
		$scope.setSelectedEventStatus(data.eventData.eventStatusCode);


		if(editMode)
		{
			$scope.eventUuid = data.eventData.appointmentNo;
			$scope.eventData.reason = data.eventData.reason;
			$scope.eventData.notes = data.eventData.notes;

			// either load the patient data and init the autocomplete
			// or ensure the patient model is clear
			$scope.initPatientAutocomplete(data.eventData.demographicNo).then(function() {
				$scope.initialized = true;
			});
			$scope.selectedSiteName = data.eventData.site;
		}
		else
		{
			// create mode: adjust the end date (if needed)
			// and clear the patient model
			$scope.adjustEndDatetime();
			$scope.demographicModel.clear();

			// autofocus the patient field
			focus.element("#input-patient");

			$scope.initialized = true;
		}
	};

	$scope.initPatientAutocomplete = function initPatientAutocomplete(demographicNo)
	{
		var deferred = $q.defer();

		if(Juno.Common.Util.exists(demographicNo) && demographicNo != 0)
		{
			demographicService.getDemographic(demographicNo).then(function(data)
			{
				$scope.patientTypeahead = data;
				deferred.resolve();
			},
			function(errors)
			{
				console.log('error initializing patient autocomplete', errors);
				$scope.demographicModel.clear();
				deferred.resolve();
			});
		}
		else
		{
			$scope.demographicModel.clear();
			deferred.resolve();
		}

		return deferred.promise;
	};


	//=========================================================================
	// Private methods
	//=========================================================================/

	$scope.setSelectedEventStatus = function setSelectedEventStatus(selectedCode)
	{
		var eventStatusCode = $scope.defaultEventStatus;

		if(Juno.Common.Util.exists(selectedCode))
		{
			eventStatusCode = selectedCode;
		}

		if(!Juno.Common.Util.exists(eventStatusCode) ||
			!Juno.Common.Util.exists($scope.eventStatuses[eventStatusCode]))
		{
			// if not set or found just pick the first one
			eventStatusCode = $scope.eventStatusOptions[0].displayLetter;
		}

		$scope.selectedEventStatus = $scope.eventStatuses[eventStatusCode];
	};

	// Make a list of the types of appointments available for this appointment
	$scope.setActiveTemplateEvents = function setActiveTemplateEvents()
	{
		// Get templates that happen during the time period
		var momentStart = Juno.Common.Util.getDateAndTimeMoment(
			$scope.eventData.startDate, $scope.formattedTime($scope.eventData.startTime));
		var momentEnd = Juno.Common.Util.getDateAndTimeMoment(
			$scope.eventData.endDate, $scope.formattedTime($scope.eventData.endTime));

		var activeEvents = [];

		// Loop through the events for this day
		for(var i = 0; i < data.events.length; i++)
		{
			if(data.events[i].rendering != "background" || data.events[i].resourceId != $scope.schedule.uuid)
			{
				continue;
			}

			var event = angular.copy(data.events[i]);

			// if start time is before event end time or if end time is after event start
			event.start = Juno.Common.Util.getDatetimeNoTimezoneMoment(event.start);
			event.end = Juno.Common.Util.getDatetimeNoTimezoneMoment(event.end);

			if(momentStart.isValid() && momentEnd.isValid() &&
				event.start.isValid() && event.end.isValid() &&
				momentStart.isBefore(event.end) && momentEnd.isAfter(event.start))
			{
				event.availabilityType = data.availabilityTypes[event.scheduleTemplateCode];
				activeEvents.push(event);
			}
		}

		$scope.activeTemplateEvents = activeEvents;
	};

	$scope.adjustEndDatetime = function adjustEndDatetime(lengthMinutes)
	{
		// adjusts the end time to the specified length or
		// adjusts to keep the event length the same as it last was

		var momentStart = Juno.Common.Util.getDateAndTimeMoment(
			$scope.eventData.startDate, $scope.formattedTime($scope.eventData.startTime));

		if(momentStart.isValid())
		{
			var newEventLength = Juno.Common.Util.exists(lengthMinutes) ?
				lengthMinutes : $scope.lastEventLength;

			var momentEnd = momentStart.add(newEventLength, 'minutes');

			$scope.eventData.endDate = Juno.Common.Util.formatMomentDate(momentEnd);
			$scope.eventData.endTime = Juno.Common.Util.formatMomentTime(momentEnd, $scope.timepickerFormat);
		}
	};

	$scope.updateLastEventLength = function updateLastEventLength()
	{
		// saves the current event length, if the date/times are valid

		var momentStart = Juno.Common.Util.getDateAndTimeMoment(
			$scope.eventData.startDate, $scope.formattedTime($scope.eventData.startTime));
		var momentEnd = Juno.Common.Util.getDateAndTimeMoment(
			$scope.eventData.endDate, $scope.formattedTime($scope.eventData.endTime));

		if(momentStart.isValid() && momentEnd.isValid())
		{
			var eventLength = momentEnd.diff(momentStart, 'minutes');
			if(eventLength > 0)
			{
				$scope.lastEventLength = eventLength;
			}
		}
	};

	$scope.validateForm = function validateForm()
	{
		$scope.displayMessages.clear();

		Juno.Common.Util.validateDateString($scope.eventData.startDate,
			$scope.displayMessages, 'startDate', 'Start Time', true);

		Juno.Common.Util.validateTimeString($scope.formattedTime($scope.eventData.startTime),
			$scope.displayMessages, 'startTime', 'Start Time', true);

		Juno.Common.Util.validateDateString($scope.eventData.endDate,
			$scope.displayMessages, 'endDate', 'End Time', true);

		Juno.Common.Util.validateTimeString($scope.formattedTime($scope.eventData.endTime),
			$scope.displayMessages, 'endTime', 'End Time', true);

		// if all the date/time fields look good, validate range
		if(!$scope.displayMessages.has_errors())
		{
			var startDatetime = Juno.Common.Util.getDateAndTimeMoment(
				$scope.eventData.startDate, $scope.formattedTime($scope.eventData.startTime));
			var endDatetime = Juno.Common.Util.getDateAndTimeMoment(
				$scope.eventData.endDate, $scope.formattedTime($scope.eventData.endTime));

			if(endDatetime.isSame(startDatetime) ||
				endDatetime.isBefore(startDatetime))
			{
				$scope.displayMessages.addStandardError("The appointment must end after it starts");
			}
		}

		return !$scope.displayMessages.has_errors();
	};

	$scope.saveEvent = function saveEvent()
	{
		var deferred = $q.defer();

		var startDatetime = Juno.Common.Util.getDateAndTimeMoment(
				$scope.eventData.startDate, $scope.formattedTime($scope.eventData.startTime));

		var endDatetime = Juno.Common.Util.getDateAndTimeMoment(
				$scope.eventData.endDate, $scope.formattedTime($scope.eventData.endTime));


		parentScope.saveEvent(
			editMode,
			{
				appointmentNo: $scope.eventUuid,
				startTime: startDatetime,
				endTime: endDatetime,
				reason: $scope.eventData.reason,
				notes: $scope.eventData.notes,
				providerNo: $scope.schedule.uuid,
				eventStatusCode: $scope.selectedEventStatus.displayLetter,
				demographicNo: $scope.demographicModel.demographicNo,
				site: $scope.selectedSiteName
			}
		).then(
			function(results)
			{
				if(parentScope.processSaveResults(results, $scope.displayMessages))
				{
					deferred.resolve(results);
				}
				else
				{
					deferred.reject(results);
				}
			},
			function (results)
			{
				parentScope.processSaveResults(results, $scope.displayMessages);
				deferred.reject();
			});

		return deferred.promise;
	};

	$scope.deleteEvent = function deleteEvent()
	{
		var deferred = $q.defer();

		parentScope.deleteEvent($scope.eventUuid).then(function()
		{
			deferred.resolve();

		}, function()
		{
			deferred.reject();
		});

		return deferred.promise;
	};

	$scope.formattedTime = function formattedTime(time_str)
	{
		// the time picker format is HH:MM AM - need to strip spaces
		return time_str.replace(/ /g,'');
	};

	$scope.loadPatientFromTypeahead = function loadPatientFromTypeahead(patientTypeahead)
	{
		$scope.demographicModel.fillData(patientTypeahead);
	};

	//=========================================================================
	// Watches
	//=========================================================================/

	// when the start date is changed,
	// update the active template events
	$scope.$watch('startDate', function(newStartDate, oldStartDate)
	{
		// avoid running first time this fires during initialization
		if(newStartDate !== oldStartDate)
		{
			$scope.setActiveTemplateEvents();
			$scope.adjustEndDatetime();
		}
	});

	// when the start time is changed,
	// update the active template events and adjust the end time
	$scope.$watch('startTime', function(newStartTime, oldStartTime)
	{
		// avoid running first time this fires during initialization
		if(newStartTime !== oldStartTime)
		{
			$scope.setActiveTemplateEvents();
			$scope.adjustEndDatetime();
		}
	});

	// when the end date is changed, track the event length
	$scope.$watch('endDate', function(newEndDate, oldEndDate)
	{
		// avoid running first time this fires during initialization
		if(newEndDate !== oldEndDate)
		{
			$scope.setActiveTemplateEvents();
			$scope.updateLastEventLength();
		}
	});

	// when the end time is changed, track the event length
	$scope.$watch('endTime', function(newEndTime, oldEndTime)
	{
		// avoid running first time this fires during initialization
		if(newEndTime !== oldEndTime)
		{
			$scope.setActiveTemplateEvents();
			$scope.updateLastEventLength();
		}
	});

	$scope.$watch('patientTypeahead', function()
	{
		$scope.loadPatientFromTypeahead($scope.patientTypeahead);
	});

	//=========================================================================
	// Public methods
	//=========================================================================/

	$scope.loadedNewPhoto = function loadedNewPhoto(file, event)
	{
		if(file == null)
		{
			return;
		}
		$scope.preview_patient_image = file;
		$scope.new_photo = true;
		$scope.demographicModel.hasPhoto = true;
		$scope.demographicModel.uploadPhoto(file);
	};

	$scope.isWorking = function isWorking()
	{
		return $scope.working;
	};

	$scope.isInitialized = function isInitialized()
	{
		return $scope.initialized;
	};

	$scope.isPatientSelected = function isPatientSelected()
	{
		return Juno.Common.Util.exists($scope.demographicModel.demographicNo);
	};

	$scope.clearPatient = function clearPatient()
	{
		$scope.autocompleteValues.patient = null;
		$scope.demographicModel.clear();
	};

	$scope.setEventLength = function setEventLength(minutes)
	{
		$scope.adjustEndDatetime(minutes);
	};

	$scope.save = function save()
	{
		if(!$scope.validateForm())
		{
				return false;
		}

		$scope.working = true;
		$scope.saveEvent().then(function()
		{
			$scope.parentScope.refetchEvents();
			$uibModalInstance.close();
			$scope.working = false;
		}, function()
		{
			console.log($scope.displayMessages.field_errors()['location']);
			if(!$scope.displayMessages.has_standard_errors())
			{
				$scope.displayMessages.add_generic_fatal_error();
			}
			$scope.working = false;
		});
	};

	$scope.del = function del()
	{
		$scope.working = true;
		$scope.deleteEvent().then(function()
		{
			$scope.parentScope.refetchEvents();
			$uibModalInstance.close();
			$scope.working = false;
		}, function()
		{
			$scope.displayMessages.add_generic_fatal_error();
			$scope.working = false;
		});
	};

	$scope.cancel = function cancel()
	{
		$uibModalInstance.dismiss('cancel');
	};

	$scope.saveAndBill = function saveAndBill()
	{
		if(!$scope.validateForm())
		{
	  		return false;
		}

		$scope.working = true;
		$scope.saveEvent().then(function()
		{
			$scope.parentScope.refetchEvents();
			$uibModalInstance.close();
			$scope.working = false;
			$scope.parentScope.openCreateInvoice(
				$scope.eventUuid,
				$scope.schedule.uuid,
				$scope.demographicModel.demographicNo);
		}, function()
		{
			$scope.displayMessages.add_generic_fatal_error();
			$scope.working = false;
		});
	};

	$scope.viewInvoices = function viewInvoices()
	{
		$scope.parentScope.open_view_invoices($scope.eventUuid);
	};

	$scope.createPatient = function createPatient()
	{
		var editModeCallback = function() { return false; };
		var onSaveCallback = function() { return $scope.onPatientModalSave; };
		var loadErrorLinkPatientFn = function() { return $scope.onPatientModalSave; };

		$scope.create_patient_dialog = parentScope.calendar_api_adapter.openPatientDialog(
				editModeCallback, onSaveCallback, loadErrorLinkPatientFn);
	};

	$scope.modify_patient = function modify_patient()
	{
		if(!$scope.demographicModel.demographicNo)
		{
			return;
		}

		var editModeCallback = function() { return true; };
		var onSaveCallback = function() { return $scope.onPatientModalSave; };
		var loadErrorLinkPatientFn = function() { return $scope.onPatientModalSave; };

		$scope.modify_patient_dialog = parentScope.calendar_api_adapter.openPatientDialog(
				editModeCallback, onSaveCallback, loadErrorLinkPatientFn);
	};

	// for callback on create/edit patient modal
	$scope.onPatientModalSave = function onPatientModalSave(demographicNo)
	{
		// load the newly created/updated patient
		$scope.demographicModel.demographicNo = demographicNo;
		$scope.initPatientAutocomplete();
	};

	$scope.searchPatients = function searchPatients(term)
	{
		var search = {
			type: 'Name',
			'term': term,
			status: 'active',
			integrator: false,
			outofdomain: true
		};
		return demographicsService.search(search, 0, 25).then(
			function(results)
			{
				var resp = [];
				for (var x = 0; x < results.content.length; x++)
				{
					resp.push(
						{
							demographicNo: results.content[x].demographicNo,
							name: Juno.Common.Util.formatName(
								results.content[x].firstName, results.content[x].lastName)
						});
				}
				return resp;
			},
			function error(errors)
			{
				console.log(errors);
			});
	};

	$scope.newDemographic = function newDemographic(size)
	{
		var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/patient/newPatient.jsp',
				controller: 'Patient.NewPatientController as newPatientCtrl',
				backdrop: 'static',
				size: size
			});

		modalInstance.result.then(
			function success(results)
			{
				console.log(results);
				console.log('patient #: ', results.demographicNo);

				$scope.initPatientAutocomplete(results.demographicNo)
			},
			function error(errors)
			{
				console.log('Modal dismissed at: ' + new Date());
				console.log(errors);
			});

		console.log($('#myModal'));
	};


	//=========================================================================
	//  Key Bindings
	//=========================================================================

	$scope.keyBindSettings =
	{
		"ctrl+enter": {
			title: 'Ctrl+Enter',
			tooltip: 'Save',
			description: 'Save appointment',
			callback_fn: function enter_callback()
			{
				if(!$scope.isWorking())
				{
					$scope.save();
				}
			},
			target: null
		},
		"ctrl+shift+enter": {
			title: 'Ctrl+Shift+Enter',
			tooltip: 'Save And Bill',
			description: 'Save and bill for appointment',
			callback_fn: function enter_callback()
			{
				if(!$scope.isWorking())
				{
					$scope.saveAndBill();
				}
			},
			target: null
		}
	};
	$scope.keyBinding.bindKeyGlobal("ctrl+enter", $scope.keyBindSettings["ctrl+enter"]);
	$scope.keyBinding.bindKeyGlobal("ctrl+shift+enter", $scope.keyBindSettings["ctrl+shift+enter"]);
}]);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js"), __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/schedule/module.js":
/*!********************************!*\
  !*** ./src/schedule/module.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Schedule', ['Common', 'Common.Services', 'PatientList']);

/***/ }),

/***/ "./src/schedule/scheduleController.js":
/*!********************************************!*\
  !*** ./src/schedule/scheduleController.js ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(moment, $) {/* harmony import */ var _generated_api_AppointmentApi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../generated/api/AppointmentApi */ "./generated/api/AppointmentApi.ts");
/* harmony import */ var _generated_api_AppointmentApi__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_generated_api_AppointmentApi__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _generated_api_ScheduleApi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../generated/api/ScheduleApi */ "./generated/api/ScheduleApi.ts");
/* harmony import */ var _generated_api_ScheduleApi__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_generated_api_ScheduleApi__WEBPACK_IMPORTED_MODULE_1__);




angular.module('Schedule').controller('Schedule.ScheduleController', [

	'$scope',
	'$stateParams',
	'$q',
	'$http',
	'$httpParamSerializer',
	'$uibModal',
	'$state',
	'focusService',
	'scheduleService',
	'securityService',
	'uiCalendarConfig',

	function(
		$scope,
		$stateParams,
		$q,
		$http,
		$httpParamSerializer,
		$uibModal,
		$state,
		focusService,
		scheduleService,
		securityService,
		uiCalendarConfig
	)
	{
		//var controller = this;

		// XXX: put this address somewhere else
		$scope.appointmentApi = new _generated_api_AppointmentApi__WEBPACK_IMPORTED_MODULE_0__["AppointmentApi"]($http, $httpParamSerializer,
			'http://localhost:9090/ws/rs');

		$scope.scheduleApi = new _generated_api_ScheduleApi__WEBPACK_IMPORTED_MODULE_1__["ScheduleApi"]($http, $httpParamSerializer,
			'http://localhost:9090/ws/rs');


		//=========================================================================
		// Local scope variables
		//=========================================================================/

		$scope.calendarName = 'cpCalendar';
		$scope.initialized = false;
		$scope.calendarLoading = false;

		$scope.uiConfig = {};
		$scope.uiConfigApplied = {};
		$scope.eventSources = [];
		$scope.selectedSchedule = null;
		$scope.selectedSiteName = null;
		$scope.selectedTimeInterval = null;

		// cpCalendar control object.  The cpCalendar directive puts its control API methods in
		// this object.
		$scope.cpCalendarControl = {};


		// Parameters from directive controller


		$scope.schedules = [];
		$scope.scheduleOptions = [];
		$scope.resourceOptions = [];
		$scope.siteOptions = [];
		$scope.defaultEventColor = "#333";
		$scope.defaultTimeInterval = '00:15:00';
		$scope.timeIntervalOptions =
			['00:05:00','00:10:00','00:15:00','00:30:00'];
		$scope.selectedTimeInterval = $scope.defaultTimeInterval;
		$scope.defaultAutoRefreshMinutes = 3;
		$scope.defaultCalendarView = 'agendaWeek';
		$scope.eventStatuses = {};
		$scope.rotateStatuses = [];
		$scope.availabilityTypes = {};
		$scope.resourceOptionHash = {};
		$scope.events = [];
		$scope.scheduleTemplates = {};
		$scope.sites = {};

		$scope.openingDialog = false;
		$scope.dialog = null;


		// Global State parameters
		$scope.defaultDate = null;
		$scope.selectedDate = null;
		$scope.scheduleViewName = null;
		$scope.scheduleDefault = null;
		$scope.scheduleTimeInterval = null;
		$scope.scheduleAutoRefresh = null;
		$scope.scheduleAutoRefreshMinutes = null;

		$scope.scheduleService = scheduleService;


		$scope.init = function init()
		{
			$scope.uiConfig.calendar.defaultView = $scope.calendarViewName();

			// XXX: loadScheduleTemplates seems to not be used

			//{
				$scope.loadAvailabilityTypes().then(function()
				{
					$scope.loadEventStatuses().then(function()
					{
						$scope.loadScheduleOptions().then(function()
						{
							$scope.loadSiteOptions().then(function()
							{
								$scope.loadDefaultSelections();

								$scope.loadSelectedSchedules().then(function()
								{
									$scope.setCalendarResources();

									$scope.setEventSources();

									$scope.initEventsAutoRefresh();

									$scope.applyUiConfig($scope.uiConfig);
									console.log("-- Calendar Initialized ----------------------------");
									$scope.initialized = true;
								});
							});
						});
					});
				});
			//});
		};


		//=========================================================================
		// Public Methods
		//=========================================================================/

		$scope.calendar = function calendar()
		{
			return uiCalendarConfig.calendars[$scope.calendarName];
		};

		$scope.isSchedulingEnabled = function isSchedulingEnabled()
		{
			return true;
		};

		$scope.isInitialized = function isInitialized()
		{
			return $scope.initialized;
		};

		$scope.hasSchedules = function hasSchedules()
		{
			return $scope.schedules.length > 0;
		};

		$scope.hasSites = function hasSites()
		{
			return $scope.siteOptions.length > 0;
		};

		$scope.getTimeIntervalOptions = function getTimeIntervalOptions()
		{
			return $scope.timeIntervalOptions;
		};

		$scope.getScheduleOptions = function getScheduleOptions()
		{
			return $scope.scheduleOptions;
		};

		$scope.getSiteOptions = function getSiteOptions()
		{
			if(!angular.isDefined($scope.selectedSite) || $scope.selectedSite === null)
			{
				$scope.selectedSite = $scope.siteOptions[0];
			}

			return $scope.siteOptions;
		};

		$scope.viewName = function viewName()
		{
			var viewName = $scope.scheduleViewName;

			if(!Juno.Common.Util.exists(viewName))
			{
				viewName = $scope.defaultCalendarView;
			}

			return viewName;
		};

		$scope.calendarEvents = function calendarEvents(start, end, timezone, callback)
		{
			// load the events for each of the loaded schedules
			var promise_array = [];
			for(var i = 0; i < $scope.schedules.length; i++)
			{
				promise_array.push(
					$scope.loadScheduleEvents(
						$scope.schedules[i].uuid, $scope.selectedSiteName, start, end));
			}

			// once all the events are loaded, concat them together and callback
			$q.all(promise_array).then(
				function success(results_array)
				{
					$scope.events = Array.prototype.concat.apply([], results_array);

					try
					{
						callback($scope.events);
					}
					catch(err)
					{
						// the callback throws an error on first load, ignore
					}
				}
			);
		};

		$scope.showTimeIntervals = function showTimeIntervals()
		{
			return $scope.viewName() !== 'month';
		};

		$scope.changeView = function changeView(view)
		{
			// if switching to or from resourceDay view, need to update schedules
			var reload_schedules = false;
			if(view === 'resourceDay' || $scope.scheduleViewName === 'resourceDay')
			{
				reload_schedules = true;
			}

			// save the new view to global state so it gets picked up in rendering
			$scope.scheduleViewName = view;

			if(reload_schedules)
			{
				$scope.loadSelectedSchedules().then(
					function success()
					{
						$scope.setCalendarResources();
						$scope.updateCalendarView();
					});
			}
			else
			{
				$scope.updateCalendarView();
			}
		};

		$scope.showLegend = function showLegend()
		{
			// if already opening a dialog or have one open, ignore and return
			if($scope.openingDialog || $scope.dialog)
			{
				return;
			}
			$scope.openingDialog = true;

			var data = {
				event_statuses: $scope.eventStatuses,
				availability_types: $scope.availabilityTypes
			};

			$scope.dialog = $uibModal.open({
				animation: false,
				backdrop: 'static',
				controller: 'Schedule.LegendController',
				templateUrl: 'code/schedule/legend.html',
				resolve: {
					data: function() { return data }
				}
			});

			// when the dialog closes clear the variable
			$scope.dialog.closed.then(function() {
				$scope.dialog = null;
			});

			$scope.openingDialog = false;
		};

		$scope.refetchEvents = function refetchEvents()
		{
			$scope.calendar().fullCalendar('refetchEvents');
		};

		$scope.changeDate = function changeDate(date)
		{
			$scope.calendar().fullCalendar('gotoDate', date);
		};

		$scope.isAgendaView = function isAgendaView()
		{
			return ($scope.viewName() != 'resourceDay')
		};


		//=========================================================================
		// Private methods
		//=========================================================================/

		$scope.getSelectedSchedule = function getSelectedSchedule(scheduleOptions)
		{
			// priority: last used from global state, then preference setting,
			// then default (first in the list)
			var selectedUuid = null;
			if($scope.scheduleDefault)
			{
				selectedUuid = $scope.scheduleDefault;
			}

			if(Juno.Common.Util.exists(selectedUuid))
			{
				// only choose it if it can be found in the options list
				for(var i = 0; i < scheduleOptions.length; i++)
				{
					if(selectedUuid === scheduleOptions[i].uuid)
					{
						return scheduleOptions[i];
					}
				}
			}

			if(scheduleOptions.length > 0)
			{
				// select the first schedule in the list by default
				return scheduleOptions[0];
			}

			return null;
		};

		$scope.loadSelectedSchedules = function loadSelectedSchedules()
		{
			var deferred = $q.defer();

			var promiseArray = [];

			if(
				Juno.Common.Util.exists($scope.selectedSchedule.providerNos) &&
				angular.isArray($scope.selectedSchedule.providerNos)
			)
			{
				// TODO: this is really gross and I don't like it
				// Potentially put this in the calendarApiAdapter
				angular.forEach($scope.selectedSchedule.providerNos, function(providerNo)
				{
					promiseArray.push($scope.loadSchedule(providerNo.toString()));
				});

				if($scope.selectedSchedule.providerNos.length > 1)
				{
					// Set the calendar to resource mode.  All of these values need to be set.
					$scope.selectedResources = $scope.buildSelectedResources($scope.selectedSchedule.providerNos);
					$scope.uiConfig.calendar.resources = $scope.selectedResources;
					$scope.uiConfig.calendar.defaultView = "resourceDay";

					// save the new view to global state so it gets picked up in rendering
					$scope.scheduleViewName = 'resourceDay';
					$scope.updateCalendarView();
				}
				else
				{
					// Reset everything to single-provider view mode
					$scope.uiConfig.calendar.defaultView = "agendaWeek";
					$scope.scheduleViewName = 'agendaWeek';
					$scope.uiConfig.calendar.resources = false;
				}

				$scope.applyUiConfig($scope.uiConfig);
			}
			else if(
				$scope.viewName() !== 'resourceDay' &&
				$scope.selectedSchedule !== null
			)
			{
				promiseArray.push(
					$scope.loadSchedule($scope.selectedSchedule.uuid));
			}
			else
			{
				angular.forEach($scope.selectedResources, function(selected)
				{
					promiseArray.push($scope.loadSchedule(selected.uuid));
				});
			}

			// Loop through the schedules added above and add them to the schedule list.
			$q.all(promiseArray).then(
				function success(resultsArray)
				{
					$scope.schedules = [];
					for(var i = 0; i < resultsArray.length; i++)
					{
						$scope.schedules[i] = resultsArray[i].data;
					}
					deferred.resolve(resultsArray);
				}, function error(errors)
				{
					console.log('errors');
				});

			return deferred.promise;
		};

		$scope.loadSchedule = function loadSchedule(providerId)
		{
			var deferred = $q.defer();

			// TODO: fill up availabilities and relations, or figure out how to show that info without them
			var schedule = {
				uuid: providerId,
				availabilities: [], // TODO: figure out if these have a Juno equivalent, I don't think
									// TODO: they do.  They are things like holidays and vacation days
				relations: [],
				events: []
			};

			deferred.resolve({data: schedule});

			return deferred.promise;
		};

		$scope.updateCalendarView = function updateCalendarView()
		{
			$scope.uiConfig.calendar.defaultView = $scope.calendarViewName();
			$scope.applyUiConfig($scope.uiConfig);
		};

		// This gets the view name, but if it's resourceDay, it will get agendaDay.
		// TODO Not sure why this works this way.  Maybe it uses it to get a day of events for each
		//      resource in the resource list?
		$scope.calendarViewName = function calendarViewName()
		{
			var view = $scope.viewName();
			if(view == 'resourceDay')
			{
				view = 'agendaDay';
			}
			return view;
		};

		$scope.setCalendarLoading = function setCalendarLoading(isLoading)
		{
			$scope.calendarLoading = isLoading;
		};

		$scope.getLoadedSchedule = function getLoadedSchedule(uuid)
		{
			var schedule = null;
			for(var i = 0; i < $scope.schedules.length; i++)
			{
				if($scope.schedules[i].uuid === uuid)
				{
					schedule = $scope.schedules[i];
					break;
				}
			}
			return schedule;
		};

		// TODO: change this, perhaps?  It is getting the resource details from the groups
		$scope.buildSelectedResources = function buildSelectedResources(providerNos)
		{
			var selectedResources = [];

			for(var i = 0; i < providerNos.length; i++)
			{
				selectedResources.push($scope.resourceOptionHash[providerNos[i]]);
			}

			return selectedResources;
		};

		$scope.setCalendarResources = function setCalendarResources()
		{
			if($scope.viewName() === 'resourceDay')
			{
				$scope.uiConfig.calendar.resources = $scope.selectedResources;
			}
			else
			{
				$scope.uiConfig.calendar.resources = false;
			}

			$scope.applyUiConfig($scope.uiConfig);
		};

		$scope.setEventSources = function setEventSources()
		{
			$scope.eventSources.push($scope.calendarEvents);
		};

		$scope.updateEvent = function updateEvent(calEvent)
		{
			$scope.calendar().fullCalendar('updateEvent', calEvent);
		};

		$scope.timeIntervalMinutes = function timeIntervalMinutes()
		{
			return parseInt($scope.selectedTimeInterval.split(":")[1]);
		};

		$scope.loadAvailabilityTypes = function loadAvailabilityTypes()
		{
			var deferred = $q.defer();
			var availabilityTypes = {};

			scheduleService.getScheduleTemplateCodes().then(
				function success(results)
				{
					for(var i = 0; i < results.length; i++)
					{
						var result = results[i];

						availabilityTypes[result.code] = angular.copy(result);
					}

					$scope.availabilityTypes = availabilityTypes;
					deferred.resolve(availabilityTypes);
				});

			return deferred.promise;
		};

		$scope.loadDefaultSelections = function loadDefaultSelections()
		{
			$scope.selectedSchedule = $scope.getSelectedSchedule($scope.scheduleOptions);

			//$scope.selectedResources = $scope.getSelectedResources($scope.resourceOptions);

			$scope.selectedTimeInterval = $scope.getSelectedTimeInterval(
				$scope.timeIntervalOptions, $scope.defaultTimeInterval);
			$scope.uiConfig.calendar.slotDuration = $scope.selectedTimeInterval;
			$scope.uiConfig.calendar.slotLabelInterval = $scope.selectedTimeInterval;

			$scope.uiConfig.calendar.minTime = $scope.getScheduleMinTime();
			$scope.uiConfig.calendar.maxTime = $scope.getScheduleMaxTime();

			// scroll so that one hour ago is the top of the calendar
			$scope.uiConfig.calendar.scrollTime = moment().subtract(1, 'hours').format('HH:mm:ss');
		};

		$scope.getSelectedTimeInterval = function getSelectedTimeInterval(
			timeIntervalOptions, defaultTimeInterval)
		{
			// priority: last used from global state, then preference setting,
			// then default

			var selectedTimeInterval = null;

			var timeInterval = $scope.scheduleTimeInterval;
			if(timeInterval === null)
			{
				timeInterval = $scope.scheduleTimeInterval;
			}

			if(Juno.Common.Util.exists(timeInterval))
			{
				// only choose it if it can be found in the options list
				for(var i = 0; i < timeIntervalOptions.length; i++)
				{
					if(timeInterval === timeIntervalOptions[i])
					{
						selectedTimeInterval = timeIntervalOptions[i];
						break;
					}
				}
			}

			if(selectedTimeInterval === null)
			{
				return defaultTimeInterval;
			}

			return selectedTimeInterval;
		};

		$scope.getScheduleMinTime = function getScheduleMinTime()
		{
			// restrict day view if user preferences are set

			/*				var min_time = service.get_global_preference_setting('schedule_min_time');
						if (util.exists(min_time)) {
							// format: HH24:MM:SS - expect HH24:MM in preference
							return min_time + ":00";
						}

						return null;*/

			return "08:00";
		};

		$scope.getScheduleMaxTime = function getScheduleMaxTime()
		{
			/*				var max_time = service.get_global_preference_setting('schedule_max_time');
							if(util.exists(max_time))
							{
								// format: HH24:MM:SS - expect HH24:MM in preference
								return max_time + ":00";
							}

							return null;*/
			return "20:00";
		};

		// Loads the list of event statuses from the API (i.e. appointment statuses).  Sets the following:
		// $scope.event_statuses - a table to look up a status by uuid.
		// $scope.rotate_statuses - an array to describe how to cycle through statuses.
		$scope.loadEventStatuses = function loadEventStatuses()
		{
			var deferred = $q.defer();

			$scope.eventStatuses = {};
			$scope.rotateStatuses = [];

			$scope.scheduleApi.getCalendarAppointmentStatuses().then(
				function success(rawResults)
				{
					var results = rawResults.data.body;

					for(var i = 0; i < results.length; i++)
					{
						var result = results[i];
						$scope.eventStatuses[result.displayLetter] = result;
						if(result.rotates)
						{
							$scope.rotateStatuses.push(result);
						}
					}

					deferred.resolve(results);
				});

			return deferred.promise;
		};

		$scope.loadScheduleEvents = function loadScheduleEvents(providerId, siteName, start, end)
		{
			var deferred = $q.defer();

			// Get date strings to pass to the backend.  The calendar provides datetime that describe
			// and inclusive start time and exclusive end time, so one second is removed from
			// the end time to convert to the correct date.
			var startDateString = start.format(Juno.Common.Util.settings.date_format);
			var endDateString = end.subtract(1, 'seconds').format(Juno.Common.Util.settings.date_format);

			$scope.scheduleApi.getCalendarEvents(
				providerId,
				startDateString,
				endDateString,
				siteName
			).then(
				function(results)
				{
					deferred.resolve(results.data.body);
				},
				function(results)
				{
					deferred.reject(results.data.body);
				}
			);

			return deferred.promise;
		};

		$scope.saveEvent = function saveEvent(editMode, calendarAppointment)
		{
			var deferred = $q.defer();

			if(editMode)
			{
				this.appointmentApi.updateAppointment(calendarAppointment).then(
					function(result)
					{
						deferred.resolve(result.data);
					},
					function(result)
					{
						deferred.reject(result.data);
					}
				);
			}
			else
			{
				$scope.appointmentApi.addAppointment(calendarAppointment).then(
					function(result)
					{
						deferred.resolve(result.data);
					},
					function (result)
					{
						deferred.reject(result.data);
					}
				);
			}


			return deferred.promise;
		};

		$scope.moveEvent = function moveEvent(appointment, delta, adjustStartTime)
		{
			var deferred = $q.defer();

			var startMoment = Juno.Common.Util.getDatetimeNoTimezoneMoment(appointment.startTime);
			var endMoment = Juno.Common.Util.getDatetimeNoTimezoneMoment(appointment.endTime);

			var movedAppointment = angular.copy(appointment);

			if(adjustStartTime)
			{
				movedAppointment.startTime = Juno.Common.Util.formatMomentDateTimeNoTimezone(startMoment.add(delta.asMinutes(), 'minutes'));
			}
			movedAppointment.endTime = Juno.Common.Util.formatMomentDateTimeNoTimezone(endMoment.add(delta.asMinutes(), 'minutes'));

			$scope.saveEvent(true, movedAppointment).then(
				function success(data)
				{
					deferred.resolve(data.body);
				},
				function success(data)
				{
					deferred.reject(data.body);
				}
			);


			return deferred.promise;
		};

		// Read the implementation-specific results and return a calendar-compatible object.
		$scope.processSaveResults = function processSaveResults(results, displayErrors)
		{
			var status = (results || {}).status;

			if(status == 'SUCCESS')
			{
				return true;
			}

			var errorMessage = ((results || {}).error || {}).message;
			var validationErrorArray = ((results || {}).error || {}).validationErrors;

			if(Array.isArray(validationErrorArray))
			{
				displayErrors.add_standard_error(errorMessage);
				//for(var error in validationErrorArray)
				for(var i = 0; i < validationErrorArray.length; i++)
				{
					var error = validationErrorArray[i];
					displayErrors.add_field_error(error.path, error.message);
				}
			}
		};

		$scope.deleteEvent = function deleteEvent(appointmentNo)
		{
			var deferred = $q.defer();

			$scope.appointmentApi.deleteAppointment(appointmentNo).then(
				function(result)
				{
					deferred.resolve(result.data);

				},
				function(result)
				{
					deferred.reject(result.data);
				}
			);

			return deferred.promise;
		};

		$scope.openCreateInvoice = function openCreateInvoice(
			event_uuid, schedule_uuid, demographics_patient_uuid)
		{
			var schedule =
				$scope.get_loaded_schedule(schedule_uuid);

			var url = $scope.calendar_api_adapter.get_create_invoice_url(event_uuid,
				schedule.demographics_practitioner_uuid, demographics_patient_uuid);

			window.window_scope = $scope;
			$window.open(url, '_blank');
		};

		$scope.getIconPath = function getIconPath(icon, statusModifier)
		{
			if(!Juno.Common.Util.exists(icon))
			{
				return "";
			}

			var modifierString = "";

			if(Juno.Common.Util.exists(statusModifier))
			{
				modifierString = statusModifier;
			}

			return "../images/" + modifierString + icon;
		};

		$scope.rotateEventStatus = function rotateEventStatus(calEvent)
		{
			$scope.setCalendarLoading(true);

			var appointmentNo = calEvent.data.appointmentNo;

			$scope.appointmentApi.setNextStatus(appointmentNo).then(
				function success(response)
				{
					var newStatus = response.data.body;

					calEvent.color = $scope.eventStatuses[newStatus].color;
					calEvent.data.eventStatusCode = newStatus;

					$scope.updateEvent(calEvent);

					$scope.setCalendarLoading(false);
				},
				function failure(response)
				{

				}
			);
		};

		$scope.getBillingLink = function getBillingLink(calEvent)
		{
			var startMoment = Juno.Common.Util.getDatetimeNoTimezoneMoment(calEvent.data.startTime);

			var appointmentDate = Juno.Common.Util.formatMomentDate(startMoment);
			var startTime = Juno.Common.Util.formatMomentTime(startMoment);

			var providerNo = calEvent.resourceId;

			var referralNoParameter = "";
			if(calEvent.data.billingRdohip)
			{
				referralNoParameter = "&referral_no_1=" + encodeURIComponent(calEvent.data.billingRdohip);
			}

			return "../billing.do" +
				"?billRegion=" + encodeURIComponent(calEvent.data.billingRegion) +
				"&billForm=" + encodeURIComponent(calEvent.data.billingForm) +
				"&hotclick=" +
				"&appointment_no=" + encodeURIComponent(calEvent.data.appointmentNo) +
				"&demographic_name=" + encodeURIComponent(calEvent.data.demographicName) +
				"&status=" + encodeURIComponent(calEvent.data.eventStatusCode) +
				"&demographic_no=" + encodeURIComponent(calEvent.data.demographicNo) +
				"&providerview=" + encodeURIComponent(providerNo) +
				"&user_no=" + encodeURIComponent(calEvent.data.userProviderNo) +
				"&apptProvider_no=" + encodeURIComponent(providerNo) +
				"&appointment_date=" + encodeURIComponent(appointmentDate) +
				"&start_time=" + encodeURIComponent(startTime) +
				"&bNewForm=1" + referralNoParameter;
		};

		$scope.getEncounterLink = function getEncounterLink(calEvent)
		{
			// XXX: Perhaps link to the new encounter page?  Put in an option to choose new or old.
			var providerNo = calEvent.resourceId;

			var startMoment = Juno.Common.Util.getDatetimeNoTimezoneMoment(calEvent.data.startTime);

			var appointmentDate = Juno.Common.Util.formatMomentDate(startMoment);
			var startTime = Juno.Common.Util.formatMomentTime(startMoment);

			return "../oscarEncounter/IncomingEncounter.do" +
				"?providerNo=" + encodeURIComponent(providerNo) +
				"&appointmentNo=" + encodeURIComponent(calEvent.data.appointmentNo) +
				"&demographicNo=" + encodeURIComponent(calEvent.data.demographicNo) +
				"&curProviderNo=" + encodeURIComponent(calEvent.data.userProviderNo) +
				"&reason=" + encodeURIComponent(calEvent.data.reason) +
				"&encType=" + encodeURIComponent("face to face encounter with client") +

				"&userName=" + encodeURIComponent(calEvent.data.userFirstName + " " + calEvent.data.userLastName) +
				"&curDate=" + encodeURIComponent(Juno.Common.Util.formatMomentDate(moment())) +

				"&appointmentDate=" + encodeURIComponent(appointmentDate) +
				"&startTime=" + encodeURIComponent(startTime) +
				"&status=" + encodeURIComponent(calEvent.data.eventStatusCode) +
				"&apptProvider_no=" + encodeURIComponent(providerNo) +
				"&providerview=" + encodeURIComponent(providerNo);
		};

		$scope.getRxLink = function getRxLink(calEvent)
		{
			if (calEvent.data.demographicNo != 0)
			{
				var providerNo = calEvent.resourceId;

				return "../oscarRx/choosePatient.do" +
					"?providerNo=" + encodeURIComponent(providerNo) +
					"&demographicNo=" + encodeURIComponent(calEvent.data.demographicNo);
			}
		};


		//=========================================================================
		// Event Handlers
		//=========================================================================/

		$scope.onEventRender = function onEventRender(event, element, view)
		{
			if(event.rendering !== 'background')
			{
				var eventSiteHtml = '';
				var eventSite = $scope.sites[event.data.site];

				if(Juno.Common.Util.exists(eventSite))
				{
					eventSiteHtml += "<span style='background-color: " + eventSite.color + "'>&nbsp;</span>"
				}


				var eventStatusHtml = '';
				var eventStatus =
					$scope.eventStatuses[event.data.eventStatusCode];
				var eventStatusRotate = Juno.Common.Util.exists(eventStatus.sortOrder);

				if(Juno.Common.Util.exists(eventStatus) && Juno.Common.Util.exists(eventStatus.icon) &&
					Juno.Common.Util.exists(event) && Juno.Common.Util.exists(event.data))
				{
					eventStatusHtml += "<img class='event-status";
					if(eventStatusRotate)
					{
						eventStatusHtml += ' rotate';
					}
					eventStatusHtml += "' src='" + $scope.getIconPath(eventStatus.icon, event.data.eventStatusModifier) + "' />";
				}
				else
				{
					eventStatusHtml = '<span class="event-status';
					if(Juno.Common.Util.exists(eventStatus))
					{
						if(eventStatusRotate)
						{
							eventStatusHtml += ' rotate ';
						}
						eventStatusHtml += '"' + ' title="' + Juno.Common.Util.escapeHtml(eventStatus.name) + '">' +
							Juno.Common.Util.escapeHtml(eventStatus.displayLetter) + '</span>';
					}
					else
					{
						eventStatusHtml += '" title="Unknown">?</span>';
					}
				}

				var eventEncounterHtml = '<span class="event-encounter" title="Open Encounter">E</span>';

				var eventInvoiceHtml = '<span class="event-invoice" title="Create Invoice">B</span>';

				var eventDemographicHtml = '<span class="event-demographic" title="View Patient">M</span>';

				var eventRxHtml = '<span class="event-rx" title="View Prescription">Rx</span>';

				var eventDetails = "";
				if(!Juno.Common.Util.isBlank(event.data.demographicName))
				{
					eventDetails = Juno.Common.Util.escapeHtml(event.data.demographicName);
					if(!Juno.Common.Util.isBlank(event.data.reason))
					{
						eventDetails += " (" + Juno.Common.Util.escapeHtml(event.data.reason) + ")"
					}
				}
				else if(!Juno.Common.Util.isBlank(event.data.reason))
				{
					eventDetails = Juno.Common.Util.escapeHtml(event.data.reason);
				}

				$(element).find('.fc-content').html(eventSiteHtml + eventStatusHtml + eventEncounterHtml +
					eventInvoiceHtml + eventDemographicHtml + eventRxHtml + eventDetails);
			}
		};

		$scope.onViewRender = function onViewRender()
		{
			if($scope.isInitialized() && $scope.calendar())
			{
				$scope.selectedDate = moment(Juno.Common.Util.formatMomentDate(
					moment($scope.calendar().fullCalendar('getDate'))));
			}

			// Voodoo to set the resource view column width from https://stackoverflow.com/a/39297864
			$("#ca-calendar").css('min-width',$('.fc-resource-cell').length*200);
		};

		$scope.afterRender = function afterRender()
		{
			// Voodoo to set the resource view column width from https://stackoverflow.com/a/39297864
			$('.fc-agendaDay-button').click(function()
			{
				$("#schedule_container").css('min-width',$('.fc-resource-cell').length*200);
			});
		};

		$scope.openCreateEventDialog = function openCreateEventDialog(
			start, end, jsEvent, view, resource)
		{
			// XXX: share as much code as possible with edit event
			if(!securityService.hasPermission('scheduling_create') )
			{
				return;
			}

			// if already opening a dialog or have one open, ignore and return
			if($scope.openingDialog || $scope.dialog)
			{
				return;
			}
			$scope.openingDialog = true;

			var scheduleUuid = null;
			var displayName = "";
			if(Juno.Common.Util.exists(resource))
			{
				scheduleUuid = resource.id;
				displayName = resource.display_name;
			}
			else if($scope.selectedSchedule !== null)
			{
				scheduleUuid = $scope.selectedSchedule.uuid;
			}

			var schedule = $scope.getLoadedSchedule(scheduleUuid);
			if(schedule !== null)
			{
				//var defaultEventStatus = schedule.new_event_status_uuid;

				var modalSchedule = angular.copy(schedule);
				modalSchedule.display_name = displayName;

				var data = {
					schedule: modalSchedule,
					defaultEventStatus: null, //defaultEventStatus,
					startTime: start,
					endTime: end,
					timeInterval: $scope.timeIntervalMinutes(),
					scheduleTemplates: $scope.scheduleTemplates,
					availabilityTypes: $scope.availabilityTypes,
					sites: $scope.sites,
					events: $scope.events,
					eventData: {}
				};

				$scope.dialog = $uibModal.open({
					animation: false,
					backdrop: 'static',
					controller: 'Schedule.EventController',
					templateUrl: 'src/schedule/event.jsp',
					resolve: {
						type: [function() { return 'create_edit_event' }],
						label: [function() { return 'Appointment' }],
						parentScope: [function() { return $scope }],
						data: [function() { return data }],
						editMode: [function() { return false }],
						keyBinding: [function() {return {bindKeyGlobal: function(){}}}],
						focus: [function() {return focusService}],
					}
				});

				$scope.dialog.result.catch(function(res) {
					if(!(res === 'cancel' || res === 'escape key press'))
					{
						throw res;
					}
				});

				// when the dialog closes clear the variable
				$scope.dialog.closed.then(function() {
					$scope.dialog = null;
				});
			}

			$scope.openingDialog = false;
		};

		// XXX: make this work
		$scope.openPatientDialog = function openPatientDialog(editModeCallback, onSaveCallback,
			loadErrorLinkPatientFn)
		{
			//global_state.enable_keyboard_shortcuts = false;

			return this.$uibModal.open({
				animation: false,
				backdrop: 'static',
				size: 'lg',
				controller: 'Invoice.Common.Patient.FormController',
				templateUrl: 'code/invoice/common/patient/quick_form.html',
				resolve: {
					edit_mode: editModeCallback,
					on_save_callback: onSaveCallback,
					load_error_link_patient_fn: loadErrorLinkPatientFn
				}
			});
		};

		$scope.openPatientDemographic = function openPatientDemographic(calEvent)
		{
			if (calEvent.data.demographicNo != 0)
			{
				var params = {
					demographicNo: calEvent.data.demographicNo
				};

				if (angular.isDefined(calEvent.data.appointmentNo))
				{
					params.appointmentNo = calEvent.data.appointmentNo;
					params.encType = "face to face encounter with client";
				}

				$state.go('record.summary', params);
			}
		};

		$scope.openEditEventDialog = function openEditEventDialog(calEvent)
		{
			if(!securityService.hasPermission('scheduling_edit') )
			{
				return;
			}

			// if already opening a dialog or have one open, ignore and return
			if($scope.openingDialog || $scope.dialog)
			{
				return;
			}

			$scope.openingDialog = true;

			var scheduleUuid = calEvent.resourceId;
			var displayName = calEvent.data.demographicName;

			if(displayName == null)
			{
				displayName = '';
			}

			var schedule = $scope.getLoadedSchedule(scheduleUuid);

			if(schedule !== null)
			{
				//var defaultEventStatus = schedule.new_event_status_uuid;

				var modalSchedule = angular.copy(schedule);
				modalSchedule.display_name = displayName;

				var data = {
					schedule: modalSchedule,
					defaultEventStatus: null, //defaultEventStatus,
					startTime: calEvent.start,
					endTime: calEvent.end,
					timeInterval: $scope.timeIntervalMinutes(),
					availabilityTypes: $scope.availabilityTypes,
					sites: $scope.sites,
					events: $scope.events,
					eventData: calEvent.data
				};

				$scope.dialog = $uibModal.open({
					animation: false,
					backdrop: 'static',
					controller: 'Schedule.EventController',
					templateUrl: 'src/schedule/event.jsp',
					resolve: {
						type: [function() { return 'create_edit_event' }],
						label: [function() { return 'Appointment' }],
						parentScope: [function() { return $scope }],
						data: [function() { return data }],
						editMode: [function() { return true }],
						keyBinding: [function() {return {bindKeyGlobal: function(){}}}],
						focus: [function() {return focusService}],
					}
				});

				$scope.dialog.result.catch(function(res) {
					if(!(res === 'cancel' || res === 'escape key press'))
					{
						throw res;
					}
				});

				// when the dialog closes clear the variable
				$scope.dialog.closed.then(function() {
					$scope.dialog = null;
				});
			}

			$scope.openingDialog = false;
		};

		$scope.onEventClicked = function onEventClicked(calEvent, jsEvent, view)
		{
			if($(jsEvent.target).is(".event-status.rotate"))
			{
				$scope.rotateEventStatus(calEvent);
			}
			else if($(jsEvent.target).is(".event-encounter"))
			{
				window.open($scope.getEncounterLink(calEvent));
			}
			else if($(jsEvent.target).is(".event-invoice"))
			{
				window.open($scope.getBillingLink(calEvent));
			}
			else if($(jsEvent.target).is(".event-demographic"))
			{
				$scope.openPatientDemographic(calEvent);
			}
			else if($(jsEvent.target).is(".event-rx"))
			{
				window.open($scope.getRxLink(calEvent));
			}
			else
			{
				$scope.openEditEventDialog(calEvent);
			}
		};

		$scope.onEventDrop = function onEventDrop(
			calEvent, delta, revertFunc, jsEvent, ui, view)
		{
			if(!securityService.hasPermission('scheduling_create') )
			{
				revertFunc();
				return;
			}

			// event was dragged and dropped on the calendar:
			// load then update the start and end time based on the delta
			$scope.setCalendarLoading(true);

			var appointment = angular.copy(calEvent.data);
			appointment.providerNo = calEvent.resourceId

			$scope.moveEvent(appointment, delta, true).then(
				function success(eventData)
				{
					var startMoment = moment(eventData.startTime, "YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ", false);
					var endMoment = moment(eventData.endTime, "YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ", false);

					calEvent.data.startTime = Juno.Common.Util.formatMomentTime(
						startMoment, Juno.Common.Util.settings.datetime_no_timezone_format);
					calEvent.data.endTime = Juno.Common.Util.formatMomentTime(
						endMoment, Juno.Common.Util.settings.datetime_no_timezone_format);

					calEvent.data.providerNo = eventData.providerNo;

					$scope.setCalendarLoading(false);

				}, function error(errors)
				{
					console.log('failed to save event', errors);

					// revert on fail
					revertFunc();
					$scope.setCalendarLoading(false);
				});
		};

		$scope.onEventResize = function onEventResize(calEvent, delta, revertFunc, jsEvent, ui, view)
		{
			if(!securityService.hasPermission('scheduling_create') )
			{
				revertFunc();
				return;
			}

			// event was extended by dragging the end of the event on the calendar:
			// load then update the end time based on the delta
			$scope.setCalendarLoading(true);

			var appointment = angular.copy(calEvent.data);
			appointment.providerNo = calEvent.resourceId

			$scope.moveEvent(appointment, delta, false).then(
				function success(eventData)
				{
					var startMoment = moment(eventData.startTime, "YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ", false);
					var endMoment = moment(eventData.endTime, "YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ", false);

					calEvent.data.startTime = Juno.Common.Util.formatMomentTime(
						startMoment, Juno.Common.Util.settings.datetime_no_timezone_format);
					calEvent.data.endTime = Juno.Common.Util.formatMomentTime(
						endMoment, Juno.Common.Util.settings.datetime_no_timezone_format);

					calEvent.data.providerNo = eventData.providerNo;

					//$scope.update_event(calEvent);

					$scope.setCalendarLoading(false);

				}, function error(errors)
				{
					console.log('failed to resize event', errors);

					// revert on fail
					revertFunc();
					$scope.setCalendarLoading(false);
				}
			);
		};

		$scope.onSiteChanged = function onSiteChanged()
		{
			return $scope.onScheduleChanged();
		};

		$scope.onScheduleChanged = function onScheduleChanged()
		{
			var selectedSchedule = $scope.selectedSchedule;
			var selectedSiteName = $scope.selectedSiteName;

			if(!Juno.Common.Util.exists(selectedSchedule))
			{
				return;
			}

			if(Juno.Common.Util.exists(selectedSiteName))
			{
				$scope.selectedSiteName = selectedSiteName;
			}
			else
			{
				$scope.selectedSiteName = null;
			}

			// reload the schedule and then events data, triggering a rerender
			$scope.loadSelectedSchedules().then($scope.refetchEvents);
		};

		$scope.onTimeIntervalChanged = function onTimeIntervalChanged()
		{
			$scope.scheduleTimeInterval = $scope.selectedTimeInterval;

			// updating the config will automatically trigger an events refresh
			$scope.uiConfig.calendar.slotDuration = $scope.selectedTimeInterval;
			$scope.uiConfig.calendar.slotLabelInterval = $scope.selectedTimeInterval;

			$scope.applyUiConfig($scope.uiConfig);
		};


		//=========================================================================
		// Init methods pulled from the directive controller
		//=========================================================================/

		// Loads the schedule dropdown options from the API.  Sets the following:
		// $scope.schedule_options - the array used to build the schedule selection dropdown.
		// $scope.resourceOptionHash - table to look up schedule information by providerNo.  This is
		//                               used to create the resource view headers.
		$scope.loadScheduleOptions = function loadScheduleOptions()
		{
			var deferred = $q.defer();

			scheduleService.getScheduleGroups().then(
				function success(results)
				{
					for(var i = 0; i < results.length; i++)
					{
						var scheduleData = results[i];

						results[i].uuid = results[i].identifier;

						$scope.scheduleOptions.push(scheduleData);

						// Get the possible resources by inferring that the group is a provider
						// by checking if the array has one entry and matches the identifier
						// Also uses fields specific to Juno.
						// TODO: CHANGE THIS!!
						if(
							angular.isArray(scheduleData.providerNos) &&
							scheduleData.providerNos.length == 1 &&
							scheduleData.providerNos[0].toString() == scheduleData.identifier
						)
						{
							var providerNo = scheduleData.providerNos[0];

							$scope.resourceOptionHash[providerNo] = {
								'id': providerNo,
								'uuid': providerNo,
								'name': providerNo,
								'title': scheduleData.name,
								'display_name': scheduleData.name
							};
						}
					}
					deferred.resolve(results);
				});

			return deferred.promise;
		};

		// Load the list of available sites from the API.  Sets the following:
		// $scope.sites - a table to lookup a site's info by name
		// $scope.site_options - the options for the site selection dropdown
		$scope.loadSiteOptions = function loadSiteOptions()
		{
			var deferred = $q.defer();

			$scope.loadSites().then(
				function success(results)
				{
					$scope.sites = {};
					$scope.siteOptions = [];
					if(angular.isArray(results) && results.length > 0)
					{
						// Fill up lookup table
						for(var i = 0; i < results.length; i++)
						{
							$scope.sites[results[i].name] = results[i];
						}

						// Create the dropdown options
						$scope.siteOptions = [
							{
								uuid: null,
								name: null,
								display_name: "All",
							}
						];

						$scope.siteOptions = $scope.siteOptions.concat(results);
					}

					deferred.resolve(results);
				});

			return deferred.promise;
		};

		$scope.loadSites = function loadSites()
		{
			var deferred = $q.defer();

			scheduleService.getSites().then(
				function success(results)
				{
					var out = [];
					if(angular.isArray(results))
					{
						for(var i = 0; i < results.length; i++)
						{
							out.push({
								uuid: results[i].siteId,
								name: results[i].name,
								display_name: results[i].name,
								color: results[i].bgColor,
							});
						}
					}
					deferred.resolve(out);
				}
			);

			return deferred.promise;
		};


		//=========================================================================
		// Watches
		//=========================================================================/

		$scope.$watch('scheduleService.selectedDate', function(newValue, oldValue)
		{
			// avoid running first time this fires during initialization
			if(newValue !== oldValue)
			{
				$scope.changeDate(newValue);
			}
		});


		//=========================================================================
		// Config Array
		//=========================================================================/

		$scope.applyUiConfig = function applyUiConfig(uiConfig)
		{
			$scope.uiConfigApplied = angular.copy(uiConfig);
		};

		$scope.initEventsAutoRefresh = function initEventsAutoRefresh()
		{
			var deferred = $q.defer();

			// if there is already a refresh set up, stop it
			var refresh = $scope.scheduleAutoRefresh;
			if(refresh !== null)
			{
				clearInterval(refresh);
			}

			// get the refresh interval from preferences, or use default
			var minutes = $scope.scheduleAutoRefreshMinutes;
			if(!Juno.Common.Util.exists(minutes) || !Juno.Common.Util.isIntegerString(minutes))
			{
				minutes = $scope.defaultAutoRefreshMinutes;
			}
			else
			{
				minutes = parseInt(minutes);
			}

			if(minutes > 0)
			{
				// start the auto refresh and save its ID to global state
				$scope.scheduleAutoRefresh = setInterval($scope.refetchEvents, minutes * 60 * 1000);
			}

			deferred.resolve();

			return deferred.promise;
		};

		// Any changes to this array need to be applied by calling applyUiConfig()
		$scope.uiConfig = {
			calendar: {
				height: 'auto', //$scope.get_schedule_height(),
				nowIndicator: true,
				header: {
					left: 'prev,next today title',
					center: '',
					right: ''
				},

				allDaySlot: false,

				defaultView: null,
				defaultDate: $scope.defaultDate,
				slotDuration: $scope.selectedTimeInterval,
				slotLabelInterval: $scope.selectedTimeInterval,
				slotLabelFormat: 'h:mma',

				loading: $scope.setCalendarLoading,

				selectable: true,
				select: $scope.openCreateEventDialog,
				eventClick: $scope.onEventClicked,
				eventRender: $scope.onEventRender,
				viewRender: $scope.onViewRender,
				eventAfterAllRender: $scope.afterRender,

				editable: true,
				eventDrop: $scope.onEventDrop,
				eventResize: $scope.onEventResize,
				schedulerLicenseKey: "GPL-My-Project-Is-Open-Source"
			}
		};

		$scope.init();
	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js"), __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/settings/changePasswordController.js":
/*!**************************************************!*\
  !*** ./src/settings/changePasswordController.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Settings').controller('Settings.ChangePasswordController', [

	'$scope',
	'$uibModalInstance',

	function(
		$scope,
		$uibModalInstance)
	{

		$scope.close = function()
		{
			$uibModalInstance.close("Someone Closed Me");
		};

		$scope.changePassword = function()
		{
			console.log('password saved - NOT');
			$uibModalInstance.close("Someone Saved Me");
		};
	}
]);

/***/ }),

/***/ "./src/settings/module.js":
/*!********************************!*\
  !*** ./src/settings/module.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Settings', ['Common', 'Common.Services']);

/***/ }),

/***/ "./src/settings/quickLinkController.js":
/*!*********************************************!*\
  !*** ./src/settings/quickLinkController.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Settings').controller('Settings.QuickLinkController', [

	'$scope',
	'$uibModalInstance',

	function(
		$scope,
		$uibModalInstance)
	{

		$scope.qll = {};

		$scope.close = function()
		{
			$uibModalInstance.close();
		};

		$scope.addQuickLink = function(qlForm)
		{
			if (qlForm.$valid)
			{
				//	alert($scope.qll.toSource());
				$uibModalInstance.close($scope.qll);
			}
		};
	}
]);

/***/ }),

/***/ "./src/settings/settingsController.js":
/*!********************************************!*\
  !*** ./src/settings/settingsController.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Settings').controller('Settings.SettingsController', [

	'$scope',
	'$http',
	'$state',
	'$uibModal',
	'$filter',
	'providerList',
	'user',
	'billingServiceTypes',
	'loadedSettings',
	'providerService',
	'encounterForms',
	'eforms',
	'teams',
	'groupNames',
	'loadedApps',
	'appService',

	function(
		$scope,
		$http,
		$state,
		$uibModal,
		$filter,
		providerList,
		user,
		billingServiceTypes,
		loadedSettings,
		providerService,
		encounterForms,
		eforms,
		teams,
		groupNames,
		loadedApps,
		appService)
	{

		var controller = this;

		$scope.$emit('configureShowPatientList', false);

		controller.providerList = providerList;
		controller.user = user;
		controller.billingServiceTypes = billingServiceTypes;
		controller.pref = loadedSettings;
		controller.encounterForms = encounterForms.content;
		controller.eforms = eforms;
		controller.loadedApps = loadedApps;

		if (controller.pref.recentPatients == null)
		{
			controller.pref.recentPatients = "8";
		}

		//convert to value/label object list from string array
		controller.formGroupNames = [
		{
			"value": "",
			"label": "None"
		}];
		for (var i = 0; i < groupNames.length; i++)
		{
			controller.formGroupNames.push(
			{
				"value": groupNames[i],
				"label": groupNames[i]
			});
		}


		//convert to value/label obj list. Add all/none
		controller.teams = [
		{
			"value": "-1",
			"label": "All"
		}];
		for (var i = 0; i < teams.length; i++)
		{
			controller.teams.push(
			{
				"value": teams[i],
				"label": teams[i]
			});
		}
		controller.teams.push(
		{
			"value": "",
			"label": "None"
		});

		//add none -option to start.
		controller.billingServiceTypesMod = [];
		angular.copy(controller.billingServiceTypes, controller.billingServiceTypesMod);
		controller.billingServiceTypesMod.splice(0, 0,
		{
			"type": "no",
			"name": "--None--"
		});

		//this needs to be done to do the weird checkbox lists. basically add a property to each encounterList object called checked:[true|false]
		for (var i = 0; i < controller.pref.appointmentScreenForms.length; i++)
		{
			var selected = $filter('filter')(controller.encounterForms,
			{
				formName: controller.pref.appointmentScreenForms[i]
			});
			if (selected != null)
			{
				for (var x = 0; x < selected.length; x++)
				{
					if (selected[x].formName === controller.pref.appointmentScreenForms[i])
					{
						selected[x].checked = true;
					}
				}
			}
		}

		//this needs to be done to do the weird checkbox lists. basically add a property to each encounterList object called checked:[true|false]
		for (var i = 0; i < controller.pref.appointmentScreenEforms.length; i++)
		{
			var selected = $filter('filter')(controller.eforms,
			{
				id: controller.pref.appointmentScreenEforms[i]
			});
			if (selected != null)
			{
				for (var x = 0; x < selected.length; x++)
				{
					if (selected[x].id === controller.pref.appointmentScreenEforms[i])
					{
						selected[x].checked = true;
					}
				}
			}
		}


		controller.tabs = [
		{
			id: 0,
			displayName: 'Persona',
			path: 'persona'
		},
		{
			id: 1,
			displayName: 'General',
			path: 'general'
		},
		{
			id: 2,
			displayName: 'Schedule',
			path: 'schedule'
		},
		{
			id: 3,
			displayName: 'Billing',
			path: 'billing'
		},
		{
			id: 4,
			displayName: 'Rx',
			path: 'rx'
		},
		{
			id: 5,
			displayName: 'Master Demographic',
			path: 'masterdemo'
		},
		{
			id: 6,
			displayName: 'Consultations',
			path: 'consults'
		},
		{
			id: 7,
			displayName: 'Documents',
			path: 'documents'
		},
		{
			id: 8,
			displayName: 'Summary',
			path: 'summary'
		},
		{
			id: 9,
			displayName: 'eForms',
			path: 'eforms'
		},
		{
			id: 10,
			displayName: 'Inbox',
			path: 'inbox'
		},
		{
			id: 11,
			displayName: 'Programs',
			path: 'programs'
		},
		{
			id: 12,
			displayName: 'Integration',
			path: 'integration'
		}, ];
		controller.pageSizes = [
		{
			value: 'PageSize.A4',
			label: 'A4'
		},
		{
			value: 'PageSize.A6',
			label: 'A6'
		}];

		controller.rxInteractionWarningLevels = [
		{
			value: '0',
			label: 'Not Specified'
		},
		{
			value: '1',
			label: 'Low'
		},
		{
			value: '2',
			label: 'Medium'
		},
		{
			value: '3',
			label: 'High'
		},
		{
			value: '4',
			label: 'None'
		}];

		controller.staleDates = [
		{
			value: 'A',
			label: 'All'
		},
		{
			value: '0',
			label: '0'
		},
		{
			value: '-1',
			label: '-1'
		},
		{
			value: '-2',
			label: '2'
		},
		{
			value: '-3',
			label: '3'
		},
		{
			value: '-4',
			label: '4'
		},
		{
			value: '-5',
			label: '5'
		},
		{
			value: '-6',
			label: '6'
		},
		{
			value: '-7',
			label: '7'
		},
		{
			value: '-8',
			label: '8'
		},
		{
			value: '-9',
			label: '9'
		},
		{
			value: '-10',
			label: '10'
		},
		{
			value: '-11',
			label: '11'
		},
		{
			value: '-12',
			label: '12'
		},
		{
			value: '-13',
			label: '13'
		},
		{
			value: '-14',
			label: '14'
		},
		{
			value: '-15',
			label: '15'
		},
		{
			value: '-16',
			label: '16'
		},
		{
			value: '-17',
			label: '17'
		},
		{
			value: '-18',
			label: '18'
		},
		{
			value: '-19',
			label: '19'
		},
		{
			value: '-20',
			label: '20'
		},
		{
			value: '-21',
			label: '21'
		},
		{
			value: '-22',
			label: '22'
		},
		{
			value: '-23',
			label: '23'
		},
		{
			value: '-24',
			label: '24'
		},
		{
			value: '-25',
			label: '25'
		},
		{
			value: '-26',
			label: '26'
		},
		{
			value: '-27',
			label: '27'
		},
		{
			value: '-28',
			label: '28'
		},
		{
			value: '-29',
			label: '29'
		},
		{
			value: '-30',
			label: '30'
		},
		{
			value: '-31',
			label: '31'
		},
		{
			value: '-32',
			label: '32'
		},
		{
			value: '-33',
			label: '33'
		},
		{
			value: '-34',
			label: '34'
		},
		{
			value: '-35',
			label: '35'
		},
		{
			value: '-36',
			label: '36'
		}, ];

		controller.olisLabs = [
		{
			value: '',
			label: ''
		},
		{
			value: '5552',
			label: 'Gamma-Dynacare'
		},
		{
			value: '5407',
			label: 'CML'
		},
		{
			value: '5687',
			label: 'LifeLabs'
		}];

		controller.pasteFormats = [
		{
			value: 'single',
			label: 'Single Line'
		},
		{
			value: 'multi',
			label: 'Multi Line'
		}];

		controller.letterHeadNameDefaults = [
		{
			value: '1',
			label: 'Provider (user)'
		},
		{
			value: '2',
			label: 'MRP'
		},
		{
			value: '3',
			label: 'Clinic'
		}];

		if (controller.pref.consultationLetterHeadNameDefault == null)
		{
			controller.pref.consultationLetterHeadNameDefault = "1";
		}


		if ($state.current.data !== undefined)
		{
			controller.currentTab = $filter('filter')(controller.tabs, {path: $state.current.data.tab})[0];
		}
		else
		{
			controller.currentTab = controller.tabs[0];
		}


		controller.isActive = function(tab)
		{
			return (tab != null && controller.currentTab != null && tab.id == controller.currentTab.id);
		};

		controller.changeTab = function(tab)
		{
			controller.currentTab = tab;
			$state.go('settings.' + tab.path);
		};

		controller.save = function()
		{
			var newList = [];
			for (var i = 0; i < controller.pref.appointmentScreenQuickLinks.length; i++)
			{
				if (controller.pref.appointmentScreenQuickLinks[i].checked == null || controller.pref.appointmentScreenQuickLinks[i].checked == false)
				{
					newList.push(
					{
						name: controller.pref.appointmentScreenQuickLinks[i].name,
						url: controller.pref.appointmentScreenQuickLinks[i].url
					});
				}
			}
			controller.pref.appointmentScreenQuickLinks = newList;

			providerService.saveSettings(controller.user.providerNo, controller.pref).then(function(data)
			{
				alert('saved');
			});

		};

		controller.cancel = function()
		{
			controller.pref = {};
			$state.go('dashboard');
		};

		controller.selectEncounterForms = function()
		{
			var selected = $filter('filter')(controller.encounterForms,
			{
				checked: true
			});
			var tmp = [];
			for (var i = 0; i < selected.length; i++)
			{
				tmp.push(selected[i].formName);
			}
			controller.pref.appointmentScreenForms = tmp;
		};

		controller.selectEForms = function()
		{
			var selected = $filter('filter')(controller.eforms,
			{
				checked: true
			});
			var tmp = [];
			for (var i = 0; i < selected.length; i++)
			{
				tmp.push(selected[i].id);
			}
			controller.pref.appointmentScreenEforms = tmp;
		};

		controller.removeQuickLinks = function()
		{
			var newList = [];

			for (var i = 0; i < controller.pref.appointmentScreenQuickLinks.length; i++)
			{
				if (controller.pref.appointmentScreenQuickLinks[i].checked == null || controller.pref.appointmentScreenQuickLinks[i].checked == false)
				{
					newList.push(controller.pref.appointmentScreenQuickLinks[i]);
				}
			}
			controller.pref.appointmentScreenQuickLinks = newList;
		};


		controller.openChangePasswordModal = function()
		{
			/*
        var modalInstance = $uibModal.open({
        	templateUrl: 'src/settings/changePassword.jsp',
            controller: 'ChangePasswordController'
        });
     */
			window.open('../provider/providerchangepassword.jsp', 'change_password', 'width=750,height=500');
		};


		controller.openQuickLinkModal = function()
		{
			var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/settings/quickLink.jsp',
				controller: 'QuickLinkController'
			});

			modalInstance.result.then(function(selectedItem)
			{
				if (selectedItem != null)
				{
					if (selectedItem != null && selectedItem.name != null && selectedItem.url != null)
					{
						controller.pref.appointmentScreenQuickLinks.push(selectedItem);
					}
				}
			});
		};

		controller.editDocumentTemplates = function()
		{
			window.open('../admin/displayDocumentDescriptionTemplate.jsp', 'document_templates', 'width=700,height=450');
		};

		controller.showProviderColourPopup = function()
		{
			window.open('../provider/providerColourPicker.jsp', 'provider_colour', 'width=700,height=450');
		};

		controller.showDefaultEncounterWindowSizePopup = function()
		{
			window.open('../setProviderStaleDate.do?method=viewEncounterWindowSize', 'encounter_window_sz', 'width=700,height=450');
		};

		controller.openConfigureEChartCppPopup = function()
		{
			window.open('../provider/CppPreferences.do', 'configure_echart_cpp', 'width=700,height=450');
		};

		controller.openManageAPIClientPopup = function()
		{
			window.open('../provider/clients.jsp', 'api_clients', 'width=700,height=450');
		};

		controller.openMyOscarUsernamePopup = function()
		{
			window.open('../provider/providerIndivoIdSetter.jsp', 'invivo_setter', 'width=700,height=450');
		};

		controller.authenticate = function(app)
		{
			window.open('../apps/oauth1.jsp?id=' + app.id, 'appAuth', 'width=700,height=450');
		};

		controller.refreshAppList = function()
		{
			console.log("refresh", controller.loadedApps);
			appService.getApps().then(function(data)
				{
					controller.loadedApps = data;
				},
				function(errorMessage)
				{
					console.log("applist:" + errorMessage);
				}
			);
			///
			console.log("refresh", controller.loadedApps);
		};
	}
]);

/***/ }),

/***/ "./src/tickler/module.js":
/*!*******************************!*\
  !*** ./src/tickler/module.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


angular.module('Tickler', ['Common', 'Common.Services', 'Common.Filters']);

/***/ }),

/***/ "./src/tickler/ticklerAddController.js":
/*!*********************************************!*\
  !*** ./src/tickler/ticklerAddController.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($, moment) {angular.module('Tickler').controller('Tickler.TicklerAddController', [

	'$scope',
	'$uibModalInstance',
	'$filter',
	'$stateParams',
	'demographicService',
	'demographicsService',
	'providerService',
	'ticklerService',

	function(
		$scope,
		$uibModalInstance,
		$filter,
		$stateParams,
		demographicService,
		demographicsService,
		providerService,
		ticklerService)
	{

		var controller = this;

		// holds the patient typeahead selection
		controller.demographicSearch = null;

		//=========================================================================
		// Watches
		//=========================================================================

		// $scope.$watch('controller.demographicSearch',

		// 	function(new_value)
		// 	{
		// 		console.log('watching demographicSearch: ', new_value);

		// 		if (Juno.Common.Util.exists(new_value))
		// 		{
		// 			controller.updateDemographicNo(new_value);
		// 		}
		// 		else
		// 		{
		// 			// no selection
		// 			controller.updateDemographicNo(null);
		// 		}
		// 	}, true);

		controller.tickler = {
			template:
			{
				id: 1,
				name: ''
			},
			serviceDateDate: new Date(),
			serviceDateTime: "12:00 AM",
			suggestedTextId: 0
		};

		controller.priorities = ['Low', 'Normal', 'High'];

		// initialization
		controller.init = function init()
		{
			if (Juno.Common.Util.exists($stateParams.demographicNo))
			{
				console.log('initializing demographicSearch pre-selected', $stateParams.demographicNo);
				demographicService.getDemographic($stateParams.demographicNo).then(function(data)
				{
					controller.demographicSearch = {
						demographicNo: data.demographicNo,
						firstName: data.firstName,
						lastName: data.lastName,
						name: data.lastName + "," + data.firstName // For display purposes
					};
					controller.updateDemographicNo(data);
				});
			}

			$('#timepicker').timepicker({defaultTime: controller.tickler.serviceDateTime});
		};

		ticklerService.getTextSuggestions().then(function(data)
		{
			controller.textSuggestions = data.content;
			controller.textSuggestions.unshift(
			{
				id: 0,
				suggestedText: ''
			});
		}, function(reason)
		{
			alert(reason);
		});

		controller.close = function()
		{
			$uibModalInstance.close(false);
		};

		controller.validate = function()
		{
			var t = controller.tickler;
			controller.errors = [];

			if (t.demographic == null)
			{
				controller.errors.push('You must select a patient');
			}
			if (t.taskAssignedTo == null || t.taskAssignedTo.length == 0)
			{
				controller.errors.push('You must assign a provider');
			}
			if (t.message == null || t.message.length == 0)
			{
				controller.errors.push('Message is required');
			}
			if (controller.errors.length > 0)
			{
				return false;
			}
			return true;
		};

		controller.save = function()
		{
			controller.showErrors = true;
			if (!controller.validate())
			{
				return;
			}

			var t = {};
			t.demographicNo = controller.tickler.demographic.demographicNo;
			t.taskAssignedTo = controller.tickler.taskAssignedTo;
			t.priority = controller.tickler.priority;
			t.status = 'A';
			t.message = controller.tickler.message;

			var givenDate = controller.tickler.serviceDateDate;
			var givenTime = moment(controller.tickler.serviceDateTime, 'hh:mm A');
			givenDate.setHours(givenTime.get('hour'));
			givenDate.setMinutes(givenTime.get('minute'));

			t.serviceDate = givenDate;
			ticklerService.add(t).then(function(data)
			{
				$uibModalInstance.close(true);
			}, function(reason)
			{
				alert(reason);
			});


		};

		controller.updateDemographicNo = function updateDemographicNo(demo)
		{
			if (Juno.Common.Util.exists(demo))
			{
				demographicService.getDemographic(demo.demographicNo).then(function(data)
				{
					// update the selected value on the tickler object
					controller.tickler.demographic = data;
					console.log('set controller.tickler.demographic: ', controller.tickler.demographic);
				});
			}
			else
			{
				controller.tickler.demographic = null;
			}
		};

		controller.searchPatients = function searchPatients(term)
		{
			var search = {
				type: 'Name',
				'term': term,
				status: 'active',
				integrator: false,
				outofdomain: true
			};
			return demographicsService.search(search, 0, 25).then(
				function(results)
				{
					var resp = [];
					for (var x = 0; x < results.content.length; x++)
					{
						resp.push(
						{
							demographicNo: results.content[x].demographicNo,
							name: results.content[x].lastName + ',' + results.content[x].firstName
						});
					}
					return resp;
				},
				function error(errors)
				{
					console.log(errors);
				});
		};

		controller.searchProviders = function(val)
		{
			var search = {
				searchTerm: val,
				active: true
			};
			return providerService.searchProviders(search, 0, 10).then(function(response)
			{
				var resp = [];
				for (var x = 0; x < response.length; x++)
				{
					resp.push(
					{
						providerNo: response[x].providerNo,
						name: response[x].firstName + ' ' + response[x].lastName
					});
				}
				return resp;
			});
		};

		controller.updateProviderNo = function(item, model, label)
		{
			controller.tickler.taskAssignedTo = model;
			controller.tickler.taskAssignedToName = label;
		};

		controller.setSuggestedText = function()
		{
			var results = $filter('filter')(controller.textSuggestions,
			{
				id: controller.tickler.suggestedTextId
			}, true);

			if (results != null)
			{
				controller.tickler.message = results[0].suggestedText;
			}
		};

		controller.addMonthsFromNow = function(num)
		{
			controller.tickler.serviceDateDate = moment().add(num, 'months').toDate();
		};
	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js"), __webpack_require__(/*! moment */ "./node_modules/moment/moment.js")))

/***/ }),

/***/ "./src/tickler/ticklerCommentController.js":
/*!*************************************************!*\
  !*** ./src/tickler/ticklerCommentController.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Tickler').controller('Tickler.TicklerCommentController', [

	'$scope',
	'$uibModalInstance',
	'tickler',

	function(
		$scope,
		$uibModalInstance,
		tickler)
	{

		var controller = this;

		controller.tickler = tickler;

		controller.close = function()
		{
			$uibModalInstance.close("Someone Closed Me");
		};
	}
]);

/***/ }),

/***/ "./src/tickler/ticklerListController.js":
/*!**********************************************!*\
  !*** ./src/tickler/ticklerListController.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Tickler').controller('Tickler.TicklerListController', [

	'$scope',
	'$timeout',
	'$resource',
	'$uibModal',
	'$http',
	'$stateParams',
	'$filter',
	'NgTableParams',
	'securityService',
	'ticklerService',
	'noteService',
	'providerService',
	'providers',


	function(
		$scope,
		$timeout,
		$resource,
		$uibModal,
		$http,
		$stateParams,
		$filter,
		NgTableParams,
		securityService,
		ticklerService,
		noteService,
		providerService,
		providers)
	{

		var controller = this;

		var ticklerAPI = $resource('../ws/rs/tickler/ticklers');

		controller.lastResponse = ""; // Can be removed?
		controller.providers = providers;


		securityService.hasRights(
		{
			items: [
			{
				objectName: '_tickler',
				privilege: 'w'
			},
			{
				objectName: '_tickler',
				privilege: 'r'
			}]
		}).then(function(result)
		{
			if (result.content != null && result.content.length == 2)
			{
				controller.ticklerWriteAccess = result.content[0];
				controller.ticklerReadAccess = result.content[1];

				if (controller.ticklerReadAccess)
				{

					//object which represents all the filters, initialize status.
					controller.search = {
						status: 'A'
					};


					controller.tableParams = new NgTableParams(
					{
						page: 1, // show first page
						count: 10,// initial count per page
						sorting: {
							ServiceDate: "desc"
						}
					},
					{
						// total: 0, // length of data
						getData: function(params)
						{
							// ajax request to api
							controller.search.count = params.url().count;
							controller.search.page = params.url().page;
							controller.search.includeLinks = 'true';
							controller.search.includeComments = 'true';
							controller.search.includeUpdates = 'true';
							controller.search.includeProgram = true;

							// need to parse out the ng-tables sort column/direction values
							// for use in our get parameters.
							var myRegexp = /sorting\[(\w+)\]/g;
							for(var key in params.url()) {
								var match = myRegexp.exec(String(key));
								if(match) {
									controller.search.sortColumn = match[1];
									controller.search.sortDirection = params.url()[String(key)];
								}
							}

							if (angular.isDefined($stateParams.demographicNo))
							{
								controller.search.demographicNo = $stateParams.demographicNo;
							}

							return ticklerAPI.get(controller.search).$promise.then(function(data)
							{
								params.total(data.total); // recal. page nav controls
								var ticklerList = data.content;
								// Grab URLs for tickler links
								for (var i = 0; i < ticklerList.length; i++){
									if (ticklerList[i].ticklerLinks.length > 0 )
                                        ticklerList[i].ticklerLinkUrl = controller.getLinkUrl(ticklerList[i].ticklerLinks[0]);
								}

								return data.content;
							});
						}
					});
				}
			}
			else
			{
				alert('failed to load rights');
			}
		}, function(reason)
		{
			alert(reason);
		});

		controller.doSearch = function()
		{
			controller.tableParams.reload();
		};

		controller.clear = function()
		{
			controller.search = angular.copy(
			{
				status: 'A'
			});
			controller.tableParams.reload();
		};

		controller.checkAll = function checkAll(data)
		{
			angular.forEach(data, function(tickler)
			{
				tickler.checked = true;
			});
		};

		// controller.checkAll = function()
		// {

		// 	angular.forEach(controller.lastResponse, function(item)
		// 	{
		// 		item.checked = true;
		// 	});
		// };

		controller.checkNone = function checkNone(data)
		{
			angular.forEach(data, function(tickler)
			{
				tickler.checked = false;
			});
		};

		controller.completeTicklers = function()
		{
			var selectedTicklers = [];
			angular.forEach(controller.tableParams.data, function(item)
			{
				if (item.checked)
				{
					selectedTicklers.push(item.id);
				}
			});

			ticklerService.setCompleted(selectedTicklers).then(function(data)
			{
				controller.tableParams.reload();
			}, function(reason)
			{
				alert(reason);
			});
		};

		controller.deleteTicklers = function()
		{
			var selectedTicklers = [];
			angular.forEach(controller.tableParams.data, function(item)
			{
				if (item.checked)
				{
					selectedTicklers.push(item.id);
				}
			});

			ticklerService.setDeleted(selectedTicklers).then(function(data)
			{
				controller.tableParams.reload();
			}, function(reason)
			{
				alert(reason);
			});

		};

		controller.addTickler = function()
		{
			var windowProps = "height=400,width=600,location=no,scrollbars=yes,menubars=no,toolbars=no,resizable=yes";
			//window.open('../tickler/ticklerAdd.jsp','ticklerAdd',windowProps);

			var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/tickler/ticklerAdd.jsp',
				controller: 'Tickler.TicklerAddController as ticklerAddCtrl',
				backdrop: 'static',
				size: 'lg'
			});

			modalInstance.result.then(function(data)
			{
				console.log('data from modalInstance ' + data);
				if (data != null && data == true)
				{
					controller.tableParams.reload();
				}
			}, function(reason)
			{
				alert(reason);
			});


		};

		controller.editTickler = function(tickler)
		{

			var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/tickler/ticklerView.jsp',
				controller: 'Tickler.TicklerViewController as ticklerViewCtrl',
				backdrop: 'static',
				size: 'lg',
				resolve:
				{
					tickler: function()
					{
						return tickler;
					},
					ticklerNote: function()
					{
						return noteService.getTicklerNote(tickler.id);
					},
					ticklerWriteAccess: function()
					{
						return controller.ticklerWriteAccess;
					},
					me: function()
					{
						return providerService.getMe();
					}
				}
			});

			modalInstance.result.then(function(data)
			{
				console.log('data from modalInstance ' + data);
				if (data != null && data == true)
				{
					controller.tableParams.reload();
				}
			}, function(reason)
			{
				alert(reason);
			});

		};

		controller.editNote2 = function(tickler)
		{

			noteService.getTicklerNote(tickler.id).then(function(data)
			{
				if (data.ticklerNote != null)
				{
					controller.ticklerNote = data.ticklerNote;
				}
				else
				{
					controller.ticklerNote = {
						"editor": "you",
						"note": "",
						"noteId": 0,
						"observationDate": "now",
						"revision": 0
					};

				}
				var modalInstance = $uibModal.open(
				{
					templateUrl: 'src/tickler/ticklerNote.jsp',
					controller: 'Tickler.TicklerNoteController as ticklerNoteCtrl',
					backdrop: 'static',
					resolve:
					{
						ticklerNote: function()
						{
							return controller.ticklerNote;
						},
						tickler: function()
						{
							return tickler;
						}
					}
				});
			}, function(reason)
			{
				alert(reason);
			});

		};

		controller.showComments = function(tickler)
		{
			controller.tickler = tickler;
			var modalInstance = $uibModal.open(
			{
				templateUrl: 'src/tickler/ticklerComments.jsp',
				controller: 'Tickler.TicklerCommentController as ticklerCommentCtrl',
				backdrop: 'static',
				resolve:
				{
					tickler: function()
					{
						return controller.tickler;
					}
				}
			});
		};

		controller.printArea = function()
		{
			window.print();
		};

		controller.getLinkUrl = function getLinkUrl(input)
		{
            if (input !== null && input.id !== null)
            {
                var url = "";

                if (input.tableName === 'CML')
                {
                    url = "../lab/CA/ON/CMLDisplay.jsp?segmentID=" + input.tableId;
                }
                else if (input.tableName === 'MDS')
                {
                    url = "../oscarMDS/SegmentDisplay.jsp?segmentID=" + input.tableId;
                }
                else if (input.tableName === 'HL7')
                {
                    url = "../lab/CA/ALL/labDisplay.jsp?segmentID=" + input.tableId;
                }
                else if (input.tableName === 'DOC')
                {
                    url = "../dms/ManageDocument.do?method=display&doc_no=" + input.tableId;
                }
                return url;
            }

		};
	}
]);

/***/ }),

/***/ "./src/tickler/ticklerNoteController.js":
/*!**********************************************!*\
  !*** ./src/tickler/ticklerNoteController.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

angular.module('Tickler').controller('Tickler.TicklerNoteController', [

	'$scope',
	'$uibModalInstance',
	'$http',
	'ticklerNote',
	'tickler',
	'noteService',

	function(
		$scope,
		$uibModalInstance,
		$http,
		ticklerNote,
		tickler,
		noteService)
	{

		var controller = this;

		controller.ticklerNote = ticklerNote;
		controller.originalNote = ticklerNote.note;
		controller.tickler = tickler;

		controller.close = function()
		{
			$uibModalInstance.close("Someone Closed Me");
		};
		controller.save = function()
		{
			var updatedNote = controller.ticklerNote.note;
			controller.ticklerNote.tickler = controller.tickler;

			noteService.saveTicklerNote(controller.ticklerNote).then(function(data)
			{
				$uibModalInstance.close("Someone Saved Me");
			}, function(reason)
			{
				alert(reason);
			});
		};
	}
]);

/***/ }),

/***/ "./src/tickler/ticklerViewController.js":
/*!**********************************************!*\
  !*** ./src/tickler/ticklerViewController.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(moment) {angular.module('Tickler').controller('Tickler.TicklerViewController', [

	'$scope',
	'$filter',
	'$uibModalInstance',
	'$timeout',
	'tickler',
	'ticklerService',
	'ticklerNote',
	'ticklerWriteAccess',
	'providerService',
	'me',

	function(
		$scope,
		$filter,
		$uibModalInstance,
		$timeout,
		tickler,
		ticklerService,
		ticklerNote,
		ticklerWriteAccess,
		providerService,
		me)
	{

		var controller = this;

		controller.ticklerUpdate = angular.copy(tickler);

		controller.serviceDateInput = moment(controller.ticklerUpdate.serviceDate).toDate();
		controller.serviceTimeInput = moment(controller.ticklerUpdate.serviceDate).format("hh:mm A");

		controller.me = me;
		controller.ticklerWriteAccess = ticklerWriteAccess;

		//this object keeps track of the changes being made
		// controller.ticklerUpdate = {
		// 	message: controller.tickler.message,

		// 	taskAssignedTo: controller.tickler.taskAssignedTo,
		// 	taskAssignedToName: controller.tickler.taskAssignedName,
		// 	serviceDate: $filter('date')(controller.tickler.serviceDate, 'yyyy-MM-dd'),
		// 	serviceTime: $filter('date')(controller.tickler.serviceDate, 'HH:mm'),

		// };

		controller.needsUpdate = false;
		controller.showUpdates = false;
		controller.showComments = false;
		controller.showCommentFormControl = false;

		// controller.taskAssignedToName = controller.tickler.taskAssignedName;
		controller.priorities = ['Low', 'Normal', 'High'];
		controller.statuses = [
		{
			id: 'A',
			label: 'Active'
		},
		{
			id: 'C',
			label: 'Completed'
		},
		{
			id: 'D',
			label: 'Deleted'
		}];

		if (ticklerNote != null)
		{
			controller.ticklerNote = ticklerNote.ticklerNote;
		}

		// Keep track of the current status as an object containing id and label
		if (tickler != null)
		{
			controller.selectedStatus = controller.statuses.find(function(status)
			{
				return status.id == tickler.status;
			});
		}

		// $scope.$watch('controller.ticklerUpdate.serviceDate',
		// 	function(new_value)
		// 	{
		// 		console.log('change', new_value);

		// 		if (controller.ticklerUpdate.serviceDate instanceof Date && controller.ticklerUpdate.serviceTime instanceof Date)
		// 		{

		// 			controller.ticklerUpdate.serviceDate = new Date(controller.ticklerUpdate.serviceDate.getTime() + controller.ticklerUpdate.serviceTime.getTime());

		// 			console.log('new val', controller.ticklerUpdate.serviceDate);
		// 		}


		// 	}
		// );

		// Watches the date input and updates serviceDate when a change is made
		$scope.$watch(function()
			{
				return controller.serviceDateInput;
			},
			function(newValue)
			{
				var newDate = moment(newValue.getTime()).format("MM-DD-YYYY");
				var finalVal = moment(newDate + "-" + controller.serviceTimeInput, 'MM-DD-YYYY-hh:mm A').toDate().getTime();

				controller.ticklerUpdate.serviceDate = finalVal;
			}
		);

		// Watches the time input and updates serviceDate when a change is made
		$scope.$watch(function()
			{
				return controller.serviceTimeInput;
			},
			function(newValue)
			{
				var date = moment(controller.serviceDateInput.getTime()).format("MM-DD-YYYY");
				var finalVal = moment(date + "-" + newValue, 'MM-DD-YYYY-hh:mm A').toDate().getTime();

				controller.ticklerUpdate.serviceDate = finalVal;
			}
		);

		controller.close = function()
		{
			if (controller.needsUpdate)
			{
				if (confirm("You have unsaved changes, are you sure?"))
				{
					$uibModalInstance.close(false);
				}
			}
			else
			{
				controller.ticklerUpdate = undefined;
				$uibModalInstance.close(false);
			}

		};

		controller.save = function()
		{
			$uibModalInstance.close("Someone Saved Me");
		};

		controller.updateTaskAssignedTo = function(item, model, label)
		{
			controller.needsUpdate = true;
			controller.ticklerUpdate.taskAssignedTo = model;
			controller.ticklerUpdate.taskAssignedToName = label;
			controller.showTaskAssignedToFormControl = false;
		};

		controller.cancelTaskAssignedToUpdate = function()
		{
			controller.ticklerUpdate.taskAssignedTo = null;
			controller.ticklerUpdate.taskAssignedToName = null;

			controller.showTaskAssignedToFormControl = false;

		};

		controller.editServiceDateAndTime = function()
		{
			// controller.ticklerUpdate.serviceDate = $filter('date')(controller.tickler.serviceDate, 'yyyy-MM-dd');
			// controller.ticklerUpdate.serviceTime = $filter('date')(controller.tickler.serviceDate, 'HH:mm');

			controller.showServiceDateAndTimeFormControl = true;
		};


		controller.updateServiceDateAndTime = function()
		{
			var dp = controller.ticklerUpdate.serviceDate.split("-");
			var tp = controller.ticklerUpdate.serviceTime.split(":");

			if (dp.length != 3 || tp.length != 2)
			{
				alert('Invalid Date/time. Please use yyyy-MM-dd and HH:mm formats');
				return;
			}

			var d = new Date(dp[0], parseInt(dp[1]) - 1, dp[2], tp[0], tp[1], 0, 0);

			if (d == null || isNaN(d.getTime()))
			{
				alert('Invalid Date/time. Please use yyyy-MM-dd and HH:mm formats');
				return;
			}
			controller.needsUpdate = true;
			controller.tickler.serviceDate = d;
			controller.showServiceDateAndTimeFormControl = false;
		};

		controller.cancelServiceDateAndTimeUpdate = function()
		{
			controller.ticklerUpdate.serviceDate = null;
			controller.showServiceDateAndTimeFormControl = false;
		};

		controller.editPriority = function()
		{
			// controller.ticklerUpdate.priority = controller.tickler.priority;
			controller.priorities = ['Low', 'Normal', 'High'];

			controller.showPriorityFormControl = true;
		};

		controller.updatePriority = function(newPriority)
		{
			controller.needsUpdate = true;
			// controller.ticklerUpdate.priority = newPriority; // Don't need this anymore?
			controller.showPriorityFormControl = false;
		};


		controller.cancelPriorityUpdate = function()
		{
			controller.ticklerUpdate.priority = null;
			controller.showPriorityFormControl = false;
		};

		controller.editStatus = function()
		{
			// controller.ticklerUpdate.statusName = controller.tickler.statusName;
			// controller.ticklerUpdate.status = controller.tickler.statusName;
			controller.showStatusFormControl = true;
		};

		controller.updateStatus = function(selectedStatus)
		{
			controller.needsUpdate = true;
			controller.ticklerUpdate.status = selectedStatus.id;
			controller.ticklerUpdate.statusName = selectedStatus.label;
			controller.showStatusFormControl = false;
		};

		controller.cancelStatusUpdate = function()
		{
			controller.ticklerUpdate.statusName = null;
			controller.ticklerUpdate.status = null;

			controller.showStatusFormControl = false;

		};

		controller.addComment = function()
		{
			// controller.ticklerUpdate.comment = '';
			controller.showCommentFormControl = true;

		};

		controller.saveComment = function()
		{
			controller.needsUpdate = true;
			if (controller.ticklerUpdate.ticklerComments == null)
			{
				controller.ticklerUpdate.ticklerComments = [];
			}
			var comment = {
				message: controller.ticklerUpdate.comment,
				providerName: me.formattedName,
				providerNo: me.providerNo,
				updateDate: new Date(),
				newComment: true
			};
			controller.ticklerUpdate.ticklerComments.unshift(comment);
			controller.showCommentFormControl = false;
			controller.showComments = true;
		};

		controller.cancelCommentUpdate = function()
		{
			controller.ticklerUpdate.comment = null;
			controller.showCommentFormControl = false;
		};


		controller.searchProviders = function(val)
		{
			var search = {
				searchTerm: val,
				active: true
			};
			return providerService.searchProviders(search, 0, 10).then(function(response)
			{
				var resp = [];
				for (var x = 0; x < response.length; x++)
				{
					resp.push(
					{
						providerNo: response[x].providerNo,
						name: response[x].firstName + ' ' + response[x].lastName
					});
				}
				return resp;
			});
		};

		controller.saveChanges = function()
		{
			if (tickler.message != controller.ticklerUpdate.message)
			{
				controller.needsUpdate = true;
			}
			// if (tickler.serviceDate != controller.ticklerUpdate.serviceDate.getTime())
			// {
			// 	controller.needsUpdate = true;
			// }

			if (tickler.serviceDate != controller.ticklerUpdate.serviceDate)
			{
				controller.needsUpdate = true;
			}

			if (controller.needsUpdate)
			{
				var postData = angular.copy(controller.ticklerUpdate);
				// if (Juno.Common.Util.exists(postData.serviceDate))
				// {
				// 	// postData.serviceDate = postData.serviceDate.getTime();
				// 	console.log('POST DATA: ', postData);
				// }

				console.log('Post DATA: ', postData);

				ticklerService.update(postData).then(function(data)
				{
					$uibModalInstance.close(true);
				});
			}
			else
			{
				$uibModalInstance.close(false);
			}

		};


		controller.completeTickler = function()
		{
			ticklerService.setCompleted([tickler.id]).then(function(data)
			{
				$uibModalInstance.close(true);
			}, function(reason)
			{
				alert(reason);
			});

		};

		controller.deleteTickler = function()
		{
			ticklerService.setDeleted([tickler.id]).then(function(data)
			{
				$uibModalInstance.close(true);
			}, function(reason)
			{
				alert(reason);
			});

		};

		controller.printTickler = function()
		{
			window.open('../Tickler.do?method=print&id=' + tickler.id);

		};
	}
]);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! moment */ "./node_modules/moment/moment.js")))

/***/ }),

/***/ 0:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** multi ../webapp/share/javascript/Oscar.js ./src/common/displayMessages.js ./src/common/util/util.js ./src/common/util/serviceHelper.js ./src/consults/common.js ./app.js ./src/common/module.js ./src/common/util/module.js ./src/common/util/angular-util.js ./src/common/util/junoHttp.js ./src/common/util/searchListHelper.js ./src/common/services/module.js ./src/common/services/appService.js ./src/common/services/autoCompleteService.js ./src/common/services/billingService.js ./src/common/services/consultService.js ./src/common/services/demographicService.js ./src/common/services/demographicsService.js ./src/common/services/diseaseRegistryService.js ./src/common/services/errorsService.js ./src/common/services/faxAccountService.js ./src/common/services/faxInboundService.js ./src/common/services/faxOutboundService.js ./src/common/services/fieldHelperService.js ./src/common/services/focusService.js ./src/common/services/formService.js ./src/common/services/globalStateService.js ./src/common/services/inboxService.js ./src/common/services/k2aService.js ./src/common/services/messageService.js ./src/common/services/noteService.js ./src/common/services/patientDetailStatusService.js ./src/common/services/personaService.js ./src/common/services/programService.js ./src/common/services/providerService.js ./src/common/services/providersService.js ./src/common/services/reportingService.js ./src/common/services/resultsService.js ./src/common/services/scheduleService.js ./src/common/services/securityService.js ./src/common/services/staticDataService.js ./src/common/services/summaryService.js ./src/common/services/systemPreferenceService.js ./src/common/services/ticklerService.js ./src/common/services/reportByTemplateService.js ./src/common/services/uxService.js ./src/common/services/specialistsService.js ./src/common/services/referralDoctorsService.js ./src/common/filters/module.js ./src/common/filters/age.js ./src/common/filters/cut.js ./src/common/filters/offset.js ./src/common/filters/startFrom.js ./src/common/directives/module.js ./src/common/directives/typeaheadHelper.js ./src/common/directives/patientSearchTypeahead.js ./src/common/directives/patientTypeahead.js ./src/common/directives/datepickerPopup.js ./src/common/directives/jqueryUIResizable.js ./src/common/directives/jqueryUIDraggable.js ./src/common/directives/angular-ui-calendar.js ./src/common/directives/selectOptionTooltip.js ./src/common/directives/clinicaid/ca_field_alphadate.js ./src/common/directives/clinicaid/ca_field_alpha.js ./src/common/directives/clinicaid/ca_field_autocomplete.js ./src/common/directives/clinicaid/ca_field_boolean.js ./src/common/directives/clinicaid/ca_field_button_group.js ./src/common/directives/clinicaid/ca_field_color.js ./src/common/directives/clinicaid/ca_field_currency_filter.js ./src/common/directives/clinicaid/ca_field_currency.js ./src/common/directives/clinicaid/ca_field_date3.js ./src/common/directives/clinicaid/ca_field_date.js ./src/common/directives/clinicaid/ca_field_number.js ./src/common/directives/clinicaid/ca_field_select.js ./src/common/directives/clinicaid/ca_field_text.js ./src/common/directives/clinicaid/ca_field_time.js ./src/common/directives/clinicaid/ca_field_toggle.js ./src/common/directives/clinicaid/ca_focus_field.js ./src/common/directives/clinicaid/ca_info_messages.js ./src/common/directives/clinicaid/ca_key_bind_scope.js ./src/common/directives/clinicaid/ca_pagination.js ./src/common/directives/clinicaid/ca_quill.js ./src/common/directives/clinicaid/ca_sticky_search_results_footer.js ./src/common/directives/clinicaid/ca_zero_pad.js ./src/common/directives/clinicaid/compile_html.js ./src/common/directives/clinicaid/file_model.js ./src/common/directives/clinicaid/resize_handler.js ./src/common/directives/clinicaid/resize.js ./src/common/directives/clinicaid/scroll_handler.js ./src/common/directives/clinicaid/scroll.js ./src/common/directives/clinicaid/zero_pad.js ./src/layout/module.js ./src/layout/bodyController.js ./src/layout/navBarController.js ./src/patient/module.js ./src/patient/newPatientController.js ./src/dashboard/module.js ./src/dashboard/dashboardController.js ./src/dashboard/ticklerConfigureController.js ./src/patientlist/module.js ./src/patientlist/patientListState.js ./src/patientlist/patientListController.js ./src/patientlist/patientListAppointmentListController.js ./src/patientlist/patientListConfigController.js ./src/patientlist/patientListDemographicSetController.js ./src/patientlist/patientListProgramController.js ./src/record/module.js ./src/record/recordController.js ./src/record/summary/module.js ./src/record/summary/summaryController.js ./src/record/summary/recordPrintController.js ./src/record/summary/groupNotesController.js ./src/record/summary/saveWarningController.js ./src/record/forms/module.js ./src/record/forms/formsController.js ./src/record/details/module.js ./src/record/details/detailsController.js ./src/record/phr/module.js ./src/record/phr/phrController.js ./src/record/tracker/module.js ./src/record/tracker/trackerController.js ./src/tickler/module.js ./src/tickler/ticklerListController.js ./src/tickler/ticklerViewController.js ./src/tickler/ticklerAddController.js ./src/tickler/ticklerNoteController.js ./src/tickler/ticklerCommentController.js ./src/schedule/module.js ./src/schedule/scheduleController.js ./src/schedule/eventController.js ./src/schedule/appointmentAddController.js ./src/schedule/appointmentViewController.js ./src/admin/module.js ./src/admin/adminController.js ./src/admin/integration/module.js ./src/admin/integration/fax/module.js ./src/admin/integration/fax/faxConfigurationController.js ./src/admin/integration/fax/faxConfigurationEditController.js ./src/admin/integration/fax/faxSendReceiveController.js ./src/admin/integration/know2act/module.js ./src/admin/integration/know2act/Know2actConfigController.js ./src/admin/integration/know2act/Know2actNotificationController.js ./src/admin/integration/know2act/Know2actTemplateController.js ./src/billing/billingController.js ./src/consults/module.js ./src/consults/consultRequestAttachmentController.js ./src/consults/consultResponseAttachmentController.js ./src/consults/consultRequestListController.js ./src/consults/consultRequestController.js ./src/consults/consultResponseListController.js ./src/consults/consultResponseController.js ./src/inbox/module.js ./src/inbox/inboxController.js ./src/patient/search/module.js ./src/patient/search/patientSearchController.js ./src/patient/search/remotePatientResultsController.js ./src/report/module.js ./src/report/reportsController.js ./src/report/reportBadAppointmentSheetController.js ./src/report/reportDaySheetController.js ./src/report/reportEdbListController.js ./src/report/reportFollowUpIntakeController.js ./src/report/reportNoShowAppointmentSheetController.js ./src/report/reportOldPatientsController.js ./src/report/reportPatientChartListController.js ./src/report/reportRegistrationIntakeController.js ./src/report/reportSHMentalHealthController.js ./src/document/module.js ./src/document/documentsController.js ./src/settings/module.js ./src/settings/settingsController.js ./src/settings/changePasswordController.js ./src/settings/quickLinkController.js ./src/help/module.js ./src/help/supportController.js ./src/help/helpController.js ./src/index.ts ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! ../webapp/share/javascript/Oscar.js */"../webapp/share/javascript/Oscar.js");
__webpack_require__(/*! ./src/common/displayMessages.js */"./src/common/displayMessages.js");
__webpack_require__(/*! ./src/common/util/util.js */"./src/common/util/util.js");
__webpack_require__(/*! ./src/common/util/serviceHelper.js */"./src/common/util/serviceHelper.js");
__webpack_require__(/*! ./src/consults/common.js */"./src/consults/common.js");
__webpack_require__(/*! ./app.js */"./app.js");
__webpack_require__(/*! ./src/common/module.js */"./src/common/module.js");
__webpack_require__(/*! ./src/common/util/module.js */"./src/common/util/module.js");
__webpack_require__(/*! ./src/common/util/angular-util.js */"./src/common/util/angular-util.js");
__webpack_require__(/*! ./src/common/util/junoHttp.js */"./src/common/util/junoHttp.js");
__webpack_require__(/*! ./src/common/util/searchListHelper.js */"./src/common/util/searchListHelper.js");
__webpack_require__(/*! ./src/common/services/module.js */"./src/common/services/module.js");
__webpack_require__(/*! ./src/common/services/appService.js */"./src/common/services/appService.js");
__webpack_require__(/*! ./src/common/services/autoCompleteService.js */"./src/common/services/autoCompleteService.js");
__webpack_require__(/*! ./src/common/services/billingService.js */"./src/common/services/billingService.js");
__webpack_require__(/*! ./src/common/services/consultService.js */"./src/common/services/consultService.js");
__webpack_require__(/*! ./src/common/services/demographicService.js */"./src/common/services/demographicService.js");
__webpack_require__(/*! ./src/common/services/demographicsService.js */"./src/common/services/demographicsService.js");
__webpack_require__(/*! ./src/common/services/diseaseRegistryService.js */"./src/common/services/diseaseRegistryService.js");
__webpack_require__(/*! ./src/common/services/errorsService.js */"./src/common/services/errorsService.js");
__webpack_require__(/*! ./src/common/services/faxAccountService.js */"./src/common/services/faxAccountService.js");
__webpack_require__(/*! ./src/common/services/faxInboundService.js */"./src/common/services/faxInboundService.js");
__webpack_require__(/*! ./src/common/services/faxOutboundService.js */"./src/common/services/faxOutboundService.js");
__webpack_require__(/*! ./src/common/services/fieldHelperService.js */"./src/common/services/fieldHelperService.js");
__webpack_require__(/*! ./src/common/services/focusService.js */"./src/common/services/focusService.js");
__webpack_require__(/*! ./src/common/services/formService.js */"./src/common/services/formService.js");
__webpack_require__(/*! ./src/common/services/globalStateService.js */"./src/common/services/globalStateService.js");
__webpack_require__(/*! ./src/common/services/inboxService.js */"./src/common/services/inboxService.js");
__webpack_require__(/*! ./src/common/services/k2aService.js */"./src/common/services/k2aService.js");
__webpack_require__(/*! ./src/common/services/messageService.js */"./src/common/services/messageService.js");
__webpack_require__(/*! ./src/common/services/noteService.js */"./src/common/services/noteService.js");
__webpack_require__(/*! ./src/common/services/patientDetailStatusService.js */"./src/common/services/patientDetailStatusService.js");
__webpack_require__(/*! ./src/common/services/personaService.js */"./src/common/services/personaService.js");
__webpack_require__(/*! ./src/common/services/programService.js */"./src/common/services/programService.js");
__webpack_require__(/*! ./src/common/services/providerService.js */"./src/common/services/providerService.js");
__webpack_require__(/*! ./src/common/services/providersService.js */"./src/common/services/providersService.js");
__webpack_require__(/*! ./src/common/services/reportingService.js */"./src/common/services/reportingService.js");
__webpack_require__(/*! ./src/common/services/resultsService.js */"./src/common/services/resultsService.js");
__webpack_require__(/*! ./src/common/services/scheduleService.js */"./src/common/services/scheduleService.js");
__webpack_require__(/*! ./src/common/services/securityService.js */"./src/common/services/securityService.js");
__webpack_require__(/*! ./src/common/services/staticDataService.js */"./src/common/services/staticDataService.js");
__webpack_require__(/*! ./src/common/services/summaryService.js */"./src/common/services/summaryService.js");
__webpack_require__(/*! ./src/common/services/systemPreferenceService.js */"./src/common/services/systemPreferenceService.js");
__webpack_require__(/*! ./src/common/services/ticklerService.js */"./src/common/services/ticklerService.js");
__webpack_require__(/*! ./src/common/services/reportByTemplateService.js */"./src/common/services/reportByTemplateService.js");
__webpack_require__(/*! ./src/common/services/uxService.js */"./src/common/services/uxService.js");
__webpack_require__(/*! ./src/common/services/specialistsService.js */"./src/common/services/specialistsService.js");
__webpack_require__(/*! ./src/common/services/referralDoctorsService.js */"./src/common/services/referralDoctorsService.js");
__webpack_require__(/*! ./src/common/filters/module.js */"./src/common/filters/module.js");
__webpack_require__(/*! ./src/common/filters/age.js */"./src/common/filters/age.js");
__webpack_require__(/*! ./src/common/filters/cut.js */"./src/common/filters/cut.js");
__webpack_require__(/*! ./src/common/filters/offset.js */"./src/common/filters/offset.js");
__webpack_require__(/*! ./src/common/filters/startFrom.js */"./src/common/filters/startFrom.js");
__webpack_require__(/*! ./src/common/directives/module.js */"./src/common/directives/module.js");
__webpack_require__(/*! ./src/common/directives/typeaheadHelper.js */"./src/common/directives/typeaheadHelper.js");
__webpack_require__(/*! ./src/common/directives/patientSearchTypeahead.js */"./src/common/directives/patientSearchTypeahead.js");
__webpack_require__(/*! ./src/common/directives/patientTypeahead.js */"./src/common/directives/patientTypeahead.js");
__webpack_require__(/*! ./src/common/directives/datepickerPopup.js */"./src/common/directives/datepickerPopup.js");
__webpack_require__(/*! ./src/common/directives/jqueryUIResizable.js */"./src/common/directives/jqueryUIResizable.js");
__webpack_require__(/*! ./src/common/directives/jqueryUIDraggable.js */"./src/common/directives/jqueryUIDraggable.js");
__webpack_require__(/*! ./src/common/directives/angular-ui-calendar.js */"./src/common/directives/angular-ui-calendar.js");
!(function webpackMissingModule() { var e = new Error("Cannot find module './src/common/directives/selectOptionTooltip.js'"); e.code = 'MODULE_NOT_FOUND'; throw e; }());
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_alphadate.js */"./src/common/directives/clinicaid/ca_field_alphadate.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_alpha.js */"./src/common/directives/clinicaid/ca_field_alpha.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_autocomplete.js */"./src/common/directives/clinicaid/ca_field_autocomplete.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_boolean.js */"./src/common/directives/clinicaid/ca_field_boolean.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_button_group.js */"./src/common/directives/clinicaid/ca_field_button_group.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_color.js */"./src/common/directives/clinicaid/ca_field_color.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_currency_filter.js */"./src/common/directives/clinicaid/ca_field_currency_filter.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_currency.js */"./src/common/directives/clinicaid/ca_field_currency.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_date3.js */"./src/common/directives/clinicaid/ca_field_date3.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_date.js */"./src/common/directives/clinicaid/ca_field_date.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_number.js */"./src/common/directives/clinicaid/ca_field_number.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_select.js */"./src/common/directives/clinicaid/ca_field_select.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_text.js */"./src/common/directives/clinicaid/ca_field_text.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_time.js */"./src/common/directives/clinicaid/ca_field_time.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_field_toggle.js */"./src/common/directives/clinicaid/ca_field_toggle.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_focus_field.js */"./src/common/directives/clinicaid/ca_focus_field.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_info_messages.js */"./src/common/directives/clinicaid/ca_info_messages.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_key_bind_scope.js */"./src/common/directives/clinicaid/ca_key_bind_scope.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_pagination.js */"./src/common/directives/clinicaid/ca_pagination.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_quill.js */"./src/common/directives/clinicaid/ca_quill.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_sticky_search_results_footer.js */"./src/common/directives/clinicaid/ca_sticky_search_results_footer.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/ca_zero_pad.js */"./src/common/directives/clinicaid/ca_zero_pad.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/compile_html.js */"./src/common/directives/clinicaid/compile_html.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/file_model.js */"./src/common/directives/clinicaid/file_model.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/resize_handler.js */"./src/common/directives/clinicaid/resize_handler.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/resize.js */"./src/common/directives/clinicaid/resize.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/scroll_handler.js */"./src/common/directives/clinicaid/scroll_handler.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/scroll.js */"./src/common/directives/clinicaid/scroll.js");
__webpack_require__(/*! ./src/common/directives/clinicaid/zero_pad.js */"./src/common/directives/clinicaid/zero_pad.js");
__webpack_require__(/*! ./src/layout/module.js */"./src/layout/module.js");
__webpack_require__(/*! ./src/layout/bodyController.js */"./src/layout/bodyController.js");
__webpack_require__(/*! ./src/layout/navBarController.js */"./src/layout/navBarController.js");
__webpack_require__(/*! ./src/patient/module.js */"./src/patient/module.js");
__webpack_require__(/*! ./src/patient/newPatientController.js */"./src/patient/newPatientController.js");
__webpack_require__(/*! ./src/dashboard/module.js */"./src/dashboard/module.js");
__webpack_require__(/*! ./src/dashboard/dashboardController.js */"./src/dashboard/dashboardController.js");
__webpack_require__(/*! ./src/dashboard/ticklerConfigureController.js */"./src/dashboard/ticklerConfigureController.js");
__webpack_require__(/*! ./src/patientlist/module.js */"./src/patientlist/module.js");
__webpack_require__(/*! ./src/patientlist/patientListState.js */"./src/patientlist/patientListState.js");
__webpack_require__(/*! ./src/patientlist/patientListController.js */"./src/patientlist/patientListController.js");
__webpack_require__(/*! ./src/patientlist/patientListAppointmentListController.js */"./src/patientlist/patientListAppointmentListController.js");
__webpack_require__(/*! ./src/patientlist/patientListConfigController.js */"./src/patientlist/patientListConfigController.js");
__webpack_require__(/*! ./src/patientlist/patientListDemographicSetController.js */"./src/patientlist/patientListDemographicSetController.js");
__webpack_require__(/*! ./src/patientlist/patientListProgramController.js */"./src/patientlist/patientListProgramController.js");
__webpack_require__(/*! ./src/record/module.js */"./src/record/module.js");
__webpack_require__(/*! ./src/record/recordController.js */"./src/record/recordController.js");
__webpack_require__(/*! ./src/record/summary/module.js */"./src/record/summary/module.js");
__webpack_require__(/*! ./src/record/summary/summaryController.js */"./src/record/summary/summaryController.js");
__webpack_require__(/*! ./src/record/summary/recordPrintController.js */"./src/record/summary/recordPrintController.js");
__webpack_require__(/*! ./src/record/summary/groupNotesController.js */"./src/record/summary/groupNotesController.js");
__webpack_require__(/*! ./src/record/summary/saveWarningController.js */"./src/record/summary/saveWarningController.js");
__webpack_require__(/*! ./src/record/forms/module.js */"./src/record/forms/module.js");
__webpack_require__(/*! ./src/record/forms/formsController.js */"./src/record/forms/formsController.js");
__webpack_require__(/*! ./src/record/details/module.js */"./src/record/details/module.js");
__webpack_require__(/*! ./src/record/details/detailsController.js */"./src/record/details/detailsController.js");
__webpack_require__(/*! ./src/record/phr/module.js */"./src/record/phr/module.js");
__webpack_require__(/*! ./src/record/phr/phrController.js */"./src/record/phr/phrController.js");
__webpack_require__(/*! ./src/record/tracker/module.js */"./src/record/tracker/module.js");
__webpack_require__(/*! ./src/record/tracker/trackerController.js */"./src/record/tracker/trackerController.js");
__webpack_require__(/*! ./src/tickler/module.js */"./src/tickler/module.js");
__webpack_require__(/*! ./src/tickler/ticklerListController.js */"./src/tickler/ticklerListController.js");
__webpack_require__(/*! ./src/tickler/ticklerViewController.js */"./src/tickler/ticklerViewController.js");
__webpack_require__(/*! ./src/tickler/ticklerAddController.js */"./src/tickler/ticklerAddController.js");
__webpack_require__(/*! ./src/tickler/ticklerNoteController.js */"./src/tickler/ticklerNoteController.js");
__webpack_require__(/*! ./src/tickler/ticklerCommentController.js */"./src/tickler/ticklerCommentController.js");
__webpack_require__(/*! ./src/schedule/module.js */"./src/schedule/module.js");
__webpack_require__(/*! ./src/schedule/scheduleController.js */"./src/schedule/scheduleController.js");
__webpack_require__(/*! ./src/schedule/eventController.js */"./src/schedule/eventController.js");
__webpack_require__(/*! ./src/schedule/appointmentAddController.js */"./src/schedule/appointmentAddController.js");
__webpack_require__(/*! ./src/schedule/appointmentViewController.js */"./src/schedule/appointmentViewController.js");
__webpack_require__(/*! ./src/admin/module.js */"./src/admin/module.js");
__webpack_require__(/*! ./src/admin/adminController.js */"./src/admin/adminController.js");
__webpack_require__(/*! ./src/admin/integration/module.js */"./src/admin/integration/module.js");
__webpack_require__(/*! ./src/admin/integration/fax/module.js */"./src/admin/integration/fax/module.js");
__webpack_require__(/*! ./src/admin/integration/fax/faxConfigurationController.js */"./src/admin/integration/fax/faxConfigurationController.js");
__webpack_require__(/*! ./src/admin/integration/fax/faxConfigurationEditController.js */"./src/admin/integration/fax/faxConfigurationEditController.js");
__webpack_require__(/*! ./src/admin/integration/fax/faxSendReceiveController.js */"./src/admin/integration/fax/faxSendReceiveController.js");
__webpack_require__(/*! ./src/admin/integration/know2act/module.js */"./src/admin/integration/know2act/module.js");
__webpack_require__(/*! ./src/admin/integration/know2act/Know2actConfigController.js */"./src/admin/integration/know2act/Know2actConfigController.js");
__webpack_require__(/*! ./src/admin/integration/know2act/Know2actNotificationController.js */"./src/admin/integration/know2act/Know2actNotificationController.js");
__webpack_require__(/*! ./src/admin/integration/know2act/Know2actTemplateController.js */"./src/admin/integration/know2act/Know2actTemplateController.js");
__webpack_require__(/*! ./src/billing/billingController.js */"./src/billing/billingController.js");
__webpack_require__(/*! ./src/consults/module.js */"./src/consults/module.js");
__webpack_require__(/*! ./src/consults/consultRequestAttachmentController.js */"./src/consults/consultRequestAttachmentController.js");
__webpack_require__(/*! ./src/consults/consultResponseAttachmentController.js */"./src/consults/consultResponseAttachmentController.js");
__webpack_require__(/*! ./src/consults/consultRequestListController.js */"./src/consults/consultRequestListController.js");
__webpack_require__(/*! ./src/consults/consultRequestController.js */"./src/consults/consultRequestController.js");
__webpack_require__(/*! ./src/consults/consultResponseListController.js */"./src/consults/consultResponseListController.js");
__webpack_require__(/*! ./src/consults/consultResponseController.js */"./src/consults/consultResponseController.js");
__webpack_require__(/*! ./src/inbox/module.js */"./src/inbox/module.js");
__webpack_require__(/*! ./src/inbox/inboxController.js */"./src/inbox/inboxController.js");
__webpack_require__(/*! ./src/patient/search/module.js */"./src/patient/search/module.js");
__webpack_require__(/*! ./src/patient/search/patientSearchController.js */"./src/patient/search/patientSearchController.js");
__webpack_require__(/*! ./src/patient/search/remotePatientResultsController.js */"./src/patient/search/remotePatientResultsController.js");
__webpack_require__(/*! ./src/report/module.js */"./src/report/module.js");
__webpack_require__(/*! ./src/report/reportsController.js */"./src/report/reportsController.js");
__webpack_require__(/*! ./src/report/reportBadAppointmentSheetController.js */"./src/report/reportBadAppointmentSheetController.js");
__webpack_require__(/*! ./src/report/reportDaySheetController.js */"./src/report/reportDaySheetController.js");
__webpack_require__(/*! ./src/report/reportEdbListController.js */"./src/report/reportEdbListController.js");
__webpack_require__(/*! ./src/report/reportFollowUpIntakeController.js */"./src/report/reportFollowUpIntakeController.js");
__webpack_require__(/*! ./src/report/reportNoShowAppointmentSheetController.js */"./src/report/reportNoShowAppointmentSheetController.js");
__webpack_require__(/*! ./src/report/reportOldPatientsController.js */"./src/report/reportOldPatientsController.js");
__webpack_require__(/*! ./src/report/reportPatientChartListController.js */"./src/report/reportPatientChartListController.js");
__webpack_require__(/*! ./src/report/reportRegistrationIntakeController.js */"./src/report/reportRegistrationIntakeController.js");
__webpack_require__(/*! ./src/report/reportSHMentalHealthController.js */"./src/report/reportSHMentalHealthController.js");
__webpack_require__(/*! ./src/document/module.js */"./src/document/module.js");
__webpack_require__(/*! ./src/document/documentsController.js */"./src/document/documentsController.js");
__webpack_require__(/*! ./src/settings/module.js */"./src/settings/module.js");
__webpack_require__(/*! ./src/settings/settingsController.js */"./src/settings/settingsController.js");
__webpack_require__(/*! ./src/settings/changePasswordController.js */"./src/settings/changePasswordController.js");
__webpack_require__(/*! ./src/settings/quickLinkController.js */"./src/settings/quickLinkController.js");
__webpack_require__(/*! ./src/help/module.js */"./src/help/module.js");
__webpack_require__(/*! ./src/help/supportController.js */"./src/help/supportController.js");
__webpack_require__(/*! ./src/help/helpController.js */"./src/help/helpController.js");
module.exports = __webpack_require__(/*! ./src/index.ts */"./src/index.ts");


/***/ })

},[[0,"runtime~bundle","vendors~bundle"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vd2ViYXBwL3NoYXJlL2phdmFzY3JpcHQvT3NjYXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwLmpzIiwid2VicGFjazovLy8uL2dlbmVyYXRlZC9hcGkvQXBwb2ludG1lbnRBcGkudHMiLCJ3ZWJwYWNrOi8vLy4vZ2VuZXJhdGVkL2FwaS9TY2hlZHVsZUFwaS50cyIsIndlYnBhY2s6Ly8vLi9zY3NzL2p1bm8uc2NzcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWRtaW4vYWRtaW5Db250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9hZG1pbi9pbnRlZ3JhdGlvbi9mYXgvZmF4Q29uZmlndXJhdGlvbkNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FkbWluL2ludGVncmF0aW9uL2ZheC9mYXhDb25maWd1cmF0aW9uRWRpdENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FkbWluL2ludGVncmF0aW9uL2ZheC9mYXhTZW5kUmVjZWl2ZUNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FkbWluL2ludGVncmF0aW9uL2ZheC9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FkbWluL2ludGVncmF0aW9uL2tub3cyYWN0L0tub3cyYWN0Q29uZmlnQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWRtaW4vaW50ZWdyYXRpb24va25vdzJhY3QvS25vdzJhY3ROb3RpZmljYXRpb25Db250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9hZG1pbi9pbnRlZ3JhdGlvbi9rbm93MmFjdC9Lbm93MmFjdFRlbXBsYXRlQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWRtaW4vaW50ZWdyYXRpb24va25vdzJhY3QvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9hZG1pbi9pbnRlZ3JhdGlvbi9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FkbWluL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYmlsbGluZy9iaWxsaW5nQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvYW5ndWxhci11aS1jYWxlbmRhci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX2ZpZWxkX2FscGhhLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfZmllbGRfYWxwaGFkYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfZmllbGRfYXV0b2NvbXBsZXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfZmllbGRfYm9vbGVhbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX2ZpZWxkX2J1dHRvbl9ncm91cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX2ZpZWxkX2NvbG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfZmllbGRfY3VycmVuY3kuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC9jYV9maWVsZF9jdXJyZW5jeV9maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC9jYV9maWVsZF9kYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfZmllbGRfZGF0ZTMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC9jYV9maWVsZF9udW1iZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC9jYV9maWVsZF9zZWxlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC9jYV9maWVsZF90ZXh0LmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfZmllbGRfdGltZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX2ZpZWxkX3RvZ2dsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX2ZvY3VzX2ZpZWxkLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfaW5mb19tZXNzYWdlcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX2tleV9iaW5kX3Njb3BlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfcGFnaW5hdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX3F1aWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2Ffc3RpY2t5X3NlYXJjaF9yZXN1bHRzX2Zvb3Rlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX3plcm9fcGFkLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY29tcGlsZV9odG1sLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvZmlsZV9tb2RlbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL3Jlc2l6ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL3Jlc2l6ZV9oYW5kbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvc2Nyb2xsLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvc2Nyb2xsX2hhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC96ZXJvX3BhZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvZGF0ZXBpY2tlclBvcHVwLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlyZWN0aXZlcy9qcXVlcnlVSURyYWdnYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvanF1ZXJ5VUlSZXNpemFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kaXJlY3RpdmVzL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvcGF0aWVudFNlYXJjaFR5cGVhaGVhZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvcGF0aWVudFR5cGVhaGVhZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RpcmVjdGl2ZXMvdHlwZWFoZWFkSGVscGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGlzcGxheU1lc3NhZ2VzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZmlsdGVycy9hZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9maWx0ZXJzL2N1dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2ZpbHRlcnMvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZmlsdGVycy9vZmZzZXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9maWx0ZXJzL3N0YXJ0RnJvbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL2FwcFNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9hdXRvQ29tcGxldGVTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvYmlsbGluZ1NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9jb25zdWx0U2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL2RlbW9ncmFwaGljU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL2RlbW9ncmFwaGljc1NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9kaXNlYXNlUmVnaXN0cnlTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvZXJyb3JzU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL2ZheEFjY291bnRTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvZmF4SW5ib3VuZFNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9mYXhPdXRib3VuZFNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9maWVsZEhlbHBlclNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9mb2N1c1NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9mb3JtU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL2dsb2JhbFN0YXRlU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL2luYm94U2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL2syYVNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9tZXNzYWdlU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL25vdGVTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvcGF0aWVudERldGFpbFN0YXR1c1NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9wZXJzb25hU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL3Byb2dyYW1TZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvcHJvdmlkZXJTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvcHJvdmlkZXJzU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL3JlZmVycmFsRG9jdG9yc1NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9yZXBvcnRCeVRlbXBsYXRlU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL3JlcG9ydGluZ1NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9yZXN1bHRzU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL3NjaGVkdWxlU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL3NlY3VyaXR5U2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL3NwZWNpYWxpc3RzU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL3N0YXRpY0RhdGFTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvc3VtbWFyeVNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9zeXN0ZW1QcmVmZXJlbmNlU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL3RpY2tsZXJTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvdXhTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vdXRpbC9hbmd1bGFyLXV0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi91dGlsL2p1bm9IdHRwLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vdXRpbC9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi91dGlsL3NlYXJjaExpc3RIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi91dGlsL3NlcnZpY2VIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi91dGlsL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnN1bHRzL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29uc3VsdHMvY29uc3VsdFJlcXVlc3RBdHRhY2htZW50Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29uc3VsdHMvY29uc3VsdFJlcXVlc3RDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb25zdWx0cy9jb25zdWx0UmVxdWVzdExpc3RDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb25zdWx0cy9jb25zdWx0UmVzcG9uc2VBdHRhY2htZW50Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29uc3VsdHMvY29uc3VsdFJlc3BvbnNlQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29uc3VsdHMvY29uc3VsdFJlc3BvbnNlTGlzdENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnN1bHRzL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGFzaGJvYXJkL2Rhc2hib2FyZENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Rhc2hib2FyZC9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Rhc2hib2FyZC90aWNrbGVyQ29uZmlndXJlQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZG9jdW1lbnQvZG9jdW1lbnRzQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZG9jdW1lbnQvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9oZWxwL2hlbHBDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9oZWxwL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaGVscC9zdXBwb3J0Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5ib3gvaW5ib3hDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmJveC9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9sYXlvdXQvYm9keUNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xheW91dC9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xheW91dC9uYXZCYXJDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYXRpZW50L21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGF0aWVudC9uZXdQYXRpZW50Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGF0aWVudC9zZWFyY2gvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9wYXRpZW50L3NlYXJjaC9wYXRpZW50U2VhcmNoQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGF0aWVudC9zZWFyY2gvcmVtb3RlUGF0aWVudFJlc3VsdHNDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYXRpZW50bGlzdC9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhdGllbnRsaXN0L3BhdGllbnRMaXN0QXBwb2ludG1lbnRMaXN0Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGF0aWVudGxpc3QvcGF0aWVudExpc3RDb25maWdDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYXRpZW50bGlzdC9wYXRpZW50TGlzdENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhdGllbnRsaXN0L3BhdGllbnRMaXN0RGVtb2dyYXBoaWNTZXRDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYXRpZW50bGlzdC9wYXRpZW50TGlzdFByb2dyYW1Db250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYXRpZW50bGlzdC9wYXRpZW50TGlzdFN0YXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9yZWNvcmQvZGV0YWlscy9kZXRhaWxzQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVjb3JkL2RldGFpbHMvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9yZWNvcmQvZm9ybXMvZm9ybXNDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9yZWNvcmQvZm9ybXMvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9yZWNvcmQvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9yZWNvcmQvcGhyL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVjb3JkL3Boci9waHJDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9yZWNvcmQvcmVjb3JkQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVjb3JkL3N1bW1hcnkvZ3JvdXBOb3Rlc0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlY29yZC9zdW1tYXJ5L21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVjb3JkL3N1bW1hcnkvcmVjb3JkUHJpbnRDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9yZWNvcmQvc3VtbWFyeS9zYXZlV2FybmluZ0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlY29yZC9zdW1tYXJ5L3N1bW1hcnlDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9yZWNvcmQvdHJhY2tlci9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlY29yZC90cmFja2VyL3RyYWNrZXJDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9yZXBvcnQvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9yZXBvcnQvcmVwb3J0QmFkQXBwb2ludG1lbnRTaGVldENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlcG9ydC9yZXBvcnREYXlTaGVldENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlcG9ydC9yZXBvcnRFZGJMaXN0Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVwb3J0L3JlcG9ydEZvbGxvd1VwSW50YWtlQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVwb3J0L3JlcG9ydE5vU2hvd0FwcG9pbnRtZW50U2hlZXRDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9yZXBvcnQvcmVwb3J0T2xkUGF0aWVudHNDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9yZXBvcnQvcmVwb3J0UGF0aWVudENoYXJ0TGlzdENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlcG9ydC9yZXBvcnRSZWdpc3RyYXRpb25JbnRha2VDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9yZXBvcnQvcmVwb3J0U0hNZW50YWxIZWFsdGhDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9yZXBvcnQvcmVwb3J0c0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjaGVkdWxlL2FwcG9pbnRtZW50QWRkQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NoZWR1bGUvYXBwb2ludG1lbnRWaWV3Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NoZWR1bGUvZXZlbnRDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9zY2hlZHVsZS9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjaGVkdWxlL3NjaGVkdWxlQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2V0dGluZ3MvY2hhbmdlUGFzc3dvcmRDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9zZXR0aW5ncy9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NldHRpbmdzL3F1aWNrTGlua0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NldHRpbmdzL3NldHRpbmdzQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdGlja2xlci9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RpY2tsZXIvdGlja2xlckFkZENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RpY2tsZXIvdGlja2xlckNvbW1lbnRDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy90aWNrbGVyL3RpY2tsZXJMaXN0Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdGlja2xlci90aWNrbGVyTm90ZUNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RpY2tsZXIvdGlja2xlclZpZXdDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRSxrRUFBa0U7QUFDbEU7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBLCtDO0FBQ0E7QUFDQTtBQUNBLGdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0EsMEI7QUFDQTtBQUNBLHFCO0FBQ0E7QUFDQSxxQjtBQUNBOztBQUVBO0FBQ0EsdUQ7QUFDQTs7QUFFQTtBQUNBLDJEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNFQUFzRTtBQUN0RTtBQUNBO0FBQ0EsZ0JBQWdCLHFCQUFxQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxvQkFBb0I7QUFDakM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxzQ0FBc0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsc0NBQXNDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsQzs7Ozs7Ozs7Ozs7O0FDM05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUSxnQkFBZ0IsRUFBRTtBQUN0QztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7QUFDRDs7OztBQUlBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBRTtBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7Ozs7QUNwb0JBOzs7Ozs7Ozs7O0dBVUc7O0FBSUgsdURBQXVEO0FBRXZEO0lBTUksd0JBQXNCLEtBQXNCLEVBQVksb0JBQXNDLEVBQUUsUUFBaUI7UUFBM0YsVUFBSyxHQUFMLEtBQUssQ0FBaUI7UUFBWSx5QkFBb0IsR0FBcEIsb0JBQW9CLENBQWtCO1FBTHBGLGFBQVEsR0FBRyxtQkFBbUIsQ0FBQztRQUNsQyxtQkFBYyxHQUFTLEVBQUUsQ0FBQztRQUs3QixJQUFJLFFBQVEsS0FBSyxTQUFTLEVBQUU7WUFDeEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7U0FDNUI7SUFDTCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ksdUNBQWMsR0FBckIsVUFBdUIsbUJBQWdELEVBQUUsc0JBQTRCO1FBQ2pHLElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsY0FBYyxDQUFDO1FBRXBELElBQUksZUFBZSxHQUFRLEVBQUUsQ0FBQztRQUM5QixJQUFJLFlBQVksR0FBYyxNQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDdEUsSUFBSSxpQkFBaUIsR0FBc0I7WUFDdkMsTUFBTSxFQUFFLE1BQU07WUFDZCxHQUFHLEVBQUUsWUFBWTtZQUNqQixJQUFJLEVBQUUsbUJBQW1CO1lBQ3pCLE1BQU0sRUFBRSxlQUFlO1lBQ3ZCLE9BQU8sRUFBRSxZQUFZO1NBQ3hCLENBQUM7UUFFRixJQUFJLHNCQUFzQixFQUFFO1lBQ3hCLGlCQUFpQixHQUFTLE1BQU8sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztTQUN2RjtRQUVELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFDRDs7O09BR0c7SUFDSSwwQ0FBaUIsR0FBeEIsVUFBMEIsYUFBcUIsRUFBRSxzQkFBNEI7UUFDekUsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyw4QkFBOEI7YUFDOUQsT0FBTyxDQUFDLEdBQUcsR0FBRyxlQUFlLEdBQUcsR0FBRyxFQUFFLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFckYsSUFBSSxlQUFlLEdBQVEsRUFBRSxDQUFDO1FBQzlCLElBQUksWUFBWSxHQUFjLE1BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN0RSxxRUFBcUU7UUFDckUsSUFBSSxhQUFhLEtBQUssSUFBSSxJQUFJLGFBQWEsS0FBSyxTQUFTLEVBQUU7WUFDdkQsTUFBTSxJQUFJLEtBQUssQ0FBQyx3RkFBd0YsQ0FBQyxDQUFDO1NBQzdHO1FBRUQsSUFBSSxpQkFBaUIsR0FBc0I7WUFDdkMsTUFBTSxFQUFFLFFBQVE7WUFDaEIsR0FBRyxFQUFFLFlBQVk7WUFDakIsTUFBTSxFQUFFLGVBQWU7WUFDdkIsT0FBTyxFQUFFLFlBQVk7U0FDeEIsQ0FBQztRQUVGLElBQUksc0JBQXNCLEVBQUU7WUFDeEIsaUJBQWlCLEdBQVMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO1NBQ3ZGO1FBRUQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDekMsQ0FBQztJQUNEOzs7T0FHRztJQUNJLHNDQUFhLEdBQXBCLFVBQXNCLGFBQXFCLEVBQUUsc0JBQTRCO1FBQ3JFLElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsNENBQTRDO2FBQzVFLE9BQU8sQ0FBQyxHQUFHLEdBQUcsZUFBZSxHQUFHLEdBQUcsRUFBRSxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXJGLElBQUksZUFBZSxHQUFRLEVBQUUsQ0FBQztRQUM5QixJQUFJLFlBQVksR0FBYyxNQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDdEUscUVBQXFFO1FBQ3JFLElBQUksYUFBYSxLQUFLLElBQUksSUFBSSxhQUFhLEtBQUssU0FBUyxFQUFFO1lBQ3ZELE1BQU0sSUFBSSxLQUFLLENBQUMsb0ZBQW9GLENBQUMsQ0FBQztTQUN6RztRQUVELElBQUksaUJBQWlCLEdBQXNCO1lBQ3ZDLE1BQU0sRUFBRSxNQUFNO1lBQ2QsR0FBRyxFQUFFLFlBQVk7WUFDakIsTUFBTSxFQUFFLGVBQWU7WUFDdkIsT0FBTyxFQUFFLFlBQVk7U0FDeEIsQ0FBQztRQUVGLElBQUksc0JBQXNCLEVBQUU7WUFDeEIsaUJBQWlCLEdBQVMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO1NBQ3ZGO1FBRUQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDekMsQ0FBQztJQUNEOzs7T0FHRztJQUNJLDBDQUFpQixHQUF4QixVQUEwQixtQkFBZ0QsRUFBRSxzQkFBNEI7UUFDcEcsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxjQUFjLENBQUM7UUFFcEQsSUFBSSxlQUFlLEdBQVEsRUFBRSxDQUFDO1FBQzlCLElBQUksWUFBWSxHQUFjLE1BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN0RSxJQUFJLGlCQUFpQixHQUFzQjtZQUN2QyxNQUFNLEVBQUUsS0FBSztZQUNiLEdBQUcsRUFBRSxZQUFZO1lBQ2pCLElBQUksRUFBRSxtQkFBbUI7WUFDekIsTUFBTSxFQUFFLGVBQWU7WUFDdkIsT0FBTyxFQUFFLFlBQVk7U0FDeEIsQ0FBQztRQUVGLElBQUksc0JBQXNCLEVBQUU7WUFDeEIsaUJBQWlCLEdBQVMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO1NBQ3ZGO1FBRUQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDekMsQ0FBQztJQTdHTSxzQkFBTyxHQUFhLENBQUMsT0FBTyxFQUFFLHNCQUFzQixFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBOEc3RSxxQkFBQztDQUFBO0FBbEhZLHdDQUFjOzs7Ozs7Ozs7Ozs7OztBQ2hCM0I7Ozs7Ozs7Ozs7R0FVRzs7QUFJSCx1REFBdUQ7QUFFdkQ7SUFNSSxxQkFBc0IsS0FBc0IsRUFBWSxvQkFBc0MsRUFBRSxRQUFpQjtRQUEzRixVQUFLLEdBQUwsS0FBSyxDQUFpQjtRQUFZLHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBa0I7UUFMcEYsYUFBUSxHQUFHLG1CQUFtQixDQUFDO1FBQ2xDLG1CQUFjLEdBQVMsRUFBRSxDQUFDO1FBSzdCLElBQUksUUFBUSxLQUFLLFNBQVMsRUFBRTtZQUN4QixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztTQUM1QjtJQUNMLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNJLHNDQUFnQixHQUF2QixVQUF5QixJQUFZLEVBQUUsS0FBYSxFQUFFLFVBQWtCLEVBQUUsc0JBQTRCO1FBQ2xHLElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsb0RBQW9EO2FBQ3BGLE9BQU8sQ0FBQyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsRUFBRSxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzthQUM3RCxPQUFPLENBQUMsR0FBRyxHQUFHLE9BQU8sR0FBRyxHQUFHLEVBQUUsa0JBQWtCLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7YUFDL0QsT0FBTyxDQUFDLEdBQUcsR0FBRyxZQUFZLEdBQUcsR0FBRyxFQUFFLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFL0UsSUFBSSxlQUFlLEdBQVEsRUFBRSxDQUFDO1FBQzlCLElBQUksWUFBWSxHQUFjLE1BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN0RSw0REFBNEQ7UUFDNUQsSUFBSSxJQUFJLEtBQUssSUFBSSxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUU7WUFDckMsTUFBTSxJQUFJLEtBQUssQ0FBQyw4RUFBOEUsQ0FBQyxDQUFDO1NBQ25HO1FBRUQsNkRBQTZEO1FBQzdELElBQUksS0FBSyxLQUFLLElBQUksSUFBSSxLQUFLLEtBQUssU0FBUyxFQUFFO1lBQ3ZDLE1BQU0sSUFBSSxLQUFLLENBQUMsK0VBQStFLENBQUMsQ0FBQztTQUNwRztRQUVELGtFQUFrRTtRQUNsRSxJQUFJLFVBQVUsS0FBSyxJQUFJLElBQUksVUFBVSxLQUFLLFNBQVMsRUFBRTtZQUNqRCxNQUFNLElBQUksS0FBSyxDQUFDLG9GQUFvRixDQUFDLENBQUM7U0FDekc7UUFFRCxJQUFJLGlCQUFpQixHQUFzQjtZQUN2QyxNQUFNLEVBQUUsS0FBSztZQUNiLEdBQUcsRUFBRSxZQUFZO1lBQ2pCLE1BQU0sRUFBRSxlQUFlO1lBQ3ZCLE9BQU8sRUFBRSxZQUFZO1NBQ3hCLENBQUM7UUFFRixJQUFJLHNCQUFzQixFQUFFO1lBQ3hCLGlCQUFpQixHQUFTLE1BQU8sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztTQUN2RjtRQUVELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFDRDs7O09BR0c7SUFDSSwyQ0FBcUIsR0FBNUIsVUFBOEIsYUFBcUIsRUFBRSxzQkFBNEI7UUFDN0UsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyw4Q0FBOEM7YUFDOUUsT0FBTyxDQUFDLEdBQUcsR0FBRyxlQUFlLEdBQUcsR0FBRyxFQUFFLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFckYsSUFBSSxlQUFlLEdBQVEsRUFBRSxDQUFDO1FBQzlCLElBQUksWUFBWSxHQUFjLE1BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN0RSxxRUFBcUU7UUFDckUsSUFBSSxhQUFhLEtBQUssSUFBSSxJQUFJLGFBQWEsS0FBSyxTQUFTLEVBQUU7WUFDdkQsTUFBTSxJQUFJLEtBQUssQ0FBQyw0RkFBNEYsQ0FBQyxDQUFDO1NBQ2pIO1FBRUQsSUFBSSxpQkFBaUIsR0FBc0I7WUFDdkMsTUFBTSxFQUFFLE1BQU07WUFDZCxHQUFHLEVBQUUsWUFBWTtZQUNqQixNQUFNLEVBQUUsZUFBZTtZQUN2QixPQUFPLEVBQUUsWUFBWTtTQUN4QixDQUFDO1FBRUYsSUFBSSxzQkFBc0IsRUFBRTtZQUN4QixpQkFBaUIsR0FBUyxNQUFPLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLHNCQUFzQixDQUFDLENBQUM7U0FDdkY7UUFFRCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBQ0Q7OztPQUdHO0lBQ0ksb0NBQWMsR0FBckIsVUFBdUIsY0FBc0MsRUFBRSxzQkFBNEI7UUFDdkYsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRywwQkFBMEIsQ0FBQztRQUVoRSxJQUFJLGVBQWUsR0FBUSxFQUFFLENBQUM7UUFDOUIsSUFBSSxZQUFZLEdBQWMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3RFLElBQUksaUJBQWlCLEdBQXNCO1lBQ3ZDLE1BQU0sRUFBRSxNQUFNO1lBQ2QsR0FBRyxFQUFFLFlBQVk7WUFDakIsSUFBSSxFQUFFLGNBQWM7WUFDcEIsTUFBTSxFQUFFLGVBQWU7WUFDdkIsT0FBTyxFQUFFLFlBQVk7U0FDeEIsQ0FBQztRQUVGLElBQUksc0JBQXNCLEVBQUU7WUFDeEIsaUJBQWlCLEdBQVMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO1NBQ3ZGO1FBRUQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDekMsQ0FBQztJQUNEOztPQUVHO0lBQ0ksMkNBQXFCLEdBQTVCLFVBQThCLHNCQUE0QjtRQUN0RCxJQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxHQUFHLG1CQUFtQixDQUFDO1FBRXpELElBQUksZUFBZSxHQUFRLEVBQUUsQ0FBQztRQUM5QixJQUFJLFlBQVksR0FBYyxNQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDdEUsSUFBSSxpQkFBaUIsR0FBc0I7WUFDdkMsTUFBTSxFQUFFLEtBQUs7WUFDYixHQUFHLEVBQUUsWUFBWTtZQUNqQixNQUFNLEVBQUUsZUFBZTtZQUN2QixPQUFPLEVBQUUsWUFBWTtTQUN4QixDQUFDO1FBRUYsSUFBSSxzQkFBc0IsRUFBRTtZQUN4QixpQkFBaUIsR0FBUyxNQUFPLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLHNCQUFzQixDQUFDLENBQUM7U0FDdkY7UUFFRCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBQ0Q7O09BRUc7SUFDSSw0Q0FBc0IsR0FBN0IsVUFBK0Isc0JBQTRCO1FBQ3ZELElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsb0JBQW9CLENBQUM7UUFFMUQsSUFBSSxlQUFlLEdBQVEsRUFBRSxDQUFDO1FBQzlCLElBQUksWUFBWSxHQUFjLE1BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN0RSxJQUFJLGlCQUFpQixHQUFzQjtZQUN2QyxNQUFNLEVBQUUsS0FBSztZQUNiLEdBQUcsRUFBRSxZQUFZO1lBQ2pCLE1BQU0sRUFBRSxlQUFlO1lBQ3ZCLE9BQU8sRUFBRSxZQUFZO1NBQ3hCLENBQUM7UUFFRixJQUFJLHNCQUFzQixFQUFFO1lBQ3hCLGlCQUFpQixHQUFTLE1BQU8sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztTQUN2RjtRQUVELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFDRDs7T0FFRztJQUNJLHlDQUFtQixHQUExQixVQUE0QixzQkFBNEI7UUFDcEQsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxpQkFBaUIsQ0FBQztRQUV2RCxJQUFJLGVBQWUsR0FBUSxFQUFFLENBQUM7UUFDOUIsSUFBSSxZQUFZLEdBQWMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3RFLElBQUksaUJBQWlCLEdBQXNCO1lBQ3ZDLE1BQU0sRUFBRSxLQUFLO1lBQ2IsR0FBRyxFQUFFLFlBQVk7WUFDakIsTUFBTSxFQUFFLGVBQWU7WUFDdkIsT0FBTyxFQUFFLFlBQVk7U0FDeEIsQ0FBQztRQUVGLElBQUksc0JBQXNCLEVBQUU7WUFDeEIsaUJBQWlCLEdBQVMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO1NBQ3ZGO1FBRUQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDekMsQ0FBQztJQUNEOzs7O09BSUc7SUFDSSwyQ0FBcUIsR0FBNUIsVUFBOEIsVUFBa0IsRUFBRSxJQUFZLEVBQUUsc0JBQTRCO1FBQ3hGLElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsbUNBQW1DO2FBQ25FLE9BQU8sQ0FBQyxHQUFHLEdBQUcsWUFBWSxHQUFHLEdBQUcsRUFBRSxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQzthQUN6RSxPQUFPLENBQUMsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLEVBQUUsa0JBQWtCLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVuRSxJQUFJLGVBQWUsR0FBUSxFQUFFLENBQUM7UUFDOUIsSUFBSSxZQUFZLEdBQWMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3RFLGtFQUFrRTtRQUNsRSxJQUFJLFVBQVUsS0FBSyxJQUFJLElBQUksVUFBVSxLQUFLLFNBQVMsRUFBRTtZQUNqRCxNQUFNLElBQUksS0FBSyxDQUFDLHlGQUF5RixDQUFDLENBQUM7U0FDOUc7UUFFRCw0REFBNEQ7UUFDNUQsSUFBSSxJQUFJLEtBQUssSUFBSSxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUU7WUFDckMsTUFBTSxJQUFJLEtBQUssQ0FBQyxtRkFBbUYsQ0FBQyxDQUFDO1NBQ3hHO1FBRUQsSUFBSSxpQkFBaUIsR0FBc0I7WUFDdkMsTUFBTSxFQUFFLEtBQUs7WUFDYixHQUFHLEVBQUUsWUFBWTtZQUNqQixNQUFNLEVBQUUsZUFBZTtZQUN2QixPQUFPLEVBQUUsWUFBWTtTQUN4QixDQUFDO1FBRUYsSUFBSSxzQkFBc0IsRUFBRTtZQUN4QixpQkFBaUIsR0FBUyxNQUFPLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLHNCQUFzQixDQUFDLENBQUM7U0FDdkY7UUFFRCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBQ0Q7OztPQUdHO0lBQ0ksNENBQXNCLEdBQTdCLFVBQStCLElBQVksRUFBRSxzQkFBNEI7UUFDckUsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxzQkFBc0I7YUFDdEQsT0FBTyxDQUFDLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxFQUFFLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFbkUsSUFBSSxlQUFlLEdBQVEsRUFBRSxDQUFDO1FBQzlCLElBQUksWUFBWSxHQUFjLE1BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN0RSw0REFBNEQ7UUFDNUQsSUFBSSxJQUFJLEtBQUssSUFBSSxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUU7WUFDckMsTUFBTSxJQUFJLEtBQUssQ0FBQyxvRkFBb0YsQ0FBQyxDQUFDO1NBQ3pHO1FBRUQsSUFBSSxpQkFBaUIsR0FBc0I7WUFDdkMsTUFBTSxFQUFFLEtBQUs7WUFDYixHQUFHLEVBQUUsWUFBWTtZQUNqQixNQUFNLEVBQUUsZUFBZTtZQUN2QixPQUFPLEVBQUUsWUFBWTtTQUN4QixDQUFDO1FBRUYsSUFBSSxzQkFBc0IsRUFBRTtZQUN4QixpQkFBaUIsR0FBUyxNQUFPLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLHNCQUFzQixDQUFDLENBQUM7U0FDdkY7UUFFRCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBQ0Q7O09BRUc7SUFDSSxvREFBOEIsR0FBckMsVUFBdUMsc0JBQTRCO1FBQy9ELElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsNkJBQTZCLENBQUM7UUFFbkUsSUFBSSxlQUFlLEdBQVEsRUFBRSxDQUFDO1FBQzlCLElBQUksWUFBWSxHQUFjLE1BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN0RSxJQUFJLGlCQUFpQixHQUFzQjtZQUN2QyxNQUFNLEVBQUUsS0FBSztZQUNiLEdBQUcsRUFBRSxZQUFZO1lBQ2pCLE1BQU0sRUFBRSxlQUFlO1lBQ3ZCLE9BQU8sRUFBRSxZQUFZO1NBQ3hCLENBQUM7UUFFRixJQUFJLHNCQUFzQixFQUFFO1lBQ3hCLGlCQUFpQixHQUFTLE1BQU8sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztTQUN2RjtRQUVELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFDRDs7Ozs7O09BTUc7SUFDSSx1Q0FBaUIsR0FBeEIsVUFBMEIsVUFBa0IsRUFBRSxTQUFrQixFQUFFLE9BQWdCLEVBQUUsSUFBYSxFQUFFLHNCQUE0QjtRQUMzSCxJQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxHQUFHLGlDQUFpQzthQUNqRSxPQUFPLENBQUMsR0FBRyxHQUFHLFlBQVksR0FBRyxHQUFHLEVBQUUsa0JBQWtCLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUUvRSxJQUFJLGVBQWUsR0FBUSxFQUFFLENBQUM7UUFDOUIsSUFBSSxZQUFZLEdBQWMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3RFLGtFQUFrRTtRQUNsRSxJQUFJLFVBQVUsS0FBSyxJQUFJLElBQUksVUFBVSxLQUFLLFNBQVMsRUFBRTtZQUNqRCxNQUFNLElBQUksS0FBSyxDQUFDLHFGQUFxRixDQUFDLENBQUM7U0FDMUc7UUFFRCxJQUFJLFNBQVMsS0FBSyxTQUFTLEVBQUU7WUFDekIsZUFBZSxDQUFDLFdBQVcsQ0FBQyxHQUFHLFNBQVMsQ0FBQztTQUM1QztRQUVELElBQUksT0FBTyxLQUFLLFNBQVMsRUFBRTtZQUN2QixlQUFlLENBQUMsU0FBUyxDQUFDLEdBQUcsT0FBTyxDQUFDO1NBQ3hDO1FBRUQsSUFBSSxJQUFJLEtBQUssU0FBUyxFQUFFO1lBQ3BCLGVBQWUsQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUM7U0FDbEM7UUFFRCxJQUFJLGlCQUFpQixHQUFzQjtZQUN2QyxNQUFNLEVBQUUsS0FBSztZQUNiLEdBQUcsRUFBRSxZQUFZO1lBQ2pCLE1BQU0sRUFBRSxlQUFlO1lBQ3ZCLE9BQU8sRUFBRSxZQUFZO1NBQ3hCLENBQUM7UUFFRixJQUFJLHNCQUFzQixFQUFFO1lBQ3hCLGlCQUFpQixHQUFTLE1BQU8sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztTQUN2RjtRQUVELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFDRDs7T0FFRztJQUNJLHVDQUFpQixHQUF4QixVQUEwQixzQkFBNEI7UUFDbEQsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxrQkFBa0IsQ0FBQztRQUV4RCxJQUFJLGVBQWUsR0FBUSxFQUFFLENBQUM7UUFDOUIsSUFBSSxZQUFZLEdBQWMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3RFLElBQUksaUJBQWlCLEdBQXNCO1lBQ3ZDLE1BQU0sRUFBRSxLQUFLO1lBQ2IsR0FBRyxFQUFFLFlBQVk7WUFDakIsTUFBTSxFQUFFLGVBQWU7WUFDdkIsT0FBTyxFQUFFLFlBQVk7U0FDeEIsQ0FBQztRQUVGLElBQUksc0JBQXNCLEVBQUU7WUFDeEIsaUJBQWlCLEdBQVMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO1NBQ3ZGO1FBRUQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDekMsQ0FBQztJQUNEOztPQUVHO0lBQ0ksOENBQXdCLEdBQS9CLFVBQWlDLHNCQUE0QjtRQUN6RCxJQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxHQUFHLHlCQUF5QixDQUFDO1FBRS9ELElBQUksZUFBZSxHQUFRLEVBQUUsQ0FBQztRQUM5QixJQUFJLFlBQVksR0FBYyxNQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDdEUsSUFBSSxpQkFBaUIsR0FBc0I7WUFDdkMsTUFBTSxFQUFFLEtBQUs7WUFDYixHQUFHLEVBQUUsWUFBWTtZQUNqQixNQUFNLEVBQUUsZUFBZTtZQUN2QixPQUFPLEVBQUUsWUFBWTtTQUN4QixDQUFDO1FBRUYsSUFBSSxzQkFBc0IsRUFBRTtZQUN4QixpQkFBaUIsR0FBUyxNQUFPLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLHNCQUFzQixDQUFDLENBQUM7U0FDdkY7UUFFRCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBQ0Q7Ozs7T0FJRztJQUNJLDZDQUF1QixHQUE5QixVQUFnQyxFQUFVLEVBQUUsY0FBc0MsRUFBRSxzQkFBNEI7UUFDNUcsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyx5Q0FBeUM7YUFDekUsT0FBTyxDQUFDLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxFQUFFLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFL0QsSUFBSSxlQUFlLEdBQVEsRUFBRSxDQUFDO1FBQzlCLElBQUksWUFBWSxHQUFjLE1BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN0RSwwREFBMEQ7UUFDMUQsSUFBSSxFQUFFLEtBQUssSUFBSSxJQUFJLEVBQUUsS0FBSyxTQUFTLEVBQUU7WUFDakMsTUFBTSxJQUFJLEtBQUssQ0FBQyxtRkFBbUYsQ0FBQyxDQUFDO1NBQ3hHO1FBRUQsSUFBSSxpQkFBaUIsR0FBc0I7WUFDdkMsTUFBTSxFQUFFLE1BQU07WUFDZCxHQUFHLEVBQUUsWUFBWTtZQUNqQixJQUFJLEVBQUUsY0FBYztZQUNwQixNQUFNLEVBQUUsZUFBZTtZQUN2QixPQUFPLEVBQUUsWUFBWTtTQUN4QixDQUFDO1FBRUYsSUFBSSxzQkFBc0IsRUFBRTtZQUN4QixpQkFBaUIsR0FBUyxNQUFPLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLHNCQUFzQixDQUFDLENBQUM7U0FDdkY7UUFFRCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBQ0Q7Ozs7T0FJRztJQUNJLDJDQUFxQixHQUE1QixVQUE4QixFQUFVLEVBQUUsY0FBc0MsRUFBRSxzQkFBNEI7UUFDMUcsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyx1Q0FBdUM7YUFDdkUsT0FBTyxDQUFDLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxFQUFFLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFL0QsSUFBSSxlQUFlLEdBQVEsRUFBRSxDQUFDO1FBQzlCLElBQUksWUFBWSxHQUFjLE1BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN0RSwwREFBMEQ7UUFDMUQsSUFBSSxFQUFFLEtBQUssSUFBSSxJQUFJLEVBQUUsS0FBSyxTQUFTLEVBQUU7WUFDakMsTUFBTSxJQUFJLEtBQUssQ0FBQyxpRkFBaUYsQ0FBQyxDQUFDO1NBQ3RHO1FBRUQsSUFBSSxpQkFBaUIsR0FBc0I7WUFDdkMsTUFBTSxFQUFFLE1BQU07WUFDZCxHQUFHLEVBQUUsWUFBWTtZQUNqQixJQUFJLEVBQUUsY0FBYztZQUNwQixNQUFNLEVBQUUsZUFBZTtZQUN2QixPQUFPLEVBQUUsWUFBWTtTQUN4QixDQUFDO1FBRUYsSUFBSSxzQkFBc0IsRUFBRTtZQUN4QixpQkFBaUIsR0FBUyxNQUFPLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLHNCQUFzQixDQUFDLENBQUM7U0FDdkY7UUFFRCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBeFlNLG1CQUFPLEdBQWEsQ0FBQyxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsVUFBVSxDQUFDLENBQUM7SUF5WTdFLGtCQUFDO0NBQUE7QUE3WVksa0NBQVc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2Z4Qjs7QUFFQTs7QUFFQTtBQUNBOzs7O0FBSUEsZUFBZTs7QUFFZjtBQUNBOztBQUVBOztBQUVBOztBQUVBLFk7Ozs7Ozs7Ozs7O0FDbkJBOztBQUVBLENBQUM7Ozs7Ozs7Ozs7OztBQ0ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUMxSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHNDQUFzQztBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7O0FDcElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGtEQUFrRDtBQUNqRyxzQ0FBc0Msc0JBQXNCO0FBQzVEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7Ozs7QUMzUEE7O0FBRUEsdUU7Ozs7Ozs7Ozs7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7OztBQ2hHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDNURBOztBQUVBLDRFOzs7Ozs7Ozs7Ozs7QUNGQTs7QUFFQSxtRTs7Ozs7Ozs7Ozs7O0FDRkE7O0FBRUEsdUQ7Ozs7Ozs7Ozs7O0FDRkE7O0FBRUEsQ0FBQzs7Ozs7Ozs7Ozs7O0FDRkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUNBQWlDLGNBQWM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsT0FBTztBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrREFBa0QsU0FBUztBQUMzRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLE9BQU87QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IsTUFBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsWUFBWTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwwQkFBMEI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsZUFBZTtBQUNoQyx5QkFBeUIsU0FBUztBQUNsQyxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLE9BQU87QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLE1BQU07QUFDekIsbUJBQW1CLE1BQU07QUFDekIsb0JBQW9CLE1BQU07QUFDMUI7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLG1DQUFtQyxPQUFPO0FBQzFDO0FBQ0E7QUFDQSxtQ0FBbUMsT0FBTztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLE9BQU87QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2Q0FBNkMsT0FBTztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix3QkFBd0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhGQUE4RjtBQUM5Rjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix5QkFBeUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDOzs7Ozs7Ozs7Ozs7O0FDaldEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7Ozs7Ozs7Ozs7OztBQ3ZCRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7Ozs7Ozs7Ozs7OztBQ3RERDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBLG1CQUFtQixvQ0FBb0M7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7Ozs7Ozs7Ozs7O0FDdlhEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7Ozs7Ozs7Ozs7O0FDcENEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUk7Ozs7Ozs7Ozs7OztBQ25ESjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7Ozs7Ozs7O0FDbEJEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7Ozs7Ozs7Ozs7OztBQ3BCRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDcERBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQyxjQUFjLHNCQUFzQjtBQUN6RSx1Q0FBdUM7QUFDdkMscUNBQXFDO0FBQ3JDO0FBQ0EscUNBQXFDOztBQUVyQztBQUNBLHFDQUFxQztBQUNyQyxxQ0FBcUM7QUFDckMseURBQXlEO0FBQ3pEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7Ozs7Ozs7Ozs7OztBQy9URjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOzs7Ozs7Ozs7Ozs7OztBQ2hMRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOzs7Ozs7Ozs7Ozs7QUNqQ0Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7Ozs7Ozs7OztBQzNCRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7Ozs7Ozs7Ozs7OztBQzlDRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOzs7Ozs7Ozs7Ozs7OztBQzdFRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUk7Ozs7Ozs7Ozs7Ozs7QUNuQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOzs7Ozs7Ozs7Ozs7O0FDcEVEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7Ozs7Ozs7Ozs7Ozs7QUM1R0Q7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7Ozs7Ozs7Ozs7Ozs7QUN0RUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7Ozs7Ozs7Ozs7Ozs7QUN2RUQ7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQSxrQkFBa0IsZ0NBQWdDO0FBQ2xEO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxLQUFLO0FBQ0w7QUFDQSwyQ0FBMkM7QUFDM0M7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUEsSUFBSTs7O0FBR0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7Ozs7Ozs7Ozs7QUNyRUQ7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7QUN0RkQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUksRTtBQUNKLEdBQUc7QUFDSDtBQUNBLENBQUM7Ozs7Ozs7Ozs7OztBQ3RCRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBLENBQUM7Ozs7Ozs7Ozs7OztBQ2REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7Ozs7Ozs7Ozs7Ozs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUU7QUFDRjs7Ozs7Ozs7Ozs7OztBQ2hCQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLEU7QUFDSixHQUFHO0FBQ0g7QUFDQSxDQUFDOzs7Ozs7Ozs7Ozs7O0FDbENEOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUNoQkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOzs7QUFHTDtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7O0FDNURBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOzs7Ozs7Ozs7Ozs7OztBQzVCQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDekZBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3ZGQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7O0FBRUEsRzs7Ozs7Ozs7Ozs7O0FDL05BOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUIsWUFBWSxRQUFRO0FBQ3BCLFFBQVEscUJBQXFCO0FBQzdCLFFBQVEsdUJBQXVCO0FBQy9CO0FBQ0EsUUFBUSwyQkFBMkI7QUFDbkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FO0FBQ25FOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdCQUFnQiw2QkFBNkI7QUFDN0M7QUFDQTtBQUNBOztBQUVBLFlBQVksMkJBQTJCO0FBQ3ZDO0FBQ0E7QUFDQTs7QUFFQSxZQUFZLDhCQUE4QjtBQUMxQztBQUNBO0FBQ0E7O0FBRUEsWUFBWSw0QkFBNEI7QUFDeEM7QUFDQTtBQUNBOztBQUVBLFlBQVksMkJBQTJCO0FBQ3ZDO0FBQ0E7QUFDQTs7QUFFQSxZQUFZLGdDQUFnQztBQUM1QztBQUNBO0FBQ0E7O0FBRUEsWUFBWSx3QkFBd0I7QUFDcEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw4QkFBOEI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDaGhCQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDbkRBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQ3BEQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7QUM1QkE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUN6Q0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQ3RDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSw2Qjs7Ozs7Ozs7Ozs7O0FDNUJBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxHOzs7Ozs7Ozs7Ozs7OENDN0RBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUwsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUN0RUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7OENDOUZBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7OzhDQ3ZUQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7O0FDOUhBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDcklBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUNoSUE7OztBQUdBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjLFdBQVc7QUFDekIsY0FBYyxRQUFRO0FBQ3RCLFVBQVUsbUJBQW1CO0FBQzdCLFVBQVUsb0JBQW9CO0FBQzlCO0FBQ0EsVUFBVSx1QkFBdUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNILEU7Ozs7Ozs7Ozs7OztBQzdCQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0EsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQzdMQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0EsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQ3hEQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0EsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7Ozt5Q0NoRkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0EsR0FBRzs7Ozs7Ozs7Ozs7Ozs7eUNDdEpIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixlQUFlO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQSxHQUFHOzs7Ozs7Ozs7Ozs7OztBQ2pHSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDeE1BOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQSxpREFBaUQ7QUFDakQ7O0FBRUE7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QjtBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3ZDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDbkZBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUMxUEE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUNwRkE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsbUQ7Ozs7Ozs7Ozs7OztBQzVCQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUNwVkE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDL0ZBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUM1TUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQ3pEQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQzFMQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQy9HQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUMxREE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDN0hBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQSxpREFBaUQ7QUFDakQ7O0FBRUE7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QjtBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDeERBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsYUFBYTtBQUMxQixhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUEsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDOUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNuWUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDdklBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQzVEQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLHVCQUF1QjtBQUN2QixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QixzQkFBc0I7QUFDdEIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hELElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQ3IzSUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUNoTkE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBLGlEQUFpRDtBQUNqRDs7QUFFQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBOztBQUVBO0FBQ0EsNEJBQTRCO0FBQzVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQzNGQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQzVMQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUM5R0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsRzs7Ozs7Ozs7Ozs7O0FDM0NBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUM3SEE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsa0M7Ozs7Ozs7Ozs7OztBQzVCQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0EsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUM5RUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7aURDekJBOztBQUVBOzs7QUFHQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLHdEQUF3RDtBQUM1RTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUNBQW1DLFNBQVM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFlBQVk7QUFDWixZQUFZO0FBQ1osY0FBYztBQUNkLGFBQWE7QUFDYixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUNyUUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLEU7Ozs7Ozs7Ozs7O0FDdEJBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQ3pGQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQix1Q0FBdUM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixtQ0FBbUM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLGdDQUFnQztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQ25oQkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDZCQUE2QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsd0JBQXdCO0FBQzdDO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsZ0NBQWdDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLGlDQUFpQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDNWJBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUM1RUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsbUNBQW1DO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLGtCQUFrQix1Q0FBdUM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLG1DQUFtQztBQUNuQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsb0NBQW9DO0FBQ3BDLGtDQUFrQztBQUNsQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQ0FBbUMsWUFBWSxzREFBc0QsTUFBTSxXQUFXLEdBQUcsZ0JBQWdCLGlCQUFpQixVQUFVLG1CQUFtQixHQUFHLG1CQUFtQixNQUFNLGlCQUFpQixHQUFHLGdCQUFnQixPQUFPLGdCQUFnQixRQUFRLGtCQUFrQixvQ0FBb0MsYUFBYSxTQUFTLGFBQWEsK0NBQStDLHdCQUF3Qjs7QUFFdGI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixnQ0FBZ0M7QUFDbEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLFlBQVk7QUFDbEIsT0FBTztBQUNQLElBQUksZ0JBQWdCLGlCQUFpQixRQUFRO0FBQzdDLElBQUk7QUFDSixPQUFPO0FBQ1AsSUFBSTtBQUNKLFFBQVE7QUFDUixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFFBQVE7QUFDUixVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEU7Ozs7Ozs7Ozs7OztBQ3BvQkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsdUVBQXVFO0FBQ3ZFLGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNEJBQTRCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQix5QkFBeUI7QUFDOUM7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQixnQ0FBZ0M7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsaUNBQWlDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQ2haQTs7QUFFQSwwRDs7Ozs7Ozs7Ozs7QUNGQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0EsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsb0JBQW9CO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOzs7QUFHVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQ25pQkE7O0FBRUEsMkQ7Ozs7Ozs7Ozs7O0FDRkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7OztBQ3ZDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7OztBQUdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUMvQkE7O0FBRUEsMEQ7Ozs7Ozs7Ozs7O0FDRkE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUNWQTs7QUFFQSwyQjs7Ozs7Ozs7Ozs7QUNGQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7OztBQ3ZCQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQ1ZBOztBQUVBLDRCOzs7Ozs7Ozs7Ozs7OztBQ0NBLG1FQUFtRTtBQUVuRTs7O01BR0c7Ozs7Ozs7Ozs7OztBQ1JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDdkNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLHdEOzs7Ozs7Ozs7Ozs7eUNDNUJBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQSxpREFBaUQ7QUFDakQ7O0FBRUE7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QjtBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7O0FDbGdCQTs7QUFFQSx5RDs7Ozs7Ozs7Ozs7O0FDRkE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBLGlEQUFpRDtBQUNqRDs7QUFFQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBOztBQUVBO0FBQ0EsNEJBQTRCO0FBQzVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7OztBQzdLQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs4Q0NGQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7Ozs7QUM1UEE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDekZBOztBQUVBLDZEOzs7Ozs7Ozs7OztBQ0ZBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7OztBQUdIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7OztBQUdKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUN2T0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUN6QkE7O0FBRUE7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBLGlEQUFpRDtBQUNqRDs7QUFFQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBOztBQUVBO0FBQ0EsNEJBQTRCO0FBQzVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7OztBQUdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOzs7QUFHSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7OztBQUdKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQy9WQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEc7Ozs7Ozs7Ozs7O0FDdkJBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7O0FBR0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEc7Ozs7Ozs7Ozs7O0FDVEE7O0FBRUE7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBLGlEQUFpRDtBQUNqRDs7QUFFQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBOztBQUVBO0FBQ0EsNEJBQTRCO0FBQzVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsd0NBQXdDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQSxtQ0FBbUM7QUFDbkMsbUNBQW1DO0FBQ25DO0FBQ0EsaUNBQWlDO0FBQ2pDLGtDQUFrQztBQUNsQyxnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7O0FBRS9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1RUFBdUU7O0FBRXZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw4REFBOEQ7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBCQUEwQixtQ0FBbUM7QUFDN0Q7QUFDQSxLQUFLOztBQUVMLHFGQUFxRixJQUFJO0FBQ3pGLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0JBQWdCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQjtBQUNwQjtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixpQkFBaUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLGtCQUFrQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0JBQXdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQzs7Ozs7Ozs7Ozs7O0FDMXBEQTs7QUFFQSxnRTs7Ozs7Ozs7Ozs7QUNGQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0EsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLCtJQUErSTs7QUFFL0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7OztBQUdKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUcsRUFBRTs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7O0FBR0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQix1Q0FBdUM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7OztBQUdKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0Esa0ZBQWtGO0FBQ2xGLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwyRUFBMkU7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBLEc7Ozs7Ozs7Ozs7Ozs7QUN2ZUE7O0FBRUEsOEQ7Ozs7Ozs7Ozs7OztBQ0ZBOztBQUVBLHdEOzs7Ozs7Ozs7Ozs7QUNGQTs7QUFFQSw0RDs7Ozs7Ozs7Ozs7QUNGQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0EsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0lBQStJOzs7QUFHL0k7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLEVBQUUsS0FBSyxrQkFBa0IsRUFBRTs7QUFFOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7Ozs7QUFJSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7O0FDck9BOztBQUVBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQSxpREFBaUQ7QUFDakQ7O0FBRUE7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QjtBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7O0FBRXRDLHNDQUFzQztBQUN0QztBQUNBO0FBQ0EsSUFBSSxvREFBb0Q7QUFDeEQsSUFBSSxzREFBc0Q7QUFDMUQsSUFBSSwyQ0FBMkM7QUFDL0MsSUFBSSxrREFBa0Q7QUFDdEQsSUFBSSxzREFBc0Q7QUFDMUQsSUFBSSx1REFBdUQ7QUFDM0QsSUFBSSxxREFBcUQ7QUFDekQsSUFBSSxpRUFBaUU7QUFDckUsSUFBSSx1REFBdUQ7QUFDM0QsSUFBSSxtREFBbUQ7QUFDdkQsSUFBSSx5REFBeUQ7QUFDN0QsSUFBSSwrQ0FBK0M7QUFDbkQsSUFBSSx5REFBeUQ7QUFDN0QsSUFBSSxzRDtBQUNKO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5REFBeUQ7QUFDL0Usc0JBQXNCLHlEQUF5RDtBQUMvRSxzQkFBc0IsdURBQXVEO0FBQzdFLHNCQUFzQiw2REFBNkQ7QUFDbkYsc0JBQXNCLDZEQUE2RDtBQUNuRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQSx1RkFBdUYsK0JBQStCO0FBQ3RIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEVBQThFOztBQUU5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxxQkFBcUI7O0FBRXJCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLDZDQUE2QztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQiw2Q0FBNkM7QUFDL0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGO0FBQ2pGO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLLFNBQVM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw4QkFBOEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDRCQUE0QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQiw2Q0FBNkM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZDQUE2QztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQzs7Ozs7Ozs7Ozs7O0FDbjFCQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0Esa0JBQWtCLHVEQUF1RDtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7O0FBR0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFO0FBQzVFO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQ0FBa0M7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0ZBQXNGO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RTs7QUFFOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU4sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUF1RDtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxzQ0FBc0M7QUFDdEM7O0FBRUEsZ0VBQWdFO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sSUFBSSxTQUFTO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDRCQUE0QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsdURBQXVEO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUN0ZEE7O0FBRUEsZ0U7Ozs7Ozs7Ozs7O0FDRkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGdCQUFnQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUMxSkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7OztBQzlDQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0EsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDLG1DQUFtQzs7QUFFbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsY0FBYztBQUM1Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZCQUE2QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVCQUF1QjtBQUN6Qzs7QUFFQTtBQUNBLG1CQUFtQix5QkFBeUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixtREFBbUQ7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsa0JBQWtCLHdCQUF3QjtBQUMxQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EseUI7Ozs7Ozs7Ozs7Ozs7QUNodkJBOztBQUVBLGdFOzs7Ozs7Ozs7OztBQ0ZBOztBQUVBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQSxpREFBaUQ7QUFDakQ7O0FBRUE7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QjtBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUMxRUE7O0FBRUEsd0Q7Ozs7Ozs7Ozs7O0FDRkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7O0FDN0RBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7O0FDcEhBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUMxREE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7O0FDL0JBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7O0FDNURBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7O0FDekRBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7OztBQzNEQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUMvQkE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBLGtCQUFrQiwrQkFBK0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7OztBQzlQQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IsNkJBQTZCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7O0FBR0w7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDRCQUE0QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7OztBQ3pRQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxrQkFBa0Isa0NBQWtDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O2lEQ3pLQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxnQkFBZ0Isd0JBQXdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUNBQXFDLGNBQWM7QUFDbkQsbUNBQW1DLGtDQUFrQztBQUNyRSwyQ0FBMkMsa0NBQWtDOztBQUU3RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFDQUFxQyxhQUFhO0FBQ2xELG1DQUFtQyxrQ0FBa0M7QUFDckUsMkNBQTJDLGtDQUFrQzs7QUFFN0U7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDRCQUE0QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7QUNwdUJEOztBQUVBLHlFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNEdUI7QUFDSDs7QUFFcEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1IsT0FBTztBQUNQLE1BQU07QUFDTixLQUFLO0FBQ0wsTUFBTTtBQUNOOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkJBQTZCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNEJBQTRCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHlCQUF5QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixlQUFlOztBQUVwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2QkFBNkI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQix3QkFBd0I7QUFDekM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsb0JBQW9CO0FBQ3ZDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdDQUFnQztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCOztBQUVsQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CO0FBQ25CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLG9CQUFvQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7O0FBRTlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFDQUFxQyxhQUFhO0FBQ2xELDZDQUE2QyxhQUFhOztBQUUxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpQ0FBaUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFGQUFxRjtBQUNyRjs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNkJBQTZCO0FBQ3RELDBCQUEwQix1QkFBdUI7QUFDakQsZ0NBQWdDLGdCQUFnQjtBQUNoRCx5QkFBeUIsY0FBYztBQUN2Qyw2QkFBNkIsZUFBZTtBQUM1QywrQkFBK0IsUUFBUSw2QkFBNkI7QUFDcEUsMEJBQTBCLG9CQUFvQjtBQUM5QztBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNkJBQTZCO0FBQ3RELDBCQUEwQix1QkFBdUI7QUFDakQsZ0NBQWdDLGdCQUFnQjtBQUNoRCx5QkFBeUIsY0FBYztBQUN2Qyw2QkFBNkIsY0FBYztBQUMzQywrQkFBK0IsUUFBUSw2QkFBNkI7QUFDcEUsMEJBQTBCLG9CQUFvQjtBQUM5QztBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9CQUFvQjtBQUN2QztBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7O0FBR0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUM5aERBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDckJBOztBQUVBLDBEOzs7Ozs7Ozs7OztBQ0ZBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUMxQkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsaUJBQWlCLHVCQUF1QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxpQkFBaUIsbURBQW1EO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxtQkFBbUIscUJBQXFCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsb0RBQW9EO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxtQkFBbUIscUJBQXFCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSwrREFBK0QsOEJBQThCO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdEQUF3RDtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLGtCQUFrQixxQkFBcUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLHdEQUF3RDtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7O0FDdm1CQTs7QUFFQSwyRTs7Ozs7Ozs7Ozs7QUNGQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBLGdDQUFnQyxnREFBZ0Q7QUFDaEY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7OztBQUdKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNEJBQTRCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFCQUFxQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHOzs7Ozs7Ozs7Ozs7QUN2UEE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7O0FDckJBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsK0JBQStCO0FBQy9COzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0EsdUJBQXVCLHdCQUF3QjtBQUMvQztBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1I7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJOzs7QUFHSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRzs7Ozs7Ozs7Ozs7QUN2WEE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEc7Ozs7Ozs7Ozs7O0FDMUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscUJBQXFCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHIiwiZmlsZSI6ImJ1bmRsZS5mNGJmZDBmMDM1OWM5OTFlZWVjOC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBcbiAqIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4gKlxuICogVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS4gXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIFxuICogbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgXG4gKiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBcbiAqIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUgXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLiAqICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBcbiAqIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuICogXG4gKiBcbiAqIDxPU0NBUiBURUFNPlxuICogXG4gKiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGUgXG4gKiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSBcbiAqIE1jTWFzdGVyIFVuaXZlcnNpdHkgXG4gKiBIYW1pbHRvbiBcbiAqIE9udGFyaW8sIENhbmFkYSBcbiAqL1xuXG5mdW5jdGlvbiBwb3B1cChoZWlnaHQsIHdpZHRoLCB1cmwsIHdpbmRvd05hbWUpIHtcbiAgcmV0dXJuIHBvcHVwMihoZWlnaHQsIHdpZHRoLCAwLCAwLCB1cmwsIHdpbmRvd05hbWUpO1xufVxuXG5mdW5jdGlvbiBuZXdXaW5kb3codXJsLHdpbmRvd05hbWUpe1xuICAgIC8vdGhpcyB3YXkgdGhlIHcmZCB3b3JrcyB3aXRoIG9sZGVyIGJyb3dzZXJzIGFzIHdlbGxcbiAgICB2YXIgdyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0uY2xpZW50V2lkdGg7Ly93aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB2YXIgaCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0uY2xpZW50SGVpZ2h0Oy8vd2luZG93LmlubmVySGVpZ2h0O1xuICAgIHcgPSBNYXRoLm1heCh3LCB3aW5kb3cuaW5uZXJXaWR0aCk7XG4gICAgaCA9IE1hdGgubWF4KGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgXG4gICAgcmV0dXJuIHBvcHVwMihoLCB3LCAwLCAwLCB1cmwsIHdpbmRvd05hbWUpO1xuIH1cblxuXG5mdW5jdGlvbiBwb3B1cDIoaGVpZ2h0LCB3aWR0aCwgdG9wLCBsZWZ0LCB1cmwsIHdpbmRvd05hbWUpe1xuICBpZiAoIHR5cGVvZiBwb3B1cDIud2luUmVmcyA9PSAndW5kZWZpbmVkJyApIHtcdCAgXG5cdCAgICBwb3B1cDIud2luUmVmcyA9IHt9O1xuICB9XG4gIGlmICggdHlwZW9mIHBvcHVwMi53aW5SZWZzW3dpbmRvd05hbWVdID09ICd1bmRlZmluZWQnIHx8IHBvcHVwMi53aW5SZWZzW3dpbmRvd05hbWVdLmNsb3NlZCApIHsgIFxuXHQgIHdpbmRvd3Byb3BzID0gXCJoZWlnaHQ9XCIraGVpZ2h0K1wiLHdpZHRoPVwiK3dpZHRoK1wiLGxvY2F0aW9uPW5vLHNjcm9sbGJhcnM9eWVzLG1lbnViYXJzPW5vLHRvb2xiYXJzPW5vLHJlc2l6YWJsZT15ZXMsc2NyZWVuWD0wLHNjcmVlblk9MCx0b3A9XCIgKyB0b3AgKyBcIixsZWZ0PVwiICsgbGVmdDtcblx0ICBwb3B1cDIud2luUmVmc1t3aW5kb3dOYW1lXT13aW5kb3cub3Blbih1cmwsIHdpbmRvd05hbWUsIHdpbmRvd3Byb3BzKTtcbiAgfVxuICBlbHNlIHtcblx0ICBwb3B1cDIud2luUmVmc1t3aW5kb3dOYW1lXS5sb2NhdGlvbi5ocmVmID0gdXJsO1xuXHQgIHBvcHVwMi53aW5SZWZzW3dpbmRvd05hbWVdLnJlc2l6ZVRvKHdpZHRoLGhlaWdodCk7XG5cdCAgcG9wdXAyLndpblJlZnNbd2luZG93TmFtZV0uZm9jdXMoKTtcbiAgfVxuICBcbiAgcmV0dXJuIHBvcHVwMi53aW5SZWZzW3dpbmRvd05hbWVdOyAgXG59XG5cbmZ1bmN0aW9uIGNvbmZpcm1OR28odXJsLCBtZXNzYWdlKSB7XG4gICAgaWYgKGNvbmZpcm0obWVzc2FnZSkpIHtcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5cbmZ1bmN0aW9uIHNob3dIaWRlSXRlbShpZCl7IFxuICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5zdHlsZS5kaXNwbGF5ID09ICdub25lJylcbiAgICAgICAgc2hvd0l0ZW0oaWQpOyAgICAgICAgXG4gICAgZWxzZVxuICAgICAgICBoaWRlSXRlbShpZCk7ICAgICAgICBcbn1cblxuZnVuY3Rpb24gc2hvd0l0ZW0oaWQpe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc3R5bGUuZGlzcGxheSA9ICcnOyBcbn1cblxuZnVuY3Rpb24gaGlkZUl0ZW0oaWQpe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgXG59XG5cbi8qXG5vRWxtIC0gTWFuZGF0b3J5LiBUaGlzIGlzIGVsZW1lbnQgaW4gd2hvc2UgY2hpbGRyZW4geW91IHdpbGwgbG9vayBmb3IgdGhlIGF0dHJpYnV0ZS5cbnN0clRhZ05hbWUgLSBNYW5kYXRvcnkuIFRoaXMgaXMgdGhlIG5hbWUgb2YgdGhlIEhUTUwgZWxlbWVudHMgeW91IHdhbnQgdG8gbG9vayBpbi4gVXNlIHdpbGRjYXJkICgqKSBpZiB5b3Ugd2FudCB0byBsb29rIGluIGFsbCBlbGVtZW50cy5cbnN0ckF0dHJpYnV0ZU5hbWUgLSBNYW5kYXRvcnkuIFRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgeW914oCZcmUgbG9va2luZyBmb3IuXG5zdHJBdHRyaWJ1dGVWYWx1ZSAtIE9wdGlvbmFsLiBJZiB5b3Ugd2FudCB0aGUgYXR0cmlidXRlIHlvdeKAmXJlIGxvb2tpbmcgZm9yIHRvIGhhdmUgYSBjZXJ0YWluIHZhbHVlIGFzIHdlbGwuIChkb24ndCBzcGVjaWZ5IGl0IGlmIHlvdSBkb24ndCBrbm93IGl0KVxuKi9cbmRvY3VtZW50LmdldEVsZW1lbnRzQnlBdHRyaWJ1dGUgPSBmdW5jdGlvbihvRWxtLCBzdHJUYWdOYW1lLCBzdHJBdHRyaWJ1dGVOYW1lLCBzdHJBdHRyaWJ1dGVWYWx1ZSl7XG4gICAgdmFyIGFyckVsZW1lbnRzID0gKHN0clRhZ05hbWUgPT0gXCIqXCIgJiYgb0VsbS5hbGwpPyBvRWxtLmFsbCA6IG9FbG0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoc3RyVGFnTmFtZSk7XG4gICAgdmFyIGFyclJldHVybkVsZW1lbnRzID0gbmV3IEFycmF5KCk7XG4gICAgdmFyIG9BdHRyaWJ1dGVWYWx1ZSA9ICh0eXBlb2Ygc3RyQXR0cmlidXRlVmFsdWUgIT0gXCJ1bmRlZmluZWRcIik/IG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIiArIHN0ckF0dHJpYnV0ZVZhbHVlICsgXCIoXFxcXHN8JClcIikgOiBudWxsO1xuICAgIHZhciBvQ3VycmVudDtcbiAgICB2YXIgb0F0dHJpYnV0ZTtcbiAgICBmb3IodmFyIGk9MDsgaTxhcnJFbGVtZW50cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIG9DdXJyZW50ID0gYXJyRWxlbWVudHNbaV07XG4gICAgICAgIG9BdHRyaWJ1dGUgPSBvQ3VycmVudC5nZXRBdHRyaWJ1dGUgJiYgb0N1cnJlbnQuZ2V0QXR0cmlidXRlKHN0ckF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICBpZih0eXBlb2Ygb0F0dHJpYnV0ZSA9PSBcInN0cmluZ1wiICYmIG9BdHRyaWJ1dGUubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICBpZih0eXBlb2Ygc3RyQXR0cmlidXRlVmFsdWUgPT0gXCJ1bmRlZmluZWRcIiB8fCAob0F0dHJpYnV0ZVZhbHVlICYmIG9BdHRyaWJ1dGVWYWx1ZS50ZXN0KG9BdHRyaWJ1dGUpKSl7XG4gICAgICAgICAgICAgICAgYXJyUmV0dXJuRWxlbWVudHMucHVzaChvQ3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFyclJldHVybkVsZW1lbnRzO1xufVxuXG5mdW5jdGlvbiB2YWxpZERhdGUoaWQpIHtcbiAgIC8vY2hlY2tzIGlmIHRoZSA8aW5wdXQgdHlwZT1cInRleHRcIj4gaGFzIGEgdmFsaWQgZGF0ZSBmb3JtYXQgeXl5eS9tbS9kZFxuICAgdmFyIGNvbXBsZXRlUmF3RGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS52YWx1ZTtcbiAgIHJldHVybiB2YWxpZERhdGVUZXh0KGNvbXBsZXRlUmF3RGF0ZSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkRGF0ZVRleHQoY29tcGxldGVSYXdEYXRlKSB7XG4vL0p1c3QgYW5vdGhlciBtZXRob2QgdGhhdCB2YWxpZGF0ZXMgZGF0ZSBpbiBhIHN0cmluZywgdXNlZnVsIGlmIHlvdSB3YW50IHRvIG1ha2UgeW91ciBvd25cbi8vZGF0ZSBjaGVja2luZyBzY3JpcHQuXG4gICB2YXIgZGVsaW1pdGVyID0gJy8nO1xuICAgaWYgKGNvbXBsZXRlUmF3RGF0ZS5pbmRleE9mKCcvJykgPT0gLTEpXG4gICAgICAgZGVsaW1pdGVyID0gJy0nO1xuICAgdmFyIGRhdGVBcnJheSA9IGNvbXBsZXRlUmF3RGF0ZS5zcGxpdChkZWxpbWl0ZXIpO1xuICAgaWYgKGRhdGVBcnJheS5sZW5ndGggIT0gMykgcmV0dXJuIGZhbHNlO1xuICAgeWVhciA9IChkYXRlQXJyYXlbMF0gLSAwKTtcbiAgIG1vbnRoID0gKGRhdGVBcnJheVsxXSAtIDEpO1xuICAgZGF5ID0gKGRhdGVBcnJheVsyXSAtIDApO1xuICAgLy9hbGVydChcInllYXI6IFwiICsgeWVhciArIFwiLCBcIiArIG1vbnRoICsgXCIsIFwiICsgZGF5KTtcbiAgIGRhdGVPYmplY3QgPSBuZXcgRGF0ZSh5ZWFyLG1vbnRoLGRheSk7XG4gICByZXR1cm4gKChkYXk9PWRhdGVPYmplY3QuZ2V0RGF0ZSgpKSAmJiAobW9udGg9PWRhdGVPYmplY3QuZ2V0TW9udGgoKSkgJiYgKHllYXI9PWRhdGVPYmplY3QuZ2V0RnVsbFllYXIoKSkpO1xufVxuXG5mdW5jdGlvbiB2YWxpZERhdGVGaWVsZHNCeUNsYXNzKGNsYXNzTmFtZSwgcGFyZW50RWxlKSB7XG4vL0NoZWNrcyBpZiB0aGUgZGF0ZXMgYXJlIHZhbGlkLCBpZGVudGlmaWVzIGRhdGUgZmllbGRzIGJ5IGNsYXNzIG5hbWU7IGRhdGVmaWVsZCBwcmVmZXJyYWJseSB0eXBlPVwidGV4dFwiXG4vLyBwYXJlbnRFbGUgaXMgYW55IG9iamVjdCB0aGF0IGVuY2xvc2VzIHRoZSBmaWVsZHMsIHVzdWFsbHkgdGhlIGZvcm0gZWxlbWVudFxuICAgdmFyIGRhdGVmaWVsZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSwgcGFyZW50RWxlKVxuICAgZm9yICh2YXIgaT0wOyBpPGRhdGVmaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghdmFsaWREYXRlVGV4dChkYXRlZmllbGRzW2ldLnZhbHVlKSkge1xuICAgICAgICBkYXRlZmllbGRzW2ldLmZvY3VzKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgIH1cbiAgIHJldHVybiB0cnVlO1xufVxuXG4vL3JldHVybnMgbW91c2UgY29vcmRpbmF0ZXNcbmZ1bmN0aW9uIGdldE1vdXNlQ29vcmRzKGUpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gbmV3IEFycmF5KDIpO1xuXHR2YXIgcG9zeCA9IDA7XG5cdHZhciBwb3N5ID0gMDtcblx0aWYgKCFlKSB2YXIgZSA9IHdpbmRvdy5ldmVudDtcblx0aWYgKGUucGFnZVggfHwgZS5wYWdlWSkgXHR7XG5cdFx0cG9zeCA9IGUucGFnZVg7XG5cdFx0cG9zeSA9IGUucGFnZVk7XG5cdH1cblx0ZWxzZSBpZiAoZS5jbGllbnRYIHx8IGUuY2xpZW50WSkgXHR7XG4gICAgICAgIHBvc3ggPSBlLmNsaWVudFggKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnRcblx0XHRcdCsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XG5cdFx0cG9zeSA9IGUuY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wXG5cdFx0XHQrIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG5cdH1cbiAgICAgICAgYXJyYXlbMF0gPSBwb3N4O1xuICAgICAgICBhcnJheVsxXSA9IHBvc3k7XG4gICAgICAgIHJldHVybiBhcnJheTtcbn1cblxuLy9leGFtcGxlICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgb25jbGljaz1cImNoZWNrQWxsKHRoaXMsICdwYXJlbnRFbGUnLCAnY2hlY2tjbGFzcycpXCI+XG5mdW5jdGlvbiBjaGVja0FsbChtYXN0ZXIsIHBhcmVudEVsZSwgY2xhc3NOYW1lKXtcbiAgIHZhciB2YWwgPSBtYXN0ZXIuY2hlY2tlZDtcbiAgIHZhciBjaGtMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUsIHBhcmVudEVsZSk7XG4gICBmb3IgKGkgPTA7IGkgPCBjaGtMaXN0Lmxlbmd0aDsgaSsrKXtcbiAgICAgIGNoa0xpc3RbaV0uY2hlY2tlZCA9IHZhbDtcbiAgIH1cbn1cblxuLy9DYWxscyBmaXJlYnVncyBjb25zb2xlIGxvZyBpZiBpdCdzIGF2YWlsYWJsZS4gIEEgc2FmZXIgd2F5IHRvIHVzZSB0aGUgY29uc29sZSBiZWNhdXNlIGlmIGZpcmVidWcgaXMgbm90IGVuYWJsZWQgdGhlIGphdmFzY3JpcHQgd2lsbCBlcnJvciBvbiB0aGUgY29uc29sZS5sb2cgbGluZS5cbmZ1bmN0aW9uIG9zY2FyTG9nKHN0cil7XG4gICAgaWYod2luZG93LmNvbnNvbGUpe1xuICAgICAgIGNvbnNvbGUubG9nKHN0cik7XG4gICAgfVxuICAgIFxufVxuXG5cbi8vQ2FuIGJlIHVzZSB0aGUgZW50ZXIga2V5IGluIGEgdGV4dCBib3ggYW5kIGNhbGwgamF2YWNyaXB0IGZ1bmN0aW9uXG4vL2V4YW1wbGU6ICA8aXRwdXQgdHlwZT1cInRleHRcIiBvbmtleXByZXNzPVwicmV0dXJuIGdyYWJFbnRlcihldmVudCwnUmVmZXJyYWxTY3JpcHRBdHRhY2gxKCknKVwiLz5cbmZ1bmN0aW9uIGdyYWJFbnRlcihldmVudCxjYWxsYil7XG4gIGlmKCAod2luZG93LmV2ZW50ICYmIHdpbmRvdy5ldmVudC5rZXlDb2RlID09IDEzKSB8fCAoZXZlbnQgJiYgZXZlbnQud2hpY2ggPT0gMTMpICkgIHtcbiAgICAgZXZhbChjYWxsYik7XG4gICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5cblxuLy9DaGVja3MgdG8gc2VlIGlmIGEgU3RyaW5nIGlzIG51bWVyaWMgaW50ZWdlciBpZS4gTm8gZGVjaW1hbCBhbG91ZFxuZnVuY3Rpb24gaXNOdW1lcmljSW50KHNUZXh0KXtcbiAgIHZhciB2YWxpZE51bUNoYXJzID0gXCIwMTIzNDU2Nzg5XCI7XG4gICB2YXIgaXNOdW1iZXI9dHJ1ZTtcbiAgIHZhciBjaGFyYTtcbiAgIGZvciAoaSA9IDA7IGkgPCBzVGV4dC5sZW5ndGggJiYgaXNOdW1iZXIgPT0gdHJ1ZTsgaSsrKSB7XG4gICAgICBjaGFyYSA9IHNUZXh0LmNoYXJBdChpKTtcbiAgICAgIGlmICh2YWxpZE51bUNoYXJzLmluZGV4T2YoY2hhcmEpID09IC0xKSB7XG4gICAgICAgICBpc051bWJlciA9IGZhbHNlO1xuICAgICAgfVxuICAgfVxuICAgcmV0dXJuIGlzTnVtYmVyO1xufVxuXG4vL0NoZWNrcyB0byBzZWUgaWYgYSBTdHJpbmcgaXMgbnVtZXJpY1xuZnVuY3Rpb24gaXNOdW1lcmljKHNUZXh0KXtcbiAgIHZhciB2YWxpZE51bUNoYXJzID0gXCIwMTIzNDU2Nzg5LlwiO1xuICAgdmFyIGlzTnVtYmVyPXRydWU7XG4gICB2YXIgY2hhcmE7XG4gICBmb3IgKGkgPSAwOyBpIDwgc1RleHQubGVuZ3RoICYmIGlzTnVtYmVyID09IHRydWU7IGkrKykge1xuICAgICAgY2hhcmEgPSBzVGV4dC5jaGFyQXQoaSk7XG4gICAgICBpZiAodmFsaWROdW1DaGFycy5pbmRleE9mKGNoYXJhKSA9PSAtMSkge1xuICAgICAgICAgaXNOdW1iZXIgPSBmYWxzZTtcbiAgICAgIH1cbiAgIH1cbiAgIHJldHVybiBpc051bWJlcjtcbn1cbi8vcmVtb3ZlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlIHNwYWNlXG5mdW5jdGlvbiB0cmltKHN0cil7XG4gICBzdHI9c3RyLnJlcGxhY2UoL15cXHMrL2csXCJcIik7XG4gICBzdHI9c3RyLnJlcGxhY2UoL1xccyskL2csXCJcIik7Ly90cmltIHN0clxuICAgcmV0dXJuIHN0cjtcbn0iLCJcbnJlcXVpcmUoJ2pxdWVyeScpO1xucmVxdWlyZSgnanF1ZXJ5LXVpL3VpL3dpZGdldHMvZHJhZ2dhYmxlJylcbnJlcXVpcmUoJ2pxdWVyeS11aS90aGVtZXMvYmFzZS9kcmFnZ2FibGUuY3NzJyk7XG5yZXF1aXJlKCdqcXVlcnktdWkvdWkvd2lkZ2V0cy9yZXNpemFibGUnKVxucmVxdWlyZSgnanF1ZXJ5LXVpL3RoZW1lcy9iYXNlL3Jlc2l6YWJsZS5jc3MnKTtcbnJlcXVpcmUoJ21vbWVudCcpO1xucmVxdWlyZSgnYW5ndWxhcicpO1xucmVxdWlyZSgnYW5ndWxhci11aS1ib290c3RyYXAnKTtcbnJlcXVpcmUoJ2FuZ3VsYXItdWktcm91dGVyJyk7XG5yZXF1aXJlKCdhbmd1bGFyLXVpLXJvdXRlci9yZWxlYXNlL3N0YXRlRXZlbnRzJyk7XG5yZXF1aXJlKCdmdWxsY2FsZW5kYXItc2NoZWR1bGVyJyk7XG5yZXF1aXJlKCdmdWxsY2FsZW5kYXIvZGlzdC9mdWxsY2FsZW5kYXIubWluLmNzcycpO1xucmVxdWlyZSgnZnVsbGNhbGVuZGFyLXNjaGVkdWxlci9kaXN0L3NjaGVkdWxlci5taW4uY3NzJyk7XG5yZXF1aXJlKCduZy10YWJsZS9idW5kbGVzL25nLXRhYmxlJyk7XG5yZXF1aXJlKCduZy10YWJsZS9idW5kbGVzL25nLXRhYmxlLmNzcycpO1xucmVxdWlyZSgnYW5ndWxhci1yZXNvdXJjZScpO1xucmVxdWlyZSgnbmctaW5maW5pdGUtc2Nyb2xsJyk7XG5yZXF1aXJlKCdhbmd1bGFyLWxvYWRpbmctYmFyJyk7XG5yZXF1aXJlKCdhbmd1bGFyLWxvYWRpbmctYmFyL2J1aWxkL2xvYWRpbmctYmFyLm1pbi5jc3MnKTtcbnJlcXVpcmUoJ2Jvb3RzdHJhcC1kYXRlcGlja2VyJyk7XG5yZXF1aXJlKCdib290c3RyYXAtZGF0ZXBpY2tlci9kaXN0L2Nzcy9ib290c3RyYXAtZGF0ZXBpY2tlci5jc3MnKTtcbnJlcXVpcmUoJ2Jvb3RzdHJhcC10aW1lcGlja2VyJyk7XG5yZXF1aXJlKCduZ3N0b3JhZ2UnKTtcbnJlcXVpcmUoJy4vc2Nzcy9qdW5vLnNjc3MnKTtcbnJlcXVpcmUoJ2ZvbnQtYXdlc29tZS9jc3MvZm9udC1hd2Vzb21lLm1pbi5jc3MnKTtcblxuXG52YXIgb3NjYXJBcHAgPSBhbmd1bGFyLm1vZHVsZSgnb3NjYXJQcm92aWRlclZpZXdNb2R1bGUnLCBbXG5cdCd1aS5yb3V0ZXInLFxuXHQndWkucm91dGVyLnN0YXRlLmV2ZW50cycsXG5cdCduZ1Jlc291cmNlJyxcblx0J3VpLmJvb3RzdHJhcCcsXG5cdCd1aS5jYWxlbmRhcicsXG5cdCdhbmd1bGFyLWxvYWRpbmctYmFyJyxcblx0J25nVGFibGUnLFxuXHQnbmdTdG9yYWdlJyxcblx0J0NvbW1vbicsXG5cdCdDb21tb24uU2VydmljZXMnLFxuXHQnQ29tbW9uLkZpbHRlcnMnLFxuXHQnQ29tbW9uLkRpcmVjdGl2ZXMnLFxuXHQnQ29tbW9uLlV0aWwnLFxuXHQnTGF5b3V0Jyxcblx0J1RpY2tsZXInLFxuXHQnUmVjb3JkJyxcblx0J1JlY29yZC5TdW1tYXJ5Jyxcblx0J1JlY29yZC5UcmFja2VyJyxcblx0J1JlY29yZC5EZXRhaWxzJyxcblx0J1JlY29yZC5QSFInLFxuXHQnUmVjb3JkLkZvcm1zJyxcblx0J1NjaGVkdWxlJyxcblx0J1NldHRpbmdzJyxcblx0J1JlcG9ydCcsXG5cdCdQYXRpZW50Jyxcblx0J1BhdGllbnQuU2VhcmNoJyxcblx0J1BhdGllbnRMaXN0Jyxcblx0J0luYm94Jyxcblx0J0hlbHAnLFxuXHQnRG9jdW1lbnQnLFxuXHQnRGFzaGJvYXJkJyxcblx0J0NvbnN1bHRzJyxcblx0J0FkbWluJyxcblx0J0FkbWluLkludGVncmF0aW9uJyxcblx0J0FkbWluLkludGVncmF0aW9uLktub3cyYWN0Jyxcblx0J0FkbWluLkludGVncmF0aW9uLkZheCdcbl0pO1xuXG5vc2NhckFwcC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKVxue1xuXHQvL1xuXHQvLyBGb3IgYW55IHVubWF0Y2hlZCB1cmwsIHJlZGlyZWN0IHRvIC9zdGF0ZTFcblx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9kYXNoYm9hcmRcIik7XG5cdC8vXG5cdC8vIE5vdyBzZXQgdXAgdGhlIHN0YXRlc1xuXHQkc3RhdGVQcm92aWRlclxuXHRcdC5zdGF0ZSgnZGFzaGJvYXJkTWFuYWdlcicsXG5cdFx0e1xuXHRcdFx0dXJsOiAnL2Rhc2hib2FyZC9hZG1pbicsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9kYXNoYm9hcmQvYWRtaW4vRGFzaGJvYXJkTWFuYWdlci5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ2Rhc2hib2FyZE1hbmFnZXJDb250cm9sbGVyJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdkYXNoYm9hcmQnLFxuXHRcdHtcblx0XHRcdHVybDogJy9kYXNoYm9hcmQnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvZGFzaGJvYXJkL2Rhc2hib2FyZC5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0Rhc2hib2FyZC5EYXNoYm9hcmRDb250cm9sbGVyJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdpbmJveCcsXG5cdFx0e1xuXHRcdFx0dXJsOiAnL2luYm94Jyxcblx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL2luYm94L2luYm94X3BvcHVwLmpzcCcsXG5cdFx0XHQvLyB0ZW1wbGF0ZVVybDogJ3NyYy9pbmJveC9pbmJveC5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0luYm94LkluYm94Q29udHJvbGxlcidcblx0XHR9KVxuXHRcdC5zdGF0ZSgnY29uc3VsdFJlcXVlc3RzJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvY29uc3VsdHMnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvY29uc3VsdHMvY29uc3VsdFJlcXVlc3RMaXN0LmpzcCcsXG5cdFx0XHRjb250cm9sbGVyOiAnQ29uc3VsdHMuQ29uc3VsdFJlcXVlc3RMaXN0Q29udHJvbGxlciBhcyBjb25zdWx0UmVxdWVzdExpc3RDdHJsJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdjb25zdWx0UmVzcG9uc2VzJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvY29uc3VsdFJlc3BvbnNlcycsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9jb25zdWx0cy9jb25zdWx0UmVzcG9uc2VMaXN0LmpzcCcsXG5cdFx0XHRjb250cm9sbGVyOiAnQ29uc3VsdHMuQ29uc3VsdFJlc3BvbnNlTGlzdENvbnRyb2xsZXIgYXMgY29uc3VsdFJlc3BvbnNlTGlzdEN0cmwnXG5cdFx0fSlcblx0XHQuc3RhdGUoJ2JpbGxpbmcnLFxuXHRcdHtcblx0XHRcdHVybDogJy9iaWxsaW5nJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL2JpbGxpbmcvYmlsbGluZ19wb3B1cC5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0JpbGxpbmdDdHJsJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdzY2hlZHVsZScsXG5cdFx0e1xuXHRcdFx0dXJsOiAnL3NjaGVkdWxlJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3NjaGVkdWxlL3ZpZXcuanNwJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdTY2hlZHVsZS5TY2hlZHVsZUNvbnRyb2xsZXInXG5cdFx0fSlcblx0XHQuc3RhdGUoJ2FkbWluJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvYWRtaW4nLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvYWRtaW4vYWRtaW5fcG9wdXAuanNwJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdBZG1pbkN0cmwnXG5cdFx0fSlcblx0XHQuc3RhdGUoJ3RpY2tsZXJzJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvdGlja2xlcnMnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvdGlja2xlci90aWNrbGVyTGlzdC5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1RpY2tsZXIuVGlja2xlckxpc3RDb250cm9sbGVyIGFzIHRpY2tsZXJMaXN0Q3RybCcsXG5cdFx0XHRyZXNvbHZlOlxuXHRcdFx0e1xuXHRcdFx0XHRwcm92aWRlcnM6IFsncHJvdmlkZXJTZXJ2aWNlJywgZnVuY3Rpb24ocHJvdmlkZXJTZXJ2aWNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5zZWFyY2hQcm92aWRlcnMoXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0YWN0aXZlOiB0cnVlXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1dLFxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0LnN0YXRlKCdzZWFyY2gnLFxuXHRcdHtcblx0XHRcdHVybDogJy9zZWFyY2gnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcGF0aWVudC9zZWFyY2gvcGF0aWVudFNlYXJjaC5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1BhdGllbnQuU2VhcmNoLlBhdGllbnRTZWFyY2hDb250cm9sbGVyIGFzIHBhdGllbnRTZWFyY2hDdHJsJyxcblx0XHRcdHBhcmFtczpcblx0XHRcdHtcblx0XHRcdFx0dGVybTogbnVsbFxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0LnN0YXRlKCdyZXBvcnRzJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvcmVwb3J0cycsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZXBvcnQvcmVwb3J0cy5qc3AnLFxuXHRcdFx0Ly90ZW1wbGF0ZVVybDogJ3NyYy9yZXBvcnQvcmVwb3J0c19jbGFzc2ljLmpzcCcsXG5cdFx0XHRjb250cm9sbGVyOiAnUmVwb3J0LlJlcG9ydHNDb250cm9sbGVyIGFzIHJlcG9ydHNDdHJsJyxcblx0XHR9KVxuXHRcdC5zdGF0ZSgnZG9jdW1lbnRzJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvZG9jdW1lbnRzJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL2RvY3VtZW50L2RvY3VtZW50c19jbGFzc2ljLmpzcCcsXG5cdFx0XHRjb250cm9sbGVyOiAnRG9jdW1lbnQuRG9jdW1lbnRzQ29udHJvbGxlcidcblx0XHR9KVxuXHRcdC5zdGF0ZSgnc2V0dGluZ3MnLFxuXHRcdHtcblx0XHRcdHVybDogJy9zZXR0aW5ncycsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9zZXR0aW5ncy9zZXR0aW5ncy5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1NldHRpbmdzLlNldHRpbmdzQ29udHJvbGxlciBhcyBzZXR0aW5nc0N0cmwnLFxuXHRcdFx0cmVzb2x2ZTpcblx0XHRcdHtcblx0XHRcdFx0dXNlcjogWydwcm92aWRlclNlcnZpY2UnLCBmdW5jdGlvbihwcm92aWRlclNlcnZpY2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvdmlkZXJTZXJ2aWNlLmdldE1lKCk7XG5cdFx0XHRcdH1dLFxuXHRcdFx0XHRiaWxsaW5nU2VydmljZVR5cGVzOiBbJ2JpbGxpbmdTZXJ2aWNlJywgZnVuY3Rpb24oYmlsbGluZ1NlcnZpY2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gYmlsbGluZ1NlcnZpY2UuZ2V0VW5pcXVlU2VydmljZVR5cGVzKCk7XG5cdFx0XHRcdH1dLFxuXHRcdFx0XHRwcm92aWRlckxpc3Q6IFsncHJvdmlkZXJTZXJ2aWNlJywgZnVuY3Rpb24ocHJvdmlkZXJTZXJ2aWNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5zZWFyY2hQcm92aWRlcnMoXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0J2FjdGl2ZSc6IHRydWVcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGxvYWRlZFNldHRpbmdzOiBbJ3Byb3ZpZGVyU2VydmljZScsIGZ1bmN0aW9uKHByb3ZpZGVyU2VydmljZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiBwcm92aWRlclNlcnZpY2UuZ2V0U2V0dGluZ3MoKTtcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGVuY291bnRlckZvcm1zOiBbJ2Zvcm1TZXJ2aWNlJywgZnVuY3Rpb24oZm9ybVNlcnZpY2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gZm9ybVNlcnZpY2UuZ2V0QWxsRW5jb3VudGVyRm9ybXMoKTtcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGVmb3JtczogWydmb3JtU2VydmljZScsIGZ1bmN0aW9uKGZvcm1TZXJ2aWNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIGZvcm1TZXJ2aWNlLmdldEFsbEVGb3JtcygpO1xuXHRcdFx0XHR9XSxcblx0XHRcdFx0dGVhbXM6IFsncHJvdmlkZXJTZXJ2aWNlJywgZnVuY3Rpb24ocHJvdmlkZXJTZXJ2aWNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5nZXRBY3RpdmVUZWFtcygpO1xuXHRcdFx0XHR9XSxcblx0XHRcdFx0Z3JvdXBOYW1lczogWydmb3JtU2VydmljZScsIGZ1bmN0aW9uKGZvcm1TZXJ2aWNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIGZvcm1TZXJ2aWNlLmdldEdyb3VwTmFtZXMoKTtcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGxvYWRlZEFwcHM6IFsnYXBwU2VydmljZScsIGZ1bmN0aW9uKGFwcFNlcnZpY2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gYXBwU2VydmljZS5nZXRBcHBzKCk7XG5cdFx0XHRcdH1dXG5cdFx0XHR9XG5cdFx0fSlcblx0XHQuc3RhdGUoJ3NldHRpbmdzLnBlcnNvbmEnLFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6ICcvcGVyc29uYScsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3NldHRpbmdzL3NldHRpbmdzLmpzcCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdTZXR0aW5ncy5TZXR0aW5nc0NvbnRyb2xsZXIgYXMgc2V0dGluZ3NDdHJsJyxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdHRhYjogJ3BlcnNvbmEnXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0LnN0YXRlKCdzZXR0aW5ncy5nZW5lcmFsJyxcblx0XHRcdHtcblx0XHRcdFx0dXJsOiAnL2dlbmVyYWwnLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9zZXR0aW5ncy9zZXR0aW5ncy5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnU2V0dGluZ3MuU2V0dGluZ3NDb250cm9sbGVyIGFzIHNldHRpbmdzQ3RybCcsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHR0YWI6ICdnZW5lcmFsJ1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdC5zdGF0ZSgnc2V0dGluZ3Muc2NoZWR1bGUnLFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6ICcvc2NoZWR1bGUnLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9zZXR0aW5ncy9zZXR0aW5ncy5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnU2V0dGluZ3MuU2V0dGluZ3NDb250cm9sbGVyIGFzIHNldHRpbmdzQ3RybCcsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHR0YWI6ICdzY2hlZHVsZSdcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQuc3RhdGUoJ3NldHRpbmdzLmJpbGxpbmcnLFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6ICcvYmlsbGluZycsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3NldHRpbmdzL3NldHRpbmdzLmpzcCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdTZXR0aW5ncy5TZXR0aW5nc0NvbnRyb2xsZXIgYXMgc2V0dGluZ3NDdHJsJyxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdHRhYjogJ2JpbGxpbmcnXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0LnN0YXRlKCdzZXR0aW5ncy5yeCcsXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogJy9yeCcsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3NldHRpbmdzL3NldHRpbmdzLmpzcCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdTZXR0aW5ncy5TZXR0aW5nc0NvbnRyb2xsZXIgYXMgc2V0dGluZ3NDdHJsJyxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdHRhYjogJ3J4J1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdC5zdGF0ZSgnc2V0dGluZ3MubWFzdGVyZGVtbycsXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogJy9tYXN0ZXJkZW1vJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvc2V0dGluZ3Mvc2V0dGluZ3MuanNwJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ1NldHRpbmdzLlNldHRpbmdzQ29udHJvbGxlciBhcyBzZXR0aW5nc0N0cmwnLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0dGFiOiAnbWFzdGVyZGVtbydcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQuc3RhdGUoJ3NldHRpbmdzLmNvbnN1bHRzJyxcblx0XHRcdHtcblx0XHRcdFx0dXJsOiAnL2NvbnN1bHRzJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvc2V0dGluZ3Mvc2V0dGluZ3MuanNwJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ1NldHRpbmdzLlNldHRpbmdzQ29udHJvbGxlciBhcyBzZXR0aW5nc0N0cmwnLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0dGFiOiAnY29uc3VsdHMnXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0LnN0YXRlKCdzZXR0aW5ncy5kb2N1bWVudHMnLFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6ICcvZG9jdW1lbnRzJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvc2V0dGluZ3Mvc2V0dGluZ3MuanNwJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ1NldHRpbmdzLlNldHRpbmdzQ29udHJvbGxlciBhcyBzZXR0aW5nc0N0cmwnLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0dGFiOiAnZG9jdW1lbnRzJ1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdC5zdGF0ZSgnc2V0dGluZ3Muc3VtbWFyeScsXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogJy9zdW1tYXJ5Jyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvc2V0dGluZ3Mvc2V0dGluZ3MuanNwJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ1NldHRpbmdzLlNldHRpbmdzQ29udHJvbGxlciBhcyBzZXR0aW5nc0N0cmwnLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0dGFiOiAnc3VtbWFyeSdcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQuc3RhdGUoJ3NldHRpbmdzLmVmb3JtcycsXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogJy9lZm9ybXMnLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9zZXR0aW5ncy9zZXR0aW5ncy5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnU2V0dGluZ3MuU2V0dGluZ3NDb250cm9sbGVyIGFzIHNldHRpbmdzQ3RybCcsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHR0YWI6ICdlZm9ybXMnXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0LnN0YXRlKCdzZXR0aW5ncy5pbmJveCcsXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogJy9pbmJveCcsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3NldHRpbmdzL3NldHRpbmdzLmpzcCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdTZXR0aW5ncy5TZXR0aW5nc0NvbnRyb2xsZXIgYXMgc2V0dGluZ3NDdHJsJyxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdHRhYjogJ2luYm94J1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdC5zdGF0ZSgnc2V0dGluZ3MucHJvZ3JhbXMnLFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6ICcvcHJvZ3JhbXMnLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9zZXR0aW5ncy9zZXR0aW5ncy5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnU2V0dGluZ3MuU2V0dGluZ3NDb250cm9sbGVyIGFzIHNldHRpbmdzQ3RybCcsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHR0YWI6ICdwcm9ncmFtcydcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQuc3RhdGUoJ3NldHRpbmdzLmludGVncmF0aW9uJyxcblx0XHRcdHtcblx0XHRcdFx0dXJsOiAnL2ludGVncmF0aW9uJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvc2V0dGluZ3Mvc2V0dGluZ3MuanNwJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ1NldHRpbmdzLlNldHRpbmdzQ29udHJvbGxlciBhcyBzZXR0aW5nc0N0cmwnLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0dGFiOiAnaW50ZWdyYXRpb24nXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0LnN0YXRlKCdzdXBwb3J0Jyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvc3VwcG9ydCcsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9oZWxwL3N1cHBvcnQuanNwJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdIZWxwLlN1cHBvcnRDb250cm9sbGVyJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdoZWxwJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvaGVscCcsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9oZWxwL2hlbHAuanNwJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdIZWxwLkhlbHBDb250cm9sbGVyJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdyZWNvcmQnLFxuXHRcdHtcblx0XHRcdHVybDogJy9yZWNvcmQvOmRlbW9ncmFwaGljTm8nLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVjb3JkL3JlY29yZC5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1JlY29yZC5SZWNvcmRDb250cm9sbGVyIGFzIHJlY29yZEN0cmwnLFxuXHRcdFx0cmVzb2x2ZTpcblx0XHRcdHtcblx0XHRcdFx0ZGVtbzogWyckc3RhdGVQYXJhbXMnLCAnZGVtb2dyYXBoaWNTZXJ2aWNlJywgZnVuY3Rpb24oJHN0YXRlUGFyYW1zLCBkZW1vZ3JhcGhpY1NlcnZpY2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gZGVtb2dyYXBoaWNTZXJ2aWNlLmdldERlbW9ncmFwaGljKCRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vKTtcblx0XHRcdFx0fV0sXG5cdFx0XHRcdHVzZXI6IFsncHJvdmlkZXJTZXJ2aWNlJywgZnVuY3Rpb24ocHJvdmlkZXJTZXJ2aWNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5nZXRNZSgpO1xuXHRcdFx0XHR9XSxcblx0XHRcdFx0cHJvcGVydGllczogWyd1eFNlcnZpY2UnLCBmdW5jdGlvbih1eFNlcnZpY2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gdXhTZXJ2aWNlLmdldERpc3BsYXlQcm9wZXJ0aWVzKCk7XG5cdFx0XHRcdH1dXG5cdFx0XHR9XG5cdFx0fSlcblx0XHQuc3RhdGUoJ3JlY29yZC5kZXRhaWxzJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvZGV0YWlscycsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZWNvcmQvZGV0YWlscy9kZXRhaWxzLmpzcCcsXG5cdFx0XHRjb250cm9sbGVyOiAnUmVjb3JkLkRldGFpbHMuRGV0YWlsc0NvbnRyb2xsZXIgYXMgZGV0YWlsc0N0cmwnXG5cdFx0fSlcblx0XHQuc3RhdGUoJ3JlY29yZC5zdW1tYXJ5Jyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvc3VtbWFyeT9hcHBvaW50bWVudE5vJmVuY1R5cGUnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVjb3JkL3N1bW1hcnkvc3VtbWFyeS5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1JlY29yZC5TdW1tYXJ5LlN1bW1hcnlDb250cm9sbGVyIGFzIHN1bW1hcnlDdHJsJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdyZWNvcmQuZm9ybXMnLFxuXHRcdHtcblx0XHRcdHVybDogJy9mb3JtcycsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZWNvcmQvZm9ybXMvZm9ybXMuanNwJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdSZWNvcmQuRm9ybXMuRm9ybUNvbnRyb2xsZXIgYXMgZm9ybUN0cmwnLFxuXHRcdFx0cGFyYW1zOiB7XG5cdFx0XHRcdGZvcm1MaXN0SWQ6IDBcblx0XHRcdH1cblx0XHR9KVxuXHRcdC5zdGF0ZSgncmVjb3JkLmZvcm1zLnZpZXcnLFxuXHRcdHtcblx0XHRcdHVybDogJy92aWV3Lzp0eXBlLzppZD9uYW1lJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3JlY29yZC9mb3Jtcy9mb3Jtcy5qc3AnLFxuXHRcdFx0cGFyYW1zOiB7IG5hbWU6IHsgZHluYW1pYzogdHJ1ZSB9IH0sXG5cdFx0XHRjb250cm9sbGVyOiAnUmVjb3JkLkZvcm1zLkZvcm1Db250cm9sbGVyIGFzIGZvcm1DdHJsJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdyZWNvcmQuZm9ybXMuYWRkJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvYWRkLzp0eXBlLzppZCcsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZWNvcmQvZm9ybXMvZm9ybXMuanNwJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdSZWNvcmQuRm9ybXMuRm9ybUNvbnRyb2xsZXIgYXMgZm9ybUN0cmwnXG5cdFx0fSlcblx0XHQuc3RhdGUoJ3JlY29yZC5jb25zdWx0UmVxdWVzdHMnLFxuXHRcdHtcblx0XHRcdHVybDogJy9jb25zdWx0cycsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9jb25zdWx0cy9jb25zdWx0UmVxdWVzdExpc3QuanNwJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdDb25zdWx0cy5Db25zdWx0UmVxdWVzdExpc3RDb250cm9sbGVyIGFzIGNvbnN1bHRSZXF1ZXN0TGlzdEN0cmwnXG5cdFx0fSlcblx0XHQuc3RhdGUoJ3JlY29yZC5jb25zdWx0UmVzcG9uc2VzJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvY29uc3VsdFJlc3BvbnNlcycsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9jb25zdWx0cy9jb25zdWx0UmVzcG9uc2VMaXN0LmpzcCcsXG5cdFx0XHRjb250cm9sbGVyOiAnQ29uc3VsdHMuQ29uc3VsdFJlc3BvbnNlTGlzdENvbnRyb2xsZXIgYXMgY29uc3VsdFJlc3BvbnNlTGlzdEN0cmwnXG5cdFx0fSlcblx0XHQuc3RhdGUoJ3JlY29yZC5jb25zdWx0UmVxdWVzdCcsXG5cdFx0e1xuXHRcdFx0dXJsOiAnL2NvbnN1bHQvOnJlcXVlc3RJZCcsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9jb25zdWx0cy9jb25zdWx0UmVxdWVzdC5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0NvbnN1bHRzLkNvbnN1bHRSZXF1ZXN0Q29udHJvbGxlciBhcyBjb25zdWx0UmVxdWVzdEN0cmwnLFxuXHRcdFx0cmVzb2x2ZTpcblx0XHRcdHtcblx0XHRcdFx0Y29uc3VsdDogWyckc3RhdGVQYXJhbXMnLCAnY29uc3VsdFNlcnZpY2UnLCBmdW5jdGlvbigkc3RhdGVQYXJhbXMsIGNvbnN1bHRTZXJ2aWNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYoJHN0YXRlUGFyYW1zLnJlcXVlc3RJZCA9PT0gXCJuZXdcIikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbnN1bHRTZXJ2aWNlLmdldE5ld1JlcXVlc3QoJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm8pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gY29uc3VsdFNlcnZpY2UuZ2V0UmVxdWVzdCgkc3RhdGVQYXJhbXMucmVxdWVzdElkKTtcblx0XHRcdFx0fV0sXG5cdFx0XHRcdHVzZXI6IFsncHJvdmlkZXJTZXJ2aWNlJywgZnVuY3Rpb24ocHJvdmlkZXJTZXJ2aWNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5nZXRNZSgpO1xuXHRcdFx0XHR9XVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0LnN0YXRlKCdyZWNvcmQuY29uc3VsdFJlc3BvbnNlJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvY29uc3VsdFJlc3BvbnNlLzpyZXNwb25zZUlkJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL2NvbnN1bHRzL2NvbnN1bHRSZXNwb25zZS5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0NvbnN1bHRzLkNvbnN1bHRSZXNwb25zZUNvbnRyb2xsZXIgYXMgY29uc3VsdFJlc3BvbnNlQ3RybCcsXG5cdFx0XHRyZXNvbHZlOlxuXHRcdFx0e1xuXHRcdFx0XHRjb25zdWx0OiBbJyRzdGF0ZVBhcmFtcycsICdjb25zdWx0U2VydmljZScsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgY29uc3VsdFNlcnZpY2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gY29uc3VsdFNlcnZpY2UuZ2V0UmVzcG9uc2UoJHN0YXRlUGFyYW1zLnJlc3BvbnNlSWQsICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vKTtcblx0XHRcdFx0fV0sXG5cdFx0XHRcdHVzZXI6IFsncHJvdmlkZXJTZXJ2aWNlJywgZnVuY3Rpb24ocHJvdmlkZXJTZXJ2aWNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5nZXRNZSgpO1xuXHRcdFx0XHR9XVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0LnN0YXRlKCdyZWNvcmQudGlja2xlcicsXG5cdFx0e1xuXHRcdFx0dXJsOiAnL3RpY2tsZXInLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvdGlja2xlci90aWNrbGVyTGlzdC5qc3AnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1RpY2tsZXIuVGlja2xlckxpc3RDb250cm9sbGVyIGFzIHRpY2tsZXJMaXN0Q3RybCcsXG5cdFx0XHRyZXNvbHZlOlxuXHRcdFx0e1xuXHRcdFx0XHRwcm92aWRlcnM6IFsncHJvdmlkZXJTZXJ2aWNlJywgZnVuY3Rpb24ocHJvdmlkZXJTZXJ2aWNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5zZWFyY2hQcm92aWRlcnMoXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0YWN0aXZlOiB0cnVlXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1dXG5cdFx0XHR9XG5cdFx0fSkuc3RhdGUoJ3JlY29yZC50cmFja2VyJyxcblx0XHR7XG5cdFx0XHR1cmw6ICcvdHJhY2tlcicsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZWNvcmQvdHJhY2tlci90cmFja2VyLmpzcCcsXG5cdFx0XHRjb250cm9sbGVyOiAnUmVjb3JkLlRyYWNrZXIuVHJhY2tlckNvbnRyb2xsZXIgYXMgdHJhY2tlckN0cmwnXG5cdFx0fSlcblx0XHQuc3RhdGUoJ3JlY29yZC5waHInLFxuXHRcdHtcblx0XHRcdHVybDogJy9waHInLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVjb3JkL3Boci9waHIuanNwJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdSZWNvcmQuUEhSLlBIUkNvbnRyb2xsZXIgYXMgcGhyQ3RybCdcblx0XHR9KVxuXHRcdC8vIC5zdGF0ZSgnYWRtaW4uaW50ZWdyYXRpb24nLFxuXHRcdC5zdGF0ZSgnazJhQ29uZmlnJyxcblx0XHRcdHtcblx0XHRcdC8vIHVybDogJy9hZG1pbi9pbnRlZ3JhdGlvbicsXG5cdFx0XHR1cmw6Jy9rMmFDb25maWcnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvYWRtaW4vaW50ZWdyYXRpb24va25vdzJhY3QvS25vdzJhY3RDb25maWd1cmF0aW9uLmpzcCcsXG5cdFx0XHRjb250cm9sbGVyOiAnQWRtaW4uSW50ZWdyYXRpb24uS25vdzJhY3QuazJhQ29uZmlnQ29udHJvbGxlciBhcyBrMmFDb25maWdDdHJsJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdrMmFUZW1wbGF0ZScsXG5cdFx0XHR7XG5cdFx0XHRcdC8vIHVybDogJy9hZG1pbi9pbnRlZ3JhdGlvbicsXG5cdFx0XHRcdHVybDonL2syYVRlbXBsYXRlJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvYWRtaW4vaW50ZWdyYXRpb24va25vdzJhY3QvS25vdzJhY3RUZW1wbGF0ZS5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnQWRtaW4uSW50ZWdyYXRpb24uS25vdzJhY3QuazJhVGVtcGxhdGVDb250cm9sbGVyIGFzIGsyYVRlbXBsYXRlQ3RybCdcblx0XHRcdH0pXG5cdFx0LnN0YXRlKCdrMmFOb3RpZmljYXRpb24nLFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6ICcvazJhTm90aWZpY2F0aW9uJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvYWRtaW4vaW50ZWdyYXRpb24va25vdzJhY3QvS25vdzJhY3ROb3RpZmljYXRpb25zLmpzcCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdBZG1pbi5JbnRlZ3JhdGlvbi5Lbm93MmFjdC5rMmFOb3RpZmljYXRpb25Db250cm9sbGVyIGFzIGsyYU5vdGVDdHJsJ1xuXHRcdFx0fSlcblx0XHQuc3RhdGUoJ2ZheENvbmZpZycsXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogJy9mYXhDb25maWcnLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9hZG1pbi9pbnRlZ3JhdGlvbi9mYXgvZmF4Q29uZmlndXJhdGlvbi5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnQWRtaW4uSW50ZWdyYXRpb24uRmF4LkZheENvbmZpZ3VyYXRpb25Db250cm9sbGVyIGFzIGZheENvbnRyb2xsZXInXG5cdFx0XHR9KVxuXHRcdC5zdGF0ZSgnZmF4U2VuZFJlY2VpdmUnLFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6ICcvZmF4U2VuZFJlY2VpdmUnLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9hZG1pbi9pbnRlZ3JhdGlvbi9mYXgvZmF4U2VuZFJlY2VpdmUuanNwJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ0FkbWluLkludGVncmF0aW9uLkZheC5GYXhTZW5kUmVjZWl2ZUNvbnRyb2xsZXIgYXMgZmF4U2VuZFJlY2VpdmVDb250cm9sbGVyJ1xuXHRcdFx0fSlcblx0O1xuXG59XSk7XG5cbi8vIEZvciBkZWJ1Z2dpbmcgcHVycG9zZXNcbi8qXG5vc2NhckFwcC5ydW4oIGZ1bmN0aW9uKCRyb290U2NvcGUsICRsb2NhdGlvbikge1xuXG4kcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKXtcblx0ICBjb25zb2xlLmxvZygnJHN0YXRlQ2hhbmdlU3RhcnQgdG8gJyt0b1N0YXRlLnRvKyctIGZpcmVkIHdoZW4gdGhlIHRyYW5zaXRpb24gYmVnaW5zLiB0b1N0YXRlLHRvUGFyYW1zIDogXFxuJyx0b1N0YXRlLCB0b1BhcmFtcyk7XG5cdH0pO1xuXHQkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKXtcblx0ICBjb25zb2xlLmxvZygnJHN0YXRlQ2hhbmdlRXJyb3IgLSBmaXJlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgdHJhbnNpdGlvbi4nKTtcblx0ICBjb25zb2xlLmxvZyhhcmd1bWVudHMpO1xuXHR9KTtcblx0JHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKXtcblx0ICBjb25zb2xlLmxvZygnJHN0YXRlQ2hhbmdlU3VjY2VzcyB0byAnK3RvU3RhdGUubmFtZSsnLSBmaXJlZCBvbmNlIHRoZSBzdGF0ZSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlLicpO1xuXHR9KTtcblx0Ly8gJHJvb3RTY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRpbmcnLGZ1bmN0aW9uKGV2ZW50LCB2aWV3Q29uZmlnKXtcblx0Ly8gICAvLyBydW5zIG9uIGluZGl2aWR1YWwgc2NvcGVzLCBzbyBwdXR0aW5nIGl0IGluIFwicnVuXCIgZG9lc24ndCB3b3JrLlxuXHQvLyAgIGNvbnNvbGUubG9nKCckdmlld0NvbnRlbnRMb2FkaW5nIC0gdmlldyBiZWdpbnMgbG9hZGluZyAtIGRvbSBub3QgcmVuZGVyZWQnLHZpZXdDb25maWcpO1xuXHQvLyB9KTtcblx0JHJvb3RTY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRlZCcsZnVuY3Rpb24oZXZlbnQpe1xuXHQgIGNvbnNvbGUubG9nKCckdmlld0NvbnRlbnRMb2FkZWQgLSBmaXJlZCBhZnRlciBkb20gcmVuZGVyZWQnLGV2ZW50KTtcblx0fSk7XG5cdCRyb290U2NvcGUuJG9uKCckc3RhdGVOb3RGb3VuZCcsZnVuY3Rpb24oZXZlbnQsIHVuZm91bmRTdGF0ZSwgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKXtcblx0ICBjb25zb2xlLmxvZygnJHN0YXRlTm90Rm91bmQgJyt1bmZvdW5kU3RhdGUudG8rJyAgLSBmaXJlZCB3aGVuIGEgc3RhdGUgY2Fubm90IGJlIGZvdW5kIGJ5IGl0cyBuYW1lLicpO1xuXHQgIGNvbnNvbGUubG9nKHVuZm91bmRTdGF0ZSwgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKTtcblx0fSk7XG5cbn0pO1xuKi9cblxuXG5cbi8qXG5cbiB1c2VyOiBmdW5jdGlvbigkc3RhdGVQYXJhbXMsIFVzZXJTZXJ2aWNlKSB7XG5cdCAgcmV0dXJuIFVzZXJTZXJ2aWNlLmZpbmQoJHN0YXRlUGFyYW1zLmlkKTtcblx0fSxcbm9zY2FyQXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJyxcblx0XHRcdFx0XHRmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xuXG5cdFx0XHRcdFx0XHR3aGVuKCcvc2V0dGluZ3MnLCB7XG5cdFx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3BhcnRpYWxzL3NldHRpbmdzLWNsYXNzaWMuanNwJyxcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ1NldHRpbmdzLlNldHRpbmdzQ29udHJvbGxlcidcblx0XHRcdFx0XHRcdH0pLlxuXHRcdFx0XHRcdFx0d2hlbignL3N1cHBvcnQnLCB7XG5cdFx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3BhcnRpYWxzL3N1cHBvcnQuanNwJyxcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0hlbHAuU3VwcG9ydENvbnRyb2xsZXInXG5cdFx0XHRcdFx0XHR9KS5cblx0XHRcdFx0XHRcdHdoZW4oJy9oZWxwJywge1xuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9wYXJ0aWFscy9oZWxwLmpzcCcsXG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdIZWxwLkhlbHBDb250cm9sbGVyJ1xuXHRcdFx0XHRcdFx0fSkuXG5cblx0XHRcdFx0XHRcdHdoZW4oJy9tZXNzZW5nZXInLCB7XG5cdFx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3BhcnRpYWxzL21lc3Nlbmdlci5qc3AnLFxuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnTWVzc2VuZ2VyQ3RybCdcblx0XHRcdFx0XHRcdH0pLlxuXHRcdFx0XHRcdFx0d2hlbignL2Vmb3JtJywge1xuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9wYXJ0aWFscy9lZm9ybS5qc3AnLFxuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnRWZvcm1GdWxsQ3RybCdcblx0XHRcdFx0XHRcdH0pLlxuXHRcdFx0XHRcdFx0d2hlbignL2Vmb3JtMicsIHtcblx0XHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcGFydGlhbHMvZWZvcm0yLmpzcCcsXG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdFZm9ybUZ1bGwyQ3RybCdcblx0XHRcdFx0XHRcdH0pLlxuXG5cdFx0XHRcdFx0fVxuXSk7XG4qL1xuXG5cblxuLy9mb3IgZGV2IC0ganVzdCB0byBrZWVwIHRoZSBjYWNoZSBjbGVhclxuLypcbm9zY2FyQXBwLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCAkdGVtcGxhdGVDYWNoZSkge1xuXHQkcm9vdFNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdFx0JHRlbXBsYXRlQ2FjaGUucmVtb3ZlQWxsKCk7XG5cdFx0Y29uc29sZS5sb2coXCJvbmNsaWNrIG9mIHRhYlwiKTtcblx0fSk7XG59KTtcblxuXG4vL3Jlc2V0IHRoZSBsZWZ0IG5hdiBiYWNrXG5vc2NhckFwcC5ydW4oIGZ1bmN0aW9uKCRyb290U2NvcGUsICRsb2NhdGlvbikge1xuXHQkcm9vdFNjb3BlLiRvbiggXCIkcm91dGVDaGFuZ2VTdGFydFwiLCBmdW5jdGlvbihldmVudCwgbmV4dCwgY3VycmVudCkge1xuXHRcdCQoXCIjbGVmdF9wYW5lXCIpLmFkZENsYXNzKFwiY29sLW1kLTJcIik7XG5cdFx0JChcIiNsZWZ0X3BhbmVcIikuc2hvdygpO1xuXHRcdCQoXCIjcmlnaHRfcGFuZVwiKS5yZW1vdmVDbGFzcyhcImNvbC1tZC0xMlwiKTtcblx0XHQkKFwiI3JpZ2h0X3BhbmVcIikuYWRkQ2xhc3MoXCJjb2wtbWQtMTBcIik7XG5cdH0pO1xufSk7XG5cbiovXG5cbi8vdGhpcyBpcyBmb3IgdGhlIHBhdGllbnQgbGlzdCBjb250cm9sLiBUZWxscyB1cyB3aGljaCB0ZW1wbGF0ZSB0byBsb2FkXG4vKmFuZ3VsYXIubW9kdWxlKCdvc2NhclByb3ZpZGVyVmlld01vZHVsZScpLmZhY3RvcnkoJ05hdmlnYXRpb24nLCBmdW5jdGlvbigkcm9vdFNjb3BlKVxue1xuXHRyZXR1cm4ge1xuXHRcdGxvY2F0aW9uOiAnJyxcblxuXHRcdGxvYWQ6IGZ1bmN0aW9uKG1zZylcblx0XHR7XG5cdFx0XHR0aGlzLmxvY2F0aW9uID0gbXNnO1xuXHRcdH1cblx0fTtcbn0pOyovXG5hbmd1bGFyLm1vZHVsZSgnb3NjYXJQcm92aWRlclZpZXdNb2R1bGUnKS5mYWN0b3J5KCdOYXZpZ2F0aW9uJywgW1xuXHRmdW5jdGlvbigpXG5cdHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bG9jYXRpb246ICcnLFxuXG5cdFx0XHRsb2FkOiBmdW5jdGlvbihtc2cpXG5cdFx0XHR7XG5cdFx0XHRcdHRoaXMubG9jYXRpb24gPSBtc2c7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXSk7XG5cbi8qXG5cbmFuZ3VsYXIubW9kdWxlKCdvc2NhclByb3ZpZGVyVmlld01vZHVsZScpLmRpcmVjdGl2ZSgnb3NjYXJTZWN1cml0eVNob3cnLCBmdW5jdGlvbiAoJGFuaW1hdGUsIHNlY3VyaXR5U2VydmljZSkge1xuXHQgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuXHRcdFx0c2NvcGUuJHdhdGNoKGF0dHIub3NjYXJTZWN1cml0eVNob3csIGZ1bmN0aW9uIG5nU2hvd1dhdGNoQWN0aW9uKHZhbHVlKXtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygndmFsdWVlPScrdmFsdWUudG9Tb3VyY2UoKSk7XG5cblx0XHRcdFx0aWYodmFsdWUub2JqZWN0TmFtZSAhPSBudWxsICYmIHZhbHVlLnByaXZpbGVnZSAhPSBudWxsKSB7XG5cdFx0XHRcdFx0Ly9zZWN1cml0eVNlcnZpY2UuaGFzSGlnaCh2YWx1ZS5vYmplY3ROYW1lLHZhbHVlLnByaXZpbGVnZSxudWxsKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnZ3RnJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0ICAvL3NldCB2YWx1ZSB0byB0cnVlIHRvIHNob3csIG9yIGVsc2UgaGlkZVxuXHRcdFx0ICAkYW5pbWF0ZVt2YWx1ZSA/ICdyZW1vdmVDbGFzcycgOiAnYWRkQ2xhc3MnXShlbGVtZW50LCAnbmctaGlkZScpO1xuXHRcdFx0fSk7XG5cdCAgfTtcbn0pO1xuKi9cbiIsIi8qKlxuICogXG4gKiBcbiAqXG4gKiBcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuXG5pbXBvcnQgKiBhcyBtb2RlbHMgZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcblxuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xuXG5leHBvcnQgY2xhc3MgQXBwb2ludG1lbnRBcGkge1xuICAgIHByb3RlY3RlZCBiYXNlUGF0aCA9ICdodHRwOi8vbG9jYWxob3N0Lyc7XG4gICAgcHVibGljIGRlZmF1bHRIZWFkZXJzIDogYW55ID0ge307XG5cbiAgICBzdGF0aWMgJGluamVjdDogc3RyaW5nW10gPSBbJyRodHRwJywgJyRodHRwUGFyYW1TZXJpYWxpemVyJywgJ2Jhc2VQYXRoJ107XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgJGh0dHA6IG5nLklIdHRwU2VydmljZSwgcHJvdGVjdGVkICRodHRwUGFyYW1TZXJpYWxpemVyPzogKGQ6IGFueSkgPT4gYW55LCBiYXNlUGF0aD86IHN0cmluZykge1xuICAgICAgICBpZiAoYmFzZVBhdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5iYXNlUGF0aCA9IGJhc2VQYXRoO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIGNhbGVuZGFyQXBwb2ludG1lbnQgXG4gICAgICovXG4gICAgcHVibGljIGFkZEFwcG9pbnRtZW50IChjYWxlbmRhckFwcG9pbnRtZW50PzogbW9kZWxzLkNhbGVuZGFyQXBwb2ludG1lbnQsIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXM/OiBhbnkgKSA6IG5nLklIdHRwUHJvbWlzZTxtb2RlbHMuUmVzdFJlc3BvbnNlQ2FsZW5kYXJBcHBvaW50bWVudD4ge1xuICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSB0aGlzLmJhc2VQYXRoICsgJy9hcHBvaW50bWVudCc7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG4gICAgICAgIGxldCBoZWFkZXJQYXJhbXM6IGFueSA9ICg8YW55Pk9iamVjdCkuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRIZWFkZXJzKTtcbiAgICAgICAgbGV0IGh0dHBSZXF1ZXN0UGFyYW1zOiBuZy5JUmVxdWVzdENvbmZpZyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiBsb2NhbFZhclBhdGgsXG4gICAgICAgICAgICBkYXRhOiBjYWxlbmRhckFwcG9pbnRtZW50LFxuICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbXNcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZXh0cmFIdHRwUmVxdWVzdFBhcmFtcykge1xuICAgICAgICAgICAgaHR0cFJlcXVlc3RQYXJhbXMgPSAoPGFueT5PYmplY3QpLmFzc2lnbihodHRwUmVxdWVzdFBhcmFtcywgZXh0cmFIdHRwUmVxdWVzdFBhcmFtcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy4kaHR0cChodHRwUmVxdWVzdFBhcmFtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBhcHBvaW50bWVudE5vIFxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVBcHBvaW50bWVudCAoYXBwb2ludG1lbnRObzogbnVtYmVyLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zPzogYW55ICkgOiBuZy5JSHR0cFByb21pc2U8bW9kZWxzLlJlc3RSZXNwb25zZUludGVnZXI+IHtcbiAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gdGhpcy5iYXNlUGF0aCArICcvYXBwb2ludG1lbnQve2FwcG9pbnRtZW50Tm99J1xuICAgICAgICAgICAgLnJlcGxhY2UoJ3snICsgJ2FwcG9pbnRtZW50Tm8nICsgJ30nLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGFwcG9pbnRtZW50Tm8pKSk7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG4gICAgICAgIGxldCBoZWFkZXJQYXJhbXM6IGFueSA9ICg8YW55Pk9iamVjdCkuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRIZWFkZXJzKTtcbiAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnYXBwb2ludG1lbnRObycgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgIGlmIChhcHBvaW50bWVudE5vID09PSBudWxsIHx8IGFwcG9pbnRtZW50Tm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYXBwb2ludG1lbnRObyB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUFwcG9pbnRtZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBSZXF1ZXN0UGFyYW1zOiBuZy5JUmVxdWVzdENvbmZpZyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICB1cmw6IGxvY2FsVmFyUGF0aCxcbiAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1zXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpIHtcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0UGFyYW1zID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oaHR0cFJlcXVlc3RQYXJhbXMsIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAoaHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gYXBwb2ludG1lbnRObyBcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0TmV4dFN0YXR1cyAoYXBwb2ludG1lbnRObzogbnVtYmVyLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zPzogYW55ICkgOiBuZy5JSHR0cFByb21pc2U8bW9kZWxzLlJlc3RSZXNwb25zZVN0cmluZz4ge1xuICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSB0aGlzLmJhc2VQYXRoICsgJy9hcHBvaW50bWVudC97YXBwb2ludG1lbnROb30vcm90YXRlX3N0YXR1cydcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7JyArICdhcHBvaW50bWVudE5vJyArICd9JywgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhcHBvaW50bWVudE5vKSkpO1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnM6IGFueSA9IHt9O1xuICAgICAgICBsZXQgaGVhZGVyUGFyYW1zOiBhbnkgPSAoPGFueT5PYmplY3QpLmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SGVhZGVycyk7XG4gICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2FwcG9pbnRtZW50Tm8nIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICBpZiAoYXBwb2ludG1lbnRObyA9PT0gbnVsbCB8fCBhcHBvaW50bWVudE5vID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGFwcG9pbnRtZW50Tm8gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzZXROZXh0U3RhdHVzLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBSZXF1ZXN0UGFyYW1zOiBuZy5JUmVxdWVzdENvbmZpZyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiBsb2NhbFZhclBhdGgsXG4gICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKSB7XG4gICAgICAgICAgICBodHRwUmVxdWVzdFBhcmFtcyA9ICg8YW55Pk9iamVjdCkuYXNzaWduKGh0dHBSZXF1ZXN0UGFyYW1zLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiRodHRwKGh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIGNhbGVuZGFyQXBwb2ludG1lbnQgXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZUFwcG9pbnRtZW50IChjYWxlbmRhckFwcG9pbnRtZW50PzogbW9kZWxzLkNhbGVuZGFyQXBwb2ludG1lbnQsIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXM/OiBhbnkgKSA6IG5nLklIdHRwUHJvbWlzZTxtb2RlbHMuUmVzdFJlc3BvbnNlQ2FsZW5kYXJBcHBvaW50bWVudD4ge1xuICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSB0aGlzLmJhc2VQYXRoICsgJy9hcHBvaW50bWVudCc7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG4gICAgICAgIGxldCBoZWFkZXJQYXJhbXM6IGFueSA9ICg8YW55Pk9iamVjdCkuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRIZWFkZXJzKTtcbiAgICAgICAgbGV0IGh0dHBSZXF1ZXN0UGFyYW1zOiBuZy5JUmVxdWVzdENvbmZpZyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICB1cmw6IGxvY2FsVmFyUGF0aCxcbiAgICAgICAgICAgIGRhdGE6IGNhbGVuZGFyQXBwb2ludG1lbnQsXG4gICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKSB7XG4gICAgICAgICAgICBodHRwUmVxdWVzdFBhcmFtcyA9ICg8YW55Pk9iamVjdCkuYXNzaWduKGh0dHBSZXF1ZXN0UGFyYW1zLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiRodHRwKGh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICB9XG59XG4iLCIvKipcbiAqIFxuICogXG4gKlxuICogXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cblxuaW1wb3J0ICogYXMgbW9kZWxzIGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuZXhwb3J0IGNsYXNzIFNjaGVkdWxlQXBpIHtcbiAgICBwcm90ZWN0ZWQgYmFzZVBhdGggPSAnaHR0cDovL2xvY2FsaG9zdC8nO1xuICAgIHB1YmxpYyBkZWZhdWx0SGVhZGVycyA6IGFueSA9IHt9O1xuXG4gICAgc3RhdGljICRpbmplY3Q6IHN0cmluZ1tdID0gWyckaHR0cCcsICckaHR0cFBhcmFtU2VyaWFsaXplcicsICdiYXNlUGF0aCddO1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkICRodHRwOiBuZy5JSHR0cFNlcnZpY2UsIHByb3RlY3RlZCAkaHR0cFBhcmFtU2VyaWFsaXplcj86IChkOiBhbnkpID0+IGFueSwgYmFzZVBhdGg/OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKGJhc2VQYXRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYmFzZVBhdGggPSBiYXNlUGF0aDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB5ZWFyIFxuICAgICAqIEBwYXJhbSBtb250aCBcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXJObyBcbiAgICAgKi9cbiAgICBwdWJsaWMgZmV0Y2hNb250aGx5RGF0YSAoeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyLCBwcm92aWRlck5vOiBzdHJpbmcsIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXM/OiBhbnkgKSA6IG5nLklIdHRwUHJvbWlzZTxtb2RlbHMuU2NoZWR1bGluZ1Jlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IHRoaXMuYmFzZVBhdGggKyAnL3NjaGVkdWxlL2ZldGNoTW9udGhseS97cHJvdmlkZXJOb30ve3llYXJ9L3ttb250aH0nXG4gICAgICAgICAgICAucmVwbGFjZSgneycgKyAneWVhcicgKyAnfScsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoeWVhcikpKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ3snICsgJ21vbnRoJyArICd9JywgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhtb250aCkpKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ3snICsgJ3Byb3ZpZGVyTm8nICsgJ30nLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHByb3ZpZGVyTm8pKSk7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG4gICAgICAgIGxldCBoZWFkZXJQYXJhbXM6IGFueSA9ICg8YW55Pk9iamVjdCkuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRIZWFkZXJzKTtcbiAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAneWVhcicgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgIGlmICh5ZWFyID09PSBudWxsIHx8IHllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgeWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGZldGNoTW9udGhseURhdGEuJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdtb250aCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgIGlmIChtb250aCA9PT0gbnVsbCB8fCBtb250aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBtb250aCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGZldGNoTW9udGhseURhdGEuJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdwcm92aWRlck5vJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgaWYgKHByb3ZpZGVyTm8gPT09IG51bGwgfHwgcHJvdmlkZXJObyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm92aWRlck5vIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZmV0Y2hNb250aGx5RGF0YS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwUmVxdWVzdFBhcmFtczogbmcuSVJlcXVlc3RDb25maWcgPSB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiBsb2NhbFZhclBhdGgsXG4gICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKSB7XG4gICAgICAgICAgICBodHRwUmVxdWVzdFBhcmFtcyA9ICg8YW55Pk9iamVjdCkuYXNzaWduKGh0dHBSZXF1ZXN0UGFyYW1zLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiRodHRwKGh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIGRlbW9ncmFwaGljTm8gXG4gICAgICovXG4gICAgcHVibGljIGZpbmRFeGlzdEFwcG9pbnRtZW50cyAoZGVtb2dyYXBoaWNObzogbnVtYmVyLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zPzogYW55ICkgOiBuZy5JSHR0cFByb21pc2U8bW9kZWxzLlNjaGVkdWxpbmdSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSB0aGlzLmJhc2VQYXRoICsgJy9zY2hlZHVsZS97ZGVtb2dyYXBoaWNOb30vYXBwb2ludG1lbnRIaXN0b3J5J1xuICAgICAgICAgICAgLnJlcGxhY2UoJ3snICsgJ2RlbW9ncmFwaGljTm8nICsgJ30nLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGRlbW9ncmFwaGljTm8pKSk7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG4gICAgICAgIGxldCBoZWFkZXJQYXJhbXM6IGFueSA9ICg8YW55Pk9iamVjdCkuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRIZWFkZXJzKTtcbiAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZGVtb2dyYXBoaWNObycgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgIGlmIChkZW1vZ3JhcGhpY05vID09PSBudWxsIHx8IGRlbW9ncmFwaGljTm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgZGVtb2dyYXBoaWNObyB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGZpbmRFeGlzdEFwcG9pbnRtZW50cy4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwUmVxdWVzdFBhcmFtczogbmcuSVJlcXVlc3RDb25maWcgPSB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogbG9jYWxWYXJQYXRoLFxuICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbXNcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZXh0cmFIdHRwUmVxdWVzdFBhcmFtcykge1xuICAgICAgICAgICAgaHR0cFJlcXVlc3RQYXJhbXMgPSAoPGFueT5PYmplY3QpLmFzc2lnbihodHRwUmVxdWVzdFBhcmFtcywgZXh0cmFIdHRwUmVxdWVzdFBhcmFtcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy4kaHR0cChodHRwUmVxdWVzdFBhcmFtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBhcHBvaW50bWVudFRvMSBcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QXBwb2ludG1lbnQgKGFwcG9pbnRtZW50VG8xPzogbW9kZWxzLkFwcG9pbnRtZW50VG8xLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zPzogYW55ICkgOiBuZy5JSHR0cFByb21pc2U8bW9kZWxzLlNjaGVkdWxpbmdSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSB0aGlzLmJhc2VQYXRoICsgJy9zY2hlZHVsZS9nZXRBcHBvaW50bWVudCc7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG4gICAgICAgIGxldCBoZWFkZXJQYXJhbXM6IGFueSA9ICg8YW55Pk9iamVjdCkuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRIZWFkZXJzKTtcbiAgICAgICAgbGV0IGh0dHBSZXF1ZXN0UGFyYW1zOiBuZy5JUmVxdWVzdENvbmZpZyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiBsb2NhbFZhclBhdGgsXG4gICAgICAgICAgICBkYXRhOiBhcHBvaW50bWVudFRvMSxcbiAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1zXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpIHtcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0UGFyYW1zID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oaHR0cFJlcXVlc3RQYXJhbXMsIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAoaHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QXBwb2ludG1lbnRSZWFzb25zIChleHRyYUh0dHBSZXF1ZXN0UGFyYW1zPzogYW55ICkgOiBuZy5JSHR0cFByb21pc2U8bW9kZWxzLlNjaGVkdWxpbmdSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSB0aGlzLmJhc2VQYXRoICsgJy9zY2hlZHVsZS9yZWFzb25zJztcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzOiBhbnkgPSB7fTtcbiAgICAgICAgbGV0IGhlYWRlclBhcmFtczogYW55ID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEhlYWRlcnMpO1xuICAgICAgICBsZXQgaHR0cFJlcXVlc3RQYXJhbXM6IG5nLklSZXF1ZXN0Q29uZmlnID0ge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogbG9jYWxWYXJQYXRoLFxuICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbXNcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZXh0cmFIdHRwUmVxdWVzdFBhcmFtcykge1xuICAgICAgICAgICAgaHR0cFJlcXVlc3RQYXJhbXMgPSAoPGFueT5PYmplY3QpLmFzc2lnbihodHRwUmVxdWVzdFBhcmFtcywgZXh0cmFIdHRwUmVxdWVzdFBhcmFtcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy4kaHR0cChodHRwUmVxdWVzdFBhcmFtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRBcHBvaW50bWVudFN0YXR1c2VzIChleHRyYUh0dHBSZXF1ZXN0UGFyYW1zPzogYW55ICkgOiBuZy5JSHR0cFByb21pc2U8bW9kZWxzLkFic3RyYWN0U2VhcmNoUmVzcG9uc2VBcHBvaW50bWVudFN0YXR1c1RvMT4ge1xuICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSB0aGlzLmJhc2VQYXRoICsgJy9zY2hlZHVsZS9zdGF0dXNlcyc7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG4gICAgICAgIGxldCBoZWFkZXJQYXJhbXM6IGFueSA9ICg8YW55Pk9iamVjdCkuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRIZWFkZXJzKTtcbiAgICAgICAgbGV0IGh0dHBSZXF1ZXN0UGFyYW1zOiBuZy5JUmVxdWVzdENvbmZpZyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6IGxvY2FsVmFyUGF0aCxcbiAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1zXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpIHtcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0UGFyYW1zID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oaHR0cFJlcXVlc3RQYXJhbXMsIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAoaHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QXBwb2ludG1lbnRUeXBlcyAoZXh0cmFIdHRwUmVxdWVzdFBhcmFtcz86IGFueSApIDogbmcuSUh0dHBQcm9taXNlPG1vZGVscy5TY2hlZHVsaW5nUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gdGhpcy5iYXNlUGF0aCArICcvc2NoZWR1bGUvdHlwZXMnO1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnM6IGFueSA9IHt9O1xuICAgICAgICBsZXQgaGVhZGVyUGFyYW1zOiBhbnkgPSAoPGFueT5PYmplY3QpLmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SGVhZGVycyk7XG4gICAgICAgIGxldCBodHRwUmVxdWVzdFBhcmFtczogbmcuSVJlcXVlc3RDb25maWcgPSB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiBsb2NhbFZhclBhdGgsXG4gICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKSB7XG4gICAgICAgICAgICBodHRwUmVxdWVzdFBhcmFtcyA9ICg8YW55Pk9iamVjdCkuYXNzaWduKGh0dHBSZXF1ZXN0UGFyYW1zLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiRodHRwKGh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHByb3ZpZGVyTm8gXG4gICAgICogQHBhcmFtIGRhdGUgXG4gICAgICovXG4gICAgcHVibGljIGdldEFwcG9pbnRtZW50c0ZvckRheSAocHJvdmlkZXJObzogc3RyaW5nLCBkYXRlOiBzdHJpbmcsIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXM/OiBhbnkgKSA6IG5nLklIdHRwUHJvbWlzZTxtb2RlbHMuUmVzdFJlc3BvbnNlUGF0aWVudExpc3RBcHB0QmVhbj4ge1xuICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSB0aGlzLmJhc2VQYXRoICsgJy9zY2hlZHVsZS97cHJvdmlkZXJOb30vZGF5L3tkYXRlfSdcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7JyArICdwcm92aWRlck5vJyArICd9JywgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhwcm92aWRlck5vKSkpXG4gICAgICAgICAgICAucmVwbGFjZSgneycgKyAnZGF0ZScgKyAnfScsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZGF0ZSkpKTtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzOiBhbnkgPSB7fTtcbiAgICAgICAgbGV0IGhlYWRlclBhcmFtczogYW55ID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEhlYWRlcnMpO1xuICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdwcm92aWRlck5vJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgaWYgKHByb3ZpZGVyTm8gPT09IG51bGwgfHwgcHJvdmlkZXJObyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm92aWRlck5vIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0QXBwb2ludG1lbnRzRm9yRGF5LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZGF0ZScgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgIGlmIChkYXRlID09PSBudWxsIHx8IGRhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgZGF0ZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEFwcG9pbnRtZW50c0ZvckRheS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwUmVxdWVzdFBhcmFtczogbmcuSVJlcXVlc3RDb25maWcgPSB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiBsb2NhbFZhclBhdGgsXG4gICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKSB7XG4gICAgICAgICAgICBodHRwUmVxdWVzdFBhcmFtcyA9ICg8YW55Pk9iamVjdCkuYXNzaWduKGh0dHBSZXF1ZXN0UGFyYW1zLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiRodHRwKGh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIGRhdGUgXG4gICAgICovXG4gICAgcHVibGljIGdldEFwcG9pbnRtZW50c0ZvckRheTEgKGRhdGU6IHN0cmluZywgZXh0cmFIdHRwUmVxdWVzdFBhcmFtcz86IGFueSApIDogbmcuSUh0dHBQcm9taXNlPG1vZGVscy5SZXN0UmVzcG9uc2VQYXRpZW50TGlzdEFwcHRCZWFuPiB7XG4gICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IHRoaXMuYmFzZVBhdGggKyAnL3NjaGVkdWxlL2RheS97ZGF0ZX0nXG4gICAgICAgICAgICAucmVwbGFjZSgneycgKyAnZGF0ZScgKyAnfScsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZGF0ZSkpKTtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzOiBhbnkgPSB7fTtcbiAgICAgICAgbGV0IGhlYWRlclBhcmFtczogYW55ID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEhlYWRlcnMpO1xuICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdkYXRlJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgaWYgKGRhdGUgPT09IG51bGwgfHwgZGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBkYXRlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0QXBwb2ludG1lbnRzRm9yRGF5MS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwUmVxdWVzdFBhcmFtczogbmcuSVJlcXVlc3RDb25maWcgPSB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiBsb2NhbFZhclBhdGgsXG4gICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKSB7XG4gICAgICAgICAgICBodHRwUmVxdWVzdFBhcmFtcyA9ICg8YW55Pk9iamVjdCkuYXNzaWduKGh0dHBSZXF1ZXN0UGFyYW1zLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiRodHRwKGh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogXG4gICAgICovXG4gICAgcHVibGljIGdldENhbGVuZGFyQXBwb2ludG1lbnRTdGF0dXNlcyAoZXh0cmFIdHRwUmVxdWVzdFBhcmFtcz86IGFueSApIDogbmcuSUh0dHBQcm9taXNlPG1vZGVscy5SZXN0U2VhcmNoUmVzcG9uc2VDYWxlbmRhckFwcG9pbnRtZW50U3RhdHVzPiB7XG4gICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IHRoaXMuYmFzZVBhdGggKyAnL3NjaGVkdWxlL2NhbGVuZGFyL3N0YXR1c2VzJztcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzOiBhbnkgPSB7fTtcbiAgICAgICAgbGV0IGhlYWRlclBhcmFtczogYW55ID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEhlYWRlcnMpO1xuICAgICAgICBsZXQgaHR0cFJlcXVlc3RQYXJhbXM6IG5nLklSZXF1ZXN0Q29uZmlnID0ge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogbG9jYWxWYXJQYXRoLFxuICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbXNcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZXh0cmFIdHRwUmVxdWVzdFBhcmFtcykge1xuICAgICAgICAgICAgaHR0cFJlcXVlc3RQYXJhbXMgPSAoPGFueT5PYmplY3QpLmFzc2lnbihodHRwUmVxdWVzdFBhcmFtcywgZXh0cmFIdHRwUmVxdWVzdFBhcmFtcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy4kaHR0cChodHRwUmVxdWVzdFBhcmFtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBwcm92aWRlcklkIFxuICAgICAqIEBwYXJhbSBzdGFydERhdGUgXG4gICAgICogQHBhcmFtIGVuZERhdGUgXG4gICAgICogQHBhcmFtIHNpdGUgXG4gICAgICovXG4gICAgcHVibGljIGdldENhbGVuZGFyRXZlbnRzIChwcm92aWRlcklkOiBudW1iZXIsIHN0YXJ0RGF0ZT86IHN0cmluZywgZW5kRGF0ZT86IHN0cmluZywgc2l0ZT86IHN0cmluZywgZXh0cmFIdHRwUmVxdWVzdFBhcmFtcz86IGFueSApIDogbmcuSUh0dHBQcm9taXNlPG1vZGVscy5SZXN0U2VhcmNoUmVzcG9uc2VDYWxlbmRhckV2ZW50PiB7XG4gICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IHRoaXMuYmFzZVBhdGggKyAnL3NjaGVkdWxlL2NhbGVuZGFyL3twcm92aWRlcklkfSdcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7JyArICdwcm92aWRlcklkJyArICd9JywgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhwcm92aWRlcklkKSkpO1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnM6IGFueSA9IHt9O1xuICAgICAgICBsZXQgaGVhZGVyUGFyYW1zOiBhbnkgPSAoPGFueT5PYmplY3QpLmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SGVhZGVycyk7XG4gICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ3Byb3ZpZGVySWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICBpZiAocHJvdmlkZXJJZCA9PT0gbnVsbCB8fCBwcm92aWRlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb3ZpZGVySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRDYWxlbmRhckV2ZW50cy4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdGFydERhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydzdGFydERhdGUnXSA9IHN0YXJ0RGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbmREYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snZW5kRGF0ZSddID0gZW5kRGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzaXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snc2l0ZSddID0gc2l0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwUmVxdWVzdFBhcmFtczogbmcuSVJlcXVlc3RDb25maWcgPSB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiBsb2NhbFZhclBhdGgsXG4gICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKSB7XG4gICAgICAgICAgICBodHRwUmVxdWVzdFBhcmFtcyA9ICg8YW55Pk9iamVjdCkuYXNzaWduKGh0dHBSZXF1ZXN0UGFyYW1zLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiRodHRwKGh0dHBSZXF1ZXN0UGFyYW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogXG4gICAgICovXG4gICAgcHVibGljIGdldFNjaGVkdWxlR3JvdXBzIChleHRyYUh0dHBSZXF1ZXN0UGFyYW1zPzogYW55ICkgOiBuZy5JSHR0cFByb21pc2U8bW9kZWxzLlJlc3RTZWFyY2hSZXNwb25zZVNjaGVkdWxlR3JvdXA+IHtcbiAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gdGhpcy5iYXNlUGF0aCArICcvc2NoZWR1bGUvZ3JvdXBzJztcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzOiBhbnkgPSB7fTtcbiAgICAgICAgbGV0IGhlYWRlclBhcmFtczogYW55ID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEhlYWRlcnMpO1xuICAgICAgICBsZXQgaHR0cFJlcXVlc3RQYXJhbXM6IG5nLklSZXF1ZXN0Q29uZmlnID0ge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogbG9jYWxWYXJQYXRoLFxuICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbXNcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZXh0cmFIdHRwUmVxdWVzdFBhcmFtcykge1xuICAgICAgICAgICAgaHR0cFJlcXVlc3RQYXJhbXMgPSAoPGFueT5PYmplY3QpLmFzc2lnbihodHRwUmVxdWVzdFBhcmFtcywgZXh0cmFIdHRwUmVxdWVzdFBhcmFtcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy4kaHR0cChodHRwUmVxdWVzdFBhcmFtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTY2hlZHVsZVRlbXBsYXRlQ29kZXMgKGV4dHJhSHR0cFJlcXVlc3RQYXJhbXM/OiBhbnkgKSA6IG5nLklIdHRwUHJvbWlzZTxtb2RlbHMuUmVzdFNlYXJjaFJlc3BvbnNlU2NoZWR1bGVUZW1wbGF0ZUNvZGU+IHtcbiAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gdGhpcy5iYXNlUGF0aCArICcvc2NoZWR1bGUvdGVtcGxhdGVDb2Rlcyc7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG4gICAgICAgIGxldCBoZWFkZXJQYXJhbXM6IGFueSA9ICg8YW55Pk9iamVjdCkuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRIZWFkZXJzKTtcbiAgICAgICAgbGV0IGh0dHBSZXF1ZXN0UGFyYW1zOiBuZy5JUmVxdWVzdENvbmZpZyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6IGxvY2FsVmFyUGF0aCxcbiAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1zXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpIHtcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0UGFyYW1zID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oaHR0cFJlcXVlc3RQYXJhbXMsIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAoaHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gaWQgXG4gICAgICogQHBhcmFtIGFwcG9pbnRtZW50VG8xIFxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVBcHBvaW50bWVudFN0YXR1cyAoaWQ6IG51bWJlciwgYXBwb2ludG1lbnRUbzE/OiBtb2RlbHMuQXBwb2ludG1lbnRUbzEsIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXM/OiBhbnkgKSA6IG5nLklIdHRwUHJvbWlzZTxtb2RlbHMuU2NoZWR1bGluZ1Jlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IHRoaXMuYmFzZVBhdGggKyAnL3NjaGVkdWxlL2FwcG9pbnRtZW50L3tpZH0vdXBkYXRlU3RhdHVzJ1xuICAgICAgICAgICAgLnJlcGxhY2UoJ3snICsgJ2lkJyArICd9JywgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpZCkpKTtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzOiBhbnkgPSB7fTtcbiAgICAgICAgbGV0IGhlYWRlclBhcmFtczogYW55ID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEhlYWRlcnMpO1xuICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdpZCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgIGlmIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUFwcG9pbnRtZW50U3RhdHVzLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBSZXF1ZXN0UGFyYW1zOiBuZy5JUmVxdWVzdENvbmZpZyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiBsb2NhbFZhclBhdGgsXG4gICAgICAgICAgICBkYXRhOiBhcHBvaW50bWVudFRvMSxcbiAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1zXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpIHtcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0UGFyYW1zID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oaHR0cFJlcXVlc3RQYXJhbXMsIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAoaHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gaWQgXG4gICAgICogQHBhcmFtIGFwcG9pbnRtZW50VG8xIFxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVBcHBvaW50bWVudFR5cGUgKGlkOiBudW1iZXIsIGFwcG9pbnRtZW50VG8xPzogbW9kZWxzLkFwcG9pbnRtZW50VG8xLCBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zPzogYW55ICkgOiBuZy5JSHR0cFByb21pc2U8bW9kZWxzLlNjaGVkdWxpbmdSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSB0aGlzLmJhc2VQYXRoICsgJy9zY2hlZHVsZS9hcHBvaW50bWVudC97aWR9L3VwZGF0ZVR5cGUnXG4gICAgICAgICAgICAucmVwbGFjZSgneycgKyAnaWQnICsgJ30nLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGlkKSkpO1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnM6IGFueSA9IHt9O1xuICAgICAgICBsZXQgaGVhZGVyUGFyYW1zOiBhbnkgPSAoPGFueT5PYmplY3QpLmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SGVhZGVycyk7XG4gICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2lkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgaWYgKGlkID09PSBudWxsIHx8IGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQXBwb2ludG1lbnRUeXBlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBSZXF1ZXN0UGFyYW1zOiBuZy5JUmVxdWVzdENvbmZpZyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiBsb2NhbFZhclBhdGgsXG4gICAgICAgICAgICBkYXRhOiBhcHBvaW50bWVudFRvMSxcbiAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1zXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpIHtcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0UGFyYW1zID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oaHR0cFJlcXVlc3RQYXJhbXMsIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAoaHR0cFJlcXVlc3RQYXJhbXMpO1xuICAgIH1cbn1cbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9zb3VyY2VNYXAhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanM/c291cmNlTWFwJnByZWNpc2lvbj04IS4vanVuby5zY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9zb3VyY2VNYXAhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanM/c291cmNlTWFwJnByZWNpc2lvbj04IS4vanVuby5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/c291cmNlTWFwIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzP3NvdXJjZU1hcCZwcmVjaXNpb249OCEuL2p1bm8uc2Nzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsImFuZ3VsYXIubW9kdWxlKCdvc2NhclByb3ZpZGVyVmlld01vZHVsZScpLmNvbnRyb2xsZXIoJ0FkbWluQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgZnVuY3Rpb24gKCRzY29wZSwkaHR0cCkge1xuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZShcIkFkbWluLkludGVncmF0aW9uLkZheFwiKS5jb250cm9sbGVyKCdBZG1pbi5JbnRlZ3JhdGlvbi5GYXguRmF4Q29uZmlndXJhdGlvbkNvbnRyb2xsZXInLCBbXG5cdFwiJHVpYk1vZGFsXCIsXG5cdFwiZmF4QWNjb3VudFNlcnZpY2VcIixcblx0XCJwcm92aWRlclNlcnZpY2VcIixcblx0XCJzeXN0ZW1QcmVmZXJlbmNlU2VydmljZVwiLFxuXHRmdW5jdGlvbiAoJHVpYk1vZGFsLFxuXHQgICAgICAgICAgZmF4QWNjb3VudFNlcnZpY2UsXG5cdCAgICAgICAgICBwcm92aWRlclNlcnZpY2UsXG5cdCAgICAgICAgICBzeXN0ZW1QcmVmZXJlbmNlU2VydmljZSlcblx0e1xuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblx0XHRjb250cm9sbGVyLmZheEFjY291bnRMaXN0ID0gW107XG5cdFx0Y29udHJvbGxlci5sb2dnZWRJblByb3ZpZGVyID0gbnVsbDtcblx0XHRjb250cm9sbGVyLm1hc3RlckZheERpc2FibGVkID0gdHJ1ZTtcblx0XHRjb250cm9sbGVyLm1hc3RlckZheEVuYWJsZWRJbmJvdW5kID0gZmFsc2U7XG5cdFx0Y29udHJvbGxlci5tYXN0ZXJGYXhFbmFibGVkT3V0Ym91bmQgPSBmYWxzZTtcblxuXHRcdGNvbnRyb2xsZXIuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHQvLyBpZiB0aGUgY3VycmVudCBwcm92aWRlciBudW1iZXIgaXMgdW5rbm93biwgcmV0cmlldmUgaXQuXG5cdFx0XHRpZihjb250cm9sbGVyLmxvZ2dlZEluUHJvdmlkZXIgPT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0cHJvdmlkZXJTZXJ2aWNlLmdldE1lKCkudGhlbihcblx0XHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIubG9nZ2VkSW5Qcm92aWRlciA9IHJlc3BvbnNlO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpXG5cdFx0XHR9XG5cdFx0XHRzeXN0ZW1QcmVmZXJlbmNlU2VydmljZS5pc1ByZWZlcmVuY2VFbmFibGVkKFwibWFzdGVyRmF4RW5hYmxlZEluYm91bmRcIiwgY29udHJvbGxlci5tYXN0ZXJGYXhFbmFibGVkSW5ib3VuZCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIubWFzdGVyRmF4RW5hYmxlZEluYm91bmQgPSByZXNwb25zZTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnVwZGF0ZU1hc3RlckZheERpc2FibGVkU3RhdHVzKCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0XHRzeXN0ZW1QcmVmZXJlbmNlU2VydmljZS5pc1ByZWZlcmVuY2VFbmFibGVkKFwibWFzdGVyRmF4RW5hYmxlZE91dGJvdW5kXCIsIGNvbnRyb2xsZXIubWFzdGVyRmF4RW5hYmxlZE91dGJvdW5kKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5tYXN0ZXJGYXhFbmFibGVkT3V0Ym91bmQgPSByZXNwb25zZTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnVwZGF0ZU1hc3RlckZheERpc2FibGVkU3RhdHVzKCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cblx0XHRcdGZheEFjY291bnRTZXJ2aWNlLmxpc3RBY2NvdW50cygpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmZheEFjY291bnRMaXN0ID0gcmVzcG9uc2U7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdClcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5lZGl0TmV3RmF4QWNjb3VudCA9IGZ1bmN0aW9uIGVkaXROZXdGYXhBY2NvdW50KClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLmVkaXRGYXhBY2NvdW50KCk7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLmVkaXRGYXhBY2NvdW50ID0gZnVuY3Rpb24gZWRpdEZheEFjY291bnQoZmF4QWNjb3VudClcblx0XHR7XG5cdFx0XHRsZXQgaXNOZXdBY2N0ID0gdHJ1ZTtcblx0XHRcdGlmKGZheEFjY291bnQpXG5cdFx0XHR7XG5cdFx0XHRcdGlzTmV3QWNjdCA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdhZG1pbi9pbnRlZ3JhdGlvbi9mYXgvZmF4Q29uZmlndXJhdGlvbkVkaXQuanNwJyxcblx0XHRcdFx0XHRjb250cm9sbGVyOiAnQWRtaW4uSW50ZWdyYXRpb24uRmF4LkZheENvbmZpZ3VyYXRpb25FZGl0Q29udHJvbGxlciBhcyBmYXhDb25maWdFZGl0Q29udHJvbGxlcicsXG5cdFx0XHRcdFx0YmFja2Ryb3A6ICdzdGF0aWMnLFxuXHRcdFx0XHRcdHdpbmRvd0NsYXNzOiAnZmF4RWRpdE1vZGFsJyxcblx0XHRcdFx0XHRyZXNvbHZlOlxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRmYXhBY2NvdW50OiBmdW5jdGlvbigpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmF4QWNjb3VudDtcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0bWFzdGVyRmF4RW5hYmxlZEluYm91bmQ6IGZ1bmN0aW9uKClcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBjb250cm9sbGVyLm1hc3RlckZheEVuYWJsZWRJbmJvdW5kO1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRtYXN0ZXJGYXhFbmFibGVkT3V0Ym91bmQ6IGZ1bmN0aW9uKClcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBjb250cm9sbGVyLm1hc3RlckZheEVuYWJsZWRPdXRib3VuZDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihcblx0XHRcdFx0Ly8gdGhlIG9iamVjdCBwYXNzZWQgYmFjayBvbiBjbG9zaW5nXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3ModXBkYXRlZEFjY291bnQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZihpc05ld0FjY3QpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly8gbmV3IGFjY291bnRzIGdldCBhZGRlZCB0byB0aGUgYWNjb3VudCBsaXN0XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmZheEFjY291bnRMaXN0LnB1c2godXBkYXRlZEFjY291bnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly8gY2xlYXIgdGhlIGV4aXN0aW5nIHByb3BlcnRpZXMgYW5kIHJlcGxhY2Ugd2l0aCB0aGUgdXBkYXRlZCBvbmVzXG5cdFx0XHRcdFx0XHRhbmd1bGFyLmNvcHkodXBkYXRlZEFjY291bnQsIGZheEFjY291bnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly8gZG8gbm90aGluZyBvbiBkaXNtaXNzYWxcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2F2ZU1hc3RlckZheEVuYWJsZWRTdGF0ZUluYm91bmQgPSBmdW5jdGlvbiBzYXZlTWFzdGVyRmF4RW5hYmxlZFN0YXRlKClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnNldFN5c3RlbVByb3BlcnR5KFwibWFzdGVyRmF4RW5hYmxlZEluYm91bmRcIiwgY29udHJvbGxlci5tYXN0ZXJGYXhFbmFibGVkSW5ib3VuZCk7XG5cdFx0XHRjb250cm9sbGVyLnVwZGF0ZU1hc3RlckZheERpc2FibGVkU3RhdHVzKCk7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLnNhdmVNYXN0ZXJGYXhFbmFibGVkU3RhdGVPdXRib3VuZCA9IGZ1bmN0aW9uIHNhdmVNYXN0ZXJGYXhFbmFibGVkU3RhdGUoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIuc2V0U3lzdGVtUHJvcGVydHkoXCJtYXN0ZXJGYXhFbmFibGVkT3V0Ym91bmRcIiwgY29udHJvbGxlci5tYXN0ZXJGYXhFbmFibGVkT3V0Ym91bmQpO1xuXHRcdFx0Y29udHJvbGxlci51cGRhdGVNYXN0ZXJGYXhEaXNhYmxlZFN0YXR1cygpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnVwZGF0ZU1hc3RlckZheERpc2FibGVkU3RhdHVzID0gZnVuY3Rpb24gdXBkYXRlTWFzdGVyRmF4RGlzYWJsZWRTdGF0dXMoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIubWFzdGVyRmF4RGlzYWJsZWQgPSAhY29udHJvbGxlci5tYXN0ZXJGYXhFbmFibGVkSW5ib3VuZCAmJiAhY29udHJvbGxlci5tYXN0ZXJGYXhFbmFibGVkT3V0Ym91bmQ7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLnNldFN5c3RlbVByb3BlcnR5ID0gZnVuY3Rpb24gc2V0U3lzdGVtUHJvcGVydHkoa2V5LCB2YWx1ZSlcblx0XHR7XG5cdFx0XHRzeXN0ZW1QcmVmZXJlbmNlU2VydmljZS5zZXRQcmVmZXJlbmNlKGtleSwgdmFsdWUpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5pbml0aWFsaXplKCk7XG5cdH1cbl0pOyIsImFuZ3VsYXIubW9kdWxlKFwiQWRtaW4uSW50ZWdyYXRpb24uRmF4XCIpLmNvbnRyb2xsZXIoJ0FkbWluLkludGVncmF0aW9uLkZheC5GYXhDb25maWd1cmF0aW9uRWRpdENvbnRyb2xsZXInLCBbXG5cdFwiJHVpYk1vZGFsXCIsXG5cdFwiJHVpYk1vZGFsSW5zdGFuY2VcIixcblx0XCJmYXhBY2NvdW50U2VydmljZVwiLFxuXHRcImZheEFjY291bnRcIixcblx0XCJtYXN0ZXJGYXhFbmFibGVkSW5ib3VuZFwiLFxuXHRcIm1hc3RlckZheEVuYWJsZWRPdXRib3VuZFwiLFxuXHRmdW5jdGlvbiAoJHVpYk1vZGFsLFxuXHQgICAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UsXG5cdCAgICAgICAgICBmYXhBY2NvdW50U2VydmljZSxcblx0ICAgICAgICAgIGZheEFjY291bnQsXG5cdCAgICAgICAgICBtYXN0ZXJGYXhFbmFibGVkSW5ib3VuZCxcblx0ICAgICAgICAgIG1hc3RlckZheEVuYWJsZWRPdXRib3VuZClcblx0e1xuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblx0XHRjb250cm9sbGVyLmNvbm5lY3Rpb25TdGF0dXNFbnVtID0gT2JqZWN0LmZyZWV6ZSh7XCJ1bmtub3duXCI6MSwgXCJzdWNjZXNzXCI6MiwgXCJmYWlsdXJlXCI6M30pO1xuXHRcdGNvbnRyb2xsZXIuY292ZXJMZXR0ZXJPcHRpb25zID0gW1xuXHRcdFx0XCJOb25lXCIsXG5cdFx0XHRcIkJhc2ljXCIsXG5cdFx0XHRcIlN0YW5kYXJkXCIsXG5cdFx0XHRcIkNvbXBhbnlcIixcblx0XHRcdFwiUGVyc29uYWxcIlxuXHRcdF07XG5cblx0XHRjb250cm9sbGVyLmluaXRpYWxpemUgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0aWYoZmF4QWNjb3VudClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5mYXhBY2NvdW50ID0gYW5ndWxhci5jb3B5KGZheEFjY291bnQpO1xuXHRcdFx0XHRpZighY29udHJvbGxlci5mYXhBY2NvdW50LmNvbm5lY3Rpb25TdGF0dXMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnNldERlZmF1bHRDb25uZWN0aW9uU3RhdHVzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5mYXhBY2NvdW50ID0ge1xuXHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXG5cdFx0XHRcdFx0ZW5hYmxlSW5ib3VuZDogZmFsc2UsXG5cdFx0XHRcdFx0ZW5hYmxlT3V0Ym91bmQ6IGZhbHNlLFxuXHRcdFx0XHRcdGFjY291bnRMb2dpbjogbnVsbCxcblx0XHRcdFx0XHRhY2NvdW50RW1haWw6ICcnLFxuXHRcdFx0XHRcdHBhc3N3b3JkOiAnJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJycsXG5cdFx0XHRcdFx0Y292ZXJMZXR0ZXJPcHRpb246ICcnLFxuXHRcdFx0XHRcdGZheE51bWJlcjogJycsXG5cdFx0XHRcdFx0Y29ubmVjdGlvblN0YXR1czogY29udHJvbGxlci5jb25uZWN0aW9uU3RhdHVzRW51bS51bmtub3duXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHQvLyBnZXQgdGhlIG1hc3RlciBmbGFnIHN0YXR1cyBmb3IgaW5ib3VuZC9vdXRib3VuZCBzZXR0aW5nc1xuXHRcdFx0Y29udHJvbGxlci5tYXN0ZXJGYXhFbmFibGVkSW5ib3VuZCA9IG1hc3RlckZheEVuYWJsZWRJbmJvdW5kO1xuXHRcdFx0Y29udHJvbGxlci5tYXN0ZXJGYXhFbmFibGVkT3V0Ym91bmQgPSBtYXN0ZXJGYXhFbmFibGVkT3V0Ym91bmQ7XG5cblx0XHRcdC8vIHN3aXRjaCBvZmYgc2V0dGluZ3MgdGhhdCBhcmUgZGlzYWJsZWQgYW5kIHVuLWVkaXRhYmxlLlxuXHRcdFx0Ly8gaWYgdGhpcyBpcyBub3QgZG9uZSwgZm9ybSBlcnJvcnMgbWF5IHByZXZlbnQgc2F2aW5nIGNoYW5nZXMgdG8gb3RoZXIgc2VjdGlvblxuXHRcdFx0aWYoIWNvbnRyb2xsZXIubWFzdGVyRmF4RW5hYmxlZEluYm91bmQpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuZmF4QWNjb3VudC5lbmFibGVJbmJvdW5kID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZighY29udHJvbGxlci5tYXN0ZXJGYXhFbmFibGVkT3V0Ym91bmQpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuZmF4QWNjb3VudC5lbmFibGVPdXRib3VuZCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmVTZXR0aW5ncyA9IGZ1bmN0aW9uIChmb3JtKVxuXHRcdHtcblx0XHRcdGlmKCFmb3JtLiR2YWxpZClcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQoXCJUaGUgZm9ybSBjb250YWlucyBlcnJvcnNcIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0bGV0IGNsb3NlU3VjY2VzcyA9IGZ1bmN0aW9uKHVwZGF0ZWRBY2NvdW50KVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBrZWVwIHRoZXNlIHNldHRpbmdzXG5cdFx0XHRcdHVwZGF0ZWRBY2NvdW50LmNvbm5lY3Rpb25TdGF0dXMgPSBjb250cm9sbGVyLmZheEFjY291bnQuY29ubmVjdGlvblN0YXR1cztcblx0XHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UodXBkYXRlZEFjY291bnQpO1xuXHRcdFx0fTtcblx0XHRcdGxldCBjbG9zZUVycm9yID0gZnVuY3Rpb24oZXJyb3IpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0fTtcblxuXHRcdFx0aWYgKGNvbnRyb2xsZXIuZmF4QWNjb3VudC5pZClcblx0XHRcdHtcblx0XHRcdFx0ZmF4QWNjb3VudFNlcnZpY2UudXBkYXRlQWNjb3VudFNldHRpbmdzKGNvbnRyb2xsZXIuZmF4QWNjb3VudC5pZCwgY29udHJvbGxlci5mYXhBY2NvdW50KS50aGVuKFxuXHRcdFx0XHRcdGNsb3NlU3VjY2Vzcyxcblx0XHRcdFx0XHRjbG9zZUVycm9yXG5cdFx0XHRcdClcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0ZmF4QWNjb3VudFNlcnZpY2UuYWRkQWNjb3VudFNldHRpbmdzKGNvbnRyb2xsZXIuZmF4QWNjb3VudCkudGhlbihcblx0XHRcdFx0XHRjbG9zZVN1Y2Nlc3MsXG5cdFx0XHRcdFx0Y2xvc2VFcnJvclxuXHRcdFx0XHQpXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLmNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpXG5cdFx0e1xuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIudGVzdENvbm5lY3Rpb24gPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0ZmF4QWNjb3VudFNlcnZpY2UudGVzdENvbm5lY3Rpb24oY29udHJvbGxlci5mYXhBY2NvdW50KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYocmVzcG9uc2UpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5mYXhBY2NvdW50LmNvbm5lY3Rpb25TdGF0dXMgPSBjb250cm9sbGVyLmNvbm5lY3Rpb25TdGF0dXNFbnVtLnN1Y2Nlc3M7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmZheEFjY291bnQuY29ubmVjdGlvblN0YXR1cyA9IGNvbnRyb2xsZXIuY29ubmVjdGlvblN0YXR1c0VudW0uZmFpbHVyZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5mYXhBY2NvdW50LmNvbm5lY3Rpb25TdGF0dXMgPSBjb250cm9sbGVyLmNvbm5lY3Rpb25TdGF0dXNFbnVtLnVua25vd247XG5cdFx0XHRcdH1cblx0XHRcdClcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXIuc2V0RGVmYXVsdENvbm5lY3Rpb25TdGF0dXMgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5mYXhBY2NvdW50LmNvbm5lY3Rpb25TdGF0dXMgPSBjb250cm9sbGVyLmNvbm5lY3Rpb25TdGF0dXNFbnVtLnVua25vd247XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuaW5pdGlhbGl6ZSgpO1xuXHR9XG5dKTsiLCJhbmd1bGFyLm1vZHVsZShcIkFkbWluLkludGVncmF0aW9uLkZheFwiKS5jb250cm9sbGVyKCdBZG1pbi5JbnRlZ3JhdGlvbi5GYXguRmF4U2VuZFJlY2VpdmVDb250cm9sbGVyJywgW1xuXHQnTmdUYWJsZVBhcmFtcycsXG5cdCdwcm92aWRlclNlcnZpY2UnLFxuXHRcImZheEFjY291bnRTZXJ2aWNlXCIsXG5cdFwiZmF4SW5ib3VuZFNlcnZpY2VcIixcblx0XCJmYXhPdXRib3VuZFNlcnZpY2VcIixcblx0ZnVuY3Rpb24gKE5nVGFibGVQYXJhbXMsXG5cdCAgICAgICAgICBwcm92aWRlclNlcnZpY2UsXG5cdCAgICAgICAgICBmYXhBY2NvdW50U2VydmljZSxcblx0ICAgICAgICAgIGZheEluYm91bmRTZXJ2aWNlLFxuXHQgICAgICAgICAgZmF4T3V0Ym91bmRTZXJ2aWNlKVxuXHR7XG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXHRcdGNvbnRyb2xsZXIuc3lzdGVtU3RhdHVzRW51bSA9IE9iamVjdC5mcmVlemUoe1wic2VudFwiOlwiU0VOVFwiLCBcInF1ZXVlZFwiOlwiUVVFVUVEXCIsIFwiZXJyb3JcIjpcIkVSUk9SXCJ9KTtcblx0XHRjb250cm9sbGVyLnRhYkVudW0gPSBPYmplY3QuZnJlZXplKHtcImluYm94XCI6MCwgXCJvdXRib3hcIjoxfSk7XG5cdFx0Y29udHJvbGxlci5hY3RpdmVUYWIgPSBjb250cm9sbGVyLnRhYkVudW0ub3V0Ym94O1xuXHRcdGNvbnRyb2xsZXIubG9nZ2VkSW5Qcm92aWRlck5vID0gbnVsbDtcblxuXHRcdGNvbnRyb2xsZXIubmV4dFB1bGxUaW1lID0gbnVsbDtcblx0XHRjb250cm9sbGVyLm5leHRQdXNoVGltZSA9IG51bGw7XG5cblx0XHRjb250cm9sbGVyLnNlbGVjdGVkRmF4QWNjb3VudCA9IG51bGw7XG5cdFx0Y29udHJvbGxlci5mYXhBY2NvdW50TGlzdCA9IFtdO1xuXHRcdGNvbnRyb2xsZXIub3V0Ym94SXRlbUxpc3QgPSBbXTtcblx0XHRjb250cm9sbGVyLmluYm94SXRlbUxpc3QgPSBbXTtcblxuXHRcdC8vIG5nVGFibGUgb2JqZWN0IGZvciBzdG9yaW5nIHNlYXJjaCBwYXJhbWV0ZXJzXG5cdFx0Y29udHJvbGxlci5pbmJveCA9XG5cdFx0e1xuXHRcdFx0c2VhcmNoOiB7XG5cdFx0XHRcdHBhZ2U6IDEsXG5cdFx0XHRcdGNvdW50OiAxMCxcblx0XHRcdFx0c29ydGluZzoge1xuXHRcdFx0XHRcdERhdGVTZW50OiBcImRlc2NcIlxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0c3RhcnREYXRlOiBudWxsLFxuXHRcdFx0ZW5kRGF0ZTogbnVsbFxuXHRcdH07XG5cdFx0Ly8gbmdUYWJsZSBvYmplY3QgZm9yIHN0b3Jpbmcgc2VhcmNoIHBhcmFtZXRlcnNcblx0XHRjb250cm9sbGVyLm91dGJveCA9XG5cdFx0XHR7XG5cdFx0XHRcdHNlYXJjaDoge1xuXHRcdFx0XHRcdHBhZ2U6IDEsXG5cdFx0XHRcdFx0Y291bnQ6IDEwLFxuXHRcdFx0XHRcdHNvcnRpbmc6IHtcblx0XHRcdFx0XHRcdERhdGVTZW50OiBcImRlc2NcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0c3RhcnREYXRlOiBudWxsLFxuXHRcdFx0XHRlbmREYXRlOiBudWxsXG5cdFx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5pbml0aWFsaXplID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGZheEFjY291bnRTZXJ2aWNlLmxpc3RBY2NvdW50cygpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmZheEFjY291bnRMaXN0ID0gcmVzcG9uc2U7XG5cdFx0XHRcdFx0aWYoY29udHJvbGxlci5mYXhBY2NvdW50TGlzdC5sZW5ndGggPiAwKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuc2VsZWN0ZWRGYXhBY2NvdW50ID0gY29udHJvbGxlci5mYXhBY2NvdW50TGlzdFswXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0XHRjb250cm9sbGVyLmxvYWROZXh0UHVzaFRpbWUoKTtcblx0XHRcdGNvbnRyb2xsZXIubG9hZE5leHRQdWxsVGltZSgpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmxvYWRPdXRib3hJdGVtcyA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnRhYmxlUGFyYW1zT3V0Ym94ID0gbmV3IE5nVGFibGVQYXJhbXMoXG5cdFx0XHRcdGNvbnRyb2xsZXIub3V0Ym94LnNlYXJjaCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGdldERhdGE6IGZ1bmN0aW9uKHBhcmFtcylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLm91dGJveC5zZWFyY2ggPSBwYXJhbXMudXJsKCk7XG5cblx0XHRcdFx0XHRcdGxldCBkZWZhdWx0cyA9IHtcblx0XHRcdFx0XHRcdFx0cGFnZTogY29udHJvbGxlci5vdXRib3guc2VhcmNoLnBhZ2UsXG5cdFx0XHRcdFx0XHRcdHBlclBhZ2U6IGNvbnRyb2xsZXIub3V0Ym94LnNlYXJjaC5jb3VudFxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGxldCBzZWFyY2hQYXJhbXMgPSB7XG5cdFx0XHRcdFx0XHRcdHN0YXJ0RGF0ZTogIGNvbnRyb2xsZXIuZm9ybWF0T3B0aW9uYWxEYXRlUGFyYW0oY29udHJvbGxlci5vdXRib3guc3RhcnREYXRlKSxcblx0XHRcdFx0XHRcdFx0ZW5kRGF0ZTogY29udHJvbGxlci5mb3JtYXRPcHRpb25hbERhdGVQYXJhbShjb250cm9sbGVyLm91dGJveC5lbmREYXRlKSxcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR2YXIgc2VhcmNoTGlzdEhlbHBlciA9IG5ldyBKdW5vLkNvbW1vbi5TZWFyY2hMaXN0SGVscGVyKGRlZmF1bHRzLCBzZWFyY2hQYXJhbXMpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZheEFjY291bnRTZXJ2aWNlLmdldE91dGJveChjb250cm9sbGVyLnNlbGVjdGVkRmF4QWNjb3VudC5pZCwgc2VhcmNoTGlzdEhlbHBlcikudGhlbihcblx0XHRcdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSlcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIub3V0Ym94SXRlbUxpc3QgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIudGFibGVQYXJhbXNPdXRib3gudG90YWwocmVzcG9uc2UubWV0YS50b3RhbCk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvbnRyb2xsZXIub3V0Ym94SXRlbUxpc3Q7XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdFx0XHRcdFx0YWxlcnQoXCJGYWlsZWQgdG8gbG9hZCBvdXRib3hcIik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdFx0Y29udHJvbGxlci5sb2FkTmV4dFB1c2hUaW1lKCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIubG9hZEluYm94SXRlbXMgPSBmdW5jdGlvbiAoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIudGFibGVQYXJhbXNJbmJveCA9IG5ldyBOZ1RhYmxlUGFyYW1zKFxuXHRcdFx0XHRjb250cm9sbGVyLmluYm94LnNlYXJjaCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGdldERhdGE6IGZ1bmN0aW9uIChwYXJhbXMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5pbmJveC5zZWFyY2ggPSBwYXJhbXMudXJsKCk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmluZm8oY29udHJvbGxlci5pbmJveCk7XG5cblx0XHRcdFx0XHRcdGxldCBkZWZhdWx0cyA9IHtcblx0XHRcdFx0XHRcdFx0cGFnZTogY29udHJvbGxlci5pbmJveC5zZWFyY2gucGFnZSxcblx0XHRcdFx0XHRcdFx0cGVyUGFnZTogY29udHJvbGxlci5pbmJveC5zZWFyY2guY291bnRcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRsZXQgc2VhcmNoUGFyYW1zID0ge1xuXHRcdFx0XHRcdFx0XHRzdGFydERhdGU6ICBjb250cm9sbGVyLmZvcm1hdE9wdGlvbmFsRGF0ZVBhcmFtKGNvbnRyb2xsZXIuaW5ib3guc3RhcnREYXRlKSxcblx0XHRcdFx0XHRcdFx0ZW5kRGF0ZTogY29udHJvbGxlci5mb3JtYXRPcHRpb25hbERhdGVQYXJhbShjb250cm9sbGVyLmluYm94LmVuZERhdGUpLFxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHZhciBzZWFyY2hMaXN0SGVscGVyID0gbmV3IEp1bm8uQ29tbW9uLlNlYXJjaExpc3RIZWxwZXIoZGVmYXVsdHMsIHNlYXJjaFBhcmFtcyk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmF4QWNjb3VudFNlcnZpY2UuZ2V0SW5ib3goY29udHJvbGxlci5zZWxlY3RlZEZheEFjY291bnQuaWQsIHNlYXJjaExpc3RIZWxwZXIpLnRoZW4oXG5cdFx0XHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmluYm94SXRlbUxpc3QgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIudGFibGVQYXJhbXNJbmJveC50b3RhbChyZXNwb25zZS5tZXRhLnRvdGFsKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gY29udHJvbGxlci5pbmJveEl0ZW1MaXN0O1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcilcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRcdGFsZXJ0KFwiRmFpbGVkIHRvIGxvYWQgaW5ib3hcIik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdFx0Y29udHJvbGxlci5sb2FkTmV4dFB1bGxUaW1lKCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucmVzZW5kRmF4ID0gZnVuY3Rpb24ob3V0Ym94SXRlbSlcblx0XHR7XG5cdFx0XHRvdXRib3hJdGVtLnN5c3RlbVN0YXR1cyA9ICdSRVNFTkQnO1xuXHRcdFx0ZmF4T3V0Ym91bmRTZXJ2aWNlLnJlc2VuZE91dGJvdW5kRmF4KG91dGJveEl0ZW0uaWQpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbmd1bGFyLmNvcHkocmVzcG9uc2UsIG91dGJveEl0ZW0pO1xuXHRcdFx0XHRcdGNvbnNvbGUuaW5mbyhvdXRib3hJdGVtKTtcblx0XHRcdFx0XHRpZihvdXRib3hJdGVtLnN5c3RlbVN0YXR1cyA9PT0gY29udHJvbGxlci5zeXN0ZW1TdGF0dXNFbnVtLmVycm9yKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGFsZXJ0KG91dGJveEl0ZW0uc3lzdGVtU3RhdHVzTWVzc2FnZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG91dGJveEl0ZW0uc3lzdGVtU3RhdHVzID0gY29udHJvbGxlci5zeXN0ZW1TdGF0dXNFbnVtLmVycm9yO1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHRcdGFsZXJ0KGVycm9yKTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5sb2FkTmV4dFB1bGxUaW1lID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGZheEluYm91bmRTZXJ2aWNlLmdldE5leHRQdWxsVGltZSgpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLm5leHRQdWxsVGltZSA9IHJlc3BvbnNlO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIubmV4dFB1bGxUaW1lID0gbnVsbDtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRcdFx0XHRhbGVydChlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLmxvYWROZXh0UHVzaFRpbWUgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0ZmF4T3V0Ym91bmRTZXJ2aWNlLmdldE5leHRQdXNoVGltZSgpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLm5leHRQdXNoVGltZSA9IHJlc3BvbnNlO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIubmV4dFB1c2hUaW1lID0gbnVsbDtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRcdFx0XHRhbGVydChlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2hhbmdlVGFiID0gZnVuY3Rpb24odGFiSWQpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5hY3RpdmVUYWIgPSB0YWJJZDtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5vcGVuRG9jdW1lbnQgPSBmdW5jdGlvbihkb2N1bWVudElkKVxuXHRcdHtcblx0XHRcdGxldCBvcGVuRG9jdW1lbnRXaW5kb3cgPSBmdW5jdGlvbigpXG5cdFx0XHR7XG5cdFx0XHRcdGxldCB1cmwgPSBcIi4uL2Rtcy9zaG93RG9jdW1lbnQuanNwXCI7XG5cdFx0XHRcdGxldCBwYXJhbXMgPSBcInNlZ21lbnRJRD1cIitkb2N1bWVudElkK1wiJnByb3ZpZGVyTm89XCIrIGNvbnRyb2xsZXIubG9nZ2VkSW5Qcm92aWRlck5vICsgXCImc3RhdHVzPUEmaW5XaW5kb3c9dHJ1ZSZjaGFydFZpZXcmZGVtb05hbWU9XCI7XG5cdFx0XHRcdGxldCB3aW5kb3dOYW1lID0gXCJTaG93RG9jdW1lbnRcIiArIGRvY3VtZW50SWQ7XG5cdFx0XHRcdHdpbmRvdy5vcGVuKHVybCArIFwiP1wiICsgcGFyYW1zLCB3aW5kb3dOYW1lLCBcInNjcm9sbGJhcnM9MSx3aWR0aD0xMDI0LGhlaWdodD03NjhcIik7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBpZiB0aGUgY3VycmVudCBwcm92aWRlciBudW1iZXIgaXMgdW5rbm93biwgcmV0cmlldmUgaXQgYmVmb3JlIG9wZW5pbmcgdGhlIG5ldyB3aW5kb3cuXG5cdFx0XHRpZihjb250cm9sbGVyLmxvZ2dlZEluUHJvdmlkZXJObyA9PSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRwcm92aWRlclNlcnZpY2UuZ2V0TWUoKS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5sb2dnZWRJblByb3ZpZGVyTm8gPSByZXNwb25zZS5wcm92aWRlck5vO1xuXHRcdFx0XHRcdFx0b3BlbkRvY3VtZW50V2luZG93KCk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcilcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdClcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0b3BlbkRvY3VtZW50V2luZG93KCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIudmlld0Rvd25sb2FkRmlsZSA9IGZ1bmN0aW9uKG91dGJvdW5kSWQpXG5cdFx0e1xuXHRcdFx0bGV0IHVybCA9IGZheE91dGJvdW5kU2VydmljZS5nZXREb3dubG9hZFVybChvdXRib3VuZElkKTtcblx0XHRcdGxldCB3aW5kb3dOYW1lID0gXCJWaWV3RmF4RmlsZVwiICsgb3V0Ym91bmRJZDtcblx0XHRcdHdpbmRvdy5vcGVuKHVybCwgd2luZG93TmFtZSwgXCJzY3JvbGxiYXJzPTEsd2lkdGg9MTAyNCxoZWlnaHQ9NzY4XCIpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmZvcm1hdE9wdGlvbmFsRGF0ZVBhcmFtID0gZnVuY3Rpb24oZGF0ZU9iailcblx0XHR7XG5cdFx0XHRyZXR1cm4gSnVuby5Db21tb24uVXRpbC5pc1VuZGVmaW5lZE9yTnVsbChkYXRlT2JqKT8gbnVsbCA6IG1vbWVudChkYXRlT2JqKS5mb3JtYXQoJ1lZWVktTU0tREQnKVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmluaXRpYWxpemUoKTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQWRtaW4uSW50ZWdyYXRpb24uRmF4JywgWydDb21tb24nLCAnQ29tbW9uLlNlcnZpY2VzJ10pOyIsImFuZ3VsYXIubW9kdWxlKFwiQWRtaW4uSW50ZWdyYXRpb24uS25vdzJhY3RcIikuY29udHJvbGxlcignQWRtaW4uSW50ZWdyYXRpb24uS25vdzJhY3QuazJhQ29uZmlnQ29udHJvbGxlcicsIFtcblx0XCJrMmFTZXJ2aWNlXCIsXG5cdGZ1bmN0aW9uIChrMmFTZXJ2aWNlKVxuXHR7XG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29udHJvbGxlci5QcmV2TGlzdFF1YW50aXR5ID0gMTA7XG5cdFx0Y29udHJvbGxlci5hdmFpbGFibGVQcmV2ZW50aW9uUnVsZVNldHMgPSBbXTtcblx0XHRjb250cm9sbGVyLmN1cnJlbnRQcmV2ZW50aW9uUnVsZXNTZXQgPSBbXTtcblx0XHRjb250cm9sbGVyLmNsaW5pY05hbWUgPSBcIlwiO1xuXHRcdGNvbnRyb2xsZXIuazJhQWN0aXZlID0gZmFsc2U7XG5cblx0XHRjb250cm9sbGVyLmNoZWNrU3RhdHVzID0gZnVuY3Rpb24gKClcblx0XHR7XG5cdFx0XHRrMmFTZXJ2aWNlLmlzSzJBSW5pdCgpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuazJhQWN0aXZlID0gZGF0YTtcblx0XHRcdFx0XHRpZiAoY29udHJvbGxlci5rMmFBY3RpdmUpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5nZXRQcmV2ZW50aW9uUnVsZXNMaXN0KCk7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmdldEN1cnJlbnRQcmV2ZW50aW9uUnVsZXNWZXJzaW9uKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBmYWlsdXJlKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdFx0YWxlcnQoXCJGYWlsZWQgdG8gdmVyaWZ5IEsyQSBTdGF0dXNcIik7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLmNoZWNrU3RhdHVzKCk7XG5cblx0XHRjb250cm9sbGVyLmdldFByZXZlbnRpb25SdWxlc0xpc3QgPSBmdW5jdGlvbiAoKVxuXHRcdHtcblx0XHRcdGsyYVNlcnZpY2UucHJldmVudGlvblJ1bGVzTGlzdCgpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuYXZhaWxhYmxlUHJldmVudGlvblJ1bGVTZXRzID0gZGF0YTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImF2YWlsYWJsZVByZXZlbnRpb25SdWxlU2V0c1wiLCBjb250cm9sbGVyLmF2YWlsYWJsZVByZXZlbnRpb25SdWxlU2V0cyk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGZhaWx1cmUoZXJyb3IpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZXRDdXJyZW50UHJldmVudGlvblJ1bGVzVmVyc2lvbiA9IGZ1bmN0aW9uICgpXG5cdFx0e1xuXHRcdFx0azJhU2VydmljZS5nZXRDdXJyZW50UHJldmVudGlvblJ1bGVzVmVyc2lvbigpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuY3VycmVudFByZXZlbnRpb25SdWxlc1NldCA9IGRhdGE7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJjdXJyZW50UHJldmVudGlvblJ1bGVzU2V0XCIsIGRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBmYWlsdXJlKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIubG9hZFByZXZlbnRpb25SdWxlQnlJZCA9IGZ1bmN0aW9uIChwcmV2U2V0KVxuXHRcdHtcblxuXHRcdFx0Ly8gaWYgKGNvbmZpcm0oXCI8YmVhbjptZXNzYWdlIGtleT1cImFkbWluLmsyYS5jb25maXJtYXRpb25cIi8+XCIpKSB7XG5cdFx0XHQvLyBwcmV2U2V0LmFncmVlbWVudCA9IFwiPGJlYW46bWVzc2FnZSBrZXk9XCJhZG1pbi5rMmEuY29uZmlybWF0aW9uXCIvPlwiO1xuXHRcdFx0azJhU2VydmljZS5sb2FkUHJldmVudGlvblJ1bGVCeUlkKHByZXZTZXQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdGsyYVNlcnZpY2UuZ2V0Q3VycmVudFByZXZlbnRpb25SdWxlc1ZlcnNpb24oKTtcblx0XHRcdH0pO1xuXHRcdFx0Ly8gfVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmluY3JlYXNlUHJldkxpc3RRdWFudGl0eSA9IGZ1bmN0aW9uICgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5QcmV2TGlzdFF1YW50aXR5ID0gY29udHJvbGxlci5hdmFpbGFibGVQcmV2ZW50aW9uUnVsZVNldHMubGVuZ3RoO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmluaXRLMkEgPSBmdW5jdGlvbiAoKVxuXHRcdHtcblx0XHRcdGsyYVNlcnZpY2UuaW5pdEsyQShjb250cm9sbGVyLmNsaW5pY05hbWUpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmluZm8oXCJJbml0IGNvbXBsZXRlLCBjaGVjayBzdGF0dXNcIiwgcmVzcG9uc2UpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuY2hlY2tTdGF0dXMoKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZmFpbHVyZShlcnJvcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdFx0XHRhbGVydChcIkZhaWxlZCB0byBpbml0aWFsaXplIEsyQVwiKTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblx0XHR9XG5cdH1cbl0pOyIsImFuZ3VsYXIubW9kdWxlKFwiQWRtaW4uSW50ZWdyYXRpb24uS25vdzJhY3RcIikuY29udHJvbGxlcignQWRtaW4uSW50ZWdyYXRpb24uS25vdzJhY3QuazJhTm90aWZpY2F0aW9uQ29udHJvbGxlcicsIFtcblx0XCJrMmFTZXJ2aWNlXCIsXG5cdGZ1bmN0aW9uIChrMmFTZXJ2aWNlKVxuXHR7XG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXHRcdGNvbnRyb2xsZXIucGFnZSA9IHt9O1xuXHRcdGNvbnRyb2xsZXIucGFnZS5ub3RpZmljYXRpb25zID0gW107XG5cblx0XHRjb250cm9sbGVyLnJlYWRNb3JlID0gZnVuY3Rpb24gKG5vdGlmKSB7XG5cdFx0XHRrMmFTZXJ2aWNlLmdldE1vcmVOb3RpZmljYXRpb24obm90aWYpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuXHRcdFx0XHRcdHZhciB3aW4gPSB3aW5kb3cub3BlbihkYXRhLCAnbW9yZUluZm8nLCAnd2lkdGg9NzAwLGhlaWdodD03MDAnKTtcblx0XHRcdFx0XHR3aW4uZm9jdXMoKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZmFpbHVyZShlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXIuYXJjaGl2ZSA9IGZ1bmN0aW9uIChub3RpZikge1xuXHRcdFx0azJhU2VydmljZS5hY2tOb3RpZmljYXRpb24obm90aWYpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuZ2V0Tm90aWZpY2F0aW9ucygpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBmYWlsdXJlKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdFx0YWxlcnQoXCJGYWlsZWQgdG8gYWNrbm93bGVkZ2Ugbm90aWZpY2F0aW9uXCIpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXIuZ2V0Tm90aWZpY2F0aW9ucyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdGsyYVNlcnZpY2UuZ2V0Tm90aWZpY2F0aW9ucygpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5ub3RpZmljYXRpb25zID0gZGF0YTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZmFpbHVyZShlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHRcdGFsZXJ0KFwiRmFpbGVkIHRvIGxvYWQgbm90aWZpY2F0aW9uc1wiKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLmdldE5vdGlmaWNhdGlvbnMoKTtcblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoXCJBZG1pbi5JbnRlZ3JhdGlvbi5Lbm93MmFjdFwiKS5jb250cm9sbGVyKCdBZG1pbi5JbnRlZ3JhdGlvbi5Lbm93MmFjdC5rMmFUZW1wbGF0ZUNvbnRyb2xsZXInLCBbXG5cdFwicmVwb3J0QnlUZW1wbGF0ZVNlcnZpY2VcIixcblx0XCJrMmFTZXJ2aWNlXCIsXG5cdGZ1bmN0aW9uIChyZXBvcnRCeVRlbXBsYXRlU2VydmljZSxcblx0ICAgICAgICAgIGsyYVNlcnZpY2UpXG5cdHtcblx0XHR2YXIgY29udHJvbGxlciA9IHRoaXM7XG5cblx0XHRjb250cm9sbGVyLm1lc3NhZ2UgPSBcIlwiO1xuXHRcdGNvbnRyb2xsZXIuazJhQWN0aXZlID0gZmFsc2U7XG5cdFx0Y29udHJvbGxlci5rMmFSZXBvcnRzID0gbnVsbDtcblx0XHRjb250cm9sbGVyLksyQV9VUkwgPSBcIlwiO1xuXG5cdFx0Y29udHJvbGxlci5kdE9wdGlvbnMgPSB7fTtcblx0XHQvLyBjb250cm9sbGVyLmR0T3B0aW9ucyA9IERUT3B0aW9uc0J1aWxkZXIubmV3T3B0aW9ucygpLndpdGhPcHRpb24oJ29yZGVyJywgWzEsICdhc2MnXSk7XG5cblx0XHRjb250cm9sbGVyLmNoZWNrU3RhdHVzID0gZnVuY3Rpb24gY2hlY2tTdGF0dXMoKSB7XG5cdFx0XHRrMmFTZXJ2aWNlLmlzSzJBSW5pdCgpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuazJhQWN0aXZlID0gZGF0YTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZmFpbHVyZShlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHRcdGFsZXJ0KFwiRmFpbGVkIHRvIHZlcmlmeSBLMkEgU3RhdHVzXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdH07XG5cdFx0Y29udHJvbGxlci5jaGVja1N0YXR1cygpO1xuXG5cdFx0Y29udHJvbGxlci5nZXRBbGxLMkFSZXBvcnRzID0gZnVuY3Rpb24gZ2V0QWxsSzJBUmVwb3J0cygpe1xuXHRcdFx0cmVwb3J0QnlUZW1wbGF0ZVNlcnZpY2UuZ2V0QWxsSzJBUmVwb3J0cygpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdGNvbnRyb2xsZXIuazJhUmVwb3J0cyA9IGRhdGE7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiazJhIHJlcG9ydHNcIiwgY29udHJvbGxlci5rMmFSZXBvcnRzKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdFx0Y29udHJvbGxlci5nZXRBbGxLMkFSZXBvcnRzKCk7XG5cblx0XHRjb250cm9sbGVyLnNhdmVLMkFSZXBvcnQgPSBmdW5jdGlvbiBzYXZlSzJBUmVwb3J0KGlkKXtcblx0XHRcdHJlcG9ydEJ5VGVtcGxhdGVTZXJ2aWNlLmdldEsyQVJlcG9ydEJ5SWQoaWQpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdGNvbnRyb2xsZXIubWVzc2FnZSA9IGRhdGE7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGNvbnRyb2xsZXIubWVzc2FnZSk7XG5cdFx0XHRcdHJlZnJlc2hQYXJlbnQoKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLm9wZW5LMkFVcmwgPSBmdW5jdGlvbiBvcGVuSzJBVXJsKCkge1xuXHRcdFx0cmVwb3J0QnlUZW1wbGF0ZVNlcnZpY2UuZ2V0SzJBVXJsKCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG5cdFx0XHRcdFx0d2luZG93Lm9wZW4oZGF0YSArIFwiLyMvd3MvcnMvcG9zdHMvYnJvd3NlL1JlcG9ydFwiKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZmFpbHVyZShlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucmVmcmVzaFBhcmVudCA9IGZ1bmN0aW9uIHJlZnJlc2hQYXJlbnQoKSB7XG5cdFx0XHR3aW5kb3cub3BlbmVyLmRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSBcIi4uLy4uLy4uLy4uL29zY2FyUmVwb3J0L3JlcG9ydEJ5VGVtcGxhdGUvaG9tZVBhZ2UuanNwXCI7XG5cdFx0fTtcblx0XHR3aW5kb3cub251bmxvYWQgPSBjb250cm9sbGVyLnJlZnJlc2hQYXJlbnQoKTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQWRtaW4uSW50ZWdyYXRpb24uS25vdzJhY3QnLCBbJ0NvbW1vbicsICdDb21tb24uU2VydmljZXMnXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQWRtaW4uSW50ZWdyYXRpb24nLCBbJ0NvbW1vbicsICdDb21tb24uU2VydmljZXMnXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQWRtaW4nLCBbJ0NvbW1vbicsICdDb21tb24uU2VydmljZXMnXSk7IiwiYW5ndWxhci5tb2R1bGUoJ29zY2FyUHJvdmlkZXJWaWV3TW9kdWxlJykuY29udHJvbGxlcignQmlsbGluZ0N0cmwnLCBbICckc2NvcGUnLCAnJGh0dHAnLCBmdW5jdGlvbiAoJHNjb3BlLCRodHRwKSB7XG5cbn1dKTtcbiIsIi8qXHJcbiogIEFuZ3VsYXJKcyBGdWxsY2FsZW5kYXIgV3JhcHBlciBmb3IgdGhlIEpRdWVyeSBGdWxsQ2FsZW5kYXJcclxuKiAgQVBJIEAgaHR0cDovL2Fyc2hhdy5jb20vZnVsbGNhbGVuZGFyL1xyXG4qXHJcbiogIEFuZ3VsYXIgQ2FsZW5kYXIgRGlyZWN0aXZlIHRoYXQgdGFrZXMgaW4gdGhlIFtldmVudFNvdXJjZXNdIG5lc3RlZCBhcnJheSBvYmplY3QgYXMgdGhlIG5nLW1vZGVsIGFuZCB3YXRjaGVzIGl0IGRlZXBseSBjaGFuZ2VzLlxyXG4qICAgICAgIENhbiBhbHNvIHRha2UgaW4gbXVsdGlwbGUgZXZlbnQgdXJscyBhcyBhIHNvdXJjZSBvYmplY3QocykgYW5kIGZlZWQgdGhlIGV2ZW50cyBwZXIgdmlldy5cclxuKiAgICAgICBUaGUgY2FsZW5kYXIgd2lsbCB3YXRjaCBhbnkgZXZlbnRTb3VyY2UgYXJyYXkgYW5kIHVwZGF0ZSBpdHNlbGYgd2hlbiBhIGNoYW5nZSBpcyBtYWRlLlxyXG4qXHJcbiovXHJcblxyXG4vKlxyXG4gKiBDb3BpZWQgYW5kIG1vZGlmaWVkIGZvciB1c2UgYXQgQ2xvdWRwcmFjdGljZSBiZWNhdXNlIEkgY291bGRuJ3QgZmlndXJlIG91dCBob3cgdG8ga2VlcCBpdCBmcm9tXHJcbiAqIGxvYWRpbmcgYmVmb3JlIG91ciBpbml0aWFsaXphdGlvbiB3YXMgZG9uZS4gIEkndmUgbWFya2VkIHRoZSBjaGFuZ2VzIHdpdGggYSBDUCBiZWxvdy5cclxuICovXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgndWkuY2FsZW5kYXInLCBbXSlcclxuICAuY29uc3RhbnQoJ3VpQ2FsZW5kYXJDb25maWcnLCB7Y2FsZW5kYXJzOiB7fX0pXHJcbiAgLmNvbnRyb2xsZXIoJ3VpQ2FsZW5kYXJDdHJsJywgWyckc2NvcGUnLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyRsb2NhbGUnLCBmdW5jdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbG9jYWxlKXtcclxuXHJcbiAgICAgIHZhciBzb3VyY2VzID0gJHNjb3BlLmV2ZW50U291cmNlcyxcclxuICAgICAgICAgIGV4dHJhRXZlbnRTaWduYXR1cmUgPSAkc2NvcGUuY2FsZW5kYXJXYXRjaEV2ZW50ID8gJHNjb3BlLmNhbGVuZGFyV2F0Y2hFdmVudCA6IGFuZ3VsYXIubm9vcCxcclxuXHJcbiAgICAgICAgICB3cmFwRnVuY3Rpb25XaXRoU2NvcGVBcHBseSA9IGZ1bmN0aW9uKGZ1bmN0aW9uVG9XcmFwKXtcclxuICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgLy8gVGhpcyBtYXkgaGFwcGVuIG91dHNpZGUgb2YgYW5ndWxhciBjb250ZXh0LCBzbyBjcmVhdGUgb25lIGlmIG91dHNpZGUuXHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLiRyb290LiQkcGhhc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvblRvV3JhcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLiRyb290LiRhcHBseShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvblRvV3JhcC5hcHBseShzZWxmLCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICB2YXIgZXZlbnRTZXJpYWxJZCA9IDE7XHJcbiAgICAgIC8vIEByZXR1cm4ge1N0cmluZ30gZmluZ2VycHJpbnQgb2YgdGhlIGV2ZW50IG9iamVjdCBhbmQgaXRzIHByb3BlcnRpZXNcclxuICAgICAgdGhpcy5ldmVudEZpbmdlcnByaW50ID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmICghZS5faWQpIHtcclxuICAgICAgICAgIGUuX2lkID0gZXZlbnRTZXJpYWxJZCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB2YXIgZXh0cmFTaWduYXR1cmUgPSBleHRyYUV2ZW50U2lnbmF0dXJlKHtldmVudDogZX0pIHx8ICcnO1xyXG4gICAgICAgIHZhciBzdGFydCA9IG1vbWVudC5pc01vbWVudChlLnN0YXJ0KSA/IGUuc3RhcnQudW5peCgpIDogKGUuc3RhcnQgPyBtb21lbnQoZS5zdGFydCkudW5peCgpIDogJycpO1xyXG4gICAgICAgIHZhciBlbmQgPSAgIG1vbWVudC5pc01vbWVudChlLmVuZCkgICA/IGUuZW5kLnVuaXgoKSAgIDogKGUuZW5kICAgPyBtb21lbnQoZS5lbmQpLnVuaXgoKSAgIDogJycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRoaXMgZXh0cmFjdHMgYWxsIHRoZSBpbmZvcm1hdGlvbiB3ZSBuZWVkIGZyb20gdGhlIGV2ZW50LiBodHRwOi8vanNwZXJmLmNvbS9hbmd1bGFyLWNhbGVuZGFyLWV2ZW50cy1maW5nZXJwcmludC8zXHJcbiAgICAgICAgcmV0dXJuIFwiXCIgKyBlLl9pZCArIChlLmlkIHx8ICcnKSArIChlLnRpdGxlIHx8ICcnKSArIChlLnVybCB8fCAnJykgKyBzdGFydCArIGVuZCArXHJcbiAgICAgICAgICAoZS5hbGxEYXkgfHwgJycpICsgKGUuY2xhc3NOYW1lIHx8ICcnKSArIGV4dHJhU2lnbmF0dXJlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIHNvdXJjZVNlcmlhbElkID0gMSwgc291cmNlRXZlbnRzU2VyaWFsSWQgPSAxO1xyXG4gICAgICAvLyBAcmV0dXJuIHtTdHJpbmd9IGZpbmdlcnByaW50IG9mIHRoZSBzb3VyY2Ugb2JqZWN0IGFuZCBpdHMgZXZlbnRzIGFycmF5XHJcbiAgICAgIHRoaXMuc291cmNlRmluZ2VycHJpbnQgPSBmdW5jdGlvbihzb3VyY2UpIHtcclxuICAgICAgICAgIHZhciBmcCA9ICcnICsgKHNvdXJjZS5fX2lkIHx8IChzb3VyY2UuX19pZCA9IHNvdXJjZVNlcmlhbElkKyspKSxcclxuICAgICAgICAgICAgICBldmVudHMgPSBhbmd1bGFyLmlzT2JqZWN0KHNvdXJjZSkgJiYgc291cmNlLmV2ZW50cztcclxuICAgICAgICAgIGlmIChldmVudHMpIHtcclxuICAgICAgICAgICAgICBmcCA9IGZwICsgJy0nICsgKGV2ZW50cy5fX2lkIHx8IChldmVudHMuX19pZCA9IHNvdXJjZUV2ZW50c1NlcmlhbElkKyspKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBmcDtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEByZXR1cm4ge0FycmF5fSBhbGwgZXZlbnRzIGZyb20gYWxsIHNvdXJjZXNcclxuICAgICAgdGhpcy5hbGxFdmVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBkbyBzb3VyY2VzLm1hcCgmOmV2ZW50cykuZmxhdHRlbigpLCBidXQgd2UgZG9uJ3QgaGF2ZSBmbGF0dGVuXHJcbiAgICAgICAgdmFyIGFycmF5U291cmNlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBzcmNMZW4gPSBzb3VyY2VzLmxlbmd0aDsgaSA8IHNyY0xlbjsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgc291cmNlID0gc291cmNlc1tpXTtcclxuICAgICAgICAgIGlmIChhbmd1bGFyLmlzQXJyYXkoc291cmNlKSkge1xyXG4gICAgICAgICAgICAvLyBldmVudCBzb3VyY2UgYXMgYXJyYXlcclxuICAgICAgICAgICAgYXJyYXlTb3VyY2VzLnB1c2goc291cmNlKTtcclxuICAgICAgICAgIH0gZWxzZSBpZihhbmd1bGFyLmlzT2JqZWN0KHNvdXJjZSkgJiYgYW5ndWxhci5pc0FycmF5KHNvdXJjZS5ldmVudHMpKXtcclxuICAgICAgICAgICAgLy8gZXZlbnQgc291cmNlIGFzIG9iamVjdCwgaWUgZXh0ZW5kZWQgZm9ybVxyXG4gICAgICAgICAgICB2YXIgZXh0RXZlbnQgPSB7fTtcclxuICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gc291cmNlKXtcclxuICAgICAgICAgICAgICBpZihrZXkgIT09ICdfaWQnICYmIGtleSAhPT0gJ2V2ZW50cycpe1xyXG4gICAgICAgICAgICAgICAgIGV4dEV2ZW50W2tleV0gPSBzb3VyY2Vba2V5XTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yKHZhciBlSSA9IDA7ZUkgPCBzb3VyY2UuZXZlbnRzLmxlbmd0aDtlSSsrKXtcclxuICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChzb3VyY2UuZXZlbnRzW2VJXSxleHRFdmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXJyYXlTb3VyY2VzLnB1c2goc291cmNlLmV2ZW50cyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcnJheVNvdXJjZXMpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gVHJhY2sgY2hhbmdlcyBpbiBhcnJheSBvZiBvYmplY3RzIGJ5IGFzc2lnbmluZyBpZCB0b2tlbnMgdG8gZWFjaCBlbGVtZW50IGFuZCB3YXRjaGluZyB0aGUgc2NvcGUgZm9yIGNoYW5nZXMgaW4gdGhlIHRva2Vuc1xyXG4gICAgICAvLyBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBhcnJheVNvdXJjZSBhcnJheSBvZiBvYmplY3RzIHRvIHdhdGNoXHJcbiAgICAgIC8vIEBwYXJhbSB0b2tlbkZuIHtGdW5jdGlvbn0gdGhhdCByZXR1cm5zIHRoZSB0b2tlbiBmb3IgYSBnaXZlbiBvYmplY3RcclxuICAgICAgLy8gQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICAvLyAgc3Vic2NyaWJlOiBmdW5jdGlvbihzY29wZSwgZnVuY3Rpb24obmV3VG9rZW5zLCBvbGRUb2tlbnMpKVxyXG4gICAgICAvLyAgICBjYWxsZWQgd2hlbiBzb3VyY2UgaGFzIGNoYW5nZWQuIHJldHVybiBmYWxzZSB0byBwcmV2ZW50IGluZGl2aWR1YWwgY2FsbGJhY2tzIGZyb20gZmlyaW5nXHJcbiAgICAgIC8vICBvbkFkZGVkL1JlbW92ZWQvQ2hhbmdlZDpcclxuICAgICAgLy8gICAgd2hlbiBzZXQgdG8gYSBjYWxsYmFjaywgY2FsbGVkIGVhY2ggaXRlbSB3aGVyZSBhIHJlc3BlY3RpdmUgY2hhbmdlIGlzIGRldGVjdGVkXHJcbiAgICAgIHRoaXMuY2hhbmdlV2F0Y2hlciA9IGZ1bmN0aW9uKGFycmF5U291cmNlLCB0b2tlbkZuKSB7XHJcbiAgICAgICAgdmFyIHNlbGY7XHJcbiAgICAgICAgdmFyIGdldFRva2VucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIGFycmF5ID0gYW5ndWxhci5pc0Z1bmN0aW9uKGFycmF5U291cmNlKSA/IGFycmF5U291cmNlKCkgOiBhcnJheVNvdXJjZTtcclxuICAgICAgICAgIHZhciByZXN1bHQgPSBbXSwgdG9rZW4sIGVsO1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBhcnJheS5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgZWwgPSBhcnJheVtpXTtcclxuICAgICAgICAgICAgdG9rZW4gPSB0b2tlbkZuKGVsKTtcclxuICAgICAgICAgICAgbWFwW3Rva2VuXSA9IGVsO1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaCh0b2tlbik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEBwYXJhbSB7QXJyYXl9IGFcclxuICAgICAgICAvLyBAcGFyYW0ge0FycmF5fSBiXHJcbiAgICAgICAgLy8gQHJldHVybiB7QXJyYXl9IGVsZW1lbnRzIGluIHRoYXQgYXJlIGluIGEgYnV0IG5vdCBpbiBiXHJcbiAgICAgICAgLy8gQGV4YW1wbGVcclxuICAgICAgICAvLyAgc3VidHJhY3RBc1NldHMoWzYsIDEwMCwgNCwgNV0sIFs0LCA1LCA3XSkgLy8gWzYsIDEwMF1cclxuICAgICAgICB2YXIgc3VidHJhY3RBc1NldHMgPSBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gW10sIGluQiA9IHt9LCBpLCBuO1xyXG4gICAgICAgICAgZm9yIChpID0gMCwgbiA9IGIubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGluQltiW2ldXSA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBmb3IgKGkgPSAwLCBuID0gYS5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCFpbkJbYVtpXV0pIHtcclxuICAgICAgICAgICAgICByZXN1bHQucHVzaChhW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBNYXAgb2JqZWN0cyB0byB0b2tlbnMgYW5kIHZpY2UtdmVyc2FcclxuICAgICAgICB2YXIgbWFwID0ge307XHJcblxyXG4gICAgICAgIC8vIENvbXBhcmUgbmV3VG9rZW5zIHRvIG9sZFRva2VucyBhbmQgY2FsbCBvbkFkZGVkLCBvblJlbW92ZWQsIGFuZCBvbkNoYW5nZWQgaGFuZGxlcnMgZm9yIGVhY2ggYWZmZWN0ZWQgZXZlbnQgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgIHZhciBhcHBseUNoYW5nZXMgPSBmdW5jdGlvbihuZXdUb2tlbnMsIG9sZFRva2Vucykge1xyXG4gICAgICAgICAgdmFyIGksIG4sIGVsLCB0b2tlbjtcclxuICAgICAgICAgIHZhciByZXBsYWNlZFRva2VucyA9IHt9O1xyXG4gICAgICAgICAgdmFyIHJlbW92ZWRUb2tlbnMgPSBzdWJ0cmFjdEFzU2V0cyhvbGRUb2tlbnMsIG5ld1Rva2Vucyk7XHJcbiAgICAgICAgICBmb3IgKGkgPSAwLCBuID0gcmVtb3ZlZFRva2Vucy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHJlbW92ZWRUb2tlbiA9IHJlbW92ZWRUb2tlbnNbaV07XHJcbiAgICAgICAgICAgIGVsID0gbWFwW3JlbW92ZWRUb2tlbl07XHJcbiAgICAgICAgICAgIGRlbGV0ZSBtYXBbcmVtb3ZlZFRva2VuXTtcclxuICAgICAgICAgICAgdmFyIG5ld1Rva2VuID0gdG9rZW5GbihlbCk7XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IHdhc24ndCByZW1vdmVkIGJ1dCBzaW1wbHkgZ290IGEgbmV3IHRva2VuLCBpdHMgb2xkIHRva2VuIHdpbGwgYmUgZGlmZmVyZW50IGZyb20gdGhlIGN1cnJlbnQgb25lXHJcbiAgICAgICAgICAgIGlmIChuZXdUb2tlbiA9PT0gcmVtb3ZlZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgc2VsZi5vblJlbW92ZWQoZWwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJlcGxhY2VkVG9rZW5zW25ld1Rva2VuXSA9IHJlbW92ZWRUb2tlbjtcclxuICAgICAgICAgICAgICBzZWxmLm9uQ2hhbmdlZChlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgYWRkZWRUb2tlbnMgPSBzdWJ0cmFjdEFzU2V0cyhuZXdUb2tlbnMsIG9sZFRva2Vucyk7XHJcbiAgICAgICAgICBmb3IgKGkgPSAwLCBuID0gYWRkZWRUb2tlbnMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRva2VuID0gYWRkZWRUb2tlbnNbaV07XHJcbiAgICAgICAgICAgIGVsID0gbWFwW3Rva2VuXTtcclxuICAgICAgICAgICAgaWYgKCFyZXBsYWNlZFRva2Vuc1t0b2tlbl0pIHtcclxuICAgICAgICAgICAgICBzZWxmLm9uQWRkZWQoZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gc2VsZiA9IHtcclxuICAgICAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24oc2NvcGUsIG9uQXJyYXlDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaChnZXRUb2tlbnMsIGZ1bmN0aW9uKG5ld1Rva2Vucywgb2xkVG9rZW5zKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG5vdGlmeSA9ICEob25BcnJheUNoYW5nZWQgJiYgb25BcnJheUNoYW5nZWQobmV3VG9rZW5zLCBvbGRUb2tlbnMpID09PSBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgaWYgKG5vdGlmeSkge1xyXG4gICAgICAgICAgICAgICAgYXBwbHlDaGFuZ2VzKG5ld1Rva2Vucywgb2xkVG9rZW5zKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHRydWUpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG9uQWRkZWQ6IGFuZ3VsYXIubm9vcCxcclxuICAgICAgICAgIG9uQ2hhbmdlZDogYW5ndWxhci5ub29wLFxyXG4gICAgICAgICAgb25SZW1vdmVkOiBhbmd1bGFyLm5vb3BcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5nZXRGdWxsQ2FsZW5kYXJDb25maWcgPSBmdW5jdGlvbihjYWxlbmRhclNldHRpbmdzLCB1aUNhbGVuZGFyQ29uZmlnKXtcclxuICAgICAgICAgIHZhciBjb25maWcgPSB7fTtcclxuXHJcbiAgICAgICAgICBhbmd1bGFyLmV4dGVuZChjb25maWcsIHVpQ2FsZW5kYXJDb25maWcpO1xyXG4gICAgICAgICAgYW5ndWxhci5leHRlbmQoY29uZmlnLCBjYWxlbmRhclNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2goY29uZmlnLCBmdW5jdGlvbih2YWx1ZSxrZXkpe1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKXtcclxuICAgICAgICAgICAgICBjb25maWdba2V5XSA9IHdyYXBGdW5jdGlvbldpdGhTY29wZUFwcGx5KGNvbmZpZ1trZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgfTtcclxuXHJcbiAgICB0aGlzLmdldExvY2FsZUNvbmZpZyA9IGZ1bmN0aW9uKGZ1bGxDYWxlbmRhckNvbmZpZykge1xyXG4gICAgICBpZiAoIWZ1bGxDYWxlbmRhckNvbmZpZy5sYW5nIHx8IGZ1bGxDYWxlbmRhckNvbmZpZy51c2VOZ0xvY2FsZSkge1xyXG4gICAgICAgIC8vIENvbmZpZ3VyZSB0byB1c2UgbG9jYWxlIG5hbWVzIGJ5IGRlZmF1bHRcclxuICAgICAgICB2YXIgdFZhbHVlcyA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgIC8vIGNvbnZlcnQgezA6IFwiSmFuXCIsIDE6IFwiRmViXCIsIC4uLn0gdG8gW1wiSmFuXCIsIFwiRmViXCIsIC4uLl1cclxuICAgICAgICAgIHZhciByLCBrO1xyXG4gICAgICAgICAgciA9IFtdO1xyXG4gICAgICAgICAgZm9yIChrIGluIGRhdGEpIHtcclxuICAgICAgICAgICAgcltrXSA9IGRhdGFba107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBkdGYgPSAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFM7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG1vbnRoTmFtZXM6IHRWYWx1ZXMoZHRmLk1PTlRIKSxcclxuICAgICAgICAgIG1vbnRoTmFtZXNTaG9ydDogdFZhbHVlcyhkdGYuU0hPUlRNT05USCksXHJcbiAgICAgICAgICBkYXlOYW1lczogdFZhbHVlcyhkdGYuREFZKSxcclxuICAgICAgICAgIGRheU5hbWVzU2hvcnQ6IHRWYWx1ZXMoZHRmLlNIT1JUREFZKVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfTtcclxuICB9XSlcclxuICAuZGlyZWN0aXZlKCd1aUNhbGVuZGFyJywgWyd1aUNhbGVuZGFyQ29uZmlnJywgZnVuY3Rpb24odWlDYWxlbmRhckNvbmZpZykge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgc2NvcGU6IHtcclxuICAgICAgICBldmVudFNvdXJjZXM6Jz1uZ01vZGVsJyxcclxuICAgICAgICBjYWxlbmRhcldhdGNoRXZlbnQ6ICcmJyxcclxuICAgICAgICBlbmFibGVkOiAnPW5nRW5hYmxlZCcgICAgIC8vIENQOiBBZGRlZCBhbiBvcHRpb24gdG8gZW5hYmxlIHRoZSBjYWxlbmRhclxyXG4gICAgICB9LFxyXG4gICAgICBjb250cm9sbGVyOiAndWlDYWxlbmRhckN0cmwnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRycywgY29udHJvbGxlcikge1xyXG5cclxuICAgICAgICB2YXIgc291cmNlcyA9IHNjb3BlLmV2ZW50U291cmNlcyxcclxuICAgICAgICAgICAgc291cmNlc0NoYW5nZWQgPSBmYWxzZSxcclxuICAgICAgICAgICAgY2FsZW5kYXIsXHJcbiAgICAgICAgICAgIGV2ZW50U291cmNlc1dhdGNoZXIgPSBjb250cm9sbGVyLmNoYW5nZVdhdGNoZXIoc291cmNlcywgY29udHJvbGxlci5zb3VyY2VGaW5nZXJwcmludCksXHJcbiAgICAgICAgICAgIGV2ZW50c1dhdGNoZXIgPSBjb250cm9sbGVyLmNoYW5nZVdhdGNoZXIoY29udHJvbGxlci5hbGxFdmVudHMsIGNvbnRyb2xsZXIuZXZlbnRGaW5nZXJwcmludCksXHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRPcHRpb25zKCl7XHJcbiAgICAgICAgICB2YXIgY2FsZW5kYXJTZXR0aW5ncyA9IGF0dHJzLnVpQ2FsZW5kYXIgPyBzY29wZS4kcGFyZW50LiRldmFsKGF0dHJzLnVpQ2FsZW5kYXIpIDoge30sXHJcbiAgICAgICAgICAgICAgZnVsbENhbGVuZGFyQ29uZmlnO1xyXG5cclxuICAgICAgICAgIGZ1bGxDYWxlbmRhckNvbmZpZyA9IGNvbnRyb2xsZXIuZ2V0RnVsbENhbGVuZGFyQ29uZmlnKGNhbGVuZGFyU2V0dGluZ3MsIHVpQ2FsZW5kYXJDb25maWcpO1xyXG5cclxuICAgICAgICAgIHZhciBsb2NhbGVGdWxsQ2FsZW5kYXJDb25maWcgPSBjb250cm9sbGVyLmdldExvY2FsZUNvbmZpZyhmdWxsQ2FsZW5kYXJDb25maWcpO1xyXG4gICAgICAgICAgYW5ndWxhci5leHRlbmQobG9jYWxlRnVsbENhbGVuZGFyQ29uZmlnLCBmdWxsQ2FsZW5kYXJDb25maWcpO1xyXG4gICAgICAgICAgb3B0aW9ucyA9IHsgZXZlbnRTb3VyY2VzOiBzb3VyY2VzIH07XHJcbiAgICAgICAgICBhbmd1bGFyLmV4dGVuZChvcHRpb25zLCBsb2NhbGVGdWxsQ2FsZW5kYXJDb25maWcpO1xyXG4gICAgICAgICAgLy9yZW1vdmUgY2FsZW5kYXJzIGZyb20gb3B0aW9uc1xyXG4gICAgICAgICAgb3B0aW9ucy5jYWxlbmRhcnMgPSBudWxsO1xyXG5cclxuICAgICAgICAgIHZhciBvcHRpb25zMiA9IHt9O1xyXG4gICAgICAgICAgZm9yKHZhciBvIGluIG9wdGlvbnMpe1xyXG4gICAgICAgICAgICBpZihvICE9PSAnZXZlbnRTb3VyY2VzJyl7XHJcbiAgICAgICAgICAgICAgb3B0aW9uczJbb10gPSBvcHRpb25zW29dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob3B0aW9uczIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2NvcGUuZGVzdHJveUNhbGVuZGFyID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgIGlmKGNhbGVuZGFyICYmIGNhbGVuZGFyLmZ1bGxDYWxlbmRhcil7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyLmZ1bGxDYWxlbmRhcignZGVzdHJveScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYoYXR0cnMuY2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgY2FsZW5kYXIgPSB1aUNhbGVuZGFyQ29uZmlnLmNhbGVuZGFyc1thdHRycy5jYWxlbmRhcl0gPSAkKGVsbSkuaHRtbCgnJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYWxlbmRhciA9ICQoZWxtKS5odG1sKCcnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzY29wZS5pbml0Q2FsZW5kYXIgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgLy8gQ1A6IFRoZSBjYWxlbmRhciB3b24ndCBpbml0aWFsaXplIHdoZW4gaXQncyBub3QgZW5hYmxlZFxyXG4gICAgICAgICAgaWYoc2NvcGUuZW5hYmxlZCkge1xyXG5cdFx0ICAgIGlmICghY2FsZW5kYXIpIHtcclxuXHRcdCAgICAgIGNhbGVuZGFyID0gYW5ndWxhci5lbGVtZW50KGVsbSkuaHRtbCgnJyk7XHJcblx0XHQgICAgfVxyXG5cdFx0ICAgIGNhbGVuZGFyLmZ1bGxDYWxlbmRhcihvcHRpb25zKTtcclxuXHRcdCAgICBpZihhdHRycy5jYWxlbmRhcikge1xyXG5cdFx0ICAgICAgdWlDYWxlbmRhckNvbmZpZy5jYWxlbmRhcnNbYXR0cnMuY2FsZW5kYXJdID0gY2FsZW5kYXI7XHJcblx0XHQgICAgfVxyXG5cdFx0ICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzY29wZS5kZXN0cm95Q2FsZW5kYXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZXZlbnRTb3VyY2VzV2F0Y2hlci5vbkFkZGVkID0gZnVuY3Rpb24oc291cmNlKSB7XHJcbiAgICAgICAgICBpZiAoY2FsZW5kYXIgJiYgY2FsZW5kYXIuZnVsbENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyLmZ1bGxDYWxlbmRhcihvcHRpb25zKTtcclxuICAgICAgICAgICAgaWYgKGF0dHJzLmNhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgICAgICB1aUNhbGVuZGFyQ29uZmlnLmNhbGVuZGFyc1thdHRycy5jYWxlbmRhcl0gPSBjYWxlbmRhcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYWxlbmRhci5mdWxsQ2FsZW5kYXIoJ2FkZEV2ZW50U291cmNlJywgc291cmNlKTtcclxuICAgICAgICAgICAgc291cmNlc0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGV2ZW50U291cmNlc1dhdGNoZXIub25SZW1vdmVkID0gZnVuY3Rpb24oc291cmNlKSB7XHJcbiAgICAgICAgICBpZiAoY2FsZW5kYXIgJiYgY2FsZW5kYXIuZnVsbENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyLmZ1bGxDYWxlbmRhcigncmVtb3ZlRXZlbnRTb3VyY2UnLCBzb3VyY2UpO1xyXG4gICAgICAgICAgICBzb3VyY2VzQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZXZlbnRTb3VyY2VzV2F0Y2hlci5vbkNoYW5nZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChjYWxlbmRhciAmJiBjYWxlbmRhci5mdWxsQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgY2FsZW5kYXIuZnVsbENhbGVuZGFyKCdyZWZldGNoRXZlbnRzJyk7XHJcbiAgICAgICAgICAgIHNvdXJjZXNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZXZlbnRzV2F0Y2hlci5vbkFkZGVkID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgIGlmIChjYWxlbmRhciAmJiBjYWxlbmRhci5mdWxsQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgY2FsZW5kYXIuZnVsbENhbGVuZGFyKCdyZW5kZXJFdmVudCcsIGV2ZW50LCAoZXZlbnQuc3RpY2sgPyB0cnVlIDogZmFsc2UpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBldmVudHNXYXRjaGVyLm9uUmVtb3ZlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICBpZiAoY2FsZW5kYXIgJiYgY2FsZW5kYXIuZnVsbENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyLmZ1bGxDYWxlbmRhcigncmVtb3ZlRXZlbnRzJywgZXZlbnQuX2lkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBldmVudHNXYXRjaGVyLm9uQ2hhbmdlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICBpZiAoY2FsZW5kYXIgJiYgY2FsZW5kYXIuZnVsbENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHZhciBjbGllbnRFdmVudHMgPSBjYWxlbmRhci5mdWxsQ2FsZW5kYXIoJ2NsaWVudEV2ZW50cycsIGV2ZW50Ll9pZCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xpZW50RXZlbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGNsaWVudEV2ZW50ID0gY2xpZW50RXZlbnRzW2ldO1xyXG4gICAgICAgICAgICAgIGNsaWVudEV2ZW50ID0gYW5ndWxhci5leHRlbmQoY2xpZW50RXZlbnQsIGV2ZW50KTtcclxuICAgICAgICAgICAgICBjYWxlbmRhci5mdWxsQ2FsZW5kYXIoJ3VwZGF0ZUV2ZW50JywgY2xpZW50RXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZXZlbnRTb3VyY2VzV2F0Y2hlci5zdWJzY3JpYmUoc2NvcGUpO1xyXG4gICAgICAgIGV2ZW50c1dhdGNoZXIuc3Vic2NyaWJlKHNjb3BlLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChzb3VyY2VzQ2hhbmdlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBzb3VyY2VzQ2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyByZXR1cm4gZmFsc2UgdG8gcHJldmVudCBvbkFkZGVkL1JlbW92ZWQvQ2hhbmdlZCBoYW5kbGVycyBmcm9tIGZpcmluZyBpbiB0aGlzIGNhc2VcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzY29wZS4kd2F0Y2goZ2V0T3B0aW9ucywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICBpZihuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgc2NvcGUuZGVzdHJveUNhbGVuZGFyKCk7XHJcbiAgICAgICAgICAgIHNjb3BlLmluaXRDYWxlbmRhcigpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmKChuZXdWYWx1ZSAmJiBhbmd1bGFyLmlzVW5kZWZpbmVkKGNhbGVuZGFyKSkpIHtcclxuICAgICAgICAgICAgc2NvcGUuaW5pdENhbGVuZGFyKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbn1dKTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ0NvbW1vbicpLmRpcmVjdGl2ZShcblx0J2NhRmllbGRBbHBoYScsXG5cblx0W1xuXHRcdCdmaWVsZEhlbHBlclNlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uIChcblx0XHRoZWxwZXJcblx0KVxue1xuXHR2YXIgdGVtcGxhdGVfZnVuY3Rpb24gPSBmdW5jdGlvbiB0ZW1wbGF0ZV9mdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG5cdFx0cmV0dXJuIGhlbHBlci5yZXNvbHZlX3RlbXBsYXRlKGF0dHJpYnV0ZXMsICdzcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX2ZpZWxkX2FscGhhJyk7XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0VBQycsXG5cdFx0c2NvcGU6IGhlbHBlci5kZWZhdWx0X3Njb3BlLFxuXHRcdHRlbXBsYXRlVXJsOiB0ZW1wbGF0ZV9mdW5jdGlvbixcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdGxpbms6IGhlbHBlci5kZWZhdWx0X2xpbmtfZnVuY3Rpb24sXG5cdFx0Y29udHJvbGxlcjogaGVscGVyLmRlZmF1bHRfY29udHJvbGxlclxuXHR9O1xuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHQnY2FGaWVsZEFscGhhZGF0ZScsXG5cblx0W1xuXHRcdCdmaWVsZEhlbHBlclNlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uIChcblx0XHRoZWxwZXJcblx0KVxue1xuXHR2YXIgdGVtcGxhdGVfZnVuY3Rpb24gPSBmdW5jdGlvbiB0ZW1wbGF0ZV9mdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG5cdFx0cmV0dXJuIGhlbHBlci5yZXNvbHZlX3RlbXBsYXRlKGF0dHJpYnV0ZXMsICdzcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX2ZpZWxkX2FscGhhZGF0ZScpO1xuXHR9O1xuXG5cdHZhciBzY29wZSA9IGFuZ3VsYXIuY29weShoZWxwZXIuZGVmYXVsdF9zY29wZSk7XG5cdHNjb3BlLnBsYWNlaG9sZGVyID0gJ0BjYVBsYWNlaG9sZGVyJztcblxuXHR2YXIgYWxwaGFkYXRlX2xpbmtfZnVuY3Rpb24gPSBmdW5jdGlvbiBhbHBoYWRhdGVfbGlua19mdW5jdGlvbihcblx0XHQkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0e1xuXHRcdC8vIHVzZSB0aGUgcGFzc2VkLWluIHBsYWNlaG9sZGVyIG9yIGRlZmF1bHQgdG8gJ3l5eXktbW0tZGQnXG5cdFx0JHNjb3BlLmlucHV0X3BsYWNlaG9sZGVyID0gJHNjb3BlLnBsYWNlaG9sZGVyO1xuXHRcdGlmKCFhbmd1bGFyLmlzRGVmaW5lZCgkc2NvcGUuaW5wdXRfcGxhY2Vob2xkZXIpKVxuXHRcdHtcblx0XHRcdCRzY29wZS5pbnB1dF9wbGFjZWhvbGRlciA9ICd5eXl5LW1tLWRkJztcblx0XHR9XG5cblx0XHQkc2NvcGUub25fYmx1ciA9IGZ1bmN0aW9uIG9uX2JsdXIoKVxuXHRcdHtcblx0XHRcdC8vIHBhcnNlIHRoZSBpbnB1dCBhcyBhIGRhdGUsIHRoZW4gZm9ybWF0IGFzIFlZWVktTU0tREQgKG9yIGNsZWFyIGl0KVxuXHRcdFx0dmFyIG1vbWVudERhdGUgPSBtb21lbnQoJHNjb3BlLm1vZGVsLCBbXCJZWVlZLU1NLUREXCIsIFwiWVlZWU1NRERcIl0sIHRydWUpO1xuXHRcdFx0aWYobW9tZW50RGF0ZS5pc1ZhbGlkKCkpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5tb2RlbCA9IG1vbWVudERhdGUuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0JHNjb3BlLm1vZGVsID0gbnVsbDtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gcnVuIHRoZSBkZWZhdWx0IGZpZWxkIGxpbmsgZnVuY3Rpb25cblx0XHRoZWxwZXIuZGVmYXVsdF9saW5rX2Z1bmN0aW9uKCRzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlLCBjb250cm9sbGVyKTtcblx0fTtcblxuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiAnRUFDJyxcblx0XHRzY29wZTogc2NvcGUsXG5cdFx0dGVtcGxhdGVVcmw6IHRlbXBsYXRlX2Z1bmN0aW9uLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0bGluazogYWxwaGFkYXRlX2xpbmtfZnVuY3Rpb24sXG5cdFx0Y29udHJvbGxlcjogaGVscGVyLmRlZmF1bHRfY29udHJvbGxlclxuXHR9O1xuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHQnY2FGaWVsZEF1dG9jb21wbGV0ZScsXG5cblx0W1xuXHRcdCckcScsXG5cdFx0J2dsb2JhbFN0YXRlU2VydmljZScsXG5cdFx0JyR0aW1lb3V0Jyxcblx0XHQnZmllbGRIZWxwZXJTZXJ2aWNlJyxcblx0XHQnYXV0b0NvbXBsZXRlU2VydmljZScsXG5cdFx0J3Jlc3VsdHNTZXJ2aWNlJyxcblx0XHQnZm9jdXNTZXJ2aWNlJyxcblxuXHRmdW5jdGlvbigkcSwgZ2xvYmFsX3N0YXRlLCAkdGltZW91dCwgaGVscGVyLCBhdXRvY29tcGxldGUsIHJlc3VsdHNfZmFjdG9yeSwgZm9jdXMpXG57XG5cdHZhciBtaW5fbGVuZ3RoX3plcm9fdHlwZXMgPSBbXG5cdFx0J3llc19ub19ib29sZWFuJyxcblx0XHQnZ2VuZGVyJyxcblx0XHQnc2NoZWR1bGUnLFxuXHRcdCdzY2hlZHVsZV90eXBlJyxcblx0XHQnc2NoZWR1bGVfdGVtcGxhdGUnLFxuXHRcdCdzY2hlZHVsZV9ldmVudF9zdGF0dXMnLFxuXHRcdCd1c2VyX3JvbGVzJyxcblx0XHQndXNlcl90eXBlJyxcblx0XHQncHJvdmluY2UnLFxuXHRcdCdjb3VudHJ5Jyxcblx0XHQnY3VzdG9tX3RheCcsXG5cdFx0J2FsYmVydGFfbG9jYXRpb25fY29kZScsXG5cdFx0J2FsYmVydGFfZGVmYXVsdF90aW1lX3JvbGVfbW9kaWZpZXInLFxuXHRcdCdzZXJ2aWNlX21vZGlmaWVyJyxcblx0XHQnb250YXJpb19vZmZpY2VfY29kZScsXG5cdFx0J29udGFyaW9fc2VydmljZV9sb2NhdGlvbl9pbmRpY2F0b3InLFxuXHRcdCdiY19zZXJ2aWNlX2xvY2F0aW9uX2NvZGUnLFxuXHRcdCdiY19yZWZlcnJhbF9jb2RlJyxcblx0XHQnc2Fza19jbGluaWMnLFxuXHRcdCdzYXNrX29vcF9wcm92aW5jZScsXG5cdFx0J3Nhc2tfbW9kZScsXG5cdFx0J3Nhc2tfbG9jYXRpb25fb2Zfc2VydmljZScsXG5cdFx0J3Nhc2tfbG9jYXRpb25fb2Zfc2VydmljZV9zaG9ydCcsXG5cdFx0J3Nhc2tfY29ycG9yYXRpb25faW5kaWNhdG9yJyxcblx0XHQnc2Fza19zdWJtaXNzaW9uX3R5cGUnLFxuXHRcdCdzYXNrX3N1Ym1pc3Npb25fZmlsZScsXG5cdFx0J3Byb3ZpZGVyJyBdO1xuXG5cdHZhciBzY29wZSA9IGFuZ3VsYXIuY29weShoZWxwZXIuZGVmYXVsdF9zY29wZSk7XG5cblx0c2NvcGUucGxhY2Vob2xkZXIgPSAnQGNhUGxhY2Vob2xkZXInO1xuXHRzY29wZS5pbnB1dF9ncm91cF9jbGFzcyA9ICdAY2FJbnB1dEdyb3VwQ2xhc3MnO1xuXG5cdC8vIG11c3QgYmUgYSB2YWxpZCBnZW5lcmljX3JlZiB0eXBlXG5cdHNjb3BlLmF1dG9jb21wbGV0ZV90eXBlID0gJ0BjYUF1dG9jb21wbGV0ZVR5cGUnO1xuXG5cdC8vIEV4dHJhIHBhcmFtcyB0byBwYXNzIGluIHRoZSBSRVNUIGNhbGxcblx0c2NvcGUucGFyYW1zID0gJz1jYVBhcmFtcyc7XG5cdHNjb3BlLnBhcmFtc19mbiA9ICcmY2FQYXJhbXNGbic7XG5cblx0Ly8gdGhlIG9uLXNlbGVjdCBmdW5jdGlvbiB0byBjYWxsLCBhbmQgaWYgYXBwbGljYWJsZSwgYWRkaXRpb25hbCBkYXRhIHRvIHBhc3MgaW50byBpdFxuXHRzY29wZS5vbl9zZWxlY3RfZm4gPSAnJmNhT25TZWxlY3QnO1xuXHRzY29wZS5vbl9zZWxlY3RfZGF0YSA9ICc9Y2FPblNlbGVjdERhdGEnO1xuXG5cdC8vIHRoZSBjbGVhciBmdW5jdGlvbiB0byBjYWxsLCBhbmQgaWYgYXBwbGljYWJsZSwgZGF0YSB0byBwYXNzIGludG8gaXRcblx0c2NvcGUub25fY2xlYXJfZm4gPSAnJmNhQ2xlYXInO1xuXHRzY29wZS5vbl9jbGVhcl9kYXRhID0gJz1jYUNsZWFyRGF0YSc7XG5cblx0Ly8gdGhlIGNyZWF0ZSBmdW5jdGlvbiB0byBjYWxsXG5cdC8vIGNyZWF0ZSBvcHRpb24gd2lsbCBvbmx5IGFwcGVhciBpZiBmdW5jdGlvbiBpcyBwcm92aWRlZCBhbmQgY3JlYXRlX2lmIGlzIG1ldCAoaWYgYWxzbyBwcm92aWRlZClcblx0Ly8gYW5kIHRoZXJlIGlzIG5vIHNlbGVjdGVkIGF1dG9jb21wbGV0ZSB2YWx1ZVxuXHRzY29wZS5vbl9jcmVhdGVfZm4gPSAnJmNhQ3JlYXRlJztcblx0c2NvcGUuY3JlYXRlX2lmID0gJz1jYUNyZWF0ZUlmJztcblxuXHQvLyB0aGUgbW9kaWZ5IGZ1bmN0aW9uIHRvIGNhbGxcblx0Ly8gbW9kaWZ5IG9wdGlvbiB3aWxsIG9ubHkgYXBwZWFyIGlmIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIGFuZCBtb2RpZnlfaWYgaXMgbWV0IChpZiBhbHNvIHByb3ZpZGVkKVxuXHQvLyBhbmQgdGhlcmUgaXMgYSBzZWxlY3RlZCBhdXRvY29tcGxldGUgdmFsdWVcblx0c2NvcGUub25fbW9kaWZ5X2ZuID0gJyZjYU1vZGlmeSc7XG5cdHNjb3BlLm1vZGlmeV9pZiA9ICc9Y2FNb2RpZnlJZic7XG5cdHNjb3BlLmNyZWF0ZV9vbl9ub3RfZm91bmQgPSAnPT9jYUNyZWF0ZU9uTm90Rm91bmQnO1xuXHRzY29wZS5lZGl0YWJsZSA9ICc9P2NhRWRpdGFibGUnO1xuXG5cdC8vIExpc3Qgb2YgcmVjb3JkcyB0byBleGNsdWRlIGZyb20gdGhlIHJlc3VsdHMuIEVHIFRoZXNlIGl0ZW1zIGFyZSBhbHJlYWR5IGxpbmtlZFxuXHQvLyBNdXN0IGJlIGFuIGFycmF5IG9mIHBvam8gbW9kZWxzXG5cdHNjb3BlLmNhX2V4Y2x1ZGVfbGlzdCA9ICc9Y2FFeGNsdWRlTGlzdCc7XG5cblx0dmFyIHRlbXBsYXRlX2Z1bmN0aW9uID0gZnVuY3Rpb24gdGVtcGxhdGVfZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlcykge1xuXHRcdHJldHVybiBoZWxwZXIucmVzb2x2ZV90ZW1wbGF0ZShhdHRyaWJ1dGVzLCAnY29kZS9jb21tb24vZGlyZWN0aXZlcy9jYV9maWVsZF9hdXRvY29tcGxldGUnKTtcblx0fTtcblxuXHR2YXIgYXV0b2NvbXBsZXRlX2xpbmtfZnVuY3Rpb24gPSBmdW5jdGlvbiBhdXRvY29tcGxldGVfbGlua19mdW5jdGlvbihcblx0XHQkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0e1xuXHRcdCRzY29wZS5hdXRvY29tcGxldGUgPSBhdXRvY29tcGxldGU7XG5cdFx0JHNjb3BlLnNlYXJjaF9maWVsZCA9IG51bGw7XG5cblx0XHRpZighYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLm1vZGVsKSlcblx0XHR7XG5cdFx0XHQkc2NvcGUubW9kZWwgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmKCFKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cygkc2NvcGUuY3JlYXRlX29uX25vdF9mb3VuZCkpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLmNyZWF0ZV9vbl9ub3RfZm91bmQgPSBmYWxzZTtcblx0XHR9XG5cblx0XHRpZighSnVuby5Db21tb24uVXRpbC5leGlzdHMoJHNjb3BlLmVkaXRhYmxlKSlcblx0XHR7XG5cdFx0XHQkc2NvcGUuZWRpdGFibGUgPSBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBlbnN1cmUgYXV0b2NvbXBsZXRlIHR5cGUgaXMgZWl0aGVyIGEgbGlzdGVkIGRhbyBvciBkZWZpbmVkIGluIEdlbmVyaWNSZWZcblx0XHRpZihPYmplY3Qua2V5cygkc2NvcGUuYXV0b2NvbXBsZXRlLmRhb19tYXApLmluZGV4T2YoXG5cdFx0XHRcdFx0JHNjb3BlLmF1dG9jb21wbGV0ZV90eXBlKSA9PSAtMSAmJlxuXHRcdFx0XHRPYmplY3Qua2V5cyhDbGluaWNhaWQuTW9kZWwuR2VuZXJpY1JlZi5SRUZfREVGSU5JVElPTlMpLmluZGV4T2YoXG5cdFx0XHRcdFx0JHNjb3BlLmF1dG9jb21wbGV0ZV90eXBlKSA9PSAtMSlcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZyhcImludmFsaWQgYXV0b2NvbXBsZXRlIHR5cGU6XCIsICRzY29wZS5hdXRvY29tcGxldGVfdHlwZSxcblx0XHRcdFx0XCJ2YWxpZCB2YWx1ZXM6IChcIiAsXG5cdFx0XHRcdFx0T2JqZWN0LmtleXMoJHNjb3BlLmF1dG9jb21wbGV0ZS5kYW9fbWFwKSxcblx0XHRcdFx0XHRPYmplY3Qua2V5cyhDbGluaWNhaWQuTW9kZWwuR2VuZXJpY1JlZi5SRUZfREVGSU5JVElPTlMpKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBkZWZhdWx0IG1pbi1sZW5ndGggaXMgMSBleGNlcHQgZm9yIHNvbWUgdHlwZXNcblx0XHQkc2NvcGUuYXV0b2NvbXBsZXRlX21pbl9sZW5ndGggPVxuXHRcdFx0KG1pbl9sZW5ndGhfemVyb190eXBlcy5pbmRleE9mKCRzY29wZS5hdXRvY29tcGxldGVfdHlwZSkgIT0gLTEpID8gMCA6IDE7XG5cblx0XHQvLyB1c2UgdGhlIHBhc3NlZC1pbiBwbGFjZWhvbGRlciBvciBkZWZhdWx0IHRvICdTZWFyY2guLi4nXG5cdFx0JHNjb3BlLmlucHV0X3BsYWNlaG9sZGVyID0gJHNjb3BlLnBsYWNlaG9sZGVyO1xuXHRcdGlmKCFhbmd1bGFyLmlzRGVmaW5lZCgkc2NvcGUuaW5wdXRfcGxhY2Vob2xkZXIpKVxuXHRcdHtcblx0XHRcdCRzY29wZS5pbnB1dF9wbGFjZWhvbGRlciA9ICdTZWFyY2guLi4nO1xuXHRcdH1cblxuXHRcdC8vIGNsZWFyIGZ1bmN0aW9uOlxuXHRcdC8vIGNhbGwgdGhlIHBhc3NlZC1pbiBmdW5jdGlvbiB3aXRoIHRoZSBwYXNzZWQtaW4gZGF0YVxuXHRcdCRzY29wZS5jbGVhcl9hdXRvY29tcGxldGVfc2VhcmNoID0gZnVuY3Rpb24gY2xlYXJfYXV0b2NvbXBsZXRlX3NlYXJjaCgpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLnNlYXJjaF9maWVsZCA9IG51bGw7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5jbGVhcl9hdXRvY29tcGxldGVfbW9kZWwgPSBmdW5jdGlvbiBjbGVhcl9hdXRvY29tcGxldGVfbW9kZWwoZm9jdXNfaW5wdXQpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLm1vZGVsID0gbnVsbDtcblx0XHRcdGlmKGFuZ3VsYXIuaXNGdW5jdGlvbigkc2NvcGUub25fY2xlYXJfZm4oKSkpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5vbl9jbGVhcl9mbigpKCRzY29wZS5vbl9jbGVhcl9kYXRhKTtcblx0XHRcdH1cblxuXHRcdFx0aWYoZm9jdXNfaW5wdXQpXG5cdFx0XHR7XG5cdFx0XHRcdGZvY3VzLmVsZW1lbnQoZWxlbWVudC5maW5kKCdpbnB1dCcpKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gc2VsZWN0IGZ1bmN0aW9uOlxuXHRcdC8vIGNhbGwgdGhlIHBhc3NlZC1pbiBmdW5jdGlvbiB3aXRoIHRoZSBhdXRvY29tcGxldGUgYW5kIHBhc3NlZC1pbiBkYXRhXG5cdFx0JHNjb3BlLm9uX3NlbGVjdCA9IGZ1bmN0aW9uIG9uX3NlbGVjdCgkaXRlbSwgJG1vZGVsLCAkbGFiZWwsICRldmVudClcblx0XHR7XG5cdFx0XHQkc2NvcGUubW9kZWwgPSAkaXRlbTtcblx0XHRcdCRzY29wZS5jaGFuZ2VfZm4oKTtcblx0XHRcdGlmKGFuZ3VsYXIuaXNGdW5jdGlvbigkc2NvcGUub25fc2VsZWN0X2ZuKCkpKVxuXHRcdFx0e1xuXHRcdFx0XHQkc2NvcGUub25fc2VsZWN0X2ZuKCkoJGl0ZW0sICRtb2RlbCwgJGxhYmVsLCAkZXZlbnQsICRzY29wZS5vbl9zZWxlY3RfZGF0YSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdCRzY29wZS5jcmVhdGVfb25fbm90X2ZvdW5kX2ZuID0gZnVuY3Rpb24gY3JlYXRlX29uX25vdF9mb3VuZF9mbih0ZW1wX21vZGVsKVxuXHRcdHtcblx0XHRcdGlmKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKHRlbXBfbW9kZWwpKVxuXHRcdFx0e1xuXHRcdFx0XHQkc2NvcGUuYXV0b2NvbXBsZXRlLmNyZWF0ZV9vbl9ub3RfZm91bmQoXG5cdFx0XHRcdFx0XHR0ZW1wX21vZGVsLCAkc2NvcGUuYXV0b2NvbXBsZXRlX3R5cGUsIHRydWUpLnRoZW4oXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdCRzY29wZS5vbl9zZWxlY3QocmVzdWx0cy5kYXRhLCByZXN1bHRzLmRhdGEsIG51bGwsIG51bGwsICRzY29wZS5vbl9zZWxlY3RfZGF0YSk7XG5cdFx0XHRcdFx0XHRcdGlmIChhbmd1bGFyLmlzRnVuY3Rpb24oJHNjb3BlLmNoYW5nZV9mbikpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuY2hhbmdlX2ZuKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yOicsIGVycm9ycyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdCRzY29wZS5vbl9jaGFuZ2UgPSBmdW5jdGlvbiBvbl9jaGFuZ2UoKVxuXHRcdHtcblx0XHRcdGlmKCEkc2NvcGUuZWRpdGFibGUpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5jbGVhcl9hdXRvY29tcGxldGVfbW9kZWwoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgdGVtcF9tb2RlbCA9ICRzY29wZS5hdXRvY29tcGxldGUuYnVpbGRfbW9kZWxfb2JqZWN0KFxuXHRcdFx0XHRcdCRzY29wZS5hdXRvY29tcGxldGVfdHlwZSwgJHNjb3BlLnNlYXJjaF9maWVsZCk7XG5cblx0XHRcdCRzY29wZS5vbl9zZWxlY3QodGVtcF9tb2RlbCwgdGVtcF9tb2RlbCwgbnVsbCwgbnVsbCwgJHNjb3BlLm9uX3NlbGVjdF9kYXRhKTtcblxuXHRcdFx0aWYgKCRzY29wZS5jcmVhdGVfb25fbm90X2ZvdW5kKVxuXHRcdFx0e1xuXHRcdFx0XHQkc2NvcGUuY3JlYXRlX29uX25vdF9mb3VuZF9mbih0ZW1wX21vZGVsKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gYmx1ciBmdW5jdGlvblxuXHRcdCRzY29wZS5vbl9ibHVyID0gZnVuY3Rpb24gb25fYmx1cigpXG5cdFx0e1xuXHRcdFx0Ly8gdGhpcyBpcyBmb3IgdGhlIGNhc2Ugd2hlbiB0aGUgdXNlciBkb2VzIGEgc2VhcmNoIGFuZCB0aGVuIGJsdXJzIHRoZSBmaWVsZDpcblx0XHRcdC8vIGlmIHRoZSB2YWx1ZSBpcyBudWxsLCBjYWxsIHRoZSBjbGVhciBmdW5jdGlvbiAoc2luY2UgdGhlIHNlbGVjdCBmdW5jdGlvbiBkb2Vzbid0IGZpcmUpXG5cdFx0XHRpZigkc2NvcGUubW9kZWwgPT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0JHNjb3BlLmNsZWFyX2F1dG9jb21wbGV0ZV9tb2RlbCgpO1xuXHRcdFx0XHQkc2NvcGUuY2xlYXJfYXV0b2NvbXBsZXRlX3NlYXJjaCgpO1xuXG5cdFx0XHRcdC8vIG9ubHkgcnVuIHRoZSBjaGFuZ2UgZnVuY3Rpb24gaWYgdGhlIG1vZGVsIGV4aXN0ZWQgd2hlbiB0aGUgYXV0b2NvbXBsZXRlIHdhcyBsYXN0IGZvY3VzZWRcblx0XHRcdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoJHNjb3BlLm1vZGVsX29uX2ZvY3VzKSAmJlxuXHRcdFx0XHRcdGFuZ3VsYXIuaXNGdW5jdGlvbigkc2NvcGUuY2hhbmdlX2ZuKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCRzY29wZS5jaGFuZ2VfZm4oKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBjYWxsIHRoZSBwYXNzZWQtaW4gZnVuY3Rpb24sIGlmIHByb3ZpZGVkXG5cdFx0XHRpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKCRzY29wZS5ibHVyX2ZuKSlcblx0XHRcdHtcblx0XHRcdFx0JHNjb3BlLmJsdXJfZm4oKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gb24gZm9jdXNcblx0XHQkc2NvcGUub25fZm9jdXMgPSBmdW5jdGlvbiBvbl9mb2N1cygpXG5cdFx0e1xuXHRcdFx0Ly8gbWFrZSBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbW9kZWwgKG5lZWRlZCBmb3IgY29tcGFyaXNvbiBvbl9ibHVyKVxuXHRcdFx0JHNjb3BlLm1vZGVsX29uX2ZvY3VzID0gYW5ndWxhci5jb3B5KCRzY29wZS5tb2RlbCk7XG5cblx0XHRcdC8vIGNhbGwgdGhlIHBhc3NlZC1pbiBmdW5jdGlvbiwgaWYgcHJvdmlkZWRcblx0XHRcdGlmKGFuZ3VsYXIuaXNGdW5jdGlvbigkc2NvcGUuZm9jdXNfZm4pKVxuXHRcdFx0e1xuXHRcdFx0XHQkc2NvcGUuZm9jdXNfZm4oKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gY3JlYXRlIGZ1bmN0aW9uOiBjYWxsIHRoZSBwYXNzZWQtaW4gZnVuY3Rpb24sIGlmIHByb3ZpZGVkXG5cdFx0JHNjb3BlLm9uX2NyZWF0ZSA9IG51bGw7XG5cdFx0aWYoYW5ndWxhci5pc0Z1bmN0aW9uKCRzY29wZS5vbl9jcmVhdGVfZm4oKSkpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLm9uX2NyZWF0ZSA9IGZ1bmN0aW9uIG9uX2NyZWF0ZSgpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5vbl9jcmVhdGVfZm4oKSgpO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHQvLyBtb2RpZnkgZnVuY3Rpb246IGNhbGwgdGhlIHBhc3NlZC1pbiBmdW5jdGlvbiwgaWYgcHJvdmlkZWRcblx0XHQkc2NvcGUub25fbW9kaWZ5ID0gbnVsbDtcblx0XHRpZihhbmd1bGFyLmlzRnVuY3Rpb24oJHNjb3BlLm9uX21vZGlmeV9mbigpKSlcblx0XHR7XG5cdFx0XHQkc2NvcGUub25fbW9kaWZ5ID0gZnVuY3Rpb24gb25fbW9kaWZ5KClcblx0XHRcdHtcblx0XHRcdFx0JHNjb3BlLm9uX21vZGlmeV9mbigpKCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0XHQkc2NvcGUuc2hvd19tb2RpZnlfaWYgPSAodHlwZW9mICRzY29wZS5tb2RpZnlfaWYgPT09ICd1bmRlZmluZWQnIHx8ICRzY29wZS5tb2RpZnlfaWYpO1xuXG5cdFx0Ly8gYXV0b2NvbXBsZXRlIHNlYXJjaDogaW52b2tlIGNvbmZpZ3VyZWQgZnVuY3Rpb25cblx0XHQkc2NvcGUuYXV0b2NvbXBsZXRlX2l0ZW1zID0gZnVuY3Rpb24gYXV0b2NvbXBsZXRlX2l0ZW1zKCR2aWV3VmFsdWUpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0XHRcdHZhciBwYXJhbXMgPSAkc2NvcGUucGFyYW1zID8gJHNjb3BlLnBhcmFtcyA6IHt9O1xuXHRcdFx0aWYoYW5ndWxhci5pc0Z1bmN0aW9uKCRzY29wZS5wYXJhbXNfZm4pKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBJZiB0aGUgcGFyYW1zX2ZuIGRlZmluaXRpb24gaGFzIGFyZ3VtZW50cywgJHNjb3BlLnBhcmFtc19mbigpIHdpdGggcmV0dXJuIHRoZSByZXN1bHRzLlxuXHRcdFx0XHQvLyBJZiBpdCBkb2VzbnQgaGF2ZSBhcm11bWVudHMgaXQgcmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgZnVuY2l0b24gd2hpY2ggc3RpbGwgbmVlZHNcblx0XHRcdFx0Ly8gdG8gYmUgZXhlY3V0ZWQgdG8gZ2V0IHRoZSByZXN1bHRzXG5cdFx0XHRcdHZhciBwYXJhbXNfY2hlY2sgPSAkc2NvcGUucGFyYW1zX2ZuKCk7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNGdW5jdGlvbihwYXJhbXNfY2hlY2spKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cGFyYW1zX2NoZWNrID0gcGFyYW1zX2NoZWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YW5ndWxhci5leHRlbmQocGFyYW1zLCBwYXJhbXNfY2hlY2spO1xuXHRcdFx0fVxuXG5cdFx0XHRhdXRvY29tcGxldGUuZ2V0X2l0ZW1zKCRzY29wZS5hdXRvY29tcGxldGVfdHlwZSwgJHZpZXdWYWx1ZSwgcGFyYW1zKS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR2YXIgb3V0X2l0ZW1zID0gcmVzdWx0cy5kYXRhO1xuXHRcdFx0XHRcdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoJHNjb3BlLmNhX2V4Y2x1ZGVfbGlzdCkpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdG91dF9pdGVtcyA9ICRzY29wZS5wcnVuZV9pdGVtcyhvdXRfaXRlbXMpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShvdXRfaXRlbXMpO1xuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoZXJyb3JzKVxuXHRcdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLnBydW5lX2l0ZW1zID0gZnVuY3Rpb24gcHJ1bmVfaXRlbXMoaXRlbXMpXG5cdFx0e1xuXHRcdFx0dmFyIG91dF9pdGVtcyA9IFtdO1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgaW5fbGlzdCA9IGZhbHNlO1xuXHRcdFx0XHRmb3IodmFyIGlpID0gMDsgaWkgPCAkc2NvcGUuY2FfZXhjbHVkZV9saXN0Lmxlbmd0aDsgaWkrKylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciBleGNsdWRlX2l0ZW0gPSAkc2NvcGUuY2FfZXhjbHVkZV9saXN0W2lpXTtcblx0XHRcdFx0XHRpZih0eXBlb2YoZXhjbHVkZV9pdGVtKSA9PSAnc3RyaW5nJylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRpZihpdGVtc1tpXS5kYXRhW2l0ZW1zW2ldLnZhbHVlX2ZpZWxkXSA9PSBleGNsdWRlX2l0ZW0pXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGluX2xpc3QgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmKGl0ZW1zW2ldLmRhdGFbaXRlbXNbaV0udmFsdWVfZmllbGRdID09XG5cdFx0XHRcdFx0XHRcdFx0ZXhjbHVkZV9pdGVtLmRhdGFbJHNjb3BlLmNhX2V4Y2x1ZGVfbGlzdFtpaV0udmFsdWVfZmllbGRdKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRpbl9saXN0ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoIWluX2xpc3QpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRvdXRfaXRlbXMucHVzaChpdGVtc1tpXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBvdXRfaXRlbXM7XG5cdFx0fTtcblxuXHRcdC8vIGF1dG9jb21wbGV0ZSBmb3JtYXQ6IGZvcm1hdCB0aGUgc2VsZWN0aW9uIGZvciBkaXNwbGF5IGluIHRoZSBib3hcblx0XHQkc2NvcGUuYXV0b2NvbXBsZXRlX2lucHV0X2Zvcm1hdHRlciA9IGZ1bmN0aW9uIGF1dG9jb21wbGV0ZV9pbnB1dF9mb3JtYXR0ZXIoJG1vZGVsKVxuXHRcdHtcblx0XHRcdHJldHVybiAkbW9kZWwgIT0gbnVsbCA/ICRtb2RlbC5hdXRvY29tcGxldGVfaW5wdXRfZm9ybWF0dGVkIDogbnVsbDtcblx0XHR9O1xuXG5cdFx0Ly8gc2hvdyB0aGUgY3JlYXRlIGJ1dHRvbj9cblx0XHQkc2NvcGUuc2hvd19jcmVhdGUgPSBmdW5jdGlvbiBzaG93X2NyZWF0ZSgpXG5cdFx0e1xuXHRcdFx0cmV0dXJuICRzY29wZS5vbl9jcmVhdGUgJiYgISRzY29wZS5tb2RlbCAmJlxuXHRcdFx0XHQodHlwZW9mICRzY29wZS5jcmVhdGVfaWYgPT09ICd1bmRlZmluZWQnIHx8ICRzY29wZS5jcmVhdGVfaWYpO1xuXHRcdH07XG5cblx0XHQvLyBzaG93IHRoZSBtb2RpZnkgYnV0dG9uP1xuXHRcdCRzY29wZS5zaG93X21vZGlmeSA9IGZ1bmN0aW9uIHNob3dfbW9kaWZ5KClcblx0XHR7XG5cdFx0XHRyZXR1cm4gJHNjb3BlLm9uX21vZGlmeSAmJiAkc2NvcGUubW9kZWwgJiYgISRzY29wZS5tb2RlbC5kdW1teV9yZWNvcmQgJiZcblx0XHRcdFx0KHR5cGVvZiAkc2NvcGUubW9kaWZ5X2lmID09PSAndW5kZWZpbmVkJyB8fCAkc2NvcGUubW9kaWZ5X2lmKTtcblx0XHR9O1xuXG5cdFx0Ly8gc2hvdyB0aGUgYnV0dG9ucz9cblx0XHQkc2NvcGUuc2hvd19idXR0b25zID0gZnVuY3Rpb24gc2hvd19idXR0b25zKClcblx0XHR7XG5cdFx0XHRyZXR1cm4gISRzY29wZS5kaXNhYmxlZCAmJiAoJHNjb3BlLm1vZGVsIHx8ICRzY29wZS5zaG93X2NyZWF0ZSgpKTtcblx0XHR9O1xuXG5cdFx0Ly8gcmVxdWlyZWQgZm9yIGluaXRpYWxpemF0aW9uIG9mIHRoZSBzZWFyY2ggZmllbGQgdmFsdWU6XG5cdFx0Ly8gdGhlIGRpcmVjdGl2ZSBpcyBjcmVhdGVkIGJlZm9yZSB0aGUgbW9kZWwgaXMgcG9wdWxhdGVkXG5cdFx0JHNjb3BlLiR3YXRjaCgnbW9kZWwnLCBmdW5jdGlvbihuZXdfdmFsdWUsIG9sZF92YWx1ZSlcblx0XHR7XG5cdFx0XHQkc2NvcGUuc2VhcmNoX2ZpZWxkID0gJHNjb3BlLm1vZGVsO1xuXHRcdH0pO1xuXG5cdFx0Ly8gcnVuIHRoZSBkZWZhdWx0IGZpZWxkIGxpbmsgZnVuY3Rpb25cblx0XHRoZWxwZXIuZGVmYXVsdF9saW5rX2Z1bmN0aW9uKCRzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlLCBjb250cm9sbGVyKTtcblx0fTtcblxuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiAnRScsXG5cdFx0c2NvcGU6IHNjb3BlLFxuXHRcdHRlbXBsYXRlVXJsOiB0ZW1wbGF0ZV9mdW5jdGlvbixcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdGxpbms6IGF1dG9jb21wbGV0ZV9saW5rX2Z1bmN0aW9uLFxuXHRcdGNvbnRyb2xsZXI6IGhlbHBlci5kZWZhdWx0X2NvbnRyb2xsZXJcblx0fTtcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0NvbW1vbicpLmRpcmVjdGl2ZShcblx0J2NhRmllbGRCb29sZWFuJyxcblxuXHRbXG5cdFx0J2ZpZWxkSGVscGVyU2VydmljZScsXG5cblx0ZnVuY3Rpb24oXG5cdFx0aGVscGVyXG5cdClcbntcblxuXHR2YXIgdGVtcGxhdGVfZnVuY3Rpb24gPSBmdW5jdGlvbiB0ZW1wbGF0ZV9mdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG5cdFx0cmV0dXJuIGhlbHBlci5yZXNvbHZlX3RlbXBsYXRlKGF0dHJpYnV0ZXMsICdzcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX2ZpZWxkX2Jvb2xlYW4nKTtcblx0fTtcblxuXHR2YXIgbGlua19mdW5jdGlvbiA9IGZ1bmN0aW9uIGxpbmtfZnVuY3Rpb24oXG5cdFx0XHQkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0e1xuXHRcdGlmKCFKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cygkc2NvcGUubW9kZWwpKVxuXHRcdHtcblx0XHRcdCRzY29wZS5tb2RlbCA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIHJ1biB0aGUgZGVmYXVsdCBmaWVsZCBsaW5rIGZ1bmN0aW9uXG5cdFx0aGVscGVyLmRlZmF1bHRfbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcik7XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0VBQycsXG5cdFx0c2NvcGU6IGhlbHBlci5kZWZhdWx0X3Njb3BlLFxuXHRcdHRlbXBsYXRlVXJsOiB0ZW1wbGF0ZV9mdW5jdGlvbixcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdGxpbms6IGxpbmtfZnVuY3Rpb24sXG5cdFx0Y29udHJvbGxlcjogaGVscGVyLmRlZmF1bHRfY29udHJvbGxlclxuXHR9O1xuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHRcdCdjYUZpZWxkQnV0dG9uR3JvdXAnLFxuXG5cdFx0W1xuXHRcdFx0J2ZpZWxkSGVscGVyU2VydmljZScsXG5cblx0XHRcdGZ1bmN0aW9uKFxuXHRcdFx0XHRcdGhlbHBlclxuXHRcdFx0KVxuXHRcdFx0e1xuXG5cdFx0XHRcdHZhciBsaW5rX2Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vIHJ1biB0aGUgZGVmYXVsdCBmaWVsZCBsaW5rIGZ1bmN0aW9uXG5cdFx0XHRcdFx0aGVscGVyLmRlZmF1bHRfbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcik7XG5cblx0XHRcdFx0XHQkc2NvcGUuc2VsZWN0ZWRfdmFsdWVzID0gWyRzY29wZS5maWVsZF9kZWZhdWx0XTtcblxuXHRcdFx0XHRcdCRzY29wZS5pc19zZWxlY3RlZCA9IGZ1bmN0aW9uIGlzX3NlbGVjdGVkKHZhbHVlKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuc2VsZWN0ZWRfdmFsdWVzLmluZGV4T2YodmFsdWUpICE9IC0xO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQkc2NvcGUudG9nZ2xlX3NlbGVjdGVkID0gZnVuY3Rpb24gdG9nZ2xlX3NlbGVjdGVkKHZhbHVlKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZV9pbmRleCA9ICRzY29wZS5zZWxlY3RlZF92YWx1ZXMuaW5kZXhPZih2YWx1ZSk7XG5cdFx0XHRcdFx0XHRpZih2YWx1ZV9pbmRleCA9PSAtMSlcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkX3ZhbHVlcy5wdXNoKHZhbHVlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkX3ZhbHVlcy5zcGxpY2UodmFsdWVfaW5kZXgsIDEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0JHNjb3BlLm1vZGVsID0gJHNjb3BlLnNlbGVjdGVkX3ZhbHVlcy5qb2luKFwiLFwiKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHZhciBzY29wZSA9IGFuZ3VsYXIuY29weShoZWxwZXIuZGVmYXVsdF9zY29wZSk7XG5cdFx0XHRcdHNjb3BlLmZpZWxkX3NldHRpbmdzID0gJz1jYUZpZWxkU2V0dGluZ3MnO1xuXHRcdFx0XHRzY29wZS5maWVsZF9kZWZhdWx0ID0gJz1jYUZpZWxkRGVmYXVsdCc7XG5cblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRyZXN0cmljdDogJ0VBQycsXG5cdFx0XHRcdFx0c2NvcGU6IHNjb3BlLFxuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC9jYV9maWVsZF9idXR0b25fZ3JvdXAuanNwJyxcblx0XHRcdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0XHRcdGxpbms6IGxpbmtfZnVuY3Rpb24sXG5cdFx0XHRcdFx0Y29udHJvbGxlcjogaGVscGVyLmRlZmF1bHRfY29udHJvbGxlclxuXHRcdFx0XHR9O1xuXG5cdFx0XHR9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHQnY2FGaWVsZENvbG9yJywgXG5cblx0W1xuXHRcdCdmaWVsZEhlbHBlclNlcnZpY2UnLCBcblxuXHRmdW5jdGlvbihcblx0XHRoZWxwZXJcblx0KVxue1xuICAgIHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6ICdFQUMnLFxuXHRcdHNjb3BlOiBoZWxwZXIuZGVmYXVsdF9zY29wZSxcblx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfZmllbGRfY29sb3IuanNwJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdGxpbms6IGhlbHBlci5kZWZhdWx0X2xpbmtfZnVuY3Rpb24sXG5cdFx0Y29udHJvbGxlcjogaGVscGVyLmRlZmF1bHRfY29udHJvbGxlciwgXG5cdH07XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHQnY2FGaWVsZEN1cnJlbmN5JywgXG5cblx0W1xuXHRcdCdmaWVsZEhlbHBlclNlcnZpY2UnLCBcblxuXHRmdW5jdGlvbihcblx0XHRoZWxwZXJcblx0KVxue1xuXHRcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0VBQycsXG5cdFx0c2NvcGU6IGhlbHBlci5kZWZhdWx0X3Njb3BlLFxuXHRcdHRlbXBsYXRlVXJsOiAnc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC9jYV9maWVsZF9jdXJyZW5jeS5qc3AnLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0bGluazogaGVscGVyLmRlZmF1bHRfbGlua19mdW5jdGlvbixcblx0XHRjb250cm9sbGVyOiBoZWxwZXIuZGVmYXVsdF9jb250cm9sbGVyIFxuXHR9O1xuXHRcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdDb21tb24nKS5kaXJlY3RpdmUoXG5cdCdjYUZpZWxkQ3VycmVuY3lGaWx0ZXInLFxuXHRbXG5cdFx0JyRmaWx0ZXInLFxuXHRcdGZ1bmN0aW9uICgkZmlsdGVyKVxuXHRcdHtcblx0XHRcdHZhciBsaW5rX2Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlLCBuZ01vZGVsQ29udHJvbGxlcilcblx0XHRcdHtcblx0XHRcdFx0bmdNb2RlbENvbnRyb2xsZXIuJHBhcnNlcnMucHVzaChcblx0XHRcdFx0XHRmdW5jdGlvbiBmcm9tVXNlcih0ZXh0KVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmICh0ZXh0ID09IG51bGwpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHRleHQgPSBcIjBcIjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIHRlbXBWYWx1ZSA9IHRleHQucmVwbGFjZSgvWyQsXS9nLCAnJyk7XG5cdFx0XHRcdFx0XHRpZiAodGVtcFZhbHVlLnRyaW0oKSA9PSBcIlwiKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHR0ZW1wVmFsdWUgPSBcIjBcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHZhciBuZXdWYWx1ZSA9IHBhcnNlRmxvYXQodGVtcFZhbHVlKS50b0ZpeGVkKDQpO1xuXHRcdFx0XHRcdFx0aWYgKGlzTmFOKG5ld1ZhbHVlKSlcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bmV3VmFsdWUgPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIG5ld1ZhbHVlO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdG5nTW9kZWxDb250cm9sbGVyLiRmb3JtYXR0ZXJzLnVuc2hpZnQoXG5cdFx0XHRcdFx0ZnVuY3Rpb24gdG9Vc2VyKHRleHQpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aWYgKHRleHQgPT0gbnVsbClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHZhciBjdXJyZW5jeUZpbHRlciA9ICRmaWx0ZXIoJ215Q3VycmVuY3lGaWx0ZXInKTtcblx0XHRcdFx0XHRcdHZhciBuZXdWYWx1ZSA9IGN1cnJlbmN5RmlsdGVyKHRleHQpO1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gbmV3VmFsdWU7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRyZXF1aXJlOiAnbmdNb2RlbCcsXG5cdFx0XHRcdHJlc3RyaWN0OiAnRUFDJyxcblx0XHRcdFx0bGluazogbGlua19mdW5jdGlvblxuXHRcdFx0fTtcblxuXHRcdH1cblx0XVxuKTtcbiIsIiBhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuICdjYUZpZWxkRGF0ZScsXG5cbiBbXG5cdCAnJGNvbXBpbGUnLFxuXHQgJyR0aW1lb3V0Jyxcblx0ICdmaWVsZEhlbHBlclNlcnZpY2UnLFxuXG5cdCBmdW5jdGlvbihcblx0XHQgJGNvbXBpbGUsXG5cdFx0ICR0aW1lb3V0LFxuXHRcdCBoZWxwZXJcblx0IClcbiB7XG5cdCB2YXIgc2NvcGUgPSBhbmd1bGFyLmNvcHkoaGVscGVyLmRlZmF1bHRfc2NvcGUpO1xuXG5cdCBzY29wZS5kYXRlX3BpY2tlcl9pZCA9ICdAY2FEYXRlUGlja2VySWQnO1xuXHQgc2NvcGUub3JpZW50YXRpb24gPSAnQGNhT3JpZW50YXRpb24nO1xuXHQgc2NvcGUudXNlX211bHRpX2RhdGUgPSAnQGNhVXNlTXVsdGlEYXRlJztcblx0IHNjb3BlLmNvbnRhaW5lcl9pZCA9ICdAY2FDb250YWluZXJJZCc7XG5cblx0IHZhciB0ZW1wbGF0ZV9mdW5jdGlvbiA9IGZ1bmN0aW9uIHRlbXBsYXRlX2Z1bmN0aW9uKGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0XHQgaWYoYXR0cmlidXRlc1snY2FUZW1wbGF0ZSddID09ICdiYXJlJylcblx0XHQge1xuXHRcdFx0IHJldHVybiAnc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC9jYV9maWVsZF9kYXRlX2JhcmUuanNwJztcblx0XHQgfVxuXHRcdCByZXR1cm4gJ3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfZmllbGRfZGF0ZS5qc3AnO1xuXHQgfTtcblxuXHQgdmFyIGxpbmtfZnVuY3Rpb24gPSBmdW5jdGlvbiBsaW5rX2Z1bmN0aW9uKCRzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlLCBjb250cm9sbGVyKVxuXHQge1xuXHRcdCAvLyBDcmVhdGluZyB0aGUgZGF0ZXBpY2tlciBjaGFuZ2VzIHRoZSB2YWx1ZSBvZiB0aGUgbmctbW9kZWwgYW5kIGZpcmVzIHRoZVxuXHRcdCAvLyBuZy1jaGFuZ2UgZXZlbnQuIFRoaXMgZGlzYWJsZXMgdGhlIGV2ZW50IHVudGlsIHRoZSBmaWVsZCBpbml0aWFsaXphdGlvbiBpcyBjb21wbGV0ZVxuXHRcdCAkc2NvcGUuaW5pdGlhbGl6YXRpb25fY29tcGxldGUgPSBmYWxzZTtcblx0XHQgJHNjb3BlLmRlbGF5ZWRfY2hhbmdlX2ZuID0gZnVuY3Rpb24oKVxuXHRcdCB7XG5cdFx0XHQgaWYoJHNjb3BlLmluaXRpYWxpemF0aW9uX2NvbXBsZXRlID09PSB0cnVlKVxuXHRcdFx0IHtcblx0XHRcdFx0ICRzY29wZS5jaGFuZ2VfZm4oKTtcblx0XHRcdCB9XG5cdFx0IH07XG5cblx0XHQgaGVscGVyLm1lcmdlX3RpdGxlX21lc3NhZ2VzKCRzY29wZSk7XG5cblx0XHQgJHNjb3BlLmRhdGVwaWNrZXIgPSBudWxsO1xuXHRcdCAkc2NvcGUuaXNfbXVsdGlfZGF0ZSA9IGZhbHNlO1xuXHRcdCAkc2NvcGUuQ1RSTF9LRVkgPSAxNztcblx0XHQgJHNjb3BlLkxFRlRfU0hJRlRfS0VZID0gMTY7XG5cdFx0ICRzY29wZS5jdHJsX2tleV9kb3duID0gZmFsc2U7XG5cdFx0ICRzY29wZS5zaGlmdF9rZXlfZG93biA9IGZhbHNlO1xuXHRcdCAkc2NvcGUuaXNfdmlzaWJsZSA9IGZhbHNlO1xuXG5cdFx0IC8vIERlZmF1bHQgY29udGFpbmVyIGZvciBkYXRlcGlja2VyIGlzIFwiYm9keVwiLCBidXQgY2FuIGJlIG92ZXJyaWRkZW5cblx0XHQgJHNjb3BlLmNvbnRhaW5lciA9ICQoXCJib2R5XCIpO1xuXHRcdCBpZighJHNjb3BlLmNvbnRhaW5lcl9pZClcblx0XHQge1xuXHRcdFx0ICRzY29wZS5jb250YWluZXIgPSAkKFwiI1wiICsgJHNjb3BlLmNvbnRhaW5lcl9pZCk7XG5cdFx0IH1cblxuXHRcdCB2YXIgYnV0dG9uc19odG1sX3dpdGhfcGlja2VyID0gXCI8dGZvb3Q+PHRyPlwiICtcblx0XHRcdFx0IFwiPHRoIHN0eWxlPSdkaXNwbGF5OiB0YWJsZS1jZWxsOycgbmctY2xhc3M9XFxcInthY3RpdmU6IGlzX211bHRpX2RhdGV9XFxcIiBuZy1jbGljaz0ndG9nZ2xlX211bHRpKCknIGNvbHNwYW49JzInIGNsYXNzPSdtdWx0aSc+TXVsdGk8L3RoPlwiICtcblx0XHRcdFx0IC8vXCI8dGggc3R5bGU9J2Rpc3BsYXk6IHRhYmxlLWNlbGw7JyBjb2xzcGFuPSczJyBjbGFzcz0ndG9kYXknPlRvZGF5PC90aD5cIiArXG5cdFx0XHRcdCBcIjx0aCBzdHlsZT0nZGlzcGxheTogdGFibGUtY2VsbDsnIG5nLWNsaWNrPSdjbG9zZV9kYXRlX3BpY2tlcigpJyBjb2xzcGFuPSczJyBjbGFzcz0nbXVsdGknPkNsb3NlPC90aD5cIiArXG5cdFx0XHRcdFx0IC8vXHRcImNsYXNzPSdjbG9zZSc+Q2xvc2U8L3RoPjwvdHI+PC90Zm9vdD5cIjtcblx0XHRcdFx0IFwiPHRoIHN0eWxlPSdkaXNwbGF5OiB0YWJsZS1jZWxsOycgY29sc3Bhbj0nMicgY2xhc3M9J2NsZWFyJz5DbGVhcjwvdGg+PC90cj5cIjtcblxuXHRcdCB2YXIgYnV0dG9uc19odG1sID0gXCI8dGZvb3Q+PHRyPlwiICtcblx0XHRcdFx0IFwiPHRoIHN0eWxlPSdkaXNwbGF5OiB0YWJsZS1jZWxsOycgY29sc3Bhbj0nNCcgY2xhc3M9J3RvZGF5Jz5Ub2RheTwvdGg+XCIgK1xuXHRcdFx0XHQgXCI8dGggc3R5bGU9J2Rpc3BsYXk6IHRhYmxlLWNlbGw7JyBjb2xzcGFuPSczJyBjbGFzcz0nY2xlYXInPkNsZWFyPC90aD48L3RyPlwiO1xuXHRcdFx0XHQgLy9cIjx0ciBjbGFzcz0nY2xvc2UnPjx0aCBzdHlsZT0nZGlzcGxheTogdGFibGUtY2VsbDsnIG5nLWNsaWNrPSdjbG9zZV9kYXRlX3BpY2tlcigpJyBjb2xzcGFuPSc3JyBcIiArXG5cdFx0IFx0XHRcdC8vXHRcImNsYXNzPSdjbG9zZSc+Q2xvc2U8L3RoPjwvdHI+PC90Zm9vdD5cIjtcblxuXHRcdCAkc2NvcGUuY3JlYXRlX2RhdGVwaWNrZXIgPSBmdW5jdGlvbiBjcmVhdGVfZGF0ZXBpY2tlcigpXG5cdFx0IHtcblx0XHRcdCAvLyBCdWlsZCBkYXRlcGlja2VyLiBCeSBkZWZhdWx0IHB1dCBpdCBpbiB0aGUgPGJvZHk+IHRhZyBzbyB0aGF0IGl0IGlzXG5cdFx0XHQgLy8gcGxhY2VkIGNvcnJlY3RseSBhbmQgaXMgYWx3YXlzIG9uIHRvcC4gVGhleSBjb250YWluZXIgY2FuIGJlIG92ZXJyaWRkZW5cblx0XHRcdCAvLyB0aG91Z2guXG5cdFx0XHQgaWYoJHNjb3BlLmNvbnRhaW5lcl9pZCA9PSBudWxsKVxuXHRcdFx0IHtcblx0XHRcdFx0ICRzY29wZS5kYXRlcGlja2VyLmRhdGVwaWNrZXIoe1xuXHRcdFx0XHRcdCBtdWx0aWRhdGU6ICRzY29wZS5pc19tdWx0aV9kYXRlLFxuXHRcdFx0XHRcdCBhdXRvY2xvc2U6ICEkc2NvcGUuaXNfbXVsdGlfZGF0ZSxcblx0XHRcdFx0XHQgdG9kYXlIaWdobGlnaHQ6IHRydWUsXG5cdFx0XHRcdFx0IHRvZGF5QnRuOiAnbGlua2VkJyxcblx0XHRcdFx0XHQgY2xlYXJCdG46IHRydWUsXG5cdFx0XHRcdFx0IHRvZ2dsZUFjdGl2ZTogJHNjb3BlLmlzX211bHRpX2RhdGUsXG5cdFx0XHRcdFx0IG9yaWVudGF0aW9uOiAkc2NvcGUub3JpZW50YXRpb24sXG5cdFx0XHRcdFx0IGZvcm1hdDogJ3l5eXktbW0tZGQnLFxuXHRcdFx0XHRcdCBzaG93T25Gb2N1czogZmFsc2UsXG5cdFx0XHRcdFx0IGtleWJvYXJkTmF2aWdhdGlvbjogZmFsc2Vcblx0XHRcdFx0IH0pO1xuXHRcdFx0IH1cblx0XHRcdCBlbHNlXG5cdFx0XHQge1xuXHRcdFx0XHQgJHNjb3BlLmRhdGVwaWNrZXIuZGF0ZXBpY2tlcih7XG5cdFx0XHRcdFx0IG11bHRpZGF0ZTogJHNjb3BlLmlzX211bHRpX2RhdGUsXG5cdFx0XHRcdFx0IGF1dG9jbG9zZTogISRzY29wZS5pc19tdWx0aV9kYXRlLFxuXHRcdFx0XHRcdCB0b2RheUhpZ2hsaWdodDogdHJ1ZSxcblx0XHRcdFx0XHQgdG9kYXlCdG46ICdsaW5rZWQnLFxuXHRcdFx0XHRcdCBjbGVhckJ0bjogdHJ1ZSxcblx0XHRcdFx0XHQgdG9nZ2xlQWN0aXZlOiAkc2NvcGUuaXNfbXVsdGlfZGF0ZSxcblx0XHRcdFx0XHQgb3JpZW50YXRpb246ICRzY29wZS5vcmllbnRhdGlvbixcblx0XHRcdFx0XHQgZm9ybWF0OiAneXl5eS1tbS1kZCcsXG5cdFx0XHRcdFx0IGNvbnRhaW5lcjogJyMnICsgJHNjb3BlLmNvbnRhaW5lcl9pZCxcblx0XHRcdFx0XHQgc2hvd09uRm9jdXM6IGZhbHNlLFxuXHRcdFx0XHRcdCBrZXlib2FyZE5hdmlnYXRpb246IGZhbHNlXG5cdFx0XHRcdCB9KTtcblxuXHRcdFx0IH1cblxuXHRcdFx0ICRzY29wZS5kYXRlcGlja2VyLmRhdGVwaWNrZXIoKS5vbignc2hvdycsIGZ1bmN0aW9uICgpXG5cdFx0XHQge1xuXHRcdFx0XHQgJHNjb3BlLmlzX3Zpc2libGUgPSB0cnVlO1xuXHRcdFx0IH0pO1xuXG5cdFx0XHQgJHNjb3BlLmRhdGVwaWNrZXIuZGF0ZXBpY2tlcigpLm9uKCdoaWRlJywgZnVuY3Rpb24gKClcblx0XHRcdCB7XG5cdFx0XHRcdCAkc2NvcGUuaXNfdmlzaWJsZSA9IGZhbHNlO1xuXHRcdFx0IH0pO1xuXHRcdCB9O1xuXG5cdFx0ICRzY29wZS50b2dnbGVfbXVsdGkgPSBmdW5jdGlvbiB0b2dnbGVfbXVsdGkoZm9yY2VfdHJ1ZSwgaW5wdXRfc3RyaW5nKVxuXHRcdCB7XG5cdFx0XHQgaWYoJHNjb3BlLnVzZV9tdWx0aV9kYXRlID09ICd0cnVlJylcblx0XHRcdCB7XG5cdFx0XHRcdCAkc2NvcGUuaXNfbXVsdGlfZGF0ZSA9IGZvcmNlX3RydWUgfHwgISRzY29wZS5pc19tdWx0aV9kYXRlO1xuXHRcdFx0XHQgJHNjb3BlLmRhdGVwaWNrZXIuZGF0ZXBpY2tlcigncmVtb3ZlJyk7XG5cdFx0XHRcdCAkc2NvcGUuY3JlYXRlX2RhdGVwaWNrZXIoKTtcblx0XHRcdFx0ICRzY29wZS5kYXRlcGlja2VyLmRhdGVwaWNrZXIoJ3Nob3cnKTtcblxuXHRcdFx0XHQgLy8gRGF0ZXBpY2tlciBmb3JjZXMgdmFsaWQgZGF0ZXMgb24gdGhlIGlucHV0IGJveCB3aGVuIHRoZSBkYXRlcGlja2VyIG9wZW5zLiBUaGlzIGJyZWFrc1xuXHRcdFx0XHQgLy8gbWFudWFsIGVudHJ5IHdoZW4geW91IGlzdGFydCB0byBlbnRlciBhIHNlY29uZCBkYXRlIGFuZCBhdXRvIHN3aXRjaCB0byBtdWx0aSBkYXRlIG1vZGUuXG5cdFx0XHRcdCAvLyBXZSBwdXQgdGhlIGRhdGUgc3RyaW5nIGJhY2sgaW4gYWZ0ZXIgdGhlIHBhcnNlIG9jY3VycywgdG8gYWNjb3VudCBmb3IgdGhpc1xuXHRcdFx0XHQgaWYoaW5wdXRfc3RyaW5nICYmIGlucHV0X3N0cmluZy5sZW5ndGggPiAwKVxuXHRcdFx0XHQge1xuXHRcdFx0XHRcdCBlbGVtZW50LmZpbmQoXCJpbnB1dFwiKS52YWwoaW5wdXRfc3RyaW5nKTtcblx0XHRcdFx0IH1cblx0XHRcdCB9XG5cdFx0IH07XG5cblx0XHQgLy8gV2UgYXNzdW1lIHRoZSBjbGllbnQgaXMgZG9uZSBwaWNraW5nIG11bHRpcGxlIGRhdGVzIHdoZW4gdGhleSByZWxlYXNlIGNvbnRyb2xcblx0XHQgLy8gQ2xvc2UgdGhlIGRhdGVwaWNrZXJcblx0XHQgJHNjb3BlLmtleV91cCA9IGZ1bmN0aW9uIGtleV91cChldmVudClcblx0XHQge1xuXHRcdFx0IGlmICgkc2NvcGUudXNlX211bHRpX2RhdGUgPT0gJ3RydWUnKVxuXHRcdFx0IHtcblx0XHRcdFx0IC8vIFN3aXRjaCB0byBtdWx0aS1kYXRlIGlmIGEgZGF0ZSBzZXBlcmF0b3IgKGNvbW1hKSBpcyBlbnRlcmVkXG5cdFx0XHRcdCBpZiAoISRzY29wZS5pc19tdWx0aV9kYXRlKVxuXHRcdFx0XHQge1xuXHRcdFx0XHRcdCB2YXIgaW5wdXRfdmFsdWUgPSBlbGVtZW50LmZpbmQoXCJpbnB1dFwiKS52YWwoKTtcblx0XHRcdFx0XHQgaWYgKGlucHV0X3ZhbHVlLnNlYXJjaChcIixcIikgIT0gLTEpXG5cdFx0XHRcdFx0IHtcblx0XHRcdFx0XHRcdCAkc2NvcGUudG9nZ2xlX211bHRpKHRydWUsIGlucHV0X3ZhbHVlKTtcblx0XHRcdFx0XHQgfVxuXHRcdFx0XHQgfVxuXG5cdFx0XHRcdCBpZiAoZXZlbnQua2V5Q29kZSA9PSAkc2NvcGUuQ1RSTF9LRVkpXG5cdFx0XHRcdCB7XG5cdFx0XHRcdFx0ICRzY29wZS5jbG9zZV9kYXRlX3BpY2tlcihldmVudCk7XG5cdFx0XHRcdFx0ICRzY29wZS5jdHJsX2tleV9kb3duID0gZmFsc2U7XG5cdFx0XHRcdCB9XG5cdFx0XHRcdCBlbHNlIGlmIChldmVudC5rZXlDb2RlID09ICRzY29wZS5MRUZUX1NISUZUX0tFWSlcblx0XHRcdFx0IHtcblx0XHRcdFx0XHQgJHNjb3BlLmNsb3NlX2RhdGVfcGlja2VyKGV2ZW50KTtcblx0XHRcdFx0XHQgJHNjb3BlLnNoaWZ0X2tleV9kb3duID0gZmFsc2U7XG5cdFx0XHRcdCB9XG5cdFx0XHQgfVxuXHRcdCB9O1xuXG5cdFx0IC8vIFN3aXRjaCB0byBtdWx0aS1kYXRlIG1vZGUgd2hlbiBjb250cm9sIG9yIHNoaWZ0IGlzIHByZXNzZWRcblx0XHQgJHNjb3BlLmtleV9kb3duID0gZnVuY3Rpb24ga2V5X2Rvd24oZXZlbnQpXG5cdFx0IHtcblx0XHRcdCBpZiAoJHNjb3BlLnVzZV9tdWx0aV9kYXRlID09ICd0cnVlJylcblx0XHRcdCB7XG5cdFx0XHRcdCAvLyBTd2l0Y2ggdG8gbXVsdGktZGF0ZSB3aGVuIGN0cmwgaXMgcHJlc3NlZC4gRm9yIHNlbGVjdGluZyBhcmJpdHJhcnkgZGF0ZXNcblx0XHRcdFx0IGlmICgkc2NvcGUuY3RybF9rZXlfZG93bilcblx0XHRcdFx0IHtcblx0XHRcdFx0XHQgcmV0dXJuO1xuXHRcdFx0XHQgfVxuXG5cdFx0XHRcdCBpZiAoZXZlbnQua2V5Q29kZSA9PSAkc2NvcGUuQ1RSTF9LRVkpXG5cdFx0XHRcdCB7XG5cdFx0XHRcdFx0ICRzY29wZS5jdHJsX2tleV9kb3duID0gdHJ1ZTtcblx0XHRcdFx0XHQgJHNjb3BlLnRvZ2dsZV9tdWx0aSh0cnVlKTtcblx0XHRcdFx0IH1cblx0XHRcdFx0IC8vIFN3aXRjaCB0byBtdWx0aS1kYXRlIHdoZW4gc2hpZnQuIEZvciBzZWxlY3RpbmcgZGF0ZSByYW5nZXMuIE5PVCBJTVBMRU1FTlRFRFxuXHRcdFx0XHQgZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PSAkc2NvcGUuTEVGVF9TSElGVF9LRVkpXG5cdFx0XHRcdCB7XG5cdFx0XHRcdFx0ICRzY29wZS5zaGlmdF9rZXlfZG93biA9IHRydWU7XG5cdFx0XHRcdFx0ICRzY29wZS50b2dnbGVfbXVsdGkodHJ1ZSk7XG5cdFx0XHRcdCB9XG5cdFx0XHQgfVxuXHRcdCB9O1xuXG5cdFx0ICRzY29wZS5vbl9mb2N1cyA9IGZ1bmN0aW9uIG9uX2ZvY3VzKGV2ZW50KVxuXHRcdCB7XG5cdFx0XHQgLy8gUHJldmVudCB0b2dnbGluZyBkYXRlcGlja2VyIG9uIGNsaWNrIGFuZCBvbiBmb2N1c1xuXHRcdFx0IGlmKCEkc2NvcGUuaXNfdmlzaWJsZSlcblx0XHRcdCB7XG5cdFx0XHRcdCAkc2NvcGUub3Blbl9kYXRlX3BpY2tlcihldmVudCk7XG5cdFx0XHQgfVxuXG5cdFx0XHQgJHNjb3BlLmZvY3VzX2ZuKCk7XG5cdFx0IH07XG5cblx0XHQgJHNjb3BlLm9uX2NsaWNrID0gZnVuY3Rpb24gb25fY2xpY2soZXZlbnQpXG5cdFx0IHtcblx0XHRcdCAvLyBUb2dnbGUgZGF0ZXBpY2tlciBvcGVuL2Nsb3NlZFxuXHRcdFx0IGlmKCEkc2NvcGUuaXNfdmlzaWJsZSlcblx0XHRcdCB7XG5cdFx0XHRcdCAkc2NvcGUub3Blbl9kYXRlX3BpY2tlcihldmVudCk7XG5cdFx0XHQgfVxuXHRcdCB9O1xuXG5cdFx0ICRzY29wZS5vcGVuX2RhdGVfcGlja2VyID0gZnVuY3Rpb24gb3Blbl9kYXRlX3BpY2tlcihldmVudClcblx0XHQge1xuXHRcdFx0IHZhciBkYXRlcyA9IGVsZW1lbnQuZmluZChcImlucHV0XCIpLnZhbCgpLnNwbGl0KCcsJyk7XG5cdFx0XHQgdmFyIG5ld19pc19tdWx0aV9kYXRlID0gZmFsc2U7XG5cblx0XHRcdCAvLyBVc2Ugd2hhdGV2ZXIgZGF0ZXMgYXJlIGluIHRoZSBpbnB1dCBib3ggd2hlbiBvcGVuaW5nIGRhdGVwaWNrZXJcblx0XHRcdCBpZihkYXRlcyAmJiBkYXRlcy5sZW5ndGggPiAxKVxuXHRcdFx0IHtcblx0XHRcdFx0IG5ld19pc19tdWx0aV9kYXRlID0gdHJ1ZTtcblx0XHRcdCB9XG5cblx0XHRcdCAkc2NvcGUuZGF0ZXBpY2tlci5kYXRlcGlja2VyKCdzZXREYXRlcycsIGRhdGVzKTtcblxuXHRcdFx0IC8vIFN3aXRjaCBiZXR3ZWVuIG11bHRpIGRhdGUgYW5kIHNpbmdsZSBkYXRlIHBpY2tlciBkZXBlbmRpbmcgb24gbnVtYmVyIG9mIGRhdGVzIGluXG5cdFx0XHQgLy8gaW5wdXQgYm94XG5cdFx0XHQgaWYoJHNjb3BlLnVzZV9tdWx0aV9kYXRlID09ICd0cnVlJyAmJiBuZXdfaXNfbXVsdGlfZGF0ZSAhPSAkc2NvcGUuaXNfbXVsdGlfZGF0ZSlcblx0XHRcdCB7XG5cdFx0XHRcdCAkc2NvcGUudG9nZ2xlX211bHRpKCk7XG5cdFx0XHQgfVxuXHRcdFx0IGVsc2Vcblx0XHRcdCB7XG5cdFx0XHRcdCAkc2NvcGUuZGF0ZXBpY2tlci5kYXRlcGlja2VyKCdzaG93Jyk7XG5cdFx0XHQgfVxuXHRcdCB9O1xuXG5cdFx0ICRzY29wZS5jbG9zZV9kYXRlX3BpY2tlciA9IGZ1bmN0aW9uIGNsb3NlX2RhdGVfcGlja2VyKGV2ZW50KVxuXHRcdCB7XG5cdFx0XHQgJHNjb3BlLmRhdGVwaWNrZXIuZGF0ZXBpY2tlcignaGlkZScpO1xuXHRcdCB9O1xuXG5cdFx0IC8vIHdyYXAgZm9jdXMgZnVuY3Rpb24gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaWVsZF9oZWxwZXJcblx0XHQgJHNjb3BlLmZvY3VzX2ZuID0gZnVuY3Rpb24gb25fZm9jdXMoKVxuXHRcdCB7XG5cdFx0XHQgaWYoYW5ndWxhci5pc0Z1bmN0aW9uKCRzY29wZS5vbl9mb2N1c19mbikpXG5cdFx0XHQge1xuXHRcdFx0XHQgLy8gb25seSBjYWxsIHRoZSBmb2N1cyBmdW5jdGlvbiBpZiB0aGUgZmllbGQgc3RpbGwgaGFzIGZvY3VzIGFmdGVyIGEgdGltZW91dFxuXHRcdFx0XHQgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0IGlmKCQoZWxlbWVudCkuZmluZChcIiBpbnB1dDplbmFibGVkLCBzZWxlY3Q6ZW5hYmxlZCwgdGV4dGFyZWE6ZW5hYmxlZCBcIikuaXMoJzpmb2N1cycpKVxuXHRcdFx0XHRcdCB7XG5cdFx0XHRcdFx0XHQgJHNjb3BlLm9uX2ZvY3VzX2ZuKCk7XG5cdFx0XHRcdFx0IH1cblx0XHRcdFx0XHQgZWxzZVxuXHRcdFx0XHRcdCB7XG5cdFx0XHRcdFx0XHQgY29uc29sZS5sb2coJ2lnbm9yaW5nIG9uIGZvY3VzIGZ1bmN0aW9uIC0gZWxlbWVudCBpcyBubyBsb25nZXIgaW4gZm9jdXMnLCAkc2NvcGUubmFtZSlcblx0XHRcdFx0XHQgfVxuXHRcdFx0XHQgfSk7XG5cdFx0XHQgfVxuXHRcdCB9O1xuXG5cdFx0ICRzY29wZS4kd2F0Y2goJ2ZvY3VzX2ZpZWxkJywgZnVuY3Rpb24oKVxuXHRcdCB7XG5cdFx0XHQgaWYoJHNjb3BlLmZvY3VzX2ZpZWxkID09ICRzY29wZS5uYW1lKVxuXHRcdFx0IHtcblx0XHRcdFx0IHZhciBpbnB1dF9ib3ggPSBlbGVtZW50LmZpbmQoXCJpbnB1dFwiKTtcblx0XHRcdFx0IC8vIEZvY3VzIGFuZCBzZWxlY3QgdGhlIGlucHV0IGVsZW1lbnRcblx0XHRcdFx0ICR0aW1lb3V0KGZ1bmN0aW9uKClcblx0XHRcdFx0IHtcblx0XHRcdFx0XHQgaWYoIWlucHV0X2JveC5pcygnOmZvY3VzJykpXG5cdFx0XHRcdFx0IHtcblx0XHRcdFx0XHRcdCBpbnB1dF9ib3guZm9jdXMoKTtcblx0XHRcdFx0XHQgfVxuXHRcdFx0XHRcdCBpbnB1dF9ib3guc2VsZWN0KCk7XG5cdFx0XHRcdCB9KTtcblx0XHRcdCB9XG5cdFx0IH0pO1xuXG5cdFx0IC8vIEluaXRpYWwgRGF0ZXBpY2tlciBzZXR1cFxuXHRcdCAkdGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHQgdmFyIGRhdGVfcGlja2VyX2lkID0gYXR0cmlidXRlLmNhRGF0ZVBpY2tlcklkO1xuXHRcdFx0IGlmKCFkYXRlX3BpY2tlcl9pZClcblx0XHRcdCB7XG5cdFx0XHRcdCBkYXRlX3BpY2tlcl9pZCA9ICdjYS1kYXRlLXBpY2tlcic7XG5cdFx0XHQgfVxuXHRcdFx0ICRzY29wZS5kYXRlcGlja2VyID0gJCgnIycgKyBkYXRlX3BpY2tlcl9pZCkuZmluZCgnaW5wdXQnKTtcblx0XHRcdCAkc2NvcGUuY3JlYXRlX2RhdGVwaWNrZXIoKTtcblxuXHRcdFx0ICRzY29wZS5kYXRlcGlja2VyLm9uKCdzaG93JywgZnVuY3Rpb24oZSkge1xuXG5cdFx0XHRcdCAvLyBTaG93IG11bHRpIGJ1dHRvbiBvbmx5IGlmIHRoaXMgaXMgYSBtdWx0aS1kYXRlIHBpY2tlclxuXHRcdFx0XHQgdmFyIGRyb3Bkb3duID0gJChcIi5kYXRlcGlja2VyLmRhdGVwaWNrZXItZHJvcGRvd25cIik7XG5cdFx0XHRcdCB2YXIgZm9vdGVyID0gZHJvcGRvd24uZmluZCgndGZvb3QnKTtcblx0XHRcdFx0IGlmKCRzY29wZS51c2VfbXVsdGlfZGF0ZSA9PSAndHJ1ZScpXG5cdFx0XHRcdCB7XG5cdFx0XHRcdFx0IGZvb3Rlci5yZXBsYWNlV2l0aChidXR0b25zX2h0bWxfd2l0aF9waWNrZXIpO1xuXHRcdFx0XHQgfVxuXHRcdFx0XHQgZWxzZVxuXHRcdFx0XHQge1xuXHRcdFx0XHRcdCBmb290ZXIucmVwbGFjZVdpdGgoYnV0dG9uc19odG1sKTtcblx0XHRcdFx0IH1cblx0XHRcdFx0IGZvb3RlciA9IGRyb3Bkb3duLmZpbmQoJ3Rmb290Jyk7XG5cdFx0XHRcdCAkY29tcGlsZShmb290ZXIuY29udGVudHMoKSkoJHNjb3BlKTtcblx0XHRcdFx0ICRzY29wZS5pbml0aWFsaXphdGlvbl9jb21wbGV0ZSA9IHRydWU7XG5cdFx0XHQgfSlcblx0XHQgfSk7XG5cdCB9O1xuXG5cdCByZXR1cm4ge1xuXHRcdCByZXN0cmljdDogJ0VBJyxcblx0XHQgc2NvcGU6IHNjb3BlLFxuXHRcdCByZXBsYWNlOiB0cnVlLFxuXHRcdCB0ZW1wbGF0ZVVybDogdGVtcGxhdGVfZnVuY3Rpb24sXG5cdFx0IGxpbms6IGxpbmtfZnVuY3Rpb24sXG5cdFx0IGNvbnRyb2xsZXI6IGhlbHBlci5kZWZhdWx0X2NvbnRyb2xsZXJcblx0IH07XG5cbiB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHQnY2FGaWVsZERhdGUzJyxcblxuXHRbXG5cdFx0JyR0aW1lb3V0Jyxcblx0XHQnZmllbGRIZWxwZXJTZXJ2aWNlJyxcblxuXHRmdW5jdGlvbihcblx0XHQkdGltZW91dCwgaGVscGVyXG5cdClcbntcblx0dmFyIGRlZmF1bHRfc2NvcGUgPSBhbmd1bGFyLmNvcHkoaGVscGVyLmRlZmF1bHRfc2NvcGUpO1xuXG5cdGRlbGV0ZSBkZWZhdWx0X3Njb3BlLmZvY3VzX2ZuO1xuXHRkZWZhdWx0X3Njb3BlLm9uX2ZvY3VzX2ZuX3llYXIgPSAnJmNhRm9jdXNZZWFyJztcblx0ZGVmYXVsdF9zY29wZS5vbl9mb2N1c19mbl9tb250aCA9ICcmY2FGb2N1c01vbnRoJztcblx0ZGVmYXVsdF9zY29wZS5vbl9mb2N1c19mbl9kYXkgPSAnJmNhRm9jdXNEYXknO1xuXG5cdHZhciBnZXRfZGF0ZSA9IGZ1bmN0aW9uIGdldF9kYXRlKG5ld192YWx1ZSwgb2xkX3ZhbHVlLCAkc2NvcGUpXG5cdHtcblx0XHQkc2NvcGUuZmllbGRfeWVhciA9ICcnO1xuXHRcdCRzY29wZS5maWVsZF9tb250aCA9ICcnO1xuXHRcdCRzY29wZS5maWVsZF9kYXkgPSAnJztcblxuXHRcdGlmKCFuZXdfdmFsdWUpXG5cdFx0e1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBkYXRlX3BhcnRfYXJyYXkgPSBuZXdfdmFsdWUuc3BsaXQoJy0nKTtcblxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGRhdGVfcGFydF9hcnJheVswXSkpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLmZpZWxkX3llYXIgPSBkYXRlX3BhcnRfYXJyYXlbMF07XG5cdFx0fVxuXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZGF0ZV9wYXJ0X2FycmF5WzFdKSlcblx0XHR7XG5cdFx0XHQkc2NvcGUuZmllbGRfbW9udGggPSBkYXRlX3BhcnRfYXJyYXlbMV07XG5cdFx0fVxuXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZGF0ZV9wYXJ0X2FycmF5WzJdKSlcblx0XHR7XG5cdFx0XHQkc2NvcGUuZmllbGRfZGF5ID0gZGF0ZV9wYXJ0X2FycmF5WzJdO1xuXHRcdH1cblx0fTtcblxuXHR2YXIgcHV0X2RhdGUgPSBmdW5jdGlvbiBwdXRfZGF0ZShuZXdfdmFsdWUsIG9sZF92YWx1ZSwgJHNjb3BlKVxuXHR7XG5cdFx0aWYoISRzY29wZS5maWVsZF95ZWFyICYmICEkc2NvcGUuZmllbGRfbW9udGggJiYgISRzY29wZS5maWVsZF9kYXkpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLm1vZGVsID0gbnVsbDtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdCRzY29wZS5tb2RlbCA9ICRzY29wZS5maWVsZF95ZWFyICsgJy0nICtcblx0XHRcdFx0JHNjb3BlLmZpZWxkX21vbnRoICsgJy0nICtcblx0XHRcdFx0JHNjb3BlLmZpZWxkX2RheTtcblx0XHR9XG5cdH07XG5cblx0dmFyIHRlbXBsYXRlX2Z1bmN0aW9uID0gZnVuY3Rpb24gdGVtcGxhdGVfZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlcykge1xuXHRcdHJldHVybiBoZWxwZXIucmVzb2x2ZV90ZW1wbGF0ZShhdHRyaWJ1dGVzLCAnc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC9jYV9maWVsZF9kYXRlMycpO1xuXHR9O1xuXG5cdHZhciBsaW5rX2Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0e1xuXHRcdC8vIERvbid0IGNhbGwgdGhlIGhlbHBlciBkZWZhdWx0IGxpbmsgZnVuY3Rpb24sIHdlIHdhbnQgdG8gZG8gaXQgZGlmZmVyZW50bHlcblx0XHQvLyBXZSBkbyBzdGlsbCBuZWVkIHRvIG1lcmdlIHRoZSB0aXRsZSBtZXNzYWdlcyB0aG91Z2hcblx0XHRoZWxwZXIubWVyZ2VfdGl0bGVfbWVzc2FnZXMoJHNjb3BlKTtcblxuXHRcdCRzY29wZS5maWVsZF95ZWFyID0gJyc7XG5cdFx0JHNjb3BlLmZpZWxkX21vbnRoID0gJyc7XG5cdFx0JHNjb3BlLmZpZWxkX2RheSA9ICcnO1xuXG5cdFx0Ly8gd3JhcCBlYWNoIG9mIHRoZSBmb2N1cyBmdW5jdGlvbnMgdGhlIHNhbWUgd2F5IGFzIHRoZSBmaWVsZF9oZWxwZXJcblxuXHRcdCRzY29wZS5mb2N1c19mbl95ZWFyID0gZnVuY3Rpb24gZm9jdXNfZm5feWVhcigpXG5cdFx0e1xuXHRcdFx0aWYoYW5ndWxhci5pc0Z1bmN0aW9uKCRzY29wZS5vbl9mb2N1c19mbl95ZWFyKSlcblx0XHRcdHtcblx0XHRcdFx0Ly8gb25seSBjYWxsIHRoZSBmb2N1cyBmdW5jdGlvbiBpZiB0aGUgZmllbGQgc3RpbGwgaGFzIGZvY3VzIGFmdGVyIGEgdGltZW91dFxuXHRcdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZigkKGVsZW1lbnQpLmZpbmQoXCIgaW5wdXQ6ZW5hYmxlZCwgc2VsZWN0OmVuYWJsZWQsIHRleHRhcmVhOmVuYWJsZWQgXCIpLmlzKCc6Zm9jdXMnKSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHQkc2NvcGUub25fZm9jdXNfZm5feWVhcigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2lnbm9yaW5nIG9uIGZvY3VzIGZ1bmN0aW9uIC0gZWxlbWVudCBpcyBubyBsb25nZXIgaW4gZm9jdXMnLCAkc2NvcGUubmFtZSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQkc2NvcGUuZm9jdXNfZm5fbW9udGggPSBmdW5jdGlvbiBmb2N1c19mbl9tb250aCgpXG5cdFx0e1xuXHRcdFx0aWYoYW5ndWxhci5pc0Z1bmN0aW9uKCRzY29wZS5vbl9mb2N1c19mbl9tb250aCkpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIG9ubHkgY2FsbCB0aGUgZm9jdXMgZnVuY3Rpb24gaWYgdGhlIGZpZWxkIHN0aWxsIGhhcyBmb2N1cyBhZnRlciBhIHRpbWVvdXRcblx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYoJChlbGVtZW50KS5maW5kKFwiIGlucHV0OmVuYWJsZWQsIHNlbGVjdDplbmFibGVkLCB0ZXh0YXJlYTplbmFibGVkIFwiKS5pcygnOmZvY3VzJykpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0JHNjb3BlLm9uX2ZvY3VzX2ZuX21vbnRoKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnaWdub3Jpbmcgb24gZm9jdXMgZnVuY3Rpb24gLSBlbGVtZW50IGlzIG5vIGxvbmdlciBpbiBmb2N1cycsICRzY29wZS5uYW1lKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdCRzY29wZS5mb2N1c19mbl9kYXkgPSBmdW5jdGlvbiBmb2N1c19mbl9kYXkoKVxuXHRcdHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNGdW5jdGlvbigkc2NvcGUub25fZm9jdXNfZm5fZGF5KSlcblx0XHRcdHtcblx0XHRcdFx0Ly8gb25seSBjYWxsIHRoZSBmb2N1cyBmdW5jdGlvbiBpZiB0aGUgZmllbGQgc3RpbGwgaGFzIGZvY3VzIGFmdGVyIGEgdGltZW91dFxuXHRcdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZigkKGVsZW1lbnQpLmZpbmQoXCIgaW5wdXQ6ZW5hYmxlZCwgc2VsZWN0OmVuYWJsZWQsIHRleHRhcmVhOmVuYWJsZWQgXCIpLmlzKCc6Zm9jdXMnKSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHQkc2NvcGUub25fZm9jdXNfZm5fZGF5KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnaWdub3Jpbmcgb24gZm9jdXMgZnVuY3Rpb24gLSBlbGVtZW50IGlzIG5vIGxvbmdlciBpbiBmb2N1cycsICRzY29wZS5uYW1lKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdCRzY29wZS4kd2F0Y2goJ2ZvY3VzX2ZpZWxkJyxcblx0XHRcdGZ1bmN0aW9uIHVwZGF0ZV9mb2N1cyhuZXdfdmFsdWUsIG9sZF92YWx1ZSwgJHNjb3BlKVxuXHRcdHtcblx0XHRcdGlmKCRzY29wZS5mb2N1c19maWVsZCA9PSAkc2NvcGUubmFtZSArIFwiW3llYXJdXCIpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIEZvY3VzIHRoZSBpbnB1dCBlbGVtZW50XG5cdFx0XHRcdCQoZWxlbWVudCkuZmluZChcIi5jYS1maWVsZC1kYXRlMyBpbnB1dFwiKS5nZXQoMCkuZm9jdXMoKS5zZWxlY3QoKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoJHNjb3BlLmZvY3VzX2ZpZWxkID09ICRzY29wZS5uYW1lICsgXCJbbW9udGhdXCIpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIEZvY3VzIHRoZSBpbnB1dCBlbGVtZW50XG5cdFx0XHRcdCQoZWxlbWVudCkuZmluZChcIi5jYS1maWVsZC1kYXRlMyBpbnB1dFwiKS5nZXQoMSkuZm9jdXMoKS5zZWxlY3QoKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoJHNjb3BlLmZvY3VzX2ZpZWxkID09ICRzY29wZS5uYW1lICsgXCJbZGF5XVwiKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBGb2N1cyB0aGUgaW5wdXQgZWxlbWVudFxuXHRcdFx0XHQkKGVsZW1lbnQpLmZpbmQoXCIuY2EtZmllbGQtZGF0ZTMgaW5wdXRcIikuZ2V0KDIpLmZvY3VzKCkuc2VsZWN0KCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBsaXN0ZW4gZm9yIGZvY3VzQ2FGb2N1c0ZpZWxkIGV2ZW50OiB3aGVuIGl0IG1hdGNoZXMsIGZvY3VzIHRoZSBlbGVtZW50XG5cdFx0JHNjb3BlLiRvbignZm9jdXNDYUZvY3VzRmllbGQnLCBmdW5jdGlvbihlLCBmb2N1cylcblx0XHR7XG5cdFx0XHRpZihKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cygkc2NvcGUubmFtZSkgJiYgJHNjb3BlLm5hbWUgPT0gZm9jdXMpXG5cdFx0XHR7XG5cdFx0XHRcdCQoZWxlbWVudCkuZmluZChcIi5jYS1maWVsZC1kYXRlMyBpbnB1dFwiKS5nZXQoMCkuZm9jdXMoKS5zZWxlY3QoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdCRzY29wZS4kd2F0Y2goJ21vZGVsJywgZ2V0X2RhdGUpO1xuXG5cdFx0JHNjb3BlLiR3YXRjaCgnZmllbGRfeWVhcicsIHB1dF9kYXRlKTtcblx0XHQkc2NvcGUuJHdhdGNoKCdmaWVsZF9tb250aCcsIHB1dF9kYXRlKTtcblx0XHQkc2NvcGUuJHdhdGNoKCdmaWVsZF9kYXknLCBwdXRfZGF0ZSk7XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdHNjb3BlOiBkZWZhdWx0X3Njb3BlLFxuXHRcdHRlbXBsYXRlVXJsOiB0ZW1wbGF0ZV9mdW5jdGlvbixcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdGxpbms6IGxpbmtfZnVuY3Rpb24sXG5cdFx0Y29udHJvbGxlcjogaGVscGVyLmRlZmF1bHRfY29udHJvbGxlclxuXHR9O1xuXG59XSk7XG5cbiIsImFuZ3VsYXIubW9kdWxlKCdDb21tb24nKS5kaXJlY3RpdmUoXG5cdCdjYUZpZWxkTnVtYmVyJyxcblxuXHRbXG5cdFx0J2ZpZWxkSGVscGVyU2VydmljZScsXG5cblx0ZnVuY3Rpb24oXG5cdFx0aGVscGVyXG5cdClcbntcblx0dmFyIHNjb3BlID0gYW5ndWxhci5jb3B5KGhlbHBlci5kZWZhdWx0X3Njb3BlKTtcblx0c2NvcGUucGFkX2xlbmd0aCA9ICdAY2FQYWRMZW5ndGgnO1xuXG5cdHZhciBsaW5rX2Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0e1xuXHRcdGlmKCEkc2NvcGUucGFkX2xlbmd0aClcblx0XHR7XG5cdFx0XHQkc2NvcGUucGFkX2xlbmd0aCA9IDA7XG5cdFx0fVxuXG5cdFx0Ly8gcnVuIHRoZSBkZWZhdWx0IGZpZWxkIGxpbmsgZnVuY3Rpb25cblx0XHRoZWxwZXIuZGVmYXVsdF9saW5rX2Z1bmN0aW9uKCRzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlLCBjb250cm9sbGVyKTtcblx0fTtcblxuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiAnRUFDJyxcblx0XHRzY29wZTogc2NvcGUsXG5cdFx0dGVtcGxhdGVVcmw6ICdzcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX2ZpZWxkX251bWJlci5qc3AnLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0bGluazogbGlua19mdW5jdGlvbixcblx0XHRjb250cm9sbGVyOiBoZWxwZXIuZGVmYXVsdF9jb250cm9sbGVyXG5cdH07XG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdDb21tb24nKS5kaXJlY3RpdmUoXG5cdCdjYUZpZWxkU2VsZWN0JyxcblxuXHRbXG5cdFx0J2ZpZWxkSGVscGVyU2VydmljZScsXG5cblx0ZnVuY3Rpb24oXG5cdFx0aGVscGVyXG5cdClcbntcblx0dmFyIHNjb3BlID0gYW5ndWxhci5jb3B5KGhlbHBlci5kZWZhdWx0X3Njb3BlKTtcblxuXHRzY29wZS5vcHRpb25zID0gJz1jYU9wdGlvbnMnO1xuXHRzY29wZS5pbmNsdWRlX2VtcHR5X29wdGlvbiA9ICdAY2FFbXB0eU9wdGlvbic7XG5cblx0dmFyIHRlbXBsYXRlX2Z1bmN0aW9uID0gZnVuY3Rpb24gdGVtcGxhdGVfZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlcykge1xuXHRcdHJldHVybiBoZWxwZXIucmVzb2x2ZV90ZW1wbGF0ZShhdHRyaWJ1dGVzLCAnc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC9jYV9maWVsZF9zZWxlY3QnKTtcblx0fTtcblxuICByZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiAnRUFDJyxcblx0XHRzY29wZTogc2NvcGUsXG5cdFx0dGVtcGxhdGVVcmw6IHRlbXBsYXRlX2Z1bmN0aW9uLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0bGluazogaGVscGVyLmRlZmF1bHRfbGlua19mdW5jdGlvbixcblx0XHRjb250cm9sbGVyOiBoZWxwZXIuZGVmYXVsdF9jb250cm9sbGVyXG5cdH07XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHQnY2FGaWVsZFRleHQnLFxuXG5cdFtcblx0XHQnZmllbGRIZWxwZXJTZXJ2aWNlJyxcblxuXHRmdW5jdGlvbihcblx0XHRoZWxwZXJcblx0KVxue1xuXHR2YXIgc2NvcGUgPSBhbmd1bGFyLmNvcHkoaGVscGVyLmRlZmF1bHRfc2NvcGUpO1xuXG5cdHNjb3BlLnJvd3MgPSAnQGNhUm93cyc7XG5cdHNjb3BlLm1heF9jaGFyYWN0ZXJzID0gJ0BjYU1heENoYXJhY3RlcnMnO1xuXG5cdHZhciB0ZW1wbGF0ZV9mdW5jdGlvbiA9IGZ1bmN0aW9uIHRlbXBsYXRlX2Z1bmN0aW9uKGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0XHRyZXR1cm4gaGVscGVyLnJlc29sdmVfdGVtcGxhdGUoYXR0cmlidXRlcywgJ3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfZmllbGRfdGV4dCcpO1xuXHR9O1xuXG5cdHZhciBsaW5rX2Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0e1xuXHRcdGlmKCEkc2NvcGUubW9kZWwpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLm1vZGVsID0gJyc7XG5cdFx0fVxuXG5cdFx0JHNjb3BlLiR3YXRjaCgnbW9kZWwnLCBmdW5jdGlvbihuZXdfdmFsdWUsIG9sZF92YWx1ZSlcblx0XHR7XG5cdFx0XHRpZihKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cygkc2NvcGUubW9kZWwpICYmICRzY29wZS5tb2RlbC5sZW5ndGggPiAkc2NvcGUubWF4X2NoYXJhY3RlcnMpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5lcnJvcl9tZXNzYWdlID0gXCJDaGFyYWN0ZXIgbGltaXQgZXhjZWVkZWQuIE1heCBhbGxvd2VkOiBcIiArICRzY29wZS5tYXhfY2hhcmFjdGVycztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGhlbHBlci5kZWZhdWx0X2xpbmtfZnVuY3Rpb24oJHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGUsIGNvbnRyb2xsZXIpO1xuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6ICdFQUMnLFxuXHRcdHNjb3BlOiBzY29wZSxcblx0XHR0ZW1wbGF0ZVVybDogdGVtcGxhdGVfZnVuY3Rpb24sXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRsaW5rOiBsaW5rX2Z1bmN0aW9uLFxuXHRcdGNvbnRyb2xsZXI6IGhlbHBlci5kZWZhdWx0X2NvbnRyb2xsZXJcblx0fTtcblxufV0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHQnY2FGaWVsZFRpbWUnLFxuXG5cdFtcblx0XHQnZmllbGRIZWxwZXJTZXJ2aWNlJyxcblx0XHQnJHRpbWVvdXQnLFxuXG5cdGZ1bmN0aW9uIChcblx0XHRoZWxwZXIsXG5cdFx0JHRpbWVvdXQpXG57XG5cblx0dmFyIHNjb3BlID0gYW5ndWxhci5jb3B5KGhlbHBlci5kZWZhdWx0X3Njb3BlKTtcblxuXHRzY29wZS5taW51dGVfc3RlcCA9ICc9Y2FNaW51dGVTdGVwJztcblxuXHQvKiBUaGVzZSBhcmUgYWxsIGF2YWlsYWJsZSBmb3IgdGhlIHRpbWVwaWNrZXIsIGJ1dCBhcmUgbm90IHdpcmVkIHVwIHlldFxuXHQgc2NvcGUuaW5wdXRfc2l6ZSA9ICdAY2FJbnB1dFNpemUnO1xuXHQgc2NvcGUudGVtcGxhdGUgPSAnQGNhVGVtcGxhdGUnO1xuXHQgc2NvcGUubWF4X2hvdXJzID0gJ0BjYU1heEhvdXJzJztcblx0IHNjb3BlLnNuYXBfdG9fc3RlcCA9ICdAY2FTbmFwVG9TdGVwJztcblx0IHNjb3BlLnNob3dfc2Vjb25kcyA9ICdAY2FTaG93U2Vjb25kcyc7XG5cdCBzY29wZS5kZWZhdWx0X3RpbWUgPSAnQGNhRGVmYXVsdFRpbWUnO1xuXHQgc2NvcGUuc2hvd19tZXJpZGlhbiA9ICdAY2FTaG93TWVyaWRpYW4nO1xuXHQgc2NvcGUuc2hvd19pbnB1dHMgPSAnQGNhU2hvd0lucHV0cyc7XG5cdCBzY29wZS5kaXNhYmxlX2ZvY3VzID0gJ0BjYURpc2FibGVGb2N1cyc7XG5cdCBzY29wZS5kaXNhYmxlX21vdXNld2hlZWwgPSAnQGNhRGlzYWJsZU1vdXNld2hlZWwnO1xuXHQgc2NvcGUuZGlzYWJsZV91bml0X2hpZ2h0bGlnaHQgPSAnQGRpc2FibGVVbml0SGlnaHRsaWdodCc7XG5cdCBzY29wZS5tb2RhbF9iYWNrZHJvcCA9ICdAY2FNb2RhbEJhY2tkcm9wJztcblx0IHNjb3BlLmFwcGVuZF93aWRnZXRfdG8gPSAnQGNhQXBwZW5kV2lkZ2V0VG8nO1xuXHQgc2NvcGUuZXhwbGljaXRfbW9kZSA9ICdAY2FFeHBsaWNpdE1vZGUnO1xuXHQgc2NvcGUuaWNvbnMgPSAnQGNhSWNvbnMnO1xuXHQqL1xuXG5cdHZhciB0ZW1wbGF0ZV9mdW5jdGlvbiA9IGZ1bmN0aW9uIHRlbXBsYXRlX2Z1bmN0aW9uKGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0XHRyZXR1cm4gaGVscGVyLnJlc29sdmVfdGVtcGxhdGUoYXR0cmlidXRlcywgJ3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfZmllbGRfdGltZScpO1xuXHR9O1xuXG5cdHZhciBsaW5rX2Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0e1xuXHRcdCRzY29wZS5waWNrZXJfY29udGFpbmVyID0gbnVsbDtcblx0XHQkc2NvcGUudG9nZ2xlX3dpZGdldCA9IGZ1bmN0aW9uIHRvZ2dsZV93aWRnZXQoKVxuXHRcdHtcblx0XHRcdCRzY29wZS5waWNrZXJfY29udGFpbmVyLnRpbWVwaWNrZXIoJ3Nob3dXaWRnZXQnKTtcblx0XHR9O1xuXG5cdFx0JHRpbWVvdXQoZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdCRzY29wZS5waWNrZXJfY29udGFpbmVyID0gJCgnI2lucHV0LScgKyAkc2NvcGUubmFtZSk7XG5cdFx0XHQkc2NvcGUucGlja2VyX2NvbnRhaW5lci50aW1lcGlja2VyKFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmYXVsdFRpbWU6IGZhbHNlLFxuXHRcdFx0XHRcdG1pbnV0ZVN0ZXA6ICRzY29wZS5taW51dGVfc3RlcCxcblx0XHRcdFx0XHQvL2Rpc2FibGVGb2N1czogdHJ1ZSxcblx0XHRcdFx0XHQvL3Nob3dJbnB1dHM6IGZhbHNlLFxuXHRcdFx0XHRcdGljb25zOiB7XG5cdFx0XHRcdFx0XHR1cDogXCJmYSBmYS1jaGV2cm9uLXVwXCIsXG5cdFx0XHRcdFx0XHRkb3duOiBcImZhIGZhLWNoZXZyb24tZG93blwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gcnVuIHRoZSBkZWZhdWx0IGZpZWxkIGxpbmsgZnVuY3Rpb25cblx0XHRoZWxwZXIuZGVmYXVsdF9saW5rX2Z1bmN0aW9uKCRzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlLCBjb250cm9sbGVyKTtcblxuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6ICdFQUMnLFxuXHRcdHNjb3BlOiBzY29wZSxcblx0XHR0ZW1wbGF0ZVVybDogdGVtcGxhdGVfZnVuY3Rpb24sXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRsaW5rOiBsaW5rX2Z1bmN0aW9uLFxuXHRcdGNvbnRyb2xsZXI6IGhlbHBlci5kZWZhdWx0X2NvbnRyb2xsZXJcblx0fTtcblxufV0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHRcdCdjYUZpZWxkVG9nZ2xlJyxcblxuXHRcdFtcblx0XHRcdCdmaWVsZEhlbHBlclNlcnZpY2UnLFxuXG5cdFx0XHRmdW5jdGlvbihcblx0XHRcdFx0XHRoZWxwZXJcblx0XHRcdClcblx0XHRcdHtcblxuXHRcdFx0XHR2YXIgdGVtcGxhdGVfZnVuY3Rpb24gPSBmdW5jdGlvbiB0ZW1wbGF0ZV9mdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGhlbHBlci5yZXNvbHZlX3RlbXBsYXRlKGF0dHJpYnV0ZXMsICdzcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX2ZpZWxkX3RvZ2dsZScpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHZhciBsaW5rX2Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vIHJ1biB0aGUgZGVmYXVsdCBmaWVsZCBsaW5rIGZ1bmN0aW9uXG5cdFx0XHRcdFx0aGVscGVyLmRlZmF1bHRfbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcik7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0dmFyIHNjb3BlID0gYW5ndWxhci5jb3B5KGhlbHBlci5kZWZhdWx0X3Njb3BlKTtcblx0XHRcdFx0c2NvcGUudHJ1ZV90ZXh0ID0gJ0BjYVRydWVUZXh0Jztcblx0XHRcdFx0c2NvcGUuZmFsc2VfdGV4dCA9ICdAY2FGYWxzZVRleHQnO1xuXHRcdFx0XHRzY29wZS50cnVlX3ZhbHVlID0gJ0BjYVRydWVWYWx1ZSc7XG5cdFx0XHRcdHNjb3BlLmZhbHNlX3ZhbHVlID0gJ0BjYUZhbHNlVmFsdWUnO1xuXG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0cmVzdHJpY3Q6ICdFQUMnLFxuXHRcdFx0XHRcdHNjb3BlOiBzY29wZSxcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogdGVtcGxhdGVfZnVuY3Rpb24sXG5cdFx0XHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdFx0XHRsaW5rOiBsaW5rX2Z1bmN0aW9uLFxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6IGhlbHBlci5kZWZhdWx0X2NvbnRyb2xsZXJcblx0XHRcdFx0fTtcblxuXHRcdFx0fV0pO1xuIiwiXG5hbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHQnY2FGb2N1c0ZpZWxkJyxcblx0W1xuXHRcdGZ1bmN0aW9uKClcbntcblxuXHR2YXIgbGlua19mdW5jdGlvbiA9IGZ1bmN0aW9uKCRzY29wZSwgZWxlbWVudCwgYXR0ciwgZmllbGRfY29udHJvbGxlcnMpXG5cdHtcblx0XHR2YXIgZmllbGQgPSBhdHRyWyAnY2FOYW1lJyBdO1xuXG5cdFx0Ly8gRm9yZ2V0IHRoZSB3aG9sZSB0aGluZyBpZiB0aGVyZSBpcyBhbHJlYWR5IGEgY29udHJvbGxlciB0aGF0IHRlbGxzIHVzIHRvXG5cdFx0dmFyIGlnbm9yZSA9IGZhbHNlO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBmaWVsZF9jb250cm9sbGVycy5sZW5ndGg7IGkrKylcblx0XHR7XG5cdFx0XHRpZiAoZmllbGRfY29udHJvbGxlcnNbIGkgXSAmJlxuXHRcdFx0XHRmaWVsZF9jb250cm9sbGVyc1sgaSBdLmlnbm9yZV9mb2N1c19maWVsZCgpKVxuXHRcdFx0e1xuXHRcdFx0XHRpZ25vcmUgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCgkc2NvcGUuZm9ybV9uYXYpICYmICFpZ25vcmUpXG5cdFx0e1xuXHRcdFx0dmFyIGZvY3VzX2ZpZWxkID0gYXR0clsnY2FGb2N1c0ZpZWxkJ107XG5cblx0XHRcdC8vIHdhdGNoIHRoZSBmb2N1cyBmaWVsZDogd2hlbiBpdCBtYXRjaGVzLCBmb2N1cyB0aGUgZWxlbWVudFxuXHRcdFx0JHNjb3BlLiR3YXRjaChmb2N1c19maWVsZCwgZnVuY3Rpb24oKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhmaWVsZCkgJiYgZmllbGQgPT0gJHNjb3BlLmZvcm1fbmF2LmZvY3VzX2ZpZWxkKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZWxlbWVudFswXS5mb2N1cygpLnNlbGVjdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gbGlzdGVuIGZvciBmb2N1c0NhRm9jdXNGaWVsZCBldmVudDogd2hlbiBpdCBtYXRjaGVzLCBmb2N1cyB0aGUgZWxlbWVudFxuXHRcdFx0JHNjb3BlLiRvbignZm9jdXNDYUZvY3VzRmllbGQnLCBmdW5jdGlvbihlLCBmb2N1cylcblx0XHRcdHtcblx0XHRcdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoZmllbGQpICYmIGZpZWxkID09IGZvY3VzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZWxlbWVudFswXS5mb2N1cygpLnNlbGVjdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0EnLFxuXHRcdHJlcGxhY2U6IGZhbHNlLFxuXHRcdHByaW9yaXR5OiAxMDAsXG5cdFx0cmVxdWlyZTogW1xuXHRcdFx0Jz9eY2FGaWVsZEFscGhhJyxcblx0XHRcdCc/XmNhRmllbGRBbHBoYWRhdGUnLFxuXHRcdFx0Jz9eY2FGaWVsZEF1dG9jb21wbGV0ZScsXG5cdFx0XHQnP15jYUZpZWxkQm9vbGVhbicsXG5cdFx0XHQnP15jYUZpZWxkQ29sb3InLFxuXHRcdFx0Jz9eY2FGaWVsZEN1cnJlbmN5Jyxcblx0XHRcdCc/XmNhRmllbGREYXRlJyxcblx0XHRcdCc/XmNhRmllbGREYXRlMycsXG5cdFx0XHQnP15jYUZpZWxkTnVtYmVyJyxcblx0XHRcdCc/XmNhRmllbGRTZWxlY3QnLFxuXHRcdFx0Jz9eY2FGaWVsZFRleHQnLFxuXHRcdFx0Jz9eY2FGaWVsZFRpbWUnXG5cdFx0XSxcblx0XHRsaW5rOiBsaW5rX2Z1bmN0aW9uXG5cdH07XG5cbn1dKTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ0NvbW1vbicpLmRpcmVjdGl2ZShcblx0J2NhSW5mb01lc3NhZ2VzJyxcblxuXHRbIGZ1bmN0aW9uKClcbntcblxuXHR2YXIgc2NvcGUgPSB7XG5cdFx0c2F2aW5nOiAnPT9jYVNhdmluZ0ZsYWcnLFxuXHRcdGVycm9yczogJz1jYUVycm9yc09iamVjdCcsXG5cdFx0ZmllbGRfdmFsdWVfbWFwOiAnPT9jYUZpZWxkVmFsdWVNYXAnLFxuXHRcdHN1Y2Nlc3NfbWVzc2FnZTogJ0BjYVN1Y2Nlc3NNZXNzYWdlJyxcblx0XHRmaWVsZF92YWx1ZV9tYXBfbGFiZWxfa2V5OiAnQGNhRmllbGRWYWx1ZU1hcExhYmVsS2V5Jyxcblx0XHRkaXNwbGF5RmllbGRFcnJvcnM6ICc9P2NhRGlzcGxheUZpZWxkRXJyb3JzJyxcblx0XHRwcmVwZW5kX25hbWVfdG9fZmllbGRfZXJyb3JzOiAnPT9jYVByZXBlbmROYW1lVG9GaWVsZEVycm9ycycsXG5cdFx0ZXJyb3JfbGlua19mdW5jdGlvbnM6ICc9P2NhRXJyb3JMaW5rRnVuY3Rpb25zJ1xuXHR9O1xuXG5cdHZhciBsaW5rX2Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0e1xuXHRcdGlmKCFKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cygkc2NvcGUuZGlzcGxheUZpZWxkRXJyb3JzKSB8fFxuXHRcdFx0JHNjb3BlLmRpc3BsYXlGaWVsZEVycm9ycyAhPT0gZmFsc2UpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLmRpc3BsYXlGaWVsZEVycm9ycyA9IHRydWU7XG5cdFx0fVxuXG5cdFx0aWYoIUp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKCRzY29wZS5wcmVwZW5kX25hbWVfdG9fZmllbGRfZXJyb3JzKSB8fFxuXHRcdFx0JHNjb3BlLnByZXBlbmRfbmFtZV90b19maWVsZF9lcnJvcnMgIT09IGZhbHNlKVxuXHRcdHtcblx0XHRcdCRzY29wZS5wcmVwZW5kX25hbWVfdG9fZmllbGRfZXJyb3JzID0gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBnZXQgYSBmaWVsZCBsYWJlbCBnaXZlbiBhIGtleVxuXHRcdCRzY29wZS5nZXRfbGFiZWwgPSBmdW5jdGlvbiBnZXRfbGFiZWwoa2V5KVxuXHRcdHtcblx0XHRcdHZhciBsYWJlbCA9IGtleTtcblx0XHRcdGlmKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKCRzY29wZS5maWVsZF92YWx1ZV9tYXApICYmICRzY29wZS5maWVsZF92YWx1ZV9tYXAuaGFzT3duUHJvcGVydHkoa2V5KSlcblx0XHRcdHtcblx0XHRcdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoJHNjb3BlLmZpZWxkX3ZhbHVlX21hcF9sYWJlbF9rZXkpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bGFiZWwgPSAkc2NvcGUuZmllbGRfdmFsdWVfbWFwW2tleV1bJHNjb3BlLmZpZWxkX3ZhbHVlX21hcF9sYWJlbF9rZXldO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxhYmVsID0gJHNjb3BlLmZpZWxkX3ZhbHVlX21hcFtrZXldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbGFiZWw7XG5cdFx0fTtcblxuXHRcdC8vIEVuc3VyZSB0aGUgaXRlbSBpcyBhbiBhcnJheSBvZiBlbGVtZW50c1xuXHRcdCRzY29wZS5mb3JjZV9hcnJheSA9IGZ1bmN0aW9uIGZvcmNlX2FycmF5KGl0ZW0pXG5cdFx0e1xuXHRcdFx0aWYoIWFuZ3VsYXIuaXNBcnJheShpdGVtKSlcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIFtpdGVtXTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBpdGVtO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuaGFzX3N1Yl9lcnJvcnMgPSBmdW5jdGlvbiBoYXNfc3ViX2Vycm9ycyhlcnJvcnMpXG5cdFx0e1xuXHRcdFx0cmV0dXJuICFhbmd1bGFyLmlzU3RyaW5nKGVycm9ycykgJiYgYW5ndWxhci5pc09iamVjdChlcnJvcnMpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuZXJyb3JfbGlua19oYXNfZnVuY3Rpb24gPSBmdW5jdGlvbiBlcnJvcl9saW5rX2hhc19mdW5jdGlvbihpbmRleClcblx0XHR7XG5cdFx0XHR2YXIgZXJyb3JfbGluayA9ICRzY29wZS5lcnJvcnMuZXJyb3JfbGlua3MoKVtpbmRleF07XG5cblx0XHRcdC8vIGVycm9yIGxpbmsgbXVzdCBoYXZlIGEganMgZnVuY3Rpb24gaW4gaXRzIGRhdGFcblx0XHRcdC8vIGFuZCB0aGUgZnVuY3Rpb24gaXMgaW1wbGVtZW50ZWQgaW4gZXJyb3JfbGlua19mdW5jdGlvbnNcblx0XHRcdHJldHVybiAkc2NvcGUuZXJyb3JfbGlua19mdW5jdGlvbnMgJiZcblx0XHRcdFx0ZXJyb3JfbGlua1snanNfZm4nXSAmJlxuXHRcdFx0XHRhbmd1bGFyLmlzRnVuY3Rpb24oJHNjb3BlLmVycm9yX2xpbmtfZnVuY3Rpb25zW2Vycm9yX2xpbmtbJ2pzX2ZuJ11dKTtcblx0XHR9O1xuXG5cdFx0Ly8gZXhlY3V0ZSB0aGUgbmctY2xpY2sgYWN0aW9uIG9uIGVycm9yIGxpbmtzXG5cdFx0JHNjb3BlLmV4ZWN1dGVfZXJyb3JfbGlua19mbiA9IGZ1bmN0aW9uIGV4ZWN1dGVfZXJyb3JfbGlua19mbihpbmRleClcblx0XHR7XG5cdFx0XHR2YXIgZXJyb3JfbGluayA9ICRzY29wZS5lcnJvcnMuZXJyb3JfbGlua3MoKVtpbmRleF07XG5cblx0XHRcdC8vIHNob3VsZG4ndCBiZSBjYWxsZWQgdW5sZXNzIHRoZSBlcnJvciBsaW5rIGZ1bmN0aW9uIGlzXG5cdFx0XHRpZighJHNjb3BlLmVycm9yX2xpbmtfaGFzX2Z1bmN0aW9uKGluZGV4KSlcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJlcnJvciBsaW5rIGRvZXMgbm90IGhhdmUgYSBmdW5jdGlvbiFcIiwgZXJyb3JfbGluayk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gYmFzaWMgaW1wbGVtZW50YXRpb246IGFsd2F5cyBwYXNzIHRoZSAndXVpZCcgZmllbGQgaW4gYXMgYSBwYXJhbWV0ZXJcblx0XHRcdC8vIChtYXkgcmVxdWlyZSBvdGhlciBvcHRpb25zIGluIHRoZSBmdXR1cmUpXG5cdFx0XHQkc2NvcGUuZXJyb3JfbGlua19mdW5jdGlvbnNbZXJyb3JfbGlua1snanNfZm4nXV0oZXJyb3JfbGlua1sndXVpZCddKTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLnNob3VsZF9kaXNwbGF5X2ZpZWxkX2Vycm9ycyA9IGZ1bmN0aW9uIHNob3VsZF9kaXNwbGF5X2ZpZWxkX2Vycm9ycygpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKCRzY29wZS5lcnJvcnMpICYmXG5cdFx0XHRcdCRzY29wZS5lcnJvcnMuaGFzX2ZpZWxkX2Vycm9ycygpICYmXG5cdFx0XHRcdCRzY29wZS5kaXNwbGF5RmllbGRFcnJvcnMgJiZcblx0XHRcdFx0JHNjb3BlLmVycm9ycy5kaXNwbGF5RmllbGRFcnJvcnM7XG5cdFx0fTtcblx0fTtcblxuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiAnRScsXG5cdFx0c2NvcGU6IHNjb3BlLFxuXHRcdHRlbXBsYXRlVXJsOiAnc3JjL2NvbW1vbi9kaXJlY3RpdmVzL2NsaW5pY2FpZC9jYV9pbmZvX21lc3NhZ2VzLmpzcCcsXG5cdFx0bGluazogbGlua19mdW5jdGlvblxuXHR9O1xuXG59XSk7XG5cbiIsImFuZ3VsYXIubW9kdWxlKCdDb21tb24nKS5kaXJlY3RpdmUoXG5cdFx0J2NhS2V5QmluZFNjb3BlJyxbXG5cblx0XHRcdCckcm9vdFNjb3BlJyxcblxuXHRcdFx0ZnVuY3Rpb24oJHJvb3RTY29wZSlcblx0XHRcdHtcblxuXHRcdFx0XHR2YXIgc2NvcGUgPSB7XG5cdFx0XHRcdFx0aWRlbnRpZmllcjogJ0BjYUlkZW50aWZpZXInLFxuXHRcdFx0XHRcdGtleV9jb21ibzogJ0BjYUtleUNvbWJvJyxcblx0XHRcdFx0XHRjYWxsYmFja19mbjogJz1jYUNhbGxiYWNrRm4nLFxuXHRcdFx0XHRcdGtleV9iaW5kX3NldHRpbmdzOiAnPWNhS2V5QmluZFNldHRpbmdzJyxcblx0XHRcdFx0fTtcblxuXHRcdFx0XHR2YXIgYnVpbGRfaGllcmFyY2h5ID0gZnVuY3Rpb24gYnVpbGRfaGllcmFyY2h5KGVsZW1lbnQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR2YXIgcGFyZW50cyA9IGVsZW1lbnQucGFyZW50cyhcImNhLWtleS1iaW5kLXNjb3BlXCIpO1xuXG5cdFx0XHRcdFx0dmFyIGhpZXJhcmNoeSA9IFtdO1xuXHRcdFx0XHRcdCQuZWFjaCggcGFyZW50cywgZnVuY3Rpb24oIGluZGV4LCB2YWx1ZSApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dHJ5XG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGhpZXJhcmNoeS51bnNoaWZ0KHZhbHVlLmF0dHJpYnV0ZXNbJ2NhLWlkZW50aWZpZXInXS5ub2RlVmFsdWUpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaChlcnJvcilcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJUaGlzIGNhLWtleS1iaW5kLXNjb3BlIGVsZW1lbnQgaGFzIGFuIGludmFsaWQgcGFyZW50OiBcIik7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGVsZW1lbnQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJldHVybiBoaWVyYXJjaHlcblx0XHRcdFx0fTtcblxuXHRcdFx0XHR2YXIgbGlua19mdW5jdGlvbiA9IGZ1bmN0aW9uIGxpbmtfZnVuY3Rpb24oJHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGUsIGNvbnRyb2xsZXIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQvLyBpZGVudGlmaWVyIGlzIHJlcXVpcmVkXG5cdFx0XHRcdFx0aWYoJHNjb3BlLmlkZW50aWZpZXIgPT0gbnVsbClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlRoZSBmb2xsb3dpbmcgY2Ffa2V5X2JpbmRfc2NvcGUgZWxlbWVudCBpcyBtaXNzaW5nIHRoZSByZXF1aXJlZCBcIiArXG5cdFx0XHRcdFx0XHRcdFx0XCJjYS1pZGVudGlmaWVyIGF0dHJpYnV0ZVwiKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGVsZW1lbnQpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciBoaWVyYXJjaHkgPSBidWlsZF9oaWVyYXJjaHkoZWxlbWVudCk7XG5cblx0XHRcdFx0XHRpZigkc2NvcGUua2V5X2JpbmRfc2V0dGluZ3MgIT0gbnVsbClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBrZXlfY29tYm8gaW4gJHNjb3BlLmtleV9iaW5kX3NldHRpbmdzKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHQkcm9vdFNjb3BlLmNhX2tleV9iaW5kaW5nLmJpbmRfa2V5X2VsZW1lbnQoXG5cdFx0XHRcdFx0XHRcdFx0XHQkc2NvcGUsIGVsZW1lbnQsICRzY29wZS5pZGVudGlmaWVyLCBhbmd1bGFyLmNvcHkoaGllcmFyY2h5KSxcblx0XHRcdFx0XHRcdFx0XHRcdGtleV9jb21ibyxcblx0XHRcdFx0XHRcdFx0XHRcdCRzY29wZS5rZXlfYmluZF9zZXR0aW5nc1trZXlfY29tYm9dKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiTm8ga2V5IGJpbmQgc2V0dGluZ3Mgc2V0IGZvciBjYS1rZXktYmluZC1zY29wZSBkaXJlY3RpdmUgKFwiICtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuaWRlbnRpZmllciArIFwiKVwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRzY29wZTogc2NvcGUsXG5cdFx0XHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHRcdFx0bGluazogbGlua19mdW5jdGlvblxuXHRcdFx0XHR9XG5cdFx0XHR9XVxuKTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ0NvbW1vbicpLmRpcmVjdGl2ZShcblx0J2NhUGFnaW5hdGlvbicsXG5cblx0WyAnJHRpbWVvdXQnLFxuXG5cdGZ1bmN0aW9uKCR0aW1lb3V0KVxue1xuXG5cdHZhciBzY29wZSA9IHtcblx0XHRwYWdpbmF0aW9uOiAnPWNhTW9kZWwnLFxuXHRcdGNoYW5nZV9wYWdlX2NhbGxiYWNrOiAnPWNhQ2hhbmdlUGFnZSdcblx0fTtcblxuXHR2YXIgbGlua19mdW5jdGlvbiA9IGZ1bmN0aW9uIGxpbmtfZnVuY3Rpb24oJHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGUsIGNvbnRyb2xsZXIpXG5cdHtcblx0XHQkc2NvcGUubW9kZSA9ICdwYWdlcyc7XG5cblx0XHQkc2NvcGUuY2hhbmdlX3BhZ2UgPSBmdW5jdGlvbiBjaGFuZ2VfcGFnZShwYWdlX251bWJlcilcblx0XHR7XG5cdFx0XHRpZihKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhwYWdlX251bWJlcikgJiZcblx0XHRcdFx0cGFnZV9udW1iZXIgIT0gJHNjb3BlLnBhZ2luYXRpb24uY3VycmVudF9wYWdlICYmXG5cdFx0XHRcdHBhZ2VfbnVtYmVyID4gMCAmJlxuXHRcdFx0XHRwYWdlX251bWJlciA8PSAkc2NvcGUucGFnaW5hdGlvbi50b3RhbF9wYWdlcylcblx0XHRcdHtcblx0XHRcdFx0JHNjb3BlLmNoYW5nZV9wYWdlX2NhbGxiYWNrKHBhZ2VfbnVtYmVyKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0JHNjb3BlLmV4cGFuZF9lbGxpcHNpcyA9IGZ1bmN0aW9uIGV4cGFuZF9lbGxpcHNpcygpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLmdvX3RvX3BhZ2VfbnVtID0gJHNjb3BlLnBhZ2luYXRpb24uY3VycmVudF9wYWdlO1xuXHRcdFx0JHNjb3BlLm1vZGUgPSAnZ290byc7XG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpXG5cdFx0XHR7XG5cdFx0XHRcdGVsZW1lbnQuZmluZChcImlucHV0XCIpLmZvY3VzKCkuc2VsZWN0KCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmNsb3NlX2VsbGlwc2lzID0gZnVuY3Rpb24gY2xvc2VfZWxsaXBzaXMoKVxuXHRcdHtcblx0XHRcdCRzY29wZS5tb2RlID0gJ3BhZ2VzJztcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmdvX3RvX3BhZ2UgPSBmdW5jdGlvbiBnb190b19wYWdlKClcblx0XHR7XG5cdFx0XHRpZihKdW5vLkNvbW1vbi5VdGlsLmlzSW50ZWdlclN0cmluZygkc2NvcGUuZ29fdG9fcGFnZV9udW0pKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgcGFnZV9pbnQgPSBwYXJzZUludCgkc2NvcGUuZ29fdG9fcGFnZV9udW0pO1xuXHRcdFx0XHRpZihwYWdlX2ludCA8PSAwKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cGFnZV9pbnQgPSAxO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKHBhZ2VfaW50ID4gJHNjb3BlLnBhZ2luYXRpb24udG90YWxfcGFnZXMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRwYWdlX2ludCA9ICRzY29wZS5wYWdpbmF0aW9uLnRvdGFsX3BhZ2VzO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5jaGFuZ2VfcGFnZShwYWdlX2ludCk7XG5cblx0XHRcdFx0JHNjb3BlLmNsb3NlX2VsbGlwc2lzKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRzY29wZTogc2NvcGUsXG5cdFx0dGVtcGxhdGVVcmw6ICdzcmMvY29tbW9uL2RpcmVjdGl2ZXMvY2xpbmljYWlkL2NhX3BhZ2luYXRpb24uanNwJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdGxpbms6IGxpbmtfZnVuY3Rpb25cblx0fTtcblxufV0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKCdjYVF1aWxsJyxcblx0W1xuXG5cdFx0XHQnJHRpbWVvdXQnLFxuXG5cdGZ1bmN0aW9uKCR0aW1lb3V0KVxue1xuXHRcdHZhciBsaW5rX2Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpXG5cdFx0e1xuXG5cdFx0XHR2YXIgdXBkYXRlTW9kZWwgPSBmdW5jdGlvbiB1cGRhdGVNb2RlbCh2YWx1ZSkge1xuXHRcdFx0XHRcdHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRuZ01vZGVsLiRzZXRWaWV3VmFsdWUodmFsdWUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRvcHRpb25zID0ge1xuXHRcdFx0XHRcdG1vZHVsZXM6IHtcblx0XHRcdFx0XHRcdCd0b29sYmFyJzogeyBjb250YWluZXI6ICcud3lzaXd5Zy10b29sYmFyJyB9LFxuXHRcdFx0XHRcdFx0J2ltYWdlLXRvb2x0aXAnOiB0cnVlLFxuXHRcdFx0XHRcdFx0J2xpbmstdG9vbHRpcCc6IHRydWVcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRoZW1lOiAnc25vdydcblx0XHRcdFx0fSxcblx0XHRcdFx0ZXh0cmFPcHRpb25zID0gYXR0cnMucXVpbGwgP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjb3BlLiRldmFsKGF0dHJzLnF1aWxsKSA6IHt9LFxuXHRcdFx0XHRlZGl0b3I7XG5cblx0XHRcdGFuZ3VsYXIuZXh0ZW5kKG9wdGlvbnMsIGV4dHJhT3B0aW9ucyk7XG5cblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRlZGl0b3IgPSBuZXcgUXVpbGwoZWxlbWVudC5jaGlsZHJlbigpWzFdLCBvcHRpb25zKTtcblxuXHRcdFx0XHRuZ01vZGVsLiRyZW5kZXIoKTtcblxuXHRcdFx0XHRlZGl0b3Iub24oJ3RleHQtY2hhbmdlJywgZnVuY3Rpb24oZGVsdGEsIHNvdXJjZSkge1xuXHRcdFx0XHRcdHVwZGF0ZU1vZGVsKHRoaXMuZ2V0SFRNTCgpKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Lypcblx0XHRcdFx0ZWRpdG9yLm9uY2UoJ3NlbGVjdGlvbi1jaGFuZ2UnLCBmdW5jdGlvbihoYXNGb2N1cykge1xuXHRcdFx0XHRcdCQoZWRpdG9yKS50b2dnbGVDbGFzcygnZm9jdXMnLCBoYXNGb2N1cyk7XG5cdFx0XHRcdFx0Ly8gSGFjayBmb3IgaW5hYmlsaXR5IHRvIHNjcm9sbCBvbiBtb2JpbGVcblx0XHRcdFx0XHRpZiAoL21vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0XHRcdFx0XHRcdCQoZWRpdG9yKS5jc3MoJ2hlaWdodCcsIHF1aWxsLnJvb3Quc2Nyb2xsSGVpZ2h0ICsgMzApICAgLy8gMzAgZm9yIHBhZGRpbmdcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQqL1xuXG5cdFx0XHR9KTtcblxuXG5cdFx0XHRuZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmIChhbmd1bGFyLmlzRGVmaW5lZChlZGl0b3IpKSB7XG5cdFx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0SFRNTChuZ01vZGVsLiR2aWV3VmFsdWUgfHwgJycpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdH07XG5cblx0XHR9O1xuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiAnQScsXG5cdFx0cmVxdWlyZTogXCJuZ01vZGVsXCIsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9jb21tb24vZGlyZWN0aXZlcy9jbGluaWNhaWQvY2FfcXVpbGwuanNwJyxcblx0XHRsaW5rOiBsaW5rX2Z1bmN0aW9uXG5cdH1cbn1dKTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ0NvbW1vbicpLmRpcmVjdGl2ZShcblx0J2NhU3RpY2t5U2VhcmNoUmVzdWx0c0Zvb3RlcicsXG5cblx0WyAnJGRvY3VtZW50JywgJyR0aW1lb3V0JyxcblxuXHRmdW5jdGlvbigkZG9jdW1lbnQsICR0aW1lb3V0KVxue1xuXHR2YXIgc2NvcGUgPSB7XG5cdFx0ZXZlbnROYW1lOiAnQGNhRXZlbnROYW1lJ1xuXHR9O1xuXG5cdHZhciBsaW5rX2Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0e1xuXHRcdHZhciBzZWFyY2hSZXN1bHRzUmVjb3Jkc0VsZW1lbnQgPVxuXHRcdFx0YW5ndWxhci5lbGVtZW50KGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLnNlYXJjaC1yZXN1bHRzLXJlY29yZHMnKSk7XG5cblx0XHR2YXIgc2Nyb2xsYmFyV3JhcHBlckVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLXJlc3VsdHMtc2Nyb2xsYmFyJykpO1xuXHRcdHZhciBzY3JvbGxiYXJFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KHNjcm9sbGJhcldyYXBwZXJFbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJy5zY3JvbGxiYXInKSk7XG5cblx0XHR2YXIgdGFibGVXcmFwcGVyRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJy5zdGlja2llZC10YWJsZS13cmFwcGVyJykpO1xuXHRcdHZhciB0YWJsZUVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQodGFibGVXcmFwcGVyRWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCd0YWJsZScpKTtcblxuXHRcdHZhciBmb290ZXJFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLnNlYXJjaC1yZXN1bHRzLWZvb3RlcicpKTtcblx0XHR2YXIgc2VhcmNoUmVzdWx0c0VsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLXJlc3VsdHMtcmVjb3JkcycpKTtcblxuXHRcdHZhciBjb250ZW50V3JhcHBlckVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50LmZpbmQoJyNjZW50ZXItcGFuZWwtd3JhcHBlcicpKTtcblx0XHR2YXIgbGF5b3V0U2lkZWJhckVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50LmZpbmQoJyNsYXlvdXQtc2lkZWJhcicpKTtcblxuXHRcdC8vIGNvbm5lY3QgdGhlIGR1bW15IHNjcm9sbGJhciBpbiB0aGUgZm9vdGVyIHdpdGggdGhlIHRhYmxlIHNjcm9sbGJhclxuXHRcdHNjcm9sbGJhcldyYXBwZXJFbGVtZW50LnNjcm9sbChmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0dGFibGVXcmFwcGVyRWxlbWVudC5zY3JvbGxMZWZ0KHNjcm9sbGJhcldyYXBwZXJFbGVtZW50LnNjcm9sbExlZnQoKSk7XG5cdFx0fSk7XG5cdFx0dGFibGVXcmFwcGVyRWxlbWVudC5zY3JvbGwoZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdHNjcm9sbGJhcldyYXBwZXJFbGVtZW50LnNjcm9sbExlZnQodGFibGVXcmFwcGVyRWxlbWVudC5zY3JvbGxMZWZ0KCkpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gcmVzaXplIGFuZCBwb3NpdGlvbiB0aGUgZm9vdGVyIHdoZW4gdGhlIHNwZWNpZmllZCBldmVudCBpcyBmaXJlZFxuXHRcdCRzY29wZS4kb24oJHNjb3BlLmV2ZW50TmFtZSwgZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdCR0aW1lb3V0KCRzY29wZS51cGRhdGVfc2VhcmNoX3Jlc3VsdHNfZm9vdGVyKTtcblx0XHR9KTtcblxuXHRcdCRzY29wZS51cGRhdGVfc2VhcmNoX3Jlc3VsdHNfZm9vdGVyID0gZnVuY3Rpb24gdXBkYXRlX3NlYXJjaF9yZXN1bHRzX2Zvb3RlcigpXG5cdFx0e1xuXHRcdFx0Ly8gZm9yIGEgZml4ZWQgZm9vdGVyLCBtYWluIGNvbnRlbnQgbXVzdCBiZSBsb25nZXIgdGhhbiB0aGUgc2lkZWJhcixcblx0XHRcdC8vIGFuZCB0aGUgc2VhcmNoIHJlc3VsdHMgbXVzdCBleHRlbmQgYmV5b25kIHRoZSBib3R0b20gb2YgdGhlIHNjcmVlblxuXHRcdFx0dmFyIGZpeGVkRm9vdGVyID0gKGNvbnRlbnRXcmFwcGVyRWxlbWVudC5oZWlnaHQoKSA+PSBsYXlvdXRTaWRlYmFyRWxlbWVudC5oZWlnaHQoKSkgJiZcblx0XHRcdFx0c2VhcmNoUmVzdWx0c0VsZW1lbnQub2Zmc2V0KCkudG9wICsgc2VhcmNoUmVzdWx0c0VsZW1lbnQuaGVpZ2h0KCkgPiAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cblx0XHRcdGlmKGZpeGVkRm9vdGVyKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBmaXhlZCBmb290ZXIgYXQgYm90dG9tIG9mIHNjcmVlbiwgd2l0aCBzY3JvbGxiYXJcblx0XHRcdFx0Zm9vdGVyRWxlbWVudC5hZGRDbGFzcygnZml4ZWQnKS5yZW1vdmVDbGFzcygnc3RhdGljJyk7XG5cblx0XHRcdFx0Zm9vdGVyRWxlbWVudC5jc3MoJ3dpZHRoJywgc2VhcmNoUmVzdWx0c1JlY29yZHNFbGVtZW50LndpZHRoKCkpO1xuXG5cdFx0XHRcdHNjcm9sbGJhcldyYXBwZXJFbGVtZW50LndpZHRoKHRhYmxlV3JhcHBlckVsZW1lbnQud2lkdGgoKSk7XG5cdFx0XHRcdHNjcm9sbGJhckVsZW1lbnQud2lkdGgodGFibGVFbGVtZW50LndpZHRoKCkpO1xuXG5cdFx0XHRcdGlmKHNjcm9sbGJhcldyYXBwZXJFbGVtZW50LndpZHRoKCkgPCBzY3JvbGxiYXJFbGVtZW50LndpZHRoKCkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0YWJsZVdyYXBwZXJFbGVtZW50LmNzcygncGFkZGluZy1ib3R0b20nLCBmb290ZXJFbGVtZW50LmhlaWdodCgpIC0gMTUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRhYmxlV3JhcHBlckVsZW1lbnQuY3NzKCdwYWRkaW5nLWJvdHRvbScsIGZvb3RlckVsZW1lbnQuaGVpZ2h0KCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIHN0YXRpYyBmb290ZXIgYmVsb3cgc2VhcmNoIHJlc3VsdHNcblx0XHRcdFx0Zm9vdGVyRWxlbWVudC5hZGRDbGFzcygnc3RhdGljJykucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7XG5cdFx0XHRcdGZvb3RlckVsZW1lbnQuY3NzKCd3aWR0aCcsICdpbml0aWFsJyk7XG5cdFx0XHRcdHRhYmxlV3JhcHBlckVsZW1lbnQuY3NzKCdwYWRkaW5nLWJvdHRvbScsIDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0EnLFxuXHRcdHNjb3BlOiBzY29wZSxcblx0XHRsaW5rOiBsaW5rX2Z1bmN0aW9uXG5cdH07XG5cbn1dKTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ0NvbW1vbicpLmRpcmVjdGl2ZShcblx0J3plcm9QYWQnLCBcblxuXHRbXG5cdFx0JyRmaWx0ZXInLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRmaWx0ZXJcblx0KVxue1xuICAgIHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6ICdBJyxcblx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsKSB7XG5cdFx0XHRjdHJsLiRmb3JtYXR0ZXJzLnVuc2hpZnQoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0cmV0dXJuICRmaWx0ZXIoJ251bWJlckZpeGVkTGVuZ3RoJykoZGF0YSwgNCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Y3RybC4kcGFyc2Vycy51bnNoaWZ0KGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdHJldHVybiAkZmlsdGVyKCdudW1iZXJGaXhlZExlbmd0aCcpKGRhdGEsIDQpO1xuXHRcdFx0fSk7ICAgICAgICAgICAgXG5cdFx0fSxcblx0fTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdDb21tb24nKS5kaXJlY3RpdmUoXG5cdCdjb21waWxlSHRtbCcsXG5cdFsgJyRjb21waWxlJyxcblx0ZnVuY3Rpb24oJGNvbXBpbGUpXG5cdHtcblx0XHQvLyB0aGlzIGRpcmVjdGl2ZSBpcyBsaWtlIG5nLWJpbmQtaHRtbCBidXQgaXQgd2lsbCBhbmd1bGFyLWNvbXBpbGUgdGhlIGNvbnRlbnRcblx0XHRyZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKVxuXHRcdHtcblx0XHRcdHNjb3BlLiR3YXRjaChcblx0XHRcdFx0ZnVuY3Rpb24oc2NvcGUpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gc2NvcGUuJGV2YWwoYXR0cnMuY29tcGlsZUh0bWwpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbih2YWx1ZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGVsZW1lbnQuanNwKHZhbHVlKTtcblx0XHRcdFx0XHQkY29tcGlsZShlbGVtZW50LmNvbnRlbnRzKCkpKHNjb3BlKTtcblx0XHRcdFx0fVxuXHRcdFx0KVxuXHRcdH07XG5cdH1cbl0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0NvbW1vbicpLmRpcmVjdGl2ZSgnZmlsZU1vZGVsJywgWyckcGFyc2UnLCBmdW5jdGlvbiAoJHBhcnNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICB2YXIgbW9kZWwgPSAkcGFyc2UoYXR0cnMuZmlsZU1vZGVsKTtcbiAgICAgICAgICAgIHZhciBtb2RlbFNldHRlciA9IG1vZGVsLmFzc2lnbjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZWxlbWVudC5iaW5kKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRlcihzY29wZSwgZWxlbWVudFswXS5maWxlc1swXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKCdyZXNpemUnLFxuXHRbXG5cdFx0JyR3aW5kb3cnLFxuXHRcdGZ1bmN0aW9uKCR3aW5kb3cpXG5cdFx0e1xuXHRcdFx0Ly8gdGhpcyBkaXJlY3RpdmUgYnJvYWRjYXN0cyByZXNpemU6OnJlc2l6ZSBvbiB3aW5kb3cgcmVzaXplXG5cdFx0XHQvLyB1c2UgdGhlIHJlc2l6ZS1oYW5kbGVyIGRpcmVjdGl2ZSB0byBsaXN0ZW4gZm9yIGFuZCBoYW5kbGUgdGhlIGV2ZW50XG5cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGxpbms6IGZ1bmN0aW9uKHNjb3BlKSB7XG5cdFx0XHRcdFx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbihlKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIHVzZSBuYW1lIG9mIGRpcmVjdGl2ZSArIGV2ZW50IHRvIGF2b2lkIGNvbGxpc2lvbnNcblx0XHRcdFx0XHRcdHNjb3BlLiRicm9hZGNhc3QoJ3Jlc2l6ZTo6cmVzaXplJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdF1cbik7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHQncmVzaXplSGFuZGxlcicsW1xuXHQnJHBhcnNlJyxcblx0ZnVuY3Rpb24oJHBhcnNlKVxuXHR7XG5cdFx0Ly8gdGhlIHJlc2l6ZSBkaXJlY3RpdmUgYnJvYWRjYXN0cyByZXNpemU6OnJlc2l6ZSBvbiB3aW5kb3cgcmVzaXplXG5cdFx0Ly8gdXNlIHRoaXMgZGlyZWN0aXZlIHRvIGxpc3RlbiBhbmQgaGFuZGxlIHRoZSByZXNpemUgZXZlbnRcblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdBJyxcblx0XHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblx0XHRcdFx0c2NvcGUuJG9uKCdyZXNpemU6OnJlc2l6ZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHQkcGFyc2UoYXR0cnMucmVzaXplSGFuZGxlcikoc2NvcGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1dXG4pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKCdzY3JvbGwnLFxuXHRbXG5cdFx0JyR3aW5kb3cnLFxuXHRcdGZ1bmN0aW9uKCR3aW5kb3cpXG5cdFx0e1xuXHRcdFx0Ly8gdGhpcyBkaXJlY3RpdmUgYnJvYWRjYXN0cyBzY3JvbGw6OnNjcm9sbCBvbiB3aW5kb3cgc2Nyb2xsXG5cdFx0XHQvLyB1c2UgdGhlIHNjcm9sbC1oYW5kbGVyIGRpcmVjdGl2ZSB0byBsaXN0ZW4gZm9yIGFuZCBoYW5kbGUgdGhlIGV2ZW50XG5cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGxpbms6IGZ1bmN0aW9uKHNjb3BlKSB7XG5cdFx0XHRcdFx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbihlKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIHVzZSBuYW1lIG9mIGRpcmVjdGl2ZSArIGV2ZW50IHRvIGF2b2lkIGNvbGxpc2lvbnNcblx0XHRcdFx0XHRcdHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbDo6c2Nyb2xsJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdF1cbik7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQ29tbW9uJykuZGlyZWN0aXZlKFxuXHQnc2Nyb2xsSGFuZGxlcicsIFtcblx0JyRwYXJzZScsXG5cdGZ1bmN0aW9uKCRwYXJzZSlcblx0e1xuXHRcdC8vIHRoZSBzY3JvbGwgZGlyZWN0aXZlIGJyb2FkY2FzdHMgc2Nyb2xsOjpzY3JvbGwgb24gd2luZG93IHNjcm9sbFxuXHRcdC8vIHVzZSB0aGlzIGRpcmVjdGl2ZSB0byBsaXN0ZW4gYW5kIGhhbmRsZSB0aGUgc2Nyb2xsIGV2ZW50XG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnQScsXG5cdFx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cdFx0XHRcdHNjb3BlLiRvbignc2Nyb2xsOjpzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0JHBhcnNlKGF0dHJzLnNjcm9sbEhhbmRsZXIpKHNjb3BlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XVxuKTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ0NvbW1vbicpLmRpcmVjdGl2ZShcblx0J2NhWmVyb1BhZCcsIFxuXG5cdFtcblx0XHQnJGZpbHRlcicsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JGZpbHRlclxuXHQpXG57XG4gICAgcmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0EnLFxuXHRcdHJlcXVpcmU6ICduZ01vZGVsJyxcblx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsKSB7XG5cblx0XHRcdGN0cmwuJGZvcm1hdHRlcnMudW5zaGlmdChmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHR2YXIgcGFkX2xlbmd0aCA9IGF0dHJzLmNhWmVyb1BhZDtcblx0XHRcdFx0aWYoIXBhZF9sZW5ndGgpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRwYWRfbGVuZ3RoID0gMDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gJGZpbHRlcignbnVtYmVyRml4ZWRMZW5ndGgnKShkYXRhLCBwYWRfbGVuZ3RoKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRjdHJsLiRwYXJzZXJzLnVuc2hpZnQoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0dmFyIHBhZF9sZW5ndGggPSBhdHRycy5jYVplcm9QYWQ7XG5cdFx0XHRcdGlmKCFwYWRfbGVuZ3RoKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cGFkX2xlbmd0aCA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuICRmaWx0ZXIoJ251bWJlckZpeGVkTGVuZ3RoJykoZGF0YSwgcGFkX2xlbmd0aCk7XG5cdFx0XHR9KTsgICAgICAgICAgICBcblx0XHR9LFxuXHR9O1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdDb21tb24uRGlyZWN0aXZlcycpLmRpcmVjdGl2ZSgnanVub0RhdGVwaWNrZXJQb3B1cCcsIFtcblxuXHRmdW5jdGlvbigpXG5cdHtcblx0XHR2YXIgc2NvcGUgPSB7XG5cblxuXHRcdH07XG5cblx0XHRzY29wZS5tb2RlbCA9ICc9anVub01vZGVsJztcblx0XHRzY29wZS5wbGFjZWhvbGRlciA9ICdAJztcblx0XHRzY29wZS5zaG93SWNvbiA9ICc9Jztcblx0XHRzY29wZS5kaXNhYmxlSW5wdXQgPSAnPSc7XG5cblx0XHR2YXIgbGlua0Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0XHR7XG5cdFx0XHQkc2NvcGUuZm9ybWF0ID0gJ3l5eXktTU0tZGQnO1xuXG5cdFx0XHQkc2NvcGUuZGF0ZU9wdGlvbnMgPSB7XG5cdFx0XHRcdHNob3dXZWVrczogZmFsc2Vcblx0XHRcdH07XG5cblx0XHRcdCRzY29wZS5vcGVuZWQgPSBmYWxzZTtcblxuXHRcdFx0JHNjb3BlLm9wZW5EYXRlcGlja2VyID0gZnVuY3Rpb24oKVxuXHRcdFx0e1xuXHRcdFx0XHQkc2NvcGUub3BlbmVkID0gdHJ1ZTtcblx0XHRcdH07XG5cblx0XHR9O1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnRScsXG5cdFx0XHRzY29wZTogc2NvcGUsXG5cdFx0XHR0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbSwgYXR0cmlidXRlKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gJ3NyYy9jb21tb24vZGlyZWN0aXZlcy9kYXRlcGlja2VyUG9wdXAnICsgYXR0cmlidXRlLnR5cGUgKyAnLmpzcCc7XG5cdFx0XHR9LFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdGxpbms6IGxpbmtGdW5jdGlvblxuXHRcdH07XG5cblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ0NvbW1vbi5EaXJlY3RpdmVzJykuZGlyZWN0aXZlKCdkcmFnZ2FibGUnLCBbXG5cdGZ1bmN0aW9uKClcblx0e1xuXHRcdGNvbnNvbGUubG9nKCdEUkFHR0FCTEUgRElSRUNUSVZFIExPQURFRCcpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnQScsXG5cdFx0XHRsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbSwgYXR0cnMpXG5cdFx0XHR7XG5cdFx0XHRcdGVsZW0uZHJhZ2dhYmxlKFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YXhpczogXCJ4XCIsXG5cdFx0XHRcdFx0Y29udGFpbm1lbnQ6IFwiI21haW4tYm9keVwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cbl0pOyIsIlxucmVxdWlyZSgnanF1ZXJ5LXVpL3VpL3dpZGdldHMvcmVzaXphYmxlJyk7XG5cbmFuZ3VsYXIubW9kdWxlKCdDb21tb24uRGlyZWN0aXZlcycpLmRpcmVjdGl2ZSgncmVzaXphYmxlJywgW1xuXHRmdW5jdGlvbigpXG5cdHtcblx0XHRjb25zb2xlLmxvZygnUkVTSVpBQkxFIERJUkVDVElWRSBMT0FERUQnKTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0EnLFxuXHRcdFx0c2NvcGU6XG5cdFx0XHR7XG5cdFx0XHRcdGNhbGxiYWNrOiAnJm9uUmVzaXplJ1xuXHRcdFx0fSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtLCBhdHRycylcblx0XHRcdHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnUkVTSVpBQkxFIERJUkVDVElWRSBIRUlHSFQgJywgJChcIi5ub3RlLWVkaXRvci10ZXh0YXJlYVwiKS5oZWlnaHQoKSk7XG5cdFx0XHRcdGVsZW0ucmVzaXphYmxlKFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aGFuZGxlczogJ24sIG53LCBuZScsXG5cdFx0XHRcdFx0bWluSGVpZ2h0OiAyNTAsXG5cdFx0XHRcdFx0bWluV2lkdGg6IDUxMCxcblx0XHRcdFx0XHRtYXhXaWR0aDogd2luZG93LmlubmVyV2lkdGgsXG5cdFx0XHRcdFx0bWF4SGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLyAxLjUsXG5cdFx0XHRcdFx0Ly8gY29udGFpbm1lbnQ6IFwiI21haW4tYm9keVwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRlbGVtLm9uKCdyZXNpemVzdG9wJywgZnVuY3Rpb24oZXZ0LCB1aSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChzY29wZS5jYWxsYmFjaylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRzY29wZS5jYWxsYmFjaygpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9KTtcblx0XHRcdFx0ZWxlbS5vbigncmVzaXplJywgZnVuY3Rpb24oKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0JChcIi5ub3RlLWVkaXRvci10ZXh0YXJlYVwiKS5jc3MoJ2hlaWdodCcsIGVsZW0uaGVpZ2h0KCkgLSAxNDUgLSAkKFwiLm5vdGUtZWRpdG9yLWlzc3Vlc1wiKS5oZWlnaHQoKSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8vIFdvcmthcm91bmQsIG5lZWQgdG8gZWl0aGVyIHJlcGxhY2UgSnF1ZXJ5VUkgb3IgZmluZCBhIGJldHRlciB3YXkgdG8gYWNjb3VudCBmb3IgZHluYW1pYyBjaGFuZ2VzIHRvIHJlc2l6YWJsZSBkaXYgc2l6ZVxuXHRcdFx0XHQvLyBEb2Vzbid0IHNlZW0gdG8gYmUgYW4gZWFzeSB3YXkgdG8gZHluYW1pY2FsbHkgc2V0IG1pbkhlaWdodCBhcHByb3ByaWF0ZWx5XG5cdFx0XHRcdHNjb3BlLiRvbignbm90ZUlzc3VlQWRkZWQnLCBmdW5jdGlvbigpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR2YXIgbmV3SGVpZ2h0ID0gJCgnI25vdGUtZWRpdG9yJykuaGVpZ2h0KCkgKyAzMztcblx0XHRcdFx0XHQkKCcjbm90ZS1lZGl0b3InKS5oZWlnaHQobmV3SGVpZ2h0KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gV29ya2Fyb3VuZCwgbmVlZCB0byBlaXRoZXIgcmVwbGFjZSBKcXVlcnlVSSBvciBmaW5kIGEgYmV0dGVyIHdheSB0byBhY2NvdW50IGZvciBkeW5hbWljIGNoYW5nZXMgdG8gcmVzaXphYmxlIGRpdiBzaXplXG5cdFx0XHRcdC8vIERvZXNuJ3Qgc2VlbSB0byBiZSBhbiBlYXN5IHdheSB0byBkeW5hbWljYWxseSBzZXQgbWluSGVpZ2h0IGFwcHJvcHJpYXRlbHlcblx0XHRcdFx0c2NvcGUuJG9uKCdub3RlSXNzdWVSZW1vdmVkJywgZnVuY3Rpb24oKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIG5ld0hlaWdodCA9ICQoJyNub3RlLWVkaXRvcicpLmhlaWdodCgpIC0gMzM7XG5cdFx0XHRcdFx0JCgnI25vdGUtZWRpdG9yJykuaGVpZ2h0KG5ld0hlaWdodCk7XG5cdFx0XHRcdH0pO1xuXG5cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiBIYW1pbHRvblxuIE9udGFyaW8sIENhbmFkYVxuXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoJ0NvbW1vbi5EaXJlY3RpdmVzJywgWyAnQ29tbW9uLlNlcnZpY2VzJyBdKTtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdDb21tb24uRGlyZWN0aXZlcycpLmRpcmVjdGl2ZSgnanVub1BhdGllbnRTZWFyY2hUeXBlYWhlYWQnLCBbXG5cdCckcScsXG5cdCd0eXBlYWhlYWRIZWxwZXInLFxuXHQnZGVtb2dyYXBoaWNzU2VydmljZScsXG5cblx0ZnVuY3Rpb24oJHEsIHR5cGVhaGVhZEhlbHBlciwgZGVtb2dyYXBoaWNzU2VydmljZSlcblx0e1xuXHRcdHZhciBzY29wZSA9IHR5cGVhaGVhZEhlbHBlci5kZWZhdWx0VHlwZWFoZWFkU2NvcGUoKTtcblxuXHRcdHZhciBsaW5rRnVuY3Rpb24gPSBmdW5jdGlvbiBsaW5rX2Z1bmN0aW9uKCRzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlLCBjb250cm9sbGVyKVxuXHRcdHtcblx0XHRcdHR5cGVhaGVhZEhlbHBlci5pbml0VHlwZWFoZWFkKCRzY29wZSk7XG5cblx0XHRcdCRzY29wZS5vcHRpb25zVGVtcGxhdGVVcmwgPSAnc3JjL2NvbW1vbi9kaXJlY3RpdmVzL3BhdGllbnRTZWFyY2hUeXBlYWhlYWRPcHRpb24uanNwJztcblxuXHRcdFx0JHNjb3BlLmZpbmRNYXRjaGVzID0gZnVuY3Rpb24gZmluZE1hdGNoZXMoc2VhcmNoKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0XHRkZW1vZ3JhcGhpY3NTZXJ2aWNlLnF1aWNrU2VhcmNoKHNlYXJjaCkudGhlbihcblx0XHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dmFyIG1hdGNoZXMgPSByZXN1bHRzLmRhdGE7XG5cdFx0XHRcdFx0XHR2YXIgbWV0YSA9IHJlc3VsdHMubWV0YTtcblxuXHRcdFx0XHRcdFx0aWYobWV0YS50b3RhbCA+IDEwKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzLnB1c2goe1xuXHRcdFx0XHRcdFx0XHRcdG1vcmVSZXN1bHRzOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdHRvdGFsOiBtZXRhLnRvdGFsLFxuXHRcdFx0XHRcdFx0XHRcdHNlYXJjaFF1ZXJ5OiBzZWFyY2hcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKG1hdGNoZXMpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdCgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHRcdH07XG5cblx0XHRcdCRzY29wZS5mb3JtYXRNYXRjaFNlbGVjdGlvbiA9IGZ1bmN0aW9uIGZvcm1hdE1hdGNoU2VsZWN0aW9uKGRlbW9ncmFwaGljKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihkZW1vZ3JhcGhpYy5tb3JlUmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0TmFtZShkZW1vZ3JhcGhpYy5maXJzdE5hbWUsIGRlbW9ncmFwaGljLmxhc3ROYW1lKTtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdFx0c2NvcGU6IHNjb3BlLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvY29tbW9uL2RpcmVjdGl2ZXMvdHlwZWFoZWFkLmpzcCcsXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0bGluazogbGlua0Z1bmN0aW9uXG5cdFx0fTtcblxuXHR9XG5dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnQ29tbW9uLkRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoJ2p1bm9QYXRpZW50VHlwZWFoZWFkJywgW1xuXHQnJHEnLFxuXHQndHlwZWFoZWFkSGVscGVyJyxcblx0J2RlbW9ncmFwaGljc1NlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKCRxLCB0eXBlYWhlYWRIZWxwZXIsIGRlbW9ncmFwaGljc1NlcnZpY2UpXG5cdHtcblx0XHR2YXIgc2NvcGUgPSB0eXBlYWhlYWRIZWxwZXIuZGVmYXVsdFR5cGVhaGVhZFNjb3BlKCk7XG5cblx0XHR2YXIgbGlua0Z1bmN0aW9uID0gZnVuY3Rpb24gbGlua19mdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0XHR7XG5cdFx0XHR0eXBlYWhlYWRIZWxwZXIuaW5pdFR5cGVhaGVhZCgkc2NvcGUpO1xuXG5cdFx0XHQkc2NvcGUuZm9yY2VTZWxlY3Rpb24gPSB0cnVlO1xuXG5cdFx0XHQkc2NvcGUuZmluZE1hdGNoZXMgPSBmdW5jdGlvbiBmaW5kTWF0Y2hlcyhzZWFyY2gpXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdFx0dmFyIHBhcmFtcyA9IHtcblx0XHRcdFx0XHR0eXBlOiAnTmFtZScsXG5cdFx0XHRcdFx0J3Rlcm0nOiBzZWFyY2gsXG5cdFx0XHRcdFx0YWN0aXZlOiB0cnVlLFxuXHRcdFx0XHRcdGludGVncmF0b3I6IGZhbHNlLFxuXHRcdFx0XHRcdG91dG9mZG9tYWluOiB0cnVlXG5cdFx0XHRcdH07XG5cdFx0XHRcdGRlbW9ncmFwaGljc1NlcnZpY2Uuc2VhcmNoKHBhcmFtcywgMCwgMjUpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhkYXRhKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoZGF0YS5jb250ZW50KTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdkYXRhYScsIGRhdGEpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdCgpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdFx0fTtcblxuXHRcdFx0JHNjb3BlLmZvcm1hdE1hdGNoU2VsZWN0aW9uID0gZnVuY3Rpb24gZm9ybWF0TWF0Y2hTZWxlY3Rpb24oZGVtb2dyYXBoaWMpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBkZW1vZ3JhcGhpYy5sYXN0TmFtZSArICcsICcgKyBkZW1vZ3JhcGhpYy5maXJzdE5hbWU7XG5cdFx0XHR9O1xuXG5cdFx0XHQkc2NvcGUudHlwZWFoZWFkTGFiZWwgPSBmdW5jdGlvbihtYXRjaClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuICRzY29wZS5mb3JtYXRNYXRjaFNlbGVjdGlvbihtYXRjaCk7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRcdHNjb3BlOiBzY29wZSxcblx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL2NvbW1vbi9kaXJlY3RpdmVzL3R5cGVhaGVhZC5qc3AnLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdGxpbms6IGxpbmtGdW5jdGlvblxuXHRcdH07XG5cblx0fVxuXSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiBIYW1pbHRvblxuIE9udGFyaW8sIENhbmFkYVxuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKFwiQ29tbW9uLkRpcmVjdGl2ZXNcIikuc2VydmljZShcInR5cGVhaGVhZEhlbHBlclwiLCBbXG5cdCckdGltZW91dCcsXG5cdGZ1bmN0aW9uKCR0aW1lb3V0KVxuXHR7XG5cdFx0dmFyIGhlbHBlciA9IHt9O1xuXG5cdFx0aGVscGVyLmRlZmF1bHRUeXBlYWhlYWRTY29wZSA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHR2YXIgc2NvcGUgPSB7fTtcblxuXHRcdFx0Ly8gaG9sZHMgdGhlIHNlbGVjdGVkIG1hdGNoXG5cdFx0XHRzY29wZS5tb2RlbCA9ICc9anVub01vZGVsJztcblxuXHRcdFx0Ly8gcGxhY2Vob2xkZXIgZm9yIHRoZSB0ZXh0IGlucHV0XG5cdFx0XHRzY29wZS5wbGFjZWhvbGRlciA9ICdAanVub1BsYWNlaG9sZGVyJztcblxuXHRcdFx0Ly8gY2FsbGVkIHdoZW4gdGhlIHNlYXJjaCBidXR0b24gaXMgY2xpY2tlZCAoc2VhcmNoIGJ1dHRvbiB3aWxsIG9ubHkgYXBwZWFyIGlmIGRlZmluZWQpXG5cdFx0XHRzY29wZS5vblNlYXJjaEZuID0gJyZqdW5vT25TZWFyY2hGbic7XG5cblx0XHRcdHNjb3BlLm9uQWRkRm4gPSAnJmp1bm9PbkFkZEZuJztcblx0XHRcdC8vIHRpdGxlIGZvciB0aGUgc2VhcmNoIGJ1dHRvblxuXHRcdFx0c2NvcGUuc2VhcmNoQnV0dG9uVGl0bGUgPSAnQGp1bm9TZWFyY2hCdXR0b25UaXRsZSc7XG5cblx0XHRcdHNjb3BlLmFkZEJ1dHRvblRpdGxlID0gJ0BqdW5vQWRkQnV0dG9uVGl0bGUnO1xuXG5cdFx0XHRyZXR1cm4gc2NvcGU7XG5cdFx0fTtcblxuXHRcdGhlbHBlci5pbml0VHlwZWFoZWFkID0gZnVuY3Rpb24gaW5pdFR5cGVhaGVhZCgkc2NvcGUpXG5cdFx0e1xuXHRcdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0XHQvLyB0eXBlYWhlYWQgZGlyZWN0aXZlcyBtdXN0IGRlZmluZS9vdmVycmlkZSB0aGVzZVxuXHRcdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblx0XHRcdCRzY29wZS5maW5kTWF0Y2hlcyA9IGZ1bmN0aW9uIGZpbmRNYXRjaGVzKCR2aWV3VmFsdWUpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdmaW5kTWF0Y2hlcyBmdW5jdGlvbiBtdXN0IGJlIGRlZmluZWQgYnkgdGhlIHR5cGVhaGVhZCBpbXBsZW1lbnRhdGlvbicpO1xuXHRcdFx0fTtcblxuXHRcdFx0JHNjb3BlLmZvcm1hdE1hdGNoU2VsZWN0aW9uID0gZnVuY3Rpb24gZm9ybWF0TWF0Y2hTZWxlY3Rpb24oJG1vZGVsKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZygnZm9ybWF0TWF0Y2ggZnVuY3Rpb24gbXVzdCBiZSBkZWZpbmVkIGJ5IHRoZSB0eXBlYWhlYWQgaW1wbGVtZW50YXRpb24nKTtcblx0XHRcdH07XG5cblx0XHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdFx0Ly8gdHlwZWFoZWFkIGRpcmVjdGl2ZXMgbWF5IGRlZmluZS9vdmVycmlkZSB0aGVzZVxuXHRcdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblx0XHRcdCRzY29wZS5vcHRpb25zVGVtcGxhdGVVcmwgPSBudWxsO1xuXHRcdFx0JHNjb3BlLmZvcmNlU2VsZWN0aW9uID0gZmFsc2U7XG5cblx0XHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdFx0Ly8gY29tbW9uIGluaXRpYWxpemF0aW9uIGZvciAkc2NvcGUsIGZvciB1c2Ugb24gYWxsIHR5cGVhaGVhZCBkaXJlY3RpdmVzXG5cdFx0XHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXHRcdFx0Ly8gdGhlIGludGVybmFsIG5nLW1vZGVsXG5cdFx0XHQkc2NvcGUuc2VhcmNoRmllbGQgPSBudWxsO1xuXG5cdFx0XHQvLyBuZy1tb2RlbC1vcHRpb25zXG5cdFx0XHQkc2NvcGUudHlwZWFoZWFkTW9kZWxPcHRpb25zID0ge1xuXHRcdFx0XHRkZWJvdW5jZTpcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmF1bHQ6IDI1MCxcblx0XHRcdFx0XHRibHVyOiAyNTBcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0Ly8gdGhlIHBhc3NlZC1pbiBtb2RlbCB0aGF0IGhvbGRzIHRoZSBzZWxlY3Rpb25cblx0XHRcdGlmICghYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLm1vZGVsKSlcblx0XHRcdHtcblx0XHRcdFx0JHNjb3BlLm1vZGVsID0gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0JHNjb3BlLmF1dG9jb21wbGV0ZU1pbkxlbmd0aCA9IDE7XG5cblx0XHRcdCRzY29wZS5oYXNCdXR0b25zID0gZnVuY3Rpb24gaGFzQnV0dG9ucygpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiAkc2NvcGUuaGFzU2VhcmNoQnV0dG9uKCkgfHwgJHNjb3BlLmhhc0FkZEJ1dHRvbigpO1xuXHRcdFx0fTtcblxuXHRcdFx0JHNjb3BlLmhhc1NlYXJjaEJ1dHRvbiA9IGZ1bmN0aW9uIGhhc1NlYXJjaEJ1dHRvbigpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBhbmd1bGFyLmlzRnVuY3Rpb24oJHNjb3BlLm9uU2VhcmNoRm4oKSk7XG5cdFx0XHR9O1xuXG5cdFx0XHQkc2NvcGUuaGFzQWRkQnV0dG9uID0gZnVuY3Rpb24gaGFzQWRkQnV0dG9uKClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIGFuZ3VsYXIuaXNGdW5jdGlvbigkc2NvcGUub25BZGRGbigpKTtcblx0XHRcdH07XG5cblx0XHRcdCRzY29wZS5oYXNUZW1wbGF0ZVVybCA9IGZ1bmN0aW9uIGhhc1RlbXBsYXRlVXJsKClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKCRzY29wZS5vcHRpb25zVGVtcGxhdGVVcmwpO1xuXHRcdFx0fTtcblxuXHRcdFx0JHNjb3BlLmhhc0ZvcmNlU2VsZWN0aW9uRW5hYmxlZCA9IGZ1bmN0aW9uIGhhc0ZvcmNlU2VsZWN0aW9uRW5hYmxlZCgpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cygkc2NvcGUuZm9yY2VTZWxlY3Rpb24pICYmICRzY29wZS5mb3JjZVNlbGVjdGlvbjtcblx0XHRcdH07XG5cblx0XHRcdCRzY29wZS5mb3JtYXRNYXRjaCA9IGZ1bmN0aW9uIGZvcm1hdE1hdGNoKCRtb2RlbClcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCItIEZvcm1hdHRpbmcgTWF0Y2ggLS0tLS0tLS0tLS0tLVwiKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJG1vZGVsKTtcblx0XHRcdFx0Y29uc29sZS5sb2coXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcblx0XHRcdFx0aWYgKCFKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cygkbW9kZWwpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoJHNjb3BlLmlzRHVtbXlTZWxlY3Rpb24oJG1vZGVsKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiAkbW9kZWwuc2VhcmNoUXVlcnk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gJHNjb3BlLmZvcm1hdE1hdGNoU2VsZWN0aW9uKCRtb2RlbCk7XG5cdFx0XHR9O1xuXG5cdFx0XHQkc2NvcGUub25TZWxlY3QgPSBmdW5jdGlvbiBvblNlbGVjdCgkaXRlbSwgJG1vZGVsLCAkbGFiZWwsICRldmVudClcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ3R5cGVhaGVhZEhlbHBlcjo6b25TZWxlY3QgLSBzZXR0aW5nIG1vZGVsJywgJGl0ZW0pO1xuXHRcdFx0XHQkc2NvcGUubW9kZWwgPSAkaXRlbTtcblx0XHRcdH07XG5cblx0XHRcdCRzY29wZS5vbkJsdXIgPSBmdW5jdGlvbiBvbkJsdXIoKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoJHNjb3BlLmhhc0ZvcmNlU2VsZWN0aW9uRW5hYmxlZCgpICYmIGFuZ3VsYXIuaXNTdHJpbmcoJHNjb3BlLnNlYXJjaEZpZWxkKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCd0eXBlYWhlYWRIZWxwZXI6Om9uQmx1ciAtIHNldHRpbmcgbW9kZWwgdG8gbnVsbCAoZm9yY2VTZWxlY3Rpb25FbmFibGVkKScpO1xuXHRcdFx0XHRcdC8vIHRoZSBzZWFyY2hGaWVsZCBpcyBub3QgYSB2YWxpZCBzZWxlY3Rpb24gYW5kIGZvcmNlIHNlbGVjdGlvbiBpcyBlbmFibGVkXG5cdFx0XHRcdFx0Ly8gaWYgdGhlcmUgaXMgYSBzZWxlY3QsIG9uU2VsZWN0IHdpbGwgZmlyZSBhZnRlclxuXHRcdFx0XHRcdCRzY29wZS5tb2RlbCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdCRzY29wZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIG9uQ2hhbmdlKClcblx0XHRcdHtcblx0XHRcdFx0aWYgKCEkc2NvcGUuaGFzRm9yY2VTZWxlY3Rpb25FbmFibGVkKCkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygndHlwZWFoZWFkSGVscGVyOjpvbkNoYW5nZSAtIHNldHRpbmcgbW9kZWwgKGlzVHlwZWFoZWFkU2VhcmNoUXVlcnkpJyk7XG5cdFx0XHRcdFx0Ly8gYXMgdXNlciB0eXBlcyBpbnRvIHRoZSB0eXBlYWhlYWQsIHNlbGVjdCBhICdkdW1teScgc2VsZWN0aW9uO1xuXHRcdFx0XHRcdC8vIGNvbnN1bWVycyBuZWVkIHRvIGNoZWNrIHRoZSBpc1R5cGVhaGVhZFNlYXJjaFF1ZXJ5IHByb3BlcnR5XG5cdFx0XHRcdFx0JHNjb3BlLm9uU2VsZWN0KCRzY29wZS5jcmVhdGVEdW1teVNlbGVjdGlvbigpKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0JHNjb3BlLm9uU2VhcmNoID0gZnVuY3Rpb24gb25TZWFyY2goKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBtdXN0IGJlIGluIGEgJHRpbWVvdXQgYmVjYXVzZSBtb2RlbCBtYXkgbm90IGJlIHBvcHVsYXRlZCB5ZXRcblx0XHRcdFx0Ly8gYmVjYXVzZSBvZiBkZWxheSBzcGVjaWZpZWQgYnkgbmctbW9kZWwtb3B0aW9uc1xuXHRcdFx0XHQkdGltZW91dChmdW5jdGlvbigpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKCRzY29wZS5vblNlYXJjaEZuKCkpKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdCRzY29wZS5vblNlYXJjaEZuKCkoJHNjb3BlLm1vZGVsKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblxuXHRcdFx0JHNjb3BlLm9uQWRkID0gZnVuY3Rpb24gb25BZGQoKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBtdXN0IGJlIGluIGEgJHRpbWVvdXQgYmVjYXVzZSBtb2RlbCBtYXkgbm90IGJlIHBvcHVsYXRlZCB5ZXRcblx0XHRcdFx0Ly8gYmVjYXVzZSBvZiBkZWxheSBzcGVjaWZpZWQgYnkgbmctbW9kZWwtb3B0aW9uc1xuXHRcdFx0XHQkdGltZW91dChmdW5jdGlvbigpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKCRzY29wZS5vbkFkZEZuKCkpKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdCRzY29wZS5vbkFkZEZuKCkoJHNjb3BlLm1vZGVsKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblxuXHRcdFx0JHNjb3BlLmNyZWF0ZUR1bW15U2VsZWN0aW9uID0gZnVuY3Rpb24gY3JlYXRlRHVtbXlTZWxlY3Rpb24oKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGlzVHlwZWFoZWFkU2VhcmNoUXVlcnk6IHRydWUsXG5cdFx0XHRcdFx0c2VhcmNoUXVlcnk6ICRzY29wZS5zZWFyY2hGaWVsZFxuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblxuXHRcdFx0JHNjb3BlLmlzRHVtbXlTZWxlY3Rpb24gPSBmdW5jdGlvbiBpc0R1bW15U2VsZWN0aW9uKG1hdGNoKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gSnVuby5Db21tb24uVXRpbC5leGlzdHMobWF0Y2gpICYmIG1hdGNoLmlzVHlwZWFoZWFkU2VhcmNoUXVlcnk7XG5cdFx0XHR9O1xuXG5cdFx0XHQkc2NvcGUuJHdhdGNoKCdtb2RlbCcsIGZ1bmN0aW9uKClcblx0XHRcdHtcblx0XHRcdFx0Ly8gd2hlbiB0aGUgJ2V4dGVybmFsJyBtb2RlbCBpcyB1cGRhdGVkLCB1cGRhdGUgdGhlICdpbnRlcm5hbCcgbW9kZWxcblx0XHRcdFx0JHNjb3BlLnNlYXJjaEZpZWxkID0gJHNjb3BlLm1vZGVsO1xuXHRcdFx0fSk7XG5cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGhlbHBlcjtcblx0fVxuXG5dKTsiLCIndXNlIHN0cmljdCdcblxuXG53aW5kb3cuSnVubyA9IHdpbmRvdy5KdW5vIHx8IHt9O1xud2luZG93Lkp1bm8uQ29tbW9uID0gd2luZG93Lkp1bm8uQ29tbW9uIHx8IHt9O1xuXG53aW5kb3cuSnVuby5Db21tb24uRGlzcGxheU1lc3NhZ2VzID0gZnVuY3Rpb24gRGlzcGxheU1lc3NhZ2VzKG1lc3NhZ2VzX2hhc2gsIG9wdGlvbnMpXG57XG5cdHZhciBtZSA9IHRoaXM7XG5cblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdC8vIExvY2FsIFZhcmlhYmxlc1xuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuXHRtZS5tZXNzYWdlc19oYXNoID0ge307XG5cdG1lLmRpc3BsYXlfZmllbGRfZXJyb3JzID0gdHJ1ZTtcblx0bWUuZmllbGRfZXJyb3JzX2xhYmVsX21hcCA9IHt9O1xuXHRtZS5maWVsZF9lcnJvcnNfbGFiZWxfbWFwX2tleSA9IG51bGw7XG5cdG1lLmV4dHJhX2luZm8gPSB7fTtcblx0bWUubWV0YSA9IHt9O1xuXG5cdG1lLnNhdmluZ19tZXNzYWdlID0gJ1NhdmluZy4uLic7XG5cblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdC8vIEluaXRpYWxpemVcblx0Ly8gQHBhcmFtIHttZXNzYWdlc19oYXNofSBFcnJvciBoYXNoIGZyb20gSnVubyBBUElcblx0Ly8gQHBhcmFtIHtvcHRpb25zfSBIYXNoXG5cdC8vXHRcdC0ge2Rpc3BsYXlfZmllbGRfZXJyb3JzfSBCb29sZWFuIDogU2V0cyBmbGFnXG5cdC8vXHRcdC0ge2ZpZWxkX2Vycm9yc19sYWJlbF9tYXB9IEhhc2ggOiBDYW4gcGFzcyBhIGhhc2ggaW4gdG8gZ2V0IGZpZWxkXG5cdC8vIFx0XHRsYWJlbHMgZm9yIGRpc3BsYXlpbmcgZmllbGQgZXJyb3JzLiBBc3N1bWVkIHRvIGJlIGZpZWxkID0+IGxhYmVsXG5cdC8vXHRcdC0ge2ZpZWxkX2Vycm9yc19sYWJlbF9tYXBfa2V5fSBTdHJpbmcgOiBBbGxvd3MgZm9yXG5cdC8vIFx0XHRmaWVsZCA9PiBIYXNoW2tleV0gbG9va3VwIGZvciBsYWJlbC5cblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cblx0bWUuaW5pdCA9IGZ1bmN0aW9uIGluaXQoKVxuXHR7XG5cdFx0aWYgKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1lc3NhZ2VzX2hhc2gpKVxuXHRcdHtcblx0XHRcdG1lLm1lc3NhZ2VzX2hhc2ggPSBtZXNzYWdlc19oYXNoO1xuXHRcdH1cblxuXHRcdC8vIERhdGFtYXBwZXIgZmllbGQgZXJyb3JzIGFyZSBpbmNvbnNpc3RlbnQgYW5kIGNhbiByZXR1cm4gZWl0aGVyIGFcblx0XHQvLyBoYXNoIC0+IGFycmF5IG9yIGhhc2ggLT4gc3RyaW5nXG5cdFx0bWUuZm9yY2VfZmllbGRfZXJyb3JfYXJyYXlzKCk7XG5cblx0XHQvLyBQYXJzZSBvcHRpb25zXG5cdFx0aWYgKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG9wdGlvbnMpKVxuXHRcdHtcblx0XHRcdGlmIChKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhvcHRpb25zLmRpc3BsYXlfZmllbGRfZXJyb3JzKSAmJiBvcHRpb25zLmRpc3BsYXlfZmllbGRfZXJyb3JzID09PSBmYWxzZSlcblx0XHRcdHtcblx0XHRcdFx0bWUuZGlzcGxheV9maWVsZF9lcnJvcnMgPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGlmIChKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhvcHRpb25zLmZpZWxkX2Vycm9yc19sYWJlbF9tYXApKVxuXHRcdFx0e1xuXHRcdFx0XHRtZS5maWVsZF9lcnJvcnNfbGFiZWxfbWFwID0gb3B0aW9ucy5maWVsZF9lcnJvcnNfbGFiZWxfbWFwO1xuXHRcdFx0XHRpZiAoSnVuby5Db21tb24uVXRpbC5leGlzdHMob3B0aW9ucy5maWVsZF9lcnJvcnNfbGFiZWxfbWFwX2tleSkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRtZS5maWVsZF9lcnJvcnNfbGFiZWxfbWFwX2tleSA9IG9wdGlvbnMuZmllbGRfZXJyb3JzX2xhYmVsX21hcF9rZXk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Ly8gbWVyZ2UgYW5vdGhlciBkaXNwbGF5IG1lc3NhZ2VzIG9iamVjdCBpbnRvIHRoaXMgb25lXG5cdG1lLm1lcmdlID0gZnVuY3Rpb24gbWVyZ2UoZGlzcGxheV9tZXNzYWdlcylcblx0e1xuXHRcdC8vIGRvZXMgbm90IG1lcmdlIGV4dHJhX2luZm8gb3IgbWV0YSAtIGp1c3QgbWVzc2FnZXNcblxuXHRcdG1lLm1lc3NhZ2VzX2hhc2ggPSBhbmd1bGFyLm1lcmdlKG1lLm1lc3NhZ2VzX2hhc2gsIGRpc3BsYXlfbWVzc2FnZXMubWVzc2FnZXNfaGFzaCk7XG5cdH07XG5cblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdC8vIEFsZXJ0IFdhcm5pbmdzXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5cdG1lLmhhc19hbGVydF93YXJuaW5ncyA9IGZ1bmN0aW9uIGhhc19hbGVydF93YXJuaW5ncygpXG5cdHtcblx0XHRyZXR1cm4gbWUuYWxlcnRfd2FybmluZ3MoKS5sZW5ndGggPiAwO1xuXHR9O1xuXG5cdG1lLmFsZXJ0X3dhcm5pbmdzID0gZnVuY3Rpb24gYWxlcnRfd2FybmluZ3MoKVxuXHR7XG5cdFx0aWYgKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1lLm1lc3NhZ2VzX2hhc2gpICYmXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1lLm1lc3NhZ2VzX2hhc2guYWxlcnRfd2FybmluZ3MpKVxuXHRcdHtcblx0XHRcdHJldHVybiBtZS5tZXNzYWdlc19oYXNoLmFsZXJ0X3dhcm5pbmdzO1xuXHRcdH1cblx0XHRyZXR1cm4gW107XG5cdH07XG5cblx0bWUuYWRkX2FsZXJ0X3dhcm5pbmcgPSBmdW5jdGlvbiBhZGRfYWxlcnRfd2FybmluZyhtZXNzYWdlKVxuXHR7XG5cdFx0aWYgKCFtZS5oYXNfYWxlcnRfd2FybmluZ3MoKSlcblx0XHR7XG5cdFx0XHRtZS5tZXNzYWdlc19oYXNoLmFsZXJ0X3dhcm5pbmdzID0gW107XG5cdFx0fVxuXHRcdG1lLm1lc3NhZ2VzX2hhc2guYWxlcnRfd2FybmluZ3MucHVzaChtZXNzYWdlKTtcblx0fTtcblxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblx0Ly8gU3RhbmRhcmQgRXJyb3JzXG5cdC8vIEdlbmVyaWMgZXJyb3JzIG5vdCB0aWVkIHRvIGFueSBzcGVjaWZpYyBlbGVtZW50LlxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuXHQvLyBSZXR1cm5zIHRydWUgaWYgdGhlcmUgYXJlIGFueSBmaWVsZCBlcnJvcnNcblx0bWUuaGFzX3ZhbGlkYXRpb25fd2FybmluZ3MgPSBmdW5jdGlvbiBoYXNfdmFsaWRhdGlvbl93YXJuaW5ncygpXG5cdHtcblx0XHRyZXR1cm4gbWUudmFsaWRhdGlvbl93YXJuaW5ncygpLmxlbmd0aCA+IDA7XG5cdH07XG5cblx0bWUuYWRkX3ZhbGlkYXRpb25fd2FybmluZyA9IGZ1bmN0aW9uIGFkZF92YWxpZGF0aW9uX3dhcm5pbmcobWVzc2FnZSlcblx0e1xuXHRcdGlmICghbWUuaGFzX3ZhbGlkYXRpb25fd2FybmluZ3MoKSlcblx0XHR7XG5cdFx0XHRtZS5tZXNzYWdlc19oYXNoLnZhbGlkYXRpb25fd2FybmluZ3MgPSBbXTtcblx0XHR9XG5cdFx0bWUubWVzc2FnZXNfaGFzaC52YWxpZGF0aW9uX3dhcm5pbmdzLnB1c2gobWVzc2FnZSk7XG5cdH07XG5cblx0bWUudmFsaWRhdGlvbl93YXJuaW5ncyA9IGZ1bmN0aW9uIHZhbGlkYXRpb25fd2FybmluZ3MoKVxuXHR7XG5cdFx0aWYgKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1lLm1lc3NhZ2VzX2hhc2gpICYmXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1lLm1lc3NhZ2VzX2hhc2gudmFsaWRhdGlvbl93YXJuaW5ncykpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIG1lLm1lc3NhZ2VzX2hhc2gudmFsaWRhdGlvbl93YXJuaW5ncztcblx0XHR9XG5cdFx0cmV0dXJuIFtdO1xuXHR9O1xuXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXHQvLyBTdGFuZGFyZCBFcnJvcnNcblx0Ly8gR2VuZXJpYyBlcnJvcnMgbm90IHRpZWQgdG8gYW55IHNwZWNpZmljIGVsZW1lbnQuXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5cdG1lLmhhc19zdGFuZGFyZF9lcnJvcnMgPSBmdW5jdGlvbiBoYXNfc3RhbmRhcmRfZXJyb3JzKClcblx0e1xuXHRcdHJldHVybiBtZS5zdGFuZGFyZF9lcnJvcnMoKS5sZW5ndGggPiAwO1xuXHR9O1xuXG5cdG1lLnN0YW5kYXJkX2Vycm9ycyA9IGZ1bmN0aW9uIHN0YW5kYXJkX2Vycm9ycygpXG5cdHtcblx0XHRpZiAoSnVuby5Db21tb24uVXRpbC5leGlzdHMobWUubWVzc2FnZXNfaGFzaCkgJiZcblx0XHRcdFx0SnVuby5Db21tb24uVXRpbC5leGlzdHMobWUubWVzc2FnZXNfaGFzaC5zdGFuZGFyZF9lcnJvcnMpKVxuXHRcdHtcblx0XHRcdHJldHVybiBtZS5tZXNzYWdlc19oYXNoLnN0YW5kYXJkX2Vycm9ycztcblx0XHR9XG5cdFx0cmV0dXJuIFtdO1xuXHR9O1xuXG5cdG1lLmFkZF9zdGFuZGFyZF9lcnJvciA9IGZ1bmN0aW9uIGFkZF9zdGFuZGFyZF9lcnJvcihtZXNzYWdlKVxuXHR7XG5cdFx0aWYgKCFtZS5oYXNfc3RhbmRhcmRfZXJyb3JzKCkpXG5cdFx0e1xuXHRcdFx0bWUubWVzc2FnZXNfaGFzaC5zdGFuZGFyZF9lcnJvcnMgPSBbXTtcblx0XHR9XG5cdFx0bWUubWVzc2FnZXNfaGFzaC5zdGFuZGFyZF9lcnJvcnMucHVzaChtZXNzYWdlKTtcblx0fTtcblxuXHRtZS5hZGRfZ2VuZXJpY19mYXRhbF9lcnJvciA9IGZ1bmN0aW9uIGFkZF9nZW5lcmljX2ZhdGFsX2Vycm9yKClcblx0e1xuXHRcdC8vIFRPRE86IGNoYW5nZSB0aGlzXG5cdFx0bWUuYWRkX3N0YW5kYXJkX2Vycm9yKFwiRmF0YWwgRXJyb3JcIik7XG5cdFx0Ly9cdFx0SnVuby5Db250ZXh0LlNldHRpbmdzLmludGVyZmFjZV9wcmVmZXJlbmNlcy5nZW5lcmljX2ZhdGFsX2Vycm9yX21lc3NhZ2UpO1xuXHR9O1xuXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXHQvLyBTdGFuZGFyZCBXYXJuaW5nc1xuXHQvLyBHZW5lcmljIHdhcm5pbmdzIG5vdCB0aWVkIHRvIGFueSBzcGVjaWZpYyBlbGVtZW50LlxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuXHRtZS5oYXNfc3RhbmRhcmRfd2FybmluZ3MgPSBmdW5jdGlvbiBoYXNfc3RhbmRhcmRfd2FybmluZ3MoKVxuXHR7XG5cdFx0cmV0dXJuIG1lLnN0YW5kYXJkX3dhcm5pbmdzKCkubGVuZ3RoID4gMDtcblx0fTtcblxuXHRtZS5zdGFuZGFyZF93YXJuaW5ncyA9IGZ1bmN0aW9uIHN0YW5kYXJkX3dhcm5pbmdzKClcblx0e1xuXHRcdGlmIChKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhtZS5tZXNzYWdlc19oYXNoKSAmJlxuXHRcdFx0XHRKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhtZS5tZXNzYWdlc19oYXNoLnN0YW5kYXJkX3dhcm5pbmdzKSlcblx0XHR7XG5cdFx0XHRyZXR1cm4gbWUubWVzc2FnZXNfaGFzaC5zdGFuZGFyZF93YXJuaW5ncztcblx0XHR9XG5cdFx0cmV0dXJuIFtdO1xuXHR9O1xuXG5cdG1lLmFkZF9zdGFuZGFyZF93YXJuaW5nID0gZnVuY3Rpb24gYWRkX3N0YW5kYXJkX3dhcm5pbmcobWVzc2FnZSlcblx0e1xuXHRcdGlmICghbWUuaGFzX3N0YW5kYXJkX3dhcm5pbmdzKCkpXG5cdFx0e1xuXHRcdFx0bWUubWVzc2FnZXNfaGFzaC5zdGFuZGFyZF93YXJuaW5ncyA9IFtdO1xuXHRcdH1cblx0XHRtZS5tZXNzYWdlc19oYXNoLnN0YW5kYXJkX3dhcm5pbmdzLnB1c2gobWVzc2FnZSk7XG5cdH07XG5cblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdC8vIFN0YW5kYXJkIEluZm8gTWVzc2FnZVxuXHQvLyBHZW5lcmljIGluZm8gbWVzc2FnZSBub3QgdGllZCB0byBhbnkgc3BlY2lmaWMgZWxlbWVudC5cblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cblx0bWUuaGFzX3N0YW5kYXJkX2luZm8gPSBmdW5jdGlvbiBoYXNfc3RhbmRhcmRfaW5mbygpXG5cdHtcblx0XHRyZXR1cm4gbWUuc3RhbmRhcmRfaW5mbygpLmxlbmd0aCA+IDA7XG5cdH07XG5cblx0bWUuc3RhbmRhcmRfaW5mbyA9IGZ1bmN0aW9uIHN0YW5kYXJkX2luZm8oKVxuXHR7XG5cdFx0aWYgKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1lLm1lc3NhZ2VzX2hhc2gpICYmXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1lLm1lc3NhZ2VzX2hhc2guc3RhbmRhcmRfaW5mbykpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIG1lLm1lc3NhZ2VzX2hhc2guc3RhbmRhcmRfaW5mbztcblx0XHR9XG5cdFx0cmV0dXJuIFtdO1xuXHR9O1xuXG5cdG1lLmFkZF9zdGFuZGFyZF9pbmZvID0gZnVuY3Rpb24gYWRkX3N0YW5kYXJkX2luZm8obWVzc2FnZSlcblx0e1xuXHRcdGlmICghbWUuaGFzX3N0YW5kYXJkX2luZm8oKSlcblx0XHR7XG5cdFx0XHRtZS5tZXNzYWdlc19oYXNoLnN0YW5kYXJkX2luZm8gPSBbXTtcblx0XHR9XG5cdFx0bWUubWVzc2FnZXNfaGFzaC5zdGFuZGFyZF9pbmZvLnB1c2gobWVzc2FnZSk7XG5cdH07XG5cblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdC8vIFN0YW5kYXJkIFN1Y2Nlc3MgTWVzc2FnZVxuXHQvLyBHZW5lcmljIHN1Y2Nlc3MgbWVzc2FnZSBub3QgdGllZCB0byBhbnkgc3BlY2lmaWMgZWxlbWVudC5cblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cblx0bWUuaGFzX3N0YW5kYXJkX3N1Y2Nlc3MgPSBmdW5jdGlvbiBoYXNfc3RhbmRhcmRfc3VjY2VzcygpXG5cdHtcblx0XHRyZXR1cm4gbWUuc3RhbmRhcmRfc3VjY2VzcygpLmxlbmd0aCA+IDA7XG5cdH07XG5cblx0bWUuc3RhbmRhcmRfc3VjY2VzcyA9IGZ1bmN0aW9uIHN0YW5kYXJkX3N1Y2Nlc3MoKVxuXHR7XG5cdFx0aWYgKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1lLm1lc3NhZ2VzX2hhc2gpICYmXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1lLm1lc3NhZ2VzX2hhc2guc3RhbmRhcmRfc3VjY2VzcykpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIG1lLm1lc3NhZ2VzX2hhc2guc3RhbmRhcmRfc3VjY2Vzcztcblx0XHR9XG5cdFx0cmV0dXJuIFtdO1xuXHR9O1xuXG5cdG1lLmFkZF9zdGFuZGFyZF9zdWNjZXNzID0gZnVuY3Rpb24gYWRkX3N0YW5kYXJkX3N1Y2Nlc3MobWVzc2FnZSlcblx0e1xuXHRcdGlmICghbWUuaGFzX3N0YW5kYXJkX3N1Y2Nlc3MoKSlcblx0XHR7XG5cdFx0XHRtZS5tZXNzYWdlc19oYXNoLnN0YW5kYXJkX3N1Y2Nlc3MgPSBbXTtcblx0XHR9XG5cdFx0bWUubWVzc2FnZXNfaGFzaC5zdGFuZGFyZF9zdWNjZXNzLnB1c2gobWVzc2FnZSk7XG5cdH07XG5cblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdC8vIEZpZWxkIEVycm9yc1xuXHQvLyBUaGVzZSBlcnJvcnMgYXJlIGRpcmVjdGx5IHJlbGF0ZWQgdG8gZm9ybSBmaWVsZHMuXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5cdC8vIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBhcmUgYW55IGZpZWxkIGVycm9yc1xuXHRtZS5oYXNfZmllbGRfZXJyb3JzID0gZnVuY3Rpb24gaGFzX2ZpZWxkX2Vycm9ycygpXG5cdHtcblx0XHRyZXR1cm4gbWUuZmllbGRfZXJyb3JzKCkgJiYgIWFuZ3VsYXIuZXF1YWxzKG1lLmZpZWxkX2Vycm9ycygpLCB7fSk7XG5cdH07XG5cblx0Ly8gUmV0dXJucyBhIGhhc2ggb2YgZmllbGQgZXJyb3JzXG5cdG1lLmZpZWxkX2Vycm9ycyA9IGZ1bmN0aW9uIGZpZWxkX2Vycm9ycyhwcmVwZW5kX2xhYmVsKVxuXHR7XG5cdFx0dmFyIGZpZWxkX2Vycm9ycyA9IHt9XG5cdFx0aWYgKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1lLm1lc3NhZ2VzX2hhc2gpICYmXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1lLm1lc3NhZ2VzX2hhc2guZmllbGRfZXJyb3JzKSlcblx0XHR7XG5cdFx0XHRpZiAoSnVuby5Db21tb24uVXRpbC5leGlzdHMocHJlcGVuZF9sYWJlbCkgJiYgcHJlcGVuZF9sYWJlbCA9PT0gdHJ1ZSlcblx0XHRcdHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIG1lLm1lc3NhZ2VzX2hhc2guZmllbGRfZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZmllbGRfZXJyb3JzW2tleV0gPSBtZS5wcmVwZW5kX2xhYmVsKFxuXHRcdFx0XHRcdFx0XHRrZXksIG1lLm1lc3NhZ2VzX2hhc2guZmllbGRfZXJyb3JzW2tleV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGZpZWxkX2Vycm9ycyA9IG1lLm1lc3NhZ2VzX2hhc2guZmllbGRfZXJyb3JzO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZmllbGRfZXJyb3JzO1xuXHR9O1xuXG5cdC8vIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBhIGZpZWxkIGVycm9yIGZvciBhbnkgb2YgdGhlIHBhc3NlZCBpbiBrZXlzXG5cdG1lLmhhc19vbmVfb2ZfZmllbGRfZXJyb3IgPSBmdW5jdGlvbiBoYXNfb25lX29mX2ZpZWxkX2Vycm9yKGtleXMpXG5cdHtcblx0XHRpZiAoIWFuZ3VsYXIuaXNBcnJheShrZXlzKSlcblx0XHR7XG5cdFx0XHRrZXlzID0gW2tleXNdO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgaW4ga2V5cylcblx0XHR7XG5cdFx0XHRpZiAobWUuaGFzX2ZpZWxkX2Vycm9yKGtleXNbaV0pKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xuXG5cdC8vIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpZWxkIGVycm9yIGV4aXN0cyBhbmQgdGhpcyBlcnJvciBvYmplY3QgaGFzIHRoZSBtYXRjaGluZyBpbmRleC5cblx0Ly8gVXNlZCBmb3IgaW52b2ljZSBtdWx0aSBwb3N0IHdoaWNoIHBvc3RzIG11bHRpcGxlIGludm9pY2VzIGxpbmUgaXRlbXMsIGFuZCByZXR1cm5zIGFuIGluZGV4XG5cdC8vIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGxpbmUgaXRlbSB3aXRoIHRoZSBlcnJvclxuXHRtZS5oYXNfaW5kZXhlZF9maWVsZF9lcnJvciA9IGZ1bmN0aW9uIGhhc19pbmRleGVkX2ZpZWxkX2Vycm9yKGtleSwgaW5kZXgpXG5cdHtcblx0XHRpZihKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhtZS5leHRyYV9pbmZvKSAmJlxuXHRcdFx0XHRKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhtZS5leHRyYV9pbmZvLmluZGV4KSAmJlxuXHRcdFx0XHRtZS5leHRyYV9pbmZvLmluZGV4ID09IGluZGV4KVxuXHRcdHtcblx0XHRcdHJldHVybiBtZS5oYXNfZmllbGRfZXJyb3Ioa2V5KTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xuXG5cdC8vIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpZWxkIGVycm9yIGV4aXN0c1xuXHRtZS5oYXNfZmllbGRfZXJyb3IgPSBmdW5jdGlvbiBoYXNfZmllbGRfZXJyb3Ioa2V5KVxuXHR7XG5cdFx0aWYgKG1lLmhhc19maWVsZF9lcnJvcnMoKSlcblx0XHR7XG5cdFx0XHRpZiAoa2V5IGluIG1lLmZpZWxkX2Vycm9ycygpKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xuXG5cdC8vIENvbnZlcnRzIGFsbCBmaWVsZCBlcnJvcnMgdG8gc3RyaW5ncy4gQ29uY2F0aW5hdGVzIGFycmF5cy4gVXNlZnVsIGZvciBvdXIgY2EtZmllbGRcblx0Ly8gZGlyZWN0aXZlcyB0aGF0IHVzZSBjYS1lcnJvciBhcyBpdCBkb2Vzbid0IGFjY2VwdCBhIGJvb2xlYW4gdmFsdWUuXG5cdG1lLmZpZWxkX2Vycm9yX3N0cmluZyA9IGZ1bmN0aW9uIGZpZWxkX2Vycm9yX3N0cmluZyhrZXksIGNvbmNhdF9zdHJpbmcpXG5cdHtcblx0XHRpZiAobWUuaGFzX2ZpZWxkX2Vycm9yKGtleSkpXG5cdFx0e1xuXHRcdFx0aWYgKCFKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhjb25jYXRfc3RyaW5nKSlcblx0XHRcdHtcblx0XHRcdFx0Y29uY2F0X3N0cmluZyA9IFwiLCBcIjtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtZS5maWVsZF9lcnJvcnMoKVtrZXldLmpvaW4oY29uY2F0X3N0cmluZyk7XG5cdFx0fVxuXHRcdHJldHVybiBcIlwiO1xuXHR9O1xuXG5cdC8vIEFkZHMgYSBuZXcgZmllbGQgZXJyb3Igd2l0aCB0aGUgZ2l2ZW4gbWVzc2FnZVxuXHRtZS5hZGRfZmllbGRfZXJyb3IgPSBmdW5jdGlvbiBhZGRfZmllbGRfZXJyb3Ioa2V5LCBtZXNzYWdlKVxuXHR7XG5cdFx0aWYgKCFtZS5oYXNfZmllbGRfZXJyb3JzKCkpXG5cdFx0e1xuXHRcdFx0bWUubWVzc2FnZXNfaGFzaC5maWVsZF9lcnJvcnMgPSB7fTtcblx0XHR9XG5cdFx0aWYgKCFtZS5oYXNfZmllbGRfZXJyb3Ioa2V5KSlcblx0XHR7XG5cdFx0XHRtZS5tZXNzYWdlc19oYXNoLmZpZWxkX2Vycm9yc1trZXldID0gW107XG5cdFx0fVxuXHRcdG1lLm1lc3NhZ2VzX2hhc2guZmllbGRfZXJyb3JzW2tleV0ucHVzaChtZXNzYWdlKVxuXHR9O1xuXG5cdC8vIFJlbW92ZXMgYSBmaWVsZCBlcnJvci5cblx0bWUucmVtb3ZlX2ZpZWxkX2Vycm9yID0gZnVuY3Rpb24gcmVtb3ZlX2ZpZWxkX2Vycm9yKGtleSlcblx0e1xuXHRcdGlmKG1lLmhhc19maWVsZF9lcnJvcihrZXkpKVxuXHRcdHtcblx0XHRcdGRlbGV0ZSBtZS5tZXNzYWdlc19oYXNoLmZpZWxkX2Vycm9yc1trZXldO1xuXHRcdH1cblx0fTtcblxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblx0Ly8gRXJyb3IgbGlua3Ncblx0Ly8gVGhlc2UgYXJlIGVycm9yIG1lc3NhZ2VzIHRoYXQgaGF2ZSBhbiBlbWJlZGVkIGxpbmsgaW4gdGhlbVxuXHQvLyBFZzogVGhpcyBwYXRpZW50IGFscmVhZHkgZXhpc3RzLiBQcmVzcyBcImhlcmVcIiB0byB2aWV3IHBhdGllbnQuXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5cdG1lLmhhc19lcnJvcl9saW5rcyA9IGZ1bmN0aW9uIGhhc19lcnJvcl9saW5rcygpXG5cdHtcblx0XHRyZXR1cm4gbWUuZXJyb3JfbGlua3MoKS5sZW5ndGggPiAwO1xuXHR9O1xuXG5cdG1lLmFkZF9lcnJvcl9saW5rID0gZnVuY3Rpb24gYWRkX2Vycm9yX2xpbmsobWVzc2FnZSlcblx0e1xuXHRcdGlmICghbWUuaGFzX2Vycm9yX2xpbmtzKCkpXG5cdFx0e1xuXHRcdFx0bWUubWVzc2FnZXNfaGFzaC5lcnJvcl9saW5rcyA9IFtdO1xuXHRcdH1cblx0XHRtZS5tZXNzYWdlc19oYXNoLmVycm9yX2xpbmtzLnB1c2gobWVzc2FnZSk7XG5cdH07XG5cblx0bWUuZXJyb3JfbGlua3MgPSBmdW5jdGlvbiBlcnJvcl9saW5rcygpXG5cdHtcblx0XHRpZiAoSnVuby5Db21tb24uVXRpbC5leGlzdHMobWUubWVzc2FnZXNfaGFzaCkgJiZcblx0XHRcdFx0SnVuby5Db21tb24uVXRpbC5leGlzdHMobWUubWVzc2FnZXNfaGFzaC5lcnJvcl9saW5rcykpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIG1lLm1lc3NhZ2VzX2hhc2guZXJyb3JfbGlua3M7XG5cdFx0fVxuXHRcdHJldHVybiBbXTtcblx0fTtcblxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblx0Ly8gSGVscGVyc1xuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuXHRtZS5oYXNfZXJyb3JzID0gZnVuY3Rpb24gaGFzX2Vycm9ycygpXG5cdHtcblx0XHRpZiAobWUuaGFzX2ZpZWxkX2Vycm9ycygpIHx8XG5cdFx0XHRcdG1lLmhhc19zdGFuZGFyZF9lcnJvcnMoKSB8fFxuXHRcdFx0XHRtZS5oYXNfZXJyb3JfbGlua3MoKSlcblx0XHR7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xuXG5cdG1lLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKVxuXHR7XG5cdFx0bWUubWVzc2FnZXNfaGFzaCA9IHt9O1xuXHR9O1xuXG5cdC8vIE1ha2Ugc3VyZSBlYWNoIGZpZWxkIGVycm9yIHZhbHVlIGlzIGFuIGFycmF5IG9mIG1lc3NhZ2VzIGV2ZW4gaWYgdGhlcmVcblx0Ly8gaXMgb25seSBvbmUgZWxlbWVudC5cblx0bWUuZm9yY2VfZmllbGRfZXJyb3JfYXJyYXlzID0gZnVuY3Rpb24gZm9yY2VfZmllbGRfZXJyb3JfYXJyYXlzKClcblx0e1xuXHRcdGlmIChtZS5oYXNfZmllbGRfZXJyb3JzKCkpXG5cdFx0e1xuXHRcdFx0Zm9yICh2YXIgaSBpbiBtZS5tZXNzYWdlc19oYXNoLmZpZWxkX2Vycm9ycylcblx0XHRcdHtcblx0XHRcdFx0aWYgKCFhbmd1bGFyLmlzQXJyYXkobWUubWVzc2FnZXNfaGFzaC5maWVsZF9lcnJvcnNbaV0pKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bWUubWVzc2FnZXNfaGFzaC5maWVsZF9lcnJvcnNbaV0gPSBbXG5cdFx0XHRcdFx0XHRhbmd1bGFyLmNvcHkobWUubWVzc2FnZXNfaGFzaC5maWVsZF9lcnJvcnNbaV0pXG5cdFx0XHRcdFx0XTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHQvLyBQcmVwZW5kIGZpZWxkIGxhYmVsIHRvIGFsbCBmaWVsZCBlcnJvciBtZXNzYWdlc1xuXHRtZS5wcmVwZW5kX2xhYmVsID0gZnVuY3Rpb24gcHJlcGVuZF9sYWJlbChmaWVsZCwgZmllbGRfZXJyb3JzKVxuXHR7XG5cdFx0dmFyIGxhYmVsID0gXCJcIjtcblx0XHR2YXIgb3V0X2ZpZWxkX2Vycm9ycyA9IFtdO1xuXHRcdGlmIChmaWVsZCBpbiBtZS5maWVsZF9lcnJvcnNfbGFiZWxfbWFwKVxuXHRcdHtcblx0XHRcdC8vIExvb2t1cCBsYWJlbCBpbiBiYXNpYyBrZXkgLT4gbGFiZWwgbWFwXG5cdFx0XHRsYWJlbCA9IG1lLmZpZWxkX2Vycm9yc19sYWJlbF9tYXBbZmllbGRdO1xuXG5cdFx0XHQvLyBJZiBsYWJlbCBtYXAgaXMgYSBoYXNoIG9mIGhhc2hlcywgZ3JhYiB0aGUgbGFiZWwgZnJvbSB0aGVcblx0XHRcdC8vIHByb3ZpZGVkIGxhYmVsIGZpZWxkXG5cdFx0XHRpZiAoSnVuby5Db21tb24uVXRpbC5leGlzdHMobWUuZmllbGRfZXJyb3JzX2xhYmVsX21hcF9rZXkpKVxuXHRcdFx0e1xuXHRcdFx0XHRsYWJlbCA9IG1lLmZpZWxkX2Vycm9yc19sYWJlbF9tYXBbZmllbGRdW1xuXHRcdFx0XHRcdFx0bWUuZmllbGRfZXJyb3JzX2xhYmVsX21hcF9rZXldO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcHBlbmQgbGFiZWxcblx0XHRcdGZvciAodmFyIGkgaW4gZmllbGRfZXJyb3JzKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgZXJyb3JfbWVzc2FnZSA9IFtsYWJlbCwgZmllbGRfZXJyb3JzW2ldXS5qb2luKFwiIFwiKS50cmltKCk7XG5cdFx0XHRcdG91dF9maWVsZF9lcnJvcnMucHVzaChlcnJvcl9tZXNzYWdlKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdG91dF9maWVsZF9lcnJvcnMgPSBmaWVsZF9lcnJvcnM7XG5cdFx0fVxuXHRcdHJldHVybiBvdXRfZmllbGRfZXJyb3JzO1xuXHR9O1xuXG5cdG1lLm1lcmdlX21lc3NhZ2VzID0gZnVuY3Rpb24gbWVyZ2VfbWVzc2FnZXMobWVyZ2VfZGlzcGxheV9tZXNzYWdlcylcblx0e1xuXHRcdHZhciBmaWVsZF9lcnJvcnMgPSBtZXJnZV9kaXNwbGF5X21lc3NhZ2VzLmZpZWxkX2Vycm9ycygpO1xuXHRcdHZhciBlcnJvcl9saW5rcyA9IG1lcmdlX2Rpc3BsYXlfbWVzc2FnZXMuZXJyb3JfbGlua3MoKTtcblx0XHR2YXIgc3RhbmRhcmRfaW5mb3MgPSBtZXJnZV9kaXNwbGF5X21lc3NhZ2VzLnN0YW5kYXJkX2luZm8oKTtcblx0XHR2YXIgc3RhbmRhcmRfd2FybmluZ3MgPSBtZXJnZV9kaXNwbGF5X21lc3NhZ2VzLnN0YW5kYXJkX3dhcm5pbmdzKCk7XG5cdFx0dmFyIHN0YW5kYXJkX2Vycm9ycyA9IG1lcmdlX2Rpc3BsYXlfbWVzc2FnZXMuc3RhbmRhcmRfZXJyb3JzKCk7XG5cdFx0dmFyIGFsZXJ0X3dhcm5pbmdzID0gbWVyZ2VfZGlzcGxheV9tZXNzYWdlcy5hbGVydF93YXJuaW5ncygpO1xuXHRcdHZhciB2YWxpZGF0aW9uX3dhcm5pbmdzID0gbWVyZ2VfZGlzcGxheV9tZXNzYWdlcy52YWxpZGF0aW9uX3dhcm5pbmdzKCk7XG5cdFx0dmFyIHN0YW5kYXJkX3N1Y2Nlc3MgPSBtZXJnZV9kaXNwbGF5X21lc3NhZ2VzLnN0YW5kYXJkX3N1Y2Nlc3MoKTtcblxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdGFuZGFyZF9zdWNjZXNzLmxlbmd0aDsgaSsrKVxuXHRcdHtcblx0XHRcdG1lLmFkZF9zdGFuZGFyZF9zdWNjZXNzKHN0YW5kYXJkX3N1Y2Nlc3NbaV0pO1xuXHRcdH1cblxuXHRcdGZvcihpID0gMDsgaSA8IHN0YW5kYXJkX2luZm9zLmxlbmd0aDsgaSsrKVxuXHRcdHtcblx0XHRcdG1lLmFkZF9zdGFuZGFyZF9pbmZvKHN0YW5kYXJkX2luZm9zW2ldKTtcblx0XHR9XG5cblx0XHRmb3IoaSA9IDA7IGkgPCBzdGFuZGFyZF93YXJuaW5ncy5sZW5ndGg7IGkrKylcblx0XHR7XG5cdFx0XHRtZS5hZGRfc3RhbmRhcmRfd2FybmluZyhzdGFuZGFyZF93YXJuaW5nc1tpXSk7XG5cdFx0fVxuXG5cdFx0Zm9yKGkgPSAwOyBpIDwgc3RhbmRhcmRfZXJyb3JzLmxlbmd0aDsgaSsrKVxuXHRcdHtcblx0XHRcdG1lLmFkZF9zdGFuZGFyZF9lcnJvcihzdGFuZGFyZF9lcnJvcnNbaV0pO1xuXHRcdH1cblxuXHRcdGZvcihpID0gMDsgaSA8IGFsZXJ0X3dhcm5pbmdzLmxlbmd0aDsgaSsrKVxuXHRcdHtcblx0XHRcdG1lLmFkZF9hbGVydF93YXJuaW5nKGFsZXJ0X3dhcm5pbmdzW2ldKTtcblx0XHR9XG5cblx0XHRmb3IoaSA9IDA7IGkgPCB2YWxpZGF0aW9uX3dhcm5pbmdzLmxlbmd0aDsgaSsrKVxuXHRcdHtcblx0XHRcdG1lLmFkZF92YWxpZGF0aW9uX3dhcm5pbmcodmFsaWRhdGlvbl93YXJuaW5nc1tpXSk7XG5cdFx0fVxuXG5cdFx0Zm9yKGkgPSAwOyBpIDwgZXJyb3JfbGlua3MubGVuZ3RoOyBpKyspXG5cdFx0e1xuXHRcdFx0bWUuYWRkX2Vycm9yX2xpbmsoZXJyb3JfbGlua3NbaV0pO1xuXHRcdH1cblxuXHRcdGZvcih2YXIga2V5IGluIGZpZWxkX2Vycm9ycylcblx0XHR7XG5cdFx0XHRpZihmaWVsZF9lcnJvcnMuaGFzT3duUHJvcGVydHkoa2V5KSlcblx0XHRcdHtcblx0XHRcdFx0Zm9yKGkgPSAwOyBpIDwgZmllbGRfZXJyb3JzW2tleV0ubGVuZ3RoOyBpKyspXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRtZS5hZGRfZmllbGRfZXJyb3Ioa2V5LCBmaWVsZF9lcnJvcnNba2V5XVtpXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0bWUuaW5pdCgpO1xufTtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdDb21tb24uRmlsdGVycycpLmZpbHRlcignYWdlJywgW1xuXHRmdW5jdGlvbigpXG5cdHtcblx0XHRyZXR1cm4gZnVuY3Rpb24oaW5wdXQpXG5cdFx0e1xuXHRcdFx0aWYgKGlucHV0ICE9PSBudWxsICYmIGlucHV0LnllYXJzICE9PSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoaW5wdXQueWVhcnMgPCAxICYmIGlucHV0Lm1vbnRocyA8IDEpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gaW5wdXQuZGF5cyArIFwiZFwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGlucHV0LnllYXJzIDwgMilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiBpbnB1dC5tb250aHMgKyBcIm1cIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBpbnB1dC55ZWFycyArIFwiIHlcIjtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0fTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdDb21tb24uRmlsdGVycycpLmZpbHRlcignY3V0JywgW1xuXHRmdW5jdGlvbigpXG5cdHtcblx0XHRyZXR1cm4gZnVuY3Rpb24odmFsdWUsIHdvcmR3aXNlLCBtYXgsIHRhaWwpXG5cdFx0e1xuXHRcdFx0aWYgKCF2YWx1ZSkgcmV0dXJuICcnO1xuXG5cdFx0XHRtYXggPSBwYXJzZUludChtYXgsIDEwKTtcblx0XHRcdGlmICghbWF4KSByZXR1cm4gdmFsdWU7XG5cdFx0XHRpZiAodmFsdWUubGVuZ3RoIDw9IG1heCkgcmV0dXJuIHZhbHVlO1xuXG5cdFx0XHR2YWx1ZSA9IHZhbHVlLnN1YnN0cigwLCBtYXgpO1xuXHRcdFx0aWYgKHdvcmR3aXNlKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgbGFzdHNwYWNlID0gdmFsdWUubGFzdEluZGV4T2YoJyAnKTtcblx0XHRcdFx0aWYgKGxhc3RzcGFjZSAhPT0gLTEpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR2YWx1ZSA9IHZhbHVlLnN1YnN0cigwLCBsYXN0c3BhY2UpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZSArICh0YWlsIHx8ICcg4oCmJyk7XG5cdFx0fTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdDb21tb24uRmlsdGVycycsIFtdKTtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdDb21tb24uRmlsdGVycycpLmZpbHRlcignb2Zmc2V0JywgW1xuXHRmdW5jdGlvbigpXG5cdHtcblx0XHRyZXR1cm4gZnVuY3Rpb24oaW5wdXQsIHN0YXJ0KVxuXHRcdHtcblx0XHRcdGlmIChpbnB1dCA9PT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHR9XG5cdFx0XHRzdGFydCA9IHBhcnNlSW50KHN0YXJ0LCAxMCk7XG5cdFx0XHRyZXR1cm4gaW5wdXQuc2xpY2Uoc3RhcnQpO1xuXHRcdH07XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnQ29tbW9uLkZpbHRlcnMnKS5maWx0ZXIoJ3N0YXJ0RnJvbScsIFtcblx0ZnVuY3Rpb24oKVxuXHR7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKGlucHV0LCBzdGFydClcblx0XHR7XG5cdFx0XHRzdGFydCA9ICtzdGFydDsgLy9wYXJzZSB0byBpbnRcblx0XHRcdC8vIHJldHVybiBpbnB1dC5zbGljZShzdGFydCk7XG5cdFx0XHRyZXR1cm4gaW5wdXQ7XG5cdFx0fTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdDb21tb24nLCBbXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwiYXBwU2VydmljZVwiLCBbXG5cdCckaHR0cCcsICckcScsXG5cdGZ1bmN0aW9uKCRodHRwLCAkcSlcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvYXBwJztcblxuXHRcdHNlcnZpY2UuZ2V0QXBwcyA9IGZ1bmN0aW9uIGdldEFwcHMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICcvZ2V0QXBwcycsXG5cdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKClcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJhcHBTZXJ2aWNlczo6Z2V0QXBwcyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgZ2V0dGluZyBhcHAgY29udGVudFwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiBIYW1pbHRvblxuIE9udGFyaW8sIENhbmFkYVxuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKFwiQ29tbW9uLlNlcnZpY2VzXCIpLnNlcnZpY2UoXCJhdXRvQ29tcGxldGVTZXJ2aWNlXCIsIFtcblx0XCIkcVwiLFxuXHRcImRlbW9ncmFwaGljU2VydmljZVwiLFxuXHRmdW5jdGlvbihcblx0XHQkcSxcblx0XHRkZW1vZ3JhcGhpY1NlcnZpY2Vcblx0KVxuXHR7XG5cdFx0dmFyIHNlcnZpY2UgPSB7fTtcblxuXHRcdHNlcnZpY2UuaW5pdF9hdXRvY29tcGxldGVfdmFsdWVzID0gZnVuY3Rpb24gaW5pdF9hdXRvY29tcGxldGVfdmFsdWVzKHBhdGllbnQsIGF1dG9jb21wbGV0ZV92YWx1ZXMpe1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLmdldERlbW9ncmFwaGljKHBhdGllbnQucGF0aWVudCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXN1bHQpO1xuXHRcdFx0XHRyZXN1bHQuZG9iID0gbW9tZW50KFtyZXN1bHQuZG9iWWVhciwgcmVzdWx0LmRvYk1vbnRoLCByZXN1bHQuZG9iRGF5XSk7XG5cblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSh7XG5cdFx0XHRcdFx0ZGF0YTp7XG5cdFx0XHRcdFx0XHRwYXRpZW50Ontcblx0XHRcdFx0XHRcdFx0ZGF0YTogc2VydmljZS5mb3JtYXREZW1vZ3JhcGhpYyhyZXN1bHQpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmZvcm1hdERlbW9ncmFwaGljID0gZnVuY3Rpb24gZm9ybWF0RGVtb2dyYXBoaWMocmVzdWx0KVxuXHRcdHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHV1aWQ6IHJlc3VsdC5kZW1vZ3JhcGhpY05vLFxuXHRcdFx0XHRmdWxsX25hbWU6IHJlc3VsdC5sYXN0TmFtZSArICcsJyArIHJlc3VsdC5maXJzdE5hbWUsXG5cdFx0XHRcdGJpcnRoX2RhdGU6IEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0TW9tZW50RGF0ZShyZXN1bHQuZG9iKSxcblx0XHRcdFx0aGVhbHRoX251bWJlcjogcmVzdWx0Lmhpbixcblx0XHRcdFx0cGhvbmVfbnVtYmVyX3ByaW1hcnk6IHJlc3VsdC5waG9uZVxuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwiYmlsbGluZ1NlcnZpY2VcIiwgW1xuXHQnJGh0dHAnLCAnJHEnLFxuXHRmdW5jdGlvbigkaHR0cCwgJHEpXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzLyc7XG5cblx0XHRzZXJ2aWNlLmdldFVuaXF1ZVNlcnZpY2VUeXBlcyA9IGZ1bmN0aW9uIGdldFVuaXF1ZVNlcnZpY2VUeXBlcygpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICdiaWxsaW5nL3VuaXF1ZVNlcnZpY2VUeXBlcycsXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVyc1dpdGhDYWNoZSgpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YS5jb250ZW50KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJiaWxsaW5nU2VydmljZTo6Z2V0VW5pcXVlU2VydmljZVR5cGVzIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBmZXRjaGluZyBiaWxsaW5nIHNlcnZpY2UgdHlwZXNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRCaWxsaW5nUmVnaW9uID0gZnVuY3Rpb24gZ2V0QmlsbGluZ1JlZ2lvbigpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICdiaWxsaW5nL2JpbGxpbmdSZWdpb24nLFxuXHRcdFx0XHRKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnNXaXRoQ2FjaGUoKSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImJpbGxpbmdTZXJ2aWNlOjpnZXRCaWxsaW5nUmVnaW9uIGVycm9yXCIsIGVycm9yc3opO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgc2V0dGluZyBiaWxsaW5nUmVnaW9uXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0RGVmYXVsdFZpZXcgPSBmdW5jdGlvbiBnZXREZWZhdWx0VmlldygpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICdiaWxsaW5nL2RlZmF1bHRWaWV3Jyxcblx0XHRcdFx0SnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzV2l0aENhY2hlKCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJiaWxsaW5nU2VydmljZTo6Z2V0RGVmYXVsdFZpZXcgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIHNldHRpbmcgZGVmYXVsdFZpZXdcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcImNvbnN1bHRTZXJ2aWNlXCIsIFtcblx0JyRodHRwJyxcblx0JyRxJyxcblx0J2p1bm9IdHRwJyxcblx0ZnVuY3Rpb24oJGh0dHAsXG5cdCAgICAgICAgICRxLFxuXHQgICAgICAgICBqdW5vSHR0cClcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvY29uc3VsdHMvJztcblxuXHRcdHNlcnZpY2Uuc2VhcmNoUmVxdWVzdHMgPSBmdW5jdGlvbiBzZWFyY2hSZXF1ZXN0cyhzZWFyY2gpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpO1xuXHRcdFx0Y29uZmlnLnBhcmFtcyA9IHNlYXJjaDtcblx0XHRcdFxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICdzZWFyY2hSZXF1ZXN0cycsIGNvbmZpZykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJjb25zdWx0U2VydmljZTo6c2VhcmNoUmVxdWVzdHMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBzZWFyY2hpbmcgY29uc3VsdCByZXF1ZXN0c1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldFJlcXVlc3QgPSBmdW5jdGlvbiBnZXRSZXF1ZXN0KHJlcXVlc3RJZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHR2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnZ2V0UmVxdWVzdC8nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlcXVlc3RJZCksIGNvbmZpZykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYocmVzdWx0cy5kYXRhLnJlZmVycmFsRGF0ZSkgcmVzdWx0cy5kYXRhLnJlZmVycmFsRGF0ZSA9IG1vbWVudChyZXN1bHRzLmRhdGEucmVmZXJyYWxEYXRlKS50b0RhdGUoKTtcblx0XHRcdFx0XHRpZihyZXN1bHRzLmRhdGEuYXBwb2ludG1lbnREYXRlKSByZXN1bHRzLmRhdGEuYXBwb2ludG1lbnREYXRlID0gbW9tZW50KHJlc3VsdHMuZGF0YS5hcHBvaW50bWVudERhdGUpLnRvRGF0ZSgpO1xuXHRcdFx0XHRcdGlmKHJlc3VsdHMuZGF0YS5mb2xsb3dVcERhdGUpIHJlc3VsdHMuZGF0YS5mb2xsb3dVcERhdGUgPSBtb21lbnQocmVzdWx0cy5kYXRhLmZvbGxvd1VwRGF0ZSkudG9EYXRlKCk7XG5cblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiY29uc3VsdFNlcnZpY2U6OmdldFJlcXVlc3QgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXG5cdFx0XHRcdFx0XHRcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGdldHRpbmcgY29uc3VsdCByZXF1ZXN0IChyZXF1ZXN0SWQ9XCIgKyByZXF1ZXN0SWQgKyBcIilcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXHRcdHNlcnZpY2UuZ2V0TmV3UmVxdWVzdCA9IGZ1bmN0aW9uIGdldFJlcXVlc3QoZGVtb2dyYXBoaWNObylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHR2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cdFx0XHRjb25maWcucGFyYW1zID0ge1xuXHRcdFx0XHRkZW1vZ3JhcGhpY05vOiBkZW1vZ3JhcGhpY05vXG5cdFx0XHR9O1xuXG5cdFx0XHRqdW5vSHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJ2dldE5ld1JlcXVlc3QnLCBjb25maWcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKHJlc3VsdHMuZGF0YS5yZWZlcnJhbERhdGUpIHJlc3VsdHMuZGF0YS5yZWZlcnJhbERhdGUgPSBtb21lbnQocmVzdWx0cy5kYXRhLnJlZmVycmFsRGF0ZSkudG9EYXRlKCk7XG5cdFx0XHRcdFx0aWYocmVzdWx0cy5kYXRhLmFwcG9pbnRtZW50RGF0ZSkgcmVzdWx0cy5kYXRhLmFwcG9pbnRtZW50RGF0ZSA9IG1vbWVudChyZXN1bHRzLmRhdGEuYXBwb2ludG1lbnREYXRlKS50b0RhdGUoKTtcblx0XHRcdFx0XHRpZihyZXN1bHRzLmRhdGEuZm9sbG93VXBEYXRlKSByZXN1bHRzLmRhdGEuZm9sbG93VXBEYXRlID0gbW9tZW50KHJlc3VsdHMuZGF0YS5mb2xsb3dVcERhdGUpLnRvRGF0ZSgpO1xuXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImNvbnN1bHRTZXJ2aWNlOjpnZXROZXdSZXF1ZXN0IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFxuXHRcdFx0XHRcdFx0XCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIG5ldyBjb25zdWx0IHJlcXVlc3RcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRSZXF1ZXN0QXR0YWNobWVudHMgPSBmdW5jdGlvbiBnZXRSZXF1ZXN0QXR0YWNobWVudHMoXG5cdFx0XHRyZXF1ZXN0SWQsIGRlbW9ncmFwaGljSWQsIGF0dGFjaGVkKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdHZhciBjb25maWcgPSBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKTtcblx0XHRcdGNvbmZpZy5wYXJhbXMgPSB7XG5cdFx0XHRcdCdkZW1vZ3JhcGhpY0lkJzogZW5jb2RlVVJJQ29tcG9uZW50KGRlbW9ncmFwaGljSWQpLFxuXHRcdFx0XHQnYXR0YWNoZWQnOiBlbmNvZGVVUklDb21wb25lbnQoYXR0YWNoZWQpXG5cdFx0XHR9O1xuXG5cdFx0XHRqdW5vSHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJ2dldFJlcXVlc3RBdHRhY2htZW50cy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlcXVlc3RJZCksIGNvbmZpZykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImNvbnN1bHRTZXJ2aWNlOjpnZXRSZXF1ZXN0QXR0YWNobWVudHMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGdldHRpbmcgY29uc3VsdCBhdHRhY2htZW50cyAocmVxdWVzdElkPVwiICsgcmVxdWVzdElkICsgXCIpXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2Uuc2F2ZVJlcXVlc3QgPSBmdW5jdGlvbiBzYXZlUmVxdWVzdChyZXF1ZXN0KVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHRqdW5vSHR0cC5wb3N0KHNlcnZpY2UuYXBpUGF0aCArICdzYXZlUmVxdWVzdCcsIHJlcXVlc3QpLnRoZW4oXG5cblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImNvbnN1bHRTZXJ2aWNlOjpzYXZlUmVxdWVzdCBlcnJvclwiLCBlcnJvcik7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgY29uc3VsdCByZXF1ZXN0IGFmdGVyIHNhdmVcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5lU2VuZFJlcXVlc3QgPSBmdW5jdGlvbiBlU2VuZFJlcXVlc3QocmVxdWVzdElkKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnZVNlbmRSZXF1ZXN0LycgKyBlbmNvZGVVUklDb21wb25lbnQocmVxdWVzdElkKSxcblx0XHRcdFx0SnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJjb25zdWx0U2VydmljZTo6ZVNlbmRSZXF1ZXN0IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFxuXHRcdFx0XHRcdFx0XCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBlLXNlbmRpbmcgY29uc3VsdCByZXF1ZXN0IChyZXF1ZXN0SWQ9XCIgKyByZXF1ZXN0SWQgKyBcIilcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5zZWFyY2hSZXNwb25zZXMgPSBmdW5jdGlvbiBzZWFyY2hSZXF1ZXN0cyhzZWFyY2gpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpO1xuXHRcdFx0Y29uZmlnLnBhcmFtcyA9IHNlYXJjaDtcblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnc2VhcmNoUmVzcG9uc2VzJywgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImNvbnN1bHRTZXJ2aWNlOjpzZWFyY2hSZXF1ZXN0cyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgc2VhcmNoaW5nIGNvbnN1bHQgcmVxdWVzdHNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRSZXNwb25zZSA9IGZ1bmN0aW9uIGdldFJlc3BvbnNlKHJlc3BvbnNlSWQsIGRlbW9ncmFwaGljTm8pXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0aWYgKHJlc3BvbnNlSWQgPT09IFwibmV3XCIpXG5cdFx0XHR7XG5cdFx0XHRcdHJlc3BvbnNlSWQgPSAwO1xuXHRcdFx0fVxuXG5cdFx0XHQkaHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJ2dldFJlc3BvbnNlJyxcblx0XHRcdHtcblx0XHRcdFx0cGFyYW1zOlxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmVzcG9uc2VJZDogcmVzcG9uc2VJZCxcblx0XHRcdFx0XHRkZW1vZ3JhcGhpY05vOiBkZW1vZ3JhcGhpY05vXG5cdFx0XHRcdH1cblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXG5cdFx0XHRcdFx0aWYocmVzdWx0cy5kYXRhLnJlc3BvbnNlRGF0ZSkgcmVzdWx0cy5kYXRhLnJlc3BvbnNlRGF0ZSA9IG1vbWVudChyZXN1bHRzLmRhdGEucmVzcG9uc2VEYXRlKS50b0RhdGUoKTtcblx0XHRcdFx0XHRpZihyZXN1bHRzLmRhdGEucmVmZXJyYWxEYXRlKSByZXN1bHRzLmRhdGEucmVmZXJyYWxEYXRlID0gbW9tZW50KHJlc3VsdHMuZGF0YS5yZWZlcnJhbERhdGUpLnRvRGF0ZSgpO1xuXHRcdFx0XHRcdGlmKHJlc3VsdHMuZGF0YS5hcHBvaW50bWVudERhdGUpIHJlc3VsdHMuZGF0YS5hcHBvaW50bWVudERhdGUgPSBtb21lbnQocmVzdWx0cy5kYXRhLmFwcG9pbnRtZW50RGF0ZSkudG9EYXRlKCk7XG5cdFx0XHRcdFx0aWYocmVzdWx0cy5kYXRhLmZvbGxvd1VwRGF0ZSkgcmVzdWx0cy5kYXRhLmZvbGxvd1VwRGF0ZSA9IG1vbWVudChyZXN1bHRzLmRhdGEuZm9sbG93VXBEYXRlKS50b0RhdGUoKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiY29uc3VsdFNlcnZpY2U6OmdldFJlc3BvbnNlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFxuXHRcdFx0XHRcdFx0XCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIGNvbnN1bHQgcmVzcG9uc2UgKHJlc3BvbnNlSWQ9XCIgKyByZXNwb25zZUlkICsgXCIpXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0UmVzcG9uc2VBdHRhY2htZW50cyA9IGZ1bmN0aW9uIGdldFJlc3BvbnNlQXR0YWNobWVudHMoXG5cdFx0XHRyZXNwb25zZUlkLCBkZW1vZ3JhcGhpY05vLCBhdHRhY2hlZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0JGh0dHAuZ2V0KFxuXHRcdFx0XHRzZXJ2aWNlLmFwaVBhdGggKyAnZ2V0UmVzcG9uc2VBdHRhY2htZW50cz9yZXNwb25zZUlkPScgKyBlbmNvZGVVUklDb21wb25lbnQocmVzcG9uc2VJZCkgK1xuXHRcdFx0XHQnJmRlbW9ncmFwaGljTm89JyArIGVuY29kZVVSSUNvbXBvbmVudChkZW1vZ3JhcGhpY05vKSArXG5cdFx0XHRcdCcmYXR0YWNoZWQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChhdHRhY2hlZCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJjb25zdWx0U2VydmljZTo6Z2V0UmVzcG9uc2VBdHRhY2htZW50cyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcblx0XHRcdFx0XHRcdFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2V0dGluZyBjb25zdWx0IHJlc3BvbnNlIGF0dGFjaG1lbnRzIChyZXNwb25zZUlkPVwiICtcblx0XHRcdFx0XHRcdHJlc3BvbnNlSWQgKyBcIilcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5zYXZlUmVzcG9uc2UgPSBmdW5jdGlvbiBzYXZlUmVzcG9uc2UocmVzcG9uc2UpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAucG9zdChzZXJ2aWNlLmFwaVBhdGggKyAnc2F2ZVJlc3BvbnNlJywgcmVzcG9uc2UpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJjb25zdWx0U2VydmljZTo6c2F2ZVJlc3BvbnNlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgY29uc3VsdCByZXNwb25zZSBhZnRlciBzYXZlXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0UmVmZXJyYWxQYXRod2F5c0J5U2VydmljZSA9IGZ1bmN0aW9uIGdldFJlZmVycmFsUGF0aHdheXNCeVNlcnZpY2Uoc2VydmljZU5hbWUpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnZ2V0UmVmZXJyYWxQYXRod2F5c0J5U2VydmljZT9zZXJ2aWNlTmFtZT0nICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KHNlcnZpY2VOYW1lKSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImNvbnN1bHRTZXJ2aWNlOjpnZXRSZWZlcnJhbFBhdGh3YXlzQnlTZXJ2aWNlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBmZXRjaGluZyByZWZlcnJhbCBwYXRod2F5c1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldExldHRlcmhlYWRMaXN0ID0gZnVuY3Rpb24gZ2V0TGV0dGVyaGVhZExpc3QoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdHZhciBjb25maWcgPSBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKTtcblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnZ2V0TGV0dGVyaGVhZExpc3QnLCBjb25maWcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiY29uc3VsdFNlcnZpY2U6OmdldExldHRlcmhlYWRMaXN0IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgbGV0dGVyaGVhZHNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcImRlbW9ncmFwaGljU2VydmljZVwiLCBbXG4gICAgJyRxJyxcbiAgICAnanVub0h0dHAnLFxuICAgIGZ1bmN0aW9uKCRxLCBqdW5vSHR0cClcbiAgICB7XG4gICAgICAgIHZhciBzZXJ2aWNlID0ge307XG5cbiAgICAgICAgc2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzL2RlbW9ncmFwaGljJztcblxuICAgICAgICBzZXJ2aWNlLmdldERlbW9ncmFwaGljID0gZnVuY3Rpb24gZ2V0RGVtb2dyYXBoaWMoZGVtb2dyYXBoaWNObylcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHQgICAgICAgIGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoZGVtb2dyYXBoaWNObyksXG4gICAgICAgICAgICAgICAgSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCkpLnRoZW4oXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0cy5kYXRhLmVmZkRhdGUpIHJlc3VsdHMuZGF0YS5lZmZEYXRlID0gbW9tZW50KHJlc3VsdHMuZGF0YS5lZmZEYXRlKS50b0RhdGUoKTtcblx0ICAgICAgICAgICAgICAgIGlmKHJlc3VsdHMuZGF0YS5oY1JlbmV3RGF0ZSlyZXN1bHRzLmRhdGEuaGNSZW5ld0RhdGUgPSBtb21lbnQocmVzdWx0cy5kYXRhLmhjUmVuZXdEYXRlKS50b0RhdGUoKTtcblx0ICAgICAgICAgICAgICAgIGlmKHJlc3VsdHMuZGF0YS5lbmREYXRlKXJlc3VsdHMuZGF0YS5lbmREYXRlID0gbW9tZW50KHJlc3VsdHMuZGF0YS5lbmREYXRlKS50b0RhdGUoKTtcblx0ICAgICAgICAgICAgICAgIGlmKHJlc3VsdHMuZGF0YS5wYXRpZW50U3RhdHVzRGF0ZSlyZXN1bHRzLmRhdGEucGF0aWVudFN0YXR1c0RhdGUgPSBtb21lbnQocmVzdWx0cy5kYXRhLnBhdGllbnRTdGF0dXNEYXRlKS50b0RhdGUoKTtcblx0ICAgICAgICAgICAgICAgIGlmKHJlc3VsdHMuZGF0YS5vbldhaXRpbmdMaXN0U2luY2VEYXRlKXJlc3VsdHMuZGF0YS5vbldhaXRpbmdMaXN0U2luY2VEYXRlID0gbW9tZW50KHJlc3VsdHMuZGF0YS5vbldhaXRpbmdMaXN0U2luY2VEYXRlKS50b0RhdGUoKTtcblx0ICAgICAgICAgICAgICAgIGlmKHJlc3VsdHMuZGF0YS5zY3JQYXBlckNoYXJ0QXJjaGl2ZWREYXRlKXJlc3VsdHMuZGF0YS5zY3JQYXBlckNoYXJ0QXJjaGl2ZWREYXRlID0gbW9tZW50KHJlc3VsdHMuZGF0YS5zY3JQYXBlckNoYXJ0QXJjaGl2ZWREYXRlKS50b0RhdGUoKTtcblx0ICAgICAgICAgICAgICAgIGlmKHJlc3VsdHMuZGF0YS5kYXRlSm9pbmVkKXJlc3VsdHMuZGF0YS5kYXRlSm9pbmVkID0gbW9tZW50KHJlc3VsdHMuZGF0YS5kYXRlSm9pbmVkKS50b0RhdGUoKTtcblx0ICAgICAgICAgICAgICAgIGlmKHJlc3VsdHMuZGF0YS5yb3N0ZXJUZXJtaW5hdGlvbkRhdGUpcmVzdWx0cy5kYXRhLnJvc3RlclRlcm1pbmF0aW9uRGF0ZSA9IG1vbWVudChyZXN1bHRzLmRhdGEucm9zdGVyVGVybWluYXRpb25EYXRlKS50b0RhdGUoKTtcblx0ICAgICAgICAgICAgICAgIGlmKHJlc3VsdHMuZGF0YS5yb3N0ZXJEYXRlKXJlc3VsdHMuZGF0YS5yb3N0ZXJEYXRlID0gbW9tZW50KHJlc3VsdHMuZGF0YS5yb3N0ZXJEYXRlKS50b0RhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbnZlcnRlZCBSRVNVTFRTOiAnLCByZXN1bHRzLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRlbW9ncmFwaGljU2VydmljZXM6OmdldERlbW9ncmFwaGljIGVycm9yXCIsIGVycm9ycyk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIGRlbW9ncmFwaGljXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfTtcblxuXHQgICAgc2VydmljZS5nZXREZW1vZ3JhcGhpY0NvbnRhY3RzID0gZnVuY3Rpb24gZ2V0RGVtb2dyYXBoaWNDb250YWN0cyhkZW1vZ3JhcGhpY05vLGNvbnRhY3RDYXRlZ29yeSlcblx0ICAgIHtcblx0XHQgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdCAgICB2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cdFx0ICAgIGNvbmZpZy5wYXJhbXMgPSB7XG5cdFx0XHQgICAgY2F0ZWdvcnk6IGNvbnRhY3RDYXRlZ29yeVxuXHRcdCAgICB9O1xuXG5cdFx0ICAgIGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoZGVtb2dyYXBoaWNObykgKyBcIi9jb250YWN0c1wiLCBjb25maWcpLnRoZW4oXG5cdFx0XHQgICAgZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0ICAgIHtcblx0XHRcdFx0ICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdCAgICB9LFxuXHRcdFx0ICAgIGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdCAgICB7XG5cdFx0XHRcdCAgICBjb25zb2xlLmxvZyhcImRlbW9ncmFwaGljU2VydmljZXM6OmdldERlbW9ncmFwaGljQ29udGFjdHMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0ICAgIGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIGRlbW9ncmFwaGljIGNvbnRhY3RzXCIpO1xuXHRcdFx0ICAgIH0pO1xuXG5cdFx0ICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHQgICAgfTtcblxuICAgICAgICBzZXJ2aWNlLnNhdmVEZW1vZ3JhcGhpYyA9IGZ1bmN0aW9uIHNhdmVEZW1vZ3JhcGhpYyhkZW1vZ3JhcGhpYylcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHQgICAgICAgIGp1bm9IdHRwLnBvc3Qoc2VydmljZS5hcGlQYXRoLCBkZW1vZ3JhcGhpYykudGhlbihcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRlbW9ncmFwaGljU2VydmljZXM6OnVwZGF0ZURlbW9ncmFwaGljIGVycm9yXCIsIGVycm9ycyk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHNhdmluZyBkZW1vZ3JhcGhpY1wiKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VydmljZS51cGRhdGVEZW1vZ3JhcGhpYyA9IGZ1bmN0aW9uIHVwZGF0ZURlbW9ncmFwaGljKGRlbW9ncmFwaGljKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdCAgICAgICAganVub0h0dHAucHV0KHNlcnZpY2UuYXBpUGF0aCwgZGVtb2dyYXBoaWMpLnRoZW4oXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJkZW1vZ3JhcGhpY1NlcnZpY2VzOjp1cGRhdGVEZW1vZ3JhcGhpYyBlcnJvclwiLCBlcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB1cGRhdGluZyBkZW1vZ3JhcGhpY1wiKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XG4gICAgfVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwiZGVtb2dyYXBoaWNzU2VydmljZVwiLCBbXG5cdCckcScsXG5cdCdqdW5vSHR0cCcsXG5cdGZ1bmN0aW9uKCRxLCBqdW5vSHR0cClcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvZGVtb2dyYXBoaWNzJztcblxuXHRcdHNlcnZpY2UucXVpY2tTZWFyY2ggPSBmdW5jdGlvbiBxdWlja1NlYXJjaChzZWFyY2gpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpO1xuXHRcdFx0Y29uZmlnLnBhcmFtcyA9IHtcblx0XHRcdFx0cXVlcnk6IHNlYXJjaFxuXHRcdFx0fTtcblxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvcXVpY2tTZWFyY2gnLCBjb25maWcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZGVtb2dyYXBoaWNzU2VydmljZTo6cXVpY2tTZWFyY2ggZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBzZWFyY2hpbmdcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5zZWFyY2ggPSBmdW5jdGlvbiBzZWFyY2goc2VhcmNoLCBzdGFydEluZGV4LCBpdGVtc1RvUmV0dXJuKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdHZhciBjb25maWcgPSBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKTtcblx0XHRcdGNvbmZpZy5wYXJhbXMgPSB7XG5cdFx0XHRcdGpzb25EYXRhOiBzZWFyY2gsXG5cdFx0XHRcdHN0YXJ0SW5kZXg6IHN0YXJ0SW5kZXgsXG5cdFx0XHRcdGl0ZW1zVG9SZXR1cm46IGl0ZW1zVG9SZXR1cm5cblx0XHRcdH07XG5cblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnL3NlYXJjaCcsIGNvbmZpZykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImRlbW9ncmFwaGljc1NlcnZpY2U6OnNlYXJjaCBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHNlYXJjaGluZ1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLnNlYXJjaEludGVncmF0b3IgPSBmdW5jdGlvbiBzZWFyY2hJbnRlZ3JhdG9yKHNlYXJjaCwgaXRlbXNUb1JldHVybilcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHR2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cdFx0XHRjb25maWcucGFyYW1zID0ge1xuXHRcdFx0XHRqc29uRGF0YTogc2VhcmNoLFxuXHRcdFx0XHRpdGVtc1RvUmV0dXJuOiBpdGVtc1RvUmV0dXJuXG5cdFx0XHR9O1xuXG5cdFx0XHRqdW5vSHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy9zZWFyY2hJbnRlZ3JhdG9yJywgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZGVtb2dyYXBoaWNzU2VydmljZTo6c2VhcmNoSW50ZWdyYXRvciBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHNlYXJjaGluZ1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldFN0YXR1c0xpc3QgPSBmdW5jdGlvbiBnZXRTdGF0dXNMaXN0KGxpc3RUeXBlKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdHZhciBjb25maWcgPSBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKTtcblx0XHRcdGNvbmZpZy5wYXJhbXMgPSB7XG5cdFx0XHRcdHR5cGU6IGxpc3RUeXBlXG5cdFx0XHR9O1xuXG5cdFx0XHRqdW5vSHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy9zdGF0dXNMaXN0JywgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZGVtb2dyYXBoaWNzU2VydmljZTo6Z2V0U3RhdHVzTGlzdCBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGdldHRpbmcgc3RhdHVzIGxpc3RcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcImRpc2Vhc2VSZWdpc3RyeVNlcnZpY2VcIiwgW1xuXHQnJGh0dHAnLFxuXHQnJHEnLFxuXHQnanVub0h0dHAnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRodHRwLFxuXHRcdCRxLFxuXHRcdGp1bm9IdHRwXG4gICAgICAgIClcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvZHhSZWdpc3R5Lyc7XG5cblx0XHRzZXJ2aWNlLmdldFF1aWNrTGlzdHMgPSBmdW5jdGlvbiBnZXRRdWlja0xpc3RzKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICdxdWlja0xpc3RzLycsXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVyc1dpdGhDYWNoZSgpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZGlzZWFzZVJlZ2lzdHJ5U2VydmljZTo6Z2V0UXVpY2tMaXN0cyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIHF1aWNrIGxpc3RzXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuICAgICAgICBzZXJ2aWNlLmdldElzc3VlUXVpY2tMaXN0cyA9IGZ1bmN0aW9uIGdldElzc3VlUXVpY2tMaXN0cygpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICBqdW5vSHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJ2lzc3VlUXVpY2tMaXN0cy8nLFxuICAgICAgICAgICAgICAgIEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVyc1dpdGhDYWNoZSgpKS50aGVuKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yKGVycm9ycylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGlzZWFzZVJlZ2lzdHJ5U2VydmljZTo6Z2V0SXNzdWVRdWlja0xpc3RzIGVycm9yXCIsIGVycm9ycyk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIHF1aWNrIGxpc3RzXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfTtcblxuXHRcdHNlcnZpY2UuYWRkVG9EeFJlZ2lzdHJ5ID0gZnVuY3Rpb24gYWRkVG9EeFJlZ2lzdHJ5KGRlbW9ncmFwaGljTm8sIGRpc2Vhc2UpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0dmFyIGlzc3VlVG9TZW5kID0ge307XG5cdFx0XHRpc3N1ZVRvU2VuZC5pZCA9IGRpc2Vhc2UuaWQ7XG5cdFx0XHRpc3N1ZVRvU2VuZC50eXBlID0gZGlzZWFzZS50eXBlO1xuXHRcdFx0aXNzdWVUb1NlbmQuY29kZSA9IGRpc2Vhc2UuY29kZTtcblx0XHRcdGlzc3VlVG9TZW5kLmRlc2NyaXB0aW9uID0gZGlzZWFzZS5kZXNjcmlwdGlvbjtcblxuXHRcdFx0JGh0dHAucG9zdChzZXJ2aWNlLmFwaVBhdGggKyBlbmNvZGVVUklDb21wb25lbnQoZGVtb2dyYXBoaWNObykgKyAnL2FkZCcsIGlzc3VlVG9TZW5kKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZGlzZWFzZVJlZ2lzdHJ5U2VydmljZTo6YWRkVG9EeFJlZ2lzdHJ5IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgYWRkaW5nIHRvIGR4IHJlZ2lzdHJ5XCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZmluZER4SXNzdWUgPSBmdW5jdGlvbiBmaW5kRHhJc3N1ZShjb2RlLCBjb2RpbmdTeXN0ZW0pXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVyc1dpdGhDYWNoZSgpO1xuXHRcdFx0Y29uZmlnLnBhcmFtcyA9IHtcblx0XHRcdFx0Y29kaW5nU3lzdGVtOiBjb2RpbmdTeXN0ZW0sXG5cdFx0XHRcdGNvZGU6IGNvZGVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnZmluZER4SXNzdWUnLCBjb25maWcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJkaXNlYXNlUmVnaXN0cnlTZXJ2aWNlOjpmaW5kRHhJc3N1ZSBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJldHJpZXZpbmcgYSBkeCBpc3N1ZVwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnXG5cblxuYW5ndWxhci5tb2R1bGUoJ0NvbW1vbi5TZXJ2aWNlcycpLmZhY3RvcnkoXG5cdCdlcnJvcnNTZXJ2aWNlJyxcblxuXHRbXG5cblx0XHRmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0dmFyIG1lc3NhZ2VzID0ge307XG5cblx0XHRcdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXHRcdFx0Ly8gRmFjdG9yeVxuXHRcdFx0Ly8gQHBhcmFtIHtlcnJvcnNIYXNofSBFcnJvciBoYXNoIGZyb20gQ2xpbmljYWlkIEFQSVxuXHRcdFx0Ly8gQHBhcmFtIHtvcHRpb25zfSBIYXNoXG5cdFx0XHQvL1x0XHQtIHtkaXNwbGF5RmllbGRFcnJvcnN9IEJvb2xlYW4gOiBTZXRzIGZsYWdcblx0XHRcdC8vXHRcdC0ge2ZpZWxkRXJyb3JzTGFiZWxNYXB9IEhhc2ggOiBDYW4gcGFzcyBhIGhhc2ggaW4gdG8gZ2V0IGZpZWxkXG5cdFx0XHQvLyBcdFx0bGFiZWxzIGZvciBkaXNwbGF5aW5nIGZpZWxkIGVycm9ycy4gQXNzdW1lZCB0byBiZSBmaWVsZCA9PiBsYWJlbFxuXHRcdFx0Ly9cdFx0LSB7ZmllbGRFcnJvcnNMYWJlbE1hcEtleX0gU3RyaW5nIDogQWxsb3dzIGZvclxuXHRcdFx0Ly8gXHRcdGZpZWxkID0+IEhhc2hba2V5XSBsb29rdXAgZm9yIGxhYmVsLlxuXHRcdFx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdFx0XHRtZXNzYWdlcy5mYWN0b3J5ID0gZnVuY3Rpb24gZmFjdG9yeShlcnJvcnNIYXNoLCBvcHRpb25zKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gbmV3IEp1bm8uQ29tbW9uLkRpc3BsYXlNZXNzYWdlcyhlcnJvcnNIYXNoLCBvcHRpb25zKTtcblx0XHRcdH07XG5cblx0XHRcdHJldHVybiBtZXNzYWdlcztcblx0XHR9XVxuKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiAgICBDb3B5cmlnaHQgKGMpIDIwMTItMjAxOC4gQ2xvdWRQcmFjdGljZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gICAgVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiAgICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gICAgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuICAgIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuICAgIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiAgICBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvclxuICAgIENsb3VkUHJhY3RpY2UgSW5jLlxuICAgIFZpY3RvcmlhLCBCcml0aXNoIENvbHVtYmlhXG4gICAgQ2FuYWRhXG5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwiZmF4QWNjb3VudFNlcnZpY2VcIiwgW1xuXHQnJHEnLFxuXHQnanVub0h0dHAnLFxuXHRmdW5jdGlvbigkcSwganVub0h0dHApXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzL2ZheEFjY291bnQnO1xuXG5cdFx0c2VydmljZS5saXN0QWNjb3VudHMgPSBmdW5jdGlvbiBsaXN0QWNjb3VudHMocGFnZSwgcGVyUGFnZSlcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpO1xuXHRcdFx0Y29uZmlnLnBhcmFtcyA9IHtcblx0XHRcdFx0cGFnZTogcGFnZSxcblx0XHRcdFx0cGVyUGFnZTogcGVyUGFnZVxuXHRcdFx0fTtcblxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvc2VhcmNoJywgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImZheFNlcnZpY2U6Omxpc3RBY2NvdW50cyBlcnJvclwiLCBlcnJvcik7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2V0dGluZyBmYXggYWNjb3VudCBkYXRhXCIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmlzRW5hYmxlZCA9IGZ1bmN0aW9uIGlzRW5hYmxlZChpZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpO1xuXG5cdFx0XHRqdW5vSHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy8nICsgaWQgKyAnL2VuYWJsZWQnLCBjb25maWcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZmF4U2VydmljZTo6aXNFbmFibGVkIGVycm9yXCIsIGVycm9yKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIGZheCBhY2NvdW50IGRhdGFcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblx0XHRzZXJ2aWNlLmdldEFjY291bnRTZXR0aW5ncyA9IGZ1bmN0aW9uIGdldEFjY291bnRTZXR0aW5ncyhpZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpO1xuXG5cdFx0XHRqdW5vSHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy8nICsgaWQsIGNvbmZpZykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJmYXhTZXJ2aWNlOjpnZXRBY2NvdW50U2V0dGluZ3MgZXJyb3JcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGdldHRpbmcgZmF4IGFjY291bnQgZGF0YVwiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5hZGRBY2NvdW50U2V0dGluZ3MgPSBmdW5jdGlvbiBhZGRBY2NvdW50U2V0dGluZ3ModHJhbnNmZXIpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0anVub0h0dHAucG9zdChzZXJ2aWNlLmFwaVBhdGgsIHRyYW5zZmVyKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImZheFNlcnZpY2U6OnNldEFjY291bnRTZXR0aW5ncyBlcnJvclwiLCBlcnJvcik7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2V0dGluZyBmYXggYWNjb3VudCBkYXRhXCIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLnVwZGF0ZUFjY291bnRTZXR0aW5ncyA9IGZ1bmN0aW9uIHVwZGF0ZUFjY291bnRTZXR0aW5ncyhpZCwgdHJhbnNmZXIpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0anVub0h0dHAucHV0KHNlcnZpY2UuYXBpUGF0aCArICcvJyArIGlkLCB0cmFuc2ZlcikudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJmYXhTZXJ2aWNlOjpzZXRBY2NvdW50U2V0dGluZ3MgZXJyb3JcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHVwZGF0aW5nIGZheCBhY2NvdW50IGRhdGFcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UudGVzdENvbm5lY3Rpb24gPSBmdW5jdGlvbiB0ZXN0Q29ubmVjdGlvbih0cmFuc2Zlcilcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHRsZXQgaWQgPSB0cmFuc2Zlci5pZDtcblx0XHRcdGxldCB1cmwgPSBzZXJ2aWNlLmFwaVBhdGggKyAnL3Rlc3RDb25uZWN0aW9uJztcblxuXHRcdFx0aWYoaWQgJiYgaWQgIT0gbnVsbCAmJiBpZCAhPT0gJycpXG5cdFx0XHR7XG5cdFx0XHRcdHVybCA9IHNlcnZpY2UuYXBpUGF0aCArICcvJyArIHRyYW5zZmVyLmlkICsgJy90ZXN0Q29ubmVjdGlvbidcblx0XHRcdH1cblxuXHRcdFx0anVub0h0dHAucG9zdCh1cmwsIHRyYW5zZmVyKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImZheFNlcnZpY2U6OnZhbGlkYXRlTG9naW4gZXJyb3JcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRlc3RpbmcgY29ubmVjdGlvblwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldEluYm94ID0gZnVuY3Rpb24gZ2V0SW5ib3goYWNjb3VudElkLCBzZWFyY2hMaXN0SGVscGVyKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHR2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cdFx0XHRjb25maWcucGFyYW1zID0gc2VhcmNoTGlzdEhlbHBlci5nZXRQYXJhbXMoKTtcblxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvJyArIGFjY291bnRJZCArICcvaW5ib3gnLCBjb25maWcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImZheFNlcnZpY2U6OmdldEluYm94IGVycm9yXCIsIGVycm9yKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSByZXRyaWV2aW5nIGluYm94IGRhdGFcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRPdXRib3ggPSBmdW5jdGlvbiBnZXRPdXRib3goYWNjb3VudElkLCBzZWFyY2hMaXN0SGVscGVyKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHR2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cdFx0XHRjb25maWcucGFyYW1zID0gc2VhcmNoTGlzdEhlbHBlci5nZXRQYXJhbXMoKTtcblxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvJyArIGFjY291bnRJZCArICcvb3V0Ym94JywgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJmYXhTZXJ2aWNlOjpnZXRPdXRib3ggZXJyb3JcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJldHJpZXZpbmcgb3V0Ym94IGRhdGFcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuICAgIENvcHlyaWdodCAoYykgMjAxMi0yMDE4LiBDbG91ZFByYWN0aWNlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuICAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiAgICBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gICAgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gICAgRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuICAgIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yXG4gICAgQ2xvdWRQcmFjdGljZSBJbmMuXG4gICAgVmljdG9yaWEsIEJyaXRpc2ggQ29sdW1iaWFcbiAgICBDYW5hZGFcblxuICovXG5cbmFuZ3VsYXIubW9kdWxlKFwiQ29tbW9uLlNlcnZpY2VzXCIpLnNlcnZpY2UoXCJmYXhJbmJvdW5kU2VydmljZVwiLCBbXG5cdCckcScsXG5cdCdqdW5vSHR0cCcsXG5cdGZ1bmN0aW9uKCRxLCBqdW5vSHR0cClcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvZmF4SW5ib3VuZCc7XG5cblx0XHRzZXJ2aWNlLmdldE5leHRQdWxsVGltZSA9IGZ1bmN0aW9uIGdldE5leHRQdWxsVGltZSgpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0XHRcdHZhciBjb25maWcgPSBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKTtcblxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvZ2V0TmV4dFB1bGxUaW1lJywgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImZheFNlcnZpY2U6OmdldE5leHRQdWxsVGltZSBlcnJvclwiLCBlcnJvcik7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2V0dGluZyBzY2hlZHVsZWQgcHVsbCB0aW1lXCIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gICAgQ29weXJpZ2h0IChjKSAyMDEyLTIwMTguIENsb3VkUHJhY3RpY2UgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuICAgIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiAgICBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiAgICBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gICAgVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3JcbiAgICBDbG91ZFByYWN0aWNlIEluYy5cbiAgICBWaWN0b3JpYSwgQnJpdGlzaCBDb2x1bWJpYVxuICAgIENhbmFkYVxuXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcImZheE91dGJvdW5kU2VydmljZVwiLCBbXG5cdCckcScsXG5cdCdqdW5vSHR0cCcsXG5cdGZ1bmN0aW9uKCRxLCBqdW5vSHR0cClcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvZmF4T3V0Ym91bmQnO1xuXG5cdFx0c2VydmljZS5yZXNlbmRPdXRib3VuZEZheCA9IGZ1bmN0aW9uIHJlc2VuZEZheChpZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHRqdW5vSHR0cC5wdXQoc2VydmljZS5hcGlQYXRoICsgJy8nICsgaWQgKyAnL3Jlc2VuZCcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZmF4U2VydmljZTo6cmVzZW5kRmF4IGVycm9yXCIsIGVycm9yKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSByZXNlbmRpbmcgYSBmYXhcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXG5cdFx0c2VydmljZS5nZXROZXh0UHVzaFRpbWUgPSBmdW5jdGlvbiBnZXROZXh0UHVzaFRpbWUoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHR2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnL2dldE5leHRQdXNoVGltZScsIGNvbmZpZykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJmYXhTZXJ2aWNlOjpnZXROZXh0UHVzaFRpbWUgZXJyb3JcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGdldHRpbmcgc2NoZWR1bGVkIHB1c2ggdGltZVwiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0LyogcHJvdmlkZSB0aGUgZW5kcG9pbnQgdXJsIGZvciBkb3dubG9hZGluZyB0aGUgZmF4ZWQgcGRmIGRvY3VtZW50ICovXG5cdFx0c2VydmljZS5nZXREb3dubG9hZFVybCA9IGZ1bmN0aW9uKGlkKVxuXHRcdHtcblx0XHRcdHJldHVybiBzZXJ2aWNlLmFwaVBhdGggKyAnLycgKyBpZCArICcvZG93bmxvYWQnO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQ29tbW9uLlNlcnZpY2VzJykuZmFjdG9yeShcblx0J2ZpZWxkSGVscGVyU2VydmljZScsXG5cdFtcblx0XHQnJHRpbWVvdXQnLFxuXG5cdFx0ZnVuY3Rpb24oXG5cdFx0XHQkdGltZW91dFxuXHRcdClcblx0XHR7XG5cdFx0XHR2YXIgaGVscGVyID0ge307XG5cblx0XHRcdGhlbHBlci5kZWZhdWx0X3Njb3BlID0ge1xuXG5cdFx0XHRcdGZvcm1fZ3JvdXBfY2xhc3M6ICdAY2FGb3JtR3JvdXBDbGFzcycsXG5cdFx0XHRcdGxhYmVsX3NpemU6ICdAY2FMYWJlbFNpemUnLFxuXHRcdFx0XHRpbnB1dF9zaXplOiAnQGNhSW5wdXRTaXplJyxcblx0XHRcdFx0dGV4dF9sZW5ndGg6ICdAY2FUZXh0TGVuZ3RoJyxcblx0XHRcdFx0aGlkZV9sYWJlbF9jb2xvbjogJ0BjYVRpdGxlTm9Db2xvbicsXG5cdFx0XHRcdHRlbXBsYXRlOiAnQGNhVGVtcGxhdGUnLFxuXG5cdFx0XHRcdG5hbWU6ICdAY2FOYW1lJyxcblxuXHRcdFx0XHR0aXRsZTogJ0BjYVRpdGxlJyxcblx0XHRcdFx0aGludDogJ0BjYUhpbnQnLFxuXG5cdFx0XHRcdHRhYl9pbmRleDogJ0BjYVRhYmluZGV4JyxcblxuXHRcdFx0XHRlcnJvcl9tZXNzYWdlOiAnQGNhRXJyb3InLFxuXHRcdFx0XHR3YXJuaW5nX21lc3NhZ2U6ICdAY2FXYXJuaW5nJyxcblxuXHRcdFx0XHRkZXBlbmRzX29uX2ZpZWxkOiAnQGNhRGVwZW5kc09uRmllbGQnLFxuXHRcdFx0XHRkZXBlbmRzX29uX3ZhbHVlOiAnQGNhRGVwZW5kc09uVmFsdWUnLFxuXG5cdFx0XHRcdG1vZGVsOiAnPWNhTW9kZWwnLFxuXHRcdFx0XHRkaXNhYmxlZDogJz1jYURpc2FibGVkJyxcblx0XHRcdFx0aGlkZTogJz1jYUhpZGUnLFxuXHRcdFx0XHRmb2N1c19maWVsZDogJz1jYUZvY3VzRmllbGQnLFxuXG5cdFx0XHRcdG9uX2ZvY3VzX2ZuOiAnJmNhRm9jdXMnLFxuXHRcdFx0XHRjaGFuZ2VfZm46ICcmY2FDaGFuZ2UnLFxuXHRcdFx0XHRibHVyX2ZuOiAnJmNhQmx1cidcblx0XHRcdH07XG5cblx0XHRcdGhlbHBlci5yZXNvbHZlX3RlbXBsYXRlID0gZnVuY3Rpb24oYXR0cmlidXRlcywgYmFzZV9kZWZhdWx0X3RlbXBsYXRlKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBpZiB0YWcgaGFzIGEgY2EtdGVtcGxhdGUgb24gaXQsIGFkZCBpdCB0byB0aGUgdGVtcGxhdGUgcGF0aFxuXHRcdFx0XHRpZihKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhhdHRyaWJ1dGVzWydjYVRlbXBsYXRlJ10pKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIGJhc2VfZGVmYXVsdF90ZW1wbGF0ZSArICdfJyArIGF0dHJpYnV0ZXNbJ2NhVGVtcGxhdGUnXSArICcuanNwJztcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gYmFzZV9kZWZhdWx0X3RlbXBsYXRlICsgJy5qc3AnO1xuXHRcdFx0fTtcblxuXHRcdFx0aGVscGVyLm1lcmdlX3RpdGxlX21lc3NhZ2VzID0gZnVuY3Rpb24gbWVyZ2VfdGl0bGVfbWVzc2FnZXMoJHNjb3BlKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBNZXJnZSBlcnJvciBhbmQgd2FybmluZyByZWNvcmRzIHNvIHRoZXkgYm90aCBjYW4gYmUgZGlzcGxheWVkIGluIHRoZSBob3ZlciBvdmVyXG5cdFx0XHRcdCRzY29wZS50aXRsZV9hcnJheSA9IFtdO1xuXHRcdFx0XHRpZihKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cygkc2NvcGUuZXJyb3JfbWVzc2FnZSkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQkc2NvcGUudGl0bGVfYXJyYXkucHVzaCgkc2NvcGUuZXJyb3JfbWVzc2FnZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoJHNjb3BlLndhcm5pbmdfbWVzc2FnZSkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQkc2NvcGUudGl0bGVfYXJyYXkucHVzaCgkc2NvcGUud2FybmluZ19tZXNzYWdlKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKCRzY29wZS50aXRsZV9hcnJheS5sZW5ndGggPT0gMCAmJiBKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cygkc2NvcGUuaGludCkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQkc2NvcGUudGl0bGVfYXJyYXkucHVzaCgkc2NvcGUuaGludCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLnRpdGxlX3N0cmluZyA9ICRzY29wZS50aXRsZV9hcnJheS5qb2luKCd8Jyk7XG5cdFx0XHR9O1xuXG5cdFx0XHRoZWxwZXIuZGVmYXVsdF9saW5rX2Z1bmN0aW9uID0gZnVuY3Rpb24gZGVmYXVsdF9saW5rX2Z1bmN0aW9uKFxuXHRcdFx0XHQkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZSwgY29udHJvbGxlcilcblx0XHRcdHtcblx0XHRcdFx0aGVscGVyLm1lcmdlX3RpdGxlX21lc3NhZ2VzKCRzY29wZSk7XG5cdFx0XHRcdCRzY29wZS5mb2N1c19mbiA9IGZ1bmN0aW9uIG9uX2ZvY3VzKClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKGFuZ3VsYXIuaXNGdW5jdGlvbigkc2NvcGUub25fZm9jdXNfZm4pKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIG9ubHkgY2FsbCB0aGUgZm9jdXMgZnVuY3Rpb24gaWYgdGhlIGZpZWxkIHN0aWxsIGhhcyBmb2N1cyBhZnRlciBhIHRpbWVvdXRcblx0XHRcdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRpZigoJChlbGVtZW50KS5pcyhcImlucHV0OmVuYWJsZWQsIHNlbGVjdDplbmFibGVkLCB0ZXh0YXJlYTplbmFibGVkXCIpICYmXG5cdFx0XHRcdFx0XHRcdFx0JChlbGVtZW50KS5pcygnOmZvY3VzJykpIHx8XG5cdFx0XHRcdFx0XHRcdFx0JChlbGVtZW50KS5maW5kKFwiIGlucHV0OmVuYWJsZWQsIHNlbGVjdDplbmFibGVkLCB0ZXh0YXJlYTplbmFibGVkIFwiKS5pcygnOmZvY3VzJykpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUub25fZm9jdXNfZm4oKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnaWdub3Jpbmcgb24gZm9jdXMgZnVuY3Rpb24gLSBlbGVtZW50IGlzIG5vIGxvbmdlciBpbiBmb2N1cycsICRzY29wZS5uYW1lKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gd2F0Y2ggdGhlIGZvY3VzIGZpZWxkOiB3aGVuIGl0IG1hdGNoZXMgdGhlIG5hbWUsIGZvY3VzIHRoZSBlbGVtZW50XG5cdFx0XHRcdCRzY29wZS4kd2F0Y2goJ2ZvY3VzX2ZpZWxkJywgZnVuY3Rpb24oKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoJHNjb3BlLm5hbWUpICYmXG5cdFx0XHRcdFx0XHQkc2NvcGUuZm9jdXNfZmllbGQgPT0gJHNjb3BlLm5hbWUpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly8gRm9jdXMgYW5kIHNlbGVjdCB0aGUgaW5wdXQgZWxlbWVudFxuXHRcdFx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRpZigkKGVsZW1lbnQpLmlzKFwiaW5wdXQ6ZW5hYmxlZCwgc2VsZWN0OmVuYWJsZWQsIHRleHRhcmVhOmVuYWJsZWRcIikpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHQkKGVsZW1lbnQpLmZvY3VzKCkuc2VsZWN0KCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0JChlbGVtZW50KS5maW5kKFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJpbnB1dDplbmFibGVkLCBzZWxlY3Q6ZW5hYmxlZCwgdGV4dGFyZWE6ZW5hYmxlZFwiKS5maXJzdCgpLmZvY3VzKCkuc2VsZWN0KCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gbGlzdGVuIGZvciBmb2N1c0NhRm9jdXNGaWVsZCBldmVudDogd2hlbiBpdCBtYXRjaGVzLCBmb2N1cyB0aGUgZWxlbWVudFxuXHRcdFx0XHQkc2NvcGUuJG9uKCdmb2N1c0NhRm9jdXNGaWVsZCcsIGZ1bmN0aW9uKGUsIGZvY3VzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoJHNjb3BlLm5hbWUpICYmICRzY29wZS5uYW1lID09IGZvY3VzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmKCQoZWxlbWVudCkuaXMoXCJpbnB1dDplbmFibGVkLCBzZWxlY3Q6ZW5hYmxlZCwgdGV4dGFyZWE6ZW5hYmxlZFwiKSlcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0JChlbGVtZW50KS5mb2N1cygpLnNlbGVjdCgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHQkKGVsZW1lbnQpLmZpbmQoXG5cdFx0XHRcdFx0XHRcdFx0XCJpbnB1dDplbmFibGVkLCBzZWxlY3Q6ZW5hYmxlZCwgdGV4dGFyZWE6ZW5hYmxlZFwiKS5maXJzdCgpLmZvY3VzKCkuc2VsZWN0KCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cblx0XHRcdGhlbHBlci5kZWZhdWx0X2NvbnRyb2xsZXIgPSBbJyRzY29wZScsICckZWxlbWVudCcsICckYXR0cnMnLCBmdW5jdGlvbiBkZWZhdWx0X2NvbnRyb2xsZXIoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBUaGVzZSBmaWVsZCBkaXJlY3RpdmVzIGhhdmUgYSBidWlsdC1pbiBoYW5kbGluZyBvZiB0aGUgZm9jdXMgZmllbGQsXG5cdFx0XHRcdC8vIHNvIHRoaXMgdGVsbHMgdGhlIGNhRm9jdXNGaWVsZCBkaXJlY3RpdmUgdG8gaWdub3JlIHRoZW0uXG5cdFx0XHRcdHRoaXMuaWdub3JlX2ZvY3VzX2ZpZWxkID0gZnVuY3Rpb24gaWdub3JlX2ZvY3VzX2ZpZWxkKClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XTtcblxuXHRcdFx0cmV0dXJuIGhlbHBlcjtcblx0XHR9XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdDb21tb24uU2VydmljZXMnKS5mYWN0b3J5KFxuXHQnZm9jdXNTZXJ2aWNlJyxcblxuXHRbXG5cdFx0JyR0aW1lb3V0Jyxcblx0XHQnJHdpbmRvdycsXG5cblx0XHRmdW5jdGlvbiAoXG5cdFx0XHQkdGltZW91dCwgJHdpbmRvd1xuXHRcdClcblx0XHR7XG5cdFx0XHR2YXIgZm9jdXMgPSB7fTtcblxuXHRcdFx0Ly8gZm9jdXNlcyBlbGVtZW50XG5cdFx0XHRmb2N1cy5lbGVtZW50ID0gZnVuY3Rpb24gZWxlbWVudChzZWxlY3Rvcilcblx0XHRcdHtcblx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0JChzZWxlY3RvcikuZm9jdXMoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBmb2N1c2VzIGZpcnN0IHZpc2libGUgYW5kIGVuYWJsZWQgZm9ybSBpbnB1dFxuXHRcdFx0Ly8gaWYgc2VsZWN0b3IgaXMgcHJvdmlkZWQsIG9ubHkgbG9va3Mgd2l0aGluIHRoYXQgc2VsZWN0b3Jcblx0XHRcdGZvY3VzLmZpcnN0X2Zvcm1faW5wdXQgPSBmdW5jdGlvbiBmaXJzdF9mb3JtX2VsZW1lbnQoc2VsZWN0b3IpXG5cdFx0XHR7XG5cdFx0XHRcdGlmKCFzZWxlY3Rvcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNlbGVjdG9yID0gXCJmb3JtOnZpc2libGU6Zmlyc3RcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCQoc2VsZWN0b3IgKyBcIiBpbnB1dDplbmFibGVkLCBcIiArXG5cdFx0XHRcdFx0XHRzZWxlY3RvciArIFwiIHNlbGVjdDplbmFibGVkLCBcIiArXG5cdFx0XHRcdFx0XHRzZWxlY3RvciArIFwiIHRleHRhcmVhOmVuYWJsZWQgXCIpLmZpcnN0KCkuZm9jdXMoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBmb2N1c2VzIGZpcnN0ICdoYXMtZXJyb3InIGZvcm0gaW5wdXQgYW5kIHNjcm9sbHMgdG8gYWxlcnRcblx0XHRcdC8vIGlmIG9wdHNbJ3NlbGVjdG9yJ10gaXMgcHJvdmlkZWQsIG9ubHkgbG9va3Mgd2l0aGluIHRoYXQgc2VsZWN0b3Jcblx0XHRcdC8vIGlmIG9wdHNbJ3Njcm9sbF9vZmZzZXQnXSBpcyBwcm92aWRlZCwgdXNlZCBpbiBmaXJzdF9hbGVydFxuXHRcdFx0Zm9jdXMuZmlyc3RfZXJyb3JfaW5wdXQgPSBmdW5jdGlvbiBmaXJzdF9lcnJvcl9pbnB1dChvcHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRpZighYW5ndWxhci5pc09iamVjdChvcHRzKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG9wdHMgPSB7fTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgc2VsZWN0b3IgPSBvcHRzWydzZWxlY3RvciddIHx8ICcnO1xuXHRcdFx0XHQkdGltZW91dChmdW5jdGlvbigpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQkKHNlbGVjdG9yICsgXCIgLmhhcy1lcnJvcjpmaXJzdCBpbnB1dDplbmFibGVkLCBcIiArXG5cdFx0XHRcdFx0XHRzZWxlY3RvciArIFwiIC5oYXMtZXJyb3I6Zmlyc3Qgc2VsZWN0OmVuYWJsZWQsIFwiICtcblx0XHRcdFx0XHRcdHNlbGVjdG9yICsgXCIgLmhhcy1lcnJvcjpmaXJzdCB0ZXh0YXJlYTplbmFibGVkIFwiKS5maXJzdCgpLmZvY3VzKCk7XG5cdFx0XHRcdFx0Zm9jdXMuZmlyc3RfYWxlcnQob3B0cyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gc2Nyb2xscyB0byB0aGUgZmlyc3QgdmlzaWJsZSBhbGVydCAobm90IGFjdHVhbGx5IGEgZm9jdXMpXG5cdFx0XHQvLyBpZiBtb2RhbCBpcyBvcGVuLCB3aWxsIGp1c3Qgc2Nyb2xsIHRvIHRvcCBvZiBtb2RhbFxuXHRcdFx0Ly8gaWYgb3B0c1snc2VsZWN0b3InXSBpcyBwcm92aWRlZCwgb25seSBsb29rcyB3aXRoaW4gdGhhdCBzZWxlY3RvclxuXHRcdFx0Ly8gaWYgb3B0c1snc2Nyb2xsX29mZnNldCddIGlzIHByb3ZpZGVkLCBzY3JvbGxzIHRvIHRoYXQgb2Zmc2V0IGFib3ZlIGFsZXJ0XG5cdFx0XHRmb2N1cy5maXJzdF9hbGVydCA9IGZ1bmN0aW9uIGZpcnN0X2FsZXJ0KG9wdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KG9wdHMpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0b3B0cyA9IHt9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBzZWxlY3RvciA9IG9wdHNbJ3NlbGVjdG9yJ10gfHwgJyc7XG5cdFx0XHRcdHZhciBzY3JvbGxfb2Zmc2V0ID0gb3B0c1snc2Nyb2xsX29mZnNldCddO1xuXG5cdFx0XHRcdGlmKCFzY3JvbGxfb2Zmc2V0IHx8IHNjcm9sbF9vZmZzZXQgPCAwKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c2Nyb2xsX29mZnNldCA9IDEwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYoJCgnYm9keScpLmhhc0NsYXNzKCdtb2RhbC1vcGVuJykpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly8gdGhlcmUncyBhIG1vZGFsIG9wZW4gLSBzY3JvbGwgdG8gdGhlIHRvcFxuXHRcdFx0XHRcdFx0JCgnLm1vZGFsJykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogMCB9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIG5vIG1vZGFsIG9wZW4gLSBzY3JvbGwgdG8ganVzdCBhYm92ZSB0aGUgZmlyc3QgYWxlcnRcblx0XHRcdFx0XHRcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcblx0XHRcdFx0XHRcdFx0c2Nyb2xsVG9wOiAkKHNlbGVjdG9yICsgXCIgLmFsZXJ0OnZpc2libGU6Zmlyc3RcIikub2Zmc2V0KCkudG9wIC0gc2Nyb2xsX29mZnNldFxuXHRcdFx0XHRcdFx0fSwgNTAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblxuXHRcdFx0cmV0dXJuIGZvY3VzO1xuXG5cdFx0fV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwiZm9ybVNlcnZpY2VcIiwgW1xuXHQnJGh0dHAnLCAnJHEnLCAnanVub0h0dHAnLFxuXHRmdW5jdGlvbigkaHR0cCwgJHEsIGp1bm9IdHRwKVxuXHR7XG5cdFx0dmFyIHNlcnZpY2UgPSB7fTtcblxuXHRcdHNlcnZpY2UuYXBpUGF0aCA9ICcuLi93cy9ycy9mb3Jtcyc7XG5cblx0XHRzZXJ2aWNlLmdldEFsbEZvcm1zQnlIZWFkaW5nID0gZnVuY3Rpb24gZ2V0QWxsRm9ybXNCeUhlYWRpbmcoZGVtb2dyYXBoaWNObywgaGVhZGluZylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0JGh0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvJyArIGVuY29kZVVSSUNvbXBvbmVudChkZW1vZ3JhcGhpY05vKSArXG5cdFx0XHRcdCcvYWxsP2hlYWRpbmc9JyArIGVuY29kZVVSSUNvbXBvbmVudChoZWFkaW5nKSxcblx0XHRcdFx0SnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJmb3JtU2VydmljZTo6Z2V0QWxsRm9ybXNCeUhlYWRpbmcgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBmb3Jtc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldEFsbEVuY291bnRlckZvcm1zID0gZnVuY3Rpb24gZ2V0QWxsRW5jb3VudGVyRm9ybXMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHQkaHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy9hbGxFbmNvdW50ZXJGb3JtcycsXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZm9ybVNlcnZpY2U6OmdldEFsbEVuY291bnRlckZvcm1zIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgZW5jb3VudGVyIGZvcm1zXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0U2VsZWN0ZWRFbmNvdW50ZXJGb3JtcyA9IGZ1bmN0aW9uIGdldFNlbGVjdGVkRW5jb3VudGVyRm9ybXMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHQkaHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy9zZWxlY3RlZEVuY291bnRlckZvcm1zJyxcblx0XHRcdFx0SnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJmb3JtU2VydmljZTo6Z2V0U2VsZWN0ZWRFbmNvdW50ZXJGb3JtcyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIHNlbGVjdGVkIGVuY291bnRlciBmb3Jtc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldENvbXBsZXRlZEVuY291bnRlckZvcm1zID0gZnVuY3Rpb24gZ2V0Q29tcGxldGVkRW5jb3VudGVyRm9ybXMoZGVtb2dyYXBoaWNObylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvJyArIGRlbW9ncmFwaGljTm8gKyAnL2NvbXBsZXRlZEVuY291bnRlckZvcm1zJyxcblx0XHRcdFx0SnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJmb3JtU2VydmljZTo6Z2V0Q29tcGxldGVkRW5jb3VudGVyRm9ybXMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBjb21wbGV0ZWQgZW5jb3VudGVyIGZvcm1zXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0QWxsRUZvcm1zID0gZnVuY3Rpb24gZ2V0QWxsRUZvcm1zKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0JGh0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvYWxsRUZvcm1zJyxcblx0XHRcdFx0SnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhLmNvbnRlbnQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImZvcm1TZXJ2aWNlOjpnZXRBbGxFRm9ybXMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBlZm9ybXNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRHcm91cE5hbWVzID0gZnVuY3Rpb24gZ2V0R3JvdXBOYW1lcygpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnL2dyb3VwTmFtZXMnLFxuXHRcdFx0XHRKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEuY29udGVudCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZm9ybVNlcnZpY2U6OmdldEdyb3VwTmFtZXMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBncm91cCBuYW1lc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldEZvcm1Hcm91cHMgPSBmdW5jdGlvbiBnZXRGb3JtR3JvdXBzKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0JGh0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvZ2V0Rm9ybUdyb3VwcycsXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZm9ybVNlcnZpY2U6OmdldEZvcm1Hcm91cHMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBmb3JtIGdyb3Vwc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldEZhdm91cml0ZUZvcm1Hcm91cCA9IGZ1bmN0aW9uIGdldEZhdm91cml0ZUZvcm1Hcm91cCgpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnL2dldEZhdm91cml0ZUZvcm1Hcm91cCcsXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZm9ybVNlcnZpY2U6OmdldEZhdm91cml0ZUZvcm1Hcm91cCBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIGZhdm91cml0ZSBmb3JtIGdyb3Vwc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldEZvcm1PcHRpb25zID0gZnVuY3Rpb24gZ2V0Rm9ybU9wdGlvbnMoZGVtb2dyYXBoaWNObylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0JGh0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvJyArIGVuY29kZVVSSUNvbXBvbmVudChkZW1vZ3JhcGhpY05vKSArICcvZm9ybU9wdGlvbnMnLFxuXHRcdFx0XHRKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImZvcm1TZXJ2aWNlOjpnZXRGb3JtT3B0aW9ucyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIGZvcm0gb3B0aW9uc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG5cdENvcHlyaWdodCAoYykgMjAxMi0yMDE4LiBDbG91ZFByYWN0aWNlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuICAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiAgICBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gICAgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gICAgRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuXHRUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvclxuXHRDbG91ZFByYWN0aWNlIEluYy5cblx0VmljdG9yaWEsIEJyaXRpc2ggQ29sdW1iaWFcblx0Q2FuYWRhXG5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcImdsb2JhbFN0YXRlU2VydmljZVwiLCBbXG5cdGZ1bmN0aW9uKClcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge1xuXHRcdFx0XHRnbG9iYWxfc2V0dGluZ3M6IHtcblx0XHRcdFx0XHRpbnRlcmZhY2VfcHJlZmVyZW5jZXM6IHtcblx0XHRcdFx0XHRcdHNjaGVkdWxlcl9saWNlbnNlX2tleTogXCJcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiBIYW1pbHRvblxuIE9udGFyaW8sIENhbmFkYVxuXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcImluYm94U2VydmljZVwiLCBbXG5cdCckaHR0cCcsICckcScsXG5cdGZ1bmN0aW9uKCRodHRwLCAkcSlcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvaW5ib3gnO1xuXG5cdFx0c2VydmljZS5nZXREYXNoYm9hcmRJdGVtcyA9IGZ1bmN0aW9uIGdldERhc2hib2FyZEl0ZW1zKGxpbWl0KVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICcvbWluZT9saW1pdD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGxpbWl0KSxcblx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRoZWFkZXJzOiBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKVxuXHRcdFx0fSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImluYm94U2VydmljZTo6Z2V0RGFzaGJvYXJkSXRlbXMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGdldHRpbmcgaW5ib3ggY29udGVudFwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldFVuQWNrTGFiRG9jQ291bnQgPSBmdW5jdGlvbiBnZXRVbkFja0xhYkRvY0NvdW50KClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cChcblx0XHRcdHtcblx0XHRcdFx0dXJsOiBzZXJ2aWNlLmFwaVBhdGggKyAnL21pbmUvY291bnQnLFxuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiaW5ib3hTZXJ2aWNlOjpnZXRVbkFja0xhYkRvY0NvdW50IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBnZXR0aW5nIGluYm94IGNvbnRlbnRcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiBIYW1pbHRvblxuIE9udGFyaW8sIENhbmFkYVxuXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcImsyYVNlcnZpY2VcIiwgW1xuXHQnJHEnLFxuXHQnanVub0h0dHAnLFxuXHRmdW5jdGlvbigkcSwganVub0h0dHApXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzJztcblxuXHRcdHNlcnZpY2UuZ2V0SzJhRmVlZCA9IGZ1bmN0aW9uIGdldEsyYUZlZWQoc3RhcnRQb2ludCwgbnVtYmVyT2ZSb3dzKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHR2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cdFx0XHRjb25maWcucGFyYW1zID0ge1xuXHRcdFx0XHRrZXk6J2syYScsXG5cdFx0XHRcdHN0YXJ0UG9pbnQ6ZW5jb2RlVVJJQ29tcG9uZW50KHN0YXJ0UG9pbnQpLFxuXHRcdFx0XHRudW1iZXJPZlJvd3M6ZW5jb2RlVVJJQ29tcG9uZW50KG51bWJlck9mUm93cylcblx0XHRcdH07XG5cblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnL3Jzc3Byb3h5L3JzcycsIGNvbmZpZykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJrMmFTZXJ2aWNlOjpnZXRLMmFGZWVkIGVycm9yXCIsIGVycm9yKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGdldHRpbmcgazJhIGNvbnRlbnRcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuaXNLMkFJbml0ID0gZnVuY3Rpb24gaXNLMkFJbml0KClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpO1xuXG5cdFx0XHRqdW5vSHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy9hcHAvSzJBQWN0aXZlJywgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImsyYVNlcnZpY2U6OmlzSzJBSW5pdCBlcnJvclwiLCBlcnJvcik7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBnZXR0aW5nIGsyYSBjb250ZW50XCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuaW5pdEsyQSA9IGZ1bmN0aW9uIGluaXRLMkEoY2xpbmljTmFtZSlcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0dmFyIHRyYW5zZmVyT2JqID0ge1xuXHRcdFx0XHRuYW1lOiBjbGluaWNOYW1lXG5cdFx0XHR9O1xuXG5cdFx0XHRqdW5vSHR0cC5wb3N0KHNlcnZpY2UuYXBpUGF0aCArICcvYXBwL0syQUluaXQnLCB0cmFuc2Zlck9iaikudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJrMmFTZXJ2aWNlOjppbml0SzJBIGVycm9yXCIsIGVycm9yKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIHRyeWluZyB0byBpbml0aWFsaXplIGsyYVwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLnBvc3RLMkFDb21tZW50ID0gZnVuY3Rpb24gcG9zdEsyQUNvbW1lbnQocG9zdClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHR2YXIgY29tbWVudEl0ZW0gPSB7XG5cdFx0XHRcdHBvc3Q6cG9zdFxuXHRcdFx0fTtcblx0XHRcdGp1bm9IdHRwLnBvc3Qoc2VydmljZS5hcGlQYXRoICsgJy9hcHAvY29tbWVudCcsIGNvbW1lbnRJdGVtKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImsyYVNlcnZpY2U6OnBvc3RLMkFDb21tZW50IGVycm9yXCIsIGVycm9yKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIHRyeWluZyB0byBwb3N0IGEgY29tbWVudCB0byBrMmFcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5yZW1vdmVLMkFDb21tZW50ID0gZnVuY3Rpb24gcmVtb3ZlSzJBQ29tbWVudChjb21tZW50SWQpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0anVub0h0dHAuZGVsKHNlcnZpY2UuYXBpUGF0aCArICcvYXBwL2NvbW1lbnQvJyArIGVuY29kZVVSSUNvbXBvbmVudChjb21tZW50SWQpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImsyYVNlcnZpY2U6OnJlbW92ZUsyQUNvbW1lbnQgZXJyb3JcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgdHJ5aW5nIHRvIHJlbW92ZSBhIGNvbW1lbnQgZnJvbSBrMmFcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5wcmV2ZW50aW9uUnVsZXNMaXN0ID0gZnVuY3Rpb24gcHJldmVudGlvblJ1bGVzTGlzdCgpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvcmVzb3VyY2VzL3ByZXZlbnRpb25SdWxlc0xpc3QnLFxuXHRcdFx0XHRKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJrMmFTZXJ2aWNlOjpwcmV2ZW50aW9uUnVsZXNMaXN0IGVycm9yXCIsIGVycm9yKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIHRyeWluZyB0byByZW1vdmUgYSBjb21tZW50IGZyb20gazJhXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UubG9hZFByZXZlbnRpb25SdWxlQnlJZCA9IGZ1bmN0aW9uIGxvYWRQcmV2ZW50aW9uUnVsZUJ5SWQoaWQpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0anVub0h0dHAucG9zdChzZXJ2aWNlLmFwaVBhdGggKyAnL3Jlc291cmNlcy9sb2FkUHJldmVudGlvblJ1bGVzQnlJZC8nICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KGlkLmlkKSwgaWQpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiazJhU2VydmljZTo6bG9hZFByZXZlbnRpb25SdWxlQnlJZCBlcnJvclwiLCBlcnJvcik7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSB0cnlpbmcgdG8gbG9hZFByZXZlbnRpb25SdWxlc0J5SWRcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRDdXJyZW50UHJldmVudGlvblJ1bGVzVmVyc2lvbiA9IGZ1bmN0aW9uIGdldEN1cnJlbnRQcmV2ZW50aW9uUnVsZXNWZXJzaW9uKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvcmVzb3VyY2VzL2N1cnJlbnRQcmV2ZW50aW9uUnVsZXNWZXJzaW9uJyxcblx0XHRcdFx0SnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiazJhU2VydmljZTo6Z2V0Q3VycmVudFByZXZlbnRpb25SdWxlc1ZlcnNpb24gZXJyb3JcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgdHJ5aW5nIHRvIGdldEN1cnJlbnRQcmV2ZW50aW9uUnVsZXNWZXJzaW9uXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0Tm90aWZpY2F0aW9ucyA9IGZ1bmN0aW9uIGdldE5vdGlmaWNhdGlvbnMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHRqdW5vSHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy9yZXNvdXJjZXMvbm90aWZpY2F0aW9ucycsXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImsyYVNlcnZpY2U6OmdldE5vdGlmaWNhdGlvbnMgZXJyb3JcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgdHJ5aW5nIHRvIGdldE5vdGlmaWNhdGlvbnNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRNb3JlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gZ2V0TW9yZU5vdGlmaWNhdGlvbihpZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHRqdW5vSHR0cC5wb3N0KHNlcnZpY2UuYXBpUGF0aCArICcvcmVzb3VyY2VzL25vdGlmaWNhdGlvbnMvcmVhZG1vcmUnLFxuXHRcdFx0XHRpZCwgSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiazJhU2VydmljZTo6Z2V0TW9yZU5vdGlmaWNhdGlvbiBlcnJvclwiLCBlcnJvcik7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSB0cnlpbmcgdG8gL3Jlc291cmNlcy9ub3RpZmljYXRpb25zL3JlYWRtb3JlXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuYWNrTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gYWNrTm90aWZpY2F0aW9uKGlkKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHRqdW5vSHR0cC5wb3N0KHNlcnZpY2UuYXBpUGF0aCArICcvcmVzb3VyY2VzL25vdGlmaWNhdGlvbnMvJyArIGlkICsgJy9hY2snLFxuXHRcdFx0XHRKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJrMmFTZXJ2aWNlOjphY2tOb3RpZmljYXRpb24gZXJyb3JcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgdHJ5aW5nIHRvIC9yZXNvdXJjZXMvbm90aWZpY2F0aW9ucy9hY2tcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwibWVzc2FnZVNlcnZpY2VcIiwgW1xuXHQnJGh0dHAnLCAnJHEnLFxuXHRmdW5jdGlvbigkaHR0cCwgJHEpXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzL21lc3NhZ2luZyc7XG5cblx0XHRzZXJ2aWNlLmdldFVucmVhZCA9IGZ1bmN0aW9uIGdldFVucmVhZChsaW1pdClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cChcblx0XHRcdHtcblx0XHRcdFx0dXJsOiBzZXJ2aWNlLmFwaVBhdGggKyAnL3VucmVhZD9zdGFydEluZGV4PTAmbGltaXQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChsaW1pdCksXG5cdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKClcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJtZXNzYWdlU2VydmljZTo6Z2V0VW5yZWFkIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2V0dGluZyBtZXNzYWdlc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldFVucmVhZENvdW50ID0gZnVuY3Rpb24gZ2V0VW5yZWFkQ291bnQoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICcvY291bnQnLFxuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwibWVzc2FnZVNlcnZpY2U6OmdldFVucmVhZENvdW50IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2V0dGluZyBtZXNzYWdlc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdDb21tb24uU2VydmljZXMnLCBbJ0NvbW1vbi5VdGlsJ10pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcIm5vdGVTZXJ2aWNlXCIsIFtcblx0JyRodHRwJyxcblx0JyRxJyxcblx0J2p1bm9IdHRwJyxcblx0ZnVuY3Rpb24oXG5cdFx0JGh0dHAsXG5cdFx0JHEsXG5cdFx0anVub0h0dHApXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzL25vdGVzJztcblxuXHRcdHNlcnZpY2UuZ2V0Tm90ZXNGcm9tID0gZnVuY3Rpb24gZ2V0Tm90ZXNGcm9tKGRlbW9ncmFwaGljTm8sIG9mZnNldCwgbnVtYmVyVG9SZXR1cm4sIG5vdGVDb25maWcpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpO1xuXHRcdFx0Y29uZmlnLnBhcmFtcyA9IHtcblx0XHRcdFx0b2Zmc2V0OiBlbmNvZGVVUklDb21wb25lbnQob2Zmc2V0KSxcblx0XHRcdFx0bnVtVG9SZXR1cm46IGVuY29kZVVSSUNvbXBvbmVudChudW1iZXJUb1JldHVybiksXG5cdFx0XHRcdG5vdGVDb25maWc6IG5vdGVDb25maWdcblx0XHRcdH07XG5cblx0XHRcdGp1bm9IdHRwLnBvc3Qoc2VydmljZS5hcGlQYXRoICsgJy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRlbW9ncmFwaGljTm8pICsgJy9hbGwnLCBjb25maWcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJub3RlU2VydmljZTo6Z2V0Tm90ZXNGcm9tIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgbm90ZXNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5zYXZlTm90ZSA9IGZ1bmN0aW9uIHNhdmVOb3RlKGRlbW9ncmFwaGljTm8sIG5vdGUpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0anVub0h0dHAucG9zdChzZXJ2aWNlLmFwaVBhdGggKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoZGVtb2dyYXBoaWNObykgK1xuXHRcdFx0XHQnL3NhdmUnLCBub3RlKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwibm90ZVNlcnZpY2U6OnNhdmVOb3RlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2F2aW5nIG5vdGVcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5zYXZlSXNzdWVOb3RlID0gZnVuY3Rpb24gc2F2ZUlzc3VlTm90ZShkZW1vZ3JhcGhpY05vLCBub3RlKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLnBvc3Qoc2VydmljZS5hcGlQYXRoICsgJy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRlbW9ncmFwaGljTm8pICtcblx0XHRcdFx0Jy9zYXZlSXNzdWVOb3RlJywgbm90ZSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIm5vdGVTZXJ2aWNlOjpzYXZlSXNzdWVOb3RlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2F2aW5nIGlzc3VlIG5vdGVcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRDdXJyZW50Tm90ZSA9IGZ1bmN0aW9uIGdldEN1cnJlbnROb3RlKGRlbW9ncmFwaGljTm8sIGNvbmZpZylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cC5wb3N0KHNlcnZpY2UuYXBpUGF0aCArICcvJyArIGVuY29kZVVSSUNvbXBvbmVudChkZW1vZ3JhcGhpY05vKSArXG5cdFx0XHRcdCcvZ2V0Q3VycmVudE5vdGUnLCBjb25maWcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJub3RlU2VydmljZTo6Z2V0Q3VycmVudE5vdGUgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBjdXJyZW50IG5vdGVcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS50bXBTYXZlID0gZnVuY3Rpb24gdG1wU2F2ZShkZW1vZ3JhcGhpY05vLCBub3RlKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLnBvc3Qoc2VydmljZS5hcGlQYXRoICsgJy8nICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KGRlbW9ncmFwaGljTm8pICsgJy90bXBTYXZlJywgbm90ZSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIm5vdGVTZXJ2aWNlOjp0bXBTYXZlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcG9zdGluZyB0bXAgc2F2ZVwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldE5vdGVFeHQgPSBmdW5jdGlvbiBnZXROb3RlRXh0KG5vdGVJZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy9nZXRHcm91cE5vdGVFeHQvJyArIGVuY29kZVVSSUNvbXBvbmVudChub3RlSWQpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwibm90ZVNlcnZpY2U6OmdldE5vdGVFeHQgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBub3RlIGV4dFwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldElzc3VlTm90ZSA9IGZ1bmN0aW9uIGdldElzc3VlTm90ZShub3RlSWQpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvZ2V0SXNzdWVOb3RlLycgKyBlbmNvZGVVUklDb21wb25lbnQobm90ZUlkKSxcblx0XHRcdFx0SnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJub3RlU2VydmljZTo6Z2V0SXNzdWVOb3RlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgaXNzdWUgbm90ZVwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldElzc3VlSWQgPSBmdW5jdGlvbiBnZXRJc3N1ZUlkKGlzc3VlQ29kZSlcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy9nZXRJc3N1ZUlkLycgKyBlbmNvZGVVUklDb21wb25lbnQoaXNzdWVDb2RlKSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIm5vdGVTZXJ2aWNlOjpnZXRJc3N1ZUlkIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgaXNzdWUgaWRcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRUaWNrbGVyTm90ZSA9IGZ1bmN0aW9uIGdldFRpY2tsZXJOb3RlKHRpY2tsZXJJZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy90aWNrbGVyR2V0Tm90ZS8nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRpY2tsZXJJZCksXG5cdFx0XHR7XG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwibm90ZVNlcnZpY2U6OmdldFRpY2tsZXJOb3RlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgdGlja2xlciBub3RlXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2Uuc2F2ZVRpY2tsZXJOb3RlID0gZnVuY3Rpb24gc2F2ZVRpY2tsZXJOb3RlKHRpY2tsZXJOb3RlKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHQkaHR0cChcblx0XHRcdHtcblx0XHRcdFx0dXJsOiBzZXJ2aWNlLmFwaVBhdGggKyAnL3RpY2tsZXJTYXZlTm90ZScsXG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGRhdGE6IEpTT04uc3RyaW5naWZ5KHRpY2tsZXJOb3RlKSxcblx0XHRcdFx0aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKClcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJub3RlU2VydmljZTo6c2F2ZVRpY2tsZXJOb3RlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2F2aW5nIHRpY2tsZXIgbm90ZVwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLnNlYXJjaElzc3VlcyA9IGZ1bmN0aW9uIHNlYXJjaElzc3VlcyhzZWFyY2gsIHN0YXJ0SW5kZXgsIGl0ZW1zVG9SZXR1cm4pXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAucG9zdChzZXJ2aWNlLmFwaVBhdGggKyAnL3NlYXJjaElzc3Vlcz9zdGFydEluZGV4PScgK1xuXHRcdFx0XHRlbmNvZGVVUklDb21wb25lbnQoc3RhcnRJbmRleCkgKyBcIiZpdGVtc1RvUmV0dXJuPVwiICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KGl0ZW1zVG9SZXR1cm4pLCBzZWFyY2gpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJub3RlU2VydmljZTo6c2VhcmNoSXNzdWVzIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2VhcmNoaW5nIGlzc3Vlc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldElzc3VlID0gZnVuY3Rpb24gZ2V0SXNzdWUoaXNzdWVJZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cC5wb3N0KHNlcnZpY2UuYXBpUGF0aCArICcvZ2V0SXNzdWVCeUlkLycgKyBlbmNvZGVVUklDb21wb25lbnQoaXNzdWVJZCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJub3RlU2VydmljZTo6Z2V0SXNzdWUgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBpc3N1ZVwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLnNldEVkaXRpbmdOb3RlRmxhZyA9IGZ1bmN0aW9uIHNldEVkaXRpbmdOb3RlRmxhZyhub3RlVVVJRCwgdXNlcklkKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLnBvc3Qoc2VydmljZS5hcGlQYXRoICsgJy9zZXRFZGl0aW5nTm90ZUZsYWc/bm90ZVVVSUQ9JyArXG5cdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChub3RlVVVJRCkgKyBcIiZ1c2VySWQ9XCIgK1xuXHRcdFx0XHRlbmNvZGVVUklDb21wb25lbnQodXNlcklkKSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIm5vdGVTZXJ2aWNlOjpzZXRFZGl0aW5nTm90ZUZsYWcgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBzZXR0aW5nIGVkaXRpbmcgbm90ZSBmbGFnXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuY2hlY2tFZGl0Tm90ZU5ldyA9IGZ1bmN0aW9uIGNoZWNrRWRpdE5vdGVOZXcobm90ZVVVSUQsIHVzZXJJZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cC5wb3N0KHNlcnZpY2UuYXBpUGF0aCArICcvY2hlY2tFZGl0Tm90ZU5ldz9ub3RlVVVJRD0nICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KG5vdGVVVUlEKSArIFwiJnVzZXJJZD1cIiArXG5cdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudCh1c2VySWQpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwibm90ZVNlcnZpY2U6OmNoZWNrRWRpdE5vdGVOZXcgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBjaGVja2luZyBlZGl0IG5vdGUgbmV3XCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UucmVtb3ZlRWRpdGluZ05vdGVGbGFnID0gZnVuY3Rpb24gcmVtb3ZlRWRpdGluZ05vdGVGbGFnKG5vdGVVVUlELCB1c2VySWQpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAucG9zdChzZXJ2aWNlLmFwaVBhdGggKyAnL3JlbW92ZUVkaXRpbmdOb3RlRmxhZz9ub3RlVVVJRD0nICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KG5vdGVVVUlEKSArIFwiJnVzZXJJZD1cIiArXG5cdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudCh1c2VySWQpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwibm90ZVNlcnZpY2U6OnJlbW92ZUVkaXRpbmdOb3RlRmxhZyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJlbW92aW5nIGVkaXRpbmcgbm90ZSBmbGFnXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiBIYW1pbHRvblxuIE9udGFyaW8sIENhbmFkYVxuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKFwiQ29tbW9uLlNlcnZpY2VzXCIpLnNlcnZpY2UoXCJwYXRpZW50RGV0YWlsU3RhdHVzU2VydmljZVwiLCBbXG5cdCckaHR0cCcsICckcScsXG5cdGZ1bmN0aW9uKCRodHRwLCAkcSlcblx0e1xuXG5cdFx0dmFyIHNlcnZpY2UgPSB7fTtcblxuXHRcdHNlcnZpY2UuYXBpUGF0aCA9ICcuLi93cy9ycy9wYXRpZW50RGV0YWlsU3RhdHVzU2VydmljZSc7XG5cblx0XHRzZXJ2aWNlLmdldFN0YXR1cyA9IGZ1bmN0aW9uIGdldFN0YXR1cyhkZW1vZ3JhcGhpY05vKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHQkaHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgXCIvZ2V0U3RhdHVzP2RlbW9ncmFwaGljTm89XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZGVtb2dyYXBoaWNObyksXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicGF0aWVudERldGFpbFN0YXR1c1NlcnZpY2U6OmdldFN0YXR1cyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIHN0YXR1c1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLnZhbGlkYXRlSEMgPSBmdW5jdGlvbiB2YWxpZGF0ZUhDKGhlYWx0aENhcmRObywgdmVyc2lvbkNvZGUpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyBcIi92YWxpZGF0ZUhDP2hpbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChoZWFsdGhDYXJkTm8pICtcblx0XHRcdFx0XCImdmVyPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZlcnNpb25Db2RlKSxcblx0XHRcdFx0SnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJwYXRpZW50RGV0YWlsU3RhdHVzU2VydmljZTo6dmFsaWRhdGVIQyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIGhlYWx0aCBjYXJkIHZhbGlkYXRpb24gaW5mb1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmlzVW5pcXVlSEMgPSBmdW5jdGlvbiBpc1VuaXF1ZUhDKGhlYWx0aENhcmRObywgZGVtb2dyYXBoaWNObylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0JGh0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArIFwiL2lzVW5pcXVlSEM/aGluPVwiICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KGhlYWx0aENhcmRObykgKyBcIiZkZW1vZ3JhcGhpY05vPVwiICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KGRlbW9ncmFwaGljTm8pLFxuXHRcdFx0XHRKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInBhdGllbnREZXRhaWxTdGF0dXNTZXJ2aWNlOjppc1VuaXF1ZUhDIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY2hlY2tpbmcgaGVhbHRoIGNhcmQgdW5pcXVlbmVzc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwicGVyc29uYVNlcnZpY2VcIiwgW1xuXHQnJGh0dHAnLCAnJHEnLFxuXHRmdW5jdGlvbigkaHR0cCwgJHEpXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzL3BlcnNvbmEnO1xuXG5cdFx0c2VydmljZS5nZXREYXNoYm9hcmRNZW51ID0gZnVuY3Rpb24gZ2V0RGFzaGJvYXJkTWVudSgpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAoXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogc2VydmljZS5hcGlQYXRoICsgJy9kYXNoYm9hcmRNZW51Jyxcblx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRoZWFkZXJzOiBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKVxuXHRcdFx0fSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInBlcnNvbmFTZXJ2aWNlOjpnZXREYXNoYm9hcmRNZW51IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBnZXR0aW5nIHRoZSBkYXNoYm9hcmQgbWVudSBmcm9tIHBlcnNvbmFcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXROYXZCYXIgPSBmdW5jdGlvbiBnZXROYXZCYXIoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHQkaHR0cChcblx0XHRcdHtcblx0XHRcdFx0dXJsOiBzZXJ2aWNlLmFwaVBhdGggKyAnL25hdmJhcicsXG5cdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKClcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJwZXJzb25hU2VydmljZTo6Z2V0TmF2QmFyIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBnZXR0aW5nIG5hdmJhciBmcm9tIHBlcnNvbmFcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRQYXRpZW50TGlzdENvbmZpZyA9IGZ1bmN0aW9uIGdldFBhdGllbnRMaXN0Q29uZmlnKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cChcblx0XHRcdHtcblx0XHRcdFx0dXJsOiBzZXJ2aWNlLmFwaVBhdGggKyAnL3BhdGllbnRMaXN0L2NvbmZpZycsXG5cdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKClcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJwZXJzb25hU2VydmljZTo6Z2V0UGF0aWVudExpc3RDb25maWcgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGdldHRpbmcgZ2V0UGF0aWVudExpc3RDb25maWcgZnJvbSBwZXJzb25hXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2Uuc2V0UGF0aWVudExpc3RDb25maWcgPSBmdW5jdGlvbiBzZXRQYXRpZW50TGlzdENvbmZpZyhwYXRpZW50TGlzdENvbmZpZylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cChcblx0XHRcdHtcblx0XHRcdFx0dXJsOiBzZXJ2aWNlLmFwaVBhdGggKyAnL3BhdGllbnRMaXN0L2NvbmZpZycsXG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGRhdGE6IHBhdGllbnRMaXN0Q29uZmlnLFxuXHRcdFx0XHRoZWFkZXJzOiBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKVxuXHRcdFx0fSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdC5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJwZXJzb25hU2VydmljZTo6c2V0UGF0aWVudExpc3RDb25maWcgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIHNldHRpbmcgc2V0UGF0aWVudExpc3RDb25maWcgZnJvbSBwZXJzb25hXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2Uuc2V0Q3VycmVudFByb2dyYW0gPSBmdW5jdGlvbiBzZXRDdXJyZW50UHJvZ3JhbShwcm9ncmFtSWQpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAoXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogc2VydmljZS5hcGlQYXRoICtcblx0XHRcdFx0XHQnL3NldERlZmF1bHRQcm9ncmFtSW5Eb21haW4/cHJvZ3JhbUlkPScgK1xuXHRcdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChwcm9ncmFtSWQpLFxuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0LmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInBlcnNvbmFTZXJ2aWNlOjpzZXRDdXJyZW50UHJvZ3JhbSBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgc2V0dGluZyBjdXJyZW50XCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0RGFzaGJvYXJkUHJlZmVyZW5jZXMgPSBmdW5jdGlvbiBnZXREYXNoYm9hcmRQcmVmZXJlbmNlcygpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAoXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogc2VydmljZS5hcGlQYXRoICsgJy9wcmVmZXJlbmNlcycsXG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGRhdGE6XG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZGFzaGJvYXJkJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRoZWFkZXJzOiBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKVxuXHRcdFx0fSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdC5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJwZXJzb25hU2VydmljZTo6Z2V0RGFzaGJvYXJkUHJlZmVyZW5jZXMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGdldHRpbmcgcHJlZmVyZW5jZXMgZnJvbSBwZXJzb25hXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UudXBkYXRlRGFzaGJvYXJkUHJlZmVyZW5jZXMgPSBmdW5jdGlvbiB1cGRhdGVEYXNoYm9hcmRQcmVmZXJlbmNlcyhwcmVmcylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cChcblx0XHRcdHtcblx0XHRcdFx0dXJsOiBzZXJ2aWNlLmFwaVBhdGggKyAnL3VwZGF0ZVByZWZlcmVuY2VzJyxcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0ZGF0YTogSlNPTi5zdHJpbmdpZnkocHJlZnMpLFxuXHRcdFx0XHRoZWFkZXJzOiBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKVxuXHRcdFx0fSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdC5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJwZXJzb25hU2VydmljZTo6dXBkYXRlRGFzaGJvYXJkUHJlZmVyZW5jZXMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIHVwZGF0aW5nIHByZWZlcmVuY2VzXCIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwicHJvZ3JhbVNlcnZpY2VcIiwgW1xuXHQnJGh0dHAnLCAnJHEnLFxuXHRmdW5jdGlvbigkaHR0cCwgJHEpXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzLyc7XG5cblx0XHRzZXJ2aWNlLmdldFByb2dyYW1zID0gZnVuY3Rpb24gZ2V0UHJvZ3JhbXMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAncHJvZ3JhbS9wcm9ncmFtTGlzdCcsXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVyc1dpdGhDYWNoZSgpKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhLmNvbnRlbnQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImVycm9yIGZldGNoaW5nIHByb2dyYW0gbGlzdDpcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIHByb2dyYW0gbGlzdFwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5cbmFuZ3VsYXIubW9kdWxlKFwiQ29tbW9uLlNlcnZpY2VzXCIpLnNlcnZpY2UoXCJwcm92aWRlclNlcnZpY2VcIiwgW1xuXHQnJGh0dHAnLFxuXHQnJHEnLFxuXHQnanVub0h0dHAnLFxuXHRmdW5jdGlvbigkaHR0cCwgJHEsIGp1bm9IdHRwKVxuXHR7XG5cblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzL3Byb3ZpZGVyU2VydmljZSc7XG5cblx0XHRzZXJ2aWNlLmdldE1lID0gZnVuY3Rpb24gZ2V0TWUoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnL3Byb3ZpZGVyL21lJywgc2VydmljZS5jb25maWdIZWFkZXJzKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicHJvdmlkZXJTZXJ2aWNlOjpnZXRNZSBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgZ2V0dGluZyB1c2VyIGRhdGFcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRQcm92aWRlciA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyKGlkKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnL3Byb3ZpZGVyLycgKyBlbmNvZGVVUklDb21wb25lbnQoaWQpLFxuXHRcdFx0XHRzZXJ2aWNlLmNvbmZpZ0hlYWRlcnMpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJwcm92aWRlclNlcnZpY2U6OmdldFByb3ZpZGVyIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBnZXR0aW5nIHVzZXIgZGF0YVwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLnNlYXJjaFByb3ZpZGVycyA9IGZ1bmN0aW9uIHNlYXJjaFByb3ZpZGVycyhmaWx0ZXIpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAoXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogc2VydmljZS5hcGlQYXRoICsgJy9wcm92aWRlcnMvc2VhcmNoJyxcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0ZGF0YTogSlNPTi5zdHJpbmdpZnkoZmlsdGVyKSxcblx0XHRcdFx0aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKClcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhLmNvbnRlbnQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInByb3ZpZGVyU2VydmljZTo6c2VhcmNoUHJvdmlkZXJzIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBmZXRjaGluZyBwcm92aWRlciBsaXN0XCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0U2V0dGluZ3MgPSBmdW5jdGlvbiBnZXRTZXR0aW5ncygpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAoXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogc2VydmljZS5hcGlQYXRoICsgJy9zZXR0aW5ncy9nZXQnLFxuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCJcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhLmNvbnRlbnRbMF0pO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInByb3ZpZGVyU2VydmljZTo6Z2V0U2V0dGluZ3MgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIHByb3ZpZGVyIHNldHRpbmdzXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2Uuc2F2ZVNldHRpbmdzID0gZnVuY3Rpb24gc2F2ZVNldHRpbmdzKHByb3ZpZGVyTm8sIHNldHRpbmdzKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICcvc2V0dGluZ3MvJyArIHByb3ZpZGVyTm8gKyAnL3NhdmUnLFxuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRkYXRhOiBKU09OLnN0cmluZ2lmeShzZXR0aW5ncyksXG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicHJvdmlkZXJTZXJ2aWNlOjpzYXZlU2V0dGluZ3MgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIHNhdmluZyBzZXR0aW5nc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldEFjdGl2ZVRlYW1zID0gZnVuY3Rpb24gZ2V0QWN0aXZlVGVhbXMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICcvZ2V0QWN0aXZlVGVhbXMnLFxuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCJcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhLmNvbnRlbnQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInByb3ZpZGVyU2VydmljZTo6Z2V0QWN0aXZlVGVhbXMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIHByb3ZpZGVyIHRlYW1zXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0UmVjZW50UGF0aWVudExpc3QgPSBmdW5jdGlvbiBnZXRSZWNlbnRQYXRpZW50TGlzdCgpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0XHRcdHZhciBjb25maWcgPSBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKTtcblxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvZ2V0UmVjZW50RGVtb2dyYXBoaWNzVmlld2VkJywgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInByb3ZpZGVyU2VydmljZTo6Z2V0UmVjZW50RGVtb2dyYXBoaWNzVmlld2VkIGVycm9yXCIsIGVycm9yKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIFJlY2VudERlbW9ncmFwaGljc1ZpZXdlZFwiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwicHJvdmlkZXJzU2VydmljZVwiLCBbXG5cdCckcScsXG5cdCdqdW5vSHR0cCcsXG5cdGZ1bmN0aW9uKCRxLCBqdW5vSHR0cClcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvcHJvdmlkZXJzJztcblxuXHRcdHNlcnZpY2Uuc2VhcmNoID0gZnVuY3Rpb24gc2VhcmNoKHNlYXJjaFRleHQsIHNlYXJjaE1vZGUsIHBhZ2UsIHBlclBhZ2UpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpO1xuXHRcdFx0Y29uZmlnLnBhcmFtcyA9IHtcblx0XHRcdFx0c2VhcmNoVGV4dDogc2VhcmNoVGV4dCxcblx0XHRcdFx0c2VhcmNoTW9kZTogc2VhcmNoTW9kZSxcblx0XHRcdFx0cGFnZTogcGFnZSxcblx0XHRcdFx0cGVyUGFnZTogcGVyUGFnZVxuXHRcdFx0fTtcblxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCwgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicHJvdmlkZXJzU2VydmljZTo6c2VhcmNoIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2V0dGluZyBwcm92aWRlcnMgZGF0YVwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldEJ5U2VjdXJpdHlSb2xlID0gZnVuY3Rpb24gZ2V0QnlTZWN1cml0eVJvbGUocm9sZSlcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHR2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cdFx0XHRjb25maWcucGFyYW1zID0ge1xuXHRcdFx0XHRyb2xlOiByb2xlXG5cdFx0XHR9O1xuXG5cdFx0XHRqdW5vSHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy9ieVNlY3VyaXR5Um9sZScsIGNvbmZpZykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInByb3ZpZGVyc1NlcnZpY2U6OmdldEJ5U2VjdXJpdHlSb2xlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2V0dGluZyBwcm92aWRlcnMgZGF0YVwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldEJ5VHlwZSA9IGZ1bmN0aW9uIGdldEJ5UHJvdmlkZXJUeXBlKHR5cGUpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpO1xuXHRcdFx0Y29uZmlnLnBhcmFtcyA9IHtcblx0XHRcdFx0dHlwZTogdHlwZVxuXHRcdFx0fTtcblxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvYnlUeXBlJywgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicHJvdmlkZXJzU2VydmljZTo6Z2V0QnlUeXBlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2V0dGluZyBwcm92aWRlcnMgZGF0YVwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwicmVmZXJyYWxEb2N0b3JzU2VydmljZVwiLCBbXG5cdCckcScsXG5cdCdqdW5vSHR0cCcsXG5cdGZ1bmN0aW9uKCRxLGp1bm9IdHRwKVxuXHR7XG5cdFx0dmFyIHNlcnZpY2UgPSB7fTtcblxuXHRcdHNlcnZpY2UuYXBpUGF0aCA9ICcuLi93cy9ycy9yZWZlcnJhbERvY3RvcnMvJztcblxuXHRcdHNlcnZpY2Uuc2VhcmNoUmVmZXJyYWxEb2N0b3JzID0gZnVuY3Rpb24gc2VhcmNoUmVmZXJyYWxEb2N0b3JzKHNlYXJjaE5hbWUsIHNlYXJjaFJlZk5vLCBwYWdlLCBwZXJQYWdlKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHR2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cdFx0XHRjb25maWcucGFyYW1zID0ge1xuXHRcdFx0XHRzZWFyY2hOYW1lOiBzZWFyY2hOYW1lLFxuXHRcdFx0XHRzZWFyY2hSZWZObzpzZWFyY2hSZWZObyxcblx0XHRcdFx0cGFnZTpwYWdlLFxuXHRcdFx0XHRwZXJQYWdlOnBlclBhZ2Vcblx0XHRcdH07XG5cdFx0XHRqdW5vSHR0cC5nZXQoc2VydmljZS5hcGlQYXRoLCBjb25maWcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUmVmZXJyYWxEb2N0b3JzU2VydmljZTo6c2VhcmNoUmVmZXJyYWxEb2N0b3JzIGVycm9yXCIsIGVycm9yKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBzZWFyY2hpbmcgUmVmZXJyYWxEb2N0b3JzXCIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcInJlcG9ydEJ5VGVtcGxhdGVTZXJ2aWNlXCIsIFtcblx0JyRodHRwJyxcblx0JyRxJyxcblx0J2p1bm9IdHRwJyxcblx0ZnVuY3Rpb24oJGh0dHAsXG5cdCAgICAgICAgICRxLFxuXHQgICAgICAgICBqdW5vSHR0cClcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMnO1xuXG5cdFx0c2VydmljZS5pc0syQUluaXQgPSBmdW5jdGlvbiBpc0syQUluaXQoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICcvcmVwb3J0QnlUZW1wbGF0ZS9LMkFBY3RpdmUnLFxuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicmVwb3J0QnlUZW1wbGF0ZVNlcnZpY2U6OmlzSzJBSW5pdCBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIGsyYSBjb250ZW50XCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0QWxsSzJBUmVwb3J0cyA9IGZ1bmN0aW9uIGdldEFsbEsyQVJlcG9ydHMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdHZhciBjb25maWcgPSBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKTtcblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnL3JlcG9ydEJ5VGVtcGxhdGUvYWxsUmVwb3J0cycsIGNvbmZpZykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInJlcG9ydEJ5VGVtcGxhdGVTZXJ2aWNlOjpnZXRBbGxLMkFSZXBvcnRzIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgazJhIHJlcG9ydHNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRLMkFSZXBvcnRCeUlkID0gZnVuY3Rpb24gZ2V0SzJBUmVwb3J0QnlJZChpZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cChcblx0XHRcdHtcblx0XHRcdFx0dXJsOiBzZXJ2aWNlLmFwaVBhdGggKyAnL3JlcG9ydEJ5VGVtcGxhdGUvZ2V0UmVwb3J0QnlJZC8nICsgZW5jb2RlVVJJQ29tcG9uZW50KGlkKSxcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKClcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJyZXBvcnRCeVRlbXBsYXRlU2VydmljZTo6Z2V0SzJBUmVwb3J0QnlJZCBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIGsyYSByZXBvcnRcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRLMkFVcmwgPSBmdW5jdGlvbiBnZXRLMkFVcmwoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdHZhciBjb25maWcgPSBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKTtcblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnL3JlcG9ydEJ5VGVtcGxhdGUvSzJBVXJsLycsIGNvbmZpZykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInJlcG9ydEJ5VGVtcGxhdGVTZXJ2aWNlOjpnZXRLMkFVcmwgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBrMmEgdXJsXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiAgICBDb3B5cmlnaHQgKGMpIDIwMTItMjAxOC4gQ2xvdWRQcmFjdGljZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gICAgVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiAgICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gICAgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuICAgIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuICAgIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiAgICBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvclxuICAgIENsb3VkUHJhY3RpY2UgSW5jLlxuICAgIFZpY3RvcmlhLCBCcml0aXNoIENvbHVtYmlhXG4gICAgQ2FuYWRhXG5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcInJlcG9ydGluZ1NlcnZpY2VcIiwgW1xuXHQnJHEnLFxuXHQnanVub0h0dHAnLFxuXHRmdW5jdGlvbigkcSwganVub0h0dHApXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzL3JlcG9ydGluZy8nO1xuXG5cdFx0c2VydmljZS5nZXREZW1vZ3JhcGhpY1NldExpc3QgPSBmdW5jdGlvbiBnZXREZW1vZ3JhcGhpY1NldExpc3QoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHR2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnZGVtb2dyYXBoaWNTZXRzL2xpc3QnLCBjb25maWcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJyZXBvcnRpbmdTZXJ2aWNlOjpkZW1vZ3JhcGhpY1NldHMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBkZW1vZ3JhcGhpY1NldHNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcInJlc3VsdHNTZXJ2aWNlXCIsIFtcblx0ZnVuY3Rpb24oKVxuXHR7XG5cdFx0dmFyIHNlcnZpY2UgPSB7fTtcblxuXHRcdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXHRcdC8vIEZhY3Rvcnlcblx0XHQvLyBAcGFyYW0ge3Jlc3VsdHNfaGFzaH0gUmVzdWx0IGhhc2ggZnJvbSBDbGluaWNhaWQgQVBJXG5cdFx0Ly8gQHBhcmFtIHttZXRhX2hhc2h9IE1ldGEgaW5mbyBoYXNoIGZyb20gQ2xpbmljYWlkIEFQSVxuXHRcdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXHRcdHNlcnZpY2UuZmFjdG9yeSA9IGZ1bmN0aW9uIGZhY3RvcnkocmVzdWx0c19oYXNoLCBtZXRhX2hhc2gpXG5cdFx0e1xuXG5cdFx0XHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblx0XHRcdC8vIEluaXRpYWxpemVcblx0XHRcdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXHRcdFx0dmFyIHJlc3VsdHNfb2JqZWN0ID0ge1xuXHRcdFx0XHRkYXRhOiB7fSxcblx0XHRcdFx0bWV0YToge30sXG5cdFx0XHRcdGhhc19yZXN1bHRzOiBmYWxzZSxcblx0XHRcdFx0ZXJyb3JfdHlwZTogbnVsbFxuXHRcdFx0fTtcblxuXHRcdFx0aWYodXRpbC5leGlzdHMocmVzdWx0c19oYXNoKSAmJiAhYW5ndWxhci5lcXVhbHMocmVzdWx0c19oYXNoLCB7fSkpXG5cdFx0XHR7XG5cdFx0XHRcdHJlc3VsdHNfb2JqZWN0LmRhdGEgPSByZXN1bHRzX2hhc2g7XG5cdFx0XHRcdGlmKCFhbmd1bGFyLmVxdWFscyhyZXN1bHRzX2hhc2gsIHt9KSAmJiAhYW5ndWxhci5lcXVhbHMocmVzdWx0c19oYXNoLCBbXSkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXN1bHRzX29iamVjdC5oYXNfcmVzdWx0cyA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKHV0aWwuZXhpc3RzKG1ldGFfaGFzaCkpXG5cdFx0XHR7XG5cdFx0XHRcdHJlc3VsdHNfb2JqZWN0Lm1ldGEgPSBtZXRhX2hhc2g7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHJlc3VsdHNfb2JqZWN0Lm1ldGEgPSB7fTtcblx0XHRcdFx0cmVzdWx0c19vYmplY3QubWV0YS5wYWdpbmF0aW9uID0ge1xuXHRcdFx0XHRcdHBhZ2U6IDEsXG5cdFx0XHRcdFx0cGVyX3BhZ2U6IDEwLFxuXHRcdFx0XHRcdHRvdGFsOiAwLFxuXHRcdFx0XHRcdHRvdGFsX3BhZ2VzOiAwXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXN1bHRzX29iamVjdDtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwic2NoZWR1bGVTZXJ2aWNlXCIsIFtcblx0JyRodHRwJyxcblx0JyRxJyxcblx0J2p1bm9IdHRwJyxcblxuXHRmdW5jdGlvbihcblx0XHQkaHR0cCxcblx0XHQkcSxcblx0XHRqdW5vSHR0cFxuXHQpXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzLyc7XG5cblx0XHRzZXJ2aWNlLnNlbGVjdGVkRGF0ZSA9IG51bGw7XG5cblx0XHRzZXJ2aWNlLmdldFN0YXR1c2VzID0gZnVuY3Rpb24gZ2V0U3RhdHVzZXMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnc2NoZWR1bGUvc3RhdHVzZXMnLFxuXHRcdFx0XHRzZXJ2aWNlLmNvbmZpZ0hlYWRlcnNXaXRoQ2FjaGUpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJzY2hlZHVsZVNlcnZpY2U6OmdldFN0YXR1c2VzIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgc3RhdHVzZXNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRUeXBlcyA9IGZ1bmN0aW9uIGdldFR5cGVzKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJ3NjaGVkdWxlL3R5cGVzJyxcblx0XHRcdFx0SnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzV2l0aENhY2hlKCkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJzY2hlZHVsZVNlcnZpY2U6OmdldFN0YXR1c2VzIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgdHlwZXNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRBcHBvaW50bWVudHMgPSBmdW5jdGlvbiBnZXRBcHBvaW50bWVudHMoZGF5KVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdHZhciBjb25maWcgPSBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKTtcblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnc2NoZWR1bGUvZGF5LycgKyBlbmNvZGVVUklDb21wb25lbnQoZGF5KSwgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwic2NoZWR1bGVTZXJ2aWNlOjpnZXRBcHBvaW50bWVudHMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIGFwcG9pbnRtZW50c1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmFkZEFwcG9pbnRtZW50ID0gZnVuY3Rpb24gYWRkQXBwb2ludG1lbnQoYXBwb2ludG1lbnQpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAoXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogc2VydmljZS5hcGlQYXRoICsgJ3NjaGVkdWxlL2FkZCcsXG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGRhdGE6IEpTT04uc3RyaW5naWZ5KGFwcG9pbnRtZW50KSxcblx0XHRcdFx0aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKClcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJzY2hlZHVsZVNlcnZpY2U6OmFkZEFwcG9pbnRtZW50IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2F2aW5nIGFwcG9pbnRtZW50XCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0QXBwb2ludG1lbnQgPSBmdW5jdGlvbiBnZXRBcHBvaW50bWVudChhcHB0Tm8pXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAoXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogc2VydmljZS5hcGlQYXRoICsgJ3NjaGVkdWxlL2dldEFwcG9pbnRtZW50Jyxcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0ZGF0YTpcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCdpZCc6IGFwcHROb1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRoZWFkZXJzOiBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKVxuXHRcdFx0fSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEuYXBwb2ludG1lbnQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInNjaGVkdWxlU2VydmljZTo6Z2V0QXBwb2ludG1lbnQgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIGFwcG9pbnRtZW50XCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZGVsZXRlQXBwb2ludG1lbnQgPSBmdW5jdGlvbiBkZWxldGVBcHBvaW50bWVudChhcHB0Tm8pXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAoXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogc2VydmljZS5hcGlQYXRoICsgJ3NjaGVkdWxlL2RlbGV0ZUFwcG9pbnRtZW50Jyxcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0ZGF0YTpcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCdpZCc6IGFwcHROb1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRoZWFkZXJzOiBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKVxuXHRcdFx0fSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInNjaGVkdWxlU2VydmljZTo6ZGVsZXRlQXBwb2ludG1lbnQgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBkZWxldGluZyBhcHBvaW50bWVudFwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmFwcG9pbnRtZW50SGlzdG9yeSA9IGZ1bmN0aW9uIGFwcG9pbnRtZW50SGlzdG9yeShkZW1vTm8pXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAoXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogc2VydmljZS5hcGlQYXRoICsgJ3NjaGVkdWxlLycgK1xuXHRcdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChkZW1vTm8pICsgXCIvYXBwb2ludG1lbnRIaXN0b3J5XCIsXG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwic2NoZWR1bGVTZXJ2aWNlOjphcHBvaW50bWVudEhpc3RvcnkgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIGFwcG9pbnRtZW50IGhpc3RvcnlcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5jYW5jZWxBcHBvaW50bWVudCA9IGZ1bmN0aW9uIGNhbmNlbEFwcG9pbnRtZW50KGFwcHRObylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cChcblx0XHRcdHtcblx0XHRcdFx0dXJsOiBzZXJ2aWNlLmFwaVBhdGggKyAnc2NoZWR1bGUvYXBwb2ludG1lbnQvJyArXG5cdFx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KGFwcHRObykgKyBcIi91cGRhdGVTdGF0dXNcIixcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0ZGF0YTpcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHN0YXR1czogJ0MnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwic2NoZWR1bGVTZXJ2aWNlOjpjYW5jZWxBcHBvaW50bWVudCBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGNhbmNlbGxpbmcgYXBwb2ludG1lbnRcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5ub1Nob3dBcHBvaW50bWVudCA9IGZ1bmN0aW9uIG5vU2hvd0FwcG9pbnRtZW50KGFwcHRObylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cChcblx0XHRcdHtcblx0XHRcdFx0dXJsOiBzZXJ2aWNlLmFwaVBhdGggKyAnc2NoZWR1bGUvYXBwb2ludG1lbnQvJyArXG5cdFx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KGFwcHRObykgKyBcIi91cGRhdGVTdGF0dXNcIixcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0ZGF0YTpcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHN0YXR1czogJ04nXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwic2NoZWR1bGVTZXJ2aWNlOjpub1Nob3dBcHBvaW50bWVudCBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHNldHRpbmcgbm8gc2hvdyBhcHBvaW50bWVudFwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldFNjaGVkdWxlR3JvdXBzID0gZnVuY3Rpb24gZ2V0U2NoZWR1bGVHcm91cHMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdGp1bm9IdHRwLmdldChcblx0XHRcdFx0c2VydmljZS5hcGlQYXRoICsgJ3NjaGVkdWxlL2dyb3VwcycsXG5cdFx0XHRcdHtoZWFkZXJzOiBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKX1cblx0XHRcdCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInNjaGVkdWxlU2VydmljZTo6Z2V0U2NoZWR1bGVHcm91cHMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoKTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0U2NoZWR1bGVzRm9yQ2FsZW5kYXIgPSBmdW5jdGlvbiBnZXRTY2hlZHVsZXNGb3JDYWxlbmRhcihcblx0XHRcdHByb3ZpZGVySWQsXG5cdFx0XHRzdGFydERhdGUsXG5cdFx0XHRlbmREYXRlLFxuXHRcdFx0c2l0ZU5hbWVcblx0XHQpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0dmFyIHVybCA9IHNlcnZpY2UuYXBpUGF0aCArICdzY2hlZHVsZS9jYWxlbmRhci8nO1xuXHRcdFx0dXJsICs9IGVuY29kZVVSSUNvbXBvbmVudChwcm92aWRlcklkKSArICcvJztcblx0XHRcdHVybCArPSAnP3N0YXJ0RGF0ZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0YXJ0RGF0ZSk7XG5cdFx0XHR1cmwgKz0gJyZlbmREYXRlPScgKyBlbmNvZGVVUklDb21wb25lbnQoZW5kRGF0ZSk7XG5cblx0XHRcdGlmKHNpdGVOYW1lICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdHVybCArPSAnJnNpdGU9JyArIGVuY29kZVVSSUNvbXBvbmVudChzaXRlTmFtZSk7XG5cdFx0XHR9XG5cblx0XHRcdGp1bm9IdHRwLmdldChcblx0XHRcdFx0dXJsLFxuXHRcdFx0XHR7aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCl9XG5cdFx0XHQpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJzY2hlZHVsZVNlcnZpY2U6OmdldFNjaGVkdWxlc0ZvckNhbGVuZGFyIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCk7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldFNjaGVkdWxlVGVtcGxhdGVDb2RlcyA9IGZ1bmN0aW9uIGdldEF2YWlsYWJpbGl0eUNvZGVzKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHRqdW5vSHR0cC5nZXQoXG5cdFx0XHRcdHNlcnZpY2UuYXBpUGF0aCArICdzY2hlZHVsZS90ZW1wbGF0ZUNvZGVzJyxcblx0XHRcdFx0e2hlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpfVxuXHRcdFx0KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblxuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJzY2hlZHVsZVNlcnZpY2U6OmdldEF2YWlsYWJpbGl0eVR5cGVzIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCk7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldEFwcG9pbnRtZW50U3RhdHVzZXMgPSBmdW5jdGlvbiBnZXRBcHBvaW50bWVudFN0YXR1c2VzKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHRqdW5vSHR0cC5nZXQoXG5cdFx0XHRcdHNlcnZpY2UuYXBpUGF0aCArICdzY2hlZHVsZS9jYWxlbmRhci9zdGF0dXNlcycsXG5cdFx0XHRcdHtoZWFkZXJzOiBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKX1cblx0XHRcdCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInNjaGVkdWxlU2VydmljZTo6Z2V0QXBwb2ludG1lbnRTdGF0dXNlcyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRTaXRlcyA9IGZ1bmN0aW9uIGdldFNpdGVzKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHRqdW5vSHR0cC5nZXQoXG5cdFx0XHRcdHNlcnZpY2UuYXBpUGF0aCArICdzaXRlcycsXG5cdFx0XHRcdHtoZWFkZXJzOiBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKX1cblx0XHRcdCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInNjaGVkdWxlU2VydmljZTo6Z2V0U2l0ZXMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoKTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXHR9XG5dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcInNlY3VyaXR5U2VydmljZVwiLCBbXG5cdCckaHR0cCcsICckcScsXG5cdGZ1bmN0aW9uKCRodHRwLCAkcSlcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvJztcblxuXHRcdHNlcnZpY2UudXNlciA9IG51bGw7XG5cblx0XHRzZXJ2aWNlLmdldFVzZXIgPSBmdW5jdGlvbiBnZXRVc2VyKClcblx0XHR7XG5cdFx0XHRyZXR1cm4gc2VydmljZS51c2VyO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLnNldFVzZXIgPSBmdW5jdGlvbiBzZXRVc2VyKHUpXG5cdFx0e1xuXHRcdFx0c2VydmljZS51c2VyID0gdTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5oYXNSaWdodCA9IGZ1bmN0aW9uIGhhc1JpZ2h0KG9iamVjdE5hbWUsIHByaXZpbGVnZSwgZGVtb2dyYXBoaWNObylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHR2YXIgdXJsID0gc2VydmljZS5hcGlQYXRoICsgJ3BlcnNvbmEvaGFzUmlnaHQ/b2JqZWN0TmFtZT0nICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KG9iamVjdE5hbWUpICtcblx0XHRcdFx0JyZwcml2aWxlZ2U9JyArXG5cdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChwcml2aWxlZ2UpICtcblx0XHRcdFx0JyZkZW1vZ3JhcGhpY05vPScgK1xuXHRcdFx0XHRlbmNvZGVVUklDb21wb25lbnQoZGVtb2dyYXBoaWNObyk7XG5cblx0XHRcdCRodHRwLmdldCh1cmwsIHNlcnZpY2UuY29uZmlnSGVhZGVyc1dpdGhDYWNoZSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEuc3VjY2Vzcyk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwic2VjdXJpdHlTZXJ2aWNlOjpoYXNSaWdodCBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgYWNjZXNzIHJpZ2h0XCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuaGFzUmlnaHRzID0gZnVuY3Rpb24gaGFzUmlnaHRzKGxpc3RPZkl0ZW1zKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICdwZXJzb25hL2hhc1JpZ2h0cycsXG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGRhdGE6IEpTT04uc3RyaW5naWZ5KGxpc3RPZkl0ZW1zKSxcblx0XHRcdFx0aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKClcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJzZWN1cml0eVNlcnZpY2U6Omhhc1JpZ2h0cyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgYWNjZXNzIHJpZ2h0c1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmlzQWxsb3dlZEFjY2Vzc1RvUGF0aWVudFJlY29yZCA9IGZ1bmN0aW9uIGlzQWxsb3dlZEFjY2Vzc1RvUGF0aWVudFJlY29yZChkZW1vZ3JhcGhpY05vKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICdwZXJzb25hL2lzQWxsb3dlZEFjY2Vzc1RvUGF0aWVudFJlY29yZCcsXG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGRhdGE6IEpTT04uc3RyaW5naWZ5KFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0XCJkZW1vZ3JhcGhpY05vXCI6IGRlbW9ncmFwaGljTm9cblx0XHRcdFx0fSksXG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwic2VjdXJpdHlTZXJ2aWNlOjppc0FsbG93ZWRBY2Nlc3NUb1BhdGllbnRSZWNvcmQgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIGFjY2VzcyByaWdodHNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5oYXNPbmVPZlBlcm1pc3Npb25zID0gZnVuY3Rpb24gaGFzT25lT2ZQZXJtaXNzaW9ucyhwZXJtaXNzaW9uX2FycmF5KVxuXHRcdHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmhhc1Blcm1pc3Npb24gPSBmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHBlcm1pc3Npb24pXG5cdFx0e1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiBIYW1pbHRvblxuIE9udGFyaW8sIENhbmFkYVxuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKFwiQ29tbW9uLlNlcnZpY2VzXCIpLnNlcnZpY2UoXCJzcGVjaWFsaXN0c1NlcnZpY2VcIiwgW1xuXHQnJHEnLFxuXHQnanVub0h0dHAnLFxuXHRmdW5jdGlvbigkcSxqdW5vSHR0cClcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvc3BlY2lhbGlzdHMvJztcblxuXHRcdHNlcnZpY2Uuc2VhcmNoU3BlY2lhbGlzdHMgPSBmdW5jdGlvbiBzZWFyY2hTcGVjaWFsaXN0cyhzZWFyY2hOYW1lLCBzZWFyY2hSZWZObywgcGFnZSwgcGVyUGFnZSlcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0dmFyIGNvbmZpZyA9IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpO1xuXHRcdFx0Y29uZmlnLnBhcmFtcyA9IHtcblx0XHRcdFx0c2VhcmNoTmFtZTogc2VhcmNoTmFtZSxcblx0XHRcdFx0c2VhcmNoUmVmTm86c2VhcmNoUmVmTm8sXG5cdFx0XHRcdHBhZ2U6cGFnZSxcblx0XHRcdFx0cGVyUGFnZTpwZXJQYWdlXG5cdFx0XHR9O1xuXHRcdFx0Y29uc29sZS5sb2coXCJwYXJhbXNcIiwgY29uZmlnLnBhcmFtcyk7XG5cblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGgsIGNvbmZpZykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJTcGVjaWFsaXN0c1NlcnZpY2U6OnNlYXJjaFNwZWNpYWxpc3RzIGVycm9yXCIsIGVycm9yKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBzZWFyY2hpbmcgU3BlY2lhbGlzdHNcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwic3RhdGljRGF0YVNlcnZpY2VcIiwgW1xuXHRmdW5jdGlvbigpXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5nZXRHZW5kZXJzID0gZnVuY3Rpb24gZ2V0R2VuZGVycygpXG5cdFx0e1xuXHRcdFx0dmFyIGdlbmRlcnMgPSBbXTtcblx0XHRcdGdlbmRlcnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1hbGVcIlxuXHRcdFx0fSk7XG5cdFx0XHRnZW5kZXJzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJGXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJGZW1hbGVcIlxuXHRcdFx0fSk7XG5cdFx0XHRnZW5kZXJzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUcmFuc2dlbmRlclwiXG5cdFx0XHR9KTtcblx0XHRcdGdlbmRlcnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk90aGVyXCJcblx0XHRcdH0pO1xuXHRcdFx0Z2VuZGVycy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVW5kZWZpbmVkXCJcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGdlbmRlcnM7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0VGl0bGVzID0gZnVuY3Rpb24gZ2V0VGl0bGVzKClcblx0XHR7XG5cdFx0XHR2YXIgdGl0bGVzID0gW107XG5cdFx0XHR0aXRsZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1JU1NcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1JU1NcIlxuXHRcdFx0fSk7XG5cdFx0XHR0aXRsZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1SU1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTVJTXCJcblx0XHRcdH0pO1xuXHRcdFx0dGl0bGVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNU1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTVNcIlxuXHRcdFx0fSk7XG5cdFx0XHR0aXRsZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1SXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNUlwiXG5cdFx0XHR9KTtcblx0XHRcdHRpdGxlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTVNTUlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTVNTUlwiXG5cdFx0XHR9KTtcblx0XHRcdHRpdGxlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRFJcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkRSXCJcblx0XHRcdH0pO1xuXHRcdFx0dGl0bGVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQUk9GXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQUk9GXCJcblx0XHRcdH0pO1xuXHRcdFx0dGl0bGVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJSRUVWRVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUkVFVkVcIlxuXHRcdFx0fSk7XG5cdFx0XHR0aXRsZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlJFVlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUkVWXCJcblx0XHRcdH0pO1xuXHRcdFx0dGl0bGVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJSVF9IT05cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlJUX0hPTlwiXG5cdFx0XHR9KTtcblx0XHRcdHRpdGxlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU0VOXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTRU5cIlxuXHRcdFx0fSk7XG5cdFx0XHR0aXRsZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNHVFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU0dUXCJcblx0XHRcdH0pO1xuXHRcdFx0dGl0bGVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTUlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU1JcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gdGl0bGVzO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldFByb3ZpbmNlcyA9IGZ1bmN0aW9uIGdldFByb3ZpbmNlcygpXG5cdFx0e1xuXHRcdFx0dmFyIHByb3ZpbmNlcyA9IFtdO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBQlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQUItQWxiZXJ0YVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQkNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJDLUJyaXRpc2ggQ29sdW1iaWFcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1CXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNQi1NYW5pdG9iYVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTkJcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5CLU5ldyBCcnVuc3dpY2tcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5MXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOTC1OZXdmb3VuZGxhbmQgTGFicmFkb3JcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5UXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOVC1Ob3J0aHdlc3QgVGVycml0b3J5XCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOU1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTlMtTm92YSBTY290aWFcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5VXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOVS1OdW5hdnV0XCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJPTlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiT04tT250YXJpb1wiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUEVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBFLVByaW5jZSBFZHdhcmQgSXNsYW5kXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJRQ1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUUMtUXVlYmVjXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTS1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU0stU2Fza2F0Y2hld2FuXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJZVFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiWVQtWXVrb25cIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUyByZXNpZGVudFwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtQUtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLUFLLUFsYXNrYVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtQUxcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLUFMLUFsYWJhbWFcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLUFSXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1BUi1BcmthbnNhc1wiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtQVpcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLUFaLUFyaXpvbmFcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLUNBXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1DQS1DYWxpZm9ybmlhXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1DT1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtQ08tQ29sb3JhZG9cIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLUNUXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1DVC1Db25uZWN0aWN1dFwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtQ1pcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLUNaLUNhbmFsIFpvbmVcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLURDXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1EQy1EaXN0cmljdCBPZiBDb2x1bWJpYVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtREVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLURFLURlbGF3YXJlXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1GTFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtRkwtRmxvcmlkYVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtR0FcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLUdBLUdlb3JnaWFcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLUdVXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1HVS1HdWFtXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1ISVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtSEktSGF3YWlpXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1JQVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtSUEtSW93YVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtSURcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLUlELUlkYWhvXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1JTFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtSUwtSWxsaW5vaXNcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLUlOXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1JTi1JbmRpYW5hXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1LU1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtS1MtS2Fuc2FzXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1LWVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtS1ktS2VudHVja3lcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLUxBXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1MQS1Mb3Vpc2lhbmFcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLU1BXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1NQS1NYXNzYWNodXNldHRzXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1NRFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtTUQtTWFyeWxhbmRcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLU1FXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1NRS1NYWluZVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtTUlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLU1JLU1pY2hpZ2FuXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1NTlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtTU4tTWlubmVzb3RhXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1NT1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtTU8tTWlzc291cmlcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLU1TXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1NUy1NaXNzaXNzaXBwaVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtTVRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLU1ULU1vbnRhbmFcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLU5DXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1OQy1Ob3J0aCBDYXJvbGluYVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtTkRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLU5ELU5vcnRoIERha290YVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtTkVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLU5FLU5lYnJhc2thXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1OSFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtTkgtTmV3IEhhbXBzaGlyZVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtTkpcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLU5KLU5ldyBKZXJzZXlcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLU5NXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1OTS1OZXcgTWV4aWNvXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1OVVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtTlUtTnVuYXZ1dFwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtTlZcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLU5WLU5ldmFkYVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtTllcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLU5ZLU5ldyBZb3JrXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1PSFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtT0gtT2hpb1wiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtT0tcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLU9LLU9rbGFob21hXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1PUlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtT1ItT3JlZ29uXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1QQVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtUEEtUGVubnN5bHZhbmlhXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1QUlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtUFItUHVlcnRvIFJpY29cIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLVJJXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1SSS1SaG9kZSBJc2xhbmRcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLVNDXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1TQy1Tb3V0aCBDYXJvbGluYVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtU0RcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLVNELVNvdXRoIERha290YVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtVE5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLVROLVRlbm5lc3NlZVwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtVFhcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLVRYLVRleGFzXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1VVFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtVVQtVXRhaFwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtVkFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLVZBLVZpcmdpbmlhXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1WSVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtVkktVmlyZ2luIElzbGFuZHNcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLVZUXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1WVC1WZXJtb250XCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVUy1XQVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVMtV0EtV2FzaGluZ3RvblwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtV0lcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLVdJLVdpc2NvbnNpblwiXG5cdFx0XHR9KTtcblx0XHRcdHByb3ZpbmNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVMtV1ZcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVTLVdWLVdlc3QgVmlyZ2luaWFcIlxuXHRcdFx0fSk7XG5cdFx0XHRwcm92aW5jZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVTLVdZXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUy1XWS1XeW9taW5nXCJcblx0XHRcdH0pO1xuXHRcdFx0cHJvdmluY2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJPVFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiT3RoZXJcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcHJvdmluY2VzO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldENvdW50cmllcyA9IGZ1bmN0aW9uIGdldENvdW50cmllcygpXG5cdFx0e1xuXHRcdFx0dmFyIGNvdW50cmllcyA9IFtdO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBRlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQUZHSEFOSVNUQU5cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFYXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBTEFORCBJU0xBTkRTXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBTFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQUxCQU5JQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRFpcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFMR0VSSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFTXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBTUVSSUNBTiBTQU1PQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQURcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFORE9SUkFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFPXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBTkdPTEFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFJXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBTkdVSUxMQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQVFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFOVEFSQ1RJQ0FcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFHXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBTlRJR1VBIEFORCBCQVJCVURBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBUlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQVJHRU5USU5BXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBTVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQVJNRU5JQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQVdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFSVUJBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBVVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQVVTVFJBTElBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBVFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQVVTVFJJQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQVpcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFaRVJCQUlKQU5cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJTXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCQUhBTUFTXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCSFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQkFIUkFJTlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQkRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJBTkdMQURFU0hcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJCXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCQVJCQURPU1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQllcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJFTEFSVVNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJFXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCRUxHSVVNXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCWlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQkVMSVpFXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCSlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQkVOSU5cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJNXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCRVJNVURBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCVFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQkhVVEFOXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCT1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQk9MSVZJQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQkFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJPU05JQSBBTkQgSEVSWkVHT1ZJTkFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJXXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCT1RTV0FOQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQlZcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJPVVZFVCBJU0xBTkRcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJSXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCUkFaSUxcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIklPXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCUklUSVNIIElORElBTiBPQ0VBTiBURVJSSVRPUllcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJOXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCUlVORUkgREFSVVNTQUxBTVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQkdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJVTEdBUklBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCRlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQlVSS0lOQSBGQVNPXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCSVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQlVSVU5ESVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiS0hcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNBTUJPRElBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDTVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ0FNRVJPT05cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNBXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDQU5BREFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNWXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDQVBFIFZFUkRFXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLWVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ0FZTUFOIElTTEFORFNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNGXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDRU5UUkFMIEFGUklDQU4gUkVQVUJMSUNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlREXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDSEFEXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDTFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ0hJTEVcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNOXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDSElOQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ1hcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNIUklTVE1BUyBJU0xBTkRcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNDXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDT0NPUyAoS0VFTElORykgSVNMQU5EU1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ09cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNPTE9NQklBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLTVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ09NT1JPU1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ0dcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNPTkdPXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDRFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ09OR08sIFRIRSBERU1PQ1JBVElDIFJFUFVCTElDIE9GIFRIRVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ0tcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNPT0sgSVNMQU5EU1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ1JcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNPU1RBIFJJQ0FcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNJXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDw4PCr1RFIEQgSVZPSVJFXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJIUlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ1JPQVRJQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ1VcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNVQkFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNZXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDWVBSVVNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNaXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDWkVDSCBSRVBVQkxJQ1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiREtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkRFTk1BUktcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkRKXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJESklCT1VUSVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRE1cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkRPTUlOSUNBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJET1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRE9NSU5JQ0FOIFJFUFVCTElDXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJFQ1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRUNVQURPUlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRUdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkVHWVBUXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTVlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRUwgU0FMVkFET1JcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdRXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJFUVVBVE9SSUFMIEdVSU5FQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRVJcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkVSSVRSRUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkVFXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJFU1RPTklBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJFVFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRVRISU9QSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkZLXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJGQUxLTEFORCBJU0xBTkRTIChNQUxWSU5BUylcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkZPXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJGQVJPRSBJU0xBTkRTXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJGSlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRklKSVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRklcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkZJTkxBTkRcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkZSXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJGUkFOQ0VcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdGXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJGUkVOQ0ggR1VJQU5BXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQRlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRlJFTkNIIFBPTFlORVNJQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVEZcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkZSRU5DSCBTT1VUSEVSTiBURVJSSVRPUklFU1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR0FcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdBQk9OXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJHTVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiR0FNQklBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJHRVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiR0VPUkdJQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiREVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdFUk1BTllcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdIXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJHSEFOQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR0lcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdJQlJBTFRBUlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR1JcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdSRUVDRVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR0xcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdSRUVOTEFORFwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR0RcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdSRU5BREFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdQXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJHVUFERUxPVVBFXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJHVVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiR1VBTVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR1RcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdVQVRFTUFMQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR0dcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdVRVJOU0VZXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJHTlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiR1VJTkVBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJHV1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiR1VJTkVBLUJJU1NBVVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR1lcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdVWUFOQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSFRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkhBSVRJXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJITVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSEVBUkQgSVNMQU5EIEFORCBNQ0RPTkFMRCBJU0xBTkRTXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJWQVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSE9MWSBTRUUgKFZBVElDQU4gQ0lUWSBTVEFURSlcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkhOXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJIT05EVVJBU1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSEtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkhPTkcgS09OR1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSFVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkhVTkdBUllcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIklTXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJQ0VMQU5EXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJJTlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSU5ESUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIklEXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJTkRPTkVTSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIklSXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJUkFOLCBJU0xBTUlDIFJFUFVCTElDIE9GXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJJUVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSVJBUVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSUVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIklSRUxBTkRcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIklNXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJU0xFIE9GIE1BTlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSUxcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIklTUkFFTFwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSVRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIklUQUxZXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJKTVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSkFNQUlDQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSlBcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkpBUEFOXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJKRVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSkVSU0VZXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJKT1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSk9SREFOXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLWlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS0FaQUtIU1RBTlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiS0VcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIktFTllBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLSVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS0lSSUJBVElcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIktQXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJLT1JFQSwgREVNT0NSQVRJQyBQRU9QTEVTIFJFUFVCTElDIE9GXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLUlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS09SRUEsIFJFUFVCTElDIE9GXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLV1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS1VXQUlUXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLR1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS1lSR1laU1RBTlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTEFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxBTyBQRU9QTEVTIERFTU9DUkFUSUMgUkVQVUJMSUNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkxWXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJMQVRWSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkxCXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJMRUJBTk9OXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJMU1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTEVTT1RIT1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTFJcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxJQkVSSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkxZXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJMSUJZQU4gQVJBQiBKQU1BSElSSVlBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJMSVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTElFQ0hURU5TVEVJTlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTFRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxJVEhVQU5JQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTFVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxVWEVNQk9VUkdcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1PXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNQUNBT1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTUtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1BQ0VET05JQSwgVEhFIEZPUk1FUiBZVUdPU0xBViBSRVBVQkxJQyBPRlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTUdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1BREFHQVNDQVJcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1XXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNQUxBV0lcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1ZXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNQUxBWVNJQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTVZcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1BTERJVkVTXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNTFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTUFMSVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTVRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1BTFRBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNSFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTUFSU0hBTEwgSVNMQU5EU1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTVFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1BUlRJTklRVUVcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1SXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNQVVSSVRBTklBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNVVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTUFVUklUSVVTXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJZVFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTUFZT1RURVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTVhcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1FWElDT1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRk1cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1JQ1JPTkVTSUEsIEZFREVSQVRFRCBTVEFURVMgT0ZcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1EXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNT0xET1ZBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNQ1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTU9OQUNPXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNTlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTU9OR09MSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1FXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNT05URU5FR1JPXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNU1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTU9OVFNFUlJBVFwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTUFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1PUk9DQ09cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1aXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNT1pBTUJJUVVFXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNTVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTVlBTk1BUlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTkFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5BTUlCSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5SXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOQVVSVVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTlBcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5FUEFMXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOTFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTkVUSEVSTEFORFNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFOXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJORVRIRVJMQU5EUyBBTlRJTExFU1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTkNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5FVyBDQUxFRE9OSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5aXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJORVcgWkVBTEFORFwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTklcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5JQ0FSQUdVQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTkVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5JR0VSXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOR1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTklHRVJJQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTlVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5JVUVcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5GXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOT1JGT0xLIElTTEFORFwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTVBcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5PUlRIRVJOIE1BUklBTkEgSVNMQU5EU1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTk9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5PUldBWVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiT01cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk9NQU5cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlBLXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQQUtJU1RBTlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUFdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBBTEFVXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQU1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUEFMRVNUSU5JQU4gVEVSUklUT1JZLCBPQ0NVUElFRFwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUEFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBBTkFNQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUEdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBBUFVBIE5FVyBHVUlORUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlBZXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQQVJBR1VBWVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUEVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBFUlVcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlBIXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQSElMSVBQSU5FU1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUE5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBJVENBSVJOXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQTFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUE9MQU5EXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQVFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUE9SVFVHQUxcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlBSXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQVUVSVE8gUklDT1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUUFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlFBVEFSXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJSRVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUsOGwpJVTklPTlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUk9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlJPTUFOSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlJVXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJSVVNTSUFOIEZFREVSQVRJT05cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlJXXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJSV0FOREFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJMXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTQUlOVCBCQVJUSMOGwpJMRU1ZXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTSFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU0FJTlQgSEVMRU5BXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLTlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU0FJTlQgS0lUVFMgQU5EIE5FVklTXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJMQ1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU0FJTlQgTFVDSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1GXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTQUlOVCBNQVJUSU5cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlBNXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTQUlOVCBQSUVSUkUgQU5EIE1JUVVFTE9OXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJWQ1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU0FJTlQgVklOQ0VOVCBBTkQgVEhFIEdSRU5BRElORVNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIldTXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTQU1PQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU01cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNBTiBNQVJJTk9cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNUXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTQU8gVE9NRSBBTkQgUFJJTkNJUEVcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNBXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTQVVESSBBUkFCSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNOXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTRU5FR0FMXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJSU1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU0VSQklBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTQ1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU0VZQ0hFTExFU1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU0xcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNJRVJSQSBMRU9ORVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU0dcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNJTkdBUE9SRVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU0tcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNMT1ZBS0lBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTSVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU0xPVkVOSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNCXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTT0xPTU9OIElTTEFORFNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNPXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTT01BTElBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJaQVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU09VVEggQUZSSUNBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJHU1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU09VVEggR0VPUkdJQSBBTkQgVEhFIFNPVVRIIFNBTkRXSUNIIElTTEFORFNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkVTXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTUEFJTlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTEtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNSSSBMQU5LQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU0RcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNVREFOXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTUlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU1VSSU5BTUVcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNKXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTVkFMQkFSRCBBTkQgSkFOIE1BWUVOXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTWlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU1dBWklMQU5EXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTRVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU1dFREVOXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDSFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU1dJVFpFUkxBTkRcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNZXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTWVJJQU4gQVJBQiBSRVBVQkxJQ1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVFdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRBSVdBTiwgUFJPVklOQ0UgT0YgQ0hJTkFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRKXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUQUpJS0lTVEFOXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUWlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVEFOWkFOSUEsIFVOSVRFRCBSRVBVQkxJQyBPRlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVEhcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRIQUlMQU5EXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUTFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVElNT1ItTEVTVEVcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRHXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUT0dPXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUS1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVE9LRUxBVVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVE9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRPTkdBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUVFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVFJJTklEQUQgQU5EIFRPQkFHT1wiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVE5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRVTklTSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRSXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUVVJLRVlcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRNXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUVVJLTUVOSVNUQU5cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRDXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUVVJLUyBBTkQgQ0FJQ09TIElTTEFORFNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRWXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUVVZBTFVcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVHXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVR0FOREFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVBXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVS1JBSU5FXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBRVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVU5JVEVEIEFSQUIgRU1JUkFURVNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdCXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVTklURUQgS0lOR0RPTVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVVNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVOSVRFRCBTVEFURVNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVNXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVTklURUQgU1RBVEVTIE1JTk9SIE9VVExZSU5HIElTTEFORFNcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVZXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVUlVHVUFZXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVWlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVVpCRUtJU1RBTlwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVlVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlZBTlVBVFVcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlZBXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJWQVRJQ0FOIENJVFkgU1RBVEVcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlZFXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJWRU5FWlVFTEFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlZOXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJWSUVUIE5BTVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVkdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlZJUkdJTiBJU0xBTkRTLCBCUklUSVNIXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJWSVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVklSR0lOIElTTEFORFMsIFUuUy5cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIldGXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJXQUxMSVMgQU5EIEZVVFVOQVwiXG5cdFx0XHR9KTtcblx0XHRcdGNvdW50cmllcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRUhcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIldFU1RFUk4gU0FIQVJBXCJcblx0XHRcdH0pO1xuXHRcdFx0Y291bnRyaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJZRVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiWUVNRU5cIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlpNXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJaQU1CSUFcIlxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudHJpZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlpXXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJaSU1CQUJXRVwiXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBjb3VudHJpZXM7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0RW5nRnJlID0gZnVuY3Rpb24gZ2V0RW5nRnJlKClcblx0XHR7XG5cdFx0XHR2YXIgbGFuZ3MgPSBbXTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJFbmdsaXNoXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJFbmdsaXNoXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkZyZW5jaFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRnJlbmNoXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk90aGVyXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJPdGhlclwiXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBsYW5ncztcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRTcG9rZW5MYW5ndWFnZXMgPSBmdW5jdGlvbiBnZXRTcG9rZW5MYW5ndWFnZXMoKVxuXHRcdHtcblx0XHRcdHZhciBsYW5ncyA9IFtdO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkVuZ2xpc2hcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkVuZ2xpc2hcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRnJlbmNoXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJGcmVuY2hcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQWJraGF6aWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBYmtoYXppYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQWNoaW5lc2VcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFjaGluZXNlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFjb2xpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBY29saVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBZGFuZ21lXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBZGFuZ21lXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFkeWdoZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQWR5Z2hlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFmYXJcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFmYXJcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQWZyaWhpbGlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFmcmloaWxpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFmcmlrYWFuc1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQWZyaWthYW5zXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFmcm8tQXNpYXRpYyAoT3RoZXIpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBZnJvLUFzaWF0aWNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQWludVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQWludVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBa2FuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBa2FuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFra2FkaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBa2thZGlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBbGJhbmlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQWxiYW5pYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQWxldXRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFsZXV0XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFsZ29ucXVpYW4gTGFuZ3VhZ2VzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBbGdvbnF1aWFuIExhbmd1YWdlc1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBbHRhaWMgKE90aGVyKVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQWx0YWljXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFtaGFyaWNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFtaGFyaWNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQW5naWthXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBbmdpa2FcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQXBhY2hlIExhbmd1YWdlc1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQXBhY2hlIExhbmd1YWdlc1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBcmFiaWNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFyYWJpY1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBcmFtYWljXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBcmFtYWljXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFyYXBhaG9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFyYXBhaG9cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQXJhdWNhbmlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQXJhdWNhbmlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBcmF3YWtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFyYXdha1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBcmdvbmVzZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQXJnb25lc2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQXJtZW5pYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFybWVuaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFyb21hbmlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQXJvbWFuaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFydGlmaWNpYWwgKE90aGVyKVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQXJ0aWZpY2lhbFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBc3NhbWVzZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQXNzYW1lc2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQXN0dXJpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFzdHVyaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkF0aGFwYXNjYW4gTGFuZ3VhZ2VzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBdGhhcGFzY2FuIExhbmd1YWdlc1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBdXN0cmFsaWFuIExhbmd1YWdlc1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQXVzdHJhbGlhbiBMYW5ndWFnZXNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQXVzdHJvbmVzaWFuIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkF1c3Ryb25lc2lhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBdmFyaWNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkF2YXJpY1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJBdmVzdGFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBdmVzdGFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkF3YWRoaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQXdhZGhpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkF5bWFyYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQXltYXJhXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkF6ZXJiYWlqYW5pXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJBemVyYmFpamFuaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCYWxpbmVzZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQmFsaW5lc2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQmFsdGljIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJhbHRpY1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCYWx1Y2hpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCYWx1Y2hpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJhbWJhcmFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJhbWJhcmFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQmFtaWxla2UgTGFuZ3VhZ2VzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCYW1pbGVrZSBMYW5ndWFnZXNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQmFuZGFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJhbmRhXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJhbnR1IChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJhbnR1XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJhc2FcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJhc2FcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQmFzaGtpclwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQmFzaGtpclwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCYXNxdWVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJhc3F1ZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCYXRhayAoSW5kb25lc2lhKVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQmF0YWsgKEluZG9uZXNpYSlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQmVqYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQmVqYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCZWxhcnVzaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCZWxhcnVzaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJlbWJhXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCZW1iYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCZW5nYWxpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCZW5nYWxpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJlcmJlciAoT3RoZXIpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCZXJiZXJcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQmhvanB1cmlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJob2pwdXJpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJpaGFyaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQmloYXJpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJpa29sXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCaWtvbFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCaW5pXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCaW5pXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJpc2xhbWFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJpc2xhbWFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQmxpblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQmxpblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCb2ttYWwsIE5vcndlZ2lhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQm9rbWFsLCBOb3J3ZWdpYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQm9zbmlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQm9zbmlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCcmFqXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCcmFqXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJyZXRvblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQnJldG9uXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkJ1Z2luZXNlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCdWdpbmVzZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCdWxnYXJpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJ1bGdhcmlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCdXJpYXRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkJ1cmlhdFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJCdXJtZXNlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJCdXJtZXNlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNhZGRvXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDYWRkb1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDYW50b25lc2VcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNhbnRvbmVzZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDYXJpYlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ2FyaWJcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ2F0YWxhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ2F0YWxhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDYXVjYXNpYW4gKE90aGVyKVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ2F1Y2FzaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNlYnVhbm9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNlYnVhbm9cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ2VsdGljIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNlbHRpY1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDZW50cmFsIEFtZXJpY2FuIEluZGlhbiAoT3RoZXIpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDZW50cmFsIEFtZXJpY2FuIEluZGlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDaGFnYXRhaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ2hhZ2F0YWlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ2hhbWljIExhbmd1YWdlc1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ2hhbWljIExhbmd1YWdlc1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDaGFtb3Jyb1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ2hhbW9ycm9cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ2hlY2hlblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ2hlY2hlblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDaGVyb2tlZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ2hlcm9rZWVcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ2hleWVubmVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNoZXllbm5lXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNoaWJjaGFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNoaWJjaGFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ2hpY2hld2FcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNoaWNoZXdhXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNoaW5lc2VcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNoaW5lc2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ2hpbm9vayBKYXJnb25cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNoaW5vb2sgSmFyZ29uXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNoaXBld3lhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ2hpcGV3eWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNob2N0YXdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNob2N0YXdcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ2h1dWtlc2VcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNodXVrZXNlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNodXZhc2hcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNodXZhc2hcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ2xhc3NpY2FsIE5lcGFsIEJoYXNhXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDbGFzc2ljYWwgTmVwYWwgQmhhc2FcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ29wdGljXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDb3B0aWNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ29ybmlzaFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ29ybmlzaFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDb3JzaWNhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ29yc2ljYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ3JlZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ3JlZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDcmVla1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiQ3JlZWtcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ3Jlb2xlcyBBbmQgUGlkZ2lucyAoT3RoZXIpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDcmVvbGVzICYgUGlkZ2luc1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJDcmVvbGVzIEFuZCBQaWRnaW5zLCBFbmdsaXNoLUJhc2VkIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNyZW9sZXMgJiBQaWRnaW5zLCBFTkctQmFzZWRcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ3Jlb2xlcyBBbmQgUGlkZ2lucywgRnJlbmNoLUJhc2VkIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNyZW9sZXMgJiBQaWRnaW5zLCBGUkUtQmFzZWRcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ3Jlb2xlcyBBbmQgUGlkZ2lucywgUG9ydHVndWVzZS1CYXNlZCAoT3RoZXIpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDcmVvbGVzICYgUGlkZ2lucywgUE9SLUJhc2VkXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNyaW1lYW4gVGF0YXJcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNyaW1lYW4gVGF0YXJcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiQ3JvYXRpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkNyb2F0aWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkN1c2hpdGljIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkN1c2hpdGljXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkN6ZWNoXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJDemVjaFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJEYWtvdGFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkRha290YVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJEYW5pc2hcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkRhbmlzaFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJEYXJnd2FcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkRhcmd3YVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJEYXlha1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRGF5YWtcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRGVsYXdhcmVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkRlbGF3YXJlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkRoaXZlaGlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkRoaXZlaGlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRGlua2FcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkRpbmthXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkRvZ3JpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJEb2dyaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJEb2dyaWJcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkRvZ3JpYlwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJEcmF2aWRpYW4gKE90aGVyKVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRHJhdmlkaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkR1YWxhXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJEdWFsYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJEdXRjaFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRHV0Y2hcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRHl1bGFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkR5dWxhXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkR6b25na2hhXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJEem9uZ2toYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJFYXN0ZXJuIEZyaXNpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkVhc3Rlcm4gRnJpc2lhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJFZmlrXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJFZmlrXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkVneXB0aWFuIChBbmNpZW50KVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRWd5cHRpYW4gKEFuY2llbnQpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkVrYWp1a1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRWthanVrXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkVsYW1pdGVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkVsYW1pdGVcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRXJ6eWFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkVyenlhXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkVzcGVyYW50b1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRXNwZXJhbnRvXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkVzdG9uaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJFc3RvbmlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJFd2VcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkV3ZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJFd29uZG9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkV3b25kb1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJGYW5nXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJGYW5nXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkZhbnRpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJGYW50aVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJGYXJvZXNlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJGYXJvZXNlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkZpamlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRmlqaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkZpbGlwaW5vOyBQaWxpcGlub1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRmlsaXBpbm87IFBpbGlwaW5vXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkZpbm5pc2hcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkZpbm5pc2hcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRmlubm8tVWdyaWFuIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkZpbm5vLVVncmlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJGb25cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkZvblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJGcml1bGlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRnJpdWxpYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiRnVsYWhcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkZ1bGFoXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdhXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJHYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJHYWVsaWNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdhZWxpY1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJHYWxsZWdhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiR2FsbGVnYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR2FuZGFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdhbmRhXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdheW9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdheW9cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR2JheWFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdiYXlhXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdlZXpcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdlZXpcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR2VvcmdpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdlb3JnaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdlcm1hblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiR2VybWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdlcm1hbmljIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdlcm1hbmljXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdpa3V5dVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiR2lrdXl1XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdpbGJlcnRlc2VcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdpbGJlcnRlc2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiR29uZGlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdvbmRpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdvcm9udGFsb1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiR29yb250YWxvXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdvdGhpY1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiR290aGljXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkdyZWJvXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJHcmVib1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJHcmVlaywgTW9kZXJuICgxNDUzLSlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkdyZWVrLCBNb2Rlcm4gKDE0NTMtKVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJHdWFyYW5pXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJHdWFyYW5pXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkd1amFyYXRpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJHdWphcmF0aVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJHd2ljaCdpblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiR3dpY2gnaW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSGFpZGFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkhhaWRhXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkhhaXRpYW4gQ3Jlb2xlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJIYWl0aWFuIENyZW9sZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJIYXVzYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSGF1c2FcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSGF3YWlpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkhhd2FpaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkhlYnJld1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSGVicmV3XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkhlcmVyb1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSGVyZXJvXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkhpbGlnYXlub25cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkhpbGlnYXlub25cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSGltYWNoYWxpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJIaW1hY2hhbGlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSGluZGlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkhpbmRpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkhpcmkgTW90dVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSGlyaSBNb3R1XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkhpdHRpdGVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkhpdHRpdGVcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSG1vbmdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkhtb25nXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkh1bmdhcmlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSHVuZ2FyaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkh1cGFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkh1cGFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSWJhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSWJhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJJY2VsYW5kaWNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkljZWxhbmRpY1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJJZG9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIklkb1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJJZ2JvXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJZ2JvXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIklqb1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSWpvXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIklsb2tvXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJbG9rb1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJJbmFyaSBTYW1pXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJbmFyaSBTYW1pXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkluZGljIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkluZGljXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkluZG8tRXVyb3BlYW4gKE90aGVyKVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSW5kby1FdXJvcGVhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJJbmRvbmVzaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJbmRvbmVzaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkluZ3VzaFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSW5ndXNoXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkludGVybGluZ3VhIChJbnRlcm5hdGlvbmFsIEF1eGlsaWFyeSBMYW5nLiBBc3NvYy4pXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJbnRlcmxpbmd1YSAoSUFMQSlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSW50ZXJsaW5ndWVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkludGVybGluZ3VlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkludWt0aXR1dFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiSW51a3RpdHV0XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkludXBpYXFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkludXBpYXFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSXJhbmlhbiAoT3RoZXIpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJcmFuaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIklyaXNoXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJcmlzaFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJJcm9xdW9pYW4gTGFuZ3VhZ2VzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJcm9xdW9pYW4gTGFuZ3VhZ2VzXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkl0YWxpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkl0YWxpYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSmFwYW5lc2VcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkphcGFuZXNlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkphdmFuZXNlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJKYXZhbmVzZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJKdWRlby1BcmFiaWNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkp1ZGVvLUFyYWJpY1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJKdWRlby1QZXJzaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJKdWRlby1QZXJzaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkthYmFyZGlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2FiYXJkaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkthYnlsZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2FieWxlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkthY2hpblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2FjaGluXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkthbGFhbGxpc3V0XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJLYWxhYWxsaXN1dFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLYWxteWtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkthbG15a1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLYW1iYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2FtYmFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiS2FubmFkYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2FubmFkYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLYW51cmlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkthbnVyaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLYXJhLUthbHBha1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2FyYS1LYWxwYWtcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiS2FyYWNoYXktQmFsa2FyXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJLYXJhY2hheS1CYWxrYXJcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiS2FyZWxpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkthcmVsaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkthcmVuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJLYXJlblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLYXNobWlyaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2FzaG1pcmlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiS2FzaHViaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJLYXNodWJpYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiS2F3aVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2F3aVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLYXpha2hcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkthemFraFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLaGFzaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2hhc2lcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiS2htZXJcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIktobWVyXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIktob2lzYW4gKE90aGVyKVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2hvaXNhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLaG90YW5lc2VcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIktob3RhbmVzZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLaW1idW5kdVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2ltYnVuZHVcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiS2lueWFyd2FuZGFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIktpbnlhcndhbmRhXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIktpcmdoaXpcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIktpcmdoaXpcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiS2xpbmdvblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS2xpbmdvblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLb21pXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJLb21pXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIktvbmdvXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJLb25nb1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLb25rYW5pXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJLb25rYW5pXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIktvcmVhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS29yZWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIktvc3JhZWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJLb3NyYWVhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLcGVsbGVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIktwZWxsZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLcnVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIktydVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLdW15a1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS3VteWtcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiS3VyZGlzaFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiS3VyZGlzaFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLdXJ1a2hcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkt1cnVraFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJLdXRlbmFpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJLdXRlbmFpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkt3YW55YW1hXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJLd2FueWFtYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJMYWRpbm9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxhZGlub1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJMYWhuZGFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxhaG5kYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJMYW1iYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTGFtYmFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTGFvXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJMYW9cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTGF0aW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxhdGluXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkxhdHZpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxhdHZpYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTGV6Z2hpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxlemdoaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkxpbWJ1cmdpc2hcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxpbWJ1cmdpc2hcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTGluZ2FsYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTGluZ2FsYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJMaXRodWFuaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJMaXRodWFuaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkxvamJhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTG9qYmFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkxvdyBHZXJtYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxvdyBHZXJtYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTG93ZXIgU29yYmlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTG93ZXIgU29yYmlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJMb3ppXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJMb3ppXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkx1YmEtS2F0YW5nYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTHViYS1LYXRhbmdhXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkx1YmEtTHVsdWFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkx1YmEtTHVsdWFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTHVpc2Vub1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTHVpc2Vub1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJMdWxlIFNhbWlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkx1bGUgU2FtaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJMdW5kYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTHVuZGFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTHVvIChLZW55YSBBbmQgVGFuemFuaWEpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJMdW8gKEtlbnlhICYgVGFuemFuaWEpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkx1c2hhaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTHVzaGFpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkx1eGVtYm91cmdpc2hcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkx1eGVtYm91cmdpc2hcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTWFjZWRvbmlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTWFjZWRvbmlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNYWR1cmVzZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTWFkdXJlc2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTWFnYWhpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNYWdhaGlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTWFpdGhpbGlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1haXRoaWxpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1ha2FzYXJcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1ha2FzYXJcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTWFsYWdhc3lcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1hbGFnYXN5XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1hbGF5XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNYWxheVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNYWxheWFsYW1cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1hbGF5YWxhbVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNYWx0ZXNlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNYWx0ZXNlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1hbmNodVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTWFuY2h1XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1hbmRhclwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTWFuZGFyXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1hbmRhcmluXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNYW5kYXJpblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNYW5kaW5nb1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTWFuZGluZ29cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTWFuaXB1cmlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1hbmlwdXJpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1hbm9ibyBMYW5ndWFnZXNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1hbm9ibyBMYW5ndWFnZXNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTWFueFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTWFueFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNYW9yaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTWFvcmlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTWFyYXRoaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTWFyYXRoaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNYXJpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNYXJpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1hcnNoYWxsXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNYXJzaGFsbFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNYXJ3YXJpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNYXJ3YXJpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1hc2FpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNYXNhaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNYXlhbiBMYW5ndWFnZXNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1heWFuIExhbmd1YWdlc1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNZW5kZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTWVuZGVcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTWljbWFjXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNaWNtYWNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTWluYW5na2FiYXVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1pbmFuZ2thYmF1XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1pcmFuZGVzZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTWlyYW5kZXNlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1pc2NlbGxhbmVvdXMgTGFuZ3VhZ2VzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNaXNjZWxsYW5lb3VzIExhbmd1YWdlc1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNb2hhd2tcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1vaGF3a1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNb2tzaGFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1va3NoYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNb2xkYXZpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1vbGRhdmlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNb24tS2htZXIgKE90aGVyKVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTW9uLUtobWVyXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk1vbmdvXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNb25nb1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNb25nb2xpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk1vbmdvbGlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJNb3NzaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTW9zc2lcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTXVsdGlwbGUgTGFuZ3VhZ2VzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNdWx0aXBsZSBMYW5ndWFnZXNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTXVuZGEgTGFuZ3VhZ2VzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNdW5kYSBMYW5ndWFnZXNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTidLb1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTidLb1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOYWh1YXRsXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOYWh1YXRsXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5hdXJ1XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOYXVydVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOYXZham9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5hdmFqb1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOZG9uZ2FcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5kb25nYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOZWFwb2xpdGFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOZWFwb2xpdGFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5lcGFsIEJoYXNhXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOZXBhbCBCaGFzYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOZXBhbGlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5lcGFsaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOaWFzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOaWFzXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5pZ2VyLUtvcmRvZmFuaWFuIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5pZ2VyLUtvcmRvZmFuaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5pbG8tU2FoYXJhbiAoT3RoZXIpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOaWxvLVNhaGFyYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTml1ZWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOaXVlYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTm9nYWlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5vZ2FpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5vcnNlLCBPbGRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5vcnNlLCBPbGRcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTm9ydGggQW1lcmljYW4gSW5kaWFuIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5vcnRoIEFtZXJpY2FuIEluZGlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOb3J0aCBOZGViZWxlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOb3J0aCBOZGViZWxlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk5vcnRoZXJuIEZyaXNpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5vcnRoZXJuIEZyaXNpYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTm9ydGhlcm4gU2FtaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTm9ydGhlcm4gU2FtaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOb3J0aGVybiBTb3Rob1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTm9ydGhlcm4gU290aG9cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTm9yd2VnaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOb3J3ZWdpYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTm9yd2VnaWFuIE55bm9yc2tcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5vcndlZ2lhbiBOeW5vcnNrXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk51YmlhbiBMYW5ndWFnZXNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk51YmlhbiBMYW5ndWFnZXNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTnlhbXdlemlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk55YW13ZXppXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk55YW5rb2xlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJOeWFua29sZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJOeW9yb1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTnlvcm9cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiTnppbWFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk56aW1hXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk9jY2l0YW4gKFBvc3QgMTUwMClcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk9jY2l0YW4gKFBvc3QgMTUwMClcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiT2ppYndhXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJPamlid2FcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiT2xkIENodXJjaCBTbGF2b25pY1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiT2xkIENodXJjaCBTbGF2b25pY1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJPcml5YVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiT3JpeWFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiT3JvbW9cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk9yb21vXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk9zYWdlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJPc2FnZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJPc3NldGljXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJPc3NldGljXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIk90b21pYW4gTGFuZ3VhZ2VzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJPdG9taWFuIExhbmd1YWdlc1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQYWhsYXZpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQYWhsYXZpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlBhbGF1YW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBhbGF1YW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUGFsaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUGFsaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQYW1wYW5nYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUGFtcGFuZ2FcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUGFuZ2FzaW5hblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUGFuZ2FzaW5hblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQYXBpYW1lbnRvXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQYXBpYW1lbnRvXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlBhcHVhbiAoT3RoZXIpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQYXB1YW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUGVyc2lhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUGVyc2lhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQaGlsaXBwaW5lIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBoaWxpcHBpbmVcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUGhvZW5pY2lhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUGhvZW5pY2lhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQb2hucGVpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBvaG5wZWlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQb2xpc2hcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBvbGlzaFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQb3J0dWd1ZXNlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQb3J0dWd1ZXNlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlByYWtyaXQgTGFuZ3VhZ2VzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQcmFrcml0IExhbmd1YWdlc1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJQdW5qYWJpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQdW5qYWJpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlB1c2h0b1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUHVzaHRvXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlF1ZWNodWFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlF1ZWNodWFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUmFldG8tUm9tYW5jZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUmFldG8tUm9tYW5jZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJSYWphc3RoYW5pXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJSYWphc3RoYW5pXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlJhcGFudWlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlJhcGFudWlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUmFyb3RvbmdhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUmFyb3RvbmdhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJSb21hbmNlIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlJvbWFuY2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiUm9tYW5pYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlJvbWFuaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlJvbWFueVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUm9tYW55XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlJ1bmRpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJSdW5kaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJSdXNzaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJSdXNzaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNhbGlzaGFuIExhbmd1YWdlc1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU2FsaXNoYW4gTGFuZ3VhZ2VzXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNhbWFyaXRhbiBBcmFtYWljXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTYW1hcml0YW4gQXJhbWFpY1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTYW1pIExhbmd1YWdlc1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU2FtaSBMYW5ndWFnZXNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2Ftb2FuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTYW1vYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2FuZGF3ZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU2FuZGF3ZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTYW5nb1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU2FuZ29cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2Fuc2tyaXRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNhbnNrcml0XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNhbnRhbGlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNhbnRhbGlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2FyZGluaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTYXJkaW5pYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2FzYWtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNhc2FrXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNjb3RzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTY290c1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTZWxrdXBcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNlbGt1cFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTZW1pdGljIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNlbWl0aWNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2VyYmlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU2VyYmlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTZXJlclwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU2VyZXJcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2hhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU2hhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTaG9uYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU2hvbmFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2ljaHVhbiBZaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU2ljaHVhbiBZaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTaWNpbGlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU2ljaWxpYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2lkYW1vXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTaWRhbW9cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2lnbiBMYW5ndWFnZXNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNpZ24gTGFuZ3VhZ2VzXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNpa3Npa2FcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNpa3Npa2FcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2luZGhpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTaW5kaGlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2luaGFsZXNlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTaW5oYWxlc2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2luby1UaWJldGFuIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNpbm8tVGliZXRhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTaW91YW4gTGFuZ3VhZ2VzXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTaW91YW4gTGFuZ3VhZ2VzXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNrb2x0IFNhbWlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNrb2x0IFNhbWlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2xhdmUgKEF0aGFwYXNjYW4pXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTbGF2ZSAoQXRoYXBhc2NhbilcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU2xhdmljIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNsYXZpY1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTbG92YWtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNsb3Zha1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTbG92ZW5pYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNsb3ZlbmlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTb2dkaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTb2dkaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNvbWFsaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU29tYWxpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNvbmdoYWlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNvbmdoYWlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU29uaW5rZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU29uaW5rZVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTb3JiaWFuIExhbmd1YWdlc1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU29yYmlhbiBMYW5ndWFnZXNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU290aG8sIFNvdXRoZXJuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTb3RobywgU291dGhlcm5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU291dGggQW1lcmljYW4gSW5kaWFuIChPdGhlcilcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlNvdXRoIEFtZXJpY2FuIEluZGlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTb3V0aCBOZGViZWxlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTb3V0aCBOZGViZWxlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNvdXRoZXJuIEFsdGFpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTb3V0aGVybiBBbHRhaVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTb3V0aGVybiBTYW1pXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTb3V0aGVybiBTYW1pXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNwYW5pc2g7IENhc3RpbGlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU3BhbmlzaDsgQ2FzdGlsaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlNyYW5hbiBUb2dvXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTcmFuYW4gVG9nb1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTdWt1bWFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlN1a3VtYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTdW1lcmlhblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU3VtZXJpYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU3VuZGFuZXNlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTdW5kYW5lc2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiU3VzdVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU3VzdVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTd2FoaWxpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTd2FoaWxpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlN3YXRpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTd2F0aVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJTd2VkaXNoXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJTd2VkaXNoXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlN3aXNzIEdlcm1hblwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU3dpc3MgR2VybWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlN5cmlhY1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiU3lyaWFjXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRhZ2Fsb2dcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRhZ2Fsb2dcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVGFoaXRpYW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRhaGl0aWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRhaSAoT3RoZXIpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUYWlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVGFqaWtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRhamlrXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRhbWFzaGVrXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUYW1hc2hla1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUYW1pbFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVGFtaWxcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVGF0YXJcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRhdGFyXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRlbHVndVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVGVsdWd1XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRlcmVub1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVGVyZW5vXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRldHVtXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUZXR1bVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUaGFpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUaGFpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRpYmV0YW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRpYmV0YW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVGlncmVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRpZ3JlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRpZ3JpbnlhXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUaWdyaW55YVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUaW1uZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVGltbmVcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVGl2XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUaXZcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVGxpbmdpdFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVGxpbmdpdFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUb2sgUGlzaW5cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRvayBQaXNpblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUb2tlbGF1XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUb2tlbGF1XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlRvbmdhIChOeWFzYSlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRvbmdhIChOeWFzYSlcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVG9uZ2EgKFRvbmdhIElzbGFuZHMpXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUb25nYSAoVG9uZ2EgSXNsYW5kcylcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVHNpbXNoaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUc2ltc2hpYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVHNvbmdhXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUc29uZ2FcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVHN3YW5hXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUc3dhbmFcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVHVtYnVrYVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVHVtYnVrYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUdXBpIExhbmd1YWdlc1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVHVwaSBMYW5ndWFnZXNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVHVya2lzaFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVHVya2lzaFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUdXJrbWVuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUdXJrbWVuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlR1dmFsdVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVHV2YWx1XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlR1dmluaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUdXZpbmlhblwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJUd2lcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlR3aVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVZG11cnRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVkbXVydFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVZ2FyaXRpY1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVWdhcml0aWNcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVWtyYWluaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVa3JhaW5pYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVW1idW5kdVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVW1idW5kdVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVbmRldGVybWluZWRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVuZGV0ZXJtaW5lZFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJVcHBlciBTb3JiaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVcHBlciBTb3JiaWFuXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlVyZHVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlVyZHVcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVXlnaHVyXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJVeWdodXJcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVXpiZWtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlV6YmVrXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlZhaVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVmFpXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlZlbmRhXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJWZW5kYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJWaWV0bmFtZXNlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJWaWV0bmFtZXNlXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlZvbGFwdWtcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlZvbGFwdWtcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiVm90aWNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlZvdGljXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIldha2FzaGFuIExhbmd1YWdlc1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiV2FrYXNoYW4gTGFuZ3VhZ2VzXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIldhbGFtb1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiV2FsYW1vXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIldhbGxvb25cIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIldhbGxvb25cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiV2FyYXlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIldhcmF5XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIldhc2hvXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJXYXNob1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJXZWxzaFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiV2Vsc2hcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiV2VzdGVybiBGcmlzaWFuXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJXZXN0ZXJuIEZyaXNpYW5cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiV29sb2ZcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIldvbG9mXCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlhob3NhXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJYaG9zYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJZYWt1dFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiWWFrdXRcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiWWFvXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJZYW9cIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiWWFwZXNlXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJZYXBlc2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiWWlkZGlzaFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiWWlkZGlzaFwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJZb3J1YmFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIllvcnViYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJZdXBpayBMYW5ndWFnZXNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIll1cGlrIExhbmd1YWdlc1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJaYW5kZVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiWmFuZGVcIlxuXHRcdFx0fSk7XG5cdFx0XHRsYW5ncy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiWmFwb3RlY1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiWmFwb3RlY1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJaYXpha2lcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlphemFraVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJaZW5hZ2FcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlplbmFnYVwiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJaaHVhbmdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlpodWFuZ1wiXG5cdFx0XHR9KTtcblx0XHRcdGxhbmdzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJadWx1XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJadWx1XCJcblx0XHRcdH0pO1xuXHRcdFx0bGFuZ3MucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlp1bmlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlp1bmlcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gbGFuZ3M7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0Um9zdGVyVGVybWluYXRpb25SZWFzb25zID0gZnVuY3Rpb24gZ2V0Um9zdGVyVGVybWluYXRpb25SZWFzb25zKClcblx0XHR7XG5cdFx0XHR2YXIgcmVhc29ucyA9IFtdO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiMzlcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkFzc2lnbmVkIG1lbWJlciBzdGF0dXMgZW5kZWQ7IHJvc3RlciB0cmFuc2ZlcnJlZCBwZXIgcGh5c2ljaWFuIHJlcXVlc3RcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZWFzb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCI1OVwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRW5yb2xtZW50IGVuZGVkOyBwYXRpZW50IG91dCBvZiBnZW9ncmFwaGljIGFyZWFcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZWFzb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCI1N1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiRW5yb2xtZW50IHRlcm1pbmF0ZWQgYnkgcGF0aWVudFwiXG5cdFx0XHR9KTtcblx0XHRcdHJlYXNvbnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIjEyXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJIZWFsdGggTnVtYmVyIGVycm9yXCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiMzhcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIkxvbmcgVGVybSBDYXJlIGVucm9sbWVudCBlbmRlZDsgcGF0aWVudCBoYXMgbGVmdCBMb25nIFRlcm0gQ2FyZVwiXG5cdFx0XHR9KTtcblx0XHRcdHJlYXNvbnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIjgyXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJNaW5pc3RyeSBoYXMgbm90IHJlY2VpdmVkIGVucm9sbWVudC8gQ29uc2VudCBmb3JtXCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiNjBcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk5vIGN1cnJlbnQgZWxpZ2liaWxpdHlcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZWFzb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCI3M1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiTm8gY3VycmVudCBlbGlnaWJpbGl0eVwiXG5cdFx0XHR9KTtcblx0XHRcdHJlYXNvbnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIjc0XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJObyBjdXJyZW50IGVsaWdpYmlsaXR5XCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiMzdcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIk9yaWdpbmFsIGVucm9sbWVudCBlbmRlZDsgcGF0aWVudCBub3cgZW5yb2xsZWQgYXMgTG9uZyBUZXJtIENhcmVcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZWFzb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCIzNlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiT3JpZ2luYWwgZW5yb2xtZW50IGVuZGVkOyBwYXRpZW50IG5vdyByZS1lbnJvbGVkXCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiMjRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBhdGllbnQgYWRkZWQgdG8gcm9zdGVyIGluIGVycm9yXCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiMTRcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBhdGllbnQgaWRlbnRpZmllZCBhcyBkZWNlYXNlZCBvbiBtaW5pc3RyeSBkYXRhYmFzZVwiXG5cdFx0XHR9KTtcblx0XHRcdHJlYXNvbnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIjUxXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQYXRpZW50IG5vIGxvbmdlciBtZWV0cyBzZWxlY3Rpb24gY3JpdGVyaWEgZm9yIHlvdXIgcm9zdGVyXCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiNDFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBhdGllbnQgbm8gbG9uZ2VyIG1lZXRzIHNlbGVjdGlvbiBjcml0ZXJpYSBmb3IgeW91ciByb3N0ZXIgLSBhc3NpZ25lZCB0byBhbm90aGVyIHBoeXNpY2lhblwiXG5cdFx0XHR9KTtcblx0XHRcdHJlYXNvbnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIjYxXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQYXRpZW50IG91dCBvZiBnZW9ncmFwaGljIGFyZWE7IGFkZHJlc3Mgb3Zlci1yaWRlIGFwcGxpZWRcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZWFzb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCI2MlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUGF0aWVudCBvdXQgb2YgZ2VvZ3JhcGhpYyBhcmVhOyBhZGRyZXNzIG92ZXItcmlkZSByZW1vdmVkXCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiMzVcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBhdGllbnQgdHJhbnNmZXJyZWQgZnJvbSByb3N0ZXIgcGVyIHBoeXNpY2lhbiByZXF1ZXN0XCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiNDJcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBoeXNpY2lhbiBlbmRlZCBlbnJvbG1lbnQ7IHBhdGllbnQgZW50ZXJlZCBMb25nIFRlcm0gQ2FyZSBmYWNpbGl0eVwiXG5cdFx0XHR9KTtcblx0XHRcdHJlYXNvbnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIjU0XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJQaHlzaWNpYW4gZW5kZWQgZW5yb2xtZW50OyBwYXRpZW50IGxlZnQgcHJvdmluY2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZWFzb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCI1M1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUGh5c2ljaWFuIGVuZGVkIGVucm9sbWVudDsgcGF0aWVudCBtb3ZlZCBvdXQgb2YgZ2VvZ3JhcGhpYyBhcmVhXCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiNTZcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBoeXNpY2lhbiBlbmRlZCBlbnJvbG1lbnQ7IHBlciBwYXRpZW50IHJlcXVlc3RcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZWFzb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCI0NFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUGh5c2ljaWFuIGVuZGVkIHBhdGllbnQgZW5yb2xtZW50XCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiNDBcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlBoeXNpY2lhbiByZXBvcnRlZCBtZW1iZXIgYXMgZGVjZWFzZWRcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZWFzb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCIzMlwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiUHJlLW1lbWJlci8gQXNzaWduZWQgbWVtYmVyIGVuZGVkOyBub3cgZW5yb2xsZWQgb3IgcmVnaXN0ZXJlZCB3aXRoIHBob3RvIGhlYWx0aCBjYXJkXCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiMzBcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlByZS1tZW1iZXIvIEFzc2lnbmVkIG1lbWJlciBlbmRlZDsgbm93IGVucm9sbGVkIG9yIHJlZ2lzdGVyZWQgd2l0aCByZWQgYW5kIHdoaXRlIGhlYWx0aCBjYXJkXCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiMzNcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRlcm1pbmF0aW9uIHJlYXNvbiBjYW5ub3QgYmUgcmVsZWFzZWQgKGR1ZSB0byBwYXRpZW50IGNvbmZpZGVudGlhbGl0eSlcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZWFzb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCI4NFwiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiVGVybWluYXRpb24gcmVhc29uIGNhbm5vdCBiZSByZWxlYXNlZCAoZHVlIHRvIHBhdGllbnQgY29uZmlkZW50aWFsaXR5KVwiXG5cdFx0XHR9KTtcblx0XHRcdHJlYXNvbnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIjkwXCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJUZXJtaW5hdGlvbiByZWFzb24gY2Fubm90IGJlIHJlbGVhc2VkIChkdWUgdG8gcGF0aWVudCBjb25maWRlbnRpYWxpdHkpXCJcblx0XHRcdH0pO1xuXHRcdFx0cmVhc29ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiOTFcIixcblx0XHRcdFx0XCJsYWJlbFwiOiBcIlRlcm1pbmF0aW9uIHJlYXNvbiBjYW5ub3QgYmUgcmVsZWFzZWQgKGR1ZSB0byBwYXRpZW50IGNvbmZpZGVudGlhbGl0eSlcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcmVhc29ucztcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRTZWN1cml0eVF1ZXN0aW9ucyA9IGZ1bmN0aW9uIGdldFNlY3VyaXR5UXVlc3Rpb25zKClcblx0XHR7XG5cdFx0XHR2YXIgcXVlc3Rpb25zID0gW107XG5cdFx0XHRxdWVzdGlvbnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIldoYXQgd2FzIHRoZSBuYW1lIG9mIHlvdXIgaGlnaCBzY2hvb2w/XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJXaGF0IHdhcyB0aGUgbmFtZSBvZiB5b3VyIGhpZ2ggc2Nob29sP1wiXG5cdFx0XHR9KTtcblx0XHRcdHF1ZXN0aW9ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiV2hhdCBpcyB5b3VyIHNwb3VzZSdzIG1haWRlbiBuYW1lP1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiV2hhdCBpcyB5b3VyIHNwb3VzZSdzIG1haWRlbiBuYW1lP1wiXG5cdFx0XHR9KTtcblx0XHRcdHF1ZXN0aW9ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiV2hhdCBpcyB0aGUgbmFtZSBvZiB0aGUgc3RyZWV0IHlvdSBncmV3IHVwIG9uP1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiV2hhdCBpcyB0aGUgbmFtZSBvZiB0aGUgc3RyZWV0IHlvdSBncmV3IHVwIG9uP1wiXG5cdFx0XHR9KTtcblx0XHRcdHF1ZXN0aW9ucy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IFwiSW4gd2hhdCBjaXR5IHdlcmUgeW91IGJvcm4/XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJJbiB3aGF0IGNpdHkgd2VyZSB5b3UgYm9ybj9cIlxuXHRcdFx0fSk7XG5cdFx0XHRxdWVzdGlvbnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIldoYXQgaXMgdGhlIG1pZGRsZSBuYW1lIG9mIHlvdXIgb2xkZXN0IGNoaWxkP1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiV2hhdCBpcyB0aGUgbWlkZGxlIG5hbWUgb2YgeW91ciBvbGRlc3QgY2hpbGQ/XCJcblx0XHRcdH0pO1xuXHRcdFx0cXVlc3Rpb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJXaGF0IGlzIHlvdXIgb2xkZXN0IGNvdXNpbidzIGZpcnN0IG5hbWU/XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJXaGF0IGlzIHlvdXIgb2xkZXN0IGNvdXNpbidzIGZpcnN0IG5hbWU/XCJcblx0XHRcdH0pO1xuXHRcdFx0cXVlc3Rpb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJXaGF0IGlzIHlvdXIgbW90aGVyJ3MgbWlkZGxlIG5hbWU/XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJXaGF0IGlzIHlvdXIgbW90aGVyJ3MgbWlkZGxlIG5hbWU/XCJcblx0XHRcdH0pO1xuXHRcdFx0cXVlc3Rpb25zLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdFwidmFsdWVcIjogXCJXaGF0IGlzIHlvdXIgZ3JhbmRtb3RoZXIncyBmaXJzdCBuYW1lP1wiLFxuXHRcdFx0XHRcImxhYmVsXCI6IFwiV2hhdCBpcyB5b3VyIGdyYW5kbW90aGVyJ3MgZmlyc3QgbmFtZT9cIlxuXHRcdFx0fSk7XG5cdFx0XHRxdWVzdGlvbnMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiBcIldoYXQgeWVhciBkaWQgeW91IGdyYWR1YXRlIGZyb20gaGlnaCBzY2hvb2w/XCIsXG5cdFx0XHRcdFwibGFiZWxcIjogXCJXaGF0IHllYXIgZGlkIHlvdSBncmFkdWF0ZSBmcm9tIGhpZ2ggc2Nob29sP1wiXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBxdWVzdGlvbnM7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0Q29uc3VsdFVyZ2VuY2llcyA9IGZ1bmN0aW9uIGdldENvbnN1bHRVcmdlbmNpZXMoKVxuXHRcdHtcblx0XHRcdHZhciB1cmdlbmNpZXMgPSBbXTtcblx0XHRcdHVyZ2VuY2llcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHR2YWx1ZTogXCIyXCIsXG5cdFx0XHRcdG5hbWU6IFwiTm9uLVVyZ2VudFwiXG5cdFx0XHR9KTtcblx0XHRcdHVyZ2VuY2llcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHR2YWx1ZTogXCIxXCIsXG5cdFx0XHRcdG5hbWU6IFwiVXJnZW50XCJcblx0XHRcdH0pO1xuXHRcdFx0dXJnZW5jaWVzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiBcIjNcIixcblx0XHRcdFx0bmFtZTogXCJSZXR1cm5cIlxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gdXJnZW5jaWVzO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldENvbnN1bHRSZXF1ZXN0U3RhdHVzZXMgPSBmdW5jdGlvbiBnZXRDb25zdWx0UmVxdWVzdFN0YXR1c2VzKClcblx0XHR7XG5cdFx0XHR2YXIgc3RhdHVzZXMgPSBbXTtcblx0XHRcdHN0YXR1c2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiBcIjFcIixcblx0XHRcdFx0bmFtZTogXCJOb3QgQ29tcGxldGVcIlxuXHRcdFx0fSk7XG5cdFx0XHRzdGF0dXNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHR2YWx1ZTogXCIyXCIsXG5cdFx0XHRcdG5hbWU6IFwiUHJlbGltaW5hcnkgUGVuZGluZyBTcGVjaWFsaXN0XCJcblx0XHRcdH0pO1xuXHRcdFx0c3RhdHVzZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0dmFsdWU6IFwiM1wiLFxuXHRcdFx0XHRuYW1lOiBcIlBlbmRpbmcgQ2FsbGJhY2tcIlxuXHRcdFx0fSk7XG5cdFx0XHRzdGF0dXNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHR2YWx1ZTogXCI0XCIsXG5cdFx0XHRcdG5hbWU6IFwiQ29tcGxldGVkXCJcblx0XHRcdH0pO1xuXHRcdFx0c3RhdHVzZXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0dmFsdWU6IFwiNVwiLFxuXHRcdFx0XHRuYW1lOiBcIkNhbmNlbGxlZFwiXG5cdFx0XHR9KTtcblx0XHRcdHN0YXR1c2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiBcIjZcIixcblx0XHRcdFx0bmFtZTogXCJBcHBvaW50bWVudCBCb29rZWRcIlxuXHRcdFx0fSk7XG5cdFx0XHRzdGF0dXNlcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHR2YWx1ZTogXCI3XCIsXG5cdFx0XHRcdG5hbWU6IFwiRGVsZXRlZFwiXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBzdGF0dXNlcztcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRDb25zdWx0UmVzcG9uc2VTdGF0dXNlcyA9IGZ1bmN0aW9uIGdldENvbnN1bHRSZXNwb25zZVN0YXR1c2VzKClcblx0XHR7XG5cdFx0XHR2YXIgc3RhdHVzZXMgPSBbXTtcblx0XHRcdHN0YXR1c2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiAxLFxuXHRcdFx0XHRuYW1lOiBcIk5vdCBDb21wbGV0ZVwiXG5cdFx0XHR9KTtcblx0XHRcdHN0YXR1c2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiAyLFxuXHRcdFx0XHRuYW1lOiBcIlBlbmRpbmcgUmVmZXJyaW5nIERvY3RvciBDYWxsYmFja1wiXG5cdFx0XHR9KTtcblx0XHRcdHN0YXR1c2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiAzLFxuXHRcdFx0XHRuYW1lOiBcIlBlbmRpbmcgUGF0aWVudCBDYWxsYmFja1wiXG5cdFx0XHR9KTtcblx0XHRcdHN0YXR1c2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiA0LFxuXHRcdFx0XHRuYW1lOiBcIkNvbXBsZXRlZFwiXG5cdFx0XHR9KTtcblx0XHRcdHN0YXR1c2VzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiA1LFxuXHRcdFx0XHRuYW1lOiBcIkNhbmNlbGxlZFwiXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBzdGF0dXNlcztcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRIb3VycyA9IGZ1bmN0aW9uIGdldEhvdXJzKClcblx0XHR7XG5cdFx0XHRyZXR1cm4gW1wiMDBcIiwgXCIwMVwiLCBcIjAyXCIsIFwiMDNcIiwgXCIwNFwiLCBcIjA1XCIsIFwiMDZcIiwgXCIwN1wiLCBcIjA4XCIsIFwiMDlcIiwgXCIxMFwiLCBcIjExXCIsIFwiMTJcIixcblx0XHRcdFx0XCIxM1wiLCBcIjE0XCIsIFwiMTVcIiwgXCIxNlwiLCBcIjE3XCIsIFwiMThcIiwgXCIxOVwiLCBcIjIwXCIsIFwiMjFcIiwgXCIyMlwiLCBcIjIzXCJcblx0XHRcdF07XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0TWludXRlcyA9IGZ1bmN0aW9uIGdldE1pbnV0ZXMoKVxuXHRcdHtcblx0XHRcdHJldHVybiBbXCIwMFwiLCBcIjAxXCIsIFwiMDJcIiwgXCIwM1wiLCBcIjA0XCIsIFwiMDVcIiwgXCIwNlwiLCBcIjA3XCIsIFwiMDhcIiwgXCIwOVwiLCBcIjEwXCIsXG5cdFx0XHRcdFwiMTFcIiwgXCIxMlwiLCBcIjEzXCIsIFwiMTRcIiwgXCIxNVwiLCBcIjE2XCIsIFwiMTdcIiwgXCIxOFwiLCBcIjE5XCIsIFwiMjBcIixcblx0XHRcdFx0XCIyMVwiLCBcIjIyXCIsIFwiMjNcIiwgXCIyNFwiLCBcIjI1XCIsIFwiMjZcIiwgXCIyN1wiLCBcIjI4XCIsIFwiMjlcIiwgXCIzMFwiLFxuXHRcdFx0XHRcIjMxXCIsIFwiMzJcIiwgXCIzM1wiLCBcIjM0XCIsIFwiMzVcIiwgXCIzNlwiLCBcIjM3XCIsIFwiMzhcIiwgXCIzOVwiLCBcIjQwXCIsXG5cdFx0XHRcdFwiNDFcIiwgXCI0MlwiLCBcIjQzXCIsIFwiNDRcIiwgXCI0NVwiLCBcIjQ2XCIsIFwiNDdcIiwgXCI0OFwiLCBcIjQ5XCIsIFwiNTBcIixcblx0XHRcdFx0XCI1MVwiLCBcIjUyXCIsIFwiNTNcIiwgXCI1NFwiLCBcIjU1XCIsIFwiNTZcIiwgXCI1N1wiLCBcIjU4XCIsIFwiNTlcIlxuXHRcdFx0XTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRSeEludGVyYWN0aW9uTGV2ZWxzID0gZnVuY3Rpb24gZ2V0UnhJbnRlcmFjdGlvbkxldmVscygpXG5cdFx0e1xuXHRcdFx0dmFyIGxldmVscyA9IFtdO1xuXHRcdFx0bGV2ZWxzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiAwLFxuXHRcdFx0XHRuYW1lOiBcIk5vdCBTcGVjaWZpZWRcIlxuXHRcdFx0fSk7XG5cdFx0XHRsZXZlbHMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0dmFsdWU6IDEsXG5cdFx0XHRcdG5hbWU6IFwiTG93XCJcblx0XHRcdH0pO1xuXHRcdFx0bGV2ZWxzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiAyLFxuXHRcdFx0XHRuYW1lOiBcIk1lZGl1bVwiXG5cdFx0XHR9KTtcblx0XHRcdGxldmVscy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHR2YWx1ZTogMyxcblx0XHRcdFx0bmFtZTogXCJIaWdoXCJcblx0XHRcdH0pO1xuXHRcdFx0bGV2ZWxzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiA0LFxuXHRcdFx0XHRuYW1lOiBcIk5vbmVcIlxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gbGV2ZWxzO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiBNY01hc3RlciBVbml2ZXJzaXR5XG4gSGFtaWx0b25cbiBPbnRhcmlvLCBDYW5hZGFcblxuICovXG5hbmd1bGFyLm1vZHVsZShcIkNvbW1vbi5TZXJ2aWNlc1wiKS5zZXJ2aWNlKFwic3VtbWFyeVNlcnZpY2VcIiwgW1xuXHQnJGh0dHAnLCAnJHEnLFxuXHRmdW5jdGlvbigkaHR0cCwgJHEpXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHt9O1xuXG5cdFx0c2VydmljZS5hcGlQYXRoID0gJy4uL3dzL3JzL3JlY29yZFVYJztcblxuXHRcdHNlcnZpY2UuZ2V0U3VtbWFyeUhlYWRlcnMgPSBmdW5jdGlvbihkZW1vZ3JhcGhpY05vLCBrZXkpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvJyArIGVuY29kZVVSSUNvbXBvbmVudChkZW1vZ3JhcGhpY05vKSArXG5cdFx0XHRcdCcvc3VtbWFyeS8nICsga2V5KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwic3VtbWFyeVNlcnZpY2U6OmdldFN1bW1hcnlIZWFkZXJzIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgc3VtbWFyeSBoZWFkZXJzXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0RnVsbFN1bW1hcnkgPSBmdW5jdGlvbihkZW1vZ3JhcGhpY05vLCBzdW1tYXJ5Q29kZSlcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRlbW9ncmFwaGljTm8pICtcblx0XHRcdFx0Jy9mdWxsU3VtbWFyeS8nICsgc3VtbWFyeUNvZGUpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJzdW1tYXJ5U2VydmljZTo6Z2V0RnVsbFN1bW1hcnkgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBmdWxsIHN1bW1hcnlcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRGYW1pbHlIaXN0b3J5ID0gZnVuY3Rpb24oZGVtb2dyYXBoaWNObylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRlbW9ncmFwaGljTm8pICtcblx0XHRcdFx0Jy9nZXRGYW1pbHlIaXN0b3J5JykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInN1bW1hcnlTZXJ2aWNlOjpnZXRGYW1pbHlIaXN0b3J5IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgZmFtaWx5IGhpc3RvcnlcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRNZWRpY2FsSGlzdG9yeSA9IGZ1bmN0aW9uKGRlbW9ncmFwaGljTm8pXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvJyArIGVuY29kZVVSSUNvbXBvbmVudChkZW1vZ3JhcGhpY05vKSArXG5cdFx0XHRcdCcvZ2V0TWVkaWNhbEhpc3RvcnknKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwic3VtbWFyeVNlcnZpY2U6OmdldE1lZGljYWxIaXN0b3J5IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgbWVkaWNhbCBoaXN0b3J5XCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0U29jaWFsSGlzdG9yeSA9IGZ1bmN0aW9uIGdldFNvY2lhbEhpc3RvcnkoZGVtb2dyYXBoaWNObylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cC5nZXQoc2VydmljZS5hcGlQYXRoICsgJy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRlbW9ncmFwaGljTm8pICtcblx0XHRcdFx0Jy9nZXRTb2NpYWxIaXN0b3J5JykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInN1bW1hcnlTZXJ2aWNlOjpnZXRTb2NpYWxIaXN0b3J5IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgc29jaWFsIGhpc3RvcnlcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRPbmdvaW5nQ29uY2VybnMgPSBmdW5jdGlvbihkZW1vZ3JhcGhpY05vKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoZGVtb2dyYXBoaWNObykgK1xuXHRcdFx0XHQnL2dldE9uZ29pbmdDb25jZXJucycpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJzdW1tYXJ5U2VydmljZTo6Z2V0T25nb2luZ0NvbmNlcm5zIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgb25nb2luZyBjb25jZXJuc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldE90aGVyTWVkcyA9IGZ1bmN0aW9uIGdldE90aGVyTWVkcyhkZW1vZ3JhcGhpY05vKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoZGVtb2dyYXBoaWNObykgK1xuXHRcdFx0XHQnL2dldE90aGVyTWVkcycpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJzdW1tYXJ5U2VydmljZTo6Z2V0T3RoZXJNZWRzIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgb3RoZXIgbWVkc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmdldFJlbWluZGVycyA9IGZ1bmN0aW9uIGdldFJlbWluZGVycyhkZW1vZ3JhcGhpY05vKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoZGVtb2dyYXBoaWNObykgK1xuXHRcdFx0XHQnL2dldFJlbWluZGVycycpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJzdW1tYXJ5U2VydmljZTo6Z2V0UmVtaW5kZXJzIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgcmVtaW5kZXJzXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuZ2V0Umlza0ZhY3RvcnMgPSBmdW5jdGlvbiBnZXRSaXNrRmFjdG9ycyhkZW1vZ3JhcGhpY05vKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoZGVtb2dyYXBoaWNObykgK1xuXHRcdFx0XHQnL2dldFJpc2tGYWN0b3JzJykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInN1bW1hcnlTZXJ2aWNlOjpnZXRSaXNrRmFjdG9ycyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIHJpc2sgZmFjdG9yc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gICAgQ29weXJpZ2h0IChjKSAyMDEyLTIwMTguIENsb3VkUHJhY3RpY2UgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuICAgIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiAgICBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiAgICBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gICAgVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3JcbiAgICBDbG91ZFByYWN0aWNlIEluYy5cbiAgICBWaWN0b3JpYSwgQnJpdGlzaCBDb2x1bWJpYVxuICAgIENhbmFkYVxuXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcInN5c3RlbVByZWZlcmVuY2VTZXJ2aWNlXCIsIFtcblx0JyRxJyxcblx0J2p1bm9IdHRwJyxcblx0ZnVuY3Rpb24oJHEsIGp1bm9IdHRwKVxuXHR7XG5cdFx0dmFyIHNlcnZpY2UgPSB7fTtcblxuXHRcdHNlcnZpY2UuYXBpUGF0aCA9ICcuLi93cy9ycy9zeXN0ZW1QcmVmZXJlbmNlJztcblxuXHRcdHNlcnZpY2UuZ2V0UHJlZmVyZW5jZSA9IGZ1bmN0aW9uIGdldFByZWZlcmVuY2Uoa2V5LCBkZWZhdWx0VmFsdWUpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0XHRcdHZhciBjb25maWcgPSBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKTtcblx0XHRcdGNvbmZpZy5wYXJhbXMgPSB7XG5cdFx0XHRcdGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZVxuXHRcdFx0fTtcblxuXHRcdFx0anVub0h0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvJyArIGtleSwgY29uZmlnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInN5c3RlbVByZWZlcmVuY2VTZXJ2aWNlOjpnZXRQcmVmZXJlbmNlIGVycm9yXCIsIGVycm9yKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIHN5c3RlbSBwcmVmZXJlbmNlIGRhdGFcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2Uuc2V0UHJlZmVyZW5jZSA9IGZ1bmN0aW9uIHNldFByZWZlcmVuY2Uoa2V5LCB2YWx1ZSlcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHRqdW5vSHR0cC5wdXQoc2VydmljZS5hcGlQYXRoICsgJy8nICsga2V5LCB2YWx1ZSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJzeXN0ZW1QcmVmZXJlbmNlU2VydmljZTo6c2V0UHJlZmVyZW5jZSBlcnJvclwiLCBlcnJvcik7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2V0dGluZyBzeXN0ZW0gcHJlZmVyZW5jZSBkYXRhXCIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLmlzUHJlZmVyZW5jZUVuYWJsZWQgPSBmdW5jdGlvbiBpc1ByZWZlcmVuY2VFbmFibGVkKGtleSwgZGVmYXVsdFZhbHVlKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHR2YXIgY29uZmlnID0gSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKCk7XG5cdFx0XHRjb25maWcucGFyYW1zID0ge1xuXHRcdFx0XHRkZWZhdWx0OiBkZWZhdWx0VmFsdWVcblx0XHRcdH07XG5cblx0XHRcdGp1bm9IdHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnLycgKyBrZXkgKyAnL2VuYWJsZWQnLCBjb25maWcpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwic3lzdGVtUHJlZmVyZW5jZVNlcnZpY2U6OmlzUHJlZmVyZW5jZUVuYWJsZWQgZXJyb3JcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGdldHRpbmcgc3lzdGVtIHByZWZlcmVuY2UgZW5hYmxlZCBzdGF0dXNcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiBIYW1pbHRvblxuIE9udGFyaW8sIENhbmFkYVxuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKFwiQ29tbW9uLlNlcnZpY2VzXCIpLnNlcnZpY2UoXCJ0aWNrbGVyU2VydmljZVwiLCBbXG5cdCckaHR0cCcsICckcScsXG5cdGZ1bmN0aW9uKCRodHRwLCAkcSlcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvdGlja2xlcic7XG5cblx0XHRzZXJ2aWNlLnNldENvbXBsZXRlZCA9IGZ1bmN0aW9uIHNldENvbXBsZXRlZCh0aWNrbGVySWRzKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICcvY29tcGxldGUnLFxuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRkYXRhOiBKU09OLnN0cmluZ2lmeShcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFwidGlja2xlcnNcIjogdGlja2xlcklkc1xuXHRcdFx0XHR9KSxcblx0XHRcdFx0aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKClcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJ0aWNrbGVyU2VydmljZTo6c2V0Q29tcGxldGVkIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2V0dGluZyB0aWNrbGVycyB0byBjb21wbGV0ZWQgc3RhdHVzXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2Uuc2V0RGVsZXRlZCA9IGZ1bmN0aW9uIHNldERlbGV0ZWQodGlja2xlcklkcylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkaHR0cChcblx0XHRcdHtcblx0XHRcdFx0dXJsOiBzZXJ2aWNlLmFwaVBhdGggKyAnL2RlbGV0ZScsXG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGRhdGE6IEpTT04uc3RyaW5naWZ5KFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0XCJ0aWNrbGVyc1wiOiB0aWNrbGVySWRzXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRoZWFkZXJzOiBKdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMoKVxuXHRcdFx0fSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmRhdGEpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInRpY2tsZXJTZXJ2aWNlOjpzZXREZWxldGVkIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2V0dGluZyB0aWNrbGVycyB0byBkZWxldGVkIHN0YXR1c1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLnNlYXJjaCA9IGZ1bmN0aW9uIHNlYXJjaChmaWx0ZXIsIHN0YXJ0SW5kZXgsIGxpbWl0KVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICcvc2VhcmNoP3N0YXJ0SW5kZXg9JyArXG5cdFx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KHN0YXJ0SW5kZXgpICtcblx0XHRcdFx0XHQnJmxpbWl0PScgK1xuXHRcdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChsaW1pdCksXG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGRhdGE6IEpTT04uc3RyaW5naWZ5KGZpbHRlciksXG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwidGlja2xlclNlcnZpY2U6OnNlYXJjaCBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHNlYXJjaGluZyB0aWNrbGVyc1wiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSh0aWNrbGVyKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICcvdXBkYXRlJyxcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0ZGF0YTogSlNPTi5zdHJpbmdpZnkodGlja2xlciksXG5cdFx0XHRcdGhlYWRlcnM6IEp1bm8uQ29tbW9uLlNlcnZpY2VIZWxwZXIuY29uZmlnSGVhZGVycygpXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwidGlja2xlclNlcnZpY2U6OnVwZGF0ZSBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHVwZGF0aW5nIHRpY2tsZXJcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRUZXh0U3VnZ2VzdGlvbnMgPSBmdW5jdGlvbiBnZXRUZXh0U3VnZ2VzdGlvbnMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwKFxuXHRcdFx0e1xuXHRcdFx0XHR1cmw6IHNlcnZpY2UuYXBpUGF0aCArICcvdGV4dFN1Z2dlc3Rpb25zJyxcblx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiXG5cdFx0XHR9KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwidGlja2xlclNlcnZpY2U6OmdldFRleHRTdWdnZXN0aW9ucyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGdldHRpbmcgdGlja2xlciB0ZXh0IHN1Z2dlc3Rpb25zXCIpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdHNlcnZpY2UuYWRkID0gZnVuY3Rpb24gYWRkKHRpY2tsZXIpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAoXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogc2VydmljZS5hcGlQYXRoICsgJy9hZGQnLFxuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRkYXRhOiBKU09OLnN0cmluZ2lmeSh0aWNrbGVyKSxcblx0XHRcdFx0aGVhZGVyczogSnVuby5Db21tb24uU2VydmljZUhlbHBlci5jb25maWdIZWFkZXJzKClcblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJ0aWNrbGVyU2VydmljZTo6YWRkIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2F2aW5nIHRpY2tsZXJcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uU2VydmljZXNcIikuc2VydmljZShcInV4U2VydmljZVwiLCBbXG5cdCckaHR0cCcsICckcScsXG5cdGZ1bmN0aW9uKCRodHRwLCAkcSlcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHRzZXJ2aWNlLmFwaVBhdGggPSAnLi4vd3MvcnMvcmVjb3JkVVgnO1xuXG5cdFx0c2VydmljZS5tZW51ID0gZnVuY3Rpb24gbWVudShkZW1vZ3JhcGhpY05vKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRodHRwLmdldChzZXJ2aWNlLmFwaVBhdGggKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoZGVtb2dyYXBoaWNObykgK1xuXHRcdFx0XHQnL3JlY29yZE1lbnUnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwidXhTZXJ2aWNlOjptZW51IGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgbWVudVwiKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRzZXJ2aWNlLnNlYXJjaFRlbXBsYXRlcyA9IGZ1bmN0aW9uIHNlYXJjaFRlbXBsYXRlcyhzZWFyY2gsIHN0YXJ0SW5kZXgsIGl0ZW1zVG9SZXR1cm4pXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAucG9zdChzZXJ2aWNlLmFwaVBhdGggKyAnL3NlYXJjaFRlbXBsYXRlcz9zdGFydEluZGV4PScgK1xuXHRcdFx0XHRlbmNvZGVVUklDb21wb25lbnQoc3RhcnRJbmRleCkgKyBcIiZpdGVtc1RvUmV0dXJuPVwiICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KGl0ZW1zVG9SZXR1cm4pLCBzZWFyY2gpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJ1eFNlcnZpY2U6OnNlYXJjaFRlbXBsYXRlcyBlcnJvclwiLCBlcnJvcnMpO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHNlYXJjaGluZyB0ZW1wbGF0ZXNcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uIGdldFRlbXBsYXRlKG5hbWUpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0XHRcdCRodHRwLnBvc3Qoc2VydmljZS5hcGlQYXRoICsgJy90ZW1wbGF0ZScsIG5hbWUpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJ1eFNlcnZpY2U6OmdldFRlbXBsYXRlIGVycm9yXCIsIGVycm9ycyk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgdGVtcGxhdGVcIik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0c2VydmljZS5nZXREaXNwbGF5UHJvcGVydGllcyA9IGZ1bmN0aW9uIGdldERpc3BsYXlQcm9wZXJ0aWVzKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0JGh0dHAuZ2V0KHNlcnZpY2UuYXBpUGF0aCArICcvcHJvcGVydGllcycpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJ1eFNlcnZpY2U6Z2V0RGlzcGxheVByb3BlcnRpZXMgZXJyb3JcIiwgZXJyb3JzKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBkaXNwbGF5IHByb3BlcnRpZXMuXCIpXG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJDb21tb24uVXRpbFwiKS5zZXJ2aWNlKFwiYW5ndWxhclV0aWxcIiwgW1xuXHQnJHdpbmRvdycsXG5cblx0ZnVuY3Rpb24oJHdpbmRvdylcblx0e1xuXHRcdHZhciBzZXJ2aWNlID0ge307XG5cblx0XHQvLyBTZXQgdG8gdHJ1ZSBpZiB3ZSBhcmUgaW4gYSBtb2JpbGUgdmlldyAoPDc2OHB4KSwgZmFsc2UgaWYgb3RoZXJ3aXNlXG5cdFx0c2VydmljZS5pbk1vYmlsZVZpZXcgPSBmdW5jdGlvbiBpbk1vYmlsZVZpZXcoKVxuXHRcdHtcblx0XHRcdHJldHVybiAkd2luZG93LmlubmVyV2lkdGggPCA3Njg7XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXHR9XG5cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0NvbW1vbi5VdGlsJykuc2VydmljZShcImp1bm9IdHRwXCIsIFtcbiAgICAgICAgJyRodHRwJyxcbiAgICAgICAgJyR3aW5kb3cnLFxuICAgICAgICAnJHEnLFxuXG4gICAgICAgIGZ1bmN0aW9uIChcbiAgICAgICAgICAgICRodHRwLFxuICAgICAgICAgICAgJHdpbmRvdyxcbiAgICAgICAgICAgICRxXG4gICAgICAgIClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gVGhpcyBzZXJ2aWNlIHdyYXBzIHRoZSBtZXRob2RzIGluICRodHRwIHNvIHRoYXQgYXV0aGVudGljYXRpb24gY2FuIGJlIGFkZGVkLlxuICAgICAgICAgICAgdmFyIGh0dHBfdXRpbCA9IHt9O1xuXG4gICAgICAgICAgICBodHRwX3V0aWwucmVxdWVzdCA9ICBmdW5jdGlvbiByZXF1ZXN0KHJlcXVlc3RfaGFzaClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAgICAgJGh0dHAocmVxdWVzdF9oYXNoKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodHRwX3V0aWwuc3VjY2Vzc19mdW5jdGlvbihyZXNwb25zZSwgcmVxdWVzdF9oYXNoLCBkZWZlcnJlZCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yKGVycm9ycylcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHR0cF91dGlsLmVycm9yc19mdW5jdGlvbihlcnJvcnMsIHJlcXVlc3RfaGFzaCwgZGVmZXJyZWQpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBub3RpZnkocHJvZ3Jlc3MpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLm5vdGlmeShwcm9ncmVzcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBodHRwX3V0aWwuc3VjY2Vzc19mdW5jdGlvbiA9IGZ1bmN0aW9uIHN1Y2Nlc3NfZnVuY3Rpb24ocmVzcG9uc2UsIHJlcXVlc3RfaGFzaCwgZGVmZXJyZWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RfcmVzdWx0ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RfcmVzdWx0LmRhdGEuc3RhdHVzID09PSAnU1VDQ0VTUycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGE6IGFuZ3VsYXIuY29weShyZXF1ZXN0X3Jlc3VsdC5kYXRhLmhlYWRlcnMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGFuZ3VsYXIuY29weShyZXF1ZXN0X3Jlc3VsdC5kYXRhLmJvZHkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXF1ZXN0X3Jlc3VsdC5kYXRhLnN0YXR1cyA9PT0gJ0VSUk9SJyl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGE6IGFuZ3VsYXIuY29weShyZXF1ZXN0X3Jlc3VsdC5kYXRhLmhlYWRlcnMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGFuZ3VsYXIuY29weShyZXF1ZXN0X3Jlc3VsdC5kYXRhLmVycm9yLm1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9ycyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIkludmFsaWQgUmVzcG9uc2UgU3RhdHVzXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YToge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBcIkFuIEVycm9yIGhhcyBvY2N1cnJlZC4gcGxlYXNlIGNvbnRhY3QgdGVjaG5pY2FsIHN1cHBvcnRcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3JzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBodHRwX3V0aWwuZXJyb3JzX2Z1bmN0aW9uID0gZnVuY3Rpb24gZXJyb3JzX2Z1bmN0aW9uKGVycm9ycywgcmVxdWVzdF9oYXNoLCBkZWZlcnJlZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3JzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGh0dHBfdXRpbC5jYWxsID0gZnVuY3Rpb24gY2FsbChtZXRob2QsIHVybCwgZGF0YSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdF9oYXNoID0ge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBodHRwX3V0aWwucmVxdWVzdChyZXF1ZXN0X2hhc2gpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaHR0cF91dGlsLmdldCA9IGZ1bmN0aW9uIGdldCh1cmwsIGNvbmZpZylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdF9oYXNoID0ge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgSnVuby5Db21tb24uVXRpbC5tZXJnZUhhc2gocmVxdWVzdF9oYXNoLCBjb25maWcpO1xuICAgICAgICAgICAgICAgIHJldHVybiBodHRwX3V0aWwucmVxdWVzdChyZXF1ZXN0X2hhc2gpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaHR0cF91dGlsLnBvc3QgPSBmdW5jdGlvbiBwb3N0KHVybCxkYXRhKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0X2hhc2ggPSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGh0dHBfdXRpbC5yZXF1ZXN0KHJlcXVlc3RfaGFzaCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBodHRwX3V0aWwucHV0ID0gZnVuY3Rpb24gcHV0KHVybCxkYXRhKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0X2hhc2ggPSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaHR0cF91dGlsLnJlcXVlc3QocmVxdWVzdF9oYXNoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vICdkZWxldGUnIGlzIGEgcmVzZXJ2ZWQga2V5d29yZCAtLSBsZWF2ZSBtZSBhbG9uZVxuICAgICAgICAgICAgaHR0cF91dGlsLmRlbCA9IGZ1bmN0aW9uIGRlbCh1cmwsZGF0YSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdF9oYXNoID0ge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGh0dHBfdXRpbC5yZXF1ZXN0KHJlcXVlc3RfaGFzaCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gaHR0cF91dGlsO1xuICAgICAgICB9XG4gICAgXVxuKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLypcblxuIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gTWNNYXN0ZXIgVW5pdmVyc2l0eVxuIEhhbWlsdG9uXG4gT250YXJpbywgQ2FuYWRhXG5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnQ29tbW9uLlV0aWwnLCBbXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gICAgQ29weXJpZ2h0IChjKSAyMDEyLTIwMTguIENsb3VkUHJhY3RpY2UgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuICAgIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiAgICBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiAgICBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gICAgVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3JcbiAgICBDbG91ZFByYWN0aWNlIEluYy5cbiAgICBWaWN0b3JpYSwgQnJpdGlzaCBDb2x1bWJpYVxuICAgIENhbmFkYVxuXG4gKi9cblxud2luZG93Lkp1bm8gPSB3aW5kb3cuSnVubyB8fCB7fTtcbkp1bm8uQ29tbW9uID0gSnVuby5Db21tb24gfHwge307XG5cbkp1bm8uQ29tbW9uLlNlYXJjaExpc3RIZWxwZXIgPSBmdW5jdGlvbiBTZWFyY2hMaXN0SGVscGVyKGRlZmF1bHRQYXJhbXMsIHNlYXJjaFBhcmFtcylcbntcblx0dmFyIG1lID0gdGhpcztcblxuXHRtZS5zZWFyY2hQYXJhbXMgPSBzZWFyY2hQYXJhbXMgfHwge307XG5cdG1lLmRlZmF1bHRzID0ge1xuXHRcdHBhZ2U6IDEsXG5cdFx0cGVyUGFnZTogMTAsXG5cdH07XG5cblx0bWUuaW5pdFNlYXJjaFBhcmFtZXRlcnMgPSBmdW5jdGlvbiBpbml0U2VhcmNoUGFyYW1ldGVycygpXG5cdHtcblx0XHR2YXIgZmllbGROYW1lO1xuXG5cdFx0Ly8gTWVyZ2UgZGVmYXVsdCBwYXJhbXNcblx0XHRpZihKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhkZWZhdWx0UGFyYW1zKSlcblx0XHR7XG5cdFx0XHRmb3IoZmllbGROYW1lIGluIGRlZmF1bHRQYXJhbXMpXG5cdFx0XHR7XG5cdFx0XHRcdGlmKGRlZmF1bHRQYXJhbXMuaGFzT3duUHJvcGVydHkoZmllbGROYW1lKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG1lLmRlZmF1bHRzW2ZpZWxkTmFtZV0gPSBkZWZhdWx0UGFyYW1zW2ZpZWxkTmFtZV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0bWUuZ2V0UGFyYW1zID0gZnVuY3Rpb24gZ2V0UGFyYW1zKClcblx0e1xuXHRcdHZhciBvdXRQYXJhbXMgPSB7fTtcblx0XHRmb3IodmFyIGZpZWxkTmFtZSBpbiBtZS5zZWFyY2hQYXJhbXMpXG5cdFx0e1xuXHRcdFx0aWYobWUuc2VhcmNoUGFyYW1zLmhhc093blByb3BlcnR5KGZpZWxkTmFtZSkpXG5cdFx0XHR7XG5cdFx0XHRcdG91dFBhcmFtc1tmaWVsZE5hbWVdID0gbWUuc2VhcmNoUGFyYW1zW2ZpZWxkTmFtZV07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGZvcih2YXIgZmllbGROYW1lIGluIG1lLmRlZmF1bHRzKVxuXHRcdHtcblx0XHRcdGlmKCFvdXRQYXJhbXMuaGFzT3duUHJvcGVydHkoZmllbGROYW1lKSlcblx0XHRcdHtcblx0XHRcdFx0b3V0UGFyYW1zW2ZpZWxkTmFtZV0gPSBtZS5kZWZhdWx0c1tmaWVsZE5hbWVdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gb3V0UGFyYW1zO1xuXHR9O1xuXG5cdG1lLmluaXRTZWFyY2hQYXJhbWV0ZXJzKCk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG53aW5kb3cuSnVubyA9IHdpbmRvdy5KdW5vIHx8IHt9O1xuSnVuby5Db21tb24gPSBKdW5vLkNvbW1vbiB8fCB7fTtcblxuSnVuby5Db21tb24uU2VydmljZUhlbHBlciA9IHt9O1xuXG5KdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnMgPSBmdW5jdGlvbiBjb25maWdIZWFkZXJzKCkge1xuXHRyZXR1cm4ge1xuXHRcdGhlYWRlcnM6IHtcblx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdFx0XCJBY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcblx0XHR9XG5cdH07XG59O1xuXG5KdW5vLkNvbW1vbi5TZXJ2aWNlSGVscGVyLmNvbmZpZ0hlYWRlcnNXaXRoQ2FjaGUgPSBmdW5jdGlvbiBjb25maWdIZWFkZXJzV2l0aENhY2hlKClcbntcblx0cmV0dXJuIHtcblx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcdFwiQWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvblwiXG5cdFx0fSxcblx0XHRjYWNoZTogdHJ1ZVxuXHR9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuaWYgKCF3aW5kb3cuSnVubykgd2luZG93Lkp1bm8gPSB7fTtcblxuXG5pZiAoIUp1bm8uQ29tbW9uKSBKdW5vLkNvbW1vbiA9IHt9O1xuXG5KdW5vLkNvbW1vbi5VdGlsID0ge307XG5cbkp1bm8uQ29tbW9uLlV0aWwuc2V0dGluZ3MgPSB7XG5cdGRhdGV0aW1lX2Zvcm1hdDogXCJZWVlZLU1NLUREVEhIOm1tOnNzWlwiLFxuXHRkYXRldGltZV9ub190aW1lem9uZV9mb3JtYXQ6IFwiWVlZWS1NTS1ERFRISDptbTpzc1wiLFxuXHR0aW1lX2Zvcm1hdDogXCJoOm1tYVwiLFxuXHRkYXRlX2Zvcm1hdDogXCJZWVlZLU1NLUREXCIsXG5cdGRheW9md2Vla19mb3JtYXQ6IFwiZGRkZFwiXG59O1xuXG5KdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyA9IGZ1bmN0aW9uIGV4aXN0cyhvYmplY3QpIHtcblx0Ly8gbm90IHVuZGVmaW5lZCBhbmQgbm90IG51bGxcblx0cmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKG9iamVjdCkgJiYgb2JqZWN0ICE9PSBudWxsO1xufTtcblxuSnVuby5Db21tb24uVXRpbC5pc0JsYW5rID0gZnVuY3Rpb24gaXNCbGFuayhvYmplY3QpIHtcblx0Ly8gdW5kZWZpbmVkIG9yIG51bGwgb3IgZW1wdHkgc3RyaW5nXG5cdHJldHVybiAhSnVuby5Db21tb24uVXRpbC5leGlzdHMob2JqZWN0KSB8fCBvYmplY3QgPT09IFwiXCI7XG59O1xuXG5KdW5vLkNvbW1vbi5VdGlsLnRvQXJyYXkgPSBmdW5jdGlvbiB0b0FycmF5KG9iaikgeyAvL2NvbnZlcnQgc2luZ2xlIG9iamVjdCB0byBhcnJheVxuXHRpZiAob2JqIGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBvYmo7XG5cdGVsc2UgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gW107XG5cdGVsc2UgcmV0dXJuIFtvYmpdO1xufTtcblxuSnVuby5Db21tb24uVXRpbC5wYWQwID0gZnVuY3Rpb24gcGFkMChuKSB7XG5cdHZhciBzID0gbi50b1N0cmluZygpO1xuXHRpZiAocy5sZW5ndGggPT0gMSkgcyA9IFwiMFwiICsgcztcblx0cmV0dXJuIHM7XG59O1xuXG5KdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyA9IGZ1bmN0aW9uIHRvVHJpbW1lZFN0cmluZyhzKSB7XG5cdGlmIChzID09IG51bGwpIHMgPSBcIlwiO1xuXHRpZiAocyBpbnN0YW5jZW9mIFN0cmluZykgcyA9IHMudHJpbSgpO1xuXHRyZXR1cm4gcztcbn07XG5cbkp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uIGZvcm1hdERhdGUoZCkge1xuXHRkID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoZCk7XG5cdGlmIChkKSB7XG5cdFx0aWYgKCEoZCBpbnN0YW5jZW9mIERhdGUpKSBkID0gbmV3IERhdGUoZCk7XG5cdFx0ZCA9IGQuZ2V0RnVsbFllYXIoKSArIFwiLVwiICsgSnVuby5Db21tb24uVXRpbC5wYWQwKGQuZ2V0TW9udGgoKSArIDEpICsgXCItXCIgKyBKdW5vLkNvbW1vbi5VdGlsLnBhZDAoZC5nZXREYXRlKCkpO1xuXHR9XG5cdHJldHVybiBkO1xufTtcblxuSnVuby5Db21tb24uVXRpbC5mb3JtYXRUaW1lID0gZnVuY3Rpb24gZm9ybWF0VGltZShkKSB7XG5cdGQgPSBKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyhkKTtcblx0aWYgKGQpIHtcblx0XHRpZiAoIShkIGluc3RhbmNlb2YgRGF0ZSkpIGQgPSBuZXcgRGF0ZShkKTtcblx0XHRkID0gSnVuby5Db21tb24uVXRpbC5wYWQwKGQuZ2V0SG91cnMoKSkgKyBcIjpcIiArIEp1bm8uQ29tbW9uLlV0aWwucGFkMChkLmdldE1pbnV0ZXMoKSk7XG5cdH1cblx0cmV0dXJuIGQ7XG59O1xuXG5KdW5vLkNvbW1vbi5VdGlsLmZvcm1hdE1vbWVudERhdGUgPSBmdW5jdGlvbiBmb3JtYXRNb21lbnREYXRlKGQpIHtcblx0cmV0dXJuIGQuZm9ybWF0KEp1bm8uQ29tbW9uLlV0aWwuc2V0dGluZ3MuZGF0ZV9mb3JtYXQpO1xufTtcblxuSnVuby5Db21tb24uVXRpbC5mb3JtYXRNb21lbnRUaW1lID0gZnVuY3Rpb24gZm9ybWF0TW9tZW50VGltZShkLCBmb3JtYXQpIHtcblx0aWYoIWZvcm1hdCkge1xuXHRcdGZvcm1hdCA9IEp1bm8uQ29tbW9uLlV0aWwuc2V0dGluZ3MudGltZV9mb3JtYXQ7XG5cdH1cblx0cmV0dXJuIGQuZm9ybWF0KGZvcm1hdCk7XG59O1xuXG5KdW5vLkNvbW1vbi5VdGlsLmZvcm1hdE1vbWVudERhdGVUaW1lTm9UaW1lem9uZSA9IGZ1bmN0aW9uIGZvcm1hdE1vbWVudERhdGVUaW1lTm9UaW1lem9uZShkKSB7XG5cdHJldHVybiBkLmZvcm1hdChKdW5vLkNvbW1vbi5VdGlsLnNldHRpbmdzLmRhdGV0aW1lX25vX3RpbWV6b25lX2Zvcm1hdCk7XG59O1xuXG5KdW5vLkNvbW1vbi5VdGlsLmdldERhdGVNb21lbnQgPSBmdW5jdGlvbiBnZXREYXRlTW9tZW50KGRhdGVfc3RyaW5nKVxue1xuXHRyZXR1cm4gbW9tZW50LnV0YyhkYXRlX3N0cmluZywgSnVuby5Db21tb24uVXRpbC5zZXR0aW5ncy5kYXRlX2Zvcm1hdCwgdHJ1ZSk7XG59O1xuXG5KdW5vLkNvbW1vbi5VdGlsLmdldFRpbWVNb21lbnQgPSBmdW5jdGlvbiBnZXRUaW1lTW9tZW50KHRpbWVfc3RyaW5nKVxue1xuXHRyZXR1cm4gbW9tZW50LnV0Yyh0aW1lX3N0cmluZywgSnVuby5Db21tb24uVXRpbC5zZXR0aW5ncy50aW1lX2Zvcm1hdCwgdHJ1ZSk7XG59O1xuXG5KdW5vLkNvbW1vbi5VdGlsLmdldERhdGVNb21lbnRGcm9tQ29tcG9uZW50cyA9IGZ1bmN0aW9uIGdldERhdGVNb21lbnRGcm9tQ29tcG9uZW50cyh5ZWFyX3N0cmluZywgbW9udGhfc3RyaW5nLCBkYXlfc3RyaW5nKVxue1xuXHRyZXR1cm4gbW9tZW50LnV0Yyh7eWVhcjogeWVhcl9zdHJpbmcsIG1vbnRoOiBtb250aF9zdHJpbmcsIGRheTogZGF5X3N0cmluZ30pO1xufTtcblxuSnVuby5Db21tb24uVXRpbC5nZXREYXRlQW5kVGltZU1vbWVudCA9IGZ1bmN0aW9uIGdldENvbWJpbmVkTW9tZW50KGRhdGVTdHJpbmcsIHRpbWVTdHJpbmcpXG57XG5cdHJldHVybiBtb21lbnQudXRjKGRhdGVTdHJpbmcgKyBcIiBcIiArIHRpbWVTdHJpbmcsXG5cdFx0SnVuby5Db21tb24uVXRpbC5zZXR0aW5ncy5kYXRlX2Zvcm1hdCArIFwiIFwiICtcblx0XHRKdW5vLkNvbW1vbi5VdGlsLnNldHRpbmdzLnRpbWVfZm9ybWF0LCB0cnVlKTtcbn07XG5cbkp1bm8uQ29tbW9uLlV0aWwuZ2V0RGF0ZXRpbWVOb1RpbWV6b25lTW9tZW50ID0gZnVuY3Rpb24gZ2V0RGF0ZXRpbWVOb1RpbWV6b25lTW9tZW50KGRhdGV0aW1lX3N0cmluZylcbntcblx0cmV0dXJuIG1vbWVudC51dGMoZGF0ZXRpbWVfc3RyaW5nLFxuXHRcdEp1bm8uQ29tbW9uLlV0aWwuc2V0dGluZ3MuZGF0ZXRpbWVfbm9fdGltZXpvbmVfZm9ybWF0LCB0cnVlKTtcbn07XG5cbkp1bm8uQ29tbW9uLlV0aWwudmFsaWRhdGVEYXRlU3RyaW5nID0gZnVuY3Rpb24gdmFsaWRhdGVEYXRlU3RyaW5nKFxuXHRkYXRlU3RyaW5nLCBkaXNwbGF5RXJyb3JzLCBmaWVsZCwgZmllbGREaXNwbGF5TmFtZSwgcmVxdWlyZWQpXG57XG5cdGlmKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKGRhdGVTdHJpbmcpKVxuXHR7XG5cdFx0dmFyIG1vbWVudCA9IEp1bm8uQ29tbW9uLlV0aWwuZ2V0RGF0ZU1vbWVudChkYXRlU3RyaW5nKTtcblx0XHRpZighbW9tZW50LmlzVmFsaWQoKSlcblx0XHR7XG5cdFx0XHRkaXNwbGF5RXJyb3JzLmFkZF9maWVsZF9lcnJvcihmaWVsZCwgZmllbGREaXNwbGF5TmFtZSArICcgaXMgaW52YWxpZCcpO1xuXHRcdH1cblx0fVxuXHRlbHNlIGlmKHJlcXVpcmVkKVxuXHR7XG5cdFx0ZGlzcGxheUVycm9ycy5hZGRfZmllbGRfZXJyb3IoZmllbGQsIGZpZWxkRGlzcGxheU5hbWUgKyAnaXMgcmVxdWlyZWQnKTtcblx0fVxufTtcblxuSnVuby5Db21tb24uVXRpbC52YWxpZGF0ZVRpbWVTdHJpbmcgPSBmdW5jdGlvbiB2YWxpZGF0ZVRpbWVTdHJpbmcoXG5cdHRpbWVTdHJpbmcsIGRpc3BsYXlFcnJvcnMsIGZpZWxkLCBmaWVsZERpc3BsYXlOYW1lLCByZXF1aXJlZClcbntcblx0aWYgKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKHRpbWVTdHJpbmcpKVxuXHR7XG5cdFx0dmFyIG1vbWVudCA9IEp1bm8uQ29tbW9uLlV0aWwuZ2V0VGltZU1vbWVudCh0aW1lU3RyaW5nKTtcblx0XHRpZiAoIW1vbWVudC5pc1ZhbGlkKCkpXG5cdFx0e1xuXHRcdFx0ZGlzcGxheUVycm9ycy5hZGRfZmllbGRfZXJyb3IoZmllbGQsIGZpZWxkRGlzcGxheU5hbWUgKyAnaXMgaW52YWxpZCcpO1xuXHRcdH1cblx0fVxuXHRlbHNlIGlmIChyZXF1aXJlZClcblx0e1xuXHRcdGRpc3BsYXlFcnJvcnMuYWRkX2ZpZWxkX2Vycm9yKGZpZWxkLCBmaWVsZERpc3BsYXlOYW1lICsgJ2lzIHJlcXVpcmVkJyk7XG5cdH1cbn07XG5cbkp1bm8uQ29tbW9uLlV0aWwuYWRkTmV3TGluZSA9IGZ1bmN0aW9uIGFkZE5ld0xpbmUobGluZSwgbXNzZykge1xuXHRpZiAobGluZSA9PSBudWxsIHx8IGxpbmUudHJpbSgpID09IFwiXCIpIHJldHVybiBtc3NnO1xuXG5cdGlmIChtc3NnID09IG51bGwgfHwgbXNzZy50cmltKCkgPT0gXCJcIikgbXNzZyA9IGxpbmUudHJpbSgpO1xuXHRlbHNlIG1zc2cgKz0gXCJcXG5cIiArIGxpbmUudHJpbSgpO1xuXG5cdHJldHVybiBtc3NnO1xufTtcblxuSnVuby5Db21tb24uVXRpbC5jYWxjQWdlID0gZnVuY3Rpb24gY2FsY0FnZShkb2JZZWFyLCBkb2JNb250aCwgZG9iRGF5KVxuIHtcblxuXHR2YXIgZGF0ZU9mQmlydGggPSBuZXcgRGF0ZShwYXJzZUludChkb2JZZWFyLCAxMCksIHBhcnNlSW50KGRvYk1vbnRoLCAxMCksIHBhcnNlSW50KGRvYkRheSwgMTApKTtcblx0dmFyIGN1cnJEYXRlID0gbmV3IERhdGUoKTtcblxuXHR2YXIgeWVhcnMgPSAoY3VyckRhdGUuZ2V0RnVsbFllYXIoKSAtIGRhdGVPZkJpcnRoLmdldEZ1bGxZZWFyKCkpO1xuXG5cdGlmIChjdXJyRGF0ZS5nZXRNb250aCgpIDwgZGF0ZU9mQmlydGguZ2V0TW9udGgoKSB8fFxuXHRcdGN1cnJEYXRlLmdldE1vbnRoKCkgPT0gZGF0ZU9mQmlydGguZ2V0TW9udGgoKSAmJiBjdXJyRGF0ZS5nZXREYXRlKCkgPCBkYXRlT2ZCaXJ0aC5nZXREYXRlKCkpXG5cdHtcblx0XHR5ZWFycy0tO1xuXHR9XG5cdHJldHVybiB5ZWFycztcbn07XG5cbkp1bm8uQ29tbW9uLlV0aWwuaXNJbkFycmF5ID0gZnVuY3Rpb24gaXNJbkFycmF5KHZhbHVlLCBhcnJheSkgXG57XG5cdHJldHVybiBhcnJheS5pbmRleE9mKHZhbHVlKSA+IC0xO1xufTtcblxuLyoqXG4gKiByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGpzIGhhc2hlcy4gdGhlIGJhc2VIYXNoIHdpbGwgYmUgbW9kaWZpZWRcbiAqIEBwYXJhbSBiYXNlSGFzaFxuICogQHBhcmFtIHRvTWVyZ2VcbiAqL1xuSnVuby5Db21tb24uVXRpbC5tZXJnZUhhc2ggPSBmdW5jdGlvbiBtZXJnZUhhc2goYmFzZUhhc2gsIHRvTWVyZ2UpXG57XG5cdGlmICh0b01lcmdlID09PSAndW5kZWZpbmVkJykge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHQkLmV4dGVuZCh0cnVlLCBiYXNlSGFzaCwgdG9NZXJnZSk7XG5cdHJldHVybiB0cnVlO1xufTtcblxuSnVuby5Db21tb24uVXRpbC5ub051bGwgPSBmdW5jdGlvbiBub051bGwodmFsKVxue1xuICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJylcbiAgICB7XG4gICAgICAgIHZhbCA9ICB2YWwudHJpbSgpO1xuICAgIH1cbiAgICBlbHNlIGlmICggdmFsID09PSBudWxsKVxuICAgIHtcblx0XHR2YWwgPSBcIlwiO1xuICAgIH1cblxuICAgIHJldHVybiB2YWw7XG59O1xuXG5KdW5vLkNvbW1vbi5VdGlsLmlzVW5kZWZpbmVkT3JOdWxsID0gZnVuY3Rpb24gaXNVbmRlZmluZWRPck51bGwodmFsKVxue1xuXHRyZXR1cm4gYW5ndWxhci5pc1VuZGVmaW5lZCh2YWwpIHx8IHZhbCA9PT0gbnVsbDtcbn07XG5cbkp1bm8uQ29tbW9uLlV0aWwuaXNEZWZpbmVkQW5kTm90TnVsbCA9IGZ1bmN0aW9uIGlzRGVmaW5lZEFuZE5vdE51bGwodmFsKVxue1xuXHRyZXR1cm4gKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbCkgJiYgdmFsICE9PSBudWxsKTtcbn07XG5cbkp1bm8uQ29tbW9uLlV0aWwub2JqZWN0QXJyYXlJbmRleE9mID0gZnVuY3Rpb24gb2JqZWN0QXJyYXlJbmRleE9mKGFycmF5LCBzZWFyY2hUZXJtLCBwcm9wZXJ0eSlcbntcblx0Zm9yKHZhciBpID0gMCwgbGVuID0gYXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRpZiAoYXJyYXlbaV1bcHJvcGVydHldID09PSBzZWFyY2hUZXJtKSByZXR1cm4gaTtcblx0fVxuXHRyZXR1cm4gLTE7XG59O1xuXG5KdW5vLkNvbW1vbi5VdGlsLmlzSW50ZWdlclN0cmluZyA9IGZ1bmN0aW9uIGlzSW50ZWdlclN0cmluZyhzdHJpbmcpXG57XG5cdHZhciBwYXJzZWRfc3RyaW5nID0gcGFyc2VJbnQoc3RyaW5nKTtcblxuXHRpZiAoL14tP1xcZCskLy50ZXN0KHN0cmluZy50b1N0cmluZygpKSlcblx0e1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0cmV0dXJuIGZhbHNlO1xufTtcblxuSnVuby5Db21tb24uVXRpbC5lc2NhcGVIdG1sID0gZnVuY3Rpb24gZXNjYXBlSHRtbChzdHIpXG57XG5cdHZhciBlbnRpdHlNYXAgPSB7XG5cdFx0XCImXCI6IFwiJmFtcDtcIixcblx0XHRcIjxcIjogXCImbHQ7XCIsXG5cdFx0XCI+XCI6IFwiJmd0O1wiLFxuXHRcdCdcIic6ICcmcXVvdDsnLFxuXHRcdFwiJ1wiOiAnJiMzOTsnLFxuXHRcdFwiL1wiOiAnJiN4MkY7J1xuXHR9O1xuXG5cdHJldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKC9bJjw+XCInXFwvXS9nLCBmdW5jdGlvbiAocylcblx0e1xuXHRcdHJldHVybiBlbnRpdHlNYXBbc107XG5cdH0pO1xufTtcblxuSnVuby5Db21tb24uVXRpbC5mb3JtYXROYW1lID0gZnVuY3Rpb24gZm9ybWF0TmFtZShmaXJzdE5hbWUsIGxhc3ROYW1lKVxue1xuXHRpZighbGFzdE5hbWUgJiYgIWZpcnN0TmFtZSlcblx0e1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdGVsc2UgaWYoIWZpcnN0TmFtZSlcblx0e1xuXHRcdHJldHVybiBsYXN0TmFtZTtcblx0fVxuXHRlbHNlIGlmKCFsYXN0TmFtZSlcblx0e1xuXHRcdHJldHVybiBmaXJzdE5hbWU7XG5cdH1cblxuXHRyZXR1cm4gbGFzdE5hbWUgKyAnLCAnICsgZmlyc3ROYW1lO1xufTtcbiIsIid1c2Ugc3RyaWN0Jztcblxud2luZG93Lkp1bm8gPSB3aW5kb3cuSnVubyB8fFxue307XG5KdW5vLkNvbnN1bHRzID0gSnVuby5Db25zdWx0cyB8fFxue307XG5cbkp1bm8uQ29uc3VsdHMuQ29tbW9uID0ge307XG5cbkp1bm8uQ29uc3VsdHMuQ29tbW9uLnNvcnRBdHRhY2htZW50RG9jcyA9IGZ1bmN0aW9uIHNvcnRBdHRhY2htZW50RG9jcyhhcnJheU9mRG9jcylcbntcblx0YXJyYXlPZkRvY3Muc29ydChmdW5jdGlvbihkb2MxLCBkb2MyKVxuXHR7XG5cdFx0aWYgKGRvYzEuZG9jdW1lbnRUeXBlIDwgZG9jMi5kb2N1bWVudFR5cGUpIHJldHVybiAtMTtcblx0XHRlbHNlIGlmIChkb2MxLmRvY3VtZW50VHlwZSA+IGRvYzIuZG9jdW1lbnRUeXBlKSByZXR1cm4gMTtcblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0aWYgKGRvYzEuZGlzcGxheU5hbWUgPCBkb2MyLmRpc3BsYXlOYW1lKSByZXR1cm4gLTE7XG5cdFx0XHRlbHNlIGlmIChkb2MxLmRpc3BsYXlOYW1lID4gZG9jMi5kaXNwbGF5TmFtZSkgcmV0dXJuIDE7XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9KTtcbn07IiwiYW5ndWxhci5tb2R1bGUoJ0NvbnN1bHRzJykuY29udHJvbGxlcignQ29uc3VsdHMuQ29uc3VsdFJlcXVlc3RBdHRhY2htZW50Q29udHJvbGxlcicsIFtcblxuXHQnJHVpYk1vZGFsSW5zdGFuY2UnLFxuXHQnY29uc3VsdFNlcnZpY2UnLFxuXHQnY29uc3VsdCcsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHVpYk1vZGFsSW5zdGFuY2UsXG5cdFx0Y29uc3VsdFNlcnZpY2UsXG5cdFx0Y29uc3VsdClcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29udHJvbGxlci5hdHRoID0ge307XG5cdFx0Y29udHJvbGxlci5hdHRoLnBhdGllbnROYW1lID0gY29uc3VsdC5kZW1vZ3JhcGhpYy5sYXN0TmFtZSArIFwiLCBcIiArIGNvbnN1bHQuZGVtb2dyYXBoaWMuZmlyc3ROYW1lO1xuXHRcdGNvbnRyb2xsZXIuYXR0aC5hdHRhY2hlZERvY3MgPSBjb25zdWx0LmF0dGFjaG1lbnRzO1xuXHRcdGlmIChjb250cm9sbGVyLmF0dGguYXR0YWNoZWREb2NzWzBdICE9IG51bGwpIGNvbnRyb2xsZXIuYXR0aC5zZWxlY3RlZEF0dGFjaGVkRG9jID0gY29udHJvbGxlci5hdHRoLmF0dGFjaGVkRG9jc1swXTtcblxuXHRcdHZhciBjb25zdWx0SWQgPSAwO1xuXG5cdFx0aWYgKGNvbnN1bHQuaWQgIT0gbnVsbCkgY29uc3VsdElkID0gY29uc3VsdC5pZDtcblx0XHRjb25zdWx0U2VydmljZS5nZXRSZXF1ZXN0QXR0YWNobWVudHMoY29uc3VsdElkLCBjb25zdWx0LmRlbW9ncmFwaGljSWQpLnRoZW4oXG5cdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChjb25zdWx0LmF2YWlsYWJsZURvY3MgPT0gbnVsbCkgY29uc3VsdC5hdmFpbGFibGVEb2NzID0gSnVuby5Db21tb24uVXRpbC50b0FycmF5KHJlc3VsdHMpO1xuXHRcdFx0XHRjb250cm9sbGVyLmF0dGguYXZhaWxhYmxlRG9jcyA9IGNvbnN1bHQuYXZhaWxhYmxlRG9jcztcblx0XHRcdFx0aWYgKGNvbnRyb2xsZXIuYXR0aC5hdmFpbGFibGVEb2NzWzBdICE9IG51bGwpIGNvbnRyb2xsZXIuYXR0aC5zZWxlY3RlZEF2YWlsYWJsZURvYyA9IGNvbnRyb2xsZXIuYXR0aC5hdmFpbGFibGVEb2NzWzBdO1xuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdH0pO1xuXG5cdFx0Y29udHJvbGxlci5vcGVuRG9jID0gZnVuY3Rpb24gb3BlbkRvYyhkb2MpXG5cdFx0e1xuXHRcdFx0d2luZG93Lm9wZW4oXCIuLi9cIiArIGRvYy51cmwpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmF0dGFjaCA9IGZ1bmN0aW9uIGF0dGFjaCgpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIuYXR0aC5zZWxlY3RlZEF2YWlsYWJsZURvYyA9PSBudWxsKSByZXR1cm47XG5cblx0XHRcdGNvbnRyb2xsZXIuYXR0aC5hdHRhY2hlZERvY3MucHVzaChjb250cm9sbGVyLmF0dGguc2VsZWN0ZWRBdmFpbGFibGVEb2MpO1xuXHRcdFx0Y29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXR0YWNoZWREb2MgPSBjb250cm9sbGVyLmF0dGguc2VsZWN0ZWRBdmFpbGFibGVEb2M7XG5cdFx0XHRjb250cm9sbGVyLmF0dGguc2VsZWN0ZWRBdHRhY2hlZERvYy5hdHRhY2hlZCA9IHRydWU7XG5cblx0XHRcdC8vR2V0IGluZGV4IHRvIHJlbW92ZSBieSBkb2N1bWVudCBpZCBhbmQgZG9jdW1lbnQgdHlwZVxuXHRcdFx0dmFyIHJlbW92ZUluZGV4ID0gY29udHJvbGxlci5hdHRoLmF2YWlsYWJsZURvY3MubWFwKGZ1bmN0aW9uKGl0ZW0pXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBpdGVtLmRvY3VtZW50Tm8raXRlbS5kb2N1bWVudFR5cGU7XG5cdFx0XHR9KS5pbmRleE9mKGNvbnRyb2xsZXIuYXR0aC5zZWxlY3RlZEF2YWlsYWJsZURvYy5kb2N1bWVudE5vK2NvbnRyb2xsZXIuYXR0aC5zZWxlY3RlZEF2YWlsYWJsZURvYy5kb2N1bWVudFR5cGUpO1xuXHRcdFx0Y29udHJvbGxlci5hdHRoLmF2YWlsYWJsZURvY3Muc3BsaWNlKHJlbW92ZUluZGV4LCAxKTtcblxuXHRcdFx0dmFyIHNlbGVjdGlvbkluZGV4ID0gJChcIiNzZWxBdmFpbERvY1wiKVswXS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0aWYgKHNlbGVjdGlvbkluZGV4ID49IGNvbnRyb2xsZXIuYXR0aC5hdmFpbGFibGVEb2NzLmxlbmd0aCkgc2VsZWN0aW9uSW5kZXggPSBjb250cm9sbGVyLmF0dGguYXZhaWxhYmxlRG9jcy5sZW5ndGggLSAxO1xuXHRcdFx0Y29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXZhaWxhYmxlRG9jID0gY29udHJvbGxlci5hdHRoLmF2YWlsYWJsZURvY3Nbc2VsZWN0aW9uSW5kZXhdO1xuXG5cdFx0XHRjb25zdWx0LmF0dGFjaG1lbnRzQ2hhbmdlZCA9IHRydWU7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZGV0YWNoID0gZnVuY3Rpb24gZGV0YWNoKClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXR0YWNoZWREb2MgPT0gbnVsbCkgcmV0dXJuO1xuXG5cdFx0XHRjb250cm9sbGVyLmF0dGguYXZhaWxhYmxlRG9jcy5wdXNoKGNvbnRyb2xsZXIuYXR0aC5zZWxlY3RlZEF0dGFjaGVkRG9jKTtcblx0XHRcdGNvbnRyb2xsZXIuYXR0aC5zZWxlY3RlZEF2YWlsYWJsZURvYyA9IGNvbnRyb2xsZXIuYXR0aC5zZWxlY3RlZEF0dGFjaGVkRG9jO1xuXHRcdFx0Y29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXZhaWxhYmxlRG9jLmF0dGFjaGVkID0gZmFsc2U7XG5cblx0XHRcdC8vR2V0IGluZGV4IHRvIHJlbW92ZSBieSBkb2N1bWVudCBpZCBhbmQgZG9jdW1lbnQgdHlwZVxuXHRcdFx0dmFyIHJlbW92ZUluZGV4ID0gY29udHJvbGxlci5hdHRoLmF0dGFjaGVkRG9jcy5tYXAoZnVuY3Rpb24oaXRlbSlcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIGl0ZW0uZG9jdW1lbnRObytpdGVtLmRvY3VtZW50VHlwZTtcblx0XHRcdH0pLmluZGV4T2YoY29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXR0YWNoZWREb2MuZG9jdW1lbnRObytjb250cm9sbGVyLmF0dGguc2VsZWN0ZWRBdHRhY2hlZERvYy5kb2N1bWVudFR5cGUpO1xuXHRcdFx0Y29udHJvbGxlci5hdHRoLmF0dGFjaGVkRG9jcy5zcGxpY2UocmVtb3ZlSW5kZXgsIDEpO1xuXG5cdFx0XHR2YXIgc2VsZWN0aW9uSW5kZXggPSAkKFwiI3NlbEF0dGFjaERvY1wiKVswXS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0aWYgKHNlbGVjdGlvbkluZGV4ID49IGNvbnRyb2xsZXIuYXR0aC5hdHRhY2hlZERvY3MubGVuZ3RoKSBzZWxlY3Rpb25JbmRleCA9IGNvbnRyb2xsZXIuYXR0aC5hdHRhY2hlZERvY3MubGVuZ3RoIC0gMTtcblx0XHRcdGNvbnRyb2xsZXIuYXR0aC5zZWxlY3RlZEF0dGFjaGVkRG9jID0gY29udHJvbGxlci5hdHRoLmF0dGFjaGVkRG9jc1tzZWxlY3Rpb25JbmRleF07XG5cblx0XHRcdGNvbnN1bHQuYXR0YWNobWVudHNDaGFuZ2VkID0gdHJ1ZTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5kb25lID0gZnVuY3Rpb24gZG9uZSgpXG5cdFx0e1xuXHRcdFx0Y29uc29sZS5sb2coJ0NMT1NFIE1PREFMJyk7XG5cdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xuXHRcdH07XG5cdH1cbl0pOyIsImFuZ3VsYXIubW9kdWxlKCdDb25zdWx0cycpLmNvbnRyb2xsZXIoJ0NvbnN1bHRzLkNvbnN1bHRSZXF1ZXN0Q29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRodHRwJyxcblx0JyRxJyxcblx0JyRyZXNvdXJjZScsXG5cdCckbG9jYXRpb24nLFxuXHQnJHVpYk1vZGFsJyxcblx0J2NvbnN1bHRTZXJ2aWNlJyxcblx0J2RlbW9ncmFwaGljU2VydmljZScsXG5cdCdzZWN1cml0eVNlcnZpY2UnLFxuXHQnc3VtbWFyeVNlcnZpY2UnLFxuXHQnc3RhdGljRGF0YVNlcnZpY2UnLFxuXHQnY29uc3VsdCcsXG5cdCd1c2VyJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JGh0dHAsXG5cdFx0JHEsXG5cdFx0JHJlc291cmNlLFxuXHRcdCRsb2NhdGlvbixcblx0XHQkdWliTW9kYWwsXG5cdFx0Y29uc3VsdFNlcnZpY2UsXG5cdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLFxuXHRcdHNlY3VyaXR5U2VydmljZSxcblx0XHRzdW1tYXJ5U2VydmljZSxcblx0XHRzdGF0aWNEYXRhU2VydmljZSxcblx0XHRjb25zdWx0LFxuXHRcdHVzZXIpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXIuY29uc3VsdCA9IGNvbnN1bHQ7XG5cblx0XHRjb25zdWx0LmZheExpc3QgPSBKdW5vLkNvbW1vbi5VdGlsLnRvQXJyYXkoY29uc3VsdC5mYXhMaXN0KTtcblx0XHRjb25zdWx0LnNlcnZpY2VMaXN0ID0gSnVuby5Db21tb24uVXRpbC50b0FycmF5KGNvbnN1bHQuc2VydmljZUxpc3QpO1xuXHRcdGNvbnN1bHQuc2VuZFRvTGlzdCA9IEp1bm8uQ29tbW9uLlV0aWwudG9BcnJheShjb25zdWx0LnNlbmRUb0xpc3QpO1xuXG5cdFx0Y29udHJvbGxlci51cmdlbmNpZXMgPSBzdGF0aWNEYXRhU2VydmljZS5nZXRDb25zdWx0VXJnZW5jaWVzKCk7XG5cdFx0Y29udHJvbGxlci5zdGF0dXNlcyA9IHN0YXRpY0RhdGFTZXJ2aWNlLmdldENvbnN1bHRSZXF1ZXN0U3RhdHVzZXMoKTtcblx0XHRjb250cm9sbGVyLmhvdXJzID0gc3RhdGljRGF0YVNlcnZpY2UuZ2V0SG91cnMoKTtcblx0XHRjb250cm9sbGVyLm1pbnV0ZXMgPSBzdGF0aWNEYXRhU2VydmljZS5nZXRNaW51dGVzKCk7XG5cblx0XHRjb250cm9sbGVyLnBhcnNlVGltZSA9IGZ1bmN0aW9uIHBhcnNlVGltZSh0aW1lKVxuXHRcdHtcblx0XHRcdHZhciB0QXJyYXkgPSB0aW1lLnNwbGl0KFwiOlwiKTtcblx0XHRcdGNvbnN1bHQuYXBwb2ludG1lbnRIb3VyID0gdEFycmF5WzBdO1xuXHRcdFx0Y29uc3VsdC5hcHBvaW50bWVudE1pbnV0ZSA9IHRBcnJheVsxXTtcblx0XHR9O1xuXHRcdC8qIElmIGFwcG9pbnRtZW50IHRpbWUgaXMgcHJlc2VudCwgd2UgbXVzdCBwYXJzZSB0aGUgaG91cnMgYW5kIG1pbnV0ZXMgaW4gb3JkZXIgdG9cblx0XHQgICBwb3B1bGF0ZSB0aGUgaG91ciBhbmQgbWludXRlIHNlbGVjdG9ycyAqL1xuXHRcdGlmIChjb25zdWx0LmFwcG9pbnRtZW50VGltZSAhPT0gbnVsbClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnBhcnNlVGltZShjb25zdWx0LmFwcG9pbnRtZW50VGltZSk7XG5cblx0XHR9XG5cblx0XHRjb250cm9sbGVyLmluaXRpYWxpemUgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0Ly9nZXQgYWNjZXNzIHJpZ2h0c1xuXHRcdFx0c2VjdXJpdHlTZXJ2aWNlLmhhc1JpZ2h0KFwiX2NvblwiLCBcInJcIikudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5jb25zdWx0UmVhZEFjY2VzcyA9IHJlc3VsdHM7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHQoXCJfY29uXCIsIFwidVwiKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHRVcGRhdGVBY2Nlc3MgPSByZXN1bHRzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0c2VjdXJpdHlTZXJ2aWNlLmhhc1JpZ2h0KFwiX2NvblwiLCBcIndcIikudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5jb25zdWx0V3JpdGVBY2Nlc3MgPSByZXN1bHRzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHQvL3NldCBkZW1vZ3JhcGhpYyBpbmZvXG5cdFx0XHRkZW1vZ3JhcGhpY1NlcnZpY2UuZ2V0RGVtb2dyYXBoaWMoY29uc3VsdC5kZW1vZ3JhcGhpY0lkKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zdWx0LmRlbW9ncmFwaGljID0gcmVzdWx0cztcblxuXHRcdFx0XHRcdC8vc2V0IGNlbGwgcGhvbmVcblx0XHRcdFx0XHRjb25zdWx0LmRlbW9ncmFwaGljLmV4dHJhcyA9IEp1bm8uQ29tbW9uLlV0aWwudG9BcnJheShjb25zdWx0LmRlbW9ncmFwaGljLmV4dHJhcyk7XG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb25zdWx0LmRlbW9ncmFwaGljLmV4dHJhcy5sZW5ndGg7IGkrKylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRpZiAoY29uc3VsdC5kZW1vZ3JhcGhpYy5leHRyYXNbaV0ua2V5ID09IFwiZGVtb19jZWxsXCIpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGNvbnN1bHQuZGVtb2dyYXBoaWMuY2VsbFBob25lID0gY29uc3VsdC5kZW1vZ3JhcGhpYy5leHRyYXNbaV0udmFsdWU7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0Y29uc3VsdFNlcnZpY2UuZ2V0TGV0dGVyaGVhZExpc3QoKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zdWx0LmxldHRlcmhlYWRMaXN0ID0gSnVuby5Db21tb24uVXRpbC50b0FycmF5KHJlc3VsdHMuZGF0YSk7XG5cdFx0XHRcdFx0aWYoY29uc3VsdC5sZXR0ZXJoZWFkID09PSBudWxsKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuY2hhbmdlTGV0dGVyaGVhZChjb25zdWx0LmxldHRlcmhlYWRMaXN0WzBdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY29uc3VsdC5sZXR0ZXJoZWFkTGlzdC5sZW5ndGg7IGkrKylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0aWYgKGNvbnN1bHQubGV0dGVyaGVhZExpc3RbaV0uaWQgPT09IGNvbnN1bHQubGV0dGVyaGVhZE5hbWUpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmNoYW5nZUxldHRlcmhlYWQoY29uc3VsdC5sZXR0ZXJoZWFkTGlzdFtpXSk7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3JzKTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblxuXHRcdFx0Ly9zZXQgc3BlY2lhbGlzdCBsaXN0XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNvbnN1bHQuc2VydmljZUxpc3QubGVuZ3RoOyBpKyspXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChjb25zdWx0LnNlcnZpY2VMaXN0W2ldLnNlcnZpY2VJZCA9PSBjb25zdWx0LnNlcnZpY2VJZClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuc3BlY2lhbGlzdHMgPSBKdW5vLkNvbW1vbi5VdGlsLnRvQXJyYXkoY29uc3VsdC5zZXJ2aWNlTGlzdFtpXS5zcGVjaWFsaXN0cyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChjb250cm9sbGVyLnNwZWNpYWxpc3RzLCBmdW5jdGlvbihzcGVjKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoY29uc3VsdC5wcm9mZXNzaW9uYWxTcGVjaWFsaXN0ICYmIHNwZWMuaWQgPT0gY29uc3VsdC5wcm9mZXNzaW9uYWxTcGVjaWFsaXN0LmlkKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc3VsdC5wcm9mZXNzaW9uYWxTcGVjaWFsaXN0ID0gc3BlYztcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdC8vc2V0IGF0dGFjaG1lbnRzXG5cdFx0XHRjb25zdWx0LmF0dGFjaG1lbnRzID0gSnVuby5Db21tb24uVXRpbC50b0FycmF5KGNvbnN1bHQuYXR0YWNobWVudHMpO1xuXHRcdFx0SnVuby5Db25zdWx0cy5Db21tb24uc29ydEF0dGFjaG1lbnREb2NzKGNvbnN1bHQuYXR0YWNobWVudHMpO1xuXHRcdH07XG5cdFx0Y29udHJvbGxlci5pbml0aWFsaXplKCk7XG5cblx0XHRjb250cm9sbGVyLmNoYW5nZUxldHRlcmhlYWQgPSBmdW5jdGlvbiBjaGFuZ2VMZXR0ZXJoZWFkKGxldHRlcmhlYWQpXG5cdFx0e1xuXHRcdFx0Y29uc3VsdC5sZXR0ZXJoZWFkID0gbGV0dGVyaGVhZDtcblxuXHRcdFx0Ly8gdGhlc2UgYXJlIHJlcXVpcmVkIGZvciBjdXJyZW50IHByaW50IGZ1bmN0aW9uYWxpdHlcblx0XHRcdGNvbnN1bHQubGV0dGVyaGVhZE5hbWUgPSBjb25zdWx0LmxldHRlcmhlYWQuaWQ7XG5cdFx0XHRjb25zdWx0LmxldHRlcmhlYWRBZGRyZXNzID0gY29uc3VsdC5sZXR0ZXJoZWFkLmFkZHJlc3M7XG5cdFx0XHRjb25zdWx0LmxldHRlcmhlYWRQaG9uZSA9IGNvbnN1bHQubGV0dGVyaGVhZC5waG9uZTtcblx0XHRcdGNvbnN1bHQubGV0dGVyaGVhZEZheCA9IGNvbnN1bHQubGV0dGVyaGVhZC5mYXg7XG5cdFx0fTtcblxuXHRcdC8vbW9uaXRvciBkYXRhIGNoYW5nZWRcblx0XHRjb250cm9sbGVyLmNvbnN1bHRDaGFuZ2VkID0gMDtcblx0XHQkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBjb250cm9sbGVyLmNvbnN1bHQ7XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdENoYW5nZWQrKztcblx0XHRcdH0pO1xuXG5cdFx0Ly9yZW1pbmQgdXNlciBvZiB1bnNhdmVkIGRhdGFcblx0XHQkc2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24oZXZlbnQpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIuY29uc3VsdENoYW5nZWQgPiAwKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgZGlzY2FyZCA9IGNvbmZpcm0oXCJZb3UgbWF5IGhhdmUgdW5zYXZlZCBkYXRhLiBBcmUgeW91IHN1cmUgdG8gbGVhdmU/XCIpO1xuXHRcdFx0XHRpZiAoIWRpc2NhcmQpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRjb250cm9sbGVyLmNoYW5nZVNlcnZpY2UgPSBmdW5jdGlvbiBjaGFuZ2VTZXJ2aWNlKGlkKVxuXHRcdHtcblx0XHRcdHZhciBpbmRleCA9ICQoXCIjc2VydmljZUlkXCIpWzBdLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHRpZiAoaW5kZXggPT09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5zcGVjaWFsaXN0cyA9IG51bGw7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGNvbnRyb2xsZXIuc3BlY2lhbGlzdHMgPSB0b0FycmF5KGNvbnN1bHQuc2VydmljZUxpc3RbaW5kZXhdLnNwZWNpYWxpc3RzKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci53cml0ZVRvQm94ID0gZnVuY3Rpb24gd3JpdGVUb0JveChyZXN1bHRzLCBib3hJZClcblx0XHR7XG5cdFx0XHR2YXIgaXRlbXMgPSBKdW5vLkNvbW1vbi5VdGlsLnRvQXJyYXkocmVzdWx0cy5zdW1tYXJ5SXRlbSk7XG5cdFx0XHR2YXIgYm94RGF0YSA9IG51bGw7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKVxuXHRcdFx0e1xuXHRcdFx0XHRib3hEYXRhID0gSnVuby5Db21tb24uVXRpbC5hZGROZXdMaW5lKGl0ZW1zW2ldLmRpc3BsYXlOYW1lLCBib3hEYXRhKTtcblx0XHRcdH1cblx0XHRcdGlmIChib3hJZCA9PSBcImNsaW5pY2FsSW5mb1wiKSBjb25zdWx0LmNsaW5pY2FsSW5mbyA9IEp1bm8uQ29tbW9uLlV0aWwuYWRkTmV3TGluZShib3hEYXRhLCBjb25zdWx0LmNsaW5pY2FsSW5mbyk7XG5cdFx0XHRlbHNlIGlmIChib3hJZCA9PSBcImNvbmN1cnJlbnRQcm9ibGVtc1wiKSBjb25zdWx0LmNvbmN1cnJlbnRQcm9ibGVtcyA9IEp1bm8uQ29tbW9uLlV0aWwuYWRkTmV3TGluZShib3hEYXRhLCBjb25zdWx0LmNvbmN1cnJlbnRQcm9ibGVtcyk7XG5cdFx0XHRlbHNlIGlmIChib3hJZCA9PSBcImN1cnJlbnRNZWRzXCIpIGNvbnN1bHQuY3VycmVudE1lZHMgPSBKdW5vLkNvbW1vbi5VdGlsLmFkZE5ld0xpbmUoYm94RGF0YSwgY29uc3VsdC5jdXJyZW50TWVkcyk7XG5cdFx0fTtcblxuXG5cdFx0Y29udHJvbGxlci5nZXRGYW1pbHlIaXN0b3J5ID0gZnVuY3Rpb24gZ2V0RmFtaWx5SGlzdG9yeShib3hJZClcblx0XHR7XG5cdFx0XHRzdW1tYXJ5U2VydmljZS5nZXRGYW1pbHlIaXN0b3J5KGNvbnN1bHQuZGVtb2dyYXBoaWNJZCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYgKHJlc3VsdHMuc3VtbWFyeUl0ZW0ubGVuZ3RoID09PSAwKVxuXHRcdFx0XHRcdFx0YWxlcnQoXCJObyBmYW1pbHkgaGlzdG9yeVwiKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLndyaXRlVG9Cb3gocmVzdWx0cywgYm94SWQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbGVydChcIkVycm9yIGdyYWJiaW5nIGZhbWlseSBoaXN0b3J5IVwiKTtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmdldE1lZGljYWxIaXN0b3J5ID0gZnVuY3Rpb24gZ2V0TWVkaWNhbEhpc3RvcnkoYm94SWQpXG5cdFx0e1xuXHRcdFx0c3VtbWFyeVNlcnZpY2UuZ2V0TWVkaWNhbEhpc3RvcnkoY29uc3VsdC5kZW1vZ3JhcGhpY0lkKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAocmVzdWx0cy5zdW1tYXJ5SXRlbS5sZW5ndGggPT09IDApXG5cdFx0XHRcdFx0XHRhbGVydChcIk5vIG1lZGljYWwgaGlzdG9yeVwiKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLndyaXRlVG9Cb3gocmVzdWx0cywgYm94SWQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbGVydChcIkVycm9yIGdyYWJiaW5nIG1lZGljYWwgaGlzdG9yeSFcIik7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZXRTb2NpYWxIaXN0b3J5ID0gZnVuY3Rpb24gZ2V0U29jaWFsSGlzdG9yeShib3hJZClcblx0XHR7XG5cdFx0XHRzdW1tYXJ5U2VydmljZS5nZXRTb2NpYWxIaXN0b3J5KGNvbnN1bHQuZGVtb2dyYXBoaWNJZCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYgKHJlc3VsdHMuc3VtbWFyeUl0ZW0ubGVuZ3RoID09PSAwKVxuXHRcdFx0XHRcdFx0YWxlcnQoXCJObyBzb2NpYWwgaGlzdG9yeVwiKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLndyaXRlVG9Cb3gocmVzdWx0cywgYm94SWQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbGVydChcIkVycm9yIGdyYWJiaW5nIHNvY2lhbCBoaXN0b3J5IVwiKTtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmdldE9uZ29pbmdDb25jZXJucyA9IGZ1bmN0aW9uIGdldE9uZ29pbmdDb25jZXJucyhib3hJZClcblx0XHR7XG5cdFx0XHRzdW1tYXJ5U2VydmljZS5nZXRPbmdvaW5nQ29uY2VybnMoY29uc3VsdC5kZW1vZ3JhcGhpY0lkKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAocmVzdWx0cy5zdW1tYXJ5SXRlbS5sZW5ndGggPT09IDApXG5cdFx0XHRcdFx0XHRhbGVydChcIk5vIG9uZ29pbmcgY29uY2VybnNcIik7XG5cdFx0XHRcdFx0Y29udHJvbGxlci53cml0ZVRvQm94KHJlc3VsdHMsIGJveElkKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YWxlcnQoXCJFcnJvciBncmFiYmluZyBvbmdvaW5nIGNvbmNlcm5zIVwiKTtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmdldE90aGVyTWVkcyA9IGZ1bmN0aW9uIGdldE90aGVyTWVkcyhib3hJZClcblx0XHR7XG5cdFx0XHRzdW1tYXJ5U2VydmljZS5nZXRPdGhlck1lZHMoY29uc3VsdC5kZW1vZ3JhcGhpY0lkKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAocmVzdWx0cy5zdW1tYXJ5SXRlbS5sZW5ndGggPT09IDApXG5cdFx0XHRcdFx0XHRhbGVydChcIk5vIG90aGVyIG1lZHNcIik7XG5cdFx0XHRcdFx0Y29udHJvbGxlci53cml0ZVRvQm94KHJlc3VsdHMsIGJveElkKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YWxlcnQoXCJFcnJvciBncmFiYmluZyBvdGhlciBtZWRzIVwiKTtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmdldFJlbWluZGVycyA9IGZ1bmN0aW9uIGdldFJlbWluZGVycyhib3hJZClcblx0XHR7XG5cdFx0XHRzdW1tYXJ5U2VydmljZS5nZXRSZW1pbmRlcnMoY29uc3VsdC5kZW1vZ3JhcGhpY0lkKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAocmVzdWx0cy5zdW1tYXJ5SXRlbS5sZW5ndGggPT09IDApXG5cdFx0XHRcdFx0XHRhbGVydChcIk5vIHJlbWluZGVyc1wiKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLndyaXRlVG9Cb3gocmVzdWx0cywgYm94SWQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbGVydChcIkVycm9yIGdyYWJiaW5nIHJlbWluZGVycyFcIik7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Ly8gTmV3IGZ1bmN0aW9uLCBkb2Vzbid0IHdvcmtcblx0XHRjb250cm9sbGVyLmdldEFsbGVyZ2llcyA9IGZ1bmN0aW9uIGdldEFsbGVyZ2llcyhib3hJZClcblx0XHR7XG5cdFx0XHRzdW1tYXJ5U2VydmljZS5nZXRBbGxlcmdpZXMoY29uc3VsdC5kZW1vZ3JhcGhpY0lkKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLndyaXRlVG9Cb3gocmVzdWx0cywgYm94SWQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cdFx0XG5cdFx0Y29udHJvbGxlci5pbnZhbGlkRGF0YSA9IGZ1bmN0aW9uIGludmFsaWREYXRhKClcblx0XHR7XG5cdFx0XHRpZiAoIWNvbnRyb2xsZXIuY29uc3VsdC51cmdlbmN5KVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChcIlBsZWFzZSBzZWxlY3QgYW4gVXJnZW5jeVwiKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWNvbnRyb2xsZXIuY29uc3VsdC5sZXR0ZXJoZWFkTmFtZSlcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQoXCJQbGVhc2Ugc2VsZWN0IGEgTGV0dGVyaGVhZFwiKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWNvbnRyb2xsZXIuY29uc3VsdC5wcm9mZXNzaW9uYWxTcGVjaWFsaXN0KVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChcIlBsZWFzZSBzZWxlY3QgYSBTcGVjaWFsaXN0XCIpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmIChjb250cm9sbGVyLmNvbnN1bHQuZGVtb2dyYXBoaWMgPT0gbnVsbCB8fCBjb250cm9sbGVyLmNvbnN1bHQuZGVtb2dyYXBoaWMgPT0gXCJcIilcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQoXCJFcnJvciEgSW52YWxpZCBwYXRpZW50IVwiKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2V0QXBwb2ludG1lbnRUaW1lID0gZnVuY3Rpb24gc2V0QXBwb2ludG1lbnRUaW1lKClcblx0XHR7XG5cdFx0XHRpZiAoY29uc3VsdC5hcHBvaW50bWVudEhvdXIgIT0gbnVsbCAmJiBjb25zdWx0LmFwcG9pbnRtZW50TWludXRlICE9IG51bGwgJiYgIWNvbnN1bHQucGF0aWVudFdpbGxCb29rKVxuXHRcdFx0e1xuXHRcdFx0XHRhcHB0VGltZSA9IG1vbWVudChEYXRlLm5vdygpKTtcblx0XHRcdFx0YXBwdFRpbWUuc2V0KCdob3VycycsIGNvbnN1bHQuYXBwb2ludG1lbnRIb3VyKTtcblx0XHRcdFx0YXBwdFRpbWUuc2V0KCdtaW51dGUnLCBjb25zdWx0LmFwcG9pbnRtZW50TWludXRlKTtcblx0XHRcdFx0Y29uc3VsdC5hcHBvaW50bWVudFRpbWUgPSBhcHB0VGltZTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0Y29uc3VsdC5hcHBvaW50bWVudFRpbWUgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLm9wZW5BdHRhY2ggPSBmdW5jdGlvbiBvcGVuQXR0YWNoKGF0dGFjaG1lbnQpXG5cdFx0e1xuXHRcdFx0d2luZG93Lm9wZW4oXCIuLi9cIiArIGF0dGFjaG1lbnQudXJsKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5hdHRhY2hGaWxlcyA9IGZ1bmN0aW9uIGF0dGFjaEZpbGVzKClcblx0XHR7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6IFwic3JjL2NvbnN1bHRzL2NvbnN1bHRBdHRhY2htZW50LmpzcFwiLFxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdDb25zdWx0cy5Db25zdWx0UmVxdWVzdEF0dGFjaG1lbnRDb250cm9sbGVyIGFzIGNvbnN1bHRBdHRhY2htZW50Q3RybCcsXG5cdFx0XHRcdFx0d2luZG93Q2xhc3M6IFwiYXR0YWNobWVudC1tb2RhbC13aW5kb3dcIixcblx0XHRcdFx0XHRzaXplOiAnbGcnLFxuXHRcdFx0XHRcdHJlc29sdmU6XG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGNvbnN1bHQ6IGZ1bmN0aW9uKClcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBjb25zdWx0O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChjb25zdWx0LmF0dGFjaG1lbnRzQ2hhbmdlZClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHRDaGFuZ2VkKys7XG5cdFx0XHRcdFx0XHRjb25zdWx0LmF0dGFjaG1lbnRzQ2hhbmdlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Ly9zaG93L2hpZGUgZS1zZW5kIGJ1dHRvblxuXHRcdGNvbnRyb2xsZXIuc2V0RVNlbmRFbmFibGVkID0gZnVuY3Rpb24gc2V0RVNlbmRFbmFibGVkKClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLmVTZW5kRW5hYmxlZCA9IGNvbnN1bHQucHJvZmVzc2lvbmFsU3BlY2lhbGlzdCAhPSBudWxsICYmIGNvbnN1bHQucHJvZmVzc2lvbmFsU3BlY2lhbGlzdC5lRGF0YVVybCAhPSBudWxsICYmIGNvbnN1bHQucHJvZmVzc2lvbmFsU3BlY2lhbGlzdC5lRGF0YVVybC50cmltKCkgIT0gXCJcIjtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zZXRFU2VuZEVuYWJsZWQoKTsgLy9leGVjdXRlIG9uY2Ugb24gZm9ybSBvcGVuXG5cblx0XHRjb250cm9sbGVyLnNhdmUgPSBmdW5jdGlvbiBzYXZlKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdFx0dmFyIHZhbGlkID0gdHJ1ZTtcblxuXHRcdFx0aWYgKCFjb250cm9sbGVyLmNvbnN1bHRXcml0ZUFjY2VzcyAmJiBjb25zdWx0LmlkID09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGFsZXJ0KFwiWW91IGRvbid0IGhhdmUgcmlnaHQgdG8gc2F2ZSBuZXcgY29uc3VsdFwiKTtcblx0XHRcdFx0dmFsaWQgPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGlmICghY29udHJvbGxlci5jb25zdWx0VXBkYXRlQWNjZXNzKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChcIllvdSBkb24ndCBoYXZlIHJpZ2h0IHRvIHVwZGF0ZSBjb25zdWx0XCIpO1xuXHRcdFx0XHR2YWxpZCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGNvbnRyb2xsZXIuaW52YWxpZERhdGEoKSlcblx0XHRcdHtcblx0XHRcdFx0dmFsaWQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aWYodmFsaWQpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdFNhdmluZyA9IHRydWU7IC8vc2hvdyBzYXZpbmcgYmFubmVyXG5cdFx0XHRcdGNvbnRyb2xsZXIuc2V0QXBwb2ludG1lbnRUaW1lKCk7XG5cblx0XHRcdFx0Y29uc3VsdFNlcnZpY2Uuc2F2ZVJlcXVlc3QoY29uc3VsdCkudGhlbihcblx0XHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aWYgKGNvbnN1bHQuaWQgPT0gbnVsbClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoXCIvcmVjb3JkL1wiICsgY29uc3VsdC5kZW1vZ3JhcGhpY0lkICsgXCIvY29uc3VsdC9cIiArIHJlc3VsdHMuaWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzLmlkKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9ycyk7XG5cdFx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoZXJyb3JzKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5maW5hbGx5KFxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24oKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnNldEVTZW5kRW5hYmxlZCgpO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHRTYXZpbmcgPSBmYWxzZTsgLy9oaWRlIHNhdmluZyBiYW5uZXJcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5jb25zdWx0Q2hhbmdlZCA9IDA7IC8vcmVzZXQgY2hhbmdlIGNvdW50XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiSW52YWxpZFwiKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKVxuXHRcdHtcblx0XHRcdGlmICgkbG9jYXRpb24uc2VhcmNoKCkubGlzdCA9PT0gXCJwYXRpZW50XCIpXG5cdFx0XHR7XG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKFwiL3JlY29yZC9cIiArIGNvbnN1bHQuZGVtb2dyYXBoaWNJZCArIFwiL2NvbnN1bHRzXCIpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHQkbG9jYXRpb24ucGF0aChcIi9jb25zdWx0c1wiKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zYXZlQW5kRmF4ID0gZnVuY3Rpb24gc2F2ZUFuZFByaW50KClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnNhdmUoKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlcUlkKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIGRlbW9ncmFwaGljTm8gPSBjb25zdWx0LmRlbW9ncmFwaGljSWQ7XG5cdFx0XHRcdFx0dmFyIGxldHRlcmhlYWRGYXggPSBKdW5vLkNvbW1vbi5VdGlsLm5vTnVsbChjb25zdWx0LmxldHRlcmhlYWQuZmF4KTtcblx0XHRcdFx0XHR2YXIgZmF4ID0gSnVuby5Db21tb24uVXRpbC5ub051bGwoY29uc3VsdC5wcm9mZXNzaW9uYWxTcGVjaWFsaXN0LmZheE51bWJlcik7XG5cblx0XHRcdFx0XHR3aW5kb3cub3BlbihcIi4uL2ZheC9Db3ZlclBhZ2UuanNwP3JlcUlkPVwiICsgcmVxSWQgKyBcIiZkZW1vZ3JhcGhpY05vPVwiICsgZGVtb2dyYXBoaWNObyArIFwiJmxldHRlcmhlYWRGYXg9XCIgKyBsZXR0ZXJoZWFkRmF4ICsgXCImZmF4PVwiICsgZmF4KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZmFpbHVyZShlcnJvcilcblx0XHRcdFx0e1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmVTZW5kID0gZnVuY3Rpb24gZVNlbmQoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLmVTZW5kRW5hYmxlZClcblx0XHRcdHtcblx0XHRcdFx0Y29uc3VsdFNlcnZpY2UuZVNlbmRSZXF1ZXN0KGNvbnN1bHQuaWQpLnRoZW4oXG5cdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGFsZXJ0KHJlc3VsdHMubWVzc2FnZSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmVBbmRQcmludCA9IGZ1bmN0aW9uIHNhdmVBbmRQcmludCgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5zYXZlKCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXFJZClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucHJpbnQocmVxSWQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBmYWlsdXJlKGVycm9yKVxuXHRcdFx0XHR7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucHJpbnQgPSBmdW5jdGlvbiBwcmludChyZXFJZClcblx0XHR7XG5cdFx0XHR3aW5kb3cub3BlbihcIi4uL29zY2FyRW5jb3VudGVyL29zY2FyQ29uc3VsdGF0aW9uUmVxdWVzdC9wcmludFBkZjIuZG8/cmVxSWQ9XCIgKyByZXFJZCArIFwiJmRlbW9ncmFwaGljTm89XCIgKyBjb25zdWx0LmRlbW9ncmFwaGljSWQpO1xuXHRcdH07XG5cdH1cbl0pOyIsImFuZ3VsYXIubW9kdWxlKCdDb25zdWx0cycpLmNvbnRyb2xsZXIoJ0NvbnN1bHRzLkNvbnN1bHRSZXF1ZXN0TGlzdENvbnRyb2xsZXInLCBbXG5cblx0JyRzY29wZScsXG5cdCckdGltZW91dCcsXG5cdCckc3RhdGUnLFxuXHQnJGxvY2F0aW9uJyxcblx0Ly8gJyRkZWZlcicsXG5cdCdOZ1RhYmxlUGFyYW1zJyxcblx0J2NvbnN1bHRTZXJ2aWNlJyxcblx0J3Byb3ZpZGVyU2VydmljZScsXG5cdCdkZW1vZ3JhcGhpY1NlcnZpY2UnLFxuXHQnZGVtb2dyYXBoaWNzU2VydmljZScsXG5cdCdzZWN1cml0eVNlcnZpY2UnLFxuXHQnc3RhdGljRGF0YVNlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkdGltZW91dCxcblx0XHQkc3RhdGUsXG5cdFx0JGxvY2F0aW9uLFxuXHRcdC8vICRkZWZlcixcblx0XHROZ1RhYmxlUGFyYW1zLFxuXHRcdGNvbnN1bHRTZXJ2aWNlLFxuXHRcdHByb3ZpZGVyU2VydmljZSxcblx0XHRkZW1vZ3JhcGhpY1NlcnZpY2UsXG5cdFx0ZGVtb2dyYXBoaWNzU2VydmljZSxcblx0XHRzZWN1cml0eVNlcnZpY2UsXG5cdFx0c3RhdGljRGF0YVNlcnZpY2UpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdC8vZ2V0IGFjY2VzcyByaWdodHNcblx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHQoXCJfY29uXCIsIFwiclwiKS50aGVuKFxuXHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHRSZWFkQWNjZXNzID0gcmVzdWx0cztcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHQoXCJfY29uXCIsIFwidVwiKS50aGVuKFxuXHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHRVcGRhdGVBY2Nlc3MgPSByZXN1bHRzOyAvL3RvIGJlIHVzZWQgd2l0aCBiYXRjaCBvcGVyYXRpb25zIChub3QgeWV0IGltcGxlbWVudGVkKVxuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdH0pO1xuXHRcdHNlY3VyaXR5U2VydmljZS5oYXNSaWdodChcIl9jb25cIiwgXCJ3XCIpLnRoZW4oXG5cdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdFdyaXRlQWNjZXNzID0gcmVzdWx0cztcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblxuXHRcdC8vc2V0IHNlYXJjaCBzdGF0dXNlc1xuXHRcdGNvbnRyb2xsZXIuc3RhdHVzZXMgPSBzdGF0aWNEYXRhU2VydmljZS5nZXRDb25zdWx0UmVxdWVzdFN0YXR1c2VzKCk7XG5cblx0XHQvL2dldCB1cmdlbmNpZXMgbGlzdFxuXHRcdGNvbnRyb2xsZXIudXJnZW5jaWVzID0gc3RhdGljRGF0YVNlcnZpY2UuZ2V0Q29uc3VsdFVyZ2VuY2llcygpO1xuXG5cdFx0Y29udHJvbGxlci5sYXN0UmVzcG9uc2UgPSBcIlwiO1xuXHRcdGNvbnRyb2xsZXIudGVhbXMgPSBbXTtcblx0XHRjb250cm9sbGVyLmNvbnN1bHQgPSB7fTtcblxuXHRcdHZhciBhbGxUZWFtcyA9IFwiQWxsIFRlYW1zXCI7XG5cdFx0Y29udHJvbGxlci5zZWFyY2ggPSB7XG5cdFx0XHR0ZWFtOiBhbGxUZWFtcyxcblx0XHRcdHN0YXJ0SW5kZXg6IDAsXG5cdFx0XHRudW1Ub1JldHVybjogMTBcblx0XHR9O1xuXG5cdFx0cHJvdmlkZXJTZXJ2aWNlLmdldEFjdGl2ZVRlYW1zKCkudGhlbihcblx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci50ZWFtcyA9IHJlc3VsdHM7XG5cdFx0XHRcdGNvbnRyb2xsZXIudGVhbXMudW5zaGlmdChhbGxUZWFtcyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlc3VsdHMpKTtcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGFsZXJ0KGVycm9ycyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblxuXHRcdGNvbnRyb2xsZXIuc2VhcmNoUGF0aWVudHMgPSBmdW5jdGlvbiBzZWFyY2hQYXRpZW50cyh0ZXJtKVxuXHRcdHtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdHR5cGU6ICdOYW1lJyxcblx0XHRcdFx0J3Rlcm0nOiB0ZXJtLFxuXHRcdFx0XHRzdGF0dXM6ICdhY3RpdmUnLFxuXHRcdFx0XHRpbnRlZ3JhdG9yOiBmYWxzZSxcblx0XHRcdFx0b3V0b2Zkb21haW46IHRydWVcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gZGVtb2dyYXBoaWNzU2VydmljZS5zZWFyY2goc2VhcmNoLCAwLCAyNSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciByZXNwID0gW107XG5cdFx0XHRcdFx0Zm9yICh2YXIgeCA9IDA7IHggPCByZXNwb25zZS5jb250ZW50Lmxlbmd0aDsgeCsrKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJlc3AucHVzaChcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0ZGVtb2dyYXBoaWNObzogcmVzcG9uc2UuY29udGVudFt4XS5kZW1vZ3JhcGhpY05vLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiByZXNwb25zZS5jb250ZW50W3hdLmxhc3ROYW1lICsgJywgJyArIHJlc3BvbnNlLmNvbnRlbnRbeF0uZmlyc3ROYW1lXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3A7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNlYXJjaE1ycHMgPSBmdW5jdGlvbiBzZWFyY2hNcnBzKHRlcm0pXG5cdFx0e1xuXHRcdFx0dmFyIHNlYXJjaCA9IHtcblx0XHRcdFx0c2VhcmNoVGVybTogdGVybSxcblx0XHRcdFx0YWN0aXZlOiB0cnVlXG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5zZWFyY2hQcm92aWRlcnMoc2VhcmNoKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIHJlc3AgPSBbXTtcblx0XHRcdFx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IHJlc3BvbnNlLmxlbmd0aDsgeCsrKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJlc3AucHVzaChcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bXJwTm86IHJlc3BvbnNlW3hdLnByb3ZpZGVyTm8sXG5cdFx0XHRcdFx0XHRcdG5hbWU6IHJlc3BvbnNlW3hdLm5hbWVcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gcmVzcDtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIudXBkYXRlTXJwTm8gPSBmdW5jdGlvbiB1cGRhdGVNcnBObyhtb2RlbClcblx0XHR7XG5cdFx0XHRpZiAobW9kZWwgaW5zdGFuY2VvZiBPYmplY3QpXG5cdFx0XHR7IC8vbXJwIHNldCBpbiBzZWFyY2ggYm94XG5cdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLm1ycE5vID0gTnVtYmVyKG1vZGVsLm1ycE5vKTtcblx0XHRcdFx0Y29udHJvbGxlci5jb25zdWx0Lm1ycE5hbWUgPSBtb2RlbC5uYW1lO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0eyAvL21ycCBzcGVjaWZpZWQgaW4gdXJsIChjb21lIGJhY2sgZnJvbSBhbm90aGVyIGNvbnN1bHRzKSBcblx0XHRcdFx0cHJvdmlkZXJTZXJ2aWNlLmdldFByb3ZpZGVyKG1vZGVsKS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHQubXJwTmFtZSA9IHJlc3VsdHMubGFzdE5hbWUgKyBcIiwgXCIgKyByZXN1bHRzLmZpcnN0TmFtZTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnVwZGF0ZURlbW9ncmFwaGljTm8gPSBmdW5jdGlvbiB1cGRhdGVEZW1vZ3JhcGhpY05vKGl0ZW0sIG1vZGVsKVxuXHRcdHtcblx0XHRcdGlmIChpdGVtICE9IG51bGwpXG5cdFx0XHR7IC8vZGVtbyBzZXQgaW4gc2VhcmNoIGJveFxuXHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5kZW1vZ3JhcGhpY05vID0gaXRlbS5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHQuZGVtb2dyYXBoaWNOYW1lID0gaXRlbS5uYW1lO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0eyAvL2RlbW8gc3BlY2lmaWVkIGluIHVybCAoY29tZSBiYWNrIGZyb20gYW5vdGhlciBjb25zdWx0cylcblx0XHRcdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLmdldERlbW9ncmFwaGljKG1vZGVsKS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHQuZGVtb2dyYXBoaWNOYW1lID0gcmVzdWx0cy5sYXN0TmFtZSArIFwiLCBcIiArIHJlc3VsdHMuZmlyc3ROYW1lO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2hlY2tBbGwgPSBmdW5jdGlvbiBjaGVja0FsbCgpXG5cdFx0e1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGNvbnRyb2xsZXIubGFzdFJlc3BvbnNlLCBmdW5jdGlvbihpdGVtKVxuXHRcdFx0e1xuXHRcdFx0XHRpdGVtLmNoZWNrZWQgPSB0cnVlO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2hlY2tOb25lID0gZnVuY3Rpb24gY2hlY2tOb25lKClcblx0XHR7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2goY29udHJvbGxlci5sYXN0UmVzcG9uc2UsIGZ1bmN0aW9uKGl0ZW0pXG5cdFx0XHR7XG5cdFx0XHRcdGl0ZW0uY2hlY2tlZCA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZWRpdENvbnN1bHQgPSBmdW5jdGlvbiBlZGl0Q29uc3VsdChjb25zdWx0KVxuXHRcdHtcblx0XHRcdHZhciB1cmwgPSBcIi9yZWNvcmQvXCIgKyBjb25zdWx0LmRlbW9ncmFwaGljLmRlbW9ncmFwaGljTm8gKyBcIi9jb25zdWx0L1wiICsgY29uc3VsdC5pZDtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHVybCkuc2VhcmNoKGNvbnRyb2xsZXIuc2VhcmNoUGFyYW1zKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5hZGRDb25zdWx0ID0gZnVuY3Rpb24gYWRkQ29uc3VsdCgpXG5cdFx0e1xuXHRcdFx0aWYgKCFjb250cm9sbGVyLmNvbnN1bHRXcml0ZUFjY2Vzcylcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQoXCJZb3UgZG9uJ3QgaGF2ZSByaWdodCB0byBjcmVhdGUgbmV3IGNvbnN1bHRcIik7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciB1cmwgPSBcIi9yZWNvcmQvXCIgKyBjb250cm9sbGVyLnNlYXJjaC5kZW1vZ3JhcGhpY05vICsgXCIvY29uc3VsdC9uZXdcIjtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHVybCkuc2VhcmNoKGNvbnRyb2xsZXIuc2VhcmNoUGFyYW1zKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5yZW1vdmVEZW1vZ3JhcGhpY0Fzc2lnbm1lbnQgPSBmdW5jdGlvbiByZW1vdmVEZW1vZ3JhcGhpY0Fzc2lnbm1lbnQoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLmRlbW9ncmFwaGljTm8gPSBudWxsO1xuXHRcdFx0Y29udHJvbGxlci5jb25zdWx0LmRlbW9ncmFwaGljTmFtZSA9IG51bGw7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucmVtb3ZlTXJwQXNzaWdubWVudCA9IGZ1bmN0aW9uIHJlbW92ZU1ycEFzc2lnbm1lbnQoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLm1ycE5vID0gbnVsbDtcblx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdC5tcnBOYW1lID0gbnVsbDtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5kb1NlYXJjaCA9IGZ1bmN0aW9uIGRvU2VhcmNoKClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnRhYmxlUGFyYW1zLnJlbG9hZCgpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucmVtb3ZlRGVtb2dyYXBoaWNBc3NpZ25tZW50KCk7XG5cdFx0XHRjb250cm9sbGVyLnJlbW92ZU1ycEFzc2lnbm1lbnQoKTtcblxuXHRcdFx0dmFyIHNlYXJjaERlbW9ObyA9ICRzdGF0ZS5wYXJhbXMuZGVtb2dyYXBoaWNObyA9PSBudWxsID8gbnVsbCA6IE51bWJlcigkc3RhdGUucGFyYW1zLmRlbW9ncmFwaGljTm8pO1xuXHRcdFx0Y29udHJvbGxlci5zZWFyY2ggPSB7XG5cdFx0XHRcdHRlYW06IGFsbFRlYW1zLFxuXHRcdFx0XHRzdGFydEluZGV4OiAwLFxuXHRcdFx0XHRudW1Ub1JldHVybjogMTAsXG5cdFx0XHRcdGRlbW9ncmFwaGljTm86IHNlYXJjaERlbW9Ob1xuXHRcdFx0fTtcblx0XHRcdGNvbnRyb2xsZXIuZG9TZWFyY2goKTtcblx0XHR9O1xuXG5cdFx0Ly9yZXRhaW4gc2VhcmNoICYgZmlsdGVycyBmb3IgdXNlcnMgdG8gY29tZSBiYWNrXG5cdFx0Y29udHJvbGxlci5zZXRTZWFyY2hQYXJhbXMgPSBmdW5jdGlvbiBzZXRTZWFyY2hQYXJhbXMoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoUGFyYW1zID0ge307XG5cblx0XHRcdGlmICgkc3RhdGUuJGN1cnJlbnQubmFtZSA9PT0gXCJyZWNvcmQuY29uc3VsdFJlcXVlc3RzXCIpXG5cdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoUGFyYW1zLmxpc3QgPSBcInBhdGllbnRcIjtcblx0XHRcdGVsc2UgaWYgKGNvbnRyb2xsZXIuc2VhcmNoLmRlbW9ncmFwaGljTm8gIT0gbnVsbCkgY29udHJvbGxlci5zZWFyY2hQYXJhbXMuc3JoRGVtb05vID0gY29udHJvbGxlci5zZWFyY2guZGVtb2dyYXBoaWNObztcblxuXHRcdFx0aWYgKGNvbnRyb2xsZXIuc2VhcmNoLm1ycE5vICE9IG51bGwpIGNvbnRyb2xsZXIuc2VhcmNoUGFyYW1zLnNyaE1ycE5vID0gY29udHJvbGxlci5zZWFyY2gubXJwTm87XG5cdFx0XHRpZiAoY29udHJvbGxlci5zZWFyY2guc3RhdHVzICE9IG51bGwpIGNvbnRyb2xsZXIuc2VhcmNoUGFyYW1zLnNyaFN0YXR1cyA9IGNvbnRyb2xsZXIuc2VhcmNoLnN0YXR1cztcblx0XHRcdGlmIChjb250cm9sbGVyLnNlYXJjaC50ZWFtICE9IGFsbFRlYW1zKSBjb250cm9sbGVyLnNlYXJjaFBhcmFtcy5zcmhUZWFtID0gY29udHJvbGxlci5zZWFyY2gudGVhbTtcblx0XHRcdGlmIChjb250cm9sbGVyLnNlYXJjaC5yZWZlcnJhbFN0YXJ0RGF0ZSAhPSBudWxsKSBjb250cm9sbGVyLnNlYXJjaFBhcmFtcy5zcmhSZWZTdGFydERhdGUgPSBjb250cm9sbGVyLnNlYXJjaC5yZWZlcnJhbFN0YXJ0RGF0ZS5nZXRUaW1lKCk7XG5cdFx0XHRpZiAoY29udHJvbGxlci5zZWFyY2gucmVmZXJyYWxFbmREYXRlICE9IG51bGwpIGNvbnRyb2xsZXIuc2VhcmNoUGFyYW1zLnNyaFJlZkVuZERhdGUgPSBjb250cm9sbGVyLnNlYXJjaC5yZWZlcnJhbEVuZERhdGUuZ2V0VGltZSgpO1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIuc2VhcmNoLmFwcG9pbnRtZW50U3RhcnREYXRlICE9IG51bGwpIGNvbnRyb2xsZXIuc2VhcmNoUGFyYW1zLnNyaEFwcHRTdGFydERhdGUgPSBjb250cm9sbGVyLnNlYXJjaC5hcHBvaW50bWVudFN0YXJ0RGF0ZS5nZXRUaW1lKCk7XG5cdFx0XHRpZiAoY29udHJvbGxlci5zZWFyY2guYXBwb2ludG1lbnRFbmREYXRlICE9IG51bGwpIGNvbnRyb2xsZXIuc2VhcmNoUGFyYW1zLnNyaEFwcHRFbmREYXRlID0gY29udHJvbGxlci5zZWFyY2guYXBwb2ludG1lbnRFbmREYXRlLmdldFRpbWUoKTtcblxuXHRcdFx0aWYgKGNvbnRyb2xsZXIuc2VhcmNoLnBhZ2UgIT0gbnVsbCkgY29udHJvbGxlci5zZWFyY2hQYXJhbXMuc3JoVG9QYWdlID0gY29udHJvbGxlci5zZWFyY2gucGFnZTtcblx0XHRcdGlmIChjb250cm9sbGVyLnNlYXJjaC5wZXJQYWdlICE9IG51bGwpIGNvbnRyb2xsZXIuc2VhcmNoUGFyYW1zLnNyaENvdW50UGVyUGFnZSA9IGNvbnRyb2xsZXIuc2VhcmNoLnBlclBhZ2U7XG5cdFx0XHRpZiAoY29udHJvbGxlci5zZWFyY2guc29ydERpcmVjdGlvbiAhPSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaFBhcmFtcy5zcmhTb3J0TW9kZSA9IGNvbnRyb2xsZXIuc2VhcmNoLnNvcnRDb2x1bW47XG5cdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoUGFyYW1zLnNyaFNvcnREaXIgPSBjb250cm9sbGVyLnNlYXJjaC5zb3J0RGlyZWN0aW9uO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmp1c3RPcGVuID0gdHJ1ZTtcblxuXHRcdC8vIGRlZmF1bHQgcGFyYW1ldGVyc1xuXHRcdGNvbnRyb2xsZXIuc2VhcmNoLnNvcnRDb2x1bW49XCJSZWZlcnJhbERhdGVcIjtcblx0XHRjb250cm9sbGVyLnNlYXJjaC5zb3J0RGlyZWN0aW9uPVwiZGVzY1wiO1xuXG5cdFx0Y29udHJvbGxlci50YWJsZVBhcmFtcyA9IG5ldyBOZ1RhYmxlUGFyYW1zKFxuXHRcdHtcblx0XHRcdHBhZ2U6IDEsIC8vIHNob3cgZmlyc3QgcGFnZVxuXHRcdFx0Y291bnQ6IDEwLCAvLyBpbml0aWFsIGNvdW50IHBlciBwYWdlXG5cdFx0XHRzb3J0aW5nOiB7XG5cdFx0XHRcdFJlZmVycmFsRGF0ZTogJ2Rlc2MnXG5cdFx0XHR9XG5cdFx0fSxcblx0XHR7XG5cdFx0XHRnZXREYXRhOiBmdW5jdGlvbihwYXJhbXMpXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLmp1c3RPcGVuKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5nZXRTYXZlZFNlYXJjaFZhbHMoKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLmp1c3RPcGVuID0gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb250cm9sbGVyLnNldFNlYXJjaFBhcmFtcygpO1xuXG5cdFx0XHRcdHZhciBjb3VudCA9IHBhcmFtcy51cmwoKS5jb3VudDtcblx0XHRcdFx0dmFyIHBhZ2UgPSBwYXJhbXMudXJsKCkucGFnZTtcblxuXHRcdFx0XHQvLyBzaG91bGRuJ3QgbmVlZCB0aGVzZSBhbnltb3JlXG5cdFx0XHRcdC8vVE9ETyByZWZhY3RvciBvdXQgb2YgYWxsIHVzZXMgaGVyZSAoSSB0aGluayB0aGVzZSBhcmUgdXNlZCBlbHNld2hlcmUpLlxuXHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5zdGFydEluZGV4ID0gKChwYWdlIC0gMSkgKiBjb3VudCk7XG5cdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLm51bVRvUmV0dXJuID0gcGFyc2VJbnQoY291bnQpO1xuXG5cdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLnBhZ2UgPSBwYXJhbXMudXJsKCkucGFnZTtcblx0XHRcdFx0Y29udHJvbGxlci5zZWFyY2gucGVyUGFnZSA9IHBhcmFtcy51cmwoKS5jb3VudDtcblxuXHRcdFx0XHQvLyBuZWVkIHRvIHBhcnNlIG91dCB0aGUgbmctdGFibGVzIHNvcnQgY29sdW1uL2RpcmVjdGlvbiB2YWx1ZXNcblx0XHRcdFx0Ly8gZm9yIHVzZSBpbiBvdXIgZ2V0IHBhcmFtZXRlcnMuXG5cdFx0XHRcdHZhciBteVJlZ2V4cCA9IC9zb3J0aW5nXFxbKFxcdyspXFxdL2c7XG5cdFx0XHRcdGZvcih2YXIga2V5IGluIHBhcmFtcy51cmwoKSkge1xuXHRcdFx0XHRcdHZhciBtYXRjaCA9IG15UmVnZXhwLmV4ZWMoU3RyaW5nKGtleSkpO1xuXHRcdFx0XHRcdGlmKG1hdGNoKSB7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5zb3J0Q29sdW1uID0gbWF0Y2hbMV07XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5zb3J0RGlyZWN0aW9uID0gcGFyYW1zLnVybCgpW1N0cmluZyhrZXkpXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBjb3B5IHRvIHRoZSBnZXQgcGFyYW1ldGVycyBoYXNoXG5cdFx0XHRcdHZhciBzZWFyY2gxID0gYW5ndWxhci5jb3B5KGNvbnRyb2xsZXIuc2VhcmNoKTtcblxuXHRcdFx0XHRpZiAoc2VhcmNoMS50ZWFtID09PSBhbGxUZWFtcylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNlYXJjaDEudGVhbSA9IG51bGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gY29uc3VsdFNlcnZpY2Uuc2VhcmNoUmVxdWVzdHMoc2VhcmNoMSkudGhlbihcblx0XHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRwYXJhbXMudG90YWwocGFyc2VJbnQocmVzdWx0Lm1ldGEudG90YWxbMF0pKTtcblxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQuZGF0YS5sZW5ndGg7IGkrKylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0dmFyIGNvbnN1bHQgPSByZXN1bHQuZGF0YVtpXTtcblxuXHRcdFx0XHRcdFx0XHQvL2FkZCBzdGF0dXNEZXNjcmlwdGlvblxuXHRcdFx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNvbnRyb2xsZXIuc3RhdHVzZXMubGVuZ3RoOyBqKyspXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29uc3VsdC5zdGF0dXMgPT0gY29udHJvbGxlci5zdGF0dXNlc1tqXS52YWx1ZSlcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdWx0LnN0YXR1c0Rlc2NyaXB0aW9uID0gY29udHJvbGxlci5zdGF0dXNlc1tqXS5uYW1lO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly9hZGQgdXJnZW5jeURlc2NyaXB0aW9uXG5cdFx0XHRcdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgY29udHJvbGxlci51cmdlbmNpZXMubGVuZ3RoOyBqKyspXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29uc3VsdC51cmdlbmN5ID09IGNvbnRyb2xsZXIudXJnZW5jaWVzW2pdLnZhbHVlKVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN1bHQudXJnZW5jeURlc2NyaXB0aW9uID0gY29udHJvbGxlci51cmdlbmNpZXNbal0ubmFtZTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vYWRkIHVyZ2VuY3lDb2xvciBpZiBjb25zdWx0IHVyZ2VuY3k9VXJnZW50KDEpXG5cdFx0XHRcdFx0XHRcdGlmIChjb25zdWx0LnVyZ2VuY3kgPT0gMSlcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN1bHQudXJnZW5jeUNvbG9yID0gXCJ0ZXh0LWRhbmdlclwiOyAvLz0gcmVkIHRleHRcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vYWRkIG5vdGlmaWNhdGlvbiBpZiBvdXRzdGFuZGluZyAoaW5jb21wbGV0ZSByZXF1ZXN0cyA+IDEgbW9udGgpXG5cdFx0XHRcdFx0XHRcdGlmIChjb25zdWx0LnN0YXR1cyAhPSA0ICYmIGNvbnN1bHQuc3RhdHVzICE9IDUgJiYgY29uc3VsdC5zdGF0dXMgIT0gNylcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZWZEYXRlID0gbW9tZW50KGNvbnN1bHQucmVmZXJyYWxEYXRlKS50b0RhdGUoKTtcblx0XHRcdFx0XHRcdFx0XHRyZWZEYXRlLnNldE1vbnRoKHJlZkRhdGUuZ2V0TW9udGgoKSArIDEpO1xuXHRcdFx0XHRcdFx0XHRcdGlmICgobmV3IERhdGUoKSkgPj0gcmVmRGF0ZSlcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdWx0Lm91dHN0YW5kaW5nID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIubGFzdFJlc3BvbnNlID0gcmVzdWx0LmRhdGE7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0LmRhdGE7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0YWxlcnQoZXJyb3JzKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHR9KTtcblxuXHRcdGNvbnRyb2xsZXIuZ2V0U2F2ZWRTZWFyY2hWYWxzID0gZnVuY3Rpb24gZ2V0U2F2ZWRTZWFyY2hWYWxzKClcblx0XHR7XG5cdFx0XHQvL3Byb2Nlc3MgZGVtb2dyYXBoaWNObyBpbiB1cmwsIHJ1biBvbmx5IG9uY2Vcblx0XHRcdGlmICgkc3RhdGUucGFyYW1zLmRlbW9ncmFwaGljTm8gIT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0Ly9jYWxsZWQgZnJvbSBwYXRpZW50IHJlY29yZFxuXHRcdFx0XHRjb250cm9sbGVyLmhpZGVTZWFyY2hQYXRpZW50ID0gdHJ1ZTtcblx0XHRcdFx0Y29udHJvbGxlci5zZWFyY2guZGVtb2dyYXBoaWNObyA9IE51bWJlcigkc3RhdGUucGFyYW1zLmRlbW9ncmFwaGljTm8pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoJGxvY2F0aW9uLnNlYXJjaCgpLnNyaERlbW9ObyAhPSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHQvL2NvbWUgYmFjayBmcm9tIGFub3RoZXIgY29uc3VsdHNcblx0XHRcdFx0Y29udHJvbGxlci5zZWFyY2guZGVtb2dyYXBoaWNObyA9IE51bWJlcigkbG9jYXRpb24uc2VhcmNoKCkuc3JoRGVtb05vKTtcblx0XHRcdFx0Y29udHJvbGxlci51cGRhdGVEZW1vZ3JhcGhpY05vKG51bGwsICRsb2NhdGlvbi5zZWFyY2goKS5zcmhEZW1vTm8pO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3Byb2Nlc3Mgb3RoZXIgc2VhcmNoIHBhcmFtZXRlcnMgaW4gdXJsXG5cdFx0XHRpZiAoJGxvY2F0aW9uLnNlYXJjaCgpLnNyaE1ycE5vICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLm1ycE5vID0gTnVtYmVyKCRsb2NhdGlvbi5zZWFyY2goKS5zcmhNcnBObyk7XG5cdFx0XHRcdGNvbnRyb2xsZXIudXBkYXRlTXJwTm8oJGxvY2F0aW9uLnNlYXJjaCgpLnNyaE1ycE5vKTtcblx0XHRcdH1cblx0XHRcdGlmICgkbG9jYXRpb24uc2VhcmNoKCkuc3JoUmVmU3RhcnREYXRlICE9IG51bGwpIGNvbnRyb2xsZXIuc2VhcmNoLnJlZmVycmFsU3RhcnREYXRlID0gbmV3IERhdGUoTnVtYmVyKCRsb2NhdGlvbi5zZWFyY2goKS5zcmhSZWZTdGFydERhdGUpKTtcblx0XHRcdGlmICgkbG9jYXRpb24uc2VhcmNoKCkuc3JoUmVmRW5kRGF0ZSAhPSBudWxsKSBjb250cm9sbGVyLnNlYXJjaC5yZWZlcnJhbEVuZERhdGUgPSBuZXcgRGF0ZShOdW1iZXIoJGxvY2F0aW9uLnNlYXJjaCgpLnNyaFJlZkVuZERhdGUpKTtcblx0XHRcdGlmICgkbG9jYXRpb24uc2VhcmNoKCkuc3JoQXBwdFN0YXJ0RGF0ZSAhPSBudWxsKSBjb250cm9sbGVyLnNlYXJjaC5hcHBvaW50bWVudFN0YXJ0RGF0ZSA9IG5ldyBEYXRlKE51bWJlcigkbG9jYXRpb24uc2VhcmNoKCkuc3JoQXBwdFN0YXJ0RGF0ZSkpO1xuXHRcdFx0aWYgKCRsb2NhdGlvbi5zZWFyY2goKS5zcmhBcHB0RW5kRGF0ZSAhPSBudWxsKSBjb250cm9sbGVyLnNlYXJjaC5hcHBvaW50bWVudEVuZERhdGUgPSBuZXcgRGF0ZShOdW1iZXIoJGxvY2F0aW9uLnNlYXJjaCgpLnNyaEFwcHRFbmREYXRlKSk7XG5cdFx0XHRpZiAoJGxvY2F0aW9uLnNlYXJjaCgpLnNyaFN0YXR1cyAhPSBudWxsKSBjb250cm9sbGVyLnNlYXJjaC5zdGF0dXMgPSBOdW1iZXIoJGxvY2F0aW9uLnNlYXJjaCgpLnNyaFN0YXR1cyk7XG5cdFx0XHRpZiAoJGxvY2F0aW9uLnNlYXJjaCgpLnNyaFRlYW0gIT0gbnVsbCkgY29udHJvbGxlci5zZWFyY2gudGVhbSA9ICRsb2NhdGlvbi5zZWFyY2goKS5zcmhUZWFtO1xuXHRcdFx0aWYgKCRsb2NhdGlvbi5zZWFyY2goKS5zcmhDb3VudFBlclBhZ2UgIT0gbnVsbCkgY29udHJvbGxlci5zZWFyY2gucGVyUGFnZSA9ICRsb2NhdGlvbi5zZWFyY2goKS5zcmhDb3VudFBlclBhZ2U7XG5cblx0XHRcdGlmICgkbG9jYXRpb24uc2VhcmNoKCkuc3JoVG9QYWdlICE9IG51bGwpIGNvbnRyb2xsZXIuc2VhcmNoLnBhZ2UgPSAkbG9jYXRpb24uc2VhcmNoKCkuc3JoVG9QYWdlO1xuXHRcdFx0aWYgKCRsb2NhdGlvbi5zZWFyY2goKS5zcmhTb3J0TW9kZSAhPSBudWxsICYmICRsb2NhdGlvbi5zZWFyY2goKS5zcmhTb3J0RGlyICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLnNvcnRDb2x1bW4gPSAkbG9jYXRpb24uc2VhcmNoKCkuc29ydE1vZGU7XG5cdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLnNvcnREaXJlY3Rpb24gPSAkbG9jYXRpb24uc2VhcmNoKCkuc3JoU29ydERpcjtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5wb3B1cCA9IGZ1bmN0aW9uIHBvcHVwKHZoZWlnaHQsIHZ3aWR0aCwgdmFycGFnZSwgd2lubmFtZSlcblx0XHR7XG5cdFx0XHR3aW5kb3dwcm9wcyA9IFwiaGVpZ2h0PVwiICsgdmhlaWdodCArIFwiLHdpZHRoPVwiICsgdndpZHRoICsgXCIsbG9jYXRpb249bm8sc2Nyb2xsYmFycz15ZXMsbWVudWJhcnM9bm8sdG9vbGJhcnM9bm8scmVzaXphYmxlPXllcyxzY3JlZW5YPTAsc2NyZWVuWT0wLHRvcD0wLGxlZnQ9MFwiO1xuXHRcdFx0dmFyIHBvcHVwID0gd2luZG93Lm9wZW4odmFycGFnZSwgd2lubmFtZSwgd2luZG93cHJvcHMpO1xuXHRcdFx0aWYgKHBvcHVwICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChwb3B1cC5vcGVuZXIgPT0gbnVsbClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHBvcHVwLm9wZW5lciA9IHNlbGY7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdH1cbl0pOyIsImFuZ3VsYXIubW9kdWxlKCdDb25zdWx0cycpLmNvbnRyb2xsZXIoJ0NvbnN1bHRzLkNvbnN1bHRSZXNwb25zZUF0dGFjaG1lbnRDb250cm9sbGVyJywgW1xuXG5cdCckdWliTW9kYWxJbnN0YW5jZScsXG5cdCdjb25zdWx0U2VydmljZScsXG5cdCdjb25zdWx0JyxcblxuXHRmdW5jdGlvbihcblx0XHQkdWliTW9kYWxJbnN0YW5jZSxcblx0XHRjb25zdWx0U2VydmljZSxcblx0XHRjb25zdWx0KVxuXHR7XG5cdFx0Y29udHJvbGxlci5hdHRoID0ge307XG5cdFx0Y29udHJvbGxlci5hdHRoLnBhdGllbnROYW1lID0gY29uc3VsdC5kZW1vZ3JhcGhpYy5sYXN0TmFtZSArIFwiLCBcIiArIGNvbnN1bHQuZGVtb2dyYXBoaWMuZmlyc3ROYW1lO1xuXG5cdFx0Y29udHJvbGxlci5hdHRoLmF0dGFjaGVkRG9jcyA9IGNvbnN1bHQuYXR0YWNobWVudHM7XG5cdFx0aWYgKGNvbnRyb2xsZXIuYXR0aC5hdHRhY2hlZERvY3NbMF0gIT0gbnVsbCkgY29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXR0YWNoZWREb2MgPSBjb250cm9sbGVyLmF0dGguYXR0YWNoZWREb2NzWzBdO1xuXG5cdFx0dmFyIGNvbnN1bHRJZCA9IDA7XG5cdFx0aWYgKGNvbnN1bHQuaWQgIT0gbnVsbCkgY29uc3VsdElkID0gY29uc3VsdC5pZDtcblx0XHRjb25zdWx0U2VydmljZS5nZXRSZXNwb25zZUF0dGFjaG1lbnRzKGNvbnN1bHRJZCwgY29uc3VsdC5kZW1vZ3JhcGhpYy5kZW1vZ3JhcGhpY05vKS50aGVuKFxuXHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoY29uc3VsdC5hdmFpbGFibGVEb2NzID09IG51bGwpIGNvbnN1bHQuYXZhaWxhYmxlRG9jcyA9IEp1bm8uQ29tbW9uLlV0aWwudG9BcnJheShyZXN1bHRzKTtcblx0XHRcdFx0Y29udHJvbGxlci5hdHRoLmF2YWlsYWJsZURvY3MgPSBjb25zdWx0LmF2YWlsYWJsZURvY3M7XG5cdFx0XHRcdEp1bm8uQ29uc3VsdHMuQ29tbW9uLnNvcnRBdHRhY2htZW50RG9jcyhjb250cm9sbGVyLmF0dGguYXZhaWxhYmxlRG9jcyk7XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLmF0dGguYXZhaWxhYmxlRG9jc1swXSAhPSBudWxsKSBjb250cm9sbGVyLmF0dGguc2VsZWN0ZWRBdmFpbGFibGVEb2MgPSBjb250cm9sbGVyLmF0dGguYXZhaWxhYmxlRG9jc1swXTtcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblxuXHRcdGNvbnRyb2xsZXIub3BlbkRvYyA9IGZ1bmN0aW9uIG9wZW5Eb2MoZG9jKVxuXHRcdHtcblx0XHRcdHdpbmRvdy5vcGVuKFwiLi4vXCIgKyBkb2MudXJsKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5hdHRhY2ggPSBmdW5jdGlvbiBhdHRhY2goKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLmF0dGguc2VsZWN0ZWRBdmFpbGFibGVEb2MgPT0gbnVsbCkgcmV0dXJuO1xuXG5cdFx0XHRjb250cm9sbGVyLmF0dGguYXR0YWNoZWREb2NzLnB1c2goY29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXZhaWxhYmxlRG9jKTtcblx0XHRcdGNvbnRyb2xsZXIuYXR0aC5zZWxlY3RlZEF0dGFjaGVkRG9jID0gY29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXZhaWxhYmxlRG9jO1xuXHRcdFx0Y29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXR0YWNoZWREb2MuYXR0YWNoZWQgPSB0cnVlO1xuXHRcdFx0SnVuby5Db25zdWx0cy5Db21tb24uc29ydEF0dGFjaG1lbnREb2NzKGNvbnRyb2xsZXIuYXR0aC5hdHRhY2hlZERvY3MpO1xuXG5cdFx0XHR2YXIgeCA9ICQoXCIjc2VsQXZhaWxEb2NcIikudmFsKCk7XG5cdFx0XHRjb250cm9sbGVyLmF0dGguYXZhaWxhYmxlRG9jcy5zcGxpY2UoeCwgMSk7XG5cdFx0XHRpZiAoeCA+PSBjb250cm9sbGVyLmF0dGguYXZhaWxhYmxlRG9jcy5sZW5ndGgpIHggPSBjb250cm9sbGVyLmF0dGguYXZhaWxhYmxlRG9jcy5sZW5ndGggLSAxO1xuXHRcdFx0Y29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXZhaWxhYmxlRG9jID0gY29udHJvbGxlci5hdHRoLmF2YWlsYWJsZURvY3NbeF07XG5cblx0XHRcdGNvbnN1bHQuYXR0YWNobWVudHNDaGFuZ2VkID0gdHJ1ZTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5kZXRhY2ggPSBmdW5jdGlvbiBkZXRhY2goKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLmF0dGguc2VsZWN0ZWRBdHRhY2hlZERvYyA9PSBudWxsKSByZXR1cm47XG5cblx0XHRcdGNvbnRyb2xsZXIuYXR0aC5hdmFpbGFibGVEb2NzLnB1c2goY29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXR0YWNoZWREb2MpO1xuXHRcdFx0Y29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXZhaWxhYmxlRG9jID0gY29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXR0YWNoZWREb2M7XG5cdFx0XHRjb250cm9sbGVyLmF0dGguc2VsZWN0ZWRBdmFpbGFibGVEb2MuYXR0YWNoZWQgPSBmYWxzZTtcblx0XHRcdEp1bm8uQ29uc3VsdHMuQ29tbW9uLnNvcnRBdHRhY2htZW50RG9jcyhjb250cm9sbGVyLmF0dGguYXZhaWxhYmxlRG9jcyk7XG5cblx0XHRcdHZhciB4ID0gJChcIiNzZWxBdHRhY2hEb2NcIikudmFsKCk7XG5cdFx0XHRjb250cm9sbGVyLmF0dGguYXR0YWNoZWREb2NzLnNwbGljZSh4LCAxKTtcblx0XHRcdGlmICh4ID49IGNvbnRyb2xsZXIuYXR0aC5hdHRhY2hlZERvY3MubGVuZ3RoKSB4ID0gY29udHJvbGxlci5hdHRoLmF0dGFjaGVkRG9jcy5sZW5ndGggLSAxO1xuXHRcdFx0Y29udHJvbGxlci5hdHRoLnNlbGVjdGVkQXR0YWNoZWREb2MgPSBjb250cm9sbGVyLmF0dGguYXR0YWNoZWREb2NzW3hdO1xuXG5cdFx0XHRjb25zdWx0LmF0dGFjaG1lbnRzQ2hhbmdlZCA9IHRydWU7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZG9uZSA9IGZ1bmN0aW9uIGRvbmUoKVxuXHRcdHtcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKCk7XG5cdFx0fTtcblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ0NvbnN1bHRzJykuY29udHJvbGxlcignQ29uc3VsdHMuQ29uc3VsdFJlc3BvbnNlQ29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRodHRwJyxcblx0JyRyZXNvdXJjZScsXG5cdCckbG9jYXRpb24nLFxuXHQnJHVpYk1vZGFsJyxcblx0J2NvbnN1bHRTZXJ2aWNlJyxcblx0J2RlbW9ncmFwaGljU2VydmljZScsXG5cdCdzZWN1cml0eVNlcnZpY2UnLFxuXHQnc3VtbWFyeVNlcnZpY2UnLFxuXHQnc3RhdGljRGF0YVNlcnZpY2UnLFxuXHQnY29uc3VsdCcsXG5cdCd1c2VyJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JGh0dHAsXG5cdFx0JHJlc291cmNlLFxuXHRcdCRsb2NhdGlvbixcblx0XHQkdWliTW9kYWwsXG5cdFx0Y29uc3VsdFNlcnZpY2UsXG5cdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLFxuXHRcdHNlY3VyaXR5U2VydmljZSxcblx0XHRzdW1tYXJ5U2VydmljZSxcblx0XHRzdGF0aWNEYXRhU2VydmljZSxcblx0XHRjb25zdWx0LFxuXHRcdHVzZXIpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXIuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHQvL2dldCBhY2Nlc3MgcmlnaHRzXG5cdFx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHQoXCJfY29uXCIsIFwiclwiKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHRSZWFkQWNjZXNzID0gcmVzdWx0cztcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHQoXCJfY29uXCIsIFwidVwiKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHRVcGRhdGVBY2Nlc3MgPSByZXN1bHRzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHRcdHNlY3VyaXR5U2VydmljZS5oYXNSaWdodChcIl9jb25cIiwgXCJ3XCIpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdFdyaXRlQWNjZXNzID0gcmVzdWx0cztcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdCA9IGNvbnN1bHQ7XG5cdFx0XHRjb25zdWx0LnJlZmVycmluZ0RvY3Rvckxpc3QgPSBKdW5vLkNvbW1vbi5VdGlsLnRvQXJyYXkoY29uc3VsdC5yZWZlcnJpbmdEb2N0b3JMaXN0KTtcblx0XHRcdGNvbnN1bHQuZmF4TGlzdCA9IEp1bm8uQ29tbW9uLlV0aWwudG9BcnJheShjb25zdWx0LmZheExpc3QpO1xuXHRcdFx0Y29uc3VsdC5zZW5kVG9MaXN0ID0gSnVuby5Db21tb24uVXRpbC50b0FycmF5KGNvbnN1bHQuc2VuZFRvTGlzdCk7XG5cblx0XHRcdC8vc2V0IGF0dGFjaG1lbnRzXG5cdFx0XHRjb25zdWx0LmF0dGFjaG1lbnRzID0gSnVuby5Db21tb24uVXRpbC50b0FycmF5KGNvbnN1bHQuYXR0YWNobWVudHMpO1xuXHRcdFx0SnVuby5Db25zdWx0cy5Db21tb24uc29ydEF0dGFjaG1lbnREb2NzKGNvbnN1bHQuYXR0YWNobWVudHMpO1xuXG5cblx0XHRcdGNvbnN1bHRTZXJ2aWNlLmdldExldHRlcmhlYWRMaXN0KCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc3VsdC5sZXR0ZXJoZWFkTGlzdCA9IEp1bm8uQ29tbW9uLlV0aWwudG9BcnJheShyZXN1bHRzLmRhdGEpO1xuXG5cdFx0XHRcdFx0Ly9zZXQgZGVmYXVsdCBsZXR0ZXJoZWFkXG5cdFx0XHRcdFx0aWYoY29uc3VsdC5sZXR0ZXJoZWFkID09PSBudWxsKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuY2hhbmdlTGV0dGVyaGVhZChjb25zdWx0LmxldHRlcmhlYWRMaXN0WzBdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY29uc3VsdC5sZXR0ZXJoZWFkTGlzdC5sZW5ndGg7IGkrKylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0aWYgKGNvbnN1bHQubGV0dGVyaGVhZExpc3RbaV0uaWQgPT09IGNvbnN1bHQubGV0dGVyaGVhZE5hbWUpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmNoYW5nZUxldHRlcmhlYWQoY29uc3VsdC5sZXR0ZXJoZWFkTGlzdFtpXSk7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cblx0XHRcdC8vc2hvdyByZWZlcnJpbmdEb2N0b3IgaW4gbGlzdFxuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGNvbnN1bHQucmVmZXJyaW5nRG9jdG9yTGlzdCwgZnVuY3Rpb24ocmVmZXJyaW5nRG9jKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihjb25zdWx0LnJlZmVycmluZ0RvY3RvciAhPT0gbnVsbClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChyZWZlcnJpbmdEb2MuaWQgPT09IGNvbnN1bHQucmVmZXJyaW5nRG9jdG9yLmlkKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnN1bHQucmVmZXJyaW5nRG9jdG9yID0gcmVmZXJyaW5nRG9jO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdC8vc2V0IHBhdGllbnQgY2VsbCBwaG9uZVxuXHRcdFx0Y29uc3VsdC5kZW1vZ3JhcGhpYy5leHRyYXMgPSBKdW5vLkNvbW1vbi5VdGlsLnRvQXJyYXkoY29uc3VsdC5kZW1vZ3JhcGhpYy5leHRyYXMpO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb25zdWx0LmRlbW9ncmFwaGljLmV4dHJhcy5sZW5ndGg7IGkrKylcblx0XHRcdHtcblx0XHRcdFx0aWYgKGNvbnN1bHQuZGVtb2dyYXBoaWMuZXh0cmFzW2ldLmtleSA9PSBcImRlbW9fY2VsbFwiKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc3VsdC5kZW1vZ3JhcGhpYy5jZWxsUGhvbmUgPSBjb25zdWx0LmRlbW9ncmFwaGljLmV4dHJhc1tpXS52YWx1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0Y29udHJvbGxlci5pbml0aWFsaXplKCk7XG5cblx0XHRjb250cm9sbGVyLmNoYW5nZUxldHRlcmhlYWQgPSBmdW5jdGlvbiBjaGFuZ2VMZXR0ZXJoZWFkKGxldHRlcmhlYWQpXG5cdFx0e1xuXHRcdFx0Y29uc3VsdC5sZXR0ZXJoZWFkID0gbGV0dGVyaGVhZDtcblxuXHRcdFx0Ly8gdGhlc2UgYXJlIHJlcXVpcmVkIGZvciBjdXJyZW50IHByaW50IGZ1bmN0aW9uYWxpdHlcblx0XHRcdGNvbnN1bHQubGV0dGVyaGVhZE5hbWUgPSBjb25zdWx0LmxldHRlcmhlYWQuaWQ7XG5cdFx0XHRjb25zdWx0LmxldHRlcmhlYWRBZGRyZXNzID0gY29uc3VsdC5sZXR0ZXJoZWFkLmFkZHJlc3M7XG5cdFx0XHRjb25zdWx0LmxldHRlcmhlYWRQaG9uZSA9IGNvbnN1bHQubGV0dGVyaGVhZC5waG9uZTtcblx0XHRcdGNvbnN1bHQubGV0dGVyaGVhZEZheCA9IGNvbnN1bHQubGV0dGVyaGVhZC5mYXg7XG5cdFx0fTtcblxuXG5cdFx0Y29udHJvbGxlci51cmdlbmNpZXMgPSBzdGF0aWNEYXRhU2VydmljZS5nZXRDb25zdWx0VXJnZW5jaWVzKCk7XG5cdFx0Y29udHJvbGxlci5zdGF0dXNlcyA9IHN0YXRpY0RhdGFTZXJ2aWNlLmdldENvbnN1bHRSZXNwb25zZVN0YXR1c2VzKCk7XG5cdFx0Y29udHJvbGxlci5ob3VycyA9IHN0YXRpY0RhdGFTZXJ2aWNlLmdldEhvdXJzKCk7XG5cdFx0Y29udHJvbGxlci5taW51dGVzID0gc3RhdGljRGF0YVNlcnZpY2UuZ2V0TWludXRlcygpO1xuXG5cdFx0Y29udHJvbGxlci5wYXJzZVRpbWUgPSBmdW5jdGlvbiBwYXJzZVRpbWUodGltZSlcblx0XHR7XG5cdFx0XHR2YXIgdEFycmF5ID0gdGltZS5zcGxpdChcIjpcIik7XG5cdFx0XHRjb25zdWx0LmFwcG9pbnRtZW50SG91ciA9IHRBcnJheVswXTtcblx0XHRcdGNvbnN1bHQuYXBwb2ludG1lbnRNaW51dGUgPSB0QXJyYXlbMV07XG5cdFx0fTtcblx0XHQvKiBJZiBhcHBvaW50bWVudCB0aW1lIGlzIHByZXNlbnQsIHdlIG11c3QgcGFyc2UgdGhlIGhvdXJzIGFuZCBtaW51dGVzIGluIG9yZGVyIHRvXG5cdFx0ICAgcG9wdWxhdGUgdGhlIGhvdXIgYW5kIG1pbnV0ZSBzZWxlY3RvcnMgKi9cblx0XHRpZiAoY29uc3VsdC5hcHBvaW50bWVudFRpbWUgIT09IG51bGwpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5wYXJzZVRpbWUoY29uc3VsdC5hcHBvaW50bWVudFRpbWUpO1xuXG5cdFx0fVxuXG5cdFx0Ly9tb25pdG9yIGRhdGEgY2hhbmdlZFxuXHRcdGNvbnRyb2xsZXIuY29uc3VsdENoYW5nZWQgPSAtMTtcblx0XHQkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBjb250cm9sbGVyLmNvbnN1bHQ7XG5cdFx0XHR9LCBmdW5jdGlvbigpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdENoYW5nZWQrKztcblx0XHRcdH0pO1xuXG5cdFx0Ly9yZW1pbmQgdXNlciBvZiB1bnNhdmVkIGRhdGFcblx0XHQkc2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24oZXZlbnQpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIuY29uc3VsdENoYW5nZWQgPiAwKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgZGlzY2FyZCA9IGNvbmZpcm0oXCJZb3UgbWF5IGhhdmUgdW5zYXZlZCBkYXRhLiBBcmUgeW91IHN1cmUgdG8gbGVhdmU/XCIpO1xuXHRcdFx0XHRpZiAoIWRpc2NhcmQpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRjb250cm9sbGVyLndyaXRlVG9Cb3ggPSBmdW5jdGlvbiB3cml0ZVRvQm94KGRhdGEsIGJveElkKVxuXHRcdHtcblx0XHRcdHZhciBpdGVtcyA9IEp1bm8uQ29tbW9uLlV0aWwudG9BcnJheShkYXRhLnN1bW1hcnlJdGVtKTtcblx0XHRcdHZhciBib3hEYXRhID0gbnVsbDtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspXG5cdFx0XHR7XG5cdFx0XHRcdGJveERhdGEgPSBKdW5vLkNvbW1vbi5VdGlsLmFkZE5ld0xpbmUoaXRlbXNbaV0uZGlzcGxheU5hbWUsIGJveERhdGEpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGJveElkID09IFwiY2xpbmljYWxJbmZvXCIpIGNvbnN1bHQuY2xpbmljYWxJbmZvID0gSnVuby5Db21tb24uVXRpbC5hZGROZXdMaW5lKGJveERhdGEsIGNvbnN1bHQuY2xpbmljYWxJbmZvKTtcblx0XHRcdGVsc2UgaWYgKGJveElkID09IFwiY29uY3VycmVudFByb2JsZW1zXCIpIGNvbnN1bHQuY29uY3VycmVudFByb2JsZW1zID0gSnVuby5Db21tb24uVXRpbC5hZGROZXdMaW5lKGJveERhdGEsIGNvbnN1bHQuY29uY3VycmVudFByb2JsZW1zKTtcblx0XHRcdGVsc2UgaWYgKGJveElkID09IFwiY3VycmVudE1lZHNcIikgY29uc3VsdC5jdXJyZW50TWVkcyA9IEp1bm8uQ29tbW9uLlV0aWwuYWRkTmV3TGluZShib3hEYXRhLCBjb25zdWx0LmN1cnJlbnRNZWRzKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZXRGYW1pbHlIaXN0b3J5ID0gZnVuY3Rpb24gZ2V0RmFtaWx5SGlzdG9yeShib3hJZClcblx0XHR7XG5cdFx0XHRzdW1tYXJ5U2VydmljZS5nZXRGYW1pbHlIaXN0b3J5KGNvbnN1bHQuZGVtb2dyYXBoaWMuZGVtb2dyYXBoaWNObykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYocmVzdWx0cy5zdW1tYXJ5SXRlbS5sZW5ndGggPT09IDApXG5cdFx0XHRcdFx0XHRhbGVydChcIk5vIGZhbWlseSBoaXN0b3J5XCIpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIud3JpdGVUb0JveChyZXN1bHRzLCBib3hJZCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGFsZXJ0KFwiRXJyb3IgZ3JhYmJpbmcgZmFtaWx5IGhpc3RvcnkhXCIpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cdFx0Y29udHJvbGxlci5nZXRNZWRpY2FsSGlzdG9yeSA9IGZ1bmN0aW9uIGdldE1lZGljYWxIaXN0b3J5KGJveElkKVxuXHRcdHtcblx0XHRcdHN1bW1hcnlTZXJ2aWNlLmdldE1lZGljYWxIaXN0b3J5KGNvbnN1bHQuZGVtb2dyYXBoaWMuZGVtb2dyYXBoaWNObykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYocmVzdWx0cy5zdW1tYXJ5SXRlbS5sZW5ndGggPT09IDApXG5cdFx0XHRcdFx0XHRhbGVydChcIk5vIG1lZGljYWwgaGlzdG9yeVwiKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLndyaXRlVG9Cb3gocmVzdWx0cywgYm94SWQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbGVydChcIkVycm9yIGdyYWJiaW5nIG1lZGljYWwgaGlzdG9yeSFcIik7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLmdldFNvY2lhbEhpc3RvcnkgPSBmdW5jdGlvbiBnZXRTb2NpYWxIaXN0b3J5KGJveElkKVxuXHRcdHtcblx0XHRcdHN1bW1hcnlTZXJ2aWNlLmdldFNvY2lhbEhpc3RvcnkoY29uc3VsdC5kZW1vZ3JhcGhpYy5kZW1vZ3JhcGhpY05vKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZihyZXN1bHRzLnN1bW1hcnlJdGVtLmxlbmd0aCA9PT0gMClcblx0XHRcdFx0XHRcdGFsZXJ0KFwiTm8gc29jaWFsIGhpc3RvcnlcIik7XG5cdFx0XHRcdFx0Y29udHJvbGxlci53cml0ZVRvQm94KHJlc3VsdHMsIGJveElkKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YWxlcnQoXCJFcnJvciBncmFiYmluZyBzb2NpYWwgaGlzdG9yeSFcIik7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLmdldE9uZ29pbmdDb25jZXJucyA9IGZ1bmN0aW9uIGdldE9uZ29pbmdDb25jZXJucyhib3hJZClcblx0XHR7XG5cdFx0XHRzdW1tYXJ5U2VydmljZS5nZXRPbmdvaW5nQ29uY2VybnMoY29uc3VsdC5kZW1vZ3JhcGhpYy5kZW1vZ3JhcGhpY05vKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZihyZXN1bHRzLnN1bW1hcnlJdGVtLmxlbmd0aCA9PT0gMClcblx0XHRcdFx0XHRcdGFsZXJ0KFwiTm8gb25nb2luZyBjb25jZXJuc1wiKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLndyaXRlVG9Cb3gocmVzdWx0cywgYm94SWQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbGVydChcIkVycm9yIGdyYWJiaW5nIG9uZ29pbmcgY29uY2VybnMhXCIpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cdFx0Y29udHJvbGxlci5nZXRPdGhlck1lZHMgPSBmdW5jdGlvbiBnZXRPdGhlck1lZHMoYm94SWQpXG5cdFx0e1xuXHRcdFx0c3VtbWFyeVNlcnZpY2UuZ2V0T3RoZXJNZWRzKGNvbnN1bHQuZGVtb2dyYXBoaWMuZGVtb2dyYXBoaWNObykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYocmVzdWx0cy5zdW1tYXJ5SXRlbS5sZW5ndGggPT09IDApXG5cdFx0XHRcdFx0XHRhbGVydChcIk5vIG90aGVyIG1lZHNcIik7XG5cdFx0XHRcdFx0Y29udHJvbGxlci53cml0ZVRvQm94KHJlc3VsdHMsIGJveElkKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YWxlcnQoXCJFcnJvciBncmFiYmluZyBvdGhlciBtZWRzIVwiKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXIuZ2V0UmVtaW5kZXJzID0gZnVuY3Rpb24gZ2V0UmVtaW5kZXJzKGJveElkKVxuXHRcdHtcblx0XHRcdHN1bW1hcnlTZXJ2aWNlLmdldFJlbWluZGVycyhjb25zdWx0LmRlbW9ncmFwaGljLmRlbW9ncmFwaGljTm8pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKHJlc3VsdHMuc3VtbWFyeUl0ZW0ubGVuZ3RoID09PSAwKVxuXHRcdFx0XHRcdFx0YWxlcnQoXCJObyByZW1pbmRlcnNcIik7XG5cdFx0XHRcdFx0Y29udHJvbGxlci53cml0ZVRvQm94KHJlc3VsdHMsIGJveElkKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YWxlcnQoXCJFcnJvciBncmFiYmluZyByZW1pbmRlcnMhXCIpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmludmFsaWREYXRhID0gZnVuY3Rpb24gaW52YWxpZERhdGEoKVxuXHRcdHtcblx0XHRcdGlmICghY29udHJvbGxlci5jb25zdWx0LnVyZ2VuY3kpXG5cdFx0XHR7XG5cdFx0XHRcdGFsZXJ0KFwiUGxlYXNlIHNlbGVjdCBhbiBVcmdlbmN5XCIpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmICghY29udHJvbGxlci5jb25zdWx0LmxldHRlcmhlYWROYW1lKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChcIlBsZWFzZSBzZWxlY3QgYSBMZXR0ZXJoZWFkXCIpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmIChKdW5vLkNvbW1vbi5VdGlsLmlzVW5kZWZpbmVkT3JOdWxsKGNvbnRyb2xsZXIuY29uc3VsdC5yZWZlcnJpbmdEb2N0b3IpKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChcIlBsZWFzZSBzZWxlY3QgYSBSZWZlcnJpbmcgRG9jdG9yXCIpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmICghY29udHJvbGxlci5jb25zdWx0LmRlbW9ncmFwaGljIHx8IGNvbnRyb2xsZXIuY29uc3VsdC5kZW1vZ3JhcGhpYyA9PT0gXCJcIilcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQoXCJFcnJvciEgSW52YWxpZCBwYXRpZW50IVwiKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2V0QXBwb2ludG1lbnRUaW1lID0gZnVuY3Rpb24gc2V0QXBwb2ludG1lbnRUaW1lKClcblx0XHR7XG5cdFx0XHRpZiAoY29uc3VsdC5hcHBvaW50bWVudEhvdXIgIT09IG51bGwgJiYgY29uc3VsdC5hcHBvaW50bWVudE1pbnV0ZSAhPT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0YXBwdFRpbWUgPSBtb21lbnQoRGF0ZS5ub3coKSk7XG5cdFx0XHRcdGFwcHRUaW1lLnNldCgnaG91cnMnLCBjb25zdWx0LmFwcG9pbnRtZW50SG91cik7XG5cdFx0XHRcdGFwcHRUaW1lLnNldCgnbWludXRlJywgY29uc3VsdC5hcHBvaW50bWVudE1pbnV0ZSk7XG5cdFx0XHRcdGNvbnN1bHQuYXBwb2ludG1lbnRUaW1lID0gYXBwdFRpbWU7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnN1bHQuYXBwb2ludG1lbnRUaW1lID0gbnVsbDtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5vcGVuQXR0YWNoID0gZnVuY3Rpb24gb3BlbkF0dGFjaChhdHRhY2htZW50KVxuXHRcdHtcblx0XHRcdHdpbmRvdy5vcGVuKFwiLi4vXCIgKyBhdHRhY2htZW50LnVybCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuYXR0YWNoRmlsZXMgPSBmdW5jdGlvbiBhdHRhY2hGaWxlcygpXG5cdFx0e1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbihcblx0XHRcdHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6IFwic3JjL2NvbnN1bHRzL2NvbnN1bHRBdHRhY2htZW50LmpzcFwiLFxuXHRcdFx0XHRjb250cm9sbGVyOiBcIkNvbnN1bHRzLkNvbnN1bHRSZXNwb25zZUF0dGFjaG1lbnRDb250cm9sbGVyIGFzIGNvbnN1bHRBdHRhY2htZW50Q3RybFwiLFxuXHRcdFx0XHR3aW5kb3dDbGFzczogXCJhdHRhY2htZW50LW1vZGFsLXdpbmRvd1wiLFxuXHRcdFx0XHRiYWNrZHJvcDogXCJzdGF0aWNcIixcblx0XHRcdFx0cmVzb2x2ZTpcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnN1bHQ6IGZ1bmN0aW9uKClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY29uc3VsdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAoY29uc3VsdC5hdHRhY2htZW50c0NoYW5nZWQpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5jb25zdWx0Q2hhbmdlZCsrO1xuXHRcdFx0XHRcdFx0Y29uc3VsdC5hdHRhY2htZW50c0NoYW5nZWQgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmUgPSBmdW5jdGlvbiBzYXZlKClcblx0XHR7XG5cdFx0XHRpZiAoIWNvbnRyb2xsZXIuY29uc3VsdFdyaXRlQWNjZXNzICYmIGNvbnN1bHQuaWQgPT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQoXCJZb3UgZG9uJ3QgaGF2ZSByaWdodCB0byBzYXZlIG5ldyBjb25zdWx0XCIpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWNvbnRyb2xsZXIuY29uc3VsdFVwZGF0ZUFjY2Vzcylcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQoXCJZb3UgZG9uJ3QgaGF2ZSByaWdodCB0byB1cGRhdGUgY29uc3VsdFwiKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY29udHJvbGxlci5pbnZhbGlkRGF0YSgpKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdFNhdmluZyA9IHRydWU7IC8vc2hvdyBzYXZpbmcgYmFubmVyXG5cdFx0XHRjb250cm9sbGVyLnNldEFwcG9pbnRtZW50VGltZSgpO1xuXG5cdFx0XHRjb25zdWx0U2VydmljZS5zYXZlUmVzcG9uc2UoY29uc3VsdCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly91cGRhdGUgdXJsIGZvciBuZXcgY29uc3VsdGF0aW9uXG5cdFx0XHRcdFx0aWYgKGNvbnN1bHQuaWQgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKFwiL3JlY29yZC9cIiArIGNvbnN1bHQuZGVtb2dyYXBoaWMuZGVtb2dyYXBoaWNObyArIFwiL2NvbnN1bHRSZXNwb25zZS9cIiArIHJlc3VsdHMuYm9keS5pZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdFNhdmluZyA9IGZhbHNlOyAvL2hpZGUgc2F2aW5nIGJhbm5lclxuXHRcdFx0Y29udHJvbGxlci5jb25zdWx0Q2hhbmdlZCA9IC0xOyAvL3Jlc2V0IGNoYW5nZSBjb3VudFxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2xvc2UgPSBmdW5jdGlvbiBjbG9zZSgpXG5cdFx0e1xuXHRcdFx0aWYgKCRsb2NhdGlvbi5zZWFyY2goKS5saXN0ID09PSBcInBhdGllbnRcIikgJGxvY2F0aW9uLnBhdGgoXCIvcmVjb3JkL1wiICsgY29uc3VsdC5kZW1vZ3JhcGhpYy5kZW1vZ3JhcGhpY05vICsgXCIvY29uc3VsdFJlc3BvbnNlc1wiKTtcblx0XHRcdGVsc2UgJGxvY2F0aW9uLnBhdGgoXCIvY29uc3VsdFJlc3BvbnNlc1wiKTtcblx0XHR9O1xuXG5cdFx0Ly9mYXggJiBwcmludCBmdW5jdGlvbnNcblx0XHR2YXIgcF9wYWdlMSA9IFwiPGh0bWw+PHN0eWxlPmJvZHl7d2lkdGg6ODAwcHg7Zm9udC1mYW1pbHk6YXJpYWwsdmVyZGFuYSx0YWhvbWEsaGVsdmV0aWNhLHNhbnMgc2VyaWZ9dGFibGV7d2lkdGg6MTAwJX10aHt0ZXh0LWFsaWduOmxlZnQ7Zm9udC13ZWlnaHQ6Ym9sZDt3aWR0aDoxcHg7d2hpdGUtc3BhY2U6bm93cmFwfXRke3ZlcnRpY2FsLWFsaWduOnRvcH1sYWJlbHtmb250LXdlaWdodDpib2xkfWVte2ZvbnQtc2l6ZTpzbWFsbH0ubGFyZ2V7Zm9udC1zaXplOmxhcmdlfS5jZW50ZXJ7dGV4dC1hbGlnbjpjZW50ZXJ9PC9zdHlsZT48c3R5bGUgbWVkaWE9J3ByaW50Jz5idXR0b257ZGlzcGxheTpub25lfS5ub3ByaW50e2Rpc3BsYXk6bm9uZX08L3N0eWxlPjxzY3JpcHQ+ZnVuY3Rpb24gcHJpbnRBdHRhY2htZW50cyh1cmwpe3dpbmRvdy5vcGVuKCcuLi8nK3VybCk7fTwvc2NyaXB0Pjxib2R5PlwiO1xuXG5cdFx0Y29udHJvbGxlci5zZW5kRmF4ID0gZnVuY3Rpb24gc2VuZEZheCgpXG5cdFx0e1xuXHRcdFx0dmFyIHBfdXJnZW5jeSA9IEp1bm8uQ29tbW9uLlV0aWwudG9UcmltbWVkU3RyaW5nKGNvbnRyb2xsZXIudXJnZW5jaWVzWyQoXCIjdXJnZW5jeVwiKS52YWwoKV0ubmFtZSk7XG5cdFx0XHR2YXIgcF9sZXR0ZXJoZWFkTmFtZSA9IEp1bm8uQ29tbW9uLlV0aWwudG9UcmltbWVkU3RyaW5nKGNvbnN1bHQubGV0dGVyaGVhZExpc3RbJChcIiNsZXR0ZXJoZWFkXCIpLnZhbCgpXS5uYW1lKTtcblx0XHRcdHZhciBwX3BhZ2UyID0gSnVuby5Db21tb24uVXRpbC5nZXRQcmludFBhZ2UyKHBfdXJnZW5jeSwgcF9sZXR0ZXJoZWFkTmFtZSwgY29uc3VsdCwgdXNlcik7XG5cblx0XHRcdHZhciBjb25zdWx0UmVzcG9uc2VQYWdlID0gZW5jb2RlVVJJQ29tcG9uZW50KHBfcGFnZTEgKyBwX3BhZ2UyKTtcblx0XHRcdHZhciByZXFJZCA9IGNvbnN1bHQuaWQ7XG5cdFx0XHR2YXIgZGVtb2dyYXBoaWNObyA9IGNvbnN1bHQuZGVtb2dyYXBoaWMuZGVtb2dyYXBoaWNObztcblx0XHRcdHZhciBsZXR0ZXJoZWFkRmF4ID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5sZXR0ZXJoZWFkRmF4KTtcblx0XHRcdHZhciBmYXggPSBKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyhjb25zdWx0LnJlZmVycmluZ0RvY3Rvci5mYXhOdW1iZXIpO1xuXG5cdFx0XHR3aW5kb3cub3BlbihcIi4uL2ZheC9Db3ZlclBhZ2UuanNwP2NvbnN1bHRSZXNwb25zZVBhZ2U9XCIgKyBjb25zdWx0UmVzcG9uc2VQYWdlICsgXCImcmVxSWQ9XCIgKyByZXFJZCArIFwiJmRlbW9ncmFwaGljTm89XCIgKyBkZW1vZ3JhcGhpY05vICsgXCImbGV0dGVyaGVhZEZheD1cIiArIGxldHRlcmhlYWRGYXggKyBcIiZmYXg9XCIgKyBmYXgpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnByaW50UHJldmlldyA9IGZ1bmN0aW9uIHByaW50UHJldmlldygpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIuaW52YWxpZERhdGEoKSkgcmV0dXJuO1xuXG5cdFx0XHR2YXIgcHJpbnRXaW4gPSB3aW5kb3cub3BlbihcIlwiLCBcImNvbnN1bHRSZXNwb25zZVByaW50V2luXCIsIFwid2lkdGg9ODMwLGhlaWdodD05MDAsc2Nyb2xsYmFycz15ZXMsbG9jYXRpb249bm9cIik7XG5cdFx0XHRwcmludFdpbi5kb2N1bWVudC5vcGVuKCk7XG5cblx0XHRcdHZhciBwX2J1dHRvbnMgPSBcIjxidXR0b24gb25jbGljaz0nd2luZG93LnByaW50KCknPlByaW50PC9idXR0b24+PGJ1dHRvbiBvbmNsaWNrPSd3aW5kb3cuY2xvc2UoKSc+Q2xvc2U8L2J1dHRvbj5cIjtcblx0XHRcdHZhciBwX2F0dGFjaG1lbnRzID0gXCJcIjtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY29uc3VsdC5hdHRhY2htZW50cy5sZW5ndGg7IGkrKylcblx0XHRcdHtcblx0XHRcdFx0cF9hdHRhY2htZW50cyArPSBcIjxkaXYgY2xhc3M9J25vcHJpbnQnPjxidXR0b24gb25jbGljaz1wcmludEF0dGFjaG1lbnRzKCdcIiArIGNvbnN1bHQuYXR0YWNobWVudHNbaV0udXJsICsgXCInKT5QcmludCBhdHRhY2htZW50PC9idXR0b24+IFwiICsgY29uc3VsdC5hdHRhY2htZW50c1tpXS5kaXNwbGF5TmFtZSArIFwiPC9kaXY+XCI7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBwX3VyZ2VuY3kgPSBKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyhjb250cm9sbGVyLnVyZ2VuY2llc1skKFwiI3VyZ2VuY3lcIikudmFsKCldLm5hbWUpO1xuXHRcdFx0dmFyIHBfbGV0dGVyaGVhZE5hbWUgPSBKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyhjb25zdWx0LmxldHRlcmhlYWRMaXN0WyQoXCIjbGV0dGVyaGVhZFwiKS52YWwoKV0ubmFtZSk7XG5cdFx0XHR2YXIgcF9wYWdlMiA9IGNvbnRyb2xsZXIuZ2V0UHJpbnRQYWdlMihwX3VyZ2VuY3ksIHBfbGV0dGVyaGVhZE5hbWUsIGNvbnN1bHQsIHVzZXIpO1xuXG5cdFx0XHRwcmludFdpbi5kb2N1bWVudC53cml0ZShwX3BhZ2UxICsgcF9idXR0b25zICsgcF9hdHRhY2htZW50cyArIHBfcGFnZTIpO1xuXHRcdFx0cHJpbnRXaW4uZG9jdW1lbnQuY2xvc2UoKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZXRQcmludFBhZ2UyID0gZnVuY3Rpb24gZ2V0UHJpbnRQYWdlMihwX3VyZ2VuY3ksIHBfbGV0dGVyaGVhZE5hbWUsIGNvbnN1bHQsIHVzZXIpXG5cdFx0e1xuXHRcdFx0dmFyIHBfY2xpbmljTmFtZSA9IEp1bm8uQ29tbW9uLlV0aWwudG9UcmltbWVkU3RyaW5nKGNvbnN1bHQubGV0dGVyaGVhZExpc3RbMF0ubmFtZSk7XG5cdFx0XHR2YXIgcF9yZXNwb25zZURhdGUgPSBKdW5vLkNvbW1vbi5VdGlsLmZvcm1hdERhdGUoY29uc3VsdC5yZXNwb25zZURhdGUpO1xuXHRcdFx0dmFyIHBfcmVmZXJyYWxEYXRlID0gSnVuby5Db21tb24uVXRpbC5mb3JtYXREYXRlKGNvbnN1bHQucmVmZXJyYWxEYXRlKTtcblx0XHRcdHZhciBwX2xldHRlcmhlYWRBZGRyZXNzID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5sZXR0ZXJoZWFkQWRkcmVzcyk7XG5cdFx0XHR2YXIgcF9sZXR0ZXJoZWFkUGhvbmUgPSBKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyhjb25zdWx0LmxldHRlcmhlYWRQaG9uZSk7XG5cdFx0XHR2YXIgcF9sZXR0ZXJoZWFkRmF4ID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5sZXR0ZXJoZWFkRmF4KTtcblx0XHRcdHZhciBwX2NvbnN1bHRhbnROYW1lID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5yZWZlcnJpbmdEb2N0b3IubmFtZSk7XG5cdFx0XHR2YXIgcF9jb25zdWx0YW50UGhvbmUgPSBKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyhjb25zdWx0LnJlZmVycmluZ0RvY3Rvci5waG9uZU51bWJlcik7XG5cdFx0XHR2YXIgcF9jb25zdWx0YW50RmF4ID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5yZWZlcnJpbmdEb2N0b3IuZmF4TnVtYmVyKTtcblx0XHRcdHZhciBwX2NvbnN1bHRhbnRBZGRyZXNzID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5yZWZlcnJpbmdEb2N0b3Iuc3RyZWV0QWRkcmVzcyk7XG5cdFx0XHR2YXIgcF9wYXRpZW50TmFtZSA9IEp1bm8uQ29tbW9uLlV0aWwudG9UcmltbWVkU3RyaW5nKGNvbnN1bHQuZGVtb2dyYXBoaWMubGFzdE5hbWUpICsgXCIsIFwiICsgSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5kZW1vZ3JhcGhpYy5maXJzdE5hbWUpO1xuXHRcdFx0dmFyIHBfcGF0aWVudFBob25lID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5kZW1vZ3JhcGhpYy5waG9uZSk7XG5cdFx0XHR2YXIgcF9wYXRpZW50V29ya1Bob25lID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5kZW1vZ3JhcGhpYy5hbHRlcm5hdGl2ZVBob25lKTtcblx0XHRcdHZhciBwX3BhdGllbnRCaXJ0aGRhdGUgPSBKdW5vLkNvbW1vbi5VdGlsLmZvcm1hdERhdGUoY29uc3VsdC5kZW1vZ3JhcGhpYy5kYXRlT2ZCaXJ0aCk7XG5cdFx0XHR2YXIgcF9wYXRpZW50U2V4ID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5kZW1vZ3JhcGhpYy5zZXhEZXNjKTtcblx0XHRcdHZhciBwX3BhdGllbnRIZWFsdGhDYXJkTm8gPSBKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyhjb25zdWx0LmRlbW9ncmFwaGljLmhpbikgKyBcIi1cIiArIEp1bm8uQ29tbW9uLlV0aWwudG9UcmltbWVkU3RyaW5nKGNvbnN1bHQuZGVtb2dyYXBoaWMudmVyKTtcblx0XHRcdHZhciBwX3BhdGllbnRDaGFydE5vID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5kZW1vZ3JhcGhpYy5jaGFydE5vKTtcblx0XHRcdHZhciBwX3BhdGllbnRBZGRyZXNzID0gXCJcIjtcblx0XHRcdGlmIChjb25zdWx0LmRlbW9ncmFwaGljLmFkZHJlc3MgIT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0cF9wYXRpZW50QWRkcmVzcyA9IEp1bm8uQ29tbW9uLlV0aWwudG9UcmltbWVkU3RyaW5nKGNvbnN1bHQuZGVtb2dyYXBoaWMuYWRkcmVzcy5hZGRyZXNzKSArIFwiLCBcIiArXG5cdFx0XHRcdFx0SnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5kZW1vZ3JhcGhpYy5hZGRyZXNzLmNpdHkpICsgXCIsIFwiICtcblx0XHRcdFx0XHRKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyhjb25zdWx0LmRlbW9ncmFwaGljLmFkZHJlc3MucHJvdmluY2UpICsgXCIgXCIgK1xuXHRcdFx0XHRcdEp1bm8uQ29tbW9uLlV0aWwudG9UcmltbWVkU3RyaW5nKGNvbnN1bHQuZGVtb2dyYXBoaWMuYWRkcmVzcy5wb3N0YWwpO1xuXHRcdFx0fVxuXHRcdFx0dmFyIHBfYXBwb2ludG1lbnREYXRlID0gSnVuby5Db21tb24uVXRpbC5mb3JtYXREYXRlKGNvbnN1bHQuYXBwb2ludG1lbnREYXRlKTtcblx0XHRcdHZhciBwX2FwcG9pbnRtZW50VGltZSA9IEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0VGltZShjb25zdWx0LmFwcG9pbnRtZW50VGltZSk7XG5cdFx0XHR2YXIgcF9yZWFzb24gPSBKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyhjb25zdWx0LnJlYXNvbkZvclJlZmVycmFsKTtcblx0XHRcdHZhciBwX2V4YW1pbmF0aW9uID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5leGFtaW5hdGlvbik7XG5cdFx0XHR2YXIgcF9pbXByZXNzaW9uID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5pbXByZXNzaW9uKTtcblx0XHRcdHZhciBwX3BsYW4gPSBKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyhjb25zdWx0LnBsYW4pO1xuXHRcdFx0dmFyIHBfY2xpbmljYWxJbmZvID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5jbGluaWNhbEluZm8pO1xuXHRcdFx0dmFyIHBfY29uY3VycmVudFByb2JsZW1zID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcoY29uc3VsdC5jb25jdXJyZW50UHJvYmxlbXMpO1xuXHRcdFx0dmFyIHBfY3VycmVudE1lZHMgPSBKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyhjb25zdWx0LmN1cnJlbnRNZWRzKTtcblx0XHRcdHZhciBwX2FsbGVyZ2llcyA9IEp1bm8uQ29tbW9uLlV0aWwudG9UcmltbWVkU3RyaW5nKGNvbnN1bHQuYWxsZXJnaWVzKTtcblx0XHRcdHZhciBwX3Byb3ZpZGVyID0gSnVuby5Db21tb24uVXRpbC50b1RyaW1tZWRTdHJpbmcodXNlci5sYXN0TmFtZSkgKyBcIiwgXCIgKyBKdW5vLkNvbW1vbi5VdGlsLnRvVHJpbW1lZFN0cmluZyh1c2VyLmZpcnN0TmFtZSk7XG5cblx0XHRcdHJldHVybiBcIjxkaXYgY2xhc3M9J2NlbnRlcic+PGxhYmVsIGNsYXNzPSdsYXJnZSc+XCIgKyBwX2NsaW5pY05hbWUgKyBcIjwvbGFiZWw+PGJyLz48bGFiZWw+Q29uc3VsdGF0aW9uIFJlc3BvbnNlPC9sYWJlbD48YnIvPjwvZGl2Pjxici8+PHRhYmxlPjx0cj48dGQ+PGxhYmVsPkRhdGU6IDwvbGFiZWw+XCIgKyBwX3Jlc3BvbnNlRGF0ZSArIFwiPC90ZD48dGQgcm93c3Bhbj02IHdpZHRoPTEwPjwvdGQ+PHRkPjxsYWJlbD5TdGF0dXM6IDwvbGFiZWw+XCIgKyBwX3VyZ2VuY3kgKyBcIjwvdGQ+PC90cj48dHI+PHRkIGNvbHNwYW49Mj48L3RkPjwvdHI+PHRyPjx0aD5GUk9NOjwvdGg+PHRoPlRPOjwvdGg+PC90cj48dHI+PHRkPjxwIGNsYXNzPSdsYXJnZSc+XCIgKyBwX2xldHRlcmhlYWROYW1lICsgXCI8L3A+XCIgKyBwX2xldHRlcmhlYWRBZGRyZXNzICsgXCI8YnIvPjxsYWJlbD5UZWw6IDwvbGFiZWw+XCIgKyBwX2xldHRlcmhlYWRQaG9uZSArIFwiPGJyLz48bGFiZWw+RmF4OiA8L2xhYmVsPlwiICsgcF9sZXR0ZXJoZWFkRmF4ICsgXCI8L3RkPjx0ZD48dGFibGU+PHRyPjx0aD5SZWZlcnJpbmcgRG9jdG9yOjwvdGg+PHRkPlwiICsgcF9jb25zdWx0YW50TmFtZSArIFwiPC90ZD48L3RyPjx0cj48dGg+UGhvbmU6PC90aD48dGQ+XCIgKyBwX2NvbnN1bHRhbnRQaG9uZSArIFwiPC90ZD48L3RyPjx0cj48dGg+RmF4OjwvdGg+PHRkPlwiICsgcF9jb25zdWx0YW50RmF4ICsgXCI8L3RkPjwvdHI+PHRyPjx0aD5BZGRyZXNzOjwvdGg+PHRkPlwiICsgcF9jb25zdWx0YW50QWRkcmVzcyArIFwiPC90ZD48L3RyPjwvdGFibGU+PC90ZD48L3RyPjx0cj48dGQgY29sc3Bhbj0yPjwvdGQ+PC90cj48dHI+PHRkPjx0YWJsZT48dHI+PHRoPlBhdGllbnQ6PC90aD48dGQ+XCIgKyBwX3BhdGllbnROYW1lICsgXCI8L3RkPjwvdHI+PHRyPjx0aD5BZGRyZXNzOjwvdGg+PHRkPlwiICsgcF9wYXRpZW50QWRkcmVzcyArIFwiPC90ZD48L3RyPjx0cj48dGg+UGhvbmU6PC90aD48dGQ+XCIgKyBwX3BhdGllbnRQaG9uZSArIFwiPC90ZD48L3RyPjx0cj48dGg+V29yayBQaG9uZTo8L3RoPjx0ZD5cIiArIHBfcGF0aWVudFdvcmtQaG9uZSArIFwiPC90ZD48L3RyPjx0cj48dGg+QmlydGhkYXRlOjwvdGg+PHRkPlwiICsgcF9wYXRpZW50QmlydGhkYXRlICsgXCI8L3RkPjwvdHI+PC90YWJsZT48L3RkPjx0ZD48dGFibGU+PHRyPjx0aD5TZXg6PC90aD48dGQ+XCIgKyBwX3BhdGllbnRTZXggKyBcIjwvdGQ+PC90cj48dHI+PHRoPkhlYWx0aCBDYXJkIE5vOjwvdGg+PHRkPlwiICsgcF9wYXRpZW50SGVhbHRoQ2FyZE5vICsgXCI8L3RkPjwvdHI+PHRyPjx0aD5BcHBvaW50bWVudCBkYXRlOjwvdGg+PHRkPlwiICsgcF9hcHBvaW50bWVudERhdGUgKyBcIjwvdGQ+PC90cj48dHI+PHRoPkFwcG9pbnRtZW50IHRpbWU6PC90aD48dGQ+XCIgKyBwX2FwcG9pbnRtZW50VGltZSArIFwiPC90ZD48L3RyPjx0cj48dGg+Q2hhcnQgTm86PC90aD48dGQ+XCIgKyBwX3BhdGllbnRDaGFydE5vICsgXCI8L3RkPjwvdHI+PC90YWJsZT48L3RkPjwvdHI+PC90YWJsZT48YnIvPjx0YWJsZT48dHI+PHRoPkV4YW1pbmF0aW9uOjwvdGg+PC90cj48dHI+PHRkPlwiICsgcF9leGFtaW5hdGlvbiArIFwiPGhyPjwvdGQ+PC90cj48dHI+PHRoPkltcHJlc3Npb246PC90aD48L3RyPjx0cj48dGQ+XCIgKyBwX2ltcHJlc3Npb24gKyBcIjxocj48L3RkPjwvdHI+PHRyPjx0aD5QbGFuOjwvdGg+PC90cj48dHI+PHRkPlwiICsgcF9wbGFuICsgXCI8aHI+PC90ZD48L3RyPjx0cj48dGQ+PC90ZD48L3RyPjx0cj48dGg+UmVhc29uIGZvciBjb25zdWx0YXRpb246IChEYXRlOiBcIiArIHBfcmVmZXJyYWxEYXRlICsgXCIpPC90aD48L3RyPjx0cj48dGQ+XCIgKyBwX3JlYXNvbiArIFwiPGhyPjwvdGQ+PC90cj48dHI+PHRoPlBlcnRpbmVudCBDbGluaWNhbCBJbmZvcm1hdGlvbjo8L3RoPjwvdHI+PHRyPjx0ZD5cIiArIHBfY2xpbmljYWxJbmZvICsgXCI8aHI+PC90ZD48L3RyPjx0cj48dGg+U2lnbmlmaWNhbnQgQ29uY3VycmVudCBQcm9ibGVtczo8L3RoPjwvdHI+PHRyPjx0ZD5cIiArIHBfY29uY3VycmVudFByb2JsZW1zICsgXCI8aHI+PC90ZD48L3RyPjx0cj48dGg+Q3VycmVudCBNZWRpY2F0aW9uczo8L3RoPjwvdHI+PHRyPjx0ZD5cIiArIHBfY3VycmVudE1lZHMgKyBcIjxocj48L3RkPjwvdHI+PHRyPjx0aD5BbGxlcmdpZXM6PC90aD48L3RyPjx0cj48dGQ+XCIgKyBwX2FsbGVyZ2llcyArIFwiPGhyPjwvdGQ+PC90cj48dHI+PHRkPjxsYWJlbD5Db25zdWx0YW50OiA8L2xhYmVsPlwiICsgcF9wcm92aWRlciArIFwiPC90ZD48L3RyPjx0cj48dGQ+PC90ZD48L3RyPjx0cj48dGQ+PGRpdiBjbGFzcz0nY2VudGVyJz48ZW0+Q3JlYXRlZCBieTogT1NDQVIgVGhlIG9wZW4tc291cmNlIEVNUiB3d3cub3NjYXJjYW5hZGEub3JnPC9lbT48L2Rpdj48L3RkPjwvdHI+PC90YWJsZT48L2JvZHk+PC9odG1sPlwiO1xuXHRcdH07XG5cdH1cbl0pO1xuXG4vKiBodG1sIGZvciBmYXggJiBwcmludCwga2VwdCBoZXJlIGZvciBlYXN5IHJlZmVyZW5jZVxuPGh0bWw+XG48c3R5bGU+XG5cdGJvZHl7d2lkdGg6ODAwcHg7Zm9udC1mYW1pbHk6YXJpYWwsdmVyZGFuYSx0YWhvbWEsaGVsdmV0aWNhLHNhbnMgc2VyaWZ9XG5cdHRhYmxle3dpZHRoOjEwMCV9XG5cdHRoe3RleHQtYWxpZ246bGVmdDtmb250LXdlaWdodDpib2xkO3dpZHRoOjE7d2hpdGUtc3BhY2U6bm93cmFwfVxuXHR0ZHt2ZXJ0aWNhbC1hbGlnbjp0b3B9XG5cdGxhYmVse2ZvbnQtd2VpZ2h0OmJvbGR9XG5cdGVte2ZvbnQtc2l6ZTpzbWFsbH1cblx0Lmxhcmdle2ZvbnQtc2l6ZTpsYXJnZX1cblx0LmNlbnRlcnt0ZXh0LWFsaWduOmNlbnRlcn1cbjwvc3R5bGU+XG48c3R5bGUgbWVkaWE9J3ByaW50Jz5cblx0YnV0dG9ue2Rpc3BsYXk6bm9uZX1cblx0Lm5vcHJpbnR7ZGlzcGxheTpub25lfVxuPC9zdHlsZT5cbjxzY3JpcHQ+XG5cdGZ1bmN0aW9uIHByaW50QXR0YWNobWVudHModXJsKXtcblx0XHR3aW5kb3cub3BlbignLi4vJyt1cmwpO1xuXHR9XG48L3NjcmlwdD5cbjxib2R5PlxuXG48IS0tIFByaW50IHByZXZpZXcgcGFnZSBleGNsdXNpdmUgLS0+XG5cdDwhLS0gcF9idXR0b25zIC0tPlxuXHQ8YnV0dG9uIG9uY2xpY2s9J3dpbmRvdy5wcmludCgpJz5QcmludDwvYnV0dG9uPlxuXHQ8YnV0dG9uIG9uY2xpY2s9J3dpbmRvdy5jbG9zZSgpJz5DbG9zZTwvYnV0dG9uPlxuXHQ8IS0tIHBfYnV0dG9ucyAtLT5cblxuXHQ8IS0tIHBfYXR0YWNobWVudHMsIDEgb3IgbW9yZSAtLT5cblx0PGRpdiBjbGFzcz0nbm9wcmludCc+XG5cdFx0PGJ1dHRvbiBvbmNsaWNrPXByaW50QXR0YWNobWVudHMoJ1wiK2NvbnN1bHQuYXR0YWNobWVudHNbaV0udXJsK1wiJyk+UHJpbnQgYXR0YWNobWVudDwvYnV0dG9uPiBcIitjb25zdWx0LmF0dGFjaG1lbnRzW2ldLmRpc3BsYXlOYW1lK1wiXG5cdDwvZGl2PlxuXHQ8IS0tIHBfYXR0YWNobWVudHMgLS0+XG48IS0tIFByaW50IHByZXZpZXcgcGFnZSBleGNsdXNpdmUgLS0+XG5cblx0PGRpdiBjbGFzcz0nY2VudGVyJz5cblx0XHQ8bGFiZWwgY2xhc3M9J2xhcmdlJz5cIitwX2NsaW5pY05hbWUrXCI8L2xhYmVsPjxici8+XG5cdFx0PGxhYmVsPkNvbnN1bHRhdGlvbiBSZXNwb25zZTwvbGFiZWw+PGJyLz5cblx0PC9kaXY+XG5cdDxici8+XG5cdDx0YWJsZT5cblx0XHQ8dHI+XG5cdFx0XHQ8dGQ+XG5cdFx0XHRcdDxsYWJlbD5EYXRlOiA8L2xhYmVsPlwiK3BfcmVzcG9uc2VEYXRlK1wiXG5cdFx0XHQ8L3RkPlxuXHRcdFx0PHRkIHJvd3NwYW49NiB3aWR0aD0xMD48L3RkPlxuXHRcdFx0PHRkPlxuXHRcdFx0XHQ8bGFiZWw+U3RhdHVzOiA8L2xhYmVsPlwiK3BfdXJnZW5jeStcIlxuXHRcdFx0PC90ZD5cblx0XHQ8L3RyPlxuXHRcdDx0cj48dGQgY29sc3Bhbj0yPjwvdGQ+PC90cj5cblx0XHQ8dHI+XG5cdFx0XHQ8dGg+RlJPTTo8L3RoPlxuXHRcdFx0PHRoPlRPOjwvdGg+XG5cdFx0PC90cj5cblx0XHQ8dHI+XG5cdFx0XHQ8dGQ+XG5cdFx0XHRcdDxwIGNsYXNzPSdsYXJnZSc+XCIrcF9sZXR0ZXJoZWFkTmFtZStcIjwvcD5cblx0XHRcdFx0XCIrcF9sZXR0ZXJoZWFkQWRkcmVzcytcIjxici8+XG5cdFx0XHRcdDxsYWJlbD5UZWw6IDwvbGFiZWw+XCIrcF9sZXR0ZXJoZWFkUGhvbmUrXCI8YnIvPlxuXHRcdFx0XHQ8bGFiZWw+RmF4OiA8L2xhYmVsPlwiK3BfbGV0dGVyaGVhZEZheCtcIlxuXHRcdFx0PC90ZD5cblx0XHRcdDx0ZD5cblx0XHRcdFx0PHRhYmxlPlxuXHRcdFx0XHRcdDx0cj5cblx0XHRcdFx0XHRcdDx0aD5SZWZlcnJpbmcgRG9jdG9yOjwvdGg+XG5cdFx0XHRcdFx0XHQ8dGQ+XCIrcF9jb25zdWx0YW50TmFtZStcIjwvdGQ+XG5cdFx0XHRcdFx0PC90cj5cblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0XHQ8dGg+UGhvbmU6PC90aD5cblx0XHRcdFx0XHRcdDx0ZD5cIitwX2NvbnN1bHRhbnRQaG9uZStcIjwvdGQ+XG5cdFx0XHRcdFx0PC90cj5cblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0XHQ8dGg+RmF4OjwvdGg+XG5cdFx0XHRcdFx0XHQ8dGQ+XCIrcF9jb25zdWx0YW50RmF4K1wiPC90ZD5cblx0XHRcdFx0XHQ8L3RyPlxuXHRcdFx0XHRcdDx0cj5cblx0XHRcdFx0XHRcdDx0aD5BZGRyZXNzOjwvdGg+XG5cdFx0XHRcdFx0XHQ8dGQ+XCIrcF9jb25zdWx0YW50QWRkcmVzcytcIjwvdGQ+XG5cdFx0XHRcdFx0PC90cj5cblx0XHRcdFx0PC90YWJsZT5cblx0XHRcdDwvdGQ+XG5cdFx0PC90cj5cblx0XHQ8dHI+PHRkIGNvbHNwYW49Mj48L3RkPjwvdHI+XG5cdFx0PHRyPlxuXHRcdFx0PHRkPlxuXHRcdFx0XHQ8dGFibGU+XG5cdFx0XHRcdFx0PHRyPlxuXHRcdFx0XHRcdFx0PHRoPlBhdGllbnQ6PC90aD5cblx0XHRcdFx0XHRcdDx0ZD5cIitwX3BhdGllbnROYW1lK1wiPC90ZD5cblx0XHRcdFx0XHQ8L3RyPlxuXHRcdFx0XHRcdDx0cj5cblx0XHRcdFx0XHRcdDx0aD5BZGRyZXNzOjwvdGg+XG5cdFx0XHRcdFx0XHQ8dGQ+XCIrcF9wYXRpZW50QWRkcmVzcytcIjwvdGQ+XG5cdFx0XHRcdFx0PC90cj5cblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0XHQ8dGg+UGhvbmU6PC90aD5cblx0XHRcdFx0XHRcdDx0ZD5cIitwX3BhdGllbnRQaG9uZStcIjwvdGQ+XG5cdFx0XHRcdFx0PC90cj5cblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0XHQ8dGg+V29yayBQaG9uZTo8L3RoPlxuXHRcdFx0XHRcdFx0PHRkPlwiK3BfcGF0aWVudFdvcmtQaG9uZStcIjwvdGQ+XG5cdFx0XHRcdFx0PC90cj5cblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0XHQ8dGg+QmlydGhkYXRlOjwvdGg+XG5cdFx0XHRcdFx0XHQ8dGQ+XCIrcF9wYXRpZW50QmlydGhkYXRlK1wiPC90ZD5cblx0XHRcdFx0XHQ8L3RyPlxuXHRcdFx0XHQ8L3RhYmxlPlxuXHRcdFx0PC90ZD5cblx0XHRcdDx0ZD5cblx0XHRcdFx0PHRhYmxlPlxuXHRcdFx0XHRcdDx0cj5cblx0XHRcdFx0XHRcdDx0aD5TZXg6PC90aD5cblx0XHRcdFx0XHRcdDx0ZD5cIitwX3BhdGllbnRTZXgrXCI8L3RkPlxuXHRcdFx0XHRcdDwvdHI+XG5cdFx0XHRcdFx0PHRyPlxuXHRcdFx0XHRcdFx0PHRoPkhlYWx0aCBDYXJkIE5vOjwvdGg+XG5cdFx0XHRcdFx0XHQ8dGQ+XCIrcF9wYXRpZW50SGVhbHRoQ2FyZE5vK1wiPC90ZD5cblx0XHRcdFx0XHQ8L3RyPlxuXHRcdFx0XHRcdDx0cj5cblx0XHRcdFx0XHRcdDx0aD5BcHBvaW50bWVudCBkYXRlOjwvdGg+XG5cdFx0XHRcdFx0XHQ8dGQ+XCIrcF9hcHBvaW50bWVudERhdGUrXCI8L3RkPlxuXHRcdFx0XHRcdDwvdHI+XG5cdFx0XHRcdFx0PHRyPlxuXHRcdFx0XHRcdFx0PHRoPkFwcG9pbnRtZW50IHRpbWU6PC90aD5cblx0XHRcdFx0XHRcdDx0ZD5cIitwX2FwcG9pbnRtZW50VGltZStcIjwvdGQ+XG5cdFx0XHRcdFx0PC90cj5cblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0XHQ8dGg+Q2hhcnQgTm86PC90aD5cblx0XHRcdFx0XHRcdDx0ZD5cIitwX3BhdGllbnRDaGFydE5vK1wiPC90ZD5cblx0XHRcdFx0XHQ8L3RyPlxuXHRcdFx0XHQ8L3RhYmxlPlxuXHRcdFx0PC90ZD5cblx0XHQ8L3RyPlxuXHQ8L3RhYmxlPlxuXHQ8YnIvPlxuXHQ8dGFibGU+XG5cdFx0PHRyPjx0aD5FeGFtaW5hdGlvbjo8L3RoPjwvdHI+XG5cdFx0PHRyPjx0ZD5cIitwX2V4YW1pbmF0aW9uK1wiPGhyPjwvdGQ+PC90cj5cblx0XHQ8dHI+PHRoPkltcHJlc3Npb246PC90aD48L3RyPlxuXHRcdDx0cj48dGQ+XCIrcF9pbXByZXNzaW9uK1wiPGhyPjwvdGQ+PC90cj5cblx0XHQ8dHI+PHRoPlBsYW46PC90aD48L3RyPlxuXHRcdDx0cj48dGQ+XCIrcF9wbGFuK1wiPGhyPjwvdGQ+PC90cj5cblx0XHQ8dHI+PHRkPjwvdGQ+PC90cj5cblx0XHQ8dHI+PHRoPlJlYXNvbiBmb3IgY29uc3VsdGF0aW9uOiAoRGF0ZTogXCIrcF9yZWZlcnJhbERhdGUrXCIpPC90aD48L3RyPlxuXHRcdDx0cj48dGQ+XCIrcF9yZWFzb24rXCI8aHI+PC90ZD48L3RyPlxuXHRcdDx0cj48dGg+UGVydGluZW50IENsaW5pY2FsIEluZm9ybWF0aW9uOjwvdGg+PC90cj5cblx0XHQ8dHI+PHRkPlwiK3BfY2xpbmljYWxJbmZvK1wiPGhyPjwvdGQ+PC90cj5cblx0XHQ8dHI+PHRoPlNpZ25pZmljYW50IENvbmN1cnJlbnQgUHJvYmxlbXM6PC90aD48L3RyPlxuXHRcdDx0cj48dGQ+XCIrcF9jb25jdXJyZW50UHJvYmxlbXMrXCI8aHI+PC90ZD48L3RyPlxuXHRcdDx0cj48dGg+Q3VycmVudCBNZWRpY2F0aW9uczo8L3RoPjwvdHI+XG5cdFx0PHRyPjx0ZD5cIitwX2N1cnJlbnRNZWRzK1wiPGhyPjwvdGQ+PC90cj5cblx0XHQ8dHI+PHRoPkFsbGVyZ2llczo8L3RoPjwvdHI+XG5cdFx0PHRyPjx0ZD5cIitwX2FsbGVyZ2llcytcIjxocj48L3RkPjwvdHI+XG5cdFx0PHRyPjx0ZD48bGFiZWw+Q29uc3VsdGFudDogPC9sYWJlbD5cIitwX3Byb3ZpZGVyK1wiPC90ZD48L3RyPlxuXHRcdDx0cj48dGQ+PC90ZD48L3RyPlxuXHRcdDx0cj48dGQ+PGRpdiBjbGFzcz0nY2VudGVyJz48ZW0+Q3JlYXRlZCBieTogT1NDQVIgVGhlIG9wZW4tc291cmNlIEVNUiB3d3cub3NjYXJjYW5hZGEub3JnPC9lbT48L2Rpdj48L3RkPjwvdHI+XG5cdDwvdGFibGU+XG48L2JvZHk+XG48L2h0bWw+XG4qLyIsImFuZ3VsYXIubW9kdWxlKCdDb25zdWx0cycpLmNvbnRyb2xsZXIoJ0NvbnN1bHRzLkNvbnN1bHRSZXNwb25zZUxpc3RDb250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJHRpbWVvdXQnLFxuXHQnJHN0YXRlJyxcblx0JyRsb2NhdGlvbicsXG5cdCdOZ1RhYmxlUGFyYW1zJyxcblx0J2NvbnN1bHRTZXJ2aWNlJyxcblx0J3Byb3ZpZGVyU2VydmljZScsXG5cdCdkZW1vZ3JhcGhpY1NlcnZpY2UnLFxuXHQnZGVtb2dyYXBoaWNzU2VydmljZScsXG5cdCdzZWN1cml0eVNlcnZpY2UnLFxuXHQnc3RhdGljRGF0YVNlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkdGltZW91dCxcblx0XHQkc3RhdGUsXG5cdFx0JGxvY2F0aW9uLFxuXHRcdE5nVGFibGVQYXJhbXMsXG5cdFx0Y29uc3VsdFNlcnZpY2UsXG5cdFx0cHJvdmlkZXJTZXJ2aWNlLFxuXHRcdGRlbW9ncmFwaGljU2VydmljZSxcblx0XHRkZW1vZ3JhcGhpY3NTZXJ2aWNlLFxuXHRcdHNlY3VyaXR5U2VydmljZSxcblx0XHRzdGF0aWNEYXRhU2VydmljZSlcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29udHJvbGxlci5vblJlY29yZFBhZ2UgPSBmYWxzZTtcblx0XHRjb250cm9sbGVyLmRlbW9ncmFwaGljTm8gPSBudWxsO1xuXHRcdGNvbnRyb2xsZXIuc3RhdHVzZXMgPSBzdGF0aWNEYXRhU2VydmljZS5nZXRDb25zdWx0UmVzcG9uc2VTdGF0dXNlcygpOyBcdC8vc2V0IHNlYXJjaCBzdGF0dXNlc1xuXHRcdGNvbnRyb2xsZXIudXJnZW5jaWVzID0gc3RhdGljRGF0YVNlcnZpY2UuZ2V0Q29uc3VsdFVyZ2VuY2llcygpOyAvL2dldCB1cmdlbmNpZXMgbGlzdFxuXHRcdGNvbnRyb2xsZXIubGFzdFJlc3BvbnNlID0gXCJcIjtcblx0XHRjb250cm9sbGVyLnRlYW1zID0gW107XG5cdFx0Y29udHJvbGxlci5jb25zdWx0ID0ge307XG5cblx0XHR2YXIgYWxsVGVhbXMgPSBcIkFsbCBUZWFtc1wiO1xuXHRcdGNvbnRyb2xsZXIuc2VhcmNoID0ge1xuXHRcdFx0dGVhbTogYWxsVGVhbXMsXG5cdFx0XHRzdGFydEluZGV4OiAwLFxuXHRcdFx0bnVtVG9SZXR1cm46IDEwXG5cdFx0fTtcblxuXG5cblx0XHQvLyBJbml0aWFsaXplIHRoZSBjb250cm9sbGVyXG5cdFx0Y29udHJvbGxlci5pbml0ID0gZnVuY3Rpb24gaW5pdCgpXG5cdFx0e1xuXHRcdFx0aWYoJHN0YXRlLnBhcmFtcy5kZW1vZ3JhcGhpY05vKXtcblx0XHRcdFx0Y29udHJvbGxlci5kZW1vZ3JhcGhpY05vID0gcGFyc2VJbnQoJHN0YXRlLnBhcmFtcy5kZW1vZ3JhcGhpY05vKTtcblx0XHRcdFx0Y29udHJvbGxlci5vblJlY29yZFBhZ2UgPSB0cnVlO1xuXHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5saXN0ID0gXCJwYXRpZW50XCI7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnRyb2xsZXIuZ2V0QWNjZXNzUmlnaHRzKCk7XG5cdFx0XHRjb250cm9sbGVyLmdldFRlYW1zKCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZ2V0QWNjZXNzUmlnaHRzID0gZnVuY3Rpb24gZ2V0QWNjZXNzUmlnaHRzKClcblx0XHR7XG5cdFx0XHQvL2dldCBhY2Nlc3MgcmlnaHRzXG5cdFx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHQoXCJfY29uXCIsIFwiclwiKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHRSZWFkQWNjZXNzID0gcmVzdWx0cztcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHQoXCJfY29uXCIsIFwidVwiKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHRVcGRhdGVBY2Nlc3MgPSByZXN1bHRzOyAvL3RvIGJlIHVzZWQgd2l0aCBiYXRjaCBvcGVyYXRpb25zIChub3QgeWV0IGltcGxlbWVudGVkKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHRcdHNlY3VyaXR5U2VydmljZS5oYXNSaWdodChcIl9jb25cIiwgXCJ3XCIpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdFdyaXRlQWNjZXNzID0gcmVzdWx0cztcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXG5cdFx0Y29udHJvbGxlci5nZXRUZWFtcyA9IGZ1bmN0aW9uIGdldFRlYW1zKClcblx0XHR7XG5cdFx0XHRwcm92aWRlclNlcnZpY2UuZ2V0QWN0aXZlVGVhbXMoKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnRlYW1zID0gcmVzdWx0cztcblx0XHRcdFx0XHRjb250cm9sbGVyLnRlYW1zLnVuc2hpZnQoYWxsVGVhbXMpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLnRlYW0gPSBhbGxUZWFtcztcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2VhcmNoUGF0aWVudHMgPSBmdW5jdGlvbiBzZWFyY2hQYXRpZW50cyh0ZXJtKVxuXHRcdHtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdHR5cGU6ICdOYW1lJyxcblx0XHRcdFx0J3Rlcm0nOiB0ZXJtLFxuXHRcdFx0XHRzdGF0dXM6ICdhY3RpdmUnLFxuXHRcdFx0XHRpbnRlZ3JhdG9yOiBmYWxzZSxcblx0XHRcdFx0b3V0b2Zkb21haW46IHRydWVcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gZGVtb2dyYXBoaWNzU2VydmljZS5zZWFyY2goc2VhcmNoLCAwLCAyNSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIHJlc3AgPSBbXTtcblx0XHRcdFx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IHJlc3VsdHMuY29udGVudC5sZW5ndGg7IHgrKylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXNwLnB1c2goXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGRlbW9ncmFwaGljTm86IHJlc3VsdHMuY29udGVudFt4XS5kZW1vZ3JhcGhpY05vLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiByZXN1bHRzLmNvbnRlbnRbeF0ubGFzdE5hbWUgKyAnLCAnICsgcmVzdWx0cy5jb250ZW50W3hdLmZpcnN0TmFtZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXNwO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zZWFyY2hNcnBzID0gZnVuY3Rpb24gc2VhcmNoTXJwcyh0ZXJtKVxuXHRcdHtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdHNlYXJjaFRlcm06IHRlcm0sXG5cdFx0XHRcdGFjdGl2ZTogdHJ1ZVxuXHRcdFx0fTtcblx0XHRcdHJldHVybiBwcm92aWRlclNlcnZpY2Uuc2VhcmNoUHJvdmlkZXJzKHNlYXJjaCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIHJlc3AgPSBbXTtcblx0XHRcdFx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IHJlc3VsdHMubGVuZ3RoOyB4KyspXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmVzcC5wdXNoKFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRtcnBObzogcmVzdWx0c1t4XS5wcm92aWRlck5vLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiByZXN1bHRzW3hdLm5hbWVcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gcmVzcDtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIudXBkYXRlTXJwTm8gPSBmdW5jdGlvbiB1cGRhdGVNcnBObyhtb2RlbClcblx0XHR7XG5cdFx0XHRpZiAoSnVuby5Db21tb24uVXRpbC5leGlzdHMobW9kZWwpKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5tcnBObyA9IE51bWJlcihtb2RlbC5tcnBObyk7XG5cdFx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdC5tcnBOYW1lID0gbW9kZWwubmFtZTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0cHJvdmlkZXJTZXJ2aWNlLmdldFByb3ZpZGVyKG1vZGVsKS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5tcnBObyA9IE51bWJlcihtb2RlbCk7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmNvbnN1bHQubXJwTmFtZSA9IHJlc3VsdHMubGFzdE5hbWUgKyBcIiwgXCIgKyByZXN1bHRzLmZpcnN0TmFtZTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZG9TZWFyY2godHJ1ZSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci51cGRhdGVEZW1vZ3JhcGhpY05vID0gZnVuY3Rpb24gdXBkYXRlRGVtb2dyYXBoaWNObyhpdGVtLCBtb2RlbCwgbGFiZWwpXG5cdFx0e1xuXHRcdFx0aWYoaXRlbSAhPT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5kZW1vZ3JhcGhpY05hbWUgPSBpdGVtLm5hbWU7XG5cdFx0XHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWNObyA9IGl0ZW0uZGVtb2dyYXBoaWNObztcblx0XHRcdFx0Y29udHJvbGxlci50YWJsZVBhcmFtcy5yZWxvYWQoKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jaGVja0FsbCA9IGZ1bmN0aW9uIGNoZWNrQWxsKClcblx0XHR7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2goY29udHJvbGxlci5sYXN0UmVzcG9uc2UsIGZ1bmN0aW9uKGl0ZW0pXG5cdFx0XHR7XG5cdFx0XHRcdGl0ZW0uY2hlY2tlZCA9IHRydWU7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jaGVja05vbmUgPSBmdW5jdGlvbiBjaGVja05vbmUoKVxuXHRcdHtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChjb250cm9sbGVyLmxhc3RSZXNwb25zZSwgZnVuY3Rpb24oaXRlbSlcblx0XHRcdHtcblx0XHRcdFx0aXRlbS5jaGVja2VkID0gZmFsc2U7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5lZGl0Q29uc3VsdCA9IGZ1bmN0aW9uIGVkaXRDb25zdWx0KGNvbnN1bHQpXG5cdFx0e1xuXHRcdFx0aWYoY29uc3VsdClcblx0XHRcdHtcblx0XHRcdFx0dXJsID0gXCIvcmVjb3JkL1wiICsgY29uc3VsdC5kZW1vZ3JhcGhpYy5kZW1vZ3JhcGhpY05vICsgXCIvY29uc3VsdFJlc3BvbnNlL1wiICsgY29uc3VsdC5pZDtcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgodXJsKS5zZWFyY2goY29udHJvbGxlci5zZWFyY2gpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0YWxlcnQoXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5hZGRDb25zdWx0ID0gZnVuY3Rpb24gYWRkQ29uc3VsdCgpXG5cdFx0e1xuXHRcdFx0aWYgKCFjb250cm9sbGVyLmNvbnN1bHRXcml0ZUFjY2Vzcylcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQoXCJZb3UgZG9uJ3QgaGF2ZSByaWdodCB0byBjcmVhdGUgbmV3IGNvbnN1bHQgcmVzcG9uc2VcIik7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVXNlciBzaG91bGRuJ3QgYmUgYWJsZSB0byBhY2Nlc3MgdGhpcyBmdW5jdGlvbiB1bmxlc3MgZGVtb05vIGlzIHBvcHVsYXRlZCwgYnV0IGNoZWNrIGp1c3QgaW4gY2FzZVxuXHRcdFx0aWYoY29udHJvbGxlci5kZW1vZ3JhcGhpY05vKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgdXJsID0gXCIvcmVjb3JkL1wiICsgY29udHJvbGxlci5kZW1vZ3JhcGhpY05vICsgXCIvY29uc3VsdFJlc3BvbnNlL25ld1wiO1xuXHRcdFx0XHQkbG9jYXRpb24ucGF0aCh1cmwpLnNlYXJjaChjb250cm9sbGVyLnNlYXJjaCk7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRhbGVydChcIlNvbWV0aGluZyB3ZW50IHdyb25nXCIpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnJlbW92ZURlbW9ncmFwaGljQXNzaWdubWVudCA9IGZ1bmN0aW9uIHJlbW92ZURlbW9ncmFwaGljQXNzaWdubWVudCgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5kZW1vZ3JhcGhpY05vID0gbnVsbDtcblx0XHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWNOYW1lID0gbnVsbDtcblx0XHRcdGNvbnRyb2xsZXIudGFibGVQYXJhbXMucmVsb2FkKCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucmVtb3ZlTXJwQXNzaWdubWVudCA9IGZ1bmN0aW9uIHJlbW92ZU1ycEFzc2lnbm1lbnQoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLm1ycE5vID0gbnVsbDtcblx0XHRcdGNvbnRyb2xsZXIuY29uc3VsdC5tcnBOYW1lID0gbnVsbDtcblx0XHRcdGNvbnRyb2xsZXIudGFibGVQYXJhbXMucmVsb2FkKCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpXG5cdFx0e1xuXHRcdFx0aWYoIWNvbnRyb2xsZXIub25SZWNvcmRQYWdlKVxuXHRcdFx0XHRjb250cm9sbGVyLnJlbW92ZURlbW9ncmFwaGljQXNzaWdubWVudCgpO1xuXHRcdFx0Y29udHJvbGxlci5yZW1vdmVNcnBBc3NpZ25tZW50KCk7XG5cdFx0XHRjb250cm9sbGVyLnNlYXJjaCA9IHtcblx0XHRcdFx0dGVhbTogYWxsVGVhbXMsXG5cdFx0XHRcdHN0YXJ0SW5kZXg6IDAsXG5cdFx0XHRcdG51bVRvUmV0dXJuOiAxMCxcblx0XHRcdH07XG5cblx0XHRcdGNvbnRyb2xsZXIuZG9TZWFyY2goKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5kb1NlYXJjaCA9IGZ1bmN0aW9uIGRvU2VhcmNoKGluaXQpXG5cdFx0e1xuXHRcdFx0JGxvY2F0aW9uLnNlYXJjaChjb250cm9sbGVyLnNlYXJjaCk7XG5cdFx0XHRjb250cm9sbGVyLnRhYmxlUGFyYW1zLnJlbG9hZCgpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnRhYmxlUGFyYW1zID0gbmV3IE5nVGFibGVQYXJhbXMoXG5cdFx0e1xuXHRcdFx0cGFnZTogMSwgLy8gc2hvdyBmaXJzdCBwYWdlXG5cdFx0XHRjb3VudDogMTAsIC8vIGluaXRpYWwgY291bnQgcGVyIHBhZ2Vcblx0XHRcdHNvcnRpbmc6XG5cdFx0XHR7XG5cdFx0XHRcdFJlZmVycmFsRGF0ZTogJ2Rlc2MnIC8vIGluaXRpYWwgc29ydGluZ1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0Ly8gdG90YWw6IDAsIC8vIGxlbmd0aCBvZiBkYXRhXG5cdFx0XHRnZXREYXRhOiBmdW5jdGlvbihwYXJhbXMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuZ2V0U2F2ZWRTZWFyY2hQYXJhbXMoKTtcblx0XHRcblx0XHRcdFx0dmFyIGNvdW50ID0gcGFyYW1zLl9wYXJhbXMuY291bnQ7XG5cdFx0XHRcdHZhciBwYWdlID0gcGFyYW1zLnVybCgpLnBhZ2U7XG5cblx0XHRcdFx0Y29udHJvbGxlci5zZWFyY2guc3RhcnRJbmRleCA9ICgocGFnZSAtIDEpICogY291bnQpO1xuXHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5udW1Ub1JldHVybiA9IHBhcnNlSW50KGNvdW50KTtcblxuXHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5wYWdlID0gcGFyYW1zLnVybCgpLnBhZ2U7XG5cdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLnBlclBhZ2UgPSBwYXJhbXMudXJsKCkuY291bnQ7XG5cblx0XHRcdFx0dmFyIG15UmVnZXhwID0gL3NvcnRpbmdcXFsoXFx3KylcXF0vZztcblx0XHRcdFx0Zm9yKHZhciBrZXkgaW4gcGFyYW1zLnVybCgpKSB7XG5cdFx0XHRcdFx0dmFyIG1hdGNoID0gbXlSZWdleHAuZXhlYyhTdHJpbmcoa2V5KSk7XG5cdFx0XHRcdFx0aWYobWF0Y2gpIHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLnNvcnRDb2x1bW4gPSBtYXRjaFsxXTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLnNvcnREaXJlY3Rpb24gPSBwYXJhbXMudXJsKClbU3RyaW5nKGtleSldO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciB0bXBTZWFyY2ggPSBhbmd1bGFyLmNvcHkoY29udHJvbGxlci5zZWFyY2gpO1xuXG5cdFx0XHRcdGlmICh0bXBTZWFyY2gudGVhbSA9PT0gYWxsVGVhbXMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0bXBTZWFyY2gudGVhbSA9IG51bGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihjb250cm9sbGVyLmRlbW9ncmFwaGljTm8pXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0bXBTZWFyY2guZGVtb2dyYXBoaWNObyA9IGNvbnRyb2xsZXIuZGVtb2dyYXBoaWNObztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBjb25zdWx0U2VydmljZS5zZWFyY2hSZXNwb25zZXModG1wU2VhcmNoKS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRwYXJhbXMudG90YWwocGFyc2VJbnQocmVzdWx0cy5tZXRhLnRvdGFsWzBdKSk7XG5cblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0cy5kYXRhLmxlbmd0aDsgaSsrKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHR2YXIgY29uc3VsdCA9IHJlc3VsdHMuZGF0YVtpXTtcblxuXHRcdFx0XHRcdFx0XHQvL2FkZCBzdGF0dXNEZXNjcmlwdGlvblxuXHRcdFx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNvbnRyb2xsZXIuc3RhdHVzZXMubGVuZ3RoOyBqKyspXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29uc3VsdC5zdGF0dXMgPT09IGNvbnRyb2xsZXIuc3RhdHVzZXNbal0udmFsdWUpXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3VsdC5zdGF0dXNEZXNjcmlwdGlvbiA9IGNvbnRyb2xsZXIuc3RhdHVzZXNbal0ubmFtZTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vYWRkIHVyZ2VuY3lEZXNjcmlwdGlvblxuXHRcdFx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNvbnRyb2xsZXIudXJnZW5jaWVzLmxlbmd0aDsgaisrKVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGNvbnN1bHQudXJnZW5jeSA9PT0gY29udHJvbGxlci51cmdlbmNpZXNbal0udmFsdWUpXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3VsdC51cmdlbmN5RGVzY3JpcHRpb24gPSBjb250cm9sbGVyLnVyZ2VuY2llc1tqXS5uYW1lO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly9hZGQgdXJnZW5jeUNvbG9yIGlmIGNvbnN1bHQgdXJnZW5jeT1VcmdlbnQoMSlcblx0XHRcdFx0XHRcdFx0aWYgKGNvbnN1bHQudXJnZW5jeSA9PT0gMSlcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN1bHQudXJnZW5jeUNvbG9yID0gXCJ0ZXh0LWRhbmdlclwiOyAvLz0gcmVkIHRleHRcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmxhc3RSZXNwb25zZSA9IHJlc3VsdHMuZGF0YTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzLmRhdGE7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGNvbnRyb2xsZXIuZ2V0U2F2ZWRTZWFyY2hQYXJhbXMgPSBmdW5jdGlvbiBnZXRTYXZlZFNlYXJjaFBhcmFtcygpXG5cdFx0e1xuXHRcdFx0Ly9wcm9jZXNzIHNlYXJjaCBwYXJhbWV0ZXJzXG5cdFx0XHRpZiAoJHN0YXRlLnBhcmFtcy5kZW1vZ3JhcGhpY05vICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuaGlkZVNlYXJjaFBhdGllbnQgPSB0cnVlO1xuXHRcdFx0XHRjb250cm9sbGVyLnVwZGF0ZURlbW9ncmFwaGljTm8obnVsbCwgJHN0YXRlLnBhcmFtcy5kZW1vZ3JhcGhpY05vKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKCRsb2NhdGlvbi5zZWFyY2goKS5zcmhEZW1vTm8gIT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci51cGRhdGVEZW1vZ3JhcGhpY05vKG51bGwsICRsb2NhdGlvbi5zZWFyY2goKS5zcmhEZW1vTm8pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCRsb2NhdGlvbi5zZWFyY2goKS5zcmhNcnBObyAhPSBudWxsKSBjb250cm9sbGVyLnVwZGF0ZU1ycE5vKCRsb2NhdGlvbi5zZWFyY2goKS5zcmhNcnBObyk7XG5cdFx0XHRpZiAoJGxvY2F0aW9uLnNlYXJjaCgpLnJlZmVycmFsU3RhcnREYXRlKSBjb250cm9sbGVyLnNlYXJjaC5yZWZlcnJhbFN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCRsb2NhdGlvbi5zZWFyY2goKS5yZWZlcnJhbFN0YXJ0RGF0ZSk7XG5cdFx0XHRpZiAoJGxvY2F0aW9uLnNlYXJjaCgpLnJlZmVycmFsRW5kRGF0ZSAhPSBudWxsKSBjb250cm9sbGVyLnNlYXJjaC5yZWZlcnJhbEVuZERhdGUgPSBuZXcgRGF0ZSgkbG9jYXRpb24uc2VhcmNoKCkucmVmZXJyYWxFbmREYXRlKTtcblx0XHRcdGlmICgkbG9jYXRpb24uc2VhcmNoKCkuYXBwb2ludG1lbnRTdGFydERhdGUgIT0gbnVsbCkgY29udHJvbGxlci5zZWFyY2guYXBwb2ludG1lbnRTdGFydERhdGUgPSBuZXcgRGF0ZSgkbG9jYXRpb24uc2VhcmNoKCkuYXBwb2ludG1lbnRTdGFydERhdGUpO1xuXHRcdFx0aWYgKCRsb2NhdGlvbi5zZWFyY2goKS5hcHBvaW50bWVudEVuZERhdGUgIT0gbnVsbCkgY29udHJvbGxlci5zZWFyY2guYXBwb2ludG1lbnRFbmREYXRlID0gbmV3IERhdGUoJGxvY2F0aW9uLnNlYXJjaCgpLmFwcG9pbnRtZW50RW5kRGF0ZSk7XG5cdFx0XHRpZiAoJGxvY2F0aW9uLnNlYXJjaCgpLnN0YXR1cyAhPSBudWxsKSBjb250cm9sbGVyLnNlYXJjaC5zdGF0dXMgPSBOdW1iZXIoJGxvY2F0aW9uLnNlYXJjaCgpLnN0YXR1cyk7XG5cdFx0XHRpZiAoJGxvY2F0aW9uLnNlYXJjaCgpLnRlYW0gIT0gbnVsbCkgY29udHJvbGxlci5zZWFyY2gudGVhbSA9ICRsb2NhdGlvbi5zZWFyY2goKS50ZWFtO1xuXHRcdFx0aWYgKCRsb2NhdGlvbi5zZWFyY2goKS5jb3VudFBlclBhZ2UgIT0gbnVsbCkgY29udHJvbGxlci5jb3VudFBlclBhZ2UgPSAkbG9jYXRpb24uc2VhcmNoKCkuY291bnRQZXJQYWdlO1xuXHRcdFx0aWYgKCRsb2NhdGlvbi5zZWFyY2goKS50b1BhZ2UgIT0gbnVsbCkgY29udHJvbGxlci50b1BhZ2UgPSAkbG9jYXRpb24uc2VhcmNoKCkudG9QYWdlO1xuXHRcdFx0aWYgKCRsb2NhdGlvbi5zZWFyY2goKS5zb3J0Q29sdW1uICE9IG51bGwgJiYgJGxvY2F0aW9uLnNlYXJjaCgpLnNvcnREaXJlY3Rpb24gIT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5zZWFyY2guc29ydENvbHVtbiA9ICRsb2NhdGlvbi5zZWFyY2goKS5zb3J0Q29sdW1uO1xuXHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5zb3J0RGlyZWN0aW9uID0gJGxvY2F0aW9uLnNlYXJjaCgpLnNvcnREaXJlY3Rpb247XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuaW5pdCgpO1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdDb25zdWx0cycsIFsnQ29tbW9uJywgJ0NvbW1vbi5TZXJ2aWNlcyddKTsiLCIvKlxuXG4gICAgQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuICAgIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiAgICBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiAgICBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gICAgVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gICAgRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiAgICBNY01hc3RlciBVbml2ZXJzaXR5XG4gICAgSGFtaWx0b25cbiAgICBPbnRhcmlvLCBDYW5hZGFcblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdEYXNoYm9hcmQnKS5jb250cm9sbGVyKCdEYXNoYm9hcmQuRGFzaGJvYXJkQ29udHJvbGxlcicsIFtcblxuICAgICckc2NvcGUnLFxuICAgICckdWliTW9kYWwnLFxuICAgICdOZ1RhYmxlUGFyYW1zJyxcbiAgICAncHJvdmlkZXJTZXJ2aWNlJyxcbiAgICAndGlja2xlclNlcnZpY2UnLFxuICAgICdtZXNzYWdlU2VydmljZScsXG4gICAgJ2luYm94U2VydmljZScsXG4gICAgJ2syYVNlcnZpY2UnLFxuICAgICdub3RlU2VydmljZScsXG4gICAgJ3NlY3VyaXR5U2VydmljZScsXG4gICAgJ3BlcnNvbmFTZXJ2aWNlJyxcblxuICAgIGZ1bmN0aW9uKCRzY29wZSxcbiAgICAgICAgICAgICAkdWliTW9kYWwsXG4gICAgICAgICAgICAgTmdUYWJsZVBhcmFtcyxcbiAgICAgICAgICAgICBwcm92aWRlclNlcnZpY2UsXG4gICAgICAgICAgICAgdGlja2xlclNlcnZpY2UsXG4gICAgICAgICAgICAgbWVzc2FnZVNlcnZpY2UsXG4gICAgICAgICAgICAgaW5ib3hTZXJ2aWNlLFxuICAgICAgICAgICAgIGsyYVNlcnZpY2UsXG4gICAgICAgICAgICAgbm90ZVNlcnZpY2UsXG4gICAgICAgICAgICAgc2VjdXJpdHlTZXJ2aWNlLFxuICAgICAgICAgICAgIHBlcnNvbmFTZXJ2aWNlKVxuICAgIHtcblxuICAgICAgICB2YXIgY29udHJvbGxlciA9IHRoaXM7XG5cbiAgICAgICAgLy9oZWFkZXJcbiAgICAgICAgY29udHJvbGxlci5kaXNwbGF5RGF0ZSA9IGZ1bmN0aW9uIGRpc3BsYXlEYXRlKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUubG9nKCdUQUJMRSBQQVJBTVMnLCBOZ1RhYmxlUGFyYW1zKTtcbiAgICAgICAgY29udHJvbGxlci5tZSA9IG51bGw7XG4gICAgICAgIGNvbnRyb2xsZXIuazJhQWN0aXZlID0gZmFsc2U7XG5cdCAgICBjb250cm9sbGVyLmsyYUZlZWRBY3RpdmUgPSBmYWxzZTtcblxuXHQgICAgY29udHJvbGxlci5idXN5TG9hZGluZ0RhdGEgPSBmYWxzZTtcblxuICAgICAgICBwZXJzb25hU2VydmljZS5nZXREYXNoYm9hcmRQcmVmZXJlbmNlcygpLnRoZW4oXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5wcmVmcyA9IHJlc3VsdHMuZGFzaGJvYXJkUHJlZmVyZW5jZXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9ycyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHRzKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdE5hbWU6ICdfdGlja2xlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcml2aWxlZ2U6ICd3J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3ROYW1lOiAnX3RpY2tsZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpdmlsZWdlOiAncidcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0pLnRoZW4oXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMuY29udGVudCAhPSBudWxsICYmIHJlc3VsdHMuY29udGVudC5sZW5ndGggPT0gMilcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIudGlja2xlcldyaXRlQWNjZXNzID0gcmVzdWx0cy5jb250ZW50WzBdO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLnRpY2tsZXJSZWFkQWNjZXNzID0gcmVzdWx0cy5jb250ZW50WzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3JzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRyb2xsZXIuaW5ib3hUYWJsZVBhcmFtcyA9IG5ldyBOZ1RhYmxlUGFyYW1zKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhZ2U6IDEsIC8vIHNob3cgZmlyc3QgcGFnZVxuICAgICAgICAgICAgICAgIGNvdW50OiAxMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyB0b3RhbDogMCwgLy8gbGVuZ3RoIG9mIGRhdGFcbiAgICAgICAgICAgICAgICBnZXREYXRhOiBmdW5jdGlvbihwYXJhbXMpXG4gICAgICAgICAgICAgICAge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluYm94U2VydmljZS5nZXREYXNoYm9hcmRJdGVtcyhwYXJhbXMuY291bnQoKSkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSU5CT1ggREFUQTogJywgcmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnRvdGFsKHJlc3VsdHMudG90YWwpOyAvLyByZWNhbC4gcGFnZSBuYXYgY29udHJvbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cy5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yKGVycm9ycylcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgY29udHJvbGxlci5vcGVuSW5ib3ggPSBmdW5jdGlvbiBvcGVuSW5ib3goKVxuICAgICAgICB7XG4gICAgICAgICAgICBuZXd3aW5kb3cgPSB3aW5kb3cub3BlbignLi4vZG1zL2luYm94TWFuYWdlLmRvP21ldGhvZD1wcmVwYXJlRm9ySW5kZXhQYWdlJywgJ2luYm94JywgJ2hlaWdodD03MDAsd2lkdGg9MTAwMCcpO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5mb2N1cylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuZXd3aW5kb3cuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG5cdCAgICBjb250cm9sbGVyLnVwZGF0ZUsyYUFjdGl2ZSA9IGZ1bmN0aW9uICgpXG5cdCAgICB7XG5cdFx0ICAgIGsyYVNlcnZpY2UuaXNLMkFJbml0KCkudGhlbihcblx0XHRcdCAgICBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpXG5cdFx0XHQgICAge1xuXHRcdFx0XHQgICAgY29udHJvbGxlci5rMmFBY3RpdmUgPSBkYXRhO1xuXHRcdFx0ICAgIH1cblx0XHQgICAgKTtcblx0ICAgIH07XG5cdCAgICBjb250cm9sbGVyLmxvYWRNb3JlSzJhRmVlZCA9IGZ1bmN0aW9uICgpXG5cdCAgICB7XG5cdFx0ICAgIGNvbnRyb2xsZXIudXBkYXRlRmVlZChjb250cm9sbGVyLmsyYWZlZWQubGVuZ3RoLCAxMCk7XG5cdCAgICB9O1xuXG5cdCAgICBjb250cm9sbGVyLmF1dGhlbnRpY2F0ZUsyQSA9IGZ1bmN0aW9uIChpZClcblx0ICAgIHtcblx0XHQgICAgd2luZG93Lm9wZW4oJy4uL2FwcHMvb2F1dGgxLmpzcD9pZD0nICsgaWQsICdhcHBBdXRoJywgJ3dpZHRoPTcwMCxoZWlnaHQ9NDUwJyk7XG5cdCAgICB9O1xuXG5cdCAgICBjb250cm9sbGVyLmFncmVlV2l0aEsyYVBvc3QgPSBmdW5jdGlvbiAoaXRlbSlcblx0ICAgIHtcblx0XHQgICAgaWYgKGl0ZW0uYWdyZWUpXG5cdFx0ICAgIHtcblx0XHRcdCAgICBrMmFTZXJ2aWNlLnJlbW92ZUsyQUNvbW1lbnQoaXRlbS5hZ3JlZUlkKS50aGVuKFxuXHRcdFx0XHQgICAgZnVuY3Rpb24gKHJlc3BvbnNlKVxuXHRcdFx0XHQgICAge1xuXHRcdFx0XHRcdCAgICBpdGVtLmFncmVlID0gZmFsc2U7XG5cdFx0XHRcdFx0ICAgIGl0ZW0uYWdyZWVDb3VudC0tO1xuXHRcdFx0XHRcdCAgICBpdGVtLmFncmVlSWQgPSAnJztcblx0XHRcdFx0ICAgIH0sXG5cdFx0XHRcdCAgICBmdW5jdGlvbiAocmVhc29uKVxuXHRcdFx0XHQgICAge1xuXHRcdFx0XHRcdCAgICBhbGVydChyZWFzb24pO1xuXHRcdFx0XHQgICAgfSk7XG5cdFx0ICAgIH1cblx0XHQgICAgZWxzZSBpZiAoIShpdGVtLmFncmVlIHx8IGl0ZW0uZGlzYWdyZWUpKVxuXHRcdCAgICB7XG5cdFx0XHQgICAgaWYgKHR5cGVvZiBpdGVtLm5ld0NvbW1lbnQgPT09ICd1bmRlZmluZWQnKVxuXHRcdFx0ICAgIHtcblx0XHRcdFx0ICAgIGl0ZW0ubmV3Q29tbWVudCA9IHt9O1xuXHRcdFx0ICAgIH1cblx0XHRcdCAgICBpdGVtLm5ld0NvbW1lbnQuYWdyZWUgPSB0cnVlO1xuXHRcdFx0ICAgIGl0ZW0ubmV3Q29tbWVudC5ib2R5ID0gJyc7XG5cblx0XHRcdCAgICBjb250cm9sbGVyLmNvbW1lbnRPbksyYVBvc3QoaXRlbSk7XG5cdFx0ICAgIH1cblx0ICAgIH07XG5cblx0ICAgIGNvbnRyb2xsZXIuZGlzYWdyZWVXaXRoSzJhUG9zdCA9IGZ1bmN0aW9uIChpdGVtKVxuXHQgICAge1xuXHRcdCAgICBpZiAoaXRlbS5kaXNhZ3JlZSlcblx0XHQgICAge1xuXHRcdFx0ICAgIGsyYVNlcnZpY2UucmVtb3ZlSzJBQ29tbWVudChpdGVtLmFncmVlSWQpLnRoZW4oXG5cdFx0XHRcdCAgICBmdW5jdGlvbiAocmVzcG9uc2UpXG5cdFx0XHRcdCAgICB7XG5cdFx0XHRcdFx0ICAgIGl0ZW0uZGlzYWdyZWUgPSBmYWxzZTtcblx0XHRcdFx0XHQgICAgaXRlbS5kaXNhZ3JlZUNvdW50LS07XG5cdFx0XHRcdFx0ICAgIGl0ZW0uYWdyZWVJZCA9ICcnO1xuXHRcdFx0XHQgICAgfSxcblx0XHRcdFx0ICAgIGZ1bmN0aW9uIChyZWFzb24pXG5cdFx0XHRcdCAgICB7XG5cdFx0XHRcdFx0ICAgIGFsZXJ0KHJlYXNvbik7XG5cdFx0XHRcdCAgICB9KTtcblx0XHQgICAgfVxuXHRcdCAgICBpZiAoIShpdGVtLmFncmVlIHx8IGl0ZW0uZGlzYWdyZWUpKVxuXHRcdCAgICB7XG5cdFx0XHQgICAgaWYgKHR5cGVvZiBpdGVtLm5ld0NvbW1lbnQgPT09ICd1bmRlZmluZWQnKVxuXHRcdFx0ICAgIHtcblx0XHRcdFx0ICAgIGl0ZW0ubmV3Q29tbWVudCA9IHt9O1xuXHRcdFx0ICAgIH1cblx0XHRcdCAgICBpdGVtLm5ld0NvbW1lbnQuYWdyZWUgPSBmYWxzZTtcblx0XHRcdCAgICBpdGVtLm5ld0NvbW1lbnQuYm9keSA9ICcnO1xuXG5cdFx0XHQgICAgY29udHJvbGxlci5jb21tZW50T25LMmFQb3N0KGl0ZW0pO1xuXHRcdCAgICB9XG5cdCAgICB9O1xuXG5cdCAgICBjb250cm9sbGVyLmNvbW1lbnRPbksyYVBvc3QgPSBmdW5jdGlvbiAoaXRlbSlcblx0ICAgIHtcblx0XHQgICAgaXRlbS5uZXdDb21tZW50LnBvc3RJZCA9IGl0ZW0uaWQ7XG5cdFx0ICAgIGsyYVNlcnZpY2UucG9zdEsyQUNvbW1lbnQoaXRlbS5uZXdDb21tZW50KS50aGVuKFxuXHRcdFx0ICAgIGZ1bmN0aW9uIChyZXNwb25zZSlcblx0XHRcdCAgICB7XG5cdFx0XHRcdCAgICBpdGVtLm5ld0NvbW1lbnQuYm9keSA9ICcnO1xuXHRcdFx0XHQgICAgaXRlbS5uZXdDb21tZW50LmFncmVlID0gJyc7XG5cdFx0XHRcdCAgICBpdGVtLmFncmVlSWQgPSByZXNwb25zZS5hZ3JlZUlkO1xuXHRcdFx0XHQgICAgaWYgKCEodHlwZW9mIHJlc3BvbnNlLnBvc3RbMF0uYWdyZWUgPT09ICd1bmRlZmluZWQnKSlcblx0XHRcdFx0ICAgIHtcblx0XHRcdFx0XHQgICAgaWYgKHJlc3BvbnNlLnBvc3RbMF0uYWdyZWUpXG5cdFx0XHRcdFx0ICAgIHtcblx0XHRcdFx0XHRcdCAgICBpdGVtLmFncmVlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdCAgICBpdGVtLmFncmVlSWQgPSByZXNwb25zZS5wb3N0WzBdLmFncmVlSWQ7XG5cdFx0XHRcdFx0XHQgICAgaXRlbS5hZ3JlZUNvdW50Kys7XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgZWxzZVxuXHRcdFx0XHRcdCAgICB7XG5cdFx0XHRcdFx0XHQgICAgaXRlbS5kaXNhZ3JlZSA9IHRydWU7XG5cdFx0XHRcdFx0XHQgICAgaXRlbS5hZ3JlZUlkID0gcmVzcG9uc2UucG9zdFswXS5hZ3JlZUlkO1xuXHRcdFx0XHRcdFx0ICAgIGl0ZW0uZGlzYWdyZWVDb3VudCsrO1xuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdCAgICB9XG5cdFx0XHRcdCAgICBlbHNlXG5cdFx0XHRcdCAgICB7XG5cdFx0XHRcdFx0ICAgIGl0ZW0uY29tbWVudENvdW50Kys7XG5cdFx0XHRcdFx0ICAgIGl0ZW0uY29tbWVudHMudW5zaGlmdChyZXNwb25zZS5wb3N0WzBdKTtcblx0XHRcdFx0ICAgIH1cblx0XHRcdCAgICB9LFxuXHRcdFx0ICAgIGZ1bmN0aW9uIChyZWFzb24pXG5cdFx0XHQgICAge1xuXHRcdFx0XHQgICAgYWxlcnQocmVhc29uKTtcblx0XHRcdCAgICB9KTtcblx0ICAgIH07XG5cbiAgICAgICAgY29udHJvbGxlci51cGRhdGVUaWNrbGVycyA9IGZ1bmN0aW9uIHVwZGF0ZVRpY2tsZXJzKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy9jb25zaWRlciB0aGUgb3B0aW9uIHRvIGhhdmUgb3ZlcmR1ZSBvbmx5IG9yIG5vdFxuICAgICAgICAgICAgdGlja2xlclNlcnZpY2Uuc2VhcmNoKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnQScsXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0b3I6IGNvbnRyb2xsZXIubWUucHJvdmlkZXJObyxcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmR1ZU9ubHk6ICdwcm9wZXJ0eSdcbiAgICAgICAgICAgICAgICB9LCAwLCA2KS50aGVuKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIudG90YWxUaWNrbGVycyA9IHJlc3VsdHMudG90YWw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLmNvbnRlbnQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMuY29udGVudCBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLnRpY2tsZXJzID0gcmVzdWx0cy5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyWzBdID0gcmVzdWx0cy5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci50aWNrbGVycyA9IGFycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3JzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb250cm9sbGVyLnVwZGF0ZU1lc3NhZ2VzID0gZnVuY3Rpb24gdXBkYXRlTWVzc2FnZXMoKVxuICAgICAgICB7XG4gICAgICAgICAgICBtZXNzYWdlU2VydmljZS5nZXRVbnJlYWQoNikudGhlbihcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLnRvdGFsTWVzc2FnZXMgPSByZXN1bHRzLnRvdGFsO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLmNvbnRlbnQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMuY29udGVudCBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLm1lc3NhZ2VzID0gcmVzdWx0cy5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyWzBdID0gcmVzdWx0cy5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5tZXNzYWdlcyA9IGFycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3JzKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnRyb2xsZXIudXBkYXRlUmVwb3J0cyA9IGZ1bmN0aW9uIHVwZGF0ZVJlcG9ydHMoKVxuICAgICAgICB7XG4gICAgICAgICAgICAvL1RPRE86IGNoYW5nZWQgdG8gcmV0dXJuIDUgc2luY2UgdGhhdCBpcyBhbGwgd2UgYXJlIHVzaW5nIGF0IHRoZSBtb21lbnRcbiAgICAgICAgICAgIGluYm94U2VydmljZS5nZXREYXNoYm9hcmRJdGVtcyg1KS50aGVuKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLmNvbnRlbnQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMuY29udGVudCBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmluYm94ID0gcmVzdWx0cy5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyWzBdID0gcmVzdWx0cy5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5pbmJveCA9IGFycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLnRvdGFsSW5ib3ggPSByZXN1bHRzLnRvdGFsO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3JzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb250cm9sbGVyLnVwZGF0ZUZlZWQgPSBmdW5jdGlvbiB1cGRhdGVGZWVkKHN0YXJ0UG9pbnQsIG51bWJlck9mUm93cylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIuYnVzeUxvYWRpbmdEYXRhKSByZXR1cm47XG4gICAgICAgICAgICBjb250cm9sbGVyLmJ1c3lMb2FkaW5nRGF0YSA9IHRydWU7XG4gICAgICAgICAgICBrMmFTZXJ2aWNlLmdldEsyYUZlZWQoc3RhcnRQb2ludCwgbnVtYmVyT2ZSb3dzKS50aGVuKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcdGNvbnNvbGUubG9nKFwiazJhIGZlZWQgcmVzcG9uc2VcIiwgcmVzcG9uc2UpO1xuXG5cdCAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29udGVudCBpbnN0YW5jZW9mIEFycmF5KVxuXHQgICAgICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgICAgXHR2YXIgY29udGVudCA9IHJlc3BvbnNlLmNvbnRlbnQ7XG5cdFx0ICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7IGkrKylcblx0XHQgICAgICAgICAgICAgICAge1xuXHRcdFx0ICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShjb250ZW50W2ldLmNvbW1lbnRzKSlcblx0XHRcdCAgICAgICAgICAgICAgICB7XG5cdFx0XHRcdCAgICAgICAgICAgICAgICB2YXIgYXJyID0gbmV3IEFycmF5KCk7XG5cdFx0XHRcdCAgICAgICAgICAgICAgICBhcnJbMF0gPSBjb250ZW50W2ldLmNvbW1lbnRzO1xuXHRcdFx0XHQgICAgICAgICAgICAgICAgY29udGVudFtpXS5jb21tZW50cyA9IGFycjtcblx0XHRcdCAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250cm9sbGVyLmsyYWZlZWQgPT09ICd1bmRlZmluZWQnKVxuXHRcdCAgICAgICAgICAgICAgICB7XG5cdFx0XHQgICAgICAgICAgICAgICAgY29udHJvbGxlci5rMmFmZWVkID0gY29udGVudDtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICBlbHNlXG5cdFx0ICAgICAgICAgICAgICAgIHtcblx0XHRcdCAgICAgICAgICAgICAgICBjb250cm9sbGVyLmsyYWZlZWQgPSBjb250cm9sbGVyLmsyYWZlZWQuY29uY2F0KGNvbnRlbnQpO1xuXHRcdCAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuazJhRmVlZEFjdGl2ZSA9IHRydWU7XG5cdFx0ICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuYnVzeUxvYWRpbmdEYXRhID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlXG5cdCAgICAgICAgICAgICAgICB7XG5cdFx0ICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb250ZW50LmF1dGhlbnRpY2F0ZWsyYSlcblx0XHQgICAgICAgICAgICAgICAge1xuXHRcdFx0ICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuYXV0aGVudGljYXRlazJhID0gcmVzcG9uc2UuY29udGVudC5kZXNjcmlwdGlvbjtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICBlbHNlXG5cdFx0ICAgICAgICAgICAgICAgIHtcblx0XHRcdCAgICAgICAgICAgICAgICB2YXIgYXJyID0gbmV3IEFycmF5KCk7XG5cdFx0XHQgICAgICAgICAgICAgICAgYXJyWzBdID0gcmVzcG9uc2UuY29udGVudDtcblx0XHRcdCAgICAgICAgICAgICAgICBjb250cm9sbGVyLmsyYWZlZWQgPSBhcnI7XG5cdFx0XHQgICAgICAgICAgICAgICAgY29udHJvbGxlci5rMmFGZWVkQWN0aXZlID0gdHJ1ZTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZWFzb24pXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhbGVydChyZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmJ1c3lMb2FkaW5nRGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnRyb2xsZXIudXBkYXRlRGFzaGJvYXJkID0gZnVuY3Rpb24gdXBkYXRlRGFzaGJvYXJkKClcbiAgICAgICAge1xuICAgICAgICAgICAgY29udHJvbGxlci51cGRhdGVUaWNrbGVycygpO1xuICAgICAgICAgICAgY29udHJvbGxlci51cGRhdGVNZXNzYWdlcygpO1xuICAgICAgICAgICAgY29udHJvbGxlci51cGRhdGVSZXBvcnRzKCk7XG4gICAgICAgICAgICBjb250cm9sbGVyLnVwZGF0ZUZlZWQoMCwgMTApO1xuICAgICAgICAgICAgY29udHJvbGxlci51cGRhdGVLMmFBY3RpdmUoKTtcblxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gc2VjdXJpdHlTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24obmV3VmFsKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb250cm9sbGVyLm1lID0gbmV3VmFsO1xuXG4gICAgICAgICAgICBpZiAobmV3VmFsICE9IG51bGwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci51cGRhdGVEYXNoYm9hcmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdHJ1ZSk7XG5cblxuICAgICAgICBjb250cm9sbGVyLmlzVGlja2xlckV4cGlyZWRPckhpZ2hQcmlvcml0eSA9IGZ1bmN0aW9uIGlzVGlja2xlckV4cGlyZWRPckhpZ2hQcmlvcml0eSh0aWNrbGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdGlja2xlckRhdGUgPSBEYXRlLnBhcnNlKHRpY2tsZXIuc2VydmljZURhdGUpO1xuICAgICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGlja2xlckRhdGUgPCBub3cpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aWNrbGVyLnByaW9yaXR5ID09ICdIaWdoJylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnRyb2xsZXIuaXNUaWNrbGVySGlnaFByaW9yaXR5ID0gZnVuY3Rpb24gaXNUaWNrbGVySGlnaFByaW9yaXR5KHRpY2tsZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciB0aWNrbGVyRGF0ZSA9IERhdGUucGFyc2UodGlja2xlci5zZXJ2aWNlRGF0ZSk7XG4gICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKHRpY2tsZXIucHJpb3JpdHkgPT0gJ0hpZ2gnKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29udHJvbGxlci5vcGVuQ2xhc3NpY01lc3NlbmdlciA9IGZ1bmN0aW9uIG9wZW5DbGFzc2ljTWVzc2VuZ2VyKClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIubWUgIT0gbnVsbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbignLi4vb3NjYXJNZXNzZW5nZXIvRGlzcGxheU1lc3NhZ2VzLmRvP3Byb3ZpZGVyTm89JyArIGNvbnRyb2xsZXIubWUucHJvdmlkZXJObywgJ21zZ3MnLCAnaGVpZ2h0PTcwMCx3aWR0aD0xMDI0LHNjcm9sbGJhcnM9MScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnRyb2xsZXIudmlld01lc3NhZ2UgPSBmdW5jdGlvbiB2aWV3TWVzc2FnZShtZXNzYWdlKVxuICAgICAgICB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbignLi4vb3NjYXJNZXNzZW5nZXIvVmlld01lc3NhZ2UuZG8/bWVzc2FnZUlEPScgKyBtZXNzYWdlLmlkICsgJyZib3hUeXBlPTAnLCAnbXNnJyArIG1lc3NhZ2UuaWQsICdoZWlnaHQ9NzAwLHdpZHRoPTEwMjQsc2Nyb2xsYmFycz0xJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29udHJvbGxlci52aWV3VGlja2xlciA9IGZ1bmN0aW9uIHZpZXdUaWNrbGVyKHRpY2tsZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NyYy90aWNrbGVyL3RpY2tsZXJWaWV3LmpzcCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdUaWNrbGVyLlRpY2tsZXJWaWV3Q29udHJvbGxlciBhcyAgdGlja2xlclZpZXdDdHJsJyxcbiAgICAgICAgICAgICAgICAgICAgYmFja2Ryb3A6ICdzdGF0aWMnLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiAnbGcnLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlOlxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tsZXI6IGZ1bmN0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aWNrbGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja2xlck5vdGU6IGZ1bmN0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3RlU2VydmljZS5nZXRUaWNrbGVyTm90ZSh0aWNrbGVyLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tsZXJXcml0ZUFjY2VzczogZnVuY3Rpb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIudGlja2xlcldyaXRlQWNjZXNzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWU6IGZ1bmN0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLm1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdkYXRhIGZyb20gbW9kYWxJbnN0YW5jZSAnK2RhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0cyAhPSBudWxsICYmIHJlc3VsdHMgPT0gdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci51cGRhdGVUaWNrbGVycygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgY29udHJvbGxlci5jb25maWd1cmVUaWNrbGVycyA9IGZ1bmN0aW9uIGNvbmZpZ3VyZVRpY2tsZXJzKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3BlbihcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3JjL3RpY2tsZXIvY29uZmlndXJlRGFzaGJvYXJkLmpzcCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmQuVGlja2xlckNvbmZpZ3VyZUNvbnRyb2xsZXIgYXMgdGlja2xlckNvbmZpZ3VyZUN0cmwnLFxuICAgICAgICAgICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6ICdtZCcsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmU6XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZnM6IGZ1bmN0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwZXJzb25hU2VydmljZS5nZXREYXNoYm9hcmRQcmVmZXJlbmNlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0cyA9PSB0cnVlKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLnVwZGF0ZVRpY2tsZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25hU2VydmljZS5nZXREYXNoYm9hcmRQcmVmZXJlbmNlcygpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzdWx0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIucHJlZnMgPSByZXN1bHRzLmRhc2hib2FyZFByZWZlcmVuY2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG4gICAgfVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnRGFzaGJvYXJkJywgWydDb21tb24nLCAnQ29tbW9uLlNlcnZpY2VzJ10pOyIsImFuZ3VsYXIubW9kdWxlKCdEYXNoYm9hcmQnKS5jb250cm9sbGVyKCdEYXNoYm9hcmQuVGlja2xlckNvbmZpZ3VyZUNvbnRyb2xsZXInLCBbXG5cblx0JyRzY29wZScsXG5cdCckdWliTW9kYWxJbnN0YW5jZScsXG5cdCdwZXJzb25hU2VydmljZScsXG5cdCdwcmVmcycsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCR1aWJNb2RhbEluc3RhbmNlLFxuXHRcdHBlcnNvbmFTZXJ2aWNlLFxuXHRcdHByZWZzKVxuXHR7XG5cblx0XHR2YXIgY29udHJvbGxlciA9IHRoaXM7XG5cblx0XHRjb250cm9sbGVyLnByZWZzID0gcHJlZnMuZGFzaGJvYXJkUHJlZmVyZW5jZXM7XG5cblx0XHRjb250cm9sbGVyLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKVxuXHRcdHtcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKGZhbHNlKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zYXZlID0gZnVuY3Rpb24gc2F2ZSgpXG5cdFx0e1xuXG5cdFx0XHRwZXJzb25hU2VydmljZS51cGRhdGVEYXNoYm9hcmRQcmVmZXJlbmNlcyhjb250cm9sbGVyLnByZWZzKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSh0cnVlKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoZmFsc2UpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0fTtcblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ0RvY3VtZW50JykuY29udHJvbGxlcignRG9jdW1lbnQuRG9jdW1lbnRzQ29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0J3NlY3VyaXR5U2VydmljZScsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdHNlY3VyaXR5U2VydmljZSlcblx0e1xuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblx0XHRjb250cm9sbGVyLm1lID0gbnVsbDtcblxuXHRcdCRzY29wZS4kd2F0Y2goZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdHJldHVybiBzZWN1cml0eVNlcnZpY2UuZ2V0VXNlcigpO1xuXHRcdH0sIGZ1bmN0aW9uKG5ld1ZhbClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLm1lID0gbmV3VmFsO1xuXG5cdFx0XHRpZiAobmV3VmFsICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdHdpbmRvdy5vcGVuKCcuLi9kbXMvZG9jdW1lbnRSZXBvcnQuanNwP2Z1bmN0aW9uPXByb3ZpZGVyJmZ1bmN0aW9uaWQ9JyArIGNvbnRyb2xsZXIubWUucHJvdmlkZXJObywgJ2Vkb2NWaWV3JywgJ2hlaWdodD03MDAsd2lkdGg9MTAyNCcpO1xuXHRcdFx0fVxuXHRcdH0sIHRydWUpO1xuXG5cblx0XHRjb250cm9sbGVyLm9wZW5Qb3B1cCA9IGZ1bmN0aW9uIG9wZW5Qb3B1cCgpXG5cdFx0e1xuXHRcdFx0d2luZG93Lm9wZW4oJy4uL2Rtcy9kb2N1bWVudFJlcG9ydC5qc3A/ZnVuY3Rpb249cHJvdmlkZXImZnVuY3Rpb25pZD0nICsgY29udHJvbGxlci5tZS5wcm92aWRlck5vLCAnZWRvY1ZpZXcnLCAnaGVpZ2h0PTcwMCx3aWR0aD0xMDI0Jyk7XG5cdFx0fTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnRG9jdW1lbnQnLCBbJ0NvbW1vbicsICdDb21tb24uU2VydmljZXMnXSk7IiwiYW5ndWxhci5tb2R1bGUoJ0hlbHAnKS5jb250cm9sbGVyKCdIZWxwLkhlbHBDb250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJGh0dHAnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkaHR0cCkge1xuXG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0hlbHAnLCBbXSk7IiwiYW5ndWxhci5tb2R1bGUoJ0hlbHAnKS5jb250cm9sbGVyKCdIZWxwLlN1cHBvcnRDb250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJGh0dHAnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkaHR0cClcblx0e1xuXG5cdFx0JHNjb3BlLm9zcEluZm8gPSB7XG5cdFx0XHRuYW1lOiAnT3NjYXJIb3N0LmNhJyxcblx0XHRcdHBob25lOiAnMjUwLTkwMC03MzczJyxcblx0XHRcdGNvbnRhY3Q6ICdPc2Nhcmhvc3QgU3VwcG9ydCcsXG5cdFx0XHRlbWFpbDogJ3N1cHBvcnRAb3NjYXJob3N0LmNhJyxcblx0XHRcdHVybDogJ2h0dHBzOi8vaGVscC5vc2Nhcmhvc3QuY2EnXG5cdFx0fTtcblxuXHRcdCRzY29wZS5idWlsZEluZm8gPSB7XG5cdFx0XHR2ZXJzaW9uRGlzcGxheU5hbWU6ICcxNS1CZXRhJyxcblx0XHRcdHZlcnNpb246ICdtYXN0ZXItMDAwMCdcblx0XHR9O1xuXHR9XG5dKTsiLCJhbmd1bGFyLm1vZHVsZSgnSW5ib3gnKS5jb250cm9sbGVyKCdJbmJveC5JbmJveENvbnRyb2xsZXInLCBbXG5cblx0JyRzY29wZScsXG5cdCckaHR0cCcsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCRodHRwKSB7XG5cblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnSW5ib3gnLCBbXSk7IiwiXG5pbXBvcnQge1NjaGVkdWxlQXBpfSBmcm9tIFwiLi4vZ2VuZXJhdGVkL2FwaS9TY2hlZHVsZUFwaVwiO1xuaW1wb3J0IHtBcHBvaW50bWVudEFwaX0gZnJvbSBcIi4uL2dlbmVyYXRlZC9hcGkvQXBwb2ludG1lbnRBcGlcIjtcbi8vaW1wb3J0IHtDYWxlbmRhckFwaUFkYXB0ZXJ9IGZyb20gJy4vc2NoZWR1bGUvY2FsZW5kYXJBcGlBZGFwdGVyJztcblxuLypcbmFuZ3VsYXIubW9kdWxlKCdTY2hlZHVsZScpLnNlcnZpY2UoXG5cdCdTY2hlZHVsZS5DYWxlbmRhckFwaUFkYXB0ZXInLCBDYWxlbmRhckFwaUFkYXB0ZXIpO1xuXHQqL1xuIiwiYW5ndWxhci5tb2R1bGUoJ0xheW91dCcpLmNvbnRyb2xsZXIoJ0xheW91dC5Cb2R5Q29udHJvbGxlcicsIFtcblx0JyRyb290U2NvcGUnLFxuXHQnJHNjb3BlJyxcblx0J3Byb3ZpZGVyU2VydmljZScsXG5cdCdzZWN1cml0eVNlcnZpY2UnLFxuXHRmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsIHByb3ZpZGVyU2VydmljZSwgc2VjdXJpdHlTZXJ2aWNlKVxuXHR7XG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gSW5pdGlhbGl6YXRpb25cblx0XHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXHRcdGNvbnRyb2xsZXIuaW5pdCA9IGZ1bmN0aW9uIGluaXQoKVxuXHRcdHtcblx0XHRcdHByb3ZpZGVyU2VydmljZS5nZXRNZSgpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNlY3VyaXR5U2VydmljZS5zZXRVc2VyKHJlc3VsdHMpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Ly8gZmxhZyBmb3Igd2hldGhlciB0aGUgcGF0aWVudCBsaXN0IHNob3VsZCBiZSBzaG93aW5nIG9yIG5vdFxuXHRcdC8vIGNhbiBiZSBzZXQgZnJvbSBjb250cm9sbGVycyB3aXRoICRlbWl0OiAkc2NvcGUuJGVtaXQoJ2NvbmZpZ3VyZVNob3dQYXRpZW50TGlzdCcsIGZhbHNlKTtcblx0XHRjb250cm9sbGVyLnNob3dQYXRpZW50TGlzdCA9IHRydWU7XG5cblx0XHQvLyBjb250cm9sbGVycyBjYW4gdXBkYXRlIHRoZSBzaG93UGF0aWVudExpc3QgdmFsdWUgYnkgY2FsbGluZyBhbiAkZW1pdFxuXHRcdC8vIGUuZy4gJHNjb3BlLiRlbWl0KCdjb25maWd1cmVTaG93UGF0aWVudExpc3QnLCBmYWxzZSk7XG5cdFx0JHNjb3BlLiRvbignY29uZmlndXJlU2hvd1BhdGllbnRMaXN0Jyxcblx0XHRcdGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSlcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJMYXlvdXQuQm9keUNvbnRyb2xsZXIgdXBkYXRpbmcgc2hvd1BhdGllbnRMaXN0XCIsIHZhbHVlKTtcblx0XHRcdFx0Y29udHJvbGxlci5zaG93UGF0aWVudExpc3QgPSB2YWx1ZTtcblx0XHRcdH0pO1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiBIYW1pbHRvblxuIE9udGFyaW8sIENhbmFkYVxuXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoJ0xheW91dCcsIFsnQ29tbW9uJywgJ0NvbW1vbi5TZXJ2aWNlcyddKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiAgICBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gICAgVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiAgICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gICAgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuICAgIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuICAgIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiAgICBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiAgICBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuICAgIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiAgICBIYW1pbHRvblxuICAgIE9udGFyaW8sIENhbmFkYVxuXG4qL1xuXG5hbmd1bGFyLm1vZHVsZSgnTGF5b3V0JykuY29udHJvbGxlcignTGF5b3V0Lk5hdkJhckNvbnRyb2xsZXInLCBbXG5cblx0JyRyb290U2NvcGUnLFxuXHQnJHNjb3BlJyxcblx0JyRxJyxcblx0JyR0aW1lb3V0Jyxcblx0JyRsb2NhdGlvbicsXG5cdCckc3RhdGUnLFxuXHQnJHVpYk1vZGFsJyxcblx0J3NlY3VyaXR5U2VydmljZScsXG5cdCdwZXJzb25hU2VydmljZScsXG5cdCdiaWxsaW5nU2VydmljZScsXG5cdCdpbmJveFNlcnZpY2UnLFxuXHQnbWVzc2FnZVNlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRyb290U2NvcGUsXG5cdFx0JHNjb3BlLFxuXHRcdCRxLFxuXHRcdCR0aW1lb3V0LFxuXHRcdCRsb2NhdGlvbixcblx0XHQkc3RhdGUsXG5cdFx0JHVpYk1vZGFsLFxuXHRcdHNlY3VyaXR5U2VydmljZSxcblx0XHRwZXJzb25hU2VydmljZSxcblx0XHRiaWxsaW5nU2VydmljZSxcblx0XHRpbmJveFNlcnZpY2UsXG5cdFx0bWVzc2FnZVNlcnZpY2UpXG5cdHtcblx0XHR2YXIgY29udHJvbGxlciA9IHRoaXM7XG5cblx0XHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBJbml0aWFsaXphdGlvblxuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cdFx0Y29udHJvbGxlci5pbml0ID0gZnVuY3Rpb24gaW5pdCgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci51bkFja0xhYkRvY1RvdGFsID0gMDtcblx0XHRcdGNvbnRyb2xsZXIudW5yZWFkTWVzc2FnZVRvdGFsID0gMDtcblx0XHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWNTZWFyY2ggPSBudWxsO1xuXG5cdFx0XHRiaWxsaW5nU2VydmljZS5nZXRCaWxsaW5nUmVnaW9uKCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5iaWxsUmVnaW9uID0gcmVzdWx0cy5tZXNzYWdlO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0c2VjdXJpdHlTZXJ2aWNlLmhhc1JpZ2h0cyhcblx0XHRcdHtcblx0XHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG9iamVjdE5hbWU6ICdfc2VhcmNoJyxcblx0XHRcdFx0XHRwcml2aWxlZ2U6ICdyJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0b2JqZWN0TmFtZTogJ19kZW1vZ3JhcGhpYycsXG5cdFx0XHRcdFx0cHJpdmlsZWdlOiAndydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG9iamVjdE5hbWU6ICdfbXNnJyxcblx0XHRcdFx0XHRwcml2aWxlZ2U6ICdyJ1xuXHRcdFx0XHR9XVxuXHRcdFx0fSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYgKHJlc3VsdHMuY29udGVudCAhPT0gbnVsbClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaFJpZ2h0cyA9IHJlc3VsdHMuY29udGVudFswXTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIubmV3RGVtb2dyYXBoaWNSaWdodHMgPSByZXN1bHRzLmNvbnRlbnRbMV07XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLm1lc3NhZ2VSaWdodHMgPSByZXN1bHRzLmNvbnRlbnRbMl07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cGVyc29uYVNlcnZpY2UuZ2V0RGFzaGJvYXJkTWVudSgpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChyZXN1bHRzLm1lbnVzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZGFzaGJvYXJkTWVudSA9IHJlc3VsdHMubWVudXMubWVudTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRwZXJzb25hU2VydmljZS5nZXROYXZCYXIoKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmN1cnJlbnRQcm9ncmFtID0gcmVzdWx0cy5jdXJyZW50UHJvZ3JhbS5wcm9ncmFtO1xuXG5cdFx0XHRcdFx0aWYgKHJlc3VsdHMucHJvZ3JhbURvbWFpbi5wcm9ncmFtIGluc3RhbmNlb2YgQXJyYXkpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5wcm9ncmFtRG9tYWluID0gcmVzdWx0cy5wcm9ncmFtRG9tYWluLnByb2dyYW07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnByb2dyYW1Eb21haW4gPSBbcmVzdWx0cy5wcm9ncmFtRG9tYWluLnByb2dyYW1dO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNvbnRyb2xsZXIudW5yZWFkTWVzc2FnZXNDb3VudCA9IHJlc3VsdHMudW5yZWFkTWVzc2FnZXNDb3VudDtcblx0XHRcdFx0XHRjb250cm9sbGVyLnVucmVhZFBhdGllbnRNZXNzYWdlc0NvdW50ID0gcmVzdWx0cy51bnJlYWRQYXRpZW50TWVzc2FnZXNDb3VudDtcblx0XHRcdFx0XHRjb250cm9sbGVyLmdldFVuQWNrTGFiRG9jQ291bnQoKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLmdldFVucmVhZE1lc3NhZ2VDb3VudCgpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWNTZWFyY2hEcm9wRG93bkl0ZW1zID0gcmVzdWx0cy5tZW51cy5wYXRpZW50U2VhcmNoTWVudS5pdGVtcztcblx0XHRcdFx0XHRjb250cm9sbGVyLm1lbnVJdGVtcyA9IHJlc3VsdHMubWVudXMubWVudS5pdGVtcztcblx0XHRcdFx0XHRjb250cm9sbGVyLnVzZXJNZW51SXRlbXMgPSByZXN1bHRzLm1lbnVzLnVzZXJNZW51Lml0ZW1zO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIubWVzc2VuZ2VyTWVudSA9IHJlc3VsdHMubWVudXMubWVzc2VuZ2VyTWVudS5pdGVtcztcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cblx0XHR9O1xuXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gV2F0Y2hlc1xuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cdFx0JHNjb3BlLiR3YXRjaChcblx0XHRcdGZ1bmN0aW9uKClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIHNlY3VyaXR5U2VydmljZS5nZXRVc2VyKCk7XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24obmV3VmFsKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLm1lID0gbmV3VmFsO1xuXHRcdFx0fSxcblx0XHRcdHRydWUpO1xuXG5cdFx0JHNjb3BlLiR3YXRjaChmdW5jdGlvbigpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBjb250cm9sbGVyLmRlbW9ncmFwaGljU2VhcmNoO1xuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uKG5ld192YWx1ZSlcblx0XHRcdHtcblx0XHRcdFx0aWYgKG5ld192YWx1ZSAhPSBudWxsICYmICFuZXdfdmFsdWUuaXNUeXBlYWhlYWRTZWFyY2hRdWVyeSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vIHNlbGVjdGlvbiBmcm9tIHRoZSBwYXRpZW50IHNlYXJjaCB0eXBlYWhlYWQgY2hhbmdlZFxuXHRcdFx0XHRcdGlmIChuZXdfdmFsdWUubW9yZVJlc3VsdHMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly8gdGhlICdtb3JlIHJlc3VsdHMnIG9wdGlvbiB3YXMgc2VsZWN0ZWRcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZ29Ub1BhdGllbnRTZWFyY2gobmV3X3ZhbHVlLnNlYXJjaFF1ZXJ5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIHBhdGllbnQgd2FzIHNlbGVjdGVkXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmdvVG9QYXRpZW50UmVjb3JkKG5ld192YWx1ZS5kZW1vZ3JhcGhpY05vKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBjbGVhciB0aGUgc2VsZWN0aW9uXG5cdFx0XHRcdFx0Y29udHJvbGxlci5kZW1vZ3JhcGhpY1NlYXJjaCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH0sIHRydWUpO1xuXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gTWV0aG9kc1xuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cdFx0Y29udHJvbGxlci5nZXRVbkFja0xhYkRvY0NvdW50ID0gZnVuY3Rpb24gZ2V0VW5BY2tMYWJEb2NDb3VudCgpXG5cdFx0e1xuXHRcdFx0aW5ib3hTZXJ2aWNlLmdldFVuQWNrTGFiRG9jQ291bnQoKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnVuQWNrTGFiRG9jVG90YWwgPSByZXN1bHRzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZXRVbnJlYWRNZXNzYWdlQ291bnQgPSBmdW5jdGlvbiBnZXRVbnJlYWRNZXNzYWdlQ291bnQoKVxuXHRcdHtcblx0XHRcdG1lc3NhZ2VTZXJ2aWNlLmdldFVucmVhZENvdW50KCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci51bnJlYWRNZXNzYWdlVG90YWwgPSByZXN1bHRzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmdldE5hdkJhciA9IGZ1bmN0aW9uIGdldE5hdkJhcigpXG5cdFx0e1xuXHRcdFx0cGVyc29uYVNlcnZpY2UuZ2V0TmF2QmFyKCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5jdXJyZW50UHJvZ3JhbSA9IHJlc3VsdHMuY3VycmVudFByb2dyYW0ucHJvZ3JhbTtcblx0XHRcdFx0XHRpZiAocmVzdWx0cy5wcm9ncmFtRG9tYWluLnByb2dyYW0gaW5zdGFuY2VvZiBBcnJheSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnByb2dyYW1Eb21haW4gPSByZXN1bHRzLnByb2dyYW1Eb21haW4ucHJvZ3JhbTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucHJvZ3JhbURvbWFpbiA9IFtyZXN1bHRzLnByb2dyYW1Eb21haW4ucHJvZ3JhbV07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29udHJvbGxlci51bnJlYWRNZXNzYWdlc0NvdW50ID0gcmVzdWx0cy51bnJlYWRNZXNzYWdlc0NvdW50O1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIudW5yZWFkUGF0aWVudE1lc3NhZ2VzQ291bnQgPSByZXN1bHRzLnVucmVhZFBhdGllbnRNZXNzYWdlc0NvdW50O1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWNTZWFyY2hEcm9wRG93bkl0ZW1zID0gcmVzdWx0cy5tZW51cy5wYXRpZW50U2VhcmNoTWVudS5pdGVtcztcblx0XHRcdFx0XHRjb250cm9sbGVyLm1lbnVJdGVtcyA9IHJlc3VsdHMubWVudXMubWVudS5pdGVtcztcblx0XHRcdFx0XHRjb250cm9sbGVyLnVzZXJNZW51SXRlbXMgPSByZXN1bHRzLm1lbnVzLnVzZXJNZW51Lml0ZW1zO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIubWVzc2VuZ2VyTWVudSA9IHJlc3VsdHMubWVudXMubWVzc2VuZ2VyTWVudS5pdGVtcztcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdC8vIHdoZW4gcGF0aWVudCB0eXBlYWhlYWQgc2VhcmNoIGJ1dHRvbiBpcyBjbGlja2VkXG5cdFx0Y29udHJvbGxlci5vblBhdGllbnRTZWFyY2ggPSBmdW5jdGlvbiBvblBhdGllbnRTZWFyY2goc2VhcmNoKVxuXHRcdHtcblx0XHRcdGlmIChzZWFyY2ggPT09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuZ29Ub1BhdGllbnRTZWFyY2goKTtcblxuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoc2VhcmNoLmlzVHlwZWFoZWFkU2VhcmNoUXVlcnkpIC8vIHNob3VsZCBvbmx5IGhhcHBlbiB3aGVuIHNlYXJjaCBpc1R5cGVhaGVhZFNlYXJjaFF1ZXJ5XG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuZ29Ub1BhdGllbnRTZWFyY2goc2VhcmNoLnNlYXJjaFF1ZXJ5KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gY2xlYXIgdGhlIHNlbGVjdGlvblxuXHRcdFx0Y29udHJvbGxlci5kZW1vZ3JhcGhpY1NlYXJjaCA9IG51bGw7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZ29Ub1BhdGllbnRTZWFyY2ggPSBmdW5jdGlvbiBnb1RvUGF0aWVudFNlYXJjaChzZWFyY2gpXG5cdFx0e1xuXHRcdFx0JHN0YXRlLmdvKCdzZWFyY2gnLFxuXHRcdFx0e1xuXHRcdFx0XHR0ZXJtOiBzZWFyY2hcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHJlbG9hZDogJ3NlYXJjaCdcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmdvVG9QYXRpZW50UmVjb3JkID0gZnVuY3Rpb24gZ29Ub1BhdGllbnRSZWNvcmQoZGVtb2dyYXBoaWNObylcblx0XHR7XG5cdFx0XHQkc3RhdGUuZ28oJ3JlY29yZC5kZXRhaWxzJyxcblx0XHRcdHtcblx0XHRcdFx0ZGVtb2dyYXBoaWNObzogZGVtb2dyYXBoaWNObyxcblx0XHRcdFx0aGlkZU5vdGU6IHRydWVcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHJlbG9hZDogJ3JlY29yZC5kZXRhaWxzJ1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdC8vdG8gaGVscCBuZy1jbGlja3Mgb24gYnV0dG9uc1xuXHRcdGNvbnRyb2xsZXIudHJhbnNpdGlvbiA9IGZ1bmN0aW9uIHRyYW5zaXRpb24oaXRlbSlcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZygndHJhbnNpdGlvbicsIGl0ZW0pO1xuXG5cdFx0XHR2YXIgbmV3V2luZG93O1xuXG5cdFx0XHRpZiAoYW5ndWxhci5pc0RlZmluZWQoaXRlbSkgJiZcblx0XHRcdFx0YW5ndWxhci5pc0RlZmluZWQoaXRlbS5zdGF0ZSkgJiZcblx0XHRcdFx0aXRlbS5zdGF0ZSAhPT0gbnVsbClcblx0XHRcdHtcblxuXHRcdFx0XHR2YXIgdXJsID0gXCJcIjtcblx0XHRcdFx0dmFyIHduYW1lID0gXCJcIjtcblxuXHRcdFx0XHRpZiAoaXRlbS5sYWJlbCA9PT0gXCJJbmJveFwiKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dXJsID0gXCIuLi9kbXMvaW5ib3hNYW5hZ2UuZG8/bWV0aG9kPXByZXBhcmVGb3JJbmRleFBhZ2VcIjtcblx0XHRcdFx0XHR3bmFtZSA9IFwiaW5ib3hcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmIChpdGVtLmxhYmVsID09PSBcIkJpbGxpbmdcIilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHVybCA9IFwiLi4vYmlsbGluZy5kbz9iaWxsUmVnaW9uPUNMSU5JQ0FJRCZhY3Rpb249aW52b2ljZV9yZXBvcnRzXCI7XG5cdFx0XHRcdFx0d25hbWUgPSBcImJpbGxpbmdcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmIChpdGVtLmxhYmVsID09PSBcIkFkbWluXCIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR1cmwgPSBcIi4uL2FkbWluaXN0cmF0aW9uL1wiO1xuXHRcdFx0XHRcdHduYW1lID0gXCJhZG1pblwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKGl0ZW0ubGFiZWwgPT09IFwiZURvY3NcIilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHVybCA9IFwiLi4vZG1zL2RvY3VtZW50UmVwb3J0LmpzcD9mdW5jdGlvbj1wcm92aWRlciZmdW5jdGlvbmlkPVwiICtcblx0XHRcdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChjb250cm9sbGVyLm1lLnByb3ZpZGVyTm8pO1xuXHRcdFx0XHRcdHduYW1lID0gXCJlZG9jVmlld1wiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHQkc3RhdGUuZ28oaXRlbS5zdGF0ZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodXJsICE9PSBcIlwiICYmIHduYW1lICE9PSBcIlwiKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmV3V2luZG93ID0gd2luZG93Lm9wZW4oXG5cdFx0XHRcdFx0XHR1cmwsIHduYW1lLCAnc2Nyb2xsYmFycz0xLGhlaWdodD03MDAsd2lkdGg9MTAwMCcpO1xuXHRcdFx0XHRcdGlmICh3aW5kb3cuZm9jdXMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmV3V2luZG93LmZvY3VzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChhbmd1bGFyLmlzRGVmaW5lZChpdGVtKSAmJlxuXHRcdFx0XHRhbmd1bGFyLmlzRGVmaW5lZChpdGVtLnVybCkgJiZcblx0XHRcdFx0aXRlbS51cmwgIT09IG51bGwpXG5cdFx0XHR7XG5cblx0XHRcdFx0aWYgKGl0ZW0ubGFiZWwgPT09IFwiU2NoZWR1bGVcIilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciBxcyA9IFwiXCI7XG5cdFx0XHRcdFx0dmFyIHBhdGggPSAkbG9jYXRpb24ucGF0aCgpO1xuXHRcdFx0XHRcdHBhdGggPSBwYXRoLnN1YnN0cmluZygxKTsgLy9yZW1vdmUgbGVhZGluZyAvXG5cdFx0XHRcdFx0dmFyIHBhcmFtID0gcGF0aC5zcGxpdChcIi9cIik7XG5cblx0XHRcdFx0XHRpZiAocGFyYW0ubGVuZ3RoID09PSAxKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHFzID0gXCI/bW9kdWxlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtWzBdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSBpZiAocGFyYW0ubGVuZ3RoID09PSAzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHFzID0gXCI/cmVjb3JkPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtWzFdKSArXG5cdFx0XHRcdFx0XHRcdFwiJm1vZHVsZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbVsyXSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gaXRlbS51cmwgKyBxcztcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmIChhbmd1bGFyLmlzRGVmaW5lZChpdGVtKSAmJlxuXHRcdFx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKGl0ZW0ub3Blbk5ld1dpbmRvdykgJiZcblx0XHRcdFx0XHRpdGVtLm9wZW5OZXdXaW5kb3cpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuZXdXaW5kb3cgPSB3aW5kb3cub3BlbihpdGVtLnVybCk7XG5cdFx0XHRcdFx0aWYgKHdpbmRvdy5mb2N1cylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuZXdXaW5kb3cuZm9jdXMoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gaXRlbS51cmw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5vcGVuTWVzc2VuZ2VyID0gZnVuY3Rpb24oaXRlbSlcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5tZSAhPSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoYW5ndWxhci5pc0RlZmluZWQoaXRlbSkgJiZcblx0XHRcdFx0XHRhbmd1bGFyLmlzRGVmaW5lZChpdGVtLnVybCkgJiZcblx0XHRcdFx0XHRpdGVtLnVybCA9PT0gJ3BocicpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR3aW5kb3cub3BlbignLi4vcGhyL1Bock1lc3NhZ2UuZG8/bWV0aG9kPXZpZXdNZXNzYWdlcycsXG5cdFx0XHRcdFx0XHQnSU5ESVZPTUVTU0VOR0VSJyArIGVuY29kZVVSSUNvbXBvbmVudChjb250cm9sbGVyLm1lLnByb3ZpZGVyTm8pLFxuXHRcdFx0XHRcdFx0J2hlaWdodD03MDAsd2lkdGg9MTAyNCxzY3JvbGxiYXJzPTEnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmIChhbmd1bGFyLmlzRGVmaW5lZChpdGVtKSAmJlxuXHRcdFx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKGl0ZW0udXJsKSAmJlxuXHRcdFx0XHRcdGl0ZW0udXJsID09PSAnazJhJylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciB3aW47XG5cdFx0XHRcdFx0aWYgKGl0ZW0uZXh0cmEgPT09IFwiLVwiKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vSWYgdXNlciBpcyBub3QgbG9nZ2VkIGluXG5cdFx0XHRcdFx0XHR3aW4gPSB3aW5kb3cub3BlbignLi4vYXBwcy9vYXV0aDEuanNwP2lkPUsyQScsXG5cdFx0XHRcdFx0XHRcdCdhcHBBdXRoJywgJ3dpZHRoPTcwMCxoZWlnaHQ9NDUwLHNjcm9sbGJhcnM9MScpO1xuXHRcdFx0XHRcdFx0d2luLmZvY3VzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR3aW4gPSB3aW5kb3cub3BlbignLi4vYXBwcy9ub3RpZmljYXRpb25zLmpzcCcsXG5cdFx0XHRcdFx0XHRcdCdhcHBBdXRoJywgJ3dpZHRoPTQ1MCxoZWlnaHQ9NzAwLHNjcm9sbGJhcnM9MScpO1xuXHRcdFx0XHRcdFx0d2luLmZvY3VzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vIGJ5IGRlZmF1bHQgb3BlbiBjbGFzc2ljIG1lc3NlbmdlclxuXHRcdFx0XHRcdHdpbmRvdy5vcGVuKCcuLi9vc2Nhck1lc3Nlbmdlci9EaXNwbGF5TWVzc2FnZXMuZG8/cHJvdmlkZXJObz0nICtcblx0XHRcdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChjb250cm9sbGVyLm1lLnByb3ZpZGVyTm8pLFxuXHRcdFx0XHRcdFx0J21zZ3MnLCAnaGVpZ2h0PTcwMCx3aWR0aD0xMDI0LHNjcm9sbGJhcnM9MScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIubmV3RGVtb2dyYXBoaWMgPSBmdW5jdGlvbiBuZXdEZW1vZ3JhcGhpYyhzaXplKVxuXHRcdHtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oXG5cdFx0XHR7XG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3BhdGllbnQvbmV3UGF0aWVudC5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnUGF0aWVudC5OZXdQYXRpZW50Q29udHJvbGxlciBhcyBuZXdQYXRpZW50Q3RybCcsXG5cdFx0XHRcdGJhY2tkcm9wOiAnc3RhdGljJyxcblx0XHRcdFx0c2l6ZTogc2l6ZVxuXHRcdFx0fSk7XG5cblx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHJlc3VsdHMpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdwYXRpZW50ICM6ICcsIHJlc3VsdHMuZGVtb2dyYXBoaWNObyk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJGxvY2F0aW9uLnBhdGgoKSk7XG5cblx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL3JlY29yZC8nICtcblx0XHRcdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChyZXN1bHRzLmRlbW9ncmFwaGljTm8pICtcblx0XHRcdFx0XHRcdCcvZGV0YWlscycpO1xuXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJGxvY2F0aW9uLnBhdGgoKSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdNb2RhbCBkaXNtaXNzZWQgYXQ6ICcgKyBuZXcgRGF0ZSgpKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0Y29uc29sZS5sb2coJCgnI215TW9kYWwnKSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuaXNBY3RpdmUgPSBmdW5jdGlvbih0YWIpXG5cdFx0e1xuXHRcdFx0cmV0dXJuICgkc3RhdGUuY3VycmVudC5uYW1lID09PSB0YWIuc3RhdGUpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmNoYW5nZVByb2dyYW0gPSBmdW5jdGlvbiBjaGFuZ2VQcm9ncmFtKHByb2dyYW1JZClcblx0XHR7XG5cdFx0XHRwZXJzb25hU2VydmljZS5zZXRDdXJyZW50UHJvZ3JhbShwcm9ncmFtSWQpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuZ2V0TmF2QmFyKCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHQvLyBGb3Igc29tZSByZWFzb24gQW5ndWxhciBkb2VzIG5vdCBhbGxvdyBmb3IgdGhlIGV2YWx1YXRpb24gb2YgdGhlIGludmVyc2Ugb2YgY3VzdG9tIGZpbHRlcnMsIHRodXMsIHdlIGhhdmUgdGhlIHRoZSBmb2xsb3dpbmcgbWFzdGVycGllY2Vcblx0XHQvLyBJZiBpbnZlcnNlID09PSBmYWxzZSwgcmV0dXJuIHRydWUgaWYgdGhlIGdpdmVuIGl0ZW0gaXMgc3VwcG9zZWQgdG8gYmUgc2hvd24gb3V0c2lkZSB0aGUgJ21vcmUnIGRyb3Bkb3duIG9uIHRoZSBtZWRpdW0gdmlld1xuXHRcdC8vIElmIGludmVyc2UgPT09IHRydWUsIHJldHVybiB0aGUgaW52ZXJzZSBvZiB0aGUgYWJvdmUgc3RhdGVtZW50LFxuXHRcdGNvbnRyb2xsZXIubWVkaXVtTmF2SXRlbUZpbHRlciA9IGZ1bmN0aW9uIG1lZGl1bU5hdkl0ZW1GaWx0ZXIoaW52ZXJzZSlcblx0XHR7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oaXRlbSlcblx0XHRcdHtcblxuXHRcdFx0XHR2YXIgbGFiZWxzVG9TaG93ID0gWydEYXNoYm9hcmQnLCAnU2NoZWR1bGUnLCAnSW5ib3gnLCAnQ29uc3VsdGF0aW9ucycsICdUaWNrbGVycyddO1xuXHRcdFx0XHR2YXIgZmlsdGVyVmFsdWUgPSAkLmluQXJyYXkoaXRlbS5sYWJlbCwgbGFiZWxzVG9TaG93KSAhPSAtMTtcblxuXHRcdFx0XHRpZiAoaW52ZXJzZSA9PT0gdHJ1ZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiAhZmlsdGVyVmFsdWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZmlsdGVyVmFsdWU7XG5cdFx0XHR9O1xuXHRcdH07XG5cdFx0Y29udHJvbGxlci5zbWFsbE5hdkl0ZW1GaWx0ZXIgPSBmdW5jdGlvbiBtZWRpdW1OYXZJdGVtRmlsdGVyKGludmVyc2UpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKGl0ZW0pXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBsYWJlbHNUb1Nob3cgPSBbJ0Rhc2hib2FyZCddO1xuXHRcdFx0XHR2YXIgZmlsdGVyVmFsdWUgPSAkLmluQXJyYXkoaXRlbS5sYWJlbCwgbGFiZWxzVG9TaG93KSAhPSAtMTtcblxuXHRcdFx0XHRpZiAoaW52ZXJzZSA9PT0gdHJ1ZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiAhZmlsdGVyVmFsdWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZmlsdGVyVmFsdWU7XG5cdFx0XHR9O1xuXHRcdH07XG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ1BhdGllbnQnLCBbJ0NvbW1vbicsICdDb21tb24uU2VydmljZXMnXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKlxuXG4gICAgQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuICAgIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiAgICBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiAgICBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gICAgVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gICAgRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiAgICBNY01hc3RlciBVbml2ZXJzaXR5XG4gICAgSGFtaWx0b25cbiAgICBPbnRhcmlvLCBDYW5hZGFcblxuKi9cblxuYW5ndWxhci5tb2R1bGUoJ1BhdGllbnQnKS5jb250cm9sbGVyKCdQYXRpZW50Lk5ld1BhdGllbnRDb250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJHVpYk1vZGFsJyxcblx0JyR1aWJNb2RhbEluc3RhbmNlJyxcblx0J2RlbW9ncmFwaGljU2VydmljZScsXG5cdCdzZWN1cml0eVNlcnZpY2UnLFxuXHQncHJvZ3JhbVNlcnZpY2UnLFxuXHQnc3RhdGljRGF0YVNlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkdWliTW9kYWwsXG5cdFx0JHVpYk1vZGFsSW5zdGFuY2UsXG5cdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLFxuXHRcdHNlY3VyaXR5U2VydmljZSxcblx0XHRwcm9ncmFtU2VydmljZSxcblx0XHRzdGF0aWNEYXRhU2VydmljZSlcblx0e1xuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMgPSB7fTtcblxuXHRcdGNvbnRyb2xsZXIuc3VibWl0RGlzYWJsZWQgPSBmYWxzZTtcblxuXHRcdC8vZ2V0IGFjY2VzcyByaWdodCBmb3IgY3JlYXRpbmcgbmV3IHBhdGllbnRcblx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHQoXCJfZGVtb2dyYXBoaWNcIiwgXCJ3XCIpLnRoZW4oXG5cdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuaGFzUmlnaHQgPSByZXN1bHRzO1xuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdH0pO1xuXG5cdFx0Ly9nZXQgcHJvZ3JhbXMgdG8gYmUgc2VsZWN0ZWRcblx0XHRwcm9ncmFtU2VydmljZS5nZXRQcm9ncmFtcygpLnRoZW4oXG5cdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucHJvZ3JhbXMgPSByZXN1bHRzO1xuXHRcdFx0XHRpZiAoY29udHJvbGxlci5wcm9ncmFtcy5sZW5ndGggPT0gMSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMuYWRtaXNzaW9uUHJvZ3JhbUlkID0gY29udHJvbGxlci5wcm9ncmFtc1swXS5pZDtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdH0pO1xuXG5cdFx0Ly9nZXQgZ2VuZGVycyB0byBiZSBzZWxlY3RlZFxuXHRcdGNvbnRyb2xsZXIuZ2VuZGVycyA9IHN0YXRpY0RhdGFTZXJ2aWNlLmdldEdlbmRlcnMoKTtcblxuXHRcdGNvbnRyb2xsZXIuc2F2ZSA9IGZ1bmN0aW9uIHNhdmUobmdNb2RlbENvbnRvbGxlcilcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZyhjb250cm9sbGVyLmRlbW9ncmFwaGljLmxhc3ROYW1lKTtcblx0XHRcdGNvbnNvbGUubG9nKGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMuZmlyc3ROYW1lKTtcblx0XHRcdGNvbnNvbGUubG9nKGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMuZG9iWWVhcik7XG5cdFx0XHRjb25zb2xlLmxvZyhjb250cm9sbGVyLmRlbW9ncmFwaGljLmRvYk1vbnRoKTtcblx0XHRcdGNvbnNvbGUubG9nKGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMuZG9iRGF5KTtcblx0XHRcdGNvbnNvbGUubG9nKGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMuc2V4KTtcblx0XHRcdGNvbnNvbGUubG9nKGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMpO1xuXHRcdFx0Y29uc29sZS5sb2cobmdNb2RlbENvbnRvbGxlci4kdmFsaWQpO1xuXHRcdFx0Y29uc29sZS5sb2coJHNjb3BlKTtcblxuXHRcdFx0Y29udHJvbGxlci5zdWJtaXREaXNhYmxlZCA9IHRydWU7XG5cblx0XHRcdGlmIChuZ01vZGVsQ29udG9sbGVyLiR2YWxpZClcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJTYXZpbmcuLi5cIik7XG5cblx0XHRcdFx0aWYgKCFjb250cm9sbGVyLmlzQ29ycmVjdERhdGUoY29udHJvbGxlci5kZW1vZ3JhcGhpYy5kb2JZZWFyLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5kZW1vZ3JhcGhpYy5kb2JNb250aCwgY29udHJvbGxlci5kZW1vZ3JhcGhpYy5kb2JEYXkpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YWxlcnQoXCJJbmNvcnJlY3QgRGF0ZSBvZiBCaXJ0aCFcIik7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5zdWJtaXREaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMuZGF0ZU9mQmlydGggPVxuXHRcdFx0XHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMuZG9iWWVhciArICctJyArXG5cdFx0XHRcdFx0Y29udHJvbGxlci5kZW1vZ3JhcGhpYy5kb2JNb250aCArIFwiLVwiICtcblx0XHRcdFx0XHRjb250cm9sbGVyLmRlbW9ncmFwaGljLmRvYkRheTtcblxuXHRcdFx0XHRjb250cm9sbGVyLmRlbW9ncmFwaGljLnBhdGllbnRTdGF0dXNEYXRlID0gbmV3IERhdGUoKTtcblx0XHRcdFx0Y29udHJvbGxlci5kZW1vZ3JhcGhpYy5kYXRlSm9pbmVkID0gbmV3IERhdGUoKTtcblx0XHRcdFx0Y29udHJvbGxlci5kZW1vUmV0VmFsID0ge307XG5cblx0XHRcdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLnNhdmVEZW1vZ3JhcGhpYyhjb250cm9sbGVyLmRlbW9ncmFwaGljKS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhyZXN1bHRzKTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZGVtb1JldFZhbCA9IHJlc3VsdHM7XG5cdFx0XHRcdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZShyZXN1bHRzKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5zdWJtaXREaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRVJSISFcIik7XG5cdFx0XHRcdGNvbnRyb2xsZXIuc3VibWl0RGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5vayA9IGZ1bmN0aW9uIG9rKClcblx0XHR7XG5cdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZShjb250cm9sbGVyLnNlbGVjdGVkLml0ZW0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpXG5cdFx0e1xuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2FwTmFtZSA9IGZ1bmN0aW9uIGNhcE5hbWUoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLmRlbW9ncmFwaGljLmxhc3ROYW1lICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMubGFzdE5hbWUgPSBjb250cm9sbGVyLmRlbW9ncmFwaGljLmxhc3ROYW1lLnRvVXBwZXJDYXNlKCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjb250cm9sbGVyLmRlbW9ncmFwaGljLmZpcnN0TmFtZSAhPSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLmRlbW9ncmFwaGljLmZpcnN0TmFtZSA9IGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMuZmlyc3ROYW1lLnRvVXBwZXJDYXNlKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuaXNDb3JyZWN0RGF0ZSA9IGZ1bmN0aW9uIGlzQ29ycmVjdERhdGUoeWVhciwgbW9udGgsIGRheSlcblx0XHR7XG5cdFx0XHR2YXIgZCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5KTtcblxuXHRcdFx0aWYgKGQgPT0gXCJJbnZhbGlkIERhdGVcIikgcmV0dXJuIGZhbHNlO1xuXHRcdFx0aWYgKGQuZ2V0RnVsbFllYXIoKSAhPSB5ZWFyKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRpZiAoZC5nZXRNb250aCgpICE9IG1vbnRoIC0gMSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0aWYgKGQuZ2V0RGF0ZSgpICE9IGRheSkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9O1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdQYXRpZW50LlNlYXJjaCcsIFsgJ0NvbW1vbi5TZXJ2aWNlcycgXSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiBIYW1pbHRvblxuIE9udGFyaW8sIENhbmFkYVxuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdQYXRpZW50LlNlYXJjaCcpLmNvbnRyb2xsZXIoJ1BhdGllbnQuU2VhcmNoLlBhdGllbnRTZWFyY2hDb250cm9sbGVyJywgW1xuXG5cdCckcScsXG5cdCckc3RhdGUnLFxuXHQnJHN0YXRlUGFyYW1zJyxcblx0JyR1aWJNb2RhbCcsXG5cdCdOZ1RhYmxlUGFyYW1zJyxcblx0J3NlY3VyaXR5U2VydmljZScsXG5cdCdkZW1vZ3JhcGhpY3NTZXJ2aWNlJyxcblxuXHRmdW5jdGlvbihcblx0XHQkcSxcblx0XHQkc3RhdGUsXG5cdFx0JHN0YXRlUGFyYW1zLFxuXHRcdCR1aWJNb2RhbCxcblx0XHROZ1RhYmxlUGFyYW1zLFxuXHRcdHNlY3VyaXR5U2VydmljZSxcblx0XHRkZW1vZ3JhcGhpY3NTZXJ2aWNlKVxuXHR7XG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB7fTtcblxuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIEluaXRpYWxpemF0aW9uXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblx0XHRjb250cm9sbGVyLmRlbW9ncmFwaGljUmVhZEFjY2VzcyA9IG51bGw7XG5cdFx0Y29udHJvbGxlci5zZWFyY2ggPSBudWxsO1xuXG5cdFx0Y29udHJvbGxlci5pbml0ID0gZnVuY3Rpb24gaW5pdCgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5jbGVhclBhcmFtcygpO1xuXHRcdFx0aWYgKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKCRzdGF0ZVBhcmFtcy50ZXJtKSlcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5zZWFyY2gudGVybSA9ICRzdGF0ZVBhcmFtcy50ZXJtO1xuXHRcdFx0fVxuXG5cdFx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHRzKFxuXHRcdFx0e1xuXHRcdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0b2JqZWN0TmFtZTogJ19kZW1vZ3JhcGhpYycsXG5cdFx0XHRcdFx0cHJpdmlsZWdlOiAncidcblx0XHRcdFx0fV1cblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhyZXN1bHRzLmNvbnRlbnQpICYmIHJlc3VsdHMuY29udGVudC5sZW5ndGggPT09IDEpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5kZW1vZ3JhcGhpY1JlYWRBY2Nlc3MgPSByZXN1bHRzLmNvbnRlbnRbMF07XG5cdFx0XHRcdFx0XHRpZiAoY29udHJvbGxlci5kZW1vZ3JhcGhpY1JlYWRBY2Nlc3MpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuaW5pdFRhYmxlKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnZmFpbGVkIHRvIGxvYWQgcmlnaHRzJywgcmVzdWx0cyk7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmRlbW9ncmFwaGljUmVhZEFjY2VzcyA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLmRlbW9ncmFwaGljUmVhZEFjY2VzcyA9IGZhbHNlO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gTWV0aG9kc1xuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cdFx0Y29udHJvbGxlci5pbml0VGFibGUgPSBmdW5jdGlvbiBpbml0VGFibGUoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIudGFibGVQYXJhbXMgPSBuZXcgTmdUYWJsZVBhcmFtcyhcblx0XHRcdHtcblx0XHRcdFx0cGFnZTogMSxcblx0XHRcdFx0Y291bnQ6IDEwLFxuXHRcdFx0XHRzb3J0aW5nOlxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0TmFtZTogJ2FzYydcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0Z2V0RGF0YTogZnVuY3Rpb24ocGFyYW1zKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0XHRcdHZhciBjb3VudCA9IHBhcmFtcy51cmwoKS5jb3VudDtcblx0XHRcdFx0XHR2YXIgcGFnZSA9IHBhcmFtcy51cmwoKS5wYWdlO1xuXG5cdFx0XHRcdFx0Y29udHJvbGxlci5zZWFyY2gucGFyYW1zID0gcGFyYW1zLnVybCgpO1xuXG5cdFx0XHRcdFx0dmFyIHByb21pc2VBcnJheSA9IFtdO1xuXHRcdFx0XHRcdHByb21pc2VBcnJheS5wdXNoKGRlbW9ncmFwaGljc1NlcnZpY2Uuc2VhcmNoKFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5zZWFyY2gsICgocGFnZSAtIDEpICogY291bnQpLCBjb3VudCkpO1xuXG5cdFx0XHRcdFx0Y29udHJvbGxlci5pbnRlZ3JhdG9yUmVzdWx0cyA9IG51bGw7XG5cdFx0XHRcdFx0aWYgKGNvbnRyb2xsZXIuc2VhcmNoLmludGVncmF0b3IpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cHJvbWlzZUFycmF5LnB1c2goZGVtb2dyYXBoaWNzU2VydmljZS5zZWFyY2hJbnRlZ3JhdG9yKFxuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaCwgMTAwKSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0JHEuYWxsKHByb21pc2VBcnJheSkudGhlbihcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0dmFyIGRlbW9ncmFwaGljU2VhcmNoUmVzdWx0cyA9IHJlc3VsdHNbMF07XG5cdFx0XHRcdFx0XHRcdHBhcmFtcy50b3RhbChkZW1vZ3JhcGhpY1NlYXJjaFJlc3VsdHMudG90YWwpO1xuXG5cdFx0XHRcdFx0XHRcdGlmIChjb250cm9sbGVyLnNlYXJjaC5pbnRlZ3JhdG9yKVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5pbnRlZ3JhdG9yUmVzdWx0cyA9IHJlc3VsdHNbMV07XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKGRlbW9ncmFwaGljU2VhcmNoUmVzdWx0cy5jb250ZW50KTtcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBlcnJvcihwcm9taXNlRXJyb3JzKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygncGF0aWVudCBzZWFyY2ggZmFpbGVkJywgcHJvbWlzZUVycm9ycyk7XG5cdFx0XHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdCgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2VhcmNoUGF0aWVudHMgPSBmdW5jdGlvbiBzZWFyY2hQYXRpZW50cygpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIuc2VhcmNoLnR5cGUgPT09IFwiRE9CXCIpXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBkb2JNb21lbnQgPSBtb21lbnQoY29udHJvbGxlci5zZWFyY2gudGVybSwgW1wiWVlZWS1NTS1ERFwiLCBcIllZWVkvTU0vRERcIl0sIHRydWUpO1xuXHRcdFx0XHRpZiAoZG9iTW9tZW50LmlzVmFsaWQoKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLnRlcm0gPSBkb2JNb21lbnQuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbGVydChcIlBsZWFzZSBlbnRlciBEYXRlIG9mIEJpcnRoIGluIGZvcm1hdCBZWVlZLU1NLURELlwiKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gcmVzZXQgdG8gcGFnZSAxIGZvciBuZXcgc2VhcmNoZXNcblx0XHRcdGNvbnRyb2xsZXIudGFibGVQYXJhbXMucGFnZSgxKTtcblx0XHRcdGNvbnRyb2xsZXIudGFibGVQYXJhbXMucmVsb2FkKCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2xlYXJQYXJhbXMgPSBmdW5jdGlvbihzZWFyY2hUeXBlKVxuXHRcdHtcblx0XHRcdC8vIGRlZmF1bHQgc2VhcmNoIHR5cGVcblx0XHRcdGlmICghSnVuby5Db21tb24uVXRpbC5leGlzdHMoc2VhcmNoVHlwZSkpXG5cdFx0XHR7XG5cdFx0XHRcdHNlYXJjaFR5cGUgPSAnTmFtZSc7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHJlc2V0IHRoZSBwYXJhbWV0ZXJzXG5cdFx0XHRjb250cm9sbGVyLnNlYXJjaCA9IHtcblx0XHRcdFx0dHlwZTogc2VhcmNoVHlwZSxcblx0XHRcdFx0dGVybTogJycsXG5cdFx0XHRcdHN0YXR1czogXCJhbGxcIixcblx0XHRcdFx0aW50ZWdyYXRvcjogZmFsc2UsXG5cdFx0XHRcdG91dG9mZG9tYWluOiB0cnVlXG5cdFx0XHR9O1xuXG5cdFx0XHQvLyB1cGRhdGUgdGhlIHBsYWNlaG9sZGVyXG5cdFx0XHRjb250cm9sbGVyLnNlYXJjaFRlcm1QbGFjZUhvbGRlciA9IChjb250cm9sbGVyLnNlYXJjaC50eXBlID09PSBcIkRPQlwiKSA/XG5cdFx0XHRcdFwiWVlZWS1NTS1ERFwiIDogXCJTZWFyY2ggVGVybVwiO1xuXG5cdFx0XHQvLyBkbyB0aGUgc2VhcmNoIChpZiBpbml0aWFsaXplZClcblx0XHRcdGlmIChKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhjb250cm9sbGVyLnRhYmxlUGFyYW1zKSlcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci50YWJsZVBhcmFtcy5wYWdlKDEpO1xuXHRcdFx0XHRjb250cm9sbGVyLnRhYmxlUGFyYW1zLnJlbG9hZCgpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnRvZ2dsZVBhcmFtID0gZnVuY3Rpb24gdG9nZ2xlUGFyYW0ocGFyYW0pXG5cdFx0e1xuXHRcdFx0aWYgKFsnaW50ZWdyYXRvcicsICdvdXRvZmRvbWFpbiddLmluZGV4T2YocGFyYW0pID4gLTEpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoW3BhcmFtXSA9ICFjb250cm9sbGVyLnNlYXJjaFtwYXJhbV07XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIubG9hZFJlY29yZCA9IGZ1bmN0aW9uIGxvYWRSZWNvcmQoZGVtb2dyYXBoaWNObylcblx0XHR7XG5cdFx0XHQkc3RhdGUuZ28oJ3JlY29yZC5kZXRhaWxzJyxcblx0XHRcdHtcblx0XHRcdFx0ZGVtb2dyYXBoaWNObzogZGVtb2dyYXBoaWNObyxcblx0XHRcdFx0aGlkZU5vdGU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNob3dJbnRlZ3JhdG9yUmVzdWx0cyA9IGZ1bmN0aW9uIHNob3dJbnRlZ3JhdG9yUmVzdWx0cygpXG5cdFx0e1xuXHRcdFx0dmFyIHJlc3VsdHMgPSBbXTtcblx0XHRcdHZhciB0b3RhbCA9IDA7XG5cblx0XHRcdGlmIChKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhjb250cm9sbGVyLmludGVncmF0b3JSZXN1bHRzKSlcblx0XHRcdHtcblx0XHRcdFx0cmVzdWx0cyA9IGNvbnRyb2xsZXIuaW50ZWdyYXRvclJlc3VsdHMuY29udGVudDtcblx0XHRcdFx0dG90YWwgPSBjb250cm9sbGVyLmludGVncmF0b3JSZXN1bHRzLnRvdGFsO1xuXHRcdFx0fVxuXG5cdFx0XHQkdWliTW9kYWwub3Blbihcblx0XHRcdHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcGF0aWVudHNlYXJjaC9yZW1vdGVQYXRpZW50UmVzdWx0cy5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnUmVtb3RlUGF0aWVudFJlc3VsdHNDb250cm9sbGVyJyxcblx0XHRcdFx0cmVzb2x2ZTpcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJlc3VsdHM6IGZ1bmN0aW9uKClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRvdGFsOiBmdW5jdGlvbigpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRvdGFsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdHJldHVybiBjb250cm9sbGVyO1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qXG5cbiBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiBIYW1pbHRvblxuIE9udGFyaW8sIENhbmFkYVxuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdQYXRpZW50LlNlYXJjaCcpLmNvbnRyb2xsZXIoJ1BhdGllbnQuU2VhcmNoLlJlbW90ZVBhdGllbnRSZXN1bHRzQ29udHJvbGxlcicsIFtcblxuXHQnJGh0dHAnLFxuXHQnJHNjb3BlJyxcblx0JyR1aWJNb2RhbEluc3RhbmNlJyxcblx0J3Jlc3VsdHMnLFxuXHQndG90YWwnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRodHRwLFxuXHRcdCRzY29wZSxcblx0XHQkdWliTW9kYWxJbnN0YW5jZSxcblx0XHRyZXN1bHRzLFxuXHRcdHRvdGFsKVxuXHR7XG5cdFx0JHNjb3BlLnJlc3VsdHMgPSByZXN1bHRzO1xuXHRcdCRzY29wZS50b3RhbCA9IHRvdGFsO1xuXG5cdFx0JHNjb3BlLmN1cnJlbnRQYWdlID0gMTtcblx0XHQkc2NvcGUucGFnZVNpemUgPSA1O1xuXHRcdCRzY29wZS5zdGFydEluZGV4ID0gMDtcblxuXG5cdFx0JHNjb3BlLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKVxuXHRcdHtcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKFwiU29tZW9uZSBDbG9zZWQgTWVcIik7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5kb0ltcG9ydCA9IGZ1bmN0aW9uIGRvSW1wb3J0KGQpXG5cdFx0e1xuXHRcdFx0dmFyIG15VXJsID0gJy4uL2FwcG9pbnRtZW50L2NvcHlSZW1vdGVEZW1vZ3JhcGhpYy5qc3A/cmVtb3RlRmFjaWxpdHlJZD0nICsgZC5yZW1vdGVGYWNpbGl0eUlkICsgJyZkZW1vZ3JhcGhpY19ubz0nICsgZC5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0d2luZG93Lm9wZW4obXlVcmwsIFwiSW1wb3J0RGVtb1wiLCBcIndpZHRoPTcwMCwgaGVpZ2h0PTEwMjdcIik7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5zYXZlID0gZnVuY3Rpb24gc2F2ZSgpXG5cdFx0e1xuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoXCJTb21lb25lIFNhdmVkIE1lXCIpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUucHJldlBhZ2UgPSBmdW5jdGlvbiBwcmV2UGFnZSgpXG5cdFx0e1xuXHRcdFx0aWYgKCRzY29wZS5zdGFydEluZGV4ID09IDApXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdCRzY29wZS5jdXJyZW50UGFnZS0tO1xuXHRcdFx0JHNjb3BlLnN0YXJ0SW5kZXggPSAoJHNjb3BlLmN1cnJlbnRQYWdlIC0gMSkgKiAkc2NvcGUucGFnZVNpemU7XG5cblx0XHR9O1xuXG5cdFx0JHNjb3BlLm5leHRQYWdlID0gZnVuY3Rpb24gbmV4dFBhZ2UoKVxuXHRcdHtcblx0XHRcdGlmICgkc2NvcGUuc3RhcnRJbmRleCArICRzY29wZS5wYWdlU2l6ZSA+ICRzY29wZS50b3RhbClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0JHNjb3BlLmN1cnJlbnRQYWdlKys7XG5cdFx0XHQkc2NvcGUuc3RhcnRJbmRleCA9ICgkc2NvcGUuY3VycmVudFBhZ2UgLSAxKSAqICRzY29wZS5wYWdlU2l6ZTtcblx0XHR9O1xuXG5cblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnUGF0aWVudExpc3QnLCBbJ0NvbW1vbicsICdDb21tb24uU2VydmljZXMnXSk7IiwiYW5ndWxhci5tb2R1bGUoJ1BhdGllbnRMaXN0JykuY29udHJvbGxlcignUGF0aWVudExpc3QuUGF0aWVudExpc3RBcHBvaW50bWVudExpc3RDb250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJGh0dHAnLFxuXHQnJHEnLFxuXHQnJGZpbHRlcicsXG5cdCckdWliTW9kYWwnLFxuXHQnJHN0YXRlJyxcblx0J05hdmlnYXRpb24nLFxuXHQnc2NoZWR1bGVTZXJ2aWNlJyxcblx0J3Byb3ZpZGVyU2VydmljZScsXG5cdCdwYXRpZW50TGlzdFN0YXRlJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JGh0dHAsXG5cdFx0JHEsXG5cdFx0JGZpbHRlcixcblx0XHQkdWliTW9kYWwsXG5cdFx0JHN0YXRlLFxuXHRcdE5hdmlnYXRpb24sXG5cdFx0c2NoZWR1bGVTZXJ2aWNlLFxuXHRcdHByb3ZpZGVyU2VydmljZSxcblx0XHRwYXRpZW50TGlzdFN0YXRlKVxuXHR7XG5cblx0XHR2YXIgY29udHJvbGxlciA9IHRoaXM7XG5cblx0XHRjb250cm9sbGVyLnN0YXR1c0NvZGVNYXAgPSBuZXcgTWFwKCk7XG5cdFx0Y29udHJvbGxlci5zdGF0dXNlcyA9IG51bGw7XG5cblx0XHRjb250cm9sbGVyLmRhdGVPcHRpb25zID0ge1xuXHRcdFx0c2hvd1dlZWtzOiBmYWxzZVxuXHRcdH07XG5cblxuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIFdhdGNoZXNcblx0XHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vXG5cblx0XHQkc2NvcGUuc2VsZWN0ZWREYXRlID0gbnVsbDtcblxuXHRcdCRzY29wZS4kd2F0Y2goJ3NlbGVjdGVkRGF0ZScsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSlcblx0XHR7XG5cdFx0XHRpZihuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpXG5cdFx0XHR7XG5cdFx0XHRcdHNjaGVkdWxlU2VydmljZS5zZWxlY3RlZERhdGUgPSBuZXdWYWx1ZTtcblx0XHRcdH1cblx0XHR9KTtcblxuXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gTG9hZCBSZW1vdGUgRGF0YVxuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS9cblxuXHRcdHNjaGVkdWxlU2VydmljZS5nZXRTdGF0dXNlcygpLnRoZW4oXG5cdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuc3RhdHVzZXMgPSByZXN1bHRzLmNvbnRlbnQ7XG5cdFx0XHRcdGNvbnRyb2xsZXIuc3RhdHVzQ29kZU1hcCA9IG5ldyBNYXAoY29udHJvbGxlci5zdGF0dXNlcy5tYXAoaSA9PiBbaS5zdGF0dXMsIGldKSk7XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0fSk7XG5cblxuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIFB1YmxpYyBNZXRob2RzXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09L1xuXG5cdFx0Y29udHJvbGxlci5nZXRBcHBvaW50bWVudFN0YXR1c0Rlc2NyaXB0aW9uQnlTdGF0dXNDb2RlID0gZnVuY3Rpb24gKHN0YXR1c0NvZGUpXG5cdFx0e1xuXHRcdFx0bGV0IHN0YXR1cyA9IGNvbnRyb2xsZXIuc3RhdHVzQ29kZU1hcC5nZXQoc3RhdHVzQ29kZSk7XG5cdFx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXHRcdFx0aWYoc3RhdHVzKVxuXHRcdFx0e1xuXHRcdFx0XHRkZXNjcmlwdGlvbiA9IHN0YXR1cy5kZXNjcmlwdGlvbjtcblx0XHRcdH1cblx0XHRcdHJldHVybiBkZXNjcmlwdGlvbjtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZXRBcHBvaW50bWVudFN0YXR1c0NvbG91ckJ5U3RhdHVzQ29kZSA9IGZ1bmN0aW9uIChzdGF0dXNDb2RlKVxuXHRcdHtcblx0XHRcdGxldCBzdGF0dXMgPSBjb250cm9sbGVyLnN0YXR1c0NvZGVNYXAuZ2V0KHN0YXR1c0NvZGUpO1xuXHRcdFx0bGV0IGNvbG91ciA9IFwiIzAwMDAwMFwiO1xuXHRcdFx0aWYoc3RhdHVzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb2xvdXIgPSBzdGF0dXMuY29sb3I7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gY29sb3VyO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnRvZGF5ID0gZnVuY3Rpb24gdG9kYXkoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIuYXBwb2ludG1lbnREYXRlID0gbmV3IERhdGUoKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci50b2RheSgpO1xuXG5cdFx0Y29udHJvbGxlci5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLmFwcG9pbnRtZW50RGF0ZSA9IG51bGw7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIub3BlbiA9IGZ1bmN0aW9uIG9wZW4oJGV2ZW50KVxuXHRcdHtcblx0XHRcdCRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0JGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0Y29udHJvbGxlci5vcGVuZWQgPSB0cnVlO1xuXHRcdH07XG5cblx0XHREYXRlLnByb3RvdHlwZS5BZGREYXlzID0gZnVuY3Rpb24gQWRkRGF5cyhub09mRGF5cylcblx0XHR7XG5cdFx0XHR0aGlzLnNldFRpbWUodGhpcy5nZXRUaW1lKCkgKyAobm9PZkRheXMgKiAoMTAwMCAqIDYwICogNjAgKiAyNCkpKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnN3aXRjaERheSA9IGZ1bmN0aW9uIHN3aXRjaERheShuKVxuXHRcdHtcblx0XHRcdHZhciBkYXRlTmV3ID0gY29udHJvbGxlci5hcHBvaW50bWVudERhdGU7XG5cdFx0XHRkYXRlTmV3LkFkZERheXMobik7XG5cblx0XHRcdGNvbnRyb2xsZXIuYXBwb2ludG1lbnREYXRlID0gZGF0ZU5ldztcblxuXHRcdFx0dmFyIGZvcm1hdHRlZERhdGUgPSAkZmlsdGVyKCdkYXRlJykoZGF0ZU5ldywgJ3l5eXktTU0tZGQnKTtcblxuXHRcdFx0Y29udHJvbGxlci5jaGFuZ2VBcHB0TGlzdChmb3JtYXR0ZWREYXRlKTtcblxuXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2hhbmdlQXBwdERhdGUgPSBmdW5jdGlvbiBjaGFuZ2VBcHB0RGF0ZSgpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIuYXBwb2ludG1lbnREYXRlID09IHVuZGVmaW5lZClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci50b2RheSgpO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGZvcm1hdHRlZERhdGUgPSAkZmlsdGVyKCdkYXRlJykoY29udHJvbGxlci5hcHBvaW50bWVudERhdGUsICd5eXl5LU1NLWRkJyk7XG5cdFx0XHRjb250cm9sbGVyLmNoYW5nZUFwcHRMaXN0KGZvcm1hdHRlZERhdGUpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmNoYW5nZUFwcHRMaXN0ID0gZnVuY3Rpb24gY2hhbmdlQXBwdExpc3QoZGF5KVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIuY3VycmVudHRhYiA9IHBhdGllbnRMaXN0U3RhdGUudGFiSXRlbXNbMF07XG5cdFx0XHRjb250cm9sbGVyLmN1cnJlbnR0YWIuc2VydmljZU1ldGhvZCA9IGZ1bmN0aW9uICgpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBzY2hlZHVsZVNlcnZpY2UuZ2V0QXBwb2ludG1lbnRzKGRheSkudGhlbihcblx0XHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHMucGF0aWVudHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXHRcdFx0fTtcblx0XHRcdGNvbnRyb2xsZXIuc2hvd0ZpbHRlciA9IHRydWU7XG5cdFx0XHQkc2NvcGUuJGVtaXQoJ2p1bm86cGF0aWVudExpc3RSZWZyZXNoJyk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuYWRkTmV3QXBwb2ludG1lbnQgPSBmdW5jdGlvbiBhZGROZXdBcHBvaW50bWVudCgpXG5cdFx0e1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbihcblx0XHRcdHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvc2NoZWR1bGUvYXBwb2ludG1lbnRBZGQuanNwJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ1NjaGVkdWxlLkFwcG9pbnRtZW50QWRkQ29udHJvbGxlciBhcyBhcHBvaW50bWVudEFkZEN0cmwnLFxuXHRcdFx0XHRiYWNrZHJvcDogJ3N0YXRpYycsXG5cdFx0XHRcdHNpemU6ICdsZycsXG5cdFx0XHRcdHJlc29sdmU6XG5cdFx0XHRcdHtcblx0XHRcdFx0XHRtZTogZnVuY3Rpb24oKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJldHVybiBwcm92aWRlclNlcnZpY2UuZ2V0TWUoKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGFwcHREYXRlOiBmdW5jdGlvbigpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbnRyb2xsZXIuYXBwb2ludG1lbnREYXRlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuc3dpdGNoRGF5KDApO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci52aWV3QXBwb2ludG1lbnQgPSBmdW5jdGlvbiB2aWV3QXBwb2ludG1lbnQoYXBwdE5vKVxuXHRcdHtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oXG5cdFx0XHR7XG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3NjaGVkdWxlL2FwcG9pbnRtZW50Vmlldy5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnU2NoZWR1bGUuQXBwb2ludG1lbnRWaWV3Q29udHJvbGxlciBhcyBhcHBvaW50bWVudFZpZXdDdHJsJyxcblx0XHRcdFx0YmFja2Ryb3A6ICdzdGF0aWMnLFxuXHRcdFx0XHRzaXplOiAnbGcnLFxuXHRcdFx0XHRyZXNvbHZlOlxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bWU6IGZ1bmN0aW9uKClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcHJvdmlkZXJTZXJ2aWNlLmdldE1lKCk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRhcHBvaW50bWVudDogZnVuY3Rpb24oKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJldHVybiBzY2hlZHVsZVNlcnZpY2UuZ2V0QXBwb2ludG1lbnQoYXBwdE5vKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHN0YXR1c0xpc3Q6IGZ1bmN0aW9uKClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXR1cm4gc2NoZWR1bGVTZXJ2aWNlLmdldFN0YXR1c2VzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5zd2l0Y2hEYXkoMCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmlzU2NoZWR1bGVBY3RpdmUgPSBmdW5jdGlvbiBpc1NjaGVkdWxlQWN0aXZlKClcblx0XHR7XG5cdFx0XHRyZXR1cm4gJHN0YXRlLmN1cnJlbnQubmFtZSA9PSAnc2NoZWR1bGUnO1xuXHRcdH07XG5cdH1cbl0pOyIsImFuZ3VsYXIubW9kdWxlKCdQYXRpZW50TGlzdCcpLmNvbnRyb2xsZXIoJ1BhdGllbnRMaXN0LlBhdGllbnRMaXN0Q29uZmlnQ29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyR1aWJNb2RhbEluc3RhbmNlJyxcblx0J2NvbmZpZycsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCR1aWJNb2RhbEluc3RhbmNlLFxuXHRcdGNvbmZpZylcblx0e1xuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXIucGF0aWVudExpc3RDb25maWcgPSBjb25maWc7XG5cblx0XHRjb250cm9sbGVyLmNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpXG5cdFx0e1xuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmVDb25maWd1cmF0aW9uID0gZnVuY3Rpb24gc2F2ZUNvbmZpZ3VyYXRpb24oKVxuXHRcdHtcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKGNvbnRyb2xsZXIucGF0aWVudExpc3RDb25maWcpO1xuXHRcdH07XG5cdH1cbl0pOyIsIi8qXG5cbiAgICBDb3B5cmlnaHQgKGMpIDIwMDEtMjAwMi4gRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmUsIE1jTWFzdGVyIFVuaXZlcnNpdHkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gICAgVGhpcyBzb2Z0d2FyZSBpcyBwdWJsaXNoZWQgdW5kZXIgdGhlIEdQTCBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cbiAgICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gICAgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuICAgIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZVxuICAgIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSAtIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuXG5cbiAgICBUaGlzIHNvZnR3YXJlIHdhcyB3cml0dGVuIGZvciB0aGVcbiAgICBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZVxuICAgIE1jTWFzdGVyIFVuaXZlcnNpdHlcbiAgICBIYW1pbHRvblxuICAgIE9udGFyaW8sIENhbmFkYVxuXG4qL1xuXG5hbmd1bGFyLm1vZHVsZSgnUGF0aWVudExpc3QnKS5jb250cm9sbGVyKCdQYXRpZW50TGlzdC5QYXRpZW50TGlzdENvbnRyb2xsZXInLCBbXG5cblx0JyRzY29wZScsXG5cdCckaHR0cCcsXG5cdCckc3RhdGUnLFxuXHQnJHVpYk1vZGFsJyxcblx0J2FuZ3VsYXJVdGlsJyxcblx0J05hdmlnYXRpb24nLFxuXHQncGVyc29uYVNlcnZpY2UnLFxuXHQncHJvdmlkZXJTZXJ2aWNlJyxcblx0J3BhdGllbnRMaXN0U3RhdGUnLFxuXHQnc2NoZWR1bGVTZXJ2aWNlJyxcblx0J3JlcG9ydGluZ1NlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkaHR0cCxcblx0XHQkc3RhdGUsXG5cdFx0JHVpYk1vZGFsLFxuXHRcdGFuZ3VsYXJVdGlsLFxuXHRcdE5hdmlnYXRpb24sXG5cdFx0cGVyc29uYVNlcnZpY2UsXG5cdFx0cHJvdmlkZXJTZXJ2aWNlLFxuXHRcdHBhdGllbnRMaXN0U3RhdGUsXG5cdFx0c2NoZWR1bGVTZXJ2aWNlLFxuXHRcdHJlcG9ydGluZ1NlcnZpY2UpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblx0XHRjb250cm9sbGVyLnNpZGViYXIgPSBOYXZpZ2F0aW9uO1xuXHRcdGNvbnRyb2xsZXIuc2hvd0ZpbHRlciA9IHRydWU7XG5cdFx0Y29udHJvbGxlci5wYXRpZW50TGlzdENvbmZpZyA9IHt9O1xuXG5cblx0XHRjb250cm9sbGVyLmdvVG9SZWNvcmQgPSBmdW5jdGlvbiBnb1RvUmVjb3JkKHBhdGllbnQpXG5cdFx0e1xuXHRcdFx0aWYgKHBhdGllbnQuZGVtb2dyYXBoaWNObyAhPSAwKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgcGFyYW1zID0ge1xuXHRcdFx0XHRcdGRlbW9ncmFwaGljTm86IHBhdGllbnQuZGVtb2dyYXBoaWNOb1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAoYW5ndWxhci5pc0RlZmluZWQocGF0aWVudC5hcHBvaW50bWVudE5vKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHBhcmFtcy5hcHBvaW50bWVudE5vID0gcGF0aWVudC5hcHBvaW50bWVudE5vO1xuXHRcdFx0XHRcdHBhcmFtcy5lbmNUeXBlID0gXCJmYWNlIHRvIGZhY2UgZW5jb3VudGVyIHdpdGggY2xpZW50XCI7XG5cblx0XHRcdFx0XHRpZiAoYW5ndWxhclV0aWwuaW5Nb2JpbGVWaWV3KCkpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5oaWRlUGF0aWVudExpc3QoKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdoaWRpbmcgcGF0aWVudGxpc3QnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc29sZS5sb2coXCJwYXJhbXNcIiwgcGFyYW1zKTtcblx0XHRcdFx0JHN0YXRlLmdvKCdyZWNvcmQuc3VtbWFyeScsIHBhcmFtcyk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vZm9yIGZpbHRlciBib3hcblx0XHRjb250cm9sbGVyLnF1ZXJ5ID0gJyc7XG5cblxuXHRcdGNvbnRyb2xsZXIuaXNBY3RpdmUgPSBmdW5jdGlvbiBpc0FjdGl2ZSh0ZW1wKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLmN1cnJlbnR0YWIgPT09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0ZW1wID09PSBjb250cm9sbGVyLmN1cnJlbnR0YWIuaWQ7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuaXNNb3JlQWN0aXZlID0gZnVuY3Rpb24gaXNNb3JlQWN0aXZlKHRlbXApXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIuY3VycmVudG1vcmV0YWIgPT09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0ZW1wID09PSBjb250cm9sbGVyLmN1cnJlbnRtb3JldGFiLmlkO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNob3dQYXRpZW50TGlzdCA9IGZ1bmN0aW9uIHNob3dQYXRpZW50TGlzdCgpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLiRlbWl0KCdjb25maWd1cmVTaG93UGF0aWVudExpc3QnLCB0cnVlKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5oaWRlUGF0aWVudExpc3QgPSBmdW5jdGlvbiBoaWRlUGF0aWVudExpc3QoKVxuXHRcdHtcblx0XHRcdCRzY29wZS4kZW1pdCgnY29uZmlndXJlU2hvd1BhdGllbnRMaXN0JywgZmFsc2UpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmNoYW5nZU1vcmVUYWIgPSBmdW5jdGlvbiBjaGFuZ2VNb3JlVGFiKG1vcmVUYWJJdGVtc0luZGV4LCBmaWx0ZXIpXG5cdFx0e1xuXHRcdFx0dmFyIGJlZm9yZUNoYW5nZVRhYiA9IGNvbnRyb2xsZXIuY3VycmVudG1vcmV0YWI7XG5cdFx0XHRjb250cm9sbGVyLmN1cnJlbnRtb3JldGFiID0gY29udHJvbGxlci5tb3JlVGFiSXRlbXNbbW9yZVRhYkl0ZW1zSW5kZXhdO1xuXG5cdFx0XHRjb250cm9sbGVyLnNob3dGaWx0ZXIgPSB0cnVlO1xuXHRcdFx0Y29udHJvbGxlci5jdXJyZW50dGFiID0gbnVsbDtcblx0XHRcdGNvbnRyb2xsZXIucmVmcmVzaChmaWx0ZXIpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmNoYW5nZVRhYiA9IGZ1bmN0aW9uIGNoYW5nZVRhYih0YWJJdGVtSW5kZXgsIGZpbHRlcilcblx0XHR7XG5cdFx0XHRpZihjb250cm9sbGVyLmN1cnJlbnR0YWIgIT09IHBhdGllbnRMaXN0U3RhdGUudGFiSXRlbXNbdGFiSXRlbUluZGV4XSlcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5jdXJyZW50dGFiID0gcGF0aWVudExpc3RTdGF0ZS50YWJJdGVtc1t0YWJJdGVtSW5kZXhdO1xuXHRcdFx0XHRjb250cm9sbGVyLnNob3dGaWx0ZXIgPSB0cnVlO1xuXHRcdFx0XHRjb250cm9sbGVyLmN1cnJlbnRtb3JldGFiID0gbnVsbDtcblx0XHRcdFx0Y29udHJvbGxlci5yZWZyZXNoKGZpbHRlcik7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZ2V0TW9yZVRhYkNsYXNzID0gZnVuY3Rpb24gZ2V0TW9yZVRhYkNsYXNzKGlkKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLmN1cnJlbnRtb3JldGFiICE9IG51bGwgJiYgaWQgPT0gY29udHJvbGxlci5jdXJyZW50bW9yZXRhYi5pZClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIFwibW9yZS10YWItaGlnaGxpZ2h0XCI7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jdXJyZW50UGFnZSA9IDA7XG5cdFx0Y29udHJvbGxlci5wYWdlU2l6ZSA9IDg7XG5cdFx0Y29udHJvbGxlci5wYXRpZW50cyA9IG51bGw7XG5cblx0XHRjb250cm9sbGVyLm51bWJlck9mUGFnZXMgPSBmdW5jdGlvbiBudW1iZXJPZlBhZ2VzKClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5uUGFnZXMgPT0gbnVsbCB8fCBjb250cm9sbGVyLm5QYWdlcyA9PSAwKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBjb250cm9sbGVyLm5QYWdlcztcblx0XHR9O1xuXG5cblx0XHQkc2NvcGUuJG9uKCd1cGRhdGVQYXRpZW50TGlzdFBhZ2luYXRpb24nLCBmdW5jdGlvbihldmVudCwgZGF0YSlcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZygndXBkYXRlUGF0aWVudExpc3RQYWdpbmF0aW9uPScgKyBkYXRhKTtcblx0XHRcdGNvbnRyb2xsZXIublBhZ2VzID0gTWF0aC5jZWlsKGRhdGEgLyBjb250cm9sbGVyLnBhZ2VTaXplKTtcblx0XHRcdGNvbnNvbGUubG9nKCduUGFnZXM9JyArIGNvbnRyb2xsZXIublBhZ2VzKTtcblx0XHR9KTtcblxuXG5cdFx0Y29udHJvbGxlci5jaGFuZ2VQYWdlID0gZnVuY3Rpb24gY2hhbmdlUGFnZShwYWdlTnVtKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIuY3VycmVudFBhZ2UgPSBwYWdlTnVtO1xuXHRcdFx0Ly9icm9hZGNhc3QgdGhlIGNoYW5nZSBwYWdlXG5cdFx0XHQkc2NvcGUuJGJyb2FkY2FzdCgndXBkYXRlUGF0aWVudExpc3QnLFxuXHRcdFx0e1xuXHRcdFx0XHRjdXJyZW50UGFnZTogY29udHJvbGxlci5jdXJyZW50UGFnZSxcblx0XHRcdFx0cGFnZVNpemU6IGNvbnRyb2xsZXIucGFnZVNpemVcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuJG9uKCd0b2dnbGVQYXRpZW50TGlzdEZpbHRlcicsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKVxuXHRcdHtcblx0XHRcdGNvbnNvbGUubG9nKFwicmVjZWl2ZWQgYSB0b2dnbGVQYXRpZW50TGlzdEZpbHRlciBldmVudDpcIiArIGRhdGEpO1xuXHRcdFx0Y29udHJvbGxlci5zaG93RmlsdGVyID0gZGF0YTtcblx0XHR9KTtcblxuXG5cdFx0Y29udHJvbGxlci5wcm9jZXNzID0gZnVuY3Rpb24gcHJvY2Vzcyh0YWIsIGZpbHRlcilcblx0XHR7XG5cdFx0XHR0YWIuc2VydmljZU1ldGhvZCgpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0TGlzdClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGF0aWVudHMgPSByZXN1bHRMaXN0O1xuXG5cdFx0XHRcdFx0Y29udHJvbGxlci5uUGFnZXMgPSAxO1xuXHRcdFx0XHRcdGlmIChjb250cm9sbGVyLnBhdGllbnRzICE9IG51bGwgJiYgY29udHJvbGxlci5wYXRpZW50cy5sZW5ndGggPiAwKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIublBhZ2VzID0gTWF0aC5jZWlsKGNvbnRyb2xsZXIucGF0aWVudHMubGVuZ3RoIC8gY29udHJvbGxlci5wYWdlU2l6ZSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29udHJvbGxlci50ZW1wbGF0ZSA9IHRhYi50ZW1wbGF0ZTtcblx0XHRcdFx0XHROYXZpZ2F0aW9uLmxvYWQoY29udHJvbGxlci50ZW1wbGF0ZSk7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5jaGFuZ2VQYWdlKDApO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGFsZXJ0KCdlcnJvciBsb2FkaW5nIGRhdGEgZm9yIHBhdGllbnQgbGlzdDonICsgZXJyb3IpO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnJlZnJlc2ggPSBmdW5jdGlvbiByZWZyZXNoKGZpbHRlcilcblx0XHR7XG5cblx0XHRcdGlmIChjb250cm9sbGVyLmN1cnJlbnR0YWIgIT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wcm9jZXNzKGNvbnRyb2xsZXIuY3VycmVudHRhYiwgZmlsdGVyKTtcblx0XHRcdH1cblx0XHRcdGlmIChjb250cm9sbGVyLmN1cnJlbnRtb3JldGFiICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucHJvY2Vzcyhjb250cm9sbGVyLmN1cnJlbnRtb3JldGFiLCBmaWx0ZXIpO1xuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdCRzY29wZS4kb24oJ2p1bm86cGF0aWVudExpc3RSZWZyZXNoJywgZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucmVmcmVzaCgpO1xuXHRcdH0pO1xuXG5cdFx0cHJvdmlkZXJTZXJ2aWNlLmdldFJlY2VudFBhdGllbnRMaXN0KCkudGhlbihcblx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5yZWNlbnRQYXRpZW50TGlzdCA9IHJlc3VsdHM7XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0fSk7XG5cdFx0cGVyc29uYVNlcnZpY2UuZ2V0UGF0aWVudExpc3RDb25maWcoKS50aGVuKFxuXHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhdGllbnRMaXN0Q29uZmlnID0gcmVzdWx0cztcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlU2l6ZSA9IGNvbnRyb2xsZXIucGF0aWVudExpc3RDb25maWcubnVtYmVyT2ZBcHB0c3RvU2hvdztcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblxuXG5cdFx0Y29udHJvbGxlci5nZXRUYWJJdGVtcyA9IGZ1bmN0aW9uIGdldFRhYkl0ZW1zKClcblx0XHR7XG5cdFx0XHRyZXR1cm4gcGF0aWVudExpc3RTdGF0ZS50YWJJdGVtcztcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5tYW5hZ2VDb25maWd1cmF0aW9uID0gZnVuY3Rpb24gbWFuYWdlQ29uZmlndXJhdGlvbigpXG5cdFx0e1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbihcblx0XHRcdHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcGF0aWVudGxpc3QvcGF0aWVudExpc3RDb25maWd1cmF0aW9uLmpzcCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdQYXRpZW50TGlzdC5QYXRpZW50TGlzdENvbmZpZ0NvbnRyb2xsZXIgYXMgcGF0aWVudExpc3RDb25maWdDdHJsJyxcblx0XHRcdFx0YmFja2Ryb3A6IGZhbHNlLFxuXHRcdFx0XHRzaXplOiAnbGcnLFxuXHRcdFx0XHRyZXNvbHZlOlxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uZmlnOiBmdW5jdGlvbigpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbnRyb2xsZXIucGF0aWVudExpc3RDb25maWc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cGVyc29uYVNlcnZpY2Uuc2V0UGF0aWVudExpc3RDb25maWcocmVzdWx0cykudGhlbihcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYXRpZW50TGlzdENvbmZpZyA9IHJlc3VsdHM7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZVNpemUgPSBjb250cm9sbGVyLnBhdGllbnRMaXN0Q29uZmlnLm51bWJlck9mQXBwdHN0b1Nob3c7XG5cdFx0XHRcdFx0XHRcdCRzY29wZS4kZW1pdCgndXBkYXRlUGF0aWVudExpc3RQYWdpbmF0aW9uJywgY29udHJvbGxlci5wYXRpZW50cy5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0cGF0aWVudExpc3RTdGF0ZS50YWJJdGVtcyA9IFtcblx0XHRcdHtcblx0XHRcdFx0aWQ6IDAsXG5cdFx0XHRcdGxhYmVsOiBcIkFwcHRzLlwiLFxuXHRcdFx0XHR0ZW1wbGF0ZTogXCJzcmMvcGF0aWVudGxpc3QvcGF0aWVudExpc3QxLmpzcFwiLFxuXHRcdFx0XHRzZXJ2aWNlTWV0aG9kOiBmdW5jdGlvbiAoKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly8gdGhpcyBnZXRzIG92ZXJ3cml0dGVuIGJ5IHRoZSBhcHBvaW50bWVudExpc3RDb250cm9sbGVyLCB3aGVuIGl0IHNldHMgc3BlY2lmaWMgZGF0ZXNcblx0XHRcdFx0XHRyZXR1cm4gc2NoZWR1bGVTZXJ2aWNlLmdldEFwcG9pbnRtZW50cygndG9kYXknKS50aGVuKFxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cy5wYXRpZW50cztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRpZDogMSxcblx0XHRcdFx0bGFiZWw6IFwiUmVjZW50XCIsXG5cdFx0XHRcdHRlbXBsYXRlOiBcInNyYy9wYXRpZW50bGlzdC9yZWNlbnQuanNwXCIsXG5cdFx0XHRcdHNlcnZpY2VNZXRob2Q6IGZ1bmN0aW9uICgpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvdmlkZXJTZXJ2aWNlLmdldFJlY2VudFBhdGllbnRMaXN0KCkudGhlbihcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5yZWNlbnRQYXRpZW50TGlzdCA9IHJlc3VsdHM7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRdO1xuXHRcdGNvbnRyb2xsZXIubW9yZVRhYkl0ZW1zID0gW1xuXHRcdFx0e1xuXHRcdFx0XHRpZDogMCxcblx0XHRcdFx0bGFiZWw6IFwiUGF0aWVudCBTZXRzXCIsXG5cdFx0XHRcdHRlbXBsYXRlOiBcInNyYy9wYXRpZW50bGlzdC9kZW1vZ3JhcGhpY1NldHMuanNwXCIsXG5cdFx0XHRcdHNlcnZpY2VNZXRob2Q6IGZ1bmN0aW9uICgpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gcmVwb3J0aW5nU2VydmljZS5nZXREZW1vZ3JhcGhpY1NldExpc3QoKS50aGVuKFxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cy5jb250ZW50O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdGlkOiAxLFxuXHRcdFx0XHRsYWJlbDogXCJDYXNlbG9hZFwiLFxuXHRcdFx0XHR0ZW1wbGF0ZTogXCJzcmMvcGF0aWVudGxpc3QvcHJvZ3JhbS5qc3BcIixcblx0XHRcdFx0c2VydmljZU1ldGhvZDogZnVuY3Rpb24gKClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XTtcblx0XHRjb250cm9sbGVyLmNoYW5nZVRhYigwKTtcblx0fVxuXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnUGF0aWVudExpc3QnKS5jb250cm9sbGVyKCdQYXRpZW50TGlzdC5QYXRpZW50TGlzdERlbW9ncmFwaGljU2V0Q29udHJvbGxlcicsIFtcblx0JyRzY29wZScsXG5cdCckaHR0cCcsXG5cdCdyZXBvcnRpbmdTZXJ2aWNlJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JGh0dHAsXG5cdFx0cmVwb3J0aW5nU2VydmljZSlcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0cmVwb3J0aW5nU2VydmljZS5nZXREZW1vZ3JhcGhpY1NldExpc3QoKS50aGVuKFxuXHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnNldHMgPSByZXN1bHRzLmNvbnRlbnQ7XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3IpXG5cdFx0XHR7XG5cdFx0XHRcdGFsZXJ0KCdGYWlsZWQgdG8gZ2V0IHNldHMgbGlzdHMuJyk7XG5cdFx0XHR9KTtcblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ1BhdGllbnRMaXN0JykuY29udHJvbGxlcignUGF0aWVudExpc3QuUGF0aWVudExpc3RQcm9ncmFtQ29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRodHRwJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JGh0dHApXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXG5cdFx0JHNjb3BlLiRvbigndXBkYXRlUGF0aWVudExpc3QnLCBmdW5jdGlvbihldmVudCwgZGF0YSlcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZygndXBkYXRlUGF0aWVudExpc3Q9JyArIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcblx0XHRcdGNvbnRyb2xsZXIudXBkYXRlRGF0YShkYXRhLmN1cnJlbnRQYWdlLCBkYXRhLnBhZ2VTaXplKTtcblx0XHR9KTtcblxuXG5cdFx0Ly90aGUgY3VycmVudFBhZ2UgaXMgMCBiYXNlZFxuXHRcdGNvbnRyb2xsZXIudXBkYXRlRGF0YSA9IGZ1bmN0aW9uIHVwZGF0ZURhdGEoY3VycmVudFBhZ2UsIHBhZ2VTaXplKVxuXHRcdHtcblx0XHRcdHZhciBzdGFydEluZGV4ID0gY3VycmVudFBhZ2UgKiBwYWdlU2l6ZTtcblxuXHRcdFx0JGh0dHAoXG5cdFx0XHR7XG5cdFx0XHRcdHVybDogJy4uL3dzL3JzL3Byb2dyYW0vcGF0aWVudExpc3Q/c3RhcnRJbmRleD0nICsgc3RhcnRJbmRleCArICcmbnVtVG9SZXR1cm49JyArIHBhZ2VTaXplLFxuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdGhlYWRlcnM6XG5cdFx0XHRcdHtcblx0XHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG5cdFx0XHRcdH1cblx0XHRcdH0pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuYWRtaXNzaW9ucyA9IHJlc3VsdHMuZGF0YS5jb250ZW50O1xuXHRcdFx0XHRcdCRzY29wZS4kZW1pdCgndXBkYXRlUGF0aWVudExpc3RQYWdpbmF0aW9uJywgcmVzdWx0cy5kYXRhLnRvdGFsKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdC8vaW5pdGlhbGl6ZS4uXG5cdFx0Y29udHJvbGxlci51cGRhdGVEYXRhKDAsIGNvbnRyb2xsZXIucGFnZVNpemUpO1xuXHRcdCRzY29wZS4kZW1pdCgndG9nZ2xlUGF0aWVudExpc3RGaWx0ZXInLCBmYWxzZSk7XG5cblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoXCJQYXRpZW50TGlzdFwiKS5zZXJ2aWNlKFwicGF0aWVudExpc3RTdGF0ZVwiLCBbXG5cdC8vIFN0b3JlIHZhcmlhYmxlcyBoZXJlIHRoYXQgbXVzdCBiZSBhY2Nlc3NpYmxlIGFjcm9zcyBjb250cm9sbGVycyBpbiBwYXRpZW50bGlzdFxuXHRmdW5jdGlvbigpXG5cdHtcblx0XHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0XHRzZXJ2aWNlLnRhYkl0ZW1zID0gW107XG5cblx0fVxuXSk7IiwiLypcblxuICAgIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuICAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiAgICBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gICAgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gICAgRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuICAgIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuICAgIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gICAgTWNNYXN0ZXIgVW5pdmVyc2l0eVxuICAgIEhhbWlsdG9uXG4gICAgT250YXJpbywgQ2FuYWRhXG5cbiovXG5hbmd1bGFyLm1vZHVsZSgnUmVjb3JkLkRldGFpbHMnKS5jb250cm9sbGVyKCdSZWNvcmQuRGV0YWlscy5EZXRhaWxzQ29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRodHRwJyxcblx0JyRsb2NhdGlvbicsXG5cdCckc3RhdGVQYXJhbXMnLFxuXHQnJHN0YXRlJyxcblx0JyR3aW5kb3cnLFxuXHQnZGVtb2dyYXBoaWNTZXJ2aWNlJyxcblx0J2RlbW9ncmFwaGljc1NlcnZpY2UnLFxuXHQncHJvdmlkZXJzU2VydmljZScsXG5cdCdwYXRpZW50RGV0YWlsU3RhdHVzU2VydmljZScsXG5cdCdzZWN1cml0eVNlcnZpY2UnLFxuXHQnc3RhdGljRGF0YVNlcnZpY2UnLFxuXHQncmVmZXJyYWxEb2N0b3JzU2VydmljZScsXG5cdCd1c2VyJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JGh0dHAsXG5cdFx0JGxvY2F0aW9uLFxuXHRcdCRzdGF0ZVBhcmFtcyxcblx0XHQkc3RhdGUsXG5cdFx0JHdpbmRvdyxcblx0XHRkZW1vZ3JhcGhpY1NlcnZpY2UsXG5cdFx0ZGVtb2dyYXBoaWNzU2VydmljZSxcblx0XHRwcm92aWRlcnNTZXJ2aWNlLFxuXHRcdHBhdGllbnREZXRhaWxTdGF0dXNTZXJ2aWNlLFxuXHRcdHNlY3VyaXR5U2VydmljZSxcblx0XHRzdGF0aWNEYXRhU2VydmljZSxcblx0XHRyZWZlcnJhbERvY3RvcnNTZXJ2aWNlLFxuXHRcdHVzZXIpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblx0XHRjb250cm9sbGVyLnBhZ2UgPSB7fTtcblxuXHRcdC8vIEdsb2JhbCB2YXJpYWJsZXNcblx0XHR2YXIgcG9zRXh0cmFzID0ge307XG5cdFx0dmFyIGhjUGFydHMgPSB7fTtcblx0XHR2YXIgcGhvbmVOdW0gPSB7fTtcblx0XHR2YXIgY29sb3JBdHRuID0gXCIjZmZmZjk5XCI7XG5cdFx0dmFyIGRlZlBoVGl0bGUgPSBcIkNoZWNrIHRvIHNldCBwcmVmZXJyZWQgY29udGFjdCBudW1iZXJcIjtcblx0XHR2YXIgcHJlZlBoVGl0bGUgPSBcIlByZWZlcnJlZCBjb250YWN0IG51bWJlclwiO1xuXHRcdHZhciBoaW4wO1xuXHRcdHZhciB2ZXIwO1xuXHRcdHZhciBjaGFydE5vMDtcblx0XHR2YXIgY3l0b2xOdW0wO1xuXHRcdHZhciByZWZlcnJhbERvY05vMDtcblx0XHR2YXIgZmFtaWx5RG9jTm8wO1xuXHRcdHZhciBzaW4wO1xuXHRcdHZhciBlZmZEYXRlMDtcblx0XHR2YXIgaGNSZW5ld0RhdGUwO1xuXHRcdHZhciByb3N0ZXJEYXRlMDtcblx0XHR2YXIgcm9zdGVyVGVybWluYXRpb25EYXRlMDtcblx0XHR2YXIgcGF0aWVudFN0YXR1c0RhdGUwO1xuXHRcdHZhciBkYXRlSm9pbmVkMDtcblx0XHR2YXIgZW5kRGF0ZTA7XG5cdFx0dmFyIG9uV2FpdGluZ0xpc3RTaW5jZURhdGUwO1xuXHRcdHZhciBwYXBlckNoYXJ0QXJjaGl2ZWREYXRlMDtcblxuXHRcdGNvbnRyb2xsZXIucHJvcGVydGllcyA9ICRzY29wZS4kcGFyZW50LnJlY29yZEN0cmwucHJvcGVydGllcztcblxuXHRcdGNvbnRyb2xsZXIuaW5pdCA9IGZ1bmN0aW9uIGluaXQoKVxuXHRcdHtcblx0XHRcdGRlbW9ncmFwaGljU2VydmljZS5nZXREZW1vZ3JhcGhpYygkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8gPSByZXN1bHRzO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuaW5pdERlbW9ncmFwaGljVmFycygpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuY2hlY2tBY2Nlc3MoKTtcblxuXHRcdFx0XHRcdC8vIHJldHJpZXZlIHByb3ZpZGVyIHR5cGVzIGZvciBkcm9wZG93biBzZWxlY3Rpb25cblx0XHRcdFx0XHQvL1RPRE8gLSBhcmUgcm9sZXMgZGV0ZXJtaW5lZCBieSBzZWN1cml0eSByb2xlIG9yIHByb3ZpZGVyIHR5cGU/XG5cdFx0XHRcdFx0cHJvdmlkZXJzU2VydmljZS5nZXRCeVNlY3VyaXR5Um9sZShcImRvY3RvclwiKS50aGVuKFxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kb2N0b3JzID0gZGF0YTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHByb3ZpZGVyc1NlcnZpY2UuZ2V0QnlTZWN1cml0eVJvbGUoXCJudXJzZVwiKS50aGVuKFxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5udXJzZXMgPSBkYXRhO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cHJvdmlkZXJzU2VydmljZS5nZXRCeVNlY3VyaXR5Um9sZShcIm1pZHdpZmVcIikudGhlbihcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UubWlkd2l2ZXMgPSBkYXRhO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHQvLyByZXRyaWV2ZSBjb250YWN0IGxpc3RzIGZvciBkZW1vZ3JhcGhpY1xuXHRcdFx0XHRcdGRlbW9ncmFwaGljU2VydmljZS5nZXREZW1vZ3JhcGhpY0NvbnRhY3RzKGNvbnRyb2xsZXIucGFnZS5kZW1vLmRlbW9ncmFwaGljTm8sIFwicGVyc29uYWxcIikudGhlbihcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtb0NvbnRhY3RzID0gZGVtb0NvbnRhY3RTaG93KGRhdGEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLmdldERlbW9ncmFwaGljQ29udGFjdHMoY29udHJvbGxlci5wYWdlLmRlbW8uZGVtb2dyYXBoaWNObywgXCJwcm9mZXNzaW9uYWxcIikudGhlbihcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtb0NvbnRhY3RQcm9zID0gZGVtb0NvbnRhY3RTaG93KGRhdGEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHQvL3Nob3cgbm90ZXNcblx0XHRcdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmRlbW8ubm90ZXMgIT0gbnVsbClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JOb3RlcyA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLm5vdGVzO1xuXHRcdFx0XHRcdFx0aWYgKC9ePHVub3Rlcz5bXFxzXFxTXSovLnRlc3QoY29udHJvbGxlci5wYWdlLmRlbW8uc2NyTm90ZXMpKSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JOb3RlcyA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjck5vdGVzLnN1YnN0cmluZyhcIjx1bm90ZXM+XCIubGVuZ3RoKTtcblx0XHRcdFx0XHRcdGlmICgvW1xcc1xcU10qPFxcL3Vub3Rlcz4kLy50ZXN0KGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjck5vdGVzKSkgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyTm90ZXMgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JOb3Rlcy5zdWJzdHJpbmcoMCwgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyTm90ZXMubGFzdEluZGV4T2YoXCI8L3Vub3Rlcz5cIikpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vc2hvdyByZWZlcnJhbCBkb2N0b3Jcblx0XHRcdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uZmFtaWx5RG9jdG9yICE9IG51bGwpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dmFyIHJlZmVycmFsRG9jID0gY29udHJvbGxlci5mb3JtYXREb2NPdXRwdXQoY29udHJvbGxlci5wYWdlLmRlbW8uZmFtaWx5RG9jdG9yKTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclJlZmVycmFsRG9jTm8gPSByZWZlcnJhbERvYy5udW1iZXI7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JSZWZlcnJhbERvYyA9IHJlZmVycmFsRG9jLm5hbWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly9zaG93IGZhbWlseSBkb2N0b3Jcblx0XHRcdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uZmFtaWx5RG9jdG9yMiAhPSBudWxsKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHZhciBmYW1pbHlEb2MgPSBjb250cm9sbGVyLmZvcm1hdERvY091dHB1dChjb250cm9sbGVyLnBhZ2UuZGVtby5mYW1pbHlEb2N0b3IyKTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckZhbWlseURvY05vID0gZmFtaWx5RG9jLm51bWJlcjtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckZhbWlseURvYyA9IGZhbWlseURvYy5uYW1lO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXMgIT0gbnVsbClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXMgPSB0b0FycmF5KGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhcyk7XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhcy5sZW5ndGg7IGkrKylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhc1tpXS5rZXkgPT0gXCJkZW1vX2NlbGxcIikgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyRGVtb0NlbGwgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXNbaV0udmFsdWU7XG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhc1tpXS5rZXkgPT0gXCJhYm9yaWdpbmFsXCIpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckFib3JpZ2luYWwgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXNbaV0udmFsdWU7XG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhc1tpXS5rZXkgPT0gXCJoUGhvbmVFeHRcIikgY29udHJvbGxlci5wYWdlLmRlbW8uc2NySFBob25lRXh0ID0gY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzW2ldLnZhbHVlO1xuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXNbaV0ua2V5ID09IFwid1Bob25lRXh0XCIpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjcldQaG9uZUV4dCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhc1tpXS52YWx1ZTtcblx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzW2ldLmtleSA9PSBcImN5dG9sTnVtXCIpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckN5dG9sTnVtID0gY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzW2ldLnZhbHVlO1xuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXNbaV0ua2V5ID09IFwicGhvbmVDb21tZW50XCIpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclBob25lQ29tbWVudCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhc1tpXS52YWx1ZTtcblx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzW2ldLmtleSA9PSBcInBhcGVyX2NoYXJ0X2FyY2hpdmVkXCIpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclBhcGVyQ2hhcnRBcmNoaXZlZCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhc1tpXS52YWx1ZTtcblx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzW2ldLmtleSA9PSBcInBhcGVyX2NoYXJ0X2FyY2hpdmVkX2RhdGVcIikgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyUGFwZXJDaGFydEFyY2hpdmVkRGF0ZSA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhc1tpXS52YWx1ZTtcblx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzW2ldLmtleSA9PSBcInVzU2lnbmVkXCIpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclVzU2lnbmVkID0gY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzW2ldLnZhbHVlO1xuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXNbaV0ua2V5ID09IFwicHJpdmFjeUNvbnNlbnRcIikgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyUHJpdmFjeUNvbnNlbnQgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXNbaV0udmFsdWU7XG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhc1tpXS5rZXkgPT0gXCJpbmZvcm1lZENvbnNlbnRcIikgY29udHJvbGxlci5wYWdlLmRlbW8uc2NySW5mb3JtZWRDb25zZW50ID0gY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzW2ldLnZhbHVlO1xuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXNbaV0ua2V5ID09IFwic2VjdXJpdHlRdWVzdGlvbjFcIikgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyU2VjdXJpdHlRdWVzdGlvbjEgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXNbaV0udmFsdWU7XG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhc1tpXS5rZXkgPT0gXCJzZWN1cml0eUFuc3dlcjFcIikgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyU2VjdXJpdHlBbnN3ZXIxID0gY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzW2ldLnZhbHVlO1xuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXNbaV0ua2V5ID09IFwicnhJbnRlcmFjdGlvbldhcm5pbmdMZXZlbFwiKSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JSeEludGVyYWN0aW9uTGV2ZWwgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXNbaV0udmFsdWU7XG5cblxuXHRcdFx0XHRcdFx0XHQvL3JlY29yZCBhcnJheSBwb3NpdGlvbiBvZiBleHRyYXMgYnkga2V5cyAtIHRvIGJlIHVzZWQgb24gc2F2aW5nXG5cdFx0XHRcdFx0XHRcdHBvc0V4dHJhc1tjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXNbaV0ua2V5XSA9IGk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly9zaG93IHBob25lIG51bWJlcnMgd2l0aCBwcmVmZXJyZWQgY2hlY2tcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JDZWxsUGhvbmUgPSBnZXRQaG9uZU51bShjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JEZW1vQ2VsbCk7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8uc2NySG9tZVBob25lID0gZ2V0UGhvbmVOdW0oY29udHJvbGxlci5wYWdlLmRlbW8ucGhvbmUpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjcldvcmtQaG9uZSA9IGdldFBob25lTnVtKGNvbnRyb2xsZXIucGFnZS5kZW1vLmFsdGVybmF0aXZlUGhvbmUpO1xuXG5cdFx0XHRcdFx0Ly9zaG93IHdhaXRpbmdMaXN0TmFtZXNcblx0XHRcdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmRlbW8ud2FpdGluZ0xpc3ROYW1lcyAhPSBudWxsKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby53YWl0aW5nTGlzdE5hbWVzLmlkICE9IG51bGwpXG5cdFx0XHRcdFx0XHR7IC8vb25seSAxIGVudHJ5LCBjb252ZXJ0IHRvIGFycmF5XG5cdFx0XHRcdFx0XHRcdHZhciB0bXAgPSB7fTtcblx0XHRcdFx0XHRcdFx0dG1wLmlkID0gY29udHJvbGxlci5wYWdlLmRlbW8ud2FpdGluZ0xpc3ROYW1lcy5pZDtcblx0XHRcdFx0XHRcdFx0dG1wLm5hbWUgPSBjb250cm9sbGVyLnBhZ2UuZGVtby53YWl0aW5nTGlzdE5hbWVzLm5hbWU7XG5cdFx0XHRcdFx0XHRcdHRtcC5ncm91cE5vID0gY29udHJvbGxlci5wYWdlLmRlbW8ud2FpdGluZ0xpc3ROYW1lcy5ncm91cE5vO1xuXHRcdFx0XHRcdFx0XHR0bXAucHJvdmlkZXJObyA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLndhaXRpbmdMaXN0TmFtZXMucHJvdmlkZXJObztcblx0XHRcdFx0XHRcdFx0dG1wLmNyZWF0ZURhdGUgPSBjb250cm9sbGVyLnBhZ2UuZGVtby53YWl0aW5nTGlzdE5hbWVzLmNyZWF0ZURhdGU7XG5cdFx0XHRcdFx0XHRcdHRtcC5pc0hpc3RvcnkgPSBjb250cm9sbGVyLnBhZ2UuZGVtby53YWl0aW5nTGlzdE5hbWVzLmlzSGlzdG9yeTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8ud2FpdGluZ0xpc3ROYW1lcyA9IFt0bXBdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmNlbGxQaG9uZVByZWZlcnJlZE1zZyA9IGRlZlBoVGl0bGU7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmhvbWVQaG9uZVByZWZlcnJlZE1zZyA9IGRlZlBoVGl0bGU7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLndvcmtQaG9uZVByZWZlcnJlZE1zZyA9IGRlZlBoVGl0bGU7XG5cdFx0XHRcdFx0aWYgKGlzUHJlZmVycmVkUGhvbmUoY29udHJvbGxlci5wYWdlLmRlbW8uc2NyRGVtb0NlbGwpKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclByZWZlcnJlZFBob25lID0gXCJDXCI7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UucHJlZmVycmVkUGhvbmVOdW1iZXIgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JDZWxsUGhvbmU7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuY2VsbFBob25lUHJlZmVycmVkTXNnID0gcHJlZlBoVGl0bGU7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuY2VsbFBob25lUHJlZmVycmVkQ29sb3IgPSBjb2xvckF0dG47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKGlzUHJlZmVycmVkUGhvbmUoY29udHJvbGxlci5wYWdlLmRlbW8ucGhvbmUpKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclByZWZlcnJlZFBob25lID0gXCJIXCI7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UucHJlZmVycmVkUGhvbmVOdW1iZXIgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JIb21lUGhvbmU7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuaG9tZVBob25lUHJlZmVycmVkTXNnID0gcHJlZlBoVGl0bGU7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuaG9tZVBob25lUHJlZmVycmVkQ29sb3IgPSBjb2xvckF0dG47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKGlzUHJlZmVycmVkUGhvbmUoY29udHJvbGxlci5wYWdlLmRlbW8uYWx0ZXJuYXRpdmVQaG9uZSkpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8uc2NyUHJlZmVycmVkUGhvbmUgPSBcIldcIjtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5wcmVmZXJyZWRQaG9uZU51bWJlciA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjcldvcmtQaG9uZTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS53b3JrUGhvbmVQcmVmZXJyZWRNc2cgPSBwcmVmUGhUaXRsZTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS53b3JrUGhvbmVQcmVmZXJyZWRDb2xvciA9IGNvbG9yQXR0bjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5wcmVmZXJyZWRQaG9uZU51bWJlciA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckhvbWVQaG9uZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGF0YUNoYW5nZWQgPSBmYWxzZTtcblxuXHRcdFx0XHRcdC8vZ2V0IHN0YXRpYyBsaXN0cyB0byBiZSBzZWxlY3RlZFxuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5nZW5kZXJzID0gc3RhdGljRGF0YVNlcnZpY2UuZ2V0R2VuZGVycygpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS50aXRsZXMgPSBzdGF0aWNEYXRhU2VydmljZS5nZXRUaXRsZXMoKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UucHJvdmluY2VzID0gc3RhdGljRGF0YVNlcnZpY2UuZ2V0UHJvdmluY2VzKCk7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmNvdW50cmllcyA9IHN0YXRpY0RhdGFTZXJ2aWNlLmdldENvdW50cmllcygpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5lbmdGcmUgPSBzdGF0aWNEYXRhU2VydmljZS5nZXRFbmdGcmUoKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uuc3Bva2VubGFuZ3MgPSBzdGF0aWNEYXRhU2VydmljZS5nZXRTcG9rZW5MYW5ndWFnZXMoKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uucm9zdGVyVGVybVJlYXNvbnMgPSBzdGF0aWNEYXRhU2VydmljZS5nZXRSb3N0ZXJUZXJtaW5hdGlvblJlYXNvbnMoKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uuc2VjdXJpdHlRdWVzdGlvbnMgPSBzdGF0aWNEYXRhU2VydmljZS5nZXRTZWN1cml0eVF1ZXN0aW9ucygpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5yeEludGVyYWN0aW9uTGV2ZWxzID0gc3RhdGljRGF0YVNlcnZpY2UuZ2V0UnhJbnRlcmFjdGlvbkxldmVscygpO1xuXG5cdFx0XHRcdFx0Ly9nZXQgcGF0aWVudCBkZXRhaWwgc3RhdHVzXG5cdFx0XHRcdFx0cGF0aWVudERldGFpbFN0YXR1c1NlcnZpY2UuZ2V0U3RhdHVzKCRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vKS50aGVuKFxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UubWFjUEhSTG9nZ2VkSW4gPSByZXN1bHRzLm1hY1BIUkxvZ2dlZEluO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UubWFjUEhSSWRzU2V0ID0gcmVzdWx0cy5tYWNQSFJJZHNTZXQ7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5tYWNQSFJWZXJpZmljYXRpb25MZXZlbCA9IHJlc3VsdHMubWFjUEhSVmVyaWZpY2F0aW9uTGV2ZWw7XG5cblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmludGVncmF0b3JFbmFibGVkID0gcmVzdWx0cy5pbnRlZ3JhdG9yRW5hYmxlZDtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmludGVncmF0b3JPZmZsaW5lID0gcmVzdWx0cy5pbnRlZ3JhdG9yT2ZmbGluZTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmludGVncmF0b3JBbGxTeW5jZWQgPSByZXN1bHRzLmludGVncmF0b3JBbGxTeW5jZWQ7XG5cblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmNvbmZvcm1hbmNlRmVhdHVyZXNFbmFibGVkID0gcmVzdWx0cy5jb25mb3JtYW5jZUZlYXR1cmVzRW5hYmxlZDtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLndvcmtmbG93RW5oYW5jZSA9IHJlc3VsdHMud29ya2Zsb3dFbmhhbmNlO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuYmlsbHJlZ2lvbiA9IHJlc3VsdHMuYmlsbHJlZ2lvbjtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlZmF1bHRWaWV3ID0gcmVzdWx0cy5kZWZhdWx0Vmlldztcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmhvc3BpdGFsVmlldyA9IHJlc3VsdHMuaG9zcGl0YWxWaWV3O1xuXG5cdFx0XHRcdFx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuaW50ZWdyYXRvckVuYWJsZWQpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmludGVncmF0b3JPZmZsaW5lKVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5pbnRlZ3JhdG9yU3RhdHVzQ29sb3IgPSBcIiNmZjU1MDBcIjtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5pbnRlZ3JhdG9yU3RhdHVzTXNnID0gXCJOT1RFOiBJbnRlZ3JhdG9yIGlzIG5vdCBhdmFpbGFibGUgYXQgdGhpcyB0aW1lXCI7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGVsc2UgaWYgKCFjb250cm9sbGVyLnBhZ2UuaW50ZWdyYXRvckFsbFN5bmNlZClcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuaW50ZWdyYXRvclN0YXR1c0NvbG9yID0gXCIjZmY1NTAwXCI7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuaW50ZWdyYXRvclN0YXR1c01zZyA9IFwiTk9URTogSW50ZWdyYXRlZCBDb21tdW5pdHkgaXMgbm90IHN5bmNlZFwiO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5iaWxsaW5nSGlzdG9yeUxhYmVsID0gXCJJbnZvaWNlIExpc3RcIjtcblx0XHRcdFx0XHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5iaWxscmVnaW9uID09IFwiT05cIikgY29udHJvbGxlci5wYWdlLmJpbGxpbmdIaXN0b3J5TGFiZWwgPSBcIkJpbGxpbmcgSGlzdG9yeVwiO1xuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly9zaG93IHBhdGllbnRTdGF0dXNMaXN0ICYgcm9zdGVyU3RhdHVzTGlzdCB2YWx1ZXNcblx0XHRcdFx0XHRkZW1vZ3JhcGhpY3NTZXJ2aWNlLmdldFN0YXR1c0xpc3QoXCJyb3N0ZXJcIikudGhlbihcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSlcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnJvc3RlclN0YXR1c0xpc3QgPSB0b0FycmF5KGRhdGEpO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uucm9zdGVyU3RhdHVzTGlzdC51bnNoaWZ0KFxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJGU1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJsYWJlbFwiOiBcIkZTIC0gZmVlIGZvciBzZXJ2aWNlXCJcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnJvc3RlclN0YXR1c0xpc3QudW5zaGlmdChcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcInZhbHVlXCI6IFwiVEVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFwibGFiZWxcIjogXCJURSAtIHRlcm1pbmF0ZWRcIlxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uucm9zdGVyU3RhdHVzTGlzdC51bnNoaWZ0KFxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJOUlwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJsYWJlbFwiOiBcIk5SIC0gbm90IHJvc3RlcmVkXCJcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnJvc3RlclN0YXR1c0xpc3QudW5zaGlmdChcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcInZhbHVlXCI6IFwiUk9cIixcblx0XHRcdFx0XHRcdFx0XHRcdFwibGFiZWxcIjogXCJSTyAtIHJvc3RlcmVkXCJcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGRlbW9ncmFwaGljc1NlcnZpY2UuZ2V0U3RhdHVzTGlzdChcInBhdGllbnRcIikudGhlbihcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSlcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnBhdGllbnRTdGF0dXNMaXN0ID0gdG9BcnJheShkYXRhKTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnBhdGllbnRTdGF0dXNMaXN0LnVuc2hpZnQoXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkZJXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcImxhYmVsXCI6IFwiRkkgLSBGaXJlZFwiXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5wYXRpZW50U3RhdHVzTGlzdC51bnNoaWZ0KFxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJNT1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJsYWJlbFwiOiBcIk1PIC0gTW92ZWRcIlxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UucGF0aWVudFN0YXR1c0xpc3QudW5zaGlmdChcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcInZhbHVlXCI6IFwiREVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFwibGFiZWxcIjogXCJERSAtIERlY2Vhc2VkXCJcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnBhdGllbnRTdGF0dXNMaXN0LnVuc2hpZnQoXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XCJ2YWx1ZVwiOiBcIklOXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcImxhYmVsXCI6IFwiSU4gLSBJbmFjdGl2ZVwiXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5wYXRpZW50U3RhdHVzTGlzdC51bnNoaWZ0KFxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJBQ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJsYWJlbFwiOiBcIkFDIC0gQWN0aXZlXCJcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0Y29udHJvbGxlci5mb3JtYXREYXRlKFwiRG9iTVwiKTsgLy9kb25lIG9uIHBhZ2UgbG9hZFxuXHRcdFx0XHRcdGNvbnRyb2xsZXIuZm9ybWF0RGF0ZShcIkRvYkRcIik7IC8vZG9uZSBvbiBwYWdlIGxvYWRcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5hZ2UgPSBKdW5vLkNvbW1vbi5VdGlsLmNhbGNBZ2UoY29udHJvbGxlci5wYWdlLmRlbW8uZG9iWWVhciwgY29udHJvbGxlci5wYWdlLmRlbW8uZG9iTW9udGgsIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYkRheSk7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5mb3JtYXRMYXN0TmFtZSgpOyAvL2RvbmUgb24gcGFnZSBsb2FkXG5cdFx0XHRcdFx0Y29udHJvbGxlci5mb3JtYXRGaXJzdE5hbWUoKTsgLy9kb25lIG9uIHBhZ2UgbG9hZFxuXHRcdFx0XHRcdGNvbnRyb2xsZXIuc2V0U3dpcGVSZWFkeSgpOyAvL2RvbmUgb24gcGFnZSBsb2FkXG5cdFx0XHRcdFx0Y29udHJvbGxlci52YWxpZGF0ZUhDU2F2ZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbGVydCgnRXJyb3IgbG9hZGluZyBkZW1vZ3JhcGhpYzogJywgZXJyb3JzKSAvLyBUT0RPOiBEaXNwbGF5IGFjdHVhbCBlcnJvciBtZXNzYWdlXG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cblx0XHRcdC8vIGNvbnRyb2xsZXIucGFnZS5kZW1vID0gZGVtbztcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5pbml0RGVtb2dyYXBoaWNWYXJzID0gZnVuY3Rpb24gaW5pdERlbW9ncmFwaGljVmFycygpXG5cdFx0e1xuXHRcdFx0cGhvbmVOdW1bXCJDXCJdID0gY29udHJvbGxlci5wYWdlLmRlbW8uc2NyQ2VsbFBob25lO1xuXHRcdFx0cGhvbmVOdW1bXCJIXCJdID0gY29udHJvbGxlci5wYWdlLmRlbW8uc2NySG9tZVBob25lO1xuXHRcdFx0cGhvbmVOdW1bXCJXXCJdID0gY29udHJvbGxlci5wYWdlLmRlbW8uc2NyV29ya1Bob25lO1xuXHRcdFx0cGhvbmVOdW1bXCJIWFwiXSA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckhQaG9uZUV4dDtcblx0XHRcdHBob25lTnVtW1wiV1hcIl0gPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JXUGhvbmVFeHQ7XG5cdFx0XHRoaW4wID0gY29udHJvbGxlci5wYWdlLmRlbW8uaGluO1xuXHRcdFx0dmVyMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnZlcjtcblx0XHRcdGNoYXJ0Tm8wID0gY29udHJvbGxlci5wYWdlLmRlbW8uY2hhcnRObztcblx0XHRcdGN5dG9sTnVtMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckN5dG9sTnVtO1xuXHRcdFx0cmVmZXJyYWxEb2NObzAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JSZWZlcnJhbERvY05vO1xuXHRcdFx0c2luMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNpbjtcblx0XHRcdGVmZkRhdGUwID0gY29udHJvbGxlci5wYWdlLmRlbW8uZWZmRGF0ZTtcblx0XHRcdGhjUmVuZXdEYXRlMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLmhjUmVuZXdEYXRlO1xuXHRcdFx0cm9zdGVyRGF0ZTAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5yb3N0ZXJEYXRlO1xuXHRcdFx0cm9zdGVyVGVybWluYXRpb25EYXRlMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnJvc3RlclRlcm1pbmF0aW9uRGF0ZTtcblx0XHRcdHBhdGllbnRTdGF0dXNEYXRlMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnBhdGllbnRTdGF0dXNEYXRlO1xuXHRcdFx0ZGF0ZUpvaW5lZDAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5kYXRlSm9pbmVkO1xuXHRcdFx0ZW5kRGF0ZTAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5lbmREYXRlO1xuXHRcdFx0b25XYWl0aW5nTGlzdFNpbmNlRGF0ZTAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5vbldhaXRpbmdMaXN0U2luY2VEYXRlO1xuXHRcdFx0cGFwZXJDaGFydEFyY2hpdmVkRGF0ZTAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JQYXBlckNoYXJ0QXJjaGl2ZWREYXRlO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmNoZWNrQWNjZXNzID0gZnVuY3Rpb24gY2hlY2tBY2Nlc3MoKVxuXHRcdHtcblx0XHRcdC8vZ2V0IGFjY2VzcyByaWdodHNcblx0XHRcdHNlY3VyaXR5U2VydmljZS5oYXNSaWdodChcIl9kZW1vZ3JhcGhpY1wiLCBcInJcIiwgY29udHJvbGxlci5wYWdlLmRlbW8uZGVtb2dyYXBoaWNObykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmNhblJlYWQgPSByZXN1bHRzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHRcdHNlY3VyaXR5U2VydmljZS5oYXNSaWdodChcIl9kZW1vZ3JhcGhpY1wiLCBcInVcIiwgY29udHJvbGxlci5wYWdlLmRlbW8uZGVtb2dyYXBoaWNObykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmNhbm5vdENoYW5nZSA9ICFyZXN1bHRzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblxuXHRcdH07XG5cblx0XHQvLyBJcyB0aGVyZSBhIHNoYXJlZCBsb2NhdGlvbiB3aGVyZSB0aGlzIGNvdWxkIGJlIGFjY2Vzc2VkIGZyb20gYW55IGNvbnRyb2xsZXI/IGkuZS4gYSB1dGlscyBmaWxlXG5cdFx0Y29udHJvbGxlci5pc05hTiA9IGZ1bmN0aW9uKG51bSlcblx0XHR7XG5cdFx0XHRyZXR1cm4gaXNOYU4obnVtKTtcblx0XHR9O1xuXG5cdFx0Ly9kaXNhYmxlIGNsaWNrIGFuZCBrZXlwcmVzcyBpZiB1c2VyIG9ubHkgaGFzIHJlYWQtYWNjZXNzXG5cdFx0Y29udHJvbGxlci5jaGVja0FjdGlvbiA9IGZ1bmN0aW9uIGNoZWNrQWN0aW9uKGV2ZW50KVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuY2Fubm90Q2hhbmdlKVxuXHRcdFx0e1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0Y29udHJvbGxlci5zZXRTd2lwZVJlYWR5KCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXG5cdFx0Ly8gb24tc2NyZWVuIG9wZXJhdGlvbnMgLy9cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xuXHRcdC8vbW9uaXRvciBkYXRhIGNoYW5nZWRcblx0XHQkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHRyZXR1cm4gY29udHJvbGxlci5wYWdlLmRlbW87XG5cdFx0fSwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKVxuXHRcdHtcblx0XHRcdGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUgJiYgYW5ndWxhci5pc0RlZmluZWQob2xkVmFsdWUpICYmIGFuZ3VsYXIuaXNEZWZpbmVkKG5ld1ZhbHVlKSlcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRhdGFDaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdH0sIHRydWUpO1xuXG5cdFx0JHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uICgpXG5cdFx0e1xuXHRcdFx0LyogSGF2ZSB0byBjaGVjayBpZiB3ZSBhcmUgb24gdGhlIGRldGFpbHMgcGFnZSBzaW5jZSB0aGUgY29udHJvbGxlciBpc1xuXHRcdFx0XHRub3QgbmVjZXNzYXJpbHkgZGVzdHJveWVkIHVwb24gbGVhdmluZyB0aGUgcGFnZVxuXHRcdFx0Ki9cblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGF0YUNoYW5nZWQgPT09IHRydWUgJiYgJHN0YXRlLmN1cnJlbnQubmFtZSA9PT0gJ3JlY29yZC5kZXRhaWxzJylcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuICdZb3UgaGF2ZSB1bnNhdmVkIHBhdGllbnQgZGF0YS4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGxlYXZlPyc7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdCRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG5cdFx0XHRkZWxldGUgJHdpbmRvdy5vbmJlZm9yZXVubG9hZDtcblx0XHR9KTtcblxuXHRcdC8vIFdhcm4gdXNlciBhYm91dCB1bnNhdmVkIGRhdGEgYmVmb3JlIGEgc3RhdGUgY2hhbmdlXG5cdFx0JHNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50KVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGF0YUNoYW5nZWQgPT09IHRydWUpXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBkaXNjYXJkID0gY29uZmlybShcIllvdSBoYXZlIHVuc2F2ZWQgcGF0aWVudCBkYXRhLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gbGVhdmU/XCIpO1xuXHRcdFx0XHRpZiAoIWRpc2NhcmQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlbW9ncmFwaGljU2VydmljZS5nZXREZW1vZ3JhcGhpYygkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObykudGhlbihcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Ly8gVE9ETzogQ2VsZWJyYXRlXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRhbGVydCgnRXJyb3IgbG9hZGluZyBkZW1vZ3JhcGhpYzogJywgZXJyb3JzKSAvLyBUT0RPOiBEaXNwbGF5IGFjdHVhbCBlcnJvciBtZXNzYWdlXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vZm9ybWF0IGxhc3RuYW1lLCBmaXJzdG5hbWVcblx0XHRjb250cm9sbGVyLmZvcm1hdExhc3ROYW1lID0gZnVuY3Rpb24gZm9ybWF0TGFzdE5hbWUoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLmxhc3ROYW1lID0gY29udHJvbGxlci5wYWdlLmRlbW8ubGFzdE5hbWUudG9VcHBlckNhc2UoKTtcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXIuZm9ybWF0Rmlyc3ROYW1lID0gZnVuY3Rpb24gZm9ybWF0Rmlyc3ROYW1lKClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5maXJzdE5hbWUgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5maXJzdE5hbWUudG9VcHBlckNhc2UoKTtcblx0XHR9O1xuXG5cblx0XHQvLyAvL2NhbGN1bGF0ZSBhZ2Vcblx0XHQvLyB2YXIgbm93ID0gbmV3IERhdGUoKTtcblx0XHQvLyBjb250cm9sbGVyLmNhbGN1bGF0ZUFnZSA9IGZ1bmN0aW9uIGNhbGN1bGF0ZUFnZSgpXG5cdFx0Ly8ge1xuXHRcdC8vIFx0Y29udHJvbGxlci5wYWdlLmRlbW8uYWdlID0gbm93LmdldEZ1bGxZZWFyKCkgLSBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JZZWFyO1xuXHRcdC8vIFx0aWYgKG5vdy5nZXRNb250aCgpIDwgY29udHJvbGxlci5wYWdlLmRlbW8uZG9iTW9udGggLSAxKSBjb250cm9sbGVyLnBhZ2UuZGVtby5hZ2UtLTtcblx0XHQvLyBcdGVsc2UgaWYgKG5vdy5nZXRNb250aCgpID09IGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYk1vbnRoIC0gMSAmJiBub3cuZ2V0RGF0ZSgpIDwgY29udHJvbGxlci5wYWdlLmRlbW8uZG9iRGF5KSBjb250cm9sbGVyLnBhZ2UuZGVtby5hZ2UtLTtcblx0XHQvLyB9O1xuXHRcdC8vXG5cdFx0Ly8gY29udHJvbGxlci5jYWxjdWxhdGVBZ2UoKTsgLy9kb25lIG9uIHBhZ2UgbG9hZFxuXG5cdFx0Ly9zZXQgcmVhZHkgZm9yIHN3aXBlIGNhcmRcblx0XHRjb250cm9sbGVyLnNldFN3aXBlUmVhZHkgPSBmdW5jdGlvbiBzZXRTd2lwZVJlYWR5KHN0YXR1cylcblx0XHR7XG5cdFx0XHRpZiAoc3RhdHVzID09IFwib2ZmXCIpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5yZWFkeUZvclN3aXBlID0gXCJcIjtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnN3aXBlY2FyZE1zZyA9IFwiQ2xpY2sgZm9yIENhcmQgU3dpcGVcIjtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKHN0YXR1cyA9PSBcImRvbmVcIilcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnJlYWR5Rm9yU3dpcGUgPSBcImJ0bi1wcmltYXJ5XCI7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5yZWFkeUZvclN3aXBlID0gXCJidG4tc3VjY2Vzc1wiO1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uuc3dpcGVjYXJkTXNnID0gXCJSZWFkeSBmb3IgQ2FyZCBTd2lwZVwiO1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uuc3dpcGVjYXJkID0gXCJcIjtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly9IZWFsdGggY2FyZCB2ZXJpZmljYXRpb25cblx0XHRjb250cm9sbGVyLmhlYWx0aENhcmRIYW5kbGVyID0gZnVuY3Rpb24gaGVhbHRoQ2FyZEhhbmRsZXIoa2V5Y29kZSlcblx0XHR7XG5cdFx0XHRpZiAoa2V5Y29kZSA9PSAxMylcblx0XHRcdHsgLy9jYXJyaWFnZS1yZXR1cm5cblx0XHRcdFx0dmFyIHN3aXBlQ2FyZERhdGEgPSBjb250cm9sbGVyLnBhZ2Uuc3dpcGVjYXJkO1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uuc3dpcGVjYXJkID0gXCJcIjtcblxuXHRcdFx0XHRpZiAoc3dpcGVDYXJkRGF0YS5zdWJzdHJpbmcoMCwgMykgPT0gXCIlRT9cIilcblx0XHRcdFx0eyAvL3N3aXBlIGNhcmQgZXJyb3Jcblx0XHRcdFx0XHRhbGVydChcIkVycm9yIHJlYWRpbmcgY2FyZFwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAoc3dpcGVDYXJkRGF0YS5zdWJzdHJpbmcoMiwgOCkgPT0gXCI2MTAwNTRcIilcblx0XHRcdFx0XHR7IC8vT250YXJpb1xuXHRcdFx0XHRcdFx0aGNQYXJ0c1tcImlzc3VlclwiXSA9IFwiT05cIjtcblx0XHRcdFx0XHRcdGhjUGFydHNbXCJoaW5cIl0gPSBzd2lwZUNhcmREYXRhLnN1YnN0cmluZyg4LCAxOCk7XG5cblx0XHRcdFx0XHRcdHZhciBuYW1lUG9zID0gc3dpcGVDYXJkRGF0YS5pbmRleE9mKFwiXlwiKSArIDE7XG5cdFx0XHRcdFx0XHR2YXIgZW5kTmFtZVBvcyA9IHN3aXBlQ2FyZERhdGEuaW5kZXhPZihcIl5cIiwgbmFtZVBvcyk7XG5cdFx0XHRcdFx0XHRoY1BhcnRzW1wiZnVsbE5hbWVcIl0gPSBzd2lwZUNhcmREYXRhLnN1YnN0cmluZyhuYW1lUG9zLCBlbmROYW1lUG9zKTtcblx0XHRcdFx0XHRcdGhjUGFydHNbXCJsYXN0TmFtZVwiXSA9IGhjUGFydHNbXCJmdWxsTmFtZVwiXS5zcGxpdChcIi9cIilbMF07XG5cdFx0XHRcdFx0XHRoY1BhcnRzW1wiZmlyc3ROYW1lXCJdID0gaGNQYXJ0c1tcImZ1bGxOYW1lXCJdLnNwbGl0KFwiL1wiKVsxXS50cmltKCk7XG5cblx0XHRcdFx0XHRcdGhjUGFydHNbXCJzZXhcIl0gPSBzd2lwZUNhcmREYXRhLnN1YnN0cmluZyhlbmROYW1lUG9zICsgOCwgZW5kTmFtZVBvcyArIDkpO1xuXHRcdFx0XHRcdFx0aGNQYXJ0c1tcImRvYlwiXSA9IHN3aXBlQ2FyZERhdGEuc3Vic3RyaW5nKGVuZE5hbWVQb3MgKyA5LCBlbmROYW1lUG9zICsgMTcpO1xuXHRcdFx0XHRcdFx0aGNQYXJ0c1tcImhpbkV4cFwiXSA9IHN3aXBlQ2FyZERhdGEuc3Vic3RyaW5nKGVuZE5hbWVQb3MgKyAxLCBlbmROYW1lUG9zICsgNSkgKyBoY1BhcnRzW1wiZG9iXCJdLnN1YnN0cmluZyg2LCA4KTtcblx0XHRcdFx0XHRcdGhjUGFydHNbXCJoaW5WZXJcIl0gPSBzd2lwZUNhcmREYXRhLnN1YnN0cmluZyhlbmROYW1lUG9zICsgMTcsIGVuZE5hbWVQb3MgKyAxOSk7XG5cdFx0XHRcdFx0XHRoY1BhcnRzW1wiZmlyc3ROYW1lU2hvcnRcIl0gPSBzd2lwZUNhcmREYXRhLnN1YnN0cmluZyhlbmROYW1lUG9zICsgMTksIGVuZE5hbWVQb3MgKyAyNCk7XG5cdFx0XHRcdFx0XHRoY1BhcnRzW1wiaXNzdWVEYXRlXCJdID0gc3dpcGVDYXJkRGF0YS5zdWJzdHJpbmcoZW5kTmFtZVBvcyArIDI0LCBlbmROYW1lUG9zICsgMzApO1xuXHRcdFx0XHRcdFx0aGNQYXJ0c1tcImxhbmdcIl0gPSBzd2lwZUNhcmREYXRhLnN1YnN0cmluZyhlbmROYW1lUG9zICsgMzAsIGVuZE5hbWVQb3MgKyAzMik7XG5cblx0XHRcdFx0XHRcdGlmICghaXNOdW1iZXIoaGNQYXJ0c1tcImRvYlwiXSkpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGhjUGFydHNbXCJkb2JcIl0gPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRoY1BhcnRzW1wiaGluRXhwXCJdID0gbnVsbDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICghaXNOdW1iZXIoaGNQYXJ0c1tcImhpbkV4cFwiXSkpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGhjUGFydHNbXCJoaW5FeHBcIl0gPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCFpc051bWJlcihoY1BhcnRzW1wiaXNzdWVEYXRlXCJdKSlcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0aGNQYXJ0c1tcImlzc3VlRGF0ZVwiXSA9IG51bGw7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuc2V0U3dpcGVSZWFkeShcImRvbmVcIik7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmhlYWx0aENhcmRVcGRhdGVEZW1vZ3JhcGhpY3MoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGFsZXJ0KFwiTm90IE9udGFyaW8gSGVhbHRoIENhcmRcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnRyb2xsZXIudmFsaWRhdGVIQygpOyAvL1J1biBIQ1ZhbGlkYXRpb25cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmhlYWx0aENhcmRVcGRhdGVEZW1vZ3JhcGhpY3MgPSBmdW5jdGlvbiBoZWFsdGhDYXJkVXBkYXRlRGVtb2dyYXBoaWNzKClcblx0XHR7XG5cdFx0XHR2YXIgbm93ID0gbmV3IERhdGUoKTtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5oY1R5cGUgIT0gaGNQYXJ0c1tcImlzc3VlclwiXSlcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8uaGNUeXBlID0gaGNQYXJ0c1tcImlzc3VlclwiXTtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmhjVHlwZUNvbG9yID0gY29sb3JBdHRuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmxhc3ROYW1lICE9IGhjUGFydHNbXCJsYXN0TmFtZVwiXSlcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8ubGFzdE5hbWUgPSBoY1BhcnRzW1wibGFzdE5hbWVcIl07XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5sYXN0TmFtZUNvbG9yID0gY29sb3JBdHRuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmZpcnN0TmFtZSAhPSBoY1BhcnRzW1wiZmlyc3ROYW1lXCJdKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5maXJzdE5hbWUgPSBoY1BhcnRzW1wiZmlyc3ROYW1lXCJdO1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZmlyc3ROYW1lQ29sb3IgPSBjb2xvckF0dG47XG5cdFx0XHR9XG5cdFx0XHRpZiAoaXNOdW1iZXIoaGNQYXJ0c1tcImhpblwiXSkgJiYgY29udHJvbGxlci5wYWdlLmRlbW8uaGluICE9IGhjUGFydHNbXCJoaW5cIl0pXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLmhpbiA9IGhjUGFydHNbXCJoaW5cIl07XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5oaW5Db2xvciA9IGNvbG9yQXR0bjtcblx0XHRcdH1cblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby52ZXIgIT0gaGNQYXJ0c1tcImhpblZlclwiXSlcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8udmVyID0gaGNQYXJ0c1tcImhpblZlclwiXTtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnZlckNvbG9yID0gY29sb3JBdHRuO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGhjU2V4ID0gaGNQYXJ0c1tcInNleFwiXSA9PSAxID8gXCJNXCIgOiAoaGNQYXJ0c1tcInNleFwiXSA9PSAyID8gXCJGXCIgOiBudWxsKTtcblx0XHRcdGlmIChoY1NleCAhPSBudWxsICYmIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNleCAhPSBoY1NleClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8uc2V4ID0gaGNTZXg7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5zZXhDb2xvciA9IGNvbG9yQXR0bjtcblx0XHRcdH1cblx0XHRcdHZhciBkYXRlUGFydHMgPSB7fTtcblx0XHRcdGlmIChoY1BhcnRzW1wiZG9iXCJdICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGRhdGVQYXJ0c1tcInllYXJcIl0gPSBoY1BhcnRzW1wiZG9iXCJdLnN1YnN0cmluZygwLCA0KTtcblx0XHRcdFx0ZGF0ZVBhcnRzW1wibW9udGhcIl0gPSBoY1BhcnRzW1wiZG9iXCJdLnN1YnN0cmluZyg0LCA2KTtcblx0XHRcdFx0ZGF0ZVBhcnRzW1wiZGF5XCJdID0gaGNQYXJ0c1tcImRvYlwiXS5zdWJzdHJpbmcoNik7XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JZZWFyICE9IGRhdGVQYXJ0c1tcInllYXJcIl0pXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JZZWFyID0gZGF0ZVBhcnRzW1wieWVhclwiXTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZG9iWWVhckNvbG9yID0gY29sb3JBdHRuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JNb250aCAhPSBkYXRlUGFydHNbXCJtb250aFwiXSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYk1vbnRoID0gZGF0ZVBhcnRzW1wibW9udGhcIl07XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRvYk1vbnRoQ29sb3IgPSBjb2xvckF0dG47XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYkRheSAhPSBkYXRlUGFydHNbXCJkYXlcIl0pXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JEYXkgPSBkYXRlUGFydHNbXCJkYXlcIl07XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRvYkRheUNvbG9yID0gY29sb3JBdHRuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoaGNQYXJ0c1tcImlzc3VlRGF0ZVwiXSAhPSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgc3dpcGVEYXRlID0gXCIyMFwiICsgaGNQYXJ0c1tcImlzc3VlRGF0ZVwiXS5zdWJzdHJpbmcoMCwgMikgKyBcIi1cIiArIGhjUGFydHNbXCJpc3N1ZURhdGVcIl0uc3Vic3RyaW5nKDIsIDQpICsgXCItXCIgKyBoY1BhcnRzW1wiaXNzdWVEYXRlXCJdLnN1YnN0cmluZyg0KTtcblx0XHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmVmZkRhdGUgIT0gc3dpcGVEYXRlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8uZWZmRGF0ZSA9IHN3aXBlRGF0ZTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZWZmRGF0ZUNvbG9yID0gY29sb3JBdHRuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoaGNQYXJ0c1tcImhpbkV4cFwiXSAhPSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgc3dpcGVEYXRlID0gXCIyMFwiICsgaGNQYXJ0c1tcImhpbkV4cFwiXS5zdWJzdHJpbmcoMCwgMikgKyBcIi1cIiArIGhjUGFydHNbXCJoaW5FeHBcIl0uc3Vic3RyaW5nKDIsIDQpICsgXCItXCIgKyBoY1BhcnRzW1wiaGluRXhwXCJdLnN1YnN0cmluZyg0KTtcblx0XHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmhjUmVuZXdEYXRlICE9IHN3aXBlRGF0ZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLmhjUmVuZXdEYXRlID0gc3dpcGVEYXRlO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5oY1JlbmV3RGF0ZUNvbG9yID0gY29sb3JBdHRuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBoaW5FeHBEYXRlID0gYnVpbGREYXRlKFwiMjBcIiArIGhjUGFydHNbXCJoaW5FeHBcIl0uc3Vic3RyaW5nKDAsIDIpLCBoY1BhcnRzW1wiaGluRXhwXCJdLnN1YnN0cmluZygyLCA0KSwgaGNQYXJ0c1tcImhpbkV4cFwiXS5zdWJzdHJpbmcoNCkpO1xuXHRcdFx0XHRpZiAoaGluRXhwRGF0ZSAhPSBudWxsICYmIG5vdyA+IGhpbkV4cERhdGUpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbGVydChcIlRoaXMgaGVhbHRoIGNhcmQgaGFzIGV4cGlyZWQhXCIpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5oY1JlbmV3RGF0ZUNvbG9yID0gY29sb3JBdHRuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9IQ1ZhbGlkYXRpb25cblx0XHRjb250cm9sbGVyLnZhbGlkYXRlSEMgPSBmdW5jdGlvbiB2YWxpZGF0ZUhDKClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uaGNUeXBlICE9IFwiT05cIiB8fCBjb250cm9sbGVyLnBhZ2UuZGVtby5oaW4gPT0gbnVsbCB8fCBjb250cm9sbGVyLnBhZ2UuZGVtby5oaW4gPT0gXCJcIikgcmV0dXJuO1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLnZlciA9PSBudWxsKSBjb250cm9sbGVyLnBhZ2UuZGVtby52ZXIgPSBcIlwiO1xuXHRcdFx0cGF0aWVudERldGFpbFN0YXR1c1NlcnZpY2UudmFsaWRhdGVIQyhjb250cm9sbGVyLnBhZ2UuZGVtby5oaW4sIGNvbnRyb2xsZXIucGFnZS5kZW1vLnZlcikudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYgKHJlc3VsdHMudmFsaWQgPT0gbnVsbClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuSENWYWxpZGF0aW9uID0gXCJuL2FcIjtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5zd2lwZWNhcmRNc2cgPSBcIkRvbmUgSGVhbHRoIENhcmQgQWN0aW9uXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuSENWYWxpZGF0aW9uID0gcmVzdWx0cy52YWxpZCA/IFwidmFsaWRcIiA6IFwiaW52YWxpZFwiO1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnN3aXBlY2FyZE1zZyA9IHJlc3VsdHMucmVzcG9uc2VEZXNjcmlwdGlvbiArIFwiIChcIiArIHJlc3VsdHMucmVzcG9uc2VDb2RlICsgXCIpXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL21hbmFnZSBoaW4vaGluVmVyIGVudHJpZXNcblx0XHRjb250cm9sbGVyLmNoZWNrSGluID0gZnVuY3Rpb24gY2hlY2tIaW4oKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5oY1R5cGUgPT0gXCJPTlwiICYmIGNvbnRyb2xsZXIucGFnZS5kZW1vLmhpbiAhPSBudWxsICYmIGNvbnRyb2xsZXIucGFnZS5kZW1vLmhpbiAhPSBcIlwiKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uaGluLmxlbmd0aCA+IDEwKSBjb250cm9sbGVyLnBhZ2UuZGVtby5oaW4gPSBoaW4wO1xuXHRcdFx0XHRpZiAoIWlzTnVtYmVyKGNvbnRyb2xsZXIucGFnZS5kZW1vLmhpbikpIGNvbnRyb2xsZXIucGFnZS5kZW1vLmhpbiA9IGhpbjA7XG5cdFx0XHR9XG5cdFx0XHRoaW4wID0gY29udHJvbGxlci5wYWdlLmRlbW8uaGluO1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLkhDVmFsaWRhdGlvbiA9IG51bGw7XG5cdFx0fVxuXHRcdGNvbnRyb2xsZXIuY2hlY2tIaW5WZXIgPSBmdW5jdGlvbiBjaGVja0hpblZlcigpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmhjVHlwZSA9PSBcIk9OXCIpXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby52ZXIubGVuZ3RoID4gMikgY29udHJvbGxlci5wYWdlLmRlbW8udmVyID0gdmVyMDtcblx0XHRcdFx0aWYgKCEoL15bYS16QS1aKCldKiQvLnRlc3QoY29udHJvbGxlci5wYWdlLmRlbW8udmVyKSkpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnZlciA9IHZlcjA7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLnZlciA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnZlci50b1VwcGVyQ2FzZSgpO1xuXHRcdFx0fVxuXHRcdFx0dmVyMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnZlcjtcblx0XHR9XG5cblx0XHQvL21hbmFnZSBkYXRlIGVudHJpZXNcblx0XHRjb250cm9sbGVyLmNoZWNrRGF0ZSA9IGZ1bmN0aW9uIGNoZWNrRGF0ZShpZClcblx0XHR7XG5cdFx0XHRpZiAoaWQgPT0gXCJEb2JZXCIpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYlllYXIgPSBjaGVja1llYXIoY29udHJvbGxlci5wYWdlLmRlbW8uZG9iWWVhcik7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChpZCA9PSBcIkRvYk1cIilcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8uZG9iTW9udGggPSBjaGVja01vbnRoKGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYk1vbnRoKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGlkID09IFwiRG9iRFwiKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JEYXkgPSBjaGVja0RheShjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JEYXksIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYk1vbnRoLCBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JZZWFyKTtcblx0XHRcdH1cblx0XHRcdGNvbnNvbGUubG9nKCdNT05USDogJywgY29udHJvbGxlci5wYWdlLmRlbW8uZG9iTW9udGgpO1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8uYWdlID0gSnVuby5Db21tb24uVXRpbC5jYWxjQWdlKGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYlllYXIsIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYk1vbnRoLCBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JEYXkpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmZvcm1hdERhdGUgPSBmdW5jdGlvbiBmb3JtYXREYXRlKGlkKVxuXHRcdHtcblx0XHRcdC8vIGNvbnRyb2xsZXIuY2FsY3VsYXRlQWdlKCk7XG5cblx0XHRcdGlmIChpZCA9PSBcIkRvYk1cIiAmJiBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JNb250aCAhPSBudWxsICYmIFN0cmluZyhjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JNb250aCkubGVuZ3RoID09IDEpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYk1vbnRoID0gXCIwXCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JNb250aDtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGlkID09IFwiRG9iRFwiICYmIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYkRheSAhPSBudWxsICYmIFN0cmluZyhjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JEYXkpLmxlbmd0aCA9PSAxKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JEYXkgPSBcIjBcIiArIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYkRheTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly9jaGVjayBQYXRpZW50IFN0YXR1cyBpZiBlbmREYXRlIGlzIGVudGVyZWRcblx0XHRjb250cm9sbGVyLmNoZWNrUGF0aWVudFN0YXR1cyA9IGZ1bmN0aW9uIGNoZWNrUGF0aWVudFN0YXR1cygpXG5cdFx0e1xuXHRcdFx0dmFyIG5vdyA9IG5ldyBEYXRlKCk7XG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmRlbW8ucGF0aWVudFN0YXR1cyA9PSBcIkFDXCIpXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5lbmREYXRlICE9IG51bGwgJiYgY29udHJvbGxlci5wYWdlLmRlbW8uZW5kRGF0ZSAhPSBcIlwiKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYgKGRhdGVWYWxpZChjb250cm9sbGVyLnBhZ2UuZGVtby5lbmREYXRlKSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR2YXIgZGF0ZVBhcnQgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5lbmREYXRlLnNwbGl0KFwiLVwiKTtcblx0XHRcdFx0XHRcdHZhciBlbmREYXRlID0gbmV3IERhdGUoZGF0ZVBhcnRbMF0sIGRhdGVQYXJ0WzFdIC0gMSwgZGF0ZVBhcnRbMl0pO1xuXHRcdFx0XHRcdFx0aWYgKG5vdyA+IGVuZERhdGUpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGFsZXJ0KFwiUGF0aWVudCBTdGF0dXMgY2Fubm90IGJlIEFjdGl2ZSBhZnRlciBFbmQgRGF0ZS5cIik7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdGNvbnRyb2xsZXIuaXNQb3N0YWxDb21wbGV0ZSA9IGZ1bmN0aW9uIGlzUG9zdGFsQ29tcGxldGUoKVxuXHRcdHtcblx0XHRcdHZhciBwcm92aW5jZSA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLmFkZHJlc3MucHJvdmluY2U7XG5cdFx0XHR2YXIgcG9zdGFsID0gY29udHJvbGxlci5wYWdlLmRlbW8uYWRkcmVzcy5wb3N0YWw7XG5cdFx0XHQvLyBJZiBDYW5hZGlhbiBwcm92aW5jZSBpcyBzZWxlY3RlZCwgcHJvY2VlZCB3aXRoIHZhbGlkYXRpb25cblx0XHRcdGlmIChwb3N0YWwgIT09IG51bGwgJiYgcHJvdmluY2UgIT09IG51bGwgJiYgcHJvdmluY2UgIT09IFwiT1RcIiAmJiBwcm92aW5jZS5pbmRleE9mKFwiVVNcIikgIT09IDApXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLmlzUG9zdGFsVmFsaWQoKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29udHJvbGxlci5yZXNldEVkaXRTdGF0ZSgpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmlzUG9zdGFsVmFsaWQgPSBmdW5jdGlvbiBpc1Bvc3RhbFZhbGlkKClcblx0XHR7XG5cdFx0XHR2YXIgcG9zdGFsID0gY29udHJvbGxlci5wYWdlLmRlbW8uYWRkcmVzcy5wb3N0YWwucmVwbGFjZSgvXFxzL2csIFwiXCIpOyAvLyBUcmltIHdoaXRlc3BhY2VcblxuXHRcdFx0Ly8gSWYgcG9zdGFsIGNvZGUgaXMgYW4gZW1wdHkgc3RyaW5nLCBzZXQgaXQgdG8gbnVsbCBhbmQgY29udGludWVcblx0XHRcdGlmKHBvc3RhbC5sZW5ndGggPT09IDApXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLmFkZHJlc3MucG9zdGFsID0gbnVsbDtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdHZhciByZWdleCA9IG5ldyBSZWdFeHAoL15bQS1aYS16XVxcZFtBLVphLXpdXFxkW0EtWmEtel1cXGQkLyk7IC8vIE1hdGNoIHRvIENhbmFkaWFuIHBvc3RhbCBjb2RlIHN0YW5kYXJkIChtaW51cyB0aGUgc3BhY2UpXG5cdFx0XHRpZiAocmVnZXgudGVzdChwb3N0YWwpKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBGb3JtYXQgcG9zdGFsIGNvZGUgdG8gQ2FuYWRpYW4gc3RhbmRhcmRcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8uYWRkcmVzcy5wb3N0YWwgPSBwb3N0YWwuc3Vic3RyaW5nKDAsIDMpICsgXCIgXCIgKyBwb3N0YWwuc3Vic3RyaW5nKDMpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1lbHNlIHtcblx0XHRcdFx0YWxlcnQoXCJJbnZhbGlkL0luY29tcGxldGUgUG9zdGFsIENvZGVcIik7IC8vIFRPRE86IERpc3BsYXkgcHJvcGVyIGVycm9yIG1lc3NhZ2Vcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvL2NoZWNrIGVtYWlsXG5cdFx0Y29udHJvbGxlci5jaGVja0VtYWlsID0gZnVuY3Rpb24gY2hlY2tFbWFpbCgpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmVtYWlsID09IG51bGwgfHwgY29udHJvbGxlci5wYWdlLmRlbW8uZW1haWwgPT0gXCJcIikgcmV0dXJuIHRydWU7XG5cblx0XHRcdHZhciByZWdleCA9IC9eW15AXStAW15AXSskLztcblx0XHRcdGlmIChyZWdleC50ZXN0KGNvbnRyb2xsZXIucGFnZS5kZW1vLmVtYWlsKSlcblx0XHRcdHtcblx0XHRcdFx0dmFyIGVtYWlsID0gY29udHJvbGxlci5wYWdlLmRlbW8uZW1haWwuc3BsaXQoXCJAXCIpO1xuXG5cdFx0XHRcdHJlZ2V4ID0gL15bISMlJic9YH5cXHt9XFwtXFwkXFwqXFwrXFwvXFw/XFxeXFx8XFx3XSsoXFwuWyEjJSYnPWB+XFx7fVxcLVxcJFxcKlxcK1xcL1xcP1xcXlxcfFxcd10rKSokLztcblx0XHRcdFx0aWYgKHJlZ2V4LnRlc3QoZW1haWxbMF0pKVxuXHRcdFx0XHR7IC8vdGVzdCBlbWFpbCBsb2NhbCBhZGRyZXNzIHBhcnRcblxuXHRcdFx0XHRcdHJlZ2V4ID0gL15bXlxcV19dKygoW15cXFdfXXwtKStbXlxcV19dKykqKFxcLlteXFxXX10rKChbXlxcV19dfC0pK1teXFxXX10rKSopKlxcLlteXFxXX117MiwzfSQvO1xuXHRcdFx0XHRcdGlmIChyZWdleC50ZXN0KGVtYWlsWzFdKSkgcmV0dXJuIHRydWU7IC8vdGVzdCBlbWFpbCBhZGRyZXNzIGRvbWFpbiBwYXJ0XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGFsZXJ0KFwiSW52YWxpZCBlbWFpbCBhZGRyZXNzXCIpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vY2hlY2sgQ2hhcnQgTm8gKGxlbmd0aClcblx0XHRjb250cm9sbGVyLmNoZWNrQ2hhcnRObyA9IGZ1bmN0aW9uIGNoZWNrQ2hhcnRObygpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmNoYXJ0Tm8gPT0gbnVsbCB8fCBjb250cm9sbGVyLnBhZ2UuZGVtby5jaGFydE5vID09IFwiXCIpXG5cdFx0XHR7XG5cdFx0XHRcdGNoYXJ0Tm8wID0gY29udHJvbGxlci5wYWdlLmRlbW8uY2hhcnRObztcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmNoYXJ0Tm8ubGVuZ3RoID4gMTApIGNvbnRyb2xsZXIucGFnZS5kZW1vLmNoYXJ0Tm8gPSBjaGFydE5vMDtcblx0XHRcdGVsc2UgY2hhcnRObzAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5jaGFydE5vO1xuXHRcdH1cblxuXHRcdC8vY2hlY2sgQ3l0b2xvZ3kgTnVtYmVyXG5cdFx0Y29udHJvbGxlci5jaGVja0N5dG9OdW0gPSBmdW5jdGlvbiBjaGVja0N5dG9OdW0oKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JDeXRvbE51bSA9PSBudWxsIHx8IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckN5dG9sTnVtID09IFwiXCIpXG5cdFx0XHR7XG5cdFx0XHRcdGN5dG9sTnVtMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckN5dG9sTnVtO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWlzTnVtYmVyKGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckN5dG9sTnVtKSkgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyQ3l0b2xOdW0gPSBjeXRvbE51bTA7XG5cdFx0XHRlbHNlIGN5dG9sTnVtMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckN5dG9sTnVtO1xuXHRcdH07XG5cblx0XHQvL2NoZWNrIFJlZmVycmFsIERvY3RvciBOb1xuXHRcdGNvbnRyb2xsZXIuY2hlY2tSZWZlcnJhbERvY05vID0gZnVuY3Rpb24gY2hlY2tSZWZlcnJhbERvY05vKClcblx0XHR7XG5cdFx0XHR2YXIgaXNWYWxpZCA9IGNvbnRyb2xsZXIudmFsaWRhdGVEb2NObyhjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JSZWZlcnJhbERvY05vLCB0cnVlKTtcblx0XHRcdGlmIChpc1ZhbGlkKVxuXHRcdFx0XHRyZWZlcnJhbERvY05vMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclJlZmVycmFsRG9jTm87XG5cdFx0XHRlbHNlXG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclJlZmVycmFsRG9jTm8gPSByZWZlcnJhbERvY05vMDtcblx0XHR9O1xuXG5cdFx0Ly9jaGVjayBGYW1pbHkgRG9jdG9yIE5vXG5cdFx0Y29udHJvbGxlci5jaGVja0ZhbWlseURvY05vID0gZnVuY3Rpb24gY2hlY2tGYW1pbHlEb2NObygpXG5cdFx0e1xuXHRcdFx0dmFyIGlzVmFsaWQgPSBjb250cm9sbGVyLnZhbGlkYXRlRG9jTm8oY29udHJvbGxlci5wYWdlLmRlbW8uc2NyRmFtaWx5RG9jTm8sIHRydWUpO1xuXHRcdFx0aWYgKGlzVmFsaWQpXG5cdFx0XHRcdGZhbWlseURvY05vMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckZhbWlseURvY05vO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JGYW1pbHlEb2NObyA9IGZhbWlseURvY05vMDtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci52YWxpZGF0ZURvY05vID0gZnVuY3Rpb24gdmFsaWRhdGVEb2NObyhkb2NObywgcXVpZXQpXG5cdFx0e1xuXHRcdFx0aWYgKGRvY05vID09IG51bGwgfHwgZG9jTm8gPT09IFwiXCIgfHwgKGlzTnVtYmVyKGRvY05vKSAmJiBkb2NOby5sZW5ndGggPCAxMCkpXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0XHRpZiAoIXF1aWV0KVxuXHRcdFx0XHRhbGVydChcIkludmFsaWQgRG9jdG9yIE51bWJlclwiKTtcblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cblx0XHQvL2NoZWNrIFNJTlxuXHRcdGNvbnRyb2xsZXIuY2hlY2tTaW4gPSBmdW5jdGlvbiBjaGVja1NpbigpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLnNpbiA9PSBudWxsIHx8IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNpbiA9PSBcIlwiKVxuXHRcdFx0e1xuXHRcdFx0XHRzaW4wID0gY29udHJvbGxlci5wYWdlLmRlbW8uc2luO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHZhciBzaW4gPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zaW4ucmVwbGFjZSgvXFxzL2csIFwiXCIpO1xuXHRcdFx0aWYgKCFpc051bWJlcihzaW4pIHx8IHNpbi5sZW5ndGggPiA5KVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5zaW4gPSBzaW4wO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoc2luLmxlbmd0aCA+IDYpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5zaW4gPSBzaW4uc3Vic3RyaW5nKDAsIDMpICsgXCIgXCIgKyBzaW4uc3Vic3RyaW5nKDMsIDYpICsgXCIgXCIgKyBzaW4uc3Vic3RyaW5nKDYpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKHNpbi5sZW5ndGggPiAzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8uc2luID0gc2luLnN1YnN0cmluZygwLCAzKSArIFwiIFwiICsgc2luLnN1YnN0cmluZygzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzaW4wID0gY29udHJvbGxlci5wYWdlLmRlbW8uc2luO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnRyb2xsZXIudmFsaWRhdGVTaW4gPSBmdW5jdGlvbiB2YWxpZGF0ZVNpbigpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLnNpbiA9PSBudWxsIHx8IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNpbiA9PSBcIlwiKSByZXR1cm4gdHJ1ZTtcblxuXHRcdFx0dmFyIHNpbiA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNpbi5yZXBsYWNlKC9cXHMvZywgXCJcIik7XG5cdFx0XHRpZiAoaXNOdW1iZXIoc2luKSAmJiBzaW4ubGVuZ3RoID09IDkpXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBzaW5OdW1iZXIgPSAwO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNpbi5sZW5ndGg7IGkrKylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciBuID0gTnVtYmVyKHNpbi5jaGFyQXQoaSkpICogKGkgJSAyICsgMSk7XG5cdFx0XHRcdFx0c2luTnVtYmVyICs9IG4gJSAxMCArIE1hdGguZmxvb3IobiAvIDEwKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoc2luTnVtYmVyICUgMTAgPT0gMCkgcmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRhbGVydChcIkludmFsaWQgU0lOICNcIik7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly9wcmV2ZW50IG1hbnVhbCBpbnB1dCBkYXRlc1xuXHRcdGNvbnRyb2xsZXIucHJldmVudE1hbnVhbEVmZkRhdGUgPSBmdW5jdGlvbiBwcmV2ZW50TWFudWFsRWZmRGF0ZSgpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmVmZkRhdGUgPT0gbnVsbCkgY29udHJvbGxlci5wYWdlLmRlbW8uZWZmRGF0ZSA9IGVmZkRhdGUwO1xuXHRcdFx0ZWxzZSBlZmZEYXRlMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLmVmZkRhdGU7XG5cdFx0fVxuXHRcdGNvbnRyb2xsZXIucHJldmVudE1hbnVhbEhjUmVuZXdEYXRlID0gZnVuY3Rpb24gcHJldmVudE1hbnVhbEhjUmVuZXdEYXRlKClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uaGNSZW5ld0RhdGUgPT0gbnVsbCkgY29udHJvbGxlci5wYWdlLmRlbW8uaGNSZW5ld0RhdGUgPSBoY1JlbmV3RGF0ZTA7XG5cdFx0XHRlbHNlIGhjUmVuZXdEYXRlMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLmhjUmVuZXdEYXRlO1xuXHRcdH1cblx0XHRjb250cm9sbGVyLnByZXZlbnRNYW51YWxSb3N0ZXJEYXRlID0gZnVuY3Rpb24gcHJldmVudE1hbnVhbFJvc3RlckRhdGUoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5yb3N0ZXJEYXRlID09IG51bGwpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnJvc3RlckRhdGUgPSByb3N0ZXJEYXRlMDtcblx0XHRcdGVsc2Ugcm9zdGVyRGF0ZTAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5yb3N0ZXJEYXRlO1xuXHRcdH1cblx0XHRjb250cm9sbGVyLnByZXZlbnRNYW51YWxSb3N0ZXJUZXJtaW5hdGlvbkRhdGUgPSBmdW5jdGlvbiBwcmV2ZW50TWFudWFsUm9zdGVyVGVybWluYXRpb25EYXRlKClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmRlbW8ucm9zdGVyVGVybWluYXRpb25EYXRlID09IG51bGwpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnJvc3RlclRlcm1pbmF0aW9uRGF0ZSA9IHJvc3RlclRlcm1pbmF0aW9uRGF0ZTA7XG5cdFx0XHRlbHNlIHJvc3RlclRlcm1pbmF0aW9uRGF0ZTAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5yb3N0ZXJUZXJtaW5hdGlvbkRhdGU7XG5cdFx0fVxuXHRcdGNvbnRyb2xsZXIucHJldmVudE1hbnVhbFBhdGllbnRTdGF0dXNEYXRlID0gZnVuY3Rpb24gcHJldmVudE1hbnVhbFBhdGllbnRTdGF0dXNEYXRlKClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmRlbW8ucGF0aWVudFN0YXR1c0RhdGUgPT0gbnVsbCkgY29udHJvbGxlci5wYWdlLmRlbW8ucGF0aWVudFN0YXR1c0RhdGUgPSBwYXRpZW50U3RhdHVzRGF0ZTA7XG5cdFx0XHRlbHNlIHBhdGllbnRTdGF0dXNEYXRlMCA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnBhdGllbnRTdGF0dXNEYXRlO1xuXHRcdH1cblx0XHRjb250cm9sbGVyLnByZXZlbnRNYW51YWxEYXRlSm9pbmVkID0gZnVuY3Rpb24gcHJldmVudE1hbnVhbERhdGVKb2luZWQoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5kYXRlSm9pbmVkID09IG51bGwpIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRhdGVKb2luZWQgPSBkYXRlSm9pbmVkMDtcblx0XHRcdGVsc2UgZGF0ZUpvaW5lZDAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5kYXRlSm9pbmVkO1xuXHRcdH1cblx0XHRjb250cm9sbGVyLnByZXZlbnRNYW51YWxFbmREYXRlID0gZnVuY3Rpb24gcHJldmVudE1hbnVhbEVuZERhdGUoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5lbmREYXRlID09IG51bGwpIGNvbnRyb2xsZXIucGFnZS5kZW1vLmVuZERhdGUgPSBlbmREYXRlMDtcblx0XHRcdGVsc2UgZW5kRGF0ZTAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5lbmREYXRlO1xuXHRcdH1cblx0XHRjb250cm9sbGVyLnByZXZlbnRNYW51YWxPbldhaXRpbmdMaXN0U2luY2VEYXRlID0gZnVuY3Rpb24gcHJldmVudE1hbnVhbE9uV2FpdGluZ0xpc3RTaW5jZURhdGUoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5vbldhaXRpbmdMaXN0U2luY2VEYXRlID09IG51bGwpIGNvbnRyb2xsZXIucGFnZS5kZW1vLm9uV2FpdGluZ0xpc3RTaW5jZURhdGUgPSBvbldhaXRpbmdMaXN0U2luY2VEYXRlMDtcblx0XHRcdGVsc2Ugb25XYWl0aW5nTGlzdFNpbmNlRGF0ZTAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5vbldhaXRpbmdMaXN0U2luY2VEYXRlO1xuXHRcdH1cblx0XHRjb250cm9sbGVyLnByZXZlbnRNYW51YWxQYXBlckNoYXJ0QXJjaGl2ZWREYXRlID0gZnVuY3Rpb24gcHJldmVudE1hbnVhbFBhcGVyQ2hhcnRBcmNoaXZlZERhdGUoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JQYXBlckNoYXJ0QXJjaGl2ZWREYXRlID09IG51bGwpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclBhcGVyQ2hhcnRBcmNoaXZlZERhdGUgPSBwYXBlckNoYXJ0QXJjaGl2ZWREYXRlMDtcblx0XHRcdGVsc2UgcGFwZXJDaGFydEFyY2hpdmVkRGF0ZTAgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JQYXBlckNoYXJ0QXJjaGl2ZWREYXRlO1xuXHRcdH1cblxuXHRcdC8vc2hvdy9oaWRlIGl0ZW1zXG5cdFx0Ly8gVE9ETzogRklHVVJFIE9VVCBCRVRURVIgV0FZIFRPIFNZTkNIUk9OSVpFIFRISVMgV0lUSCBERU1PR1JBUEhJQyBMT0FESU5HXG5cdFx0Y29udHJvbGxlci5pc1Jvc3RlclRlcm1pbmF0ZWQgPSBmdW5jdGlvbiBpc1Jvc3RlclRlcm1pbmF0ZWQoKVxuXHRcdHtcblx0XHRcdGlmKGNvbnRyb2xsZXIucGFnZS5kZW1vICE9PSBudWxsICYmIGNvbnRyb2xsZXIucGFnZS5kZW1vICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdHJldHVybiAoY29udHJvbGxlci5wYWdlLmRlbW8ucm9zdGVyU3RhdHVzID09PSBcIlRFXCIpO1xuXG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXIuc2hvd1JlZmVycmFsRG9jTGlzdCA9IGZ1bmN0aW9uIHNob3dSZWZlcnJhbERvY0xpc3QoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5zaG93UmVmZXJyYWxEb2NMaXN0ID0gIWNvbnRyb2xsZXIucGFnZS5zaG93UmVmZXJyYWxEb2NMaXN0O1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNlYXJjaFJlZmVycmFsRG9jc05hbWUgPSBmdW5jdGlvbiBzZWFyY2hSZWZlcnJhbERvY3NOYW1lKHNlYXJjaE5hbWUpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIGNvbnRyb2xsZXIuc2VhcmNoUmVmZXJyYWxEb2NzKHNlYXJjaE5hbWUsIG51bGwpO1xuXHRcdH07XG5cdFx0Y29udHJvbGxlci5zZWFyY2hSZWZlcnJhbERvY3NSZWZObyA9IGZ1bmN0aW9uIHNlYXJjaFJlZmVycmFsRG9jc1JlZk5vKHNlYXJjaFJlZk5vKVxuXHRcdHtcblx0XHRcdHJldHVybiBjb250cm9sbGVyLnNlYXJjaFJlZmVycmFsRG9jcyhudWxsLCBzZWFyY2hSZWZObyk7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLnNlYXJjaFJlZmVycmFsRG9jcyA9IGZ1bmN0aW9uIHNlYXJjaFJlZmVycmFsRG9jcyhzZWFyY2hOYW1lLCBzZWFyY2hSZWZObylcblx0XHR7XG5cdFx0XHRyZXR1cm4gcmVmZXJyYWxEb2N0b3JzU2VydmljZS5zZWFyY2hSZWZlcnJhbERvY3RvcnMoc2VhcmNoTmFtZSwgc2VhcmNoUmVmTm8sIDEsIDEwKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpIHtcblxuXHRcdFx0XHRcdHZhciByZWZlcnJhbERvY3RvcnMgPSBuZXcgQXJyYXkocmVzdWx0cy5sZW5ndGgpO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0cy5sZW5ndGg7IGkrKylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR2YXIgZGlzcGxheU5hbWUgPSByZXN1bHRzW2ldLmxhc3ROYW1lICsgJywgJyArIHJlc3VsdHNbaV0uZmlyc3ROYW1lO1xuXHRcdFx0XHRcdFx0cmVmZXJyYWxEb2N0b3JzW2ldID0ge1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogZGlzcGxheU5hbWUsXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGRpc3BsYXlOYW1lLFxuXHRcdFx0XHRcdFx0XHRyZWZlcnJhbE5vOiByZXN1bHRzW2ldLnJlZmVycmFsTm9cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRpZiAocmVzdWx0c1tpXS5zcGVjaWFsdHlUeXBlICE9IG51bGwgJiYgcmVzdWx0c1tpXS5zcGVjaWFsdHlUeXBlICE9IFwiXCIpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHJlZmVycmFsRG9jdG9yc1tpXS5sYWJlbCArPSBcIiBbXCIgKyByZXN1bHRzW2ldLnNwZWNpYWx0eVR5cGUgKyBcIl1cIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlZmVycmFsRG9jdG9ycztcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZmFpbHVyZShlcnJvcnMpIHtcblx0XHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLmNob29zZVJlZmVycmFsRG9jID0gZnVuY3Rpb24gY2hvb3NlUmVmZXJyYWxEb2MoaXRlbSwgbW9kZWwsIGxhYmVsKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclJlZmVycmFsRG9jTm8gPSBpdGVtLnJlZmVycmFsTm87XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JSZWZlcnJhbERvYyA9IGl0ZW0ubmFtZTtcblx0XHRcdGNvbnRyb2xsZXIuY2hlY2tSZWZlcnJhbERvY05vKCk7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLmNob29zZUZhbWlseURvYyA9IGZ1bmN0aW9uIGNob29zZUZhbWlseURvYyhpdGVtLCBtb2RlbCwgbGFiZWwpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8uc2NyRmFtaWx5RG9jTm8gPSBpdGVtLnJlZmVycmFsTm87XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JGYW1pbHlEb2MgPSBpdGVtLm5hbWU7XG5cdFx0XHRjb250cm9sbGVyLmNoZWNrRmFtaWx5RG9jTm8oKTtcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXIuc2hvd0FkZE5ld1Jvc3RlclN0YXR1cyA9IGZ1bmN0aW9uIHNob3dBZGROZXdSb3N0ZXJTdGF0dXMoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5zaG93QWRkTmV3Um9zdGVyU3RhdHVzID0gIWNvbnRyb2xsZXIucGFnZS5zaG93QWRkTmV3Um9zdGVyU3RhdHVzO1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLm5ld1Jvc3RlclN0YXR1cyA9IG51bGw7XG5cdFx0fTtcblx0XHRjb250cm9sbGVyLnNob3dBZGROZXdQYXRpZW50U3RhdHVzID0gZnVuY3Rpb24gc2hvd0FkZE5ld1BhdGllbnRTdGF0dXMoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5zaG93QWRkTmV3UGF0aWVudFN0YXR1cyA9ICFjb250cm9sbGVyLnBhZ2Uuc2hvd0FkZE5ld1BhdGllbnRTdGF0dXM7XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UubmV3UGF0aWVudFN0YXR1cyA9IG51bGw7XG5cdFx0fTtcblxuXHRcdC8vYWRkIG5ldyBSb3N0ZXIgU3RhdHVzXG5cdFx0Y29udHJvbGxlci5hZGROZXdSb3N0ZXJTdGF0dXMgPSBmdW5jdGlvbiBhZGROZXdSb3N0ZXJTdGF0dXMoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UubmV3Um9zdGVyU3RhdHVzICE9IG51bGwgJiYgY29udHJvbGxlci5wYWdlLm5ld1Jvc3RlclN0YXR1cyAhPSBcIlwiKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uucm9zdGVyU3RhdHVzTGlzdC5wdXNoKFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0XCJ2YWx1ZVwiOiBjb250cm9sbGVyLnBhZ2UubmV3Um9zdGVyU3RhdHVzLFxuXHRcdFx0XHRcdFwibGFiZWxcIjogY29udHJvbGxlci5wYWdlLm5ld1Jvc3RlclN0YXR1c1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8ucm9zdGVyU3RhdHVzID0gY29udHJvbGxlci5wYWdlLm5ld1Jvc3RlclN0YXR1cztcblx0XHRcdH1cblx0XHRcdGNvbnRyb2xsZXIuc2hvd0FkZE5ld1Jvc3RlclN0YXR1cygpO1xuXHRcdH1cblxuXHRcdC8vYWRkIG5ldyBQYXRpZW50IFN0YXR1c1xuXHRcdGNvbnRyb2xsZXIuYWRkTmV3UGF0aWVudFN0YXR1cyA9IGZ1bmN0aW9uIGFkZE5ld1BhdGllbnRTdGF0dXMoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UubmV3UGF0aWVudFN0YXR1cyAhPSBudWxsICYmIGNvbnRyb2xsZXIucGFnZS5uZXdQYXRpZW50U3RhdHVzICE9IFwiXCIpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5wYXRpZW50U3RhdHVzTGlzdC5wdXNoKFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0XCJ2YWx1ZVwiOiBjb250cm9sbGVyLnBhZ2UubmV3UGF0aWVudFN0YXR1cyxcblx0XHRcdFx0XHRcImxhYmVsXCI6IGNvbnRyb2xsZXIucGFnZS5uZXdQYXRpZW50U3RhdHVzXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5wYXRpZW50U3RhdHVzID0gY29udHJvbGxlci5wYWdlLm5ld1BhdGllbnRTdGF0dXM7XG5cdFx0XHR9XG5cdFx0XHRjb250cm9sbGVyLnNob3dBZGROZXdQYXRpZW50U3RhdHVzKCk7XG5cdFx0fVxuXG5cdFx0Ly9jaGVjayBwaG9uZSBudW1iZXJzXG5cdFx0Y29udHJvbGxlci5jaGVja1Bob25lID0gZnVuY3Rpb24gY2hlY2tQaG9uZSh0eXBlKVxuXHRcdHtcblx0XHRcdGlmICh0eXBlID09IFwiQ1wiKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoaW52YWxpZFBob25lTnVtYmVyKGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckNlbGxQaG9uZSkpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckNlbGxQaG9uZSA9IHBob25lTnVtW1wiQ1wiXTtcblx0XHRcdFx0ZWxzZSBwaG9uZU51bVtcIkNcIl0gPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JDZWxsUGhvbmU7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmICh0eXBlID09IFwiSFwiKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoaW52YWxpZFBob25lTnVtYmVyKGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckhvbWVQaG9uZSkpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckhvbWVQaG9uZSA9IHBob25lTnVtW1wiSFwiXTtcblx0XHRcdFx0ZWxzZSBwaG9uZU51bVtcIkhcIl0gPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JIb21lUGhvbmU7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmICh0eXBlID09IFwiV1wiKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoaW52YWxpZFBob25lTnVtYmVyKGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjcldvcmtQaG9uZSkpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjcldvcmtQaG9uZSA9IHBob25lTnVtW1wiV1wiXTtcblx0XHRcdFx0ZWxzZSBwaG9uZU51bVtcIldcIl0gPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JXb3JrUGhvbmU7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmICh0eXBlID09IFwiSFhcIiAmJiBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JIUGhvbmVFeHQgIT0gbnVsbCAmJiBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JIUGhvbmVFeHQgIT0gXCJcIilcblx0XHRcdHtcblx0XHRcdFx0aWYgKCFpc051bWJlcihjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JIUGhvbmVFeHQpKSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JIUGhvbmVFeHQgPSBwaG9uZU51bVtcIkhYXCJdO1xuXHRcdFx0XHRlbHNlIHBob25lTnVtW1wiSFhcIl0gPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JIUGhvbmVFeHQ7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmICh0eXBlID09IFwiV1hcIiAmJiBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JXUGhvbmVFeHQgIT0gbnVsbCAmJiBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JXUGhvbmVFeHQgIT0gXCJcIilcblx0XHRcdHtcblx0XHRcdFx0aWYgKCFpc051bWJlcihjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JXUGhvbmVFeHQpKSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JXUGhvbmVFeHQgPSBwaG9uZU51bVtcIldYXCJdO1xuXHRcdFx0XHRlbHNlIHBob25lTnVtW1wiV1hcIl0gPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JXUGhvbmVFeHQ7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9zZXQgcHJlZmVycmVkIGNvbnRhY3QgcGhvbmUgbnVtYmVyXG5cdFx0Y29udHJvbGxlci5zZXRQcmVmZXJyZWRQaG9uZSA9IGZ1bmN0aW9uIHNldFByZWZlcnJlZFBob25lKClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuY2VsbFBob25lUHJlZmVycmVkTXNnID0gZGVmUGhUaXRsZTtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5jZWxsUGhvbmVQcmVmZXJyZWRDb2xvciA9IFwiXCI7XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuaG9tZVBob25lUHJlZmVycmVkTXNnID0gZGVmUGhUaXRsZTtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5ob21lUGhvbmVQcmVmZXJyZWRDb2xvciA9IFwiXCI7XG5cdFx0XHRjb250cm9sbGVyLnBhZ2Uud29ya1Bob25lUHJlZmVycmVkTXNnID0gZGVmUGhUaXRsZTtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS53b3JrUGhvbmVQcmVmZXJyZWRDb2xvciA9IFwiXCI7XG5cblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JQcmVmZXJyZWRQaG9uZSA9PSBcIkNcIilcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnByZWZlcnJlZFBob25lTnVtYmVyID0gY29udHJvbGxlci5wYWdlLmRlbW8uc2NyQ2VsbFBob25lO1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuY2VsbFBob25lUHJlZmVycmVkTXNnID0gcHJlZlBoVGl0bGU7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5jZWxsUGhvbmVQcmVmZXJyZWRDb2xvciA9IGNvbG9yQXR0bjtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclByZWZlcnJlZFBob25lID09IFwiSFwiKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UucHJlZmVycmVkUGhvbmVOdW1iZXIgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JIb21lUGhvbmU7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5ob21lUGhvbmVQcmVmZXJyZWRNc2cgPSBwcmVmUGhUaXRsZTtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmhvbWVQaG9uZVByZWZlcnJlZENvbG9yID0gY29sb3JBdHRuO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uc2NyUHJlZmVycmVkUGhvbmUgPT0gXCJXXCIpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5wcmVmZXJyZWRQaG9uZU51bWJlciA9IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjcldvcmtQaG9uZTtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLndvcmtQaG9uZVByZWZlcnJlZE1zZyA9IHByZWZQaFRpdGxlO1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uud29ya1Bob25lUHJlZmVycmVkQ29sb3IgPSBjb2xvckF0dG47XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9kaXNhYmxlIHNldC1wcmVmZXJyZWQgaWYgcGhvbmUgbnVtYmVyIGVtcHR5XG5cdFx0Y29udHJvbGxlci5pc1Bob25lVm9pZCA9IGZ1bmN0aW9uIGlzUGhvbmVWb2lkKHBob25lKVxuXHRcdHtcblx0XHRcdHJldHVybiAocGhvbmUgPT0gbnVsbCB8fCBwaG9uZSA9PSBcIlwiKTtcblx0XHR9XG5cblx0XHQvL3Nob3cgZW5yb2xsbWVudCBoaXN0b3J5IChyb3N0ZXIgc3RhdXMgaGlzdG9yeSlcblx0XHRjb250cm9sbGVyLnNob3dFbnJvbGxtZW50SGlzdG9yeSA9IGZ1bmN0aW9uIHNob3dFbnJvbGxtZW50SGlzdG9yeSgpXG5cdFx0e1xuXHRcdFx0dmFyIHVybCA9IFwiLi4vZGVtb2dyYXBoaWMvRW5yb2xsbWVudEhpc3RvcnkuanNwP2RlbW9ncmFwaGljTm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0d2luZG93Lm9wZW4odXJsLCBcImVucm9sbG1lbnRIaXN0b3J5XCIsIFwid2lkdGg9NjUwLCBoZWlnaHQ9MTAwMFwiKTtcblx0XHR9XG5cblx0XHQvL3VwbG9hZCBwaG90b1xuXHRcdGNvbnRyb2xsZXIubGF1bmNoUGhvdG8gPSBmdW5jdGlvbiBsYXVuY2hQaG90bygpXG5cdFx0e1xuXHRcdFx0dmFyIHVybCA9IFwiLi4vY2FzZW1nbXQvdXBsb2FkaW1hZ2UuanNwP2RlbW9ncmFwaGljTm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0d2luZG93Lm9wZW4odXJsLCBcInVwbG9hZFdpblwiLCBcIndpZHRoPTUwMCwgaGVpZ2h0PTMwMFwiKTtcblx0XHR9XG5cblx0XHQvL21hbmFnZSBjb250YWN0c1xuXHRcdGNvbnRyb2xsZXIubWFuYWdlQ29udGFjdHMgPSBmdW5jdGlvbiBtYW5hZ2VDb250YWN0cygpXG5cdFx0e1xuXHRcdFx0dmFyIGRpc2NhcmQgPSB0cnVlO1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kYXRhQ2hhbmdlZCA+IDApXG5cdFx0XHR7XG5cdFx0XHRcdGRpc2NhcmQgPSBjb25maXJtKFwiWW91IG1heSBoYXZlIHVuc2F2ZWQgZGF0YS4gQXJlIHlvdSBzdXJlIHRvIGxlYXZlP1wiKTtcblx0XHRcdH1cblx0XHRcdGlmIChkaXNjYXJkKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgdXJsID0gXCIuLi9kZW1vZ3JhcGhpYy9Db250YWN0LmRvP21ldGhvZD1tYW5hZ2UmZGVtb2dyYXBoaWNfbm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0XHR3aW5kb3cub3Blbih1cmwsIFwiTWFuYWdlQ29udGFjdHNcIiwgXCJ3aWR0aD05NjAsIGhlaWdodD03MDBcIik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9wcmludCBidXR0b25zXG5cdFx0Y29udHJvbGxlci5wcmludExhYmVsID0gZnVuY3Rpb24gcHJpbnRMYWJlbChsYWJlbClcblx0XHR7XG5cdFx0XHR2YXIgdXJsID0gbnVsbDtcblx0XHRcdGlmIChsYWJlbCA9PSBcIlBERkxhYmVsXCIpIHVybCA9IFwiLi4vZGVtb2dyYXBoaWMvcHJpbnREZW1vTGFiZWxBY3Rpb24uZG8/YXBwb2ludG1lbnRfbm89bnVsbCZkZW1vZ3JhcGhpY19ubz1cIiArIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRlbW9ncmFwaGljTm87XG5cdFx0XHRlbHNlIGlmIChsYWJlbCA9PSBcIlBERkFkZHJlc3NcIikgdXJsID0gXCIuLi9kZW1vZ3JhcGhpYy9wcmludERlbW9BZGRyZXNzTGFiZWxBY3Rpb24uZG8/ZGVtb2dyYXBoaWNfbm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0ZWxzZSBpZiAobGFiZWwgPT0gXCJQREZDaGFydFwiKSB1cmwgPSBcIi4uL2RlbW9ncmFwaGljL3ByaW50RGVtb0NoYXJ0TGFiZWxBY3Rpb24uZG8/ZGVtb2dyYXBoaWNfbm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0ZWxzZSBpZiAobGFiZWwgPT0gXCJQcmludExhYmVsXCIpIHVybCA9IFwiLi4vZGVtb2dyYXBoaWMvZGVtb2dyYXBoaWNsYWJlbHByaW50c2V0dGluZy5qc3A/ZGVtb2dyYXBoaWNfbm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0ZWxzZSBpZiAobGFiZWwgPT0gXCJDbGllbnRMYWJcIikgdXJsID0gXCIuLi9kZW1vZ3JhcGhpYy9wcmludENsaWVudExhYkxhYmVsQWN0aW9uLmRvP2RlbW9ncmFwaGljX25vPVwiICsgY29udHJvbGxlci5wYWdlLmRlbW8uZGVtb2dyYXBoaWNObztcblx0XHRcdHdpbmRvdy5vcGVuKHVybCwgXCJQcmludFwiLCBcIndpZHRoPTk2MCwgaGVpZ2h0PTcwMFwiKTtcblx0XHR9XG5cblx0XHQvL2ludGVncmF0b3IgYnV0dG9uc1xuXHRcdGNvbnRyb2xsZXIuaW50ZWdyYXRvckRvID0gZnVuY3Rpb24gaW50ZWdyYXRvckRvKGZ1bmMpXG5cdFx0e1xuXHRcdFx0dmFyIHVybCA9IG51bGw7XG5cdFx0XHRpZiAoZnVuYyA9PSBcIlZpZXdDb21tdW5pdHlcIikgdXJsID0gXCIuLi9hZG1pbi92aWV3SW50ZWdyYXRlZENvbW11bml0eS5qc3BcIjtcblx0XHRcdGVsc2UgaWYgKGZ1bmMgPT0gXCJMaW5raW5nXCIpIHVybCA9IFwiLi4vaW50ZWdyYXRvci9tYW5hZ2VfbGlua2VkX2NsaWVudHMuanNwP2RlbW9ncmFwaGljSWQ9XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0ZWxzZSBpZiAoZnVuYyA9PSBcIkNvbXBhcmVcIikgdXJsID0gXCIuLi9kZW1vZ3JhcGhpYy9EaWZmUmVtb3RlRGVtb2dyYXBoaWNzLmpzcD9kZW1vZ3JhcGhpY0lkPVwiICsgY29udHJvbGxlci5wYWdlLmRlbW8uZGVtb2dyYXBoaWNObztcblx0XHRcdGVsc2UgaWYgKGZ1bmMgPT0gXCJVcGRhdGVcIikgdXJsID0gXCIuLi9kZW1vZ3JhcGhpYy9jb3B5TGlua2VkRGVtb2dyYXBoaWNJbmZvQWN0aW9uLmpzcD9kaXNwbGF5bW9kZT1lZGl0JmRib3BlcmF0aW9uPXNlYXJjaF9kZXRhaWwmZGVtb2dyYXBoaWNJZD1cIiArIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRlbW9ncmFwaGljTm8gKyBcIiZkZW1vZ3JhcGhpY19ubz1cIiArIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRlbW9ncmFwaGljTm87XG5cdFx0XHRlbHNlIGlmIChmdW5jID09IFwiU2VuZE5vdGVcIikgdXJsID0gXCIuLi9kZW1vZ3JhcGhpYy9mb2xsb3dVcFNlbGVjdGlvbi5qc3A/ZGVtb2dyYXBoaWNJZD1cIiArIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRlbW9ncmFwaGljTm87XG5cdFx0XHR3aW5kb3cub3Blbih1cmwsIFwiSW50ZWdyYXRvclwiLCBcIndpZHRoPTk2MCwgaGVpZ2h0PTcwMFwiKTtcblx0XHR9XG5cblx0XHQvL01hY1BIUiBidXR0b25zXG5cdFx0Y29udHJvbGxlci5tYWNQSFJEbyA9IGZ1bmN0aW9uIG1hY1BIUkRvKGZ1bmMpXG5cdFx0e1xuXHRcdFx0dmFyIHVybCA9IG51bGw7XG5cdFx0XHRpZiAoZnVuYyA9PSBcIlJlZ2lzdGVyXCIpXG5cdFx0XHR7XG5cdFx0XHRcdGlmICghY29udHJvbGxlci5wYWdlLm1hY1BIUkxvZ2dlZEluKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YWxlcnQoXCJQbGVhc2UgbG9naW4gdG8gUEhSIGZpcnN0XCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHR1cmwgPSBcIi4uL3Boci9pbmRpdm8vUmVnaXN0ZXJJbmRpdm8uanNwP2RlbW9ncmFwaGljTm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZnVuYyA9PSBcIlNlbmRNZXNzYWdlXCIpXG5cdFx0XHR7XG5cdFx0XHRcdHVybCA9IFwiLi4vcGhyL1Bock1lc3NhZ2UuZG8/bWV0aG9kPWNyZWF0ZU1lc3NhZ2UmcHJvdmlkZXJObz1cIiArIHVzZXIucHJvdmlkZXJObyArIFwiJmRlbW9ncmFwaGljTm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZnVuYyA9PSBcIlZpZXdSZWNvcmRcIilcblx0XHRcdHtcblx0XHRcdFx0dXJsID0gXCIuLi9kZW1vZ3JhcGhpYy92aWV3UGhyUmVjb3JkLmRvP2RlbW9ncmFwaGljX25vPVwiICsgY29udHJvbGxlci5wYWdlLmRlbW8uZGVtb2dyYXBoaWNObztcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGZ1bmMgPT0gXCJWZXJpZmljYXRpb25cIilcblx0XHRcdHtcblx0XHRcdFx0dXJsID0gXCIuLi9waHIvUEhSVmVyaWZpY2F0aW9uLmpzcD9kZW1vZ3JhcGhpY19ubz1cIiArIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRlbW9ncmFwaGljTm87XG5cdFx0XHR9XG5cdFx0XHR3aW5kb3cub3Blbih1cmwsIFwiTWFjUEhSXCIsIFwid2lkdGg9OTYwLCBoZWlnaHQ9NzAwXCIpO1xuXHRcdH1cblxuXHRcdC8vYXBwb2ludG1lbnQgYnV0dG9uc1xuXHRcdGNvbnRyb2xsZXIuYXBwb2ludG1lbnREbyA9IGZ1bmN0aW9uIGFwcG9pbnRtZW50RG8oZnVuYylcblx0XHR7XG5cdFx0XHR2YXIgdXJsID0gbnVsbDtcblx0XHRcdGlmIChmdW5jID09IFwiQXBwdEhpc3RvcnlcIikgdXJsID0gXCIuLi9kZW1vZ3JhcGhpYy9kZW1vZ3JhcGhpY2NvbnRyb2wuanNwP2Rpc3BsYXltb2RlPWFwcHRfaGlzdG9yeSZkYm9wZXJhdGlvbj1hcHB0X2hpc3RvcnkmbGltaXQxPTAmbGltaXQyPTI1Jm9yZGVyYnk9YXBwdHRpbWUmZGVtb2dyYXBoaWNfbm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vICsgXCImbGFzdF9uYW1lPVwiICsgZW5jb2RlVVJJKGNvbnRyb2xsZXIucGFnZS5kZW1vLmxhc3ROYW1lKSArIFwiJmZpcnN0X25hbWU9XCIgKyBlbmNvZGVVUkkoY29udHJvbGxlci5wYWdlLmRlbW8uZmlyc3ROYW1lKTtcblx0XHRcdGVsc2UgaWYgKGZ1bmMgPT0gXCJXYWl0aW5nTGlzdFwiKSB1cmwgPSBcIi4uL29zY2FyV2FpdGluZ0xpc3QvU2V0dXBEaXNwbGF5UGF0aWVudFdhaXRpbmdMaXN0LmRvP2RlbW9ncmFwaGljX25vPVwiICsgY29udHJvbGxlci5wYWdlLmRlbW8uZGVtb2dyYXBoaWNObztcblx0XHRcdHdpbmRvdy5vcGVuKHVybCwgXCJBcHBvaW50bWVudFwiLCBcIndpZHRoPTk2MCwgaGVpZ2h0PTcwMFwiKTtcblx0XHR9XG5cblx0XHRjb250cm9sbGVyLmlzQ2xpbmljYWlkQmlsbGluZyA9IGZ1bmN0aW9uIGlzQ2xpbmljYWlkQmlsbGluZygpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIGNvbnRyb2xsZXIucGFnZS5iaWxscmVnaW9uID09IFwiQ0xJTklDQUlEXCI7XG5cdFx0fVxuXG5cdFx0Ly9iaWxsaW5nIGJ1dHRvbnNcblx0XHRjb250cm9sbGVyLmJpbGxpbmdEbyA9IGZ1bmN0aW9uIGJpbGxpbmdEbyhmdW5jKVxuXHRcdHtcblx0XHRcdHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuXHRcdFx0dmFyIHVybCA9IG51bGw7XG5cdFx0XHRpZiAoZnVuYyA9PSBcIkJpbGxpbmdIaXN0b3J5XCIpXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuYmlsbHJlZ2lvbiA9PSBcIkNMSU5JQ0FJRFwiKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dXJsID0gXCIuLi9iaWxsaW5nLmRvP2JpbGxSZWdpb249Q0xJTklDQUlEJmFjdGlvbj1pbnZvaWNlX3JlcG9ydHMmcGF0aWVudF9yZW1vdGVfaWQ9XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKGNvbnRyb2xsZXIucGFnZS5iaWxscmVnaW9uID09IFwiT05cIilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHVybCA9IFwiLi4vYmlsbGluZy9DQS9PTi9iaWxsaW5naGlzdG9yeS5qc3A/ZGVtb2dyYXBoaWNfbm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vICsgXCImbGFzdF9uYW1lPVwiICsgZW5jb2RlVVJJKGNvbnRyb2xsZXIucGFnZS5kZW1vLmxhc3ROYW1lKSArIFwiJmZpcnN0X25hbWU9XCIgKyBlbmNvZGVVUkkoY29udHJvbGxlci5wYWdlLmRlbW8uZmlyc3ROYW1lKSArIFwiJm9yZGVyYnk9YXBwb2ludG1lbnRfZGF0ZSZkaXNwbGF5bW9kZT1hcHB0X2hpc3RvcnkmZGJvcGVyYXRpb249YXBwdF9oaXN0b3J5JmxpbWl0MT0wJmxpbWl0Mj0xMFwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHVybCA9IFwiLi4vYmlsbGluZy9DQS9CQy9iaWxsY29udHJvbGxlci5wYWdlLmpzcD9sYXN0TmFtZT1cIiArIGVuY29kZVVSSShjb250cm9sbGVyLnBhZ2UuZGVtby5sYXN0TmFtZSkgKyBcIiZmaXJzdE5hbWU9XCIgKyBlbmNvZGVVUkkoY29udHJvbGxlci5wYWdlLmRlbW8uZmlyc3ROYW1lKSArIFwiJmZpbHRlclBhdGllbnQ9dHJ1ZSZkZW1vZ3JhcGhpY05vPVwiICsgY29udHJvbGxlci5wYWdlLmRlbW8uZGVtb2dyYXBoaWNObztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZnVuYyA9PSBcIkNyZWF0ZUludm9pY2VcIilcblx0XHRcdHtcblx0XHRcdFx0dXJsID0gXCIuLi9iaWxsaW5nLmRvP2JpbGxSZWdpb249XCIgKyBjb250cm9sbGVyLnBhZ2UuYmlsbHJlZ2lvbiArIFwiJmJpbGxGb3JtPVwiICsgY29udHJvbGxlci5wYWdlLmRlZmF1bHRWaWV3ICsgXCImaG90Y2xpY2s9JmFwcG9pbnRtZW50X25vPTAmZGVtb2dyYXBoaWNfbmFtZT1cIiArIGVuY29kZVVSSShjb250cm9sbGVyLnBhZ2UuZGVtby5sYXN0TmFtZSkgKyBlbmNvZGVVUkkoXCIsXCIpICsgZW5jb2RlVVJJKGNvbnRyb2xsZXIucGFnZS5kZW1vLmZpcnN0TmFtZSkgKyBcIiZkZW1vZ3JhcGhpY19ubz1cIiArIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRlbW9ncmFwaGljTm8gKyBcIiZwcm92aWRlcnZpZXc9XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5wcm92aWRlck5vICsgXCImdXNlcl9ubz1cIiArIHVzZXIucHJvdmlkZXJObyArIFwiJmFwcHRQcm92aWRlcl9ubz1ub25lJmFwcG9pbnRtZW50X2RhdGU9XCIgKyBub3cuZ2V0RnVsbFllYXIgKyBcIi1cIiArIChub3cuZ2V0TW9udGgoKSArIDEpICsgXCItXCIgKyBub3cuZ2V0RGF0ZSgpICsgXCImc3RhcnRfdGltZT0wMDowMDowMCZiTmV3Rm9ybT0xJnN0YXR1cz10XCI7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChmdW5jID09IFwiRmx1QmlsbGluZ1wiKVxuXHRcdFx0e1xuXHRcdFx0XHR1cmwgPSBcIi4uL2JpbGxpbmcvQ0EvT04vc3BlY2lhbHR5QmlsbGluZy9mbHVCaWxsaW5nL2FkZEZsdUJpbGxpbmcuanNwP2Z1bmN0aW9uPWRlbW9ncmFwaGljJmZ1bmN0aW9uaWQ9XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vICsgXCImY3JlYXRvcj1cIiArIHVzZXIucHJvdmlkZXJObyArIFwiJmRlbW9ncmFwaGljX25hbWU9XCIgKyBlbmNvZGVVUkkoY29udHJvbGxlci5wYWdlLmRlbW8ubGFzdE5hbWUpICsgZW5jb2RlVVJJKFwiLFwiKSArIGVuY29kZVVSSShjb250cm9sbGVyLnBhZ2UuZGVtby5maXJzdE5hbWUpICsgXCImaGluPVwiICsgY29udHJvbGxlci5wYWdlLmRlbW8uaGluICsgY29udHJvbGxlci5wYWdlLmRlbW8udmVyICsgXCImZGVtb19zZXg9XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5zZXggKyBcIiZkZW1vX2hjdHlwZT1cIiArIGNvbnRyb2xsZXIucGFnZS5kZW1vLmhjVHlwZSArIFwiJnJkPVwiICsgZW5jb2RlVVJJKGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclJlZmVycmFsRG9jKSArIFwiJnJkb2hpcD1cIiArIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclJlZmVycmFsRG9jTm8gKyBcIiZkb2I9XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JZZWFyICsgY29udHJvbGxlci5wYWdlLmRlbW8uZG9iTW9udGggKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JEYXkgKyBcIiZtcnA9XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5wcm92aWRlck5vO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZnVuYyA9PSBcIkhvc3BpdGFsQmlsbGluZ1wiKVxuXHRcdFx0e1xuXHRcdFx0XHR1cmwgPSBcIi4uL2JpbGxpbmcvQ0EvT04vYmlsbGluZ1Nob3J0Y3V0UGcxLmpzcD9iaWxsUmVnaW9uPVwiICsgY29udHJvbGxlci5wYWdlLmJpbGxyZWdpb24gKyBcIiZiaWxsRm9ybT1cIiArIGVuY29kZVVSSShjb250cm9sbGVyLnBhZ2UuaG9zcGl0YWxWaWV3KSArIFwiJmhvdGNsaWNrPSZhcHBvaW50bWVudF9ubz0wJmRlbW9ncmFwaGljX25hbWU9XCIgKyBlbmNvZGVVUkkoY29udHJvbGxlci5wYWdlLmRlbW8ubGFzdE5hbWUpICsgZW5jb2RlVVJJKFwiLFwiKSArIGVuY29kZVVSSShjb250cm9sbGVyLnBhZ2UuZGVtby5maXJzdE5hbWUpICsgXCImZGVtb2dyYXBoaWNfbm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vICsgXCImcHJvdmlkZXJ2aWV3PVwiICsgY29udHJvbGxlci5wYWdlLmRlbW8ucHJvdmlkZXJObyArIFwiJnVzZXJfbm89XCIgKyB1c2VyLnByb3ZpZGVyTm8gKyBcIiZhcHB0UHJvdmlkZXJfbm89bm9uZSZhcHBvaW50bWVudF9kYXRlPVwiICsgbm93LmdldEZ1bGxZZWFyICsgXCItXCIgKyAobm93LmdldE1vbnRoKCkgKyAxKSArIFwiLVwiICsgbm93LmdldERhdGUoKSArIFwiJnN0YXJ0X3RpbWU9MDA6MDA6MDAmYk5ld0Zvcm09MSZzdGF0dXM9dFwiO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZnVuYyA9PSBcIkFkZEJhdGNoQmlsbGluZ1wiKVxuXHRcdFx0e1xuXHRcdFx0XHR1cmwgPSBcIi4uL2JpbGxpbmcvQ0EvT04vYWRkQmF0Y2hCaWxsaW5nLmpzcD9kZW1vZ3JhcGhpY19ubz1cIiArIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRlbW9ncmFwaGljTm8gKyBcIiZjcmVhdG9yPVwiICsgdXNlci5wcm92aWRlck5vICsgXCImZGVtb2dyYXBoaWNfbmFtZT1cIiArIGVuY29kZVVSSShjb250cm9sbGVyLnBhZ2UuZGVtby5sYXN0TmFtZSkgKyBlbmNvZGVVUkkoXCIsXCIpICsgZW5jb2RlVVJJKGNvbnRyb2xsZXIucGFnZS5kZW1vLmZpcnN0TmFtZSkgKyBcIiZoaW49XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5oaW4gKyBjb250cm9sbGVyLnBhZ2UuZGVtby52ZXIgKyBcIiZkb2I9XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JZZWFyICsgY29udHJvbGxlci5wYWdlLmRlbW8uZG9iTW9udGggKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JEYXk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChmdW5jID09IFwiQWRkSU5SXCIpXG5cdFx0XHR7XG5cdFx0XHRcdHVybCA9IFwiLi4vYmlsbGluZy9DQS9PTi9pbnIvYWRkSU5SYmlsbGluZy5qc3A/ZnVuY3Rpb249ZGVtb2dyYXBoaWMmZnVuY3Rpb25pZD1cIiArIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRlbW9ncmFwaGljTm8gKyBcIiZjcmVhdG9yPVwiICsgdXNlci5wcm92aWRlck5vICsgXCImZGVtb2dyYXBoaWNfbmFtZT1cIiArIGVuY29kZVVSSShjb250cm9sbGVyLnBhZ2UuZGVtby5sYXN0TmFtZSkgKyBlbmNvZGVVUkkoXCIsXCIpICsgZW5jb2RlVVJJKGNvbnRyb2xsZXIucGFnZS5kZW1vLmZpcnN0TmFtZSkgKyBcIiZoaW49XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5oaW4gKyBjb250cm9sbGVyLnBhZ2UuZGVtby52ZXIgKyBcIiZkb2I9XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JZZWFyICsgY29udHJvbGxlci5wYWdlLmRlbW8uZG9iTW9udGggKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JEYXk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChmdW5jID09IFwiQmlsbElOUlwiKVxuXHRcdFx0e1xuXHRcdFx0XHR1cmwgPSBcIi4uL2JpbGxpbmcvQ0EvT04vaW5yL3JlcG9ydElOUi5qc3A/cHJvdmlkZXJfbm89XCIgKyB1c2VyLnByb3ZpZGVyTm87XG5cdFx0XHR9XG5cdFx0XHR3aW5kb3cub3Blbih1cmwsIFwiQmlsbGluZ1wiLCBcIndpZHRoPTk2MCwgaGVpZ2h0PTcwMFwiKTtcblx0XHR9XG5cblx0XHQvL2V4cG9ydCBkZW1vZ3JhcGhpY1xuXHRcdGNvbnRyb2xsZXIuZXhwb3J0RGVtb2dyYXBoaWMgPSBmdW5jdGlvbiBleHBvcnREZW1vZ3JhcGhpYygpXG5cdFx0e1xuXHRcdFx0dmFyIHVybCA9IFwiLi4vZGVtb2dyYXBoaWMvZGVtb2dyYXBoaWNFeHBvcnQuanNwP2RlbW9ncmFwaGljTm89XCIgKyBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0d2luZG93Lm9wZW4odXJsLCBcIkRlbW9ncmFwaGljRXhwb3J0XCIsIFwid2lkdGg9OTYwLCBoZWlnaHQ9NzAwXCIpO1xuXHRcdH1cblxuXHRcdGNvbnRyb2xsZXIuZm9ybWF0RG9jT3V0cHV0ID0gZnVuY3Rpb24gZm9ybWF0RG9jT3V0cHV0KHZhbHVlKVxuXHRcdHtcblx0XHRcdHZhciBudW1iZXIsIG5hbWU7XG5cdFx0XHR2YXIgYmVnaW4gPSB2YWx1ZS5pbmRleE9mKFwiPHJkb2hpcD5cIikgKyBcIjxyZG9oaXA+XCIubGVuZ3RoO1xuXHRcdFx0dmFyIGVuZCA9IHZhbHVlLmluZGV4T2YoXCI8L3Jkb2hpcD5cIik7XG5cdFx0XHRpZiAoZW5kID4gYmVnaW4gJiYgZW5kID49IDAgJiYgYmVnaW4gPj0gMCkgbnVtYmVyID0gdmFsdWUuc3Vic3RyaW5nKGJlZ2luLCBlbmQpO1xuXG5cdFx0XHRiZWdpbiA9IHZhbHVlLmluZGV4T2YoXCI8cmQ+XCIpICsgXCI8cmQ+XCIubGVuZ3RoO1xuXHRcdFx0ZW5kID0gdmFsdWUuaW5kZXhPZihcIjwvcmQ+XCIpO1xuXHRcdFx0aWYgKGVuZCA+IGJlZ2luICYmIGVuZCA+PSAwICYmIGJlZ2luID49IDApIG5hbWUgPSB2YWx1ZS5zdWJzdHJpbmcoYmVnaW4sIGVuZCk7XG5cblx0XHRcdHJldHVybiB7XCJudW1iZXJcIjogbnVtYmVyLCBcIm5hbWVcIjogbmFtZX07XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZm9ybWF0RG9jSW5wdXQgPSBmdW5jdGlvbiBmb3JtYXREb2NJbnB1dChuYW1lLCBudW1iZXIpXG5cdFx0e1xuXHRcdFx0dmFyIGRvY05vID0gXCI8cmRvaGlwPjwvcmRvaGlwPlwiO1xuXHRcdFx0dmFyIGRvYyA9IFwiPHJkPjwvcmQ+XCI7XG5cdFx0XHRpZiAobnVtYmVyICE9IG51bGwgJiYgbnVtYmVyICE9PSBcIlwiKVxuXHRcdFx0e1xuXHRcdFx0XHRkb2NObyA9IFwiPHJkb2hpcD5cIiArIG51bWJlciArIFwiPC9yZG9oaXA+XCI7XG5cdFx0XHR9XG5cdFx0XHRpZiAobmFtZSAhPSBudWxsICYmIG5hbWUgIT09IFwiXCIpXG5cdFx0XHR7XG5cdFx0XHRcdGRvYyA9IFwiPHJkPlwiICsgbmFtZSArIFwiPC9yZD5cIjtcblx0XHRcdH1cblx0XHRcdHJldHVybiBkb2NObyArIGRvYztcblx0XHR9O1xuXG5cdFx0Ly9IQ1ZhbGlkYXRpb24gb24gb3BlbiAmIHNhdmVcblx0XHRjb250cm9sbGVyLnZhbGlkYXRlSENTYXZlID0gZnVuY3Rpb24gdmFsaWRhdGVIQ1NhdmUoZG9TYXZlKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby5oaW4gPT0gbnVsbCB8fCBjb250cm9sbGVyLnBhZ2UuZGVtby5oaW4gPT0gXCJcIilcblx0XHRcdHtcblx0XHRcdFx0aWYgKGRvU2F2ZSkgY29udHJvbGxlci5zYXZlKCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHBhdGllbnREZXRhaWxTdGF0dXNTZXJ2aWNlLmlzVW5pcXVlSEMoY29udHJvbGxlci5wYWdlLmRlbW8uaGluLCBjb250cm9sbGVyLnBhZ2UuZGVtby5kZW1vZ3JhcGhpY05vKS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRpZiAoIXJlc3VsdHMuc3VjY2Vzcylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0YWxlcnQoXCJISU4gaXMgYWxyZWFkeSBpbiB1c2UhXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uaGNUeXBlICE9IFwiT05cIilcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0aWYgKGRvU2F2ZSkgY29udHJvbGxlci5zYXZlKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZGVtby52ZXIgPT0gbnVsbCkgY29udHJvbGxlci5wYWdlLmRlbW8udmVyID0gXCJcIjtcblx0XHRcdFx0XHRcdFx0cGF0aWVudERldGFpbFN0YXR1c1NlcnZpY2UudmFsaWRhdGVIQyhjb250cm9sbGVyLnBhZ2UuZGVtby5oaW4sIGNvbnRyb2xsZXIucGFnZS5kZW1vLnZlcikudGhlbihcblx0XHRcdFx0XHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHJlc3VsdHMudmFsaWQgPT0gbnVsbClcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLkhDVmFsaWRhdGlvbiA9IFwibi9hXCI7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRlbHNlIGlmICghcmVzdWx0cy52YWxpZClcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWxlcnQoXCJIZWFsdGggQ2FyZCBWYWxpZGF0aW9uIGZhaWxlZDogXCIgKyByZXN1bHRzLnJlc3BvbnNlRGVzY3JpcHRpb24gKyBcIiAoXCIgKyByZXN1bHRzLnJlc3BvbnNlQ29kZSArIFwiKVwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZG9TYXZlID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZG9TYXZlKSBjb250cm9sbGVyLnNhdmUoKTtcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0vL1xuXHRcdC8vIHNhdmUgb3BlcmF0aW9ucyAvL1xuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0vL1xuXHRcdGNvbnRyb2xsZXIuc2F2ZSA9IGZ1bmN0aW9uIHNhdmUoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5zYXZpbmcgPSB0cnVlO1xuXG5cdFx0XHQvL2NoZWNrIHJlcXVpcmVkIGZpZWxkc1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmxhc3ROYW1lID09IG51bGwgfHwgY29udHJvbGxlci5wYWdlLmRlbW8ubGFzdE5hbWUgPT0gXCJcIilcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQoXCJMYXN0IE5hbWUgaXMgcmVxdWlyZWRcIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmZpcnN0TmFtZSA9PSBudWxsIHx8IGNvbnRyb2xsZXIucGFnZS5kZW1vLmZpcnN0TmFtZSA9PSBcIlwiKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChcIkZpcnN0IE5hbWUgaXMgcmVxdWlyZWRcIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLnNleCA9PSBudWxsIHx8IGNvbnRyb2xsZXIucGFnZS5kZW1vLnNleCA9PSBcIlwiKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChcIlNleCBpcyByZXF1aXJlZFwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZGF0ZUVtcHR5KGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYlllYXIsIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYk1vbnRoLCBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JEYXkpKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChcIkRhdGUgb2YgQmlydGggaXMgcmVxdWlyZWRcIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly92YWxpZGF0ZSBmaWVsZCBpbnB1dHNcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLmRhdGVPZkJpcnRoID0gYnVpbGREYXRlKGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYlllYXIsIGNvbnRyb2xsZXIucGFnZS5kZW1vLmRvYk1vbnRoLCBjb250cm9sbGVyLnBhZ2UuZGVtby5kb2JEYXkpO1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLmRhdGVPZkJpcnRoID09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGFsZXJ0KFwiSW52YWxpZCBEYXRlIG9mIEJpcnRoXCIpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWNvbnRyb2xsZXIuY2hlY2tQYXRpZW50U3RhdHVzKCkpIHJldHVybjtcblx0XHRcdGlmICghY29udHJvbGxlci5pc1Bvc3RhbENvbXBsZXRlKCkpIHJldHVybjtcblx0XHRcdGlmICghY29udHJvbGxlci52YWxpZGF0ZVNpbigpKSByZXR1cm47XG5cdFx0XHRpZiAoIWNvbnRyb2xsZXIudmFsaWRhdGVEb2NObyhjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JSZWZlcnJhbERvY05vKSkgcmV0dXJuO1xuXHRcdFx0aWYgKCFjb250cm9sbGVyLnZhbGlkYXRlRG9jTm8oY29udHJvbGxlci5wYWdlLmRlbW8uc2NyRmFtaWx5RG9jTm8pKSByZXR1cm47XG5cblx0XHRcdC8vc2F2ZSBub3Rlc1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjck5vdGVzICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLm5vdGVzID0gXCI8dW5vdGVzPlwiICsgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyTm90ZXMgKyBcIjwvdW5vdGVzPlwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3NhdmUgcmVmZXJyYWwgZG9jdG9yIChmYW1pbHlEb2N0b3IpXG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5mYW1pbHlEb2N0b3IgPSBjb250cm9sbGVyLmZvcm1hdERvY0lucHV0KGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclJlZmVycmFsRG9jLCBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JSZWZlcnJhbERvY05vKTtcblxuXHRcdFx0Ly9zYXZlIGZhbWlseSBkb2N0b3IgKGZhbWlseURvY3RvcjIpXG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5mYW1pbHlEb2N0b3IyID0gY29udHJvbGxlci5mb3JtYXREb2NJbnB1dChjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JGYW1pbHlEb2MsIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckZhbWlseURvY05vKTtcblxuXHRcdFx0Ly9zYXZlIHBob25lIG51bWJlcnNcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckRlbW9DZWxsID0gY29udHJvbGxlci5wYWdlLmRlbW8uc2NyQ2VsbFBob25lO1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLmRlbW8ucGhvbmUgPSBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JIb21lUGhvbmU7XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuZGVtby5hbHRlcm5hdGl2ZVBob25lID0gY29udHJvbGxlci5wYWdlLmRlbW8uc2NyV29ya1Bob25lO1xuXG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uc2NyUHJlZmVycmVkUGhvbmUgPT0gXCJDXCIpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckRlbW9DZWxsICs9IFwiKlwiO1xuXHRcdFx0ZWxzZSBpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uc2NyUHJlZmVycmVkUGhvbmUgPT0gXCJIXCIpIGNvbnRyb2xsZXIucGFnZS5kZW1vLnBob25lICs9IFwiKlwiO1xuXHRcdFx0ZWxzZSBpZiAoY29udHJvbGxlci5wYWdlLmRlbW8uc2NyUHJlZmVycmVkUGhvbmUgPT0gXCJXXCIpIGNvbnRyb2xsZXIucGFnZS5kZW1vLmFsdGVybmF0aXZlUGhvbmUgKz0gXCIqXCI7XG5cblx0XHRcdC8vc2F2ZSBleHRyYXNcblx0XHRcdHZhciBuZXdEZW1vRXh0cmFzID0gW107XG5cdFx0XHRuZXdEZW1vRXh0cmFzID0gdXBkYXRlRGVtb0V4dHJhcyhcImRlbW9fY2VsbFwiLCBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JEZW1vQ2VsbCwgcG9zRXh0cmFzLCBjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXMsIG5ld0RlbW9FeHRyYXMpO1xuXHRcdFx0bmV3RGVtb0V4dHJhcyA9IHVwZGF0ZURlbW9FeHRyYXMoXCJhYm9yaWdpbmFsXCIsIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckFib3JpZ2luYWwsIHBvc0V4dHJhcywgY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzLCBuZXdEZW1vRXh0cmFzKTtcblx0XHRcdG5ld0RlbW9FeHRyYXMgPSB1cGRhdGVEZW1vRXh0cmFzKFwiaFBob25lRXh0XCIsIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckhQaG9uZUV4dCwgcG9zRXh0cmFzLCBjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXMsIG5ld0RlbW9FeHRyYXMpO1xuXHRcdFx0bmV3RGVtb0V4dHJhcyA9IHVwZGF0ZURlbW9FeHRyYXMoXCJ3UGhvbmVFeHRcIiwgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyV1Bob25lRXh0LCBwb3NFeHRyYXMsIGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhcywgbmV3RGVtb0V4dHJhcyk7XG5cdFx0XHRuZXdEZW1vRXh0cmFzID0gdXBkYXRlRGVtb0V4dHJhcyhcImN5dG9sTnVtXCIsIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjckN5dG9sTnVtLCBwb3NFeHRyYXMsIGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhcywgbmV3RGVtb0V4dHJhcyk7XG5cdFx0XHRuZXdEZW1vRXh0cmFzID0gdXBkYXRlRGVtb0V4dHJhcyhcInBob25lQ29tbWVudFwiLCBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JQaG9uZUNvbW1lbnQsIHBvc0V4dHJhcywgY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzLCBuZXdEZW1vRXh0cmFzKTtcblx0XHRcdG5ld0RlbW9FeHRyYXMgPSB1cGRhdGVEZW1vRXh0cmFzKFwicGFwZXJfY2hhcnRfYXJjaGl2ZWRcIiwgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyUGFwZXJDaGFydEFyY2hpdmVkLCBwb3NFeHRyYXMsIGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhcywgbmV3RGVtb0V4dHJhcyk7XG5cdFx0XHRuZXdEZW1vRXh0cmFzID0gdXBkYXRlRGVtb0V4dHJhcyhcInBhcGVyX2NoYXJ0X2FyY2hpdmVkX2RhdGVcIiwgY29udHJvbGxlci5wYWdlLmRlbW8uc2NyUGFwZXJDaGFydEFyY2hpdmVkRGF0ZSwgcG9zRXh0cmFzLCBjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXMsIG5ld0RlbW9FeHRyYXMpO1xuXHRcdFx0bmV3RGVtb0V4dHJhcyA9IHVwZGF0ZURlbW9FeHRyYXMoXCJ1c1NpZ25lZFwiLCBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JVc1NpZ25lZCwgcG9zRXh0cmFzLCBjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXMsIG5ld0RlbW9FeHRyYXMpO1xuXHRcdFx0bmV3RGVtb0V4dHJhcyA9IHVwZGF0ZURlbW9FeHRyYXMoXCJwcml2YWN5Q29uc2VudFwiLCBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JQcml2YWN5Q29uc2VudCwgcG9zRXh0cmFzLCBjb250cm9sbGVyLnBhZ2UuZGVtby5leHRyYXMsIG5ld0RlbW9FeHRyYXMpO1xuXHRcdFx0bmV3RGVtb0V4dHJhcyA9IHVwZGF0ZURlbW9FeHRyYXMoXCJpbmZvcm1lZENvbnNlbnRcIiwgY29udHJvbGxlci5wYWdlLmRlbW8uc2NySW5mb3JtZWRDb25zZW50LCBwb3NFeHRyYXMsIGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhcywgbmV3RGVtb0V4dHJhcyk7XG5cdFx0XHRuZXdEZW1vRXh0cmFzID0gdXBkYXRlRGVtb0V4dHJhcyhcInNlY3VyaXR5UXVlc3Rpb24xXCIsIGNvbnRyb2xsZXIucGFnZS5kZW1vLnNjclNlY3VyaXR5UXVlc3Rpb24xLCBwb3NFeHRyYXMsIGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhcywgbmV3RGVtb0V4dHJhcyk7XG5cdFx0XHRuZXdEZW1vRXh0cmFzID0gdXBkYXRlRGVtb0V4dHJhcyhcInNlY3VyaXR5QW5zd2VyMVwiLCBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JTZWN1cml0eUFuc3dlcjEsIHBvc0V4dHJhcywgY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzLCBuZXdEZW1vRXh0cmFzKTtcblx0XHRcdG5ld0RlbW9FeHRyYXMgPSB1cGRhdGVEZW1vRXh0cmFzKFwicnhJbnRlcmFjdGlvbldhcm5pbmdMZXZlbFwiLCBjb250cm9sbGVyLnBhZ2UuZGVtby5zY3JSeEludGVyYWN0aW9uTGV2ZWwsIHBvc0V4dHJhcywgY29udHJvbGxlci5wYWdlLmRlbW8uZXh0cmFzLCBuZXdEZW1vRXh0cmFzKTtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZW1vLmV4dHJhcyA9IG5ld0RlbW9FeHRyYXM7XG5cblx0XHRcdC8vc2F2ZSB0byBkYXRhYmFzZVxuXHRcdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLnVwZGF0ZURlbW9ncmFwaGljKGNvbnRyb2xsZXIucGFnZS5kZW1vKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucmVzZXRFZGl0U3RhdGUoKTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcigpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uuc2F2aW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0YWxlcnQoJ0ZhaWxlZCB0byBzYXZlIGRlbW9ncmFwaGljJyk7XG5cdFx0XHRcdFx0Ly8gVE9ETzogaGFuZGxlIGVycm9yXG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucmVzZXRFZGl0U3RhdGUgPSBmdW5jdGlvbiByZXNldEVkaXRTdGF0ZSgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLnNhdmluZyA9IGZhbHNlO1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLmRhdGFDaGFuZ2VkID0gZmFsc2U7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuaW5pdCgpOyAvLyBJbml0aWFsaXplIHRoZSBjb250cm9sbGVyXG5cdH1cbl0pO1xuXG5cbi8vIE1vdmUgdGhlc2U/XG5mdW5jdGlvbiB1cGRhdGVEZW1vRXh0cmFzKGV4dEtleSwgbmV3VmFsLCBwb3NFeHRyYXMsIG9sZEV4dHJhcywgbmV3RXh0cmFzKVxue1xuXHRpZiAobmV3VmFsID09IG51bGwpIHJldHVybiBuZXdFeHRyYXM7XG5cblx0dmFyIHBvcyA9IHBvc0V4dHJhc1tleHRLZXldO1xuXHRpZiAocG9zICE9IG51bGwgJiYgb2xkRXh0cmFzW3Bvc10gIT0gbnVsbClcblx0eyAvL2V4aXN0aW5nIGV4dFxuXHRcdGlmIChvbGRFeHRyYXNbcG9zXS52YWx1ZSAhPSBuZXdWYWwpXG5cdFx0e1xuXHRcdFx0bmV3RXh0cmFzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdGlkOiBvbGRFeHRyYXNbcG9zXS5pZCxcblx0XHRcdFx0a2V5OiBleHRLZXksXG5cdFx0XHRcdHZhbHVlOiBuZXdWYWwsXG5cdFx0XHRcdGhpZGRlbjogb2xkRXh0cmFzW3Bvc10uaGlkZGVuXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7IC8vbmV3bHkgYWRkZWQgZXh0XG5cdFx0bmV3RXh0cmFzLnB1c2goXG5cdFx0e1xuXHRcdFx0a2V5OiBleHRLZXksXG5cdFx0XHR2YWx1ZTogbmV3VmFsXG5cdFx0fSk7XG5cdH1cblx0cmV0dXJuIG5ld0V4dHJhcztcbn1cblxuZnVuY3Rpb24gYnVpbGREYXRlKHllYXIsIG1vbnRoLCBkYXkpXG57XG5cdGlmIChkYXRlRW1wdHkoeWVhciwgbW9udGgsIGRheSkpIHJldHVybiBcIlwiO1xuXHRpZiAoZGF0ZTNWYWxpZCh5ZWFyLCBtb250aCwgZGF5KSkgcmV0dXJuIHllYXIgKyBcIi1cIiArIG1vbnRoICsgXCItXCIgKyBkYXk7XG5cdHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBjaGVja1llYXIoeWVhcilcbntcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB5ZWFyLmxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0aWYgKCFpc051bWJlcih5ZWFyLmNoYXJBdChpKSkpXG5cdFx0e1xuXHRcdFx0eWVhciA9IHllYXIuc3Vic3RyaW5nKDAsIGkpICsgeWVhci5zdWJzdHJpbmcoaSArIDEpO1xuXHRcdH1cblx0fVxuXHRpZiAoeWVhciAhPSBcIlwiKVxuXHR7XG5cdFx0eWVhciA9IHBhcnNlSW50KHllYXIpLnRvU3RyaW5nKCk7XG5cdFx0aWYgKHllYXIubGVuZ3RoID4gNCkgeWVhciA9IHllYXIuc3Vic3RyaW5nKDAsIDQpO1xuXHRcdGlmICh5ZWFyID09IDApIHllYXIgPSBcIlwiO1xuXHR9XG5cdHJldHVybiB5ZWFyO1xufVxuXG5mdW5jdGlvbiBjaGVja01vbnRoKG1vbnRoKVxue1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IG1vbnRoLmxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0aWYgKCFpc051bWJlcihtb250aC5jaGFyQXQoaSkpKVxuXHRcdHtcblx0XHRcdG1vbnRoID0gbW9udGguc3Vic3RyaW5nKDAsIGkpICsgbW9udGguc3Vic3RyaW5nKGkgKyAxKTtcblx0XHR9XG5cdH1cblx0aWYgKG1vbnRoICE9IFwiXCIpXG5cdHtcblx0XHRpZiAobW9udGgubGVuZ3RoID4gMikgbW9udGggPSBtb250aC5zdWJzdHJpbmcoMCwgMik7XG5cdFx0aWYgKG1vbnRoID4gMTIpIG1vbnRoID0gbW9udGguc3Vic3RyaW5nKDAsIDEpO1xuXHR9XG5cdHJldHVybiBtb250aDtcbn1cblxudmFyIGRheXNPZk1vbnRoID0gWzMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xuXG5mdW5jdGlvbiBjaGVja0RheShkYXksIG1vbnRoLCB5ZWFyKVxue1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRheS5sZW5ndGg7IGkrKylcblx0e1xuXHRcdGlmICghaXNOdW1iZXIoZGF5LmNoYXJBdChpKSkpXG5cdFx0e1xuXHRcdFx0ZGF5ID0gZGF5LnN1YnN0cmluZygwLCBpKSArIGRheS5zdWJzdHJpbmcoaSArIDEpO1xuXHRcdH1cblx0fVxuXHRpZiAoZGF5ICE9IFwiXCIpXG5cdHtcblx0XHRpZiAoZGF5Lmxlbmd0aCA+IDIpIGRheSA9IGRheS5zdWJzdHJpbmcoMCwgMik7XG5cblx0XHRpZiAobW9udGggPT0gbnVsbClcblx0XHR7XG5cdFx0XHRpZiAoZGF5ID4gMzEpIGRheSA9IGRheS5zdWJzdHJpbmcoMCwgMSk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHllYXIgPT0gbnVsbClcblx0XHR7XG5cdFx0XHRpZiAoZGF5ID4gZGF5c09mTW9udGhbbW9udGggLSAxXSkgZGF5LnN1YnN0cmluZygwLCAxKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoIWRhdGUzVmFsaWQoeWVhciwgbW9udGgsIGRheSkpXG5cdFx0e1xuXHRcdFx0ZGF5ID0gZGF5LnN1YnN0cmluZygwLCAxKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGRheTtcbn1cblxuZnVuY3Rpb24gZGF0ZTNWYWxpZCh5ZWFyLCBtb250aCwgZGF5KVxue1xuXHRpZiAoeWVhciAhPSBudWxsICYmIHllYXIgIT0gXCJcIiAmJiBtb250aCAhPSBudWxsICYmIG1vbnRoICE9IFwiXCIgJiYgZGF5ICE9IG51bGwgJiYgZGF5ICE9IFwiXCIpXG5cdHtcblx0XHR2YXIgbWF4RGF5c09mTW9udGggPSBkYXlzT2ZNb250aFttb250aCAtIDFdO1xuXHRcdGlmIChtb250aCA9PSAyKVxuXHRcdHtcblx0XHRcdGlmICgoeWVhciAlIDQgPT0gMCAmJiB5ZWFyICUgMTAwICE9IDApIHx8IHllYXIgJSA0MDAgPT0gMClcblx0XHRcdHtcblx0XHRcdFx0bWF4RGF5c09mTW9udGggPSAyOTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIChkYXkgPiAwICYmIGRheSA8PSBtYXhEYXlzT2ZNb250aCk7XG5cdH1cblx0cmV0dXJuIGRhdGVFbXB0eSh5ZWFyLCBtb250aCwgZGF5KTtcbn1cblxuZnVuY3Rpb24gZGF0ZUVtcHR5KHllYXIsIG1vbnRoLCBkYXkpXG57XG5cdHJldHVybiAoKHllYXIgPT0gbnVsbCB8fCB5ZWFyID09IFwiXCIpICYmIChtb250aCA9PSBudWxsIHx8IG1vbnRoID09IFwiXCIpICYmIChkYXkgPT0gbnVsbCB8fCBkYXkgPT0gXCJcIikpO1xufVxuXG5mdW5jdGlvbiBkYXRlVmFsaWQoZGF0ZVN0cilcbnsgLy92YWxpZCBkYXRlIGZvcm1hdDogeXl5eS1NTS1kZFxuXHRpZiAoZGF0ZVN0ciA9PSBudWxsIHx8IGRhdGVTdHIgPT0gXCJcIikgcmV0dXJuIHRydWU7XG5cblx0dmFyIGRhdGVQYXJ0ID0gZGF0ZVN0ci50b1N0cmluZygpLnNwbGl0KFwiLVwiKTtcblx0aWYgKGRhdGVQYXJ0Lmxlbmd0aCAhPSAzKSByZXR1cm4gZmFsc2U7XG5cblx0dmFyIGRhdGVEYXRlID0gbmV3IERhdGUoZGF0ZVBhcnRbMF0sIGRhdGVQYXJ0WzFdIC0gMSwgZGF0ZVBhcnRbMl0pO1xuXHRpZiAoaXNOYU4oZGF0ZURhdGUuZ2V0VGltZSgpKSkgcmV0dXJuIGZhbHNlO1xuXG5cdGlmIChkYXRlRGF0ZS5nZXRGdWxsWWVhcigpICE9IGRhdGVQYXJ0WzBdKSByZXR1cm4gZmFsc2U7XG5cdGlmIChkYXRlRGF0ZS5nZXRNb250aCgpICE9IGRhdGVQYXJ0WzFdIC0gMSkgcmV0dXJuIGZhbHNlO1xuXHRpZiAoZGF0ZURhdGUuZ2V0RGF0ZSgpICE9IGRhdGVQYXJ0WzJdKSByZXR1cm4gZmFsc2U7XG5cblx0cmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKHMpXG57XG5cdHJldHVybiAvXlswLTldKyQvLnRlc3Qocyk7XG59XG5cbmZ1bmN0aW9uIGludmFsaWRQaG9uZU51bWJlcihwaG9uZSlcbntcblx0aWYgKHBob25lID09IG51bGwpIHJldHVybiBmYWxzZTsgLy9waG9uZSBudW1iZXIgaXMgTk9UIGludmFsaWRcblx0cmV0dXJuICEoL15bMC05IFxcLVxcKCldKiQvLnRlc3QocGhvbmUpKTtcbn1cblxuZnVuY3Rpb24gaXNQcmVmZXJyZWRQaG9uZShwaG9uZSlcbntcblx0cGhvbmUgPSBTdHJpbmcocGhvbmUpO1xuXHRpZiAocGhvbmUgIT0gbnVsbCAmJiBwaG9uZSAhPSBcIlwiKVxuXHR7XG5cdFx0aWYgKHBob25lLmNoYXJBdChwaG9uZS5sZW5ndGggLSAxKSA9PSBcIipcIikgcmV0dXJuIHRydWU7XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBnZXRQaG9uZU51bShwaG9uZSlcbntcblx0aWYgKGlzUHJlZmVycmVkUGhvbmUocGhvbmUpKVxuXHR7XG5cdFx0cGhvbmUgPSBwaG9uZS5zdWJzdHJpbmcoMCwgcGhvbmUubGVuZ3RoIC0gMSk7XG5cdH1cblx0cmV0dXJuIHBob25lO1xufVxuXG5mdW5jdGlvbiBkZW1vQ29udGFjdFNob3coZGVtb0NvbnRhY3QpXG57XG5cdHZhciBjb250YWN0U2hvdyA9IGRlbW9Db250YWN0O1xuXHRpZiAoZGVtb0NvbnRhY3Qucm9sZSAhPSBudWxsKVxuXHR7IC8vb25seSAxIGVudHJ5XG5cdFx0dmFyIHRtcCA9IHt9O1xuXHRcdHRtcC5yb2xlID0gZGVtb0NvbnRhY3Qucm9sZTtcblx0XHR0bXAuc2RtID0gZGVtb0NvbnRhY3Quc2RtO1xuXHRcdHRtcC5lYyA9IGRlbW9Db250YWN0LmVjO1xuXHRcdHRtcC5jYXRlZ29yeSA9IGRlbW9Db250YWN0LmNhdGVnb3J5O1xuXHRcdHRtcC5sYXN0TmFtZSA9IGRlbW9Db250YWN0Lmxhc3ROYW1lO1xuXHRcdHRtcC5maXJzdE5hbWUgPSBkZW1vQ29udGFjdC5maXJzdE5hbWU7XG5cdFx0dG1wLnBob25lID0gZGVtb0NvbnRhY3QucGhvbmU7XG5cdFx0Y29udGFjdFNob3cgPSBbdG1wXTtcblx0fVxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRhY3RTaG93Lmxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0aWYgKGNvbnRhY3RTaG93W2ldLnNkbSA9PSB0cnVlKSBjb250YWN0U2hvd1tpXS5yb2xlICs9IFwiIC9zZG1cIjtcblx0XHRpZiAoY29udGFjdFNob3dbaV0uZWMgPT0gdHJ1ZSkgY29udGFjdFNob3dbaV0ucm9sZSArPSBcIiAvZWNcIjtcblx0XHRpZiAoY29udGFjdFNob3dbaV0ucm9sZSA9PSBudWxsIHx8IGNvbnRhY3RTaG93W2ldLnJvbGUgPT0gXCJcIikgY29udGFjdFNob3dbaV0ucm9sZSA9IFwiLVwiO1xuXG5cdFx0aWYgKGNvbnRhY3RTaG93W2ldLnBob25lID09IG51bGwgfHwgY29udGFjdFNob3dbaV0ucGhvbmUgPT0gXCJcIilcblx0XHR7XG5cdFx0XHRjb250YWN0U2hvd1tpXS5waG9uZSA9IFwiLVwiO1xuXHRcdH1cblx0XHRlbHNlIGlmIChjb250YWN0U2hvd1tpXS5waG9uZS5jaGFyQXQoY29udGFjdFNob3dbaV0ucGhvbmUubGVuZ3RoIC0gMSkgPT0gXCIqXCIpXG5cdFx0e1xuXHRcdFx0Y29udGFjdFNob3dbaV0ucGhvbmUgPSBjb250YWN0U2hvd1tpXS5waG9uZS5zdWJzdHJpbmcoMCwgY29udGFjdFNob3dbaV0ucGhvbmUubGVuZ3RoIC0gMSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBjb250YWN0U2hvdztcbn1cblxuZnVuY3Rpb24gdG9BcnJheShvYmopXG57IC8vY29udmVydCBzaW5nbGUgb2JqZWN0IHRvIGFycmF5XG5cdGlmIChvYmogaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIG9iajtcblx0ZWxzZSBpZiAob2JqID09IG51bGwpIHJldHVybiBbXTtcblx0ZWxzZSByZXR1cm4gW29ial07XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnUmVjb3JkLkRldGFpbHMnLCBbJ0NvbW1vbicsICdDb21tb24uU2VydmljZXMnXSk7IiwiLypcblxuICAgIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuICAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiAgICBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gICAgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gICAgRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuICAgIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuICAgIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gICAgTWNNYXN0ZXIgVW5pdmVyc2l0eVxuICAgIEhhbWlsdG9uXG4gICAgT250YXJpbywgQ2FuYWRhXG5cbiovXG5hbmd1bGFyLm1vZHVsZSgnUmVjb3JkLkZvcm1zJykuY29udHJvbGxlcignUmVjb3JkLkZvcm1zLkZvcm1Db250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJGh0dHAnLFxuXHQnJGxvY2F0aW9uJyxcblx0JyRzdGF0ZVBhcmFtcycsXG5cdCckc3RhdGUnLFxuXHQnZGVtb2dyYXBoaWNTZXJ2aWNlJyxcblx0J2RlbW8nLFxuXHQnZm9ybVNlcnZpY2UnLFxuXHQndXNlcicsXG5cdCdzZWN1cml0eVNlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkaHR0cCxcblx0XHQkbG9jYXRpb24sXG5cdFx0JHN0YXRlUGFyYW1zLFxuXHRcdCRzdGF0ZSxcblx0XHRkZW1vZ3JhcGhpY1NlcnZpY2UsXG5cdFx0ZGVtbyxcblx0XHRmb3JtU2VydmljZSxcblx0XHR1c2VyLFxuXHRcdHNlY3VyaXR5U2VydmljZSlcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29uc29sZS5sb2coXCJmb3JtIGN0cmwgXCIsICRzdGF0ZVBhcmFtcywgJHN0YXRlKTtcblxuXHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWNObyA9ICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vO1xuXHRcdGNvbnRyb2xsZXIucHJvdmlkZXJObyA9IHVzZXIucHJvdmlkZXJObztcblxuXHRcdGNvbnRyb2xsZXIucGFnZSA9IHt9O1xuXHRcdGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybUxpc3QgPSBbXTtcblx0XHRjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0gPSB7fTtcblx0XHRjb250cm9sbGVyLnBhZ2UuY3VycmVudGxpc3RJZCA9ICRzdGF0ZVBhcmFtcy5mb3JtTGlzdElkO1xuXG5cdFx0Y29uc29sZS5sb2coXCJXaGF0IGlzIHRoZSBzdGF0ZSBcIiArICRzdGF0ZS5wYXJhbXMudHlwZSArIFwiIDogXCIgKyBhbmd1bGFyLmlzVW5kZWZpbmVkKCRzdGF0ZS5wYXJhbXMudHlwZSkgKyBcIiBpZCBcIiArICRzdGF0ZS5wYXJhbXMuaWQsICRzdGF0ZSk7IC8vIFVzZSB0aGlzIHRvIGxvYWQgdGhlIGN1cnJlbnQgZm9ybSBpZiB0aGUgcGFnZSBpcyByZWZyZXNoZWRcblxuXHRcdHNlY3VyaXR5U2VydmljZS5oYXNSaWdodHMoXG5cdFx0e1xuXHRcdFx0aXRlbXM6IFtcblx0XHRcdHtcblx0XHRcdFx0b2JqZWN0TmFtZTogJ19hZG1pbicsXG5cdFx0XHRcdHByaXZpbGVnZTogJ3cnXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRvYmplY3ROYW1lOiAnX2FkbWluLmVmb3JtJyxcblx0XHRcdFx0cHJpdmlsZWdlOiAndydcblx0XHRcdH1dXG5cdFx0fSkudGhlbihcblx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5hZG1pbkFjY2VzcyA9IHJlc3VsdHMuY29udGVudFswXTtcblx0XHRcdFx0Y29udHJvbGxlci5hZG1pbkVmb3JtQWNjZXNzID0gcmVzdWx0cy5jb250ZW50WzFdO1xuXHRcdFx0XHRpZiAocmVzdWx0cy5jb250ZW50ICE9IG51bGwgJiYgcmVzdWx0cy5jb250ZW50Lmxlbmd0aCA9PSAyKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYgKGNvbnRyb2xsZXIuYWRtaW5BY2Nlc3MgfHwgY29udHJvbGxlci5hZG1pbkVmb3JtQWNjZXNzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuaGFzQWRtaW5BY2Nlc3MgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbGVydCgnZmFpbGVkIHRvIGxvYWQgcmlnaHRzJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblxuXG5cdFx0Y29udHJvbGxlci5wYWdlLmZvcm1saXN0cyA9IFtcblx0XHR7XG5cdFx0XHRpZDogMCxcblx0XHRcdGxhYmVsOiAnQ29tcGxldGVkJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0aWQ6IDEsXG5cdFx0XHRsYWJlbDogJ0xpYnJhcnknXG5cdFx0fV07IC8vTmVlZCB0byBnZXQgdGhpcyBmcm9tIHRoZSBzZXJ2ZXIuXG5cblx0XHRjb250cm9sbGVyLnBhZ2UuZm9ybWxpc3RzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpXG5cdFx0e1xuXHRcdFx0Y29uc29sZS5sb2coJ1doYXQgaXMgdGhlIGl0ZW0gJywgaXRlbSk7XG5cdFx0XHRmb3JtU2VydmljZS5nZXRBbGxGb3Jtc0J5SGVhZGluZygkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObywgaXRlbS5sYWJlbCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtTGlzdFtpbmRleF0gPSBKdW5vLkNvbW1vbi5VdGlsLnRvQXJyYXkocmVzdWx0cy5saXN0KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblxuXHRcdGNvbnRyb2xsZXIucGFnZS5lbmNvdW50ZXJGb3JtbGlzdCA9IFtdO1xuXHRcdGNvbnRyb2xsZXIucGFnZS5mb3JtR3JvdXBzID0gW107XG5cdFx0Y29udHJvbGxlci5nZXRGb3JtR3JvdXBzID0gZnVuY3Rpb24gZ2V0Rm9ybUdyb3VwcygpXG5cdFx0e1xuXHRcdFx0Zm9ybVNlcnZpY2UuZ2V0Rm9ybUdyb3VwcygpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChyZXN1bHRzIGluc3RhbmNlb2YgQXJyYXkpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmZvcm1Hcm91cHMgPSByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmZvcm1Hcm91cHMucHVzaChyZXN1bHRzKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRyb2xsZXIucGFnZS5mb3JtR3JvdXBzLmxlbmd0aDsgaSsrKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmICghKGNvbnRyb2xsZXIucGFnZS5mb3JtR3JvdXBzW2ldLnN1bW1hcnlJdGVtIGluc3RhbmNlb2YgQXJyYXkpKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZm9ybUdyb3Vwc1tpXS5zdW1tYXJ5SXRlbSA9IFtjb250cm9sbGVyLnBhZ2UuZm9ybUdyb3Vwc1tpXS5zdW1tYXJ5SXRlbV07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZXRGb3JtR3JvdXBzKCk7XG5cdFx0Y29udHJvbGxlci5wYWdlLmZvcm1PcHRpb25zID0gW107XG5cdFx0Y29udHJvbGxlci5mYXZvdXJpdGVHcm91cCA9IG51bGw7XG5cblx0XHRnZXRGYXZvdXJpdGVGb3JtR3JvdXAgPSBmdW5jdGlvbiBnZXRGYXZvdXJpdGVGb3JtR3JvdXAoKVxuXHRcdHtcblx0XHRcdGZvcm1TZXJ2aWNlLmdldEZhdm91cml0ZUZvcm1Hcm91cCgpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuZmF2b3VyaXRlR3JvdXAgPSByZXN1bHRzO1xuXG5cdFx0XHRcdFx0aWYgKCEoY29udHJvbGxlci5mYXZvdXJpdGVHcm91cC5zdW1tYXJ5SXRlbSBpbnN0YW5jZW9mIEFycmF5KSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmZhdm91cml0ZUdyb3VwLnN1bW1hcnlJdGVtID0gW2NvbnRyb2xsZXIuZmF2b3VyaXRlR3JvdXAuc3VtbWFyeUl0ZW1dO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Z2V0RmF2b3VyaXRlRm9ybUdyb3VwKCk7XG5cblx0XHRmb3JtU2VydmljZS5nZXRGb3JtT3B0aW9ucyhjb250cm9sbGVyLmRlbW9ncmFwaGljTm8pLnRoZW4oXG5cdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiZGF0YVwiLCByZXN1bHRzKTtcblxuXHRcdFx0XHRpZiAocmVzdWx0cy5pdGVtcyBpbnN0YW5jZW9mIEFycmF5KVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmZvcm1PcHRpb25zID0gcmVzdWx0cy5pdGVtcztcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZm9ybU9wdGlvbnMucHVzaChyZXN1bHRzLml0ZW1zKTtcblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0Y29uc29sZS5sb2coXCJmb3JtIG9wdGlvbnNcIiwgY29udHJvbGxlci5wYWdlLmZvcm1PcHRpb25zKTtcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblxuXHRcdGZvcm1TZXJ2aWNlLmdldENvbXBsZXRlZEVuY291bnRlckZvcm1zKCRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vKS50aGVuKFxuXHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyRm9ybWxpc3RbMF0gPSByZXN1bHRzO1xuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdH0pO1xuXG5cdFx0Zm9ybVNlcnZpY2UuZ2V0U2VsZWN0ZWRFbmNvdW50ZXJGb3JtcygpLnRoZW4oXG5cdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5lbmNvdW50ZXJGb3JtbGlzdFsxXSA9IHJlc3VsdHM7XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0fSk7XG5cblxuXHRcdGNvbnRyb2xsZXIuY2hhbmdlVG8gPSBmdW5jdGlvbiBjaGFuZ2VUbyhsaXN0SWQpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLmN1cnJlbnRsaXN0SWQgPSBsaXN0SWQ7XG5cdFx0XHRjb25zb2xlLmxvZygnc2V0IGN1cnJlbnRsaXN0IHRvICcgKyBsaXN0SWQpO1xuXHRcdFx0aWYgKGxpc3RJZCA9PSAwKVxuXHRcdFx0e1xuXHRcdFx0XHRmb3JtU2VydmljZS5nZXRBbGxGb3Jtc0J5SGVhZGluZygkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObywgJ0NvbXBsZXRlZCcpLnRoZW4oXG5cdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoJ3doYXRzIHRoZSBpbmRleCcgKyAwLCByZXN1bHRzKTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybUxpc3RbMF0gPSBKdW5vLkNvbW1vbi5VdGlsLnRvQXJyYXkocmVzdWx0cy5saXN0KTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnZpZXdGb3JtU3RhdGUgPSBmdW5jdGlvbiB2aWV3Rm9ybVN0YXRlKGl0ZW0sIHZpZXcpXG5cdFx0e1xuXG5cdFx0XHR3aGlsZSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1JblZpZXdGcmFtZScpLmhhc0NoaWxkTm9kZXMoKSlcblx0XHRcdHtcblx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1JblZpZXdGcmFtZScpLnJlbW92ZUNoaWxkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtSW5WaWV3RnJhbWUnKS5maXJzdENoaWxkKTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHF1ZXJ5TmFtZSA9ICRsb2NhdGlvbi5zZWFyY2goKS5uYW1lO1xuXHRcdFx0dmFyIHBhcmFtcyA9IHtcblx0XHRcdFx0ZGVtb2dyYXBoaWNObzogJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm8sXG5cdFx0XHRcdHR5cGU6IGl0ZW0udHlwZSA9PT0gJ2Vmb3JtJyA/ICdlZm9ybScgOiAnZm9ybScsXG5cdFx0XHRcdGlkOiBpdGVtLmlkIHx8IGl0ZW0uZm9ybUlkXG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBUaGUgaXRlbXMgc2VudCBmcm9tIHRoZSBzZXJ2ZXIgYXJlIHN1Y2ggdGhhdFxuXHRcdFx0Ly8gMS4gRXhpc3RpbmcgZWZvcm1zIGhhdmUgYSBmb3JtSWQgYW5kIGFuIGlkXG5cdFx0XHQvLyAyLiBFeGlzdGluZyBmb3JtcyBoYXZlIGEgZm9ybUlkIG9ubHlcblx0XHRcdC8vIDMuIExpYnJhcnkvYXZhaWxhYmxlIGVmb3JtcyBoYXZlIGEgZm9ybUlkIG9ubHlcblx0XHRcdC8vIDQuIExpYnJhcnkvYXZhaWxhYmxlIGZvcm1zIGhhdmUgbmVpdGhlclxuXHRcdFx0aWYgKChpdGVtLnR5cGUgPT09ICdlZm9ybScgJiYgaXRlbS5pZCkgfHwgKGl0ZW0udHlwZSA9PT0gJ2Zvcm0nICYmIGl0ZW0uZm9ybUlkKSlcblx0XHRcdHtcblx0XHRcdFx0cGFyYW1zLm5hbWUgPSBpdGVtLnR5cGUgPT09ICdmb3JtJyA/IGl0ZW0ubmFtZSB8fCBxdWVyeU5hbWUgOiAnJztcblx0XHRcdFx0JHN0YXRlLmdvKCdyZWNvcmQuZm9ybXMudmlldycsIHBhcmFtcyk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdlZm9ybScpXG5cdFx0XHR7XG5cdFx0XHRcdCRzdGF0ZS5nbygncmVjb3JkLmZvcm1zLmFkZCcsIHBhcmFtcyk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdCRzdGF0ZS5nbygncmVjb3JkLmZvcm1zJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8qXG5cdFx0XHQqIDE9ZnJhbWVcblx0XHRcdCogMj1uZXd3aW5kb3dcblx0XHRcdCovXG5cdFx0XHRpZiAodmlldyA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0e1xuXHRcdFx0XHR2aWV3ID0gMTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHVybCA9ICcnO1xuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2Vmb3JtJylcblx0XHRcdHtcblx0XHRcdFx0aWYgKCFKdW5vLkNvbW1vbi5VdGlsLmlzVW5kZWZpbmVkT3JOdWxsKGl0ZW0uaWQpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dXJsID0gJy4uL2Vmb3JtL2VmbXNob3dmb3JtX2RhdGEuanNwP2ZkaWQ9JyArIGl0ZW0uaWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dXJsID0gJy4uL2Vmb3JtL2VmbWZvcm1hZGRfZGF0YS5qc3A/ZmlkPScgKyBpdGVtLmZvcm1JZCArICcmZGVtb2dyYXBoaWNfbm89JyArICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7IC8vZm9ybVxuXHRcdFx0XHRpZiAoYW5ndWxhci5pc0RlZmluZWQoaXRlbS5mb3JtSWQpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIG5hbWUgPSBpdGVtLm5hbWUgfHwgcXVlcnlOYW1lO1xuXHRcdFx0XHRcdHVybCA9ICcuLi9mb3JtL2ZvcndhcmRzaG9ydGN1dG5hbWUuanNwP2Zvcm1uYW1lPScgKyBuYW1lICsgJyZkZW1vZ3JhcGhpY19ubz0nICsgJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm8gKyAnJmZvcm1JZD0nICsgaXRlbS5mb3JtSWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dXJsID0gaXRlbS5mb3JtVmFsdWUgKyAkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObyArIFwiJmZvcm1JZD0wJnByb3ZObz1cIiArIHVzZXIucHJvdmlkZXJObyArIFwiJnBhcmVudEFqYXhJZD1mb3Jtc1wiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh2aWV3ID09PSAxKVxuXHRcdFx0e1xuXHRcdFx0XHQkKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHNjcm9sbFRvcDogMFxuXHRcdFx0XHRcdH0sIFwic2xvd1wiKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKHZpZXcgPT09IDIpXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBybmQgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwKTtcblx0XHRcdFx0d2luID0gXCJ3aW5cIiArIHJuZDtcblxuXHRcdFx0XHR3aW5kb3cub3Blbih1cmwsIHdpbiwgXCJzY3JvbGxiYXJzPXllcywgbG9jYXRpb249bm8sIHdpZHRoPTkwMCwgaGVpZ2h0PTYwMFwiLCBcIlwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0gPSBpdGVtO1xuXHRcdFx0dmFyIHB5bVBhcmVudCA9IG5ldyBweW0uUGFyZW50KCdmb3JtSW5WaWV3RnJhbWUnLCB1cmwsXG5cdFx0XHR7fSk7XG5cdFx0XHRjb250cm9sbGVyLnB5bVBhcmVudCA9IHB5bVBhcmVudDtcblxuXHRcdFx0LyppZihpdGVtLnR5cGUgIT0gJ2Vmb3JtJyAmJiB2aWV3PT0xKXtcblx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1JblZpZXdGcmFtZScpLmZpcnN0Q2hpbGQuc3R5bGUuaGVpZ2h0ID0gXCIxNjAwcHhcIjsgLy90ZW1wIGhhY2sgZm9yIHRoZSBmb3Jtc1xuXHRcdFx0fSovXG5cblx0XHRcdC8vcmVzaXplIGlmcmFtZSBmb3IgYm90aCBmb3JtIGFuZCBlZm9ybXNcblx0XHRcdCQoJ2lmcmFtZScpLmxvYWQoZnVuY3Rpb24oKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgbWF4aGVpZ2h0ID0gTWF0aC5tYXgoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1JblZpZXdGcmFtZScpLmZpcnN0Q2hpbGQuY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1JblZpZXdGcmFtZScpLmZpcnN0Q2hpbGQuY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCkgKyAzMCArICdweCc7XG5cdFx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtSW5WaWV3RnJhbWUnKS5maXJzdENoaWxkLnN0eWxlLmhlaWdodCA9IG1heGhlaWdodDtcblx0XHRcdH0pO1xuXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkob2JqKVxuXHRcdHtcblx0XHRcdGZvciAodmFyIGkgaW4gb2JqKVxuXHRcdFx0XHRpZiAob2JqLmhhc093blByb3BlcnR5KGkpKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jdXJyZW50RWZvcm1Hcm91cCA9IHt9O1xuXG5cdFx0Y29udHJvbGxlci5zZXRDdXJyZW50RUZvcm1Hcm91cCA9IGZ1bmN0aW9uIHNldEN1cnJlbnRFRm9ybUdyb3VwKG1vZClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLmN1cnJlbnRFZm9ybUdyb3VwID0gbW9kO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLm9wZW5Gb3JtRnJvbUdyb3VwcyA9IGZ1bmN0aW9uIG9wZW5Gb3JtRnJvbUdyb3VwcyhpdGVtKVxuXHRcdHtcblx0XHRcdGNvbnNvbGUubG9nKFwiZ3JvdXAgaXRlbVwiLCBpdGVtKTtcblx0XHRcdGl0ZW0uZm9ybUlkID0gaXRlbS5pZDtcblx0XHRcdGRlbGV0ZSBpdGVtLmlkO1xuXHRcdFx0Y29udHJvbGxlci52aWV3Rm9ybVN0YXRlKGl0ZW0sIDIpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmZvcm1PcHRpb24gPSBmdW5jdGlvbiBmb3JtT3B0aW9uKG9wdClcblx0XHR7XG5cdFx0XHR2YXIgYXRsZWFzdE9uZUl0ZW1TZWxlY3RlZCA9IGZhbHNlO1xuXHRcdFx0aWYgKG9wdC5leHRyYSA9PSBcInNlbmQyUEhSXCIpXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBkb2NJZHMgPSBcIlwiO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybUxpc3RbY29udHJvbGxlci5wYWdlLmN1cnJlbnRsaXN0SWRdLmxlbmd0aDsgaSsrKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybUxpc3RbY29udHJvbGxlci5wYWdlLmN1cnJlbnRsaXN0SWRdW2ldLmlzQ2hlY2tlZClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRkb2NJZHMgPSBkb2NJZHMgKyAnJnNlbmRUb1Bocj0nICsgY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtTGlzdFtjb250cm9sbGVyLnBhZ2UuY3VycmVudGxpc3RJZF1baV0uaWQ7XG5cdFx0XHRcdFx0XHRhdGxlYXN0T25lSXRlbVNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGF0bGVhc3RPbmVJdGVtU2VsZWN0ZWQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR2YXIgcm5kID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMCk7XG5cdFx0XHRcdFx0d2luID0gXCJ3aW5cIiArIHJuZDtcblx0XHRcdFx0XHR2YXIgdXJsID0gJy4uL2Vmb3JtL2VmbXBhdGllbnRmb3JtbGlzdFNlbmRQaHJBY3Rpb24uanNwP2NsaWVudElkPScgKyBjb250cm9sbGVyLmRlbW9ncmFwaGljTm8gKyBkb2NJZHM7XG5cdFx0XHRcdFx0d2luZG93Lm9wZW4odXJsLCB3aW4sIFwic2Nyb2xsYmFycz15ZXMsIGxvY2F0aW9uPW5vLCB3aWR0aD05MDAsIGhlaWdodD02MDBcIiwgXCJcIik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCFhdGxlYXN0T25lSXRlbVNlbGVjdGVkKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChcIk5vIERvY3VtZW50cyBTZWxlY3RlZFwiKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cblx0XHQvKlxuXHRcdCAqIFVzZWQgdG8gbWFrZSB0aGUgbGVmdCBzaWRlIGxpc3QgdGFiIGJlIGFjdGl2ZVxuXHRcdCAqL1xuXHRcdGNvbnRyb2xsZXIuZ2V0TGlzdENsYXNzID0gZnVuY3Rpb24gZ2V0TGlzdENsYXNzKGxpc3RJZClcblx0XHR7XG5cdFx0XHRpZiAobGlzdElkID09PSBjb250cm9sbGVyLnBhZ2UuY3VycmVudGxpc3RJZClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIFwiYWN0aXZlXCI7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8qXG5cdFx0ICogVXNlZCB0byBtYWtlIGdyb3VwIHNldHRpbmcgYWN0aXZlXG5cdFx0ICovXG5cdFx0Y29udHJvbGxlci5nZXRHcm91cExpc3RDbGFzcyA9IGZ1bmN0aW9uIGdldEdyb3VwTGlzdENsYXNzKGdycClcblx0XHR7XG5cdFx0XHRpZiAoZ3JwID09PSBjb250cm9sbGVyLmN1cnJlbnRFZm9ybUdyb3VwKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gXCJhY3RpdmVcIjtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Lypcblx0XHQgKiBVc2VkIHRvIG1hcmsgd2hpY2ggZm9ybSBpcyBhY3RpdmUuXG5cdFx0ICovXG5cdFx0Y29udHJvbGxlci5nZXRBY3RpdmVGb3JtQ2xhc3MgPSBmdW5jdGlvbiBnZXRBY3RpdmVGb3JtQ2xhc3MoaXRlbSlcblx0XHR7XG5cdFx0XHRpZiAoaXRlbS50eXBlID09PSBjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0udHlwZSAmJiBpdGVtLmlkID09PSBjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0uaWQgJiYgIUp1bm8uQ29tbW9uLlV0aWwuaXNVbmRlZmluZWRPck51bGwoaXRlbS5pZCkpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBcImFjdGl2ZVwiO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoaXRlbS50eXBlID09PSBjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0udHlwZSAmJiBpdGVtLmZvcm1JZCA9PT0gY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtLmZvcm1JZCAmJiBKdW5vLkNvbW1vbi5VdGlsLmlzVW5kZWZpbmVkT3JOdWxsKGl0ZW0uaWQpKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gXCJhY3RpdmVcIjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2YXIgY3VycmVudFN0YXRlID0gJHN0YXRlLmN1cnJlbnQubmFtZTtcblx0XHRpZiAoY3VycmVudFN0YXRlID09PSAncmVjb3JkLmZvcm1zLnZpZXcnIHx8IGN1cnJlbnRTdGF0ZSA9PT0gJ3JlY29yZC5mb3Jtcy5hZGQnKVxuXHRcdHtcblx0XHRcdHZhciBpdGVtID0ge307XG5cdFx0XHRpdGVtLnR5cGUgPSAkc3RhdGUucGFyYW1zLnR5cGU7XG5cblx0XHRcdC8vIHNldCBpdGVtIHByb3BlcnRpZXMgaW4gYSB3YXkgdGhhdCBtYXRjaGVzIHRoZSBjb250ZW50IHRoYXQgdGhlIHNlcnZlciByZXR1cm5zXG5cdFx0XHRpZiAoY3VycmVudFN0YXRlID09PSAncmVjb3JkLmZvcm1zLnZpZXcnICYmIGl0ZW0udHlwZSA9PT0gJ2Vmb3JtJylcblx0XHRcdHtcblx0XHRcdFx0aXRlbS5pZCA9ICRzdGF0ZS5wYXJhbXMuaWQ7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGl0ZW0uZm9ybUlkID0gJHN0YXRlLnBhcmFtcy5pZDtcblx0XHRcdH1cblxuXHRcdFx0Y29udHJvbGxlci52aWV3Rm9ybVN0YXRlKGl0ZW0pO1xuXHRcdFx0Y29udHJvbGxlci5jaGFuZ2VUbyhjdXJyZW50U3RhdGUgPT09ICdyZWNvcmQuZm9ybXMudmlldycgPyAwIDogMSk7XG5cdFx0fVxuXG5cdFx0Lypcblx0XHQgKiBUaGlzIHN0aWxsIG5lZWRzIHRvIGJlIHRlc3RlZFxuXHRcdCAqL1xuXHRcdGNvbnRyb2xsZXIua2V5cHJlc3MgPSBmdW5jdGlvbiBrZXlwcmVzcyhldmVudClcblx0XHR7XG5cdFx0XHRpZiAoZXZlbnQuYWx0S2V5ID09IHRydWUgJiYgZXZlbnQua2V5Q29kZSA9PSAzOClcblx0XHRcdHsgLy91cFxuXHRcdFx0XHRjb25zb2xlLmxvZyhcInVwXCIsIGV2ZW50KTtcblx0XHRcdFx0Y29uc29sZS5sb2coY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtTGlzdFtjb250cm9sbGVyLnBhZ2UuY3VycmVudGxpc3RJZF0uaW5kZXhPZihjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0pKTtcblx0XHRcdFx0dmFyIGN1cnJJZHggPSBjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm1MaXN0W2NvbnRyb2xsZXIucGFnZS5jdXJyZW50bGlzdElkXS5pbmRleE9mKGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybSk7XG5cdFx0XHRcdGlmIChjdXJySWR4ID4gMClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybSA9IGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybUxpc3RbY29udHJvbGxlci5wYWdlLmN1cnJlbnRsaXN0SWRdW2N1cnJJZHggLSAxXTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnZpZXdGb3JtU3RhdGUoY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZXZlbnQuYWx0S2V5ID09IHRydWUgJiYgZXZlbnQua2V5Q29kZSA9PSA0MClcblx0XHRcdHsgLy9Eb3duXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiZG93blwiLCBldmVudCk7XG5cdFx0XHRcdHZhciBjdXJySWR4ID0gY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtTGlzdFtjb250cm9sbGVyLnBhZ2UuY3VycmVudGxpc3RJZF0uaW5kZXhPZihjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0pO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhjdXJySWR4LCBjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm1MaXN0W2NvbnRyb2xsZXIucGFnZS5jdXJyZW50bGlzdElkXS5sZW5ndGgpO1xuXHRcdFx0XHRpZiAoY3VycklkeCA8PSBjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm1MaXN0W2NvbnRyb2xsZXIucGFnZS5jdXJyZW50bGlzdElkXS5sZW5ndGgpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0gPSBjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm1MaXN0W2NvbnRyb2xsZXIucGFnZS5jdXJyZW50bGlzdElkXVtjdXJySWR4ICsgMV07XG5cdFx0XHRcdFx0Y29udHJvbGxlci52aWV3Rm9ybVN0YXRlKGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJrZXlwcmVzc1wiLCBldmVudC5hbHRLZXksIGV2ZW50LmtleSwgZXZlbnQpO1xuXHRcdFx0fVxuXHRcdH07XG5cblxuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdSZWNvcmQuRm9ybXMnLCBbJ0NvbW1vbicsICdDb21tb24uU2VydmljZXMnXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnUmVjb3JkJywgWydDb21tb24nLCAnQ29tbW9uLlNlcnZpY2VzJ10pOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ1JlY29yZC5QSFInLCBbJ0NvbW1vbicsICdDb21tb24uU2VydmljZXMnXSk7IiwiLypcblxuICAgIENvcHlyaWdodCAoYykgMjAwMS0yMDAyLiBEZXBhcnRtZW50IG9mIEZhbWlseSBNZWRpY2luZSwgTWNNYXN0ZXIgVW5pdmVyc2l0eS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICBUaGlzIHNvZnR3YXJlIGlzIHB1Ymxpc2hlZCB1bmRlciB0aGUgR1BMIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxuICAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiAgICBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyXG4gICAgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG4gICAgRm91bmRhdGlvbiwgSW5jLiwgNTkgVGVtcGxlIFBsYWNlIC0gU3VpdGUgMzMwLCBCb3N0b24sIE1BIDAyMTExLTEzMDcsIFVTQS5cblxuICAgIFRoaXMgc29mdHdhcmUgd2FzIHdyaXR0ZW4gZm9yIHRoZVxuICAgIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lXG4gICAgTWNNYXN0ZXIgVW5pdmVyc2l0eVxuICAgIEhhbWlsdG9uXG4gICAgT250YXJpbywgQ2FuYWRhXG5cbiovXG5hbmd1bGFyLm1vZHVsZSgnUmVjb3JkLlBIUicpLmNvbnRyb2xsZXIoJ1JlY29yZC5QSFIuUEhSQ29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRodHRwJyxcblx0JyRsb2NhdGlvbicsXG5cdCckc3RhdGUnLFxuXHQnJHN0YXRlUGFyYW1zJyxcblx0J2RlbW9ncmFwaGljU2VydmljZScsXG5cdCdkZW1vJyxcblx0J2Zvcm1TZXJ2aWNlJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JGh0dHAsXG5cdFx0JGxvY2F0aW9uLFxuXHRcdCRzdGF0ZSxcblx0XHQkc3RhdGVQYXJhbXMsXG5cdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLFxuXHRcdGRlbW8sXG5cdFx0Zm9ybVNlcnZpY2UpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdGNvbnNvbGUubG9nKFwicGhyIGN0cmwgXCIsICRzdGF0ZVBhcmFtcywgJHN0YXRlKTtcblxuXHRcdGNvbnRyb2xsZXIucGFnZSA9IHt9O1xuXHRcdGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybUxpc3QgPSBbXTtcblx0XHRjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0gPSB7fTtcblx0XHRjb250cm9sbGVyLnBhZ2UuY3VycmVudGxpc3RJZCA9IDA7XG5cblx0XHRjb25zb2xlLmxvZyhcIldoYXQgaXMgdGhlIHN0YXRlIFwiICsgJHN0YXRlLnBhcmFtcy50eXBlICsgXCIgOiBcIiArIGFuZ3VsYXIuaXNVbmRlZmluZWQoJHN0YXRlLnBhcmFtcy50eXBlKSArIFwiIGlkIFwiICsgJHN0YXRlLnBhcmFtcy5pZCwgJHN0YXRlKTsgLy8gVXNlIHRoaXMgdG8gbG9hZCB0aGUgY3VycmVudCBmb3JtIGlmIHRoZSBwYWdlIGlzIHJlZnJlc2hlZFxuXG5cblx0XHRjb250cm9sbGVyLnBhZ2UuZm9ybWxpc3RzID0gW1xuXHRcdHtcblx0XHRcdGlkOiAwLFxuXHRcdFx0bGFiZWw6ICdEYXRhJ1xuXHRcdH1dOyAvLyx7aWQ6MSxsYWJlbDonTXNncyd9XTsgIC8vTmVlZCB0byBnZXQgdGhpcyBmcm9tIHRoZSBzZXJ2ZXIuXG5cblx0XHRjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm1MaXN0WzBdID0gW1xuXHRcdHtcblx0XHRcdGlkOiAwLFxuXHRcdFx0bmFtZTogJ0dsdWNvc2UnLFxuXHRcdFx0dXJsOiAnLi4vb3NjYXJFbmNvdW50ZXIvbXlvc2Nhci9tZWFzdXJlbWVudHNfZ2x1Y29zZS5kbz90eXBlPUdMVUNPU0UmZGVtb05vPScsXG5cdFx0XHR0eXBlOiAnZnJhbWUnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRpZDogMSxcblx0XHRcdG5hbWU6ICdCUCcsXG5cdFx0XHR1cmw6ICcuLi9vc2NhckVuY291bnRlci9teW9zY2FyL21lYXN1cmVtZW50c19ibG9vZF9wcmVzc3VyZS5kbz90eXBlPUJMT09EX1BSRVNTVVJFJmRlbW9Obz0nLFxuXHRcdFx0dHlwZTogJ2ZyYW1lJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0aWQ6IDIsXG5cdFx0XHRuYW1lOiAnSGVpZ2h0ICYgV2VpZ2h0Jyxcblx0XHRcdHVybDogJy4uL29zY2FyRW5jb3VudGVyL215b3NjYXIvbWVhc3VyZW1lbnRzX2hlaWdodF9hbmRfd2VpZ2h0LmRvP3R5cGU9SEVJR0hUX0FORF9XRUlHSFQmZGVtb05vPScsXG5cdFx0XHR0eXBlOiAnZnJhbWUnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRpZDogMyxcblx0XHRcdG5hbWU6ICdPcGVuIFJlY29yZCcsXG5cdFx0XHR1cmw6ICcuLi9kZW1vZ3JhcGhpYy92aWV3UGhyUmVjb3JkLmRvP2RlbW9ncmFwaGljX25vPScsXG5cdFx0XHR0eXBlOiAnd2luZG93J1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0aWQ6IDQsXG5cdFx0XHRuYW1lOiAnU2VuZCBhIE1lc3NhZ2UnLFxuXHRcdFx0dXJsOiAnLi4vcGhyL1Bock1lc3NhZ2UuZG8/bWV0aG9kPWNyZWF0ZU1lc3NhZ2UmZGVtb2dyYXBoaWNObz0nLFxuXHRcdFx0dHlwZTogJ3dpbmRvdydcblx0XHR9LFxuXHRcdHtcblx0XHRcdGlkOiA1LFxuXHRcdFx0bmFtZTogJ0RhdGEgU3luYycsXG5cdFx0XHR1cmw6ICcuLi9hZG1pbi9vc2Nhcl9teW9zY2FyX3N5bmNfY29uZmlnX3JlZGlyZWN0LmpzcD91c2VsZXNzUGFyYW09Jyxcblx0XHRcdHR5cGU6ICd3aW5kb3cnXG5cdFx0fV07XG5cblxuXG5cdFx0Lypjb250cm9sbGVyLnBhZ2UuZm9ybWxpc3RzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG5cdFx0XHRjb25zb2xlLmxvZygnV2hhdCBpcyB0aGUgaXRlbSAnLGl0ZW0pO1xuXHRcdFx0Zm9ybVNlcnZpY2UuZ2V0QWxsRm9ybXNCeUhlYWRpbmcoJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm8saXRlbS5sYWJlbCkudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0ICAgICAgICBjb25zb2xlLmRlYnVnKCd3aGF0cyB0aGUgaW5kZXgnK2luZGV4LGRhdGEpO1xuXHRcdCAgICAgICAgY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtTGlzdFtpbmRleF0gPSBkYXRhLmxpc3Q7XG5cdFx0ICAgIH0pO1xuXHRcdH0pO1xuXHRcdCovXG5cblx0XHRjb250cm9sbGVyLmNoYW5nZVRvID0gZnVuY3Rpb24gY2hhbmdlVG8obGlzdElkKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5jdXJyZW50bGlzdElkID0gbGlzdElkO1xuXHRcdFx0Y29uc29sZS5sb2coJ3NldCBjdXJyZW50bGlzdCB0byAnICsgbGlzdElkKTtcblx0XHRcdGlmIChsaXN0SWQgPT0gMClcblx0XHRcdHtcblx0XHRcdFx0Zm9ybVNlcnZpY2UuZ2V0QWxsRm9ybXNCeUhlYWRpbmcoJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm8sICdDb21wbGV0ZWQnKS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKCd3aGF0cyB0aGUgaW5kZXgnICsgMCwgcmVzdWx0cyk7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm1MaXN0WzBdID0gcmVzdWx0cy5saXN0O1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIudmlld0Zvcm1TdGF0ZSA9IGZ1bmN0aW9uIHZpZXdGb3JtU3RhdGUoaXRlbSlcblx0XHR7XG5cblx0XHRcdHdoaWxlIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybUluVmlld0ZyYW1lJykuaGFzQ2hpbGROb2RlcygpKVxuXHRcdFx0e1xuXHRcdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybUluVmlld0ZyYW1lJykucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm1JblZpZXdGcmFtZScpLmZpcnN0Q2hpbGQpO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgdXJsID0gaXRlbS51cmwgKyAkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObztcblx0XHRcdGNvbnNvbGUubG9nKFwiaXRlbVwiLCBpdGVtKTtcblxuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PSAnZnJhbWUnKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0gPSBpdGVtO1xuXHRcdFx0XHR2YXIgcHltUGFyZW50ID0gbmV3IHB5bS5QYXJlbnQoJ2Zvcm1JblZpZXdGcmFtZScsIHVybCxcblx0XHRcdFx0e30pO1xuXHRcdFx0XHRjb250cm9sbGVyLnB5bVBhcmVudCA9IHB5bVBhcmVudDtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dmFyIHJuZCA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDApO1xuXHRcdFx0XHR3aW4gPSBcIndpblwiICsgcm5kO1xuXHRcdFx0XHR3aW5kb3cub3Blbih1cmwsIHdpbiwgXCJzY3JvbGxiYXJzPXllcywgbG9jYXRpb249bm8sIHdpZHRoPTkwMCwgaGVpZ2h0PTYwMFwiLCBcIlwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cblx0XHR9O1xuXG5cblxuXHRcdC8qXG5cdFx0ICogVXNlZCB0byBtYWtlIHRoZSBsZWZ0IHNpZGUgbGlzdCB0YWIgYmUgYWN0aXZlXG5cdFx0ICovXG5cdFx0Y29udHJvbGxlci5nZXRMaXN0Q2xhc3MgPSBmdW5jdGlvbiBnZXRMaXN0Q2xhc3MobGlzdElkKVxuXHRcdHtcblx0XHRcdGlmIChsaXN0SWQgPT09IGNvbnRyb2xsZXIucGFnZS5jdXJyZW50bGlzdElkKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gXCJhY3RpdmVcIjtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Lypcblx0XHQgKiBVc2VkIHRvIG1hcmsgd2hpY2ggZm9ybSBpcyBhY3RpdmUuXG5cdFx0ICovXG5cdFx0Y29udHJvbGxlci5nZXRBY3RpdmVGb3JtQ2xhc3MgPSBmdW5jdGlvbiBnZXRBY3RpdmVGb3JtQ2xhc3MoaXRlbSlcblx0XHR7XG5cdFx0XHRpZiAoaXRlbS50eXBlID09IGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybS50eXBlICYmIGl0ZW0uaWQgPT0gY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtLmlkICYmIGFuZ3VsYXIuaXNEZWZpbmVkKGl0ZW0uaWQpKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gXCJhY3RpdmVcIjtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGl0ZW0udHlwZSA9PSBjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0udHlwZSAmJiBhbmd1bGFyLmlzVW5kZWZpbmVkKGl0ZW0uaWQpICYmIGl0ZW0uZm9ybUlkID09IGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybS5mb3JtSWQpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBcImFjdGl2ZVwiO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBSZW1vdmUgdGhpcz9cblx0XHRmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnJvck1lc3NhZ2UpXG5cdFx0e1xuXHRcdFx0Y29uc29sZS5sb2coZXJyb3JNZXNzYWdlKTtcblx0XHR9XG5cblx0XHQvKlxuXHRcdCAqIFRoaXMgc3RpbGwgbmVlZHMgdG8gYmUgdGVzdGVkXG5cdFx0ICovXG5cdFx0Y29udHJvbGxlci5rZXlwcmVzcyA9IGZ1bmN0aW9uIGtleXByZXNzKGV2ZW50KVxuXHRcdHtcblx0XHRcdGlmIChldmVudC5hbHRLZXkgPT0gdHJ1ZSAmJiBldmVudC5rZXkgPT0gXCJVcFwiKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcInVwXCIsIGV2ZW50KTtcblx0XHRcdFx0Y29uc29sZS5sb2coY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtTGlzdFtjb250cm9sbGVyLnBhZ2UuY3VycmVudGxpc3RJZF0uaW5kZXhPZihjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0pKTtcblx0XHRcdFx0dmFyIGN1cnJJZHggPSBjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm1MaXN0W2NvbnRyb2xsZXIucGFnZS5jdXJyZW50bGlzdElkXS5pbmRleE9mKGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybSk7XG5cdFx0XHRcdGlmIChjdXJySWR4ID4gMClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybSA9IGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybUxpc3RbY29udHJvbGxlci5wYWdlLmN1cnJlbnRsaXN0SWRdW2N1cnJJZHggLSAxXTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnZpZXdGb3JtU3RhdGUoY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZXZlbnQuYWx0S2V5ID09IHRydWUgJiYgZXZlbnQua2V5ID09IFwiRG93blwiKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcImRvd25cIiwgZXZlbnQpO1xuXHRcdFx0XHR2YXIgY3VycklkeCA9IGNvbnRyb2xsZXIucGFnZS5jdXJyZW50Rm9ybUxpc3RbY29udHJvbGxlci5wYWdlLmN1cnJlbnRsaXN0SWRdLmluZGV4T2YoY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtKTtcblx0XHRcdFx0Y29uc29sZS5sb2coY3VycklkeCwgY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtTGlzdFtjb250cm9sbGVyLnBhZ2UuY3VycmVudGxpc3RJZF0ubGVuZ3RoKTtcblx0XHRcdFx0aWYgKGN1cnJJZHggPD0gY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtTGlzdFtjb250cm9sbGVyLnBhZ2UuY3VycmVudGxpc3RJZF0ubGVuZ3RoKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtID0gY29udHJvbGxlci5wYWdlLmN1cnJlbnRGb3JtTGlzdFtjb250cm9sbGVyLnBhZ2UuY3VycmVudGxpc3RJZF1bY3VycklkeCArIDFdO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIudmlld0Zvcm1TdGF0ZShjb250cm9sbGVyLnBhZ2UuY3VycmVudEZvcm0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwia2V5cHJlc3NcIiwgZXZlbnQuYWx0S2V5LCBldmVudC5rZXksIGV2ZW50KTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5dKTsiLCIvKlxuXG4gICAgQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuICAgIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiAgICBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiAgICBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gICAgVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gICAgRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiAgICBNY01hc3RlciBVbml2ZXJzaXR5XG4gICAgSGFtaWx0b25cbiAgICBPbnRhcmlvLCBDYW5hZGFcblxuKi9cblxuYW5ndWxhci5tb2R1bGUoJ1JlY29yZCcpLmNvbnRyb2xsZXIoJ1JlY29yZC5SZWNvcmRDb250cm9sbGVyJywgW1xuXG5cdCckcm9vdFNjb3BlJyxcblx0JyRzY29wZScsXG5cdCckd2luZG93Jyxcblx0JyRodHRwJyxcblx0JyRsb2NhbFN0b3JhZ2UnLFxuXHQnJGxvY2F0aW9uJyxcblx0JyRzdGF0ZScsXG5cdCckc3RhdGVQYXJhbXMnLFxuXHQnJHRpbWVvdXQnLFxuXHQnJGludGVydmFsJyxcblx0JyR1aWJNb2RhbCcsXG5cdCdkZW1vZ3JhcGhpY1NlcnZpY2UnLFxuXHQnZGVtbycsXG5cdCd1c2VyJyxcblx0J3Byb3BlcnRpZXMnLFxuXHQnbm90ZVNlcnZpY2UnLFxuXHQndXhTZXJ2aWNlJyxcblx0J3NlY3VyaXR5U2VydmljZScsXG5cdCdzY2hlZHVsZVNlcnZpY2UnLFxuXHQnYmlsbGluZ1NlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRyb290U2NvcGUsXG5cdFx0JHNjb3BlLFxuXHRcdCR3aW5kb3csXG5cdFx0JGh0dHAsXG5cdFx0JGxvY2FsU3RvcmFnZSxcblx0XHQkbG9jYXRpb24sXG5cdFx0JHN0YXRlLFxuXHRcdCRzdGF0ZVBhcmFtcyxcblx0XHQkdGltZW91dCxcblx0XHQkaW50ZXJ2YWwsXG5cdFx0JHVpYk1vZGFsLFxuXHRcdGRlbW9ncmFwaGljU2VydmljZSxcblx0XHRkZW1vLFxuXHRcdHVzZXIsXG5cdFx0cHJvcGVydGllcyxcblx0XHRub3RlU2VydmljZSxcblx0XHR1eFNlcnZpY2UsXG5cdFx0c2VjdXJpdHlTZXJ2aWNlLFxuXHRcdHNjaGVkdWxlU2VydmljZSxcblx0XHRiaWxsaW5nU2VydmljZSlcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29udHJvbGxlci5kZW1vZ3JhcGhpY05vID0gJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm87XG5cdFx0Y29udHJvbGxlci5kZW1vZ3JhcGhpYyA9IGRlbW87XG5cdFx0Y29udHJvbGxlci5wcm9wZXJ0aWVzID0gcHJvcGVydGllcztcblx0XHRjb250cm9sbGVyLnBhZ2UgPSB7fTtcblx0XHRjb250cm9sbGVyLnBhZ2UuYXNzaWduZWRDTUlzc3VlcyA9IFtdO1xuXG5cdFx0Lypcblx0XHQgKiBoYW5kbGUgY29uY3VycmVudCBub3RlIGVkaXQgLSBFZGl0aW5nTm90ZUZsYWdcblx0XHQgKi9cblx0XHRjb250cm9sbGVyLnBhZ2UuaXR2U2V0ID0gbnVsbDtcblx0XHRjb250cm9sbGVyLnBhZ2UuaXR2Q2hlY2sgPSBudWxsO1xuXHRcdGNvbnRyb2xsZXIucGFnZS5lZGl0aW5nTm90ZUlkID0gbnVsbDtcblx0XHRjb250cm9sbGVyLnBhZ2UuaXNOb3RlU2F2ZWQgPSBmYWxzZTsgLy8gVHJhY2sgc2F2ZSBzdGF0ZSBvZiBub3RlIFRPRE86IFBvdGVudGlhbGx5IGFkZCB0aGlzIHRvIHRoZSBlbmNvdW50ZXJOb3RlIG9iamVjdCBvbiB0aGUgYmFja2VuZFxuXG5cdFx0Y29udHJvbGxlci4kc3RvcmFnZSA9ICRsb2NhbFN0b3JhZ2U7IC8vIERlZmluZSBwZXJzaXN0ZW50IHN0b3JhZ2Vcblx0XHQvKlxuXHRcdGNvbnRyb2xsZXIucmVjb3JkdGFiczIgPSBbIFxuXHRcdCB7aWQgOiAwLG5hbWUgOiAnTWFzdGVyJyx1cmwgOiAncGFydGlhbHMvbWFzdGVyLmh0bWwnfSxcblx0XHQge2lkIDogMSxuYW1lIDogJ1N1bW1hcnknLHVybCA6ICdwYXJ0aWFscy9zdW1tYXJ5Lmh0bWwnfSxcblx0XHQge2lkIDogMixuYW1lIDogJ1J4Jyx1cmwgOiAncGFydGlhbHMvcnguanNwJ30sXG5cdFx0IHtpZCA6IDMsbmFtZSA6ICdNc2cnLHVybCA6ICdwYXJ0aWFscy9zdW1tYXJ5Lmh0bWwnfSxcblx0XHQge2lkIDogNCxuYW1lIDogJ1RyYWNrZXJzJyx1cmwgOiAncGFydGlhbHMvdHJhY2tlci5qc3AnfSxcblx0XHQge2lkIDogNSxuYW1lIDogJ0NvbnN1bHRzJyx1cmwgOiAncGFydGlhbHMvc3VtbWFyeS5odG1sJ30sXG5cdFx0IHtpZCA6IDYsbmFtZSA6ICdGb3JtcycsdXJsIDogJ3BhcnRpYWxzL2Zvcm12aWV3Lmh0bWwnfSxcblx0XHQge2lkIDogNyxuYW1lIDogJ1ByZXZzL01lYXN1cmVtZW50cycsdXJsIDogJ3BhcnRpYWxzL3N1bW1hcnkuaHRtbCd9LFxuXHRcdCB7aWQgOiA4LG5hbWUgOiAnVGlja2xlcnMnLHVybCA6ICdwYXJ0aWFscy9zdW1tYXJ5Lmh0bWwnfSxcblx0XHQge2lkIDogOSxuYW1lIDogJ015T3NjYXInLHVybCA6ICdwYXJ0aWFscy9ibGFuay5qc3AnfSxcblx0XHQge2lkIDogMTAsbmFtZSA6ICdBbGxlcmdpZXMnLHVybCA6ICdwYXJ0aWFscy9zdW1tYXJ5Lmh0bWwnfSxcblx0XHQge2lkIDogMTEsbmFtZSA6ICdDUFAnLHVybCA6ICdwYXJ0aWFscy9jcHAuaHRtbCd9LFxuXHRcdCB7aWQgOiAxMixuYW1lIDogJ0xhYnMvRG9jcycsdXJsIDogJ3BhcnRpYWxzL2xhYnZpZXcuaHRtbCd9LFxuXHRcdCB7aWQgOiAxMyxuYW1lIDogJ0JpbGxpbmcnLHVybCA6ICdwYXJ0aWFscy9iaWxsaW5nLmpzcCd9XHRcblx0XHQqL1xuXHRcdGNvbnRyb2xsZXIucmVjb3JkdGFiczIgPSBbXTtcblx0XHQvKlxuXHRcdCAgICAgICAgICAgICAgICAgXHQge2lkIDogMCxkaXNwbGF5TmFtZSA6ICdEZXRhaWxzJyAgLHBhdGggOiAncmVjb3JkLmRldGFpbHMnfSxcblx0XHQgICAgICAgICAgICAgICAgIFx0IHtpZCA6IDEsZGlzcGxheU5hbWUgOiAnU3VtbWFyeScgICxwYXRoIDogJ3JlY29yZC5zdW1tYXJ5J30sXG5cdFx0ICAgICAgICAgICAgICAgICBcdCB7aWQgOiAyLGRpc3BsYXlOYW1lIDogJ0Zvcm1zJyAgICAscGF0aCA6ICdyZWNvcmQuZm9ybXMnfSxcblx0XHQgICAgICAgICAgICAgICAgIFx0IHtpZCA6IDMsZGlzcGxheU5hbWUgOiAnTGFicy9Eb2NzJyxwYXRoIDogJ3BhcnRpYWxzL2Vmb3JtLmpzcCd9LFxuXHRcdCAgICAgICAgICAgICAgICAgXHQge2lkIDogNCxkaXNwbGF5TmFtZSA6ICdSeCcgICAgICAgLHBhdGggOiAncGFydGlhbHMvZWZvcm0uanNwJ31dO1xuXHRcdCovXG5cblx0XHRjb250cm9sbGVyLmluaXQgPSBmdW5jdGlvbiBpbml0KClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLmZpbGxNZW51KCk7XG5cdFx0fTtcblxuXHRcdC8vZ2V0IGFjY2VzcyByaWdodHNcblx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHQoXCJfZUNoYXJ0XCIsIFwid1wiLCBjb250cm9sbGVyLmRlbW9ncmFwaGljTm8pLnRoZW4oXG5cdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5jYW5ub3RDaGFuZ2UgPSAhcmVzdWx0cztcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblxuXHRcdC8vZGlzYWJsZSBjbGljayBhbmQga2V5cHJlc3MgaWYgdXNlciBvbmx5IGhhcyByZWFkLWFjY2Vzc1xuXHRcdGNvbnRyb2xsZXIuY2hlY2tBY3Rpb24gPSBmdW5jdGlvbiBjaGVja0FjdGlvbihldmVudClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmNhbm5vdENoYW5nZSlcblx0XHRcdHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIElzIHRoZXJlIGEgc2hhcmVkIGxvY2F0aW9uIHdoZXJlIHRoaXMgY291bGQgYmUgYWNjZXNzZWQgZnJvbSBhbnkgY29udHJvbGxlcj8gaS5lLiBhIHV0aWxzIGZpbGVcblx0XHRjb250cm9sbGVyLmlzTmFOID0gZnVuY3Rpb24obnVtKVxuXHRcdHtcblx0XHRcdHJldHVybiBpc05hTihudW0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmZpbGxNZW51ID0gZnVuY3Rpb24gZmlsbE1lbnUoKVxuXHRcdHtcblx0XHRcdHV4U2VydmljZS5tZW51KCRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnJlY29yZHRhYnMyID0gcmVzdWx0cztcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdC8vdmFyIHRyYW5zaXRpb25QID0gJHN0YXRlLnRyYW5zaXRpb25Ubyhjb250cm9sbGVyLnJlY29yZHRhYnMyWzBdLnBhdGgsJHN0YXRlUGFyYW1zLHtsb2NhdGlvbjoncmVwbGFjZScsbm90aWZ5OnRydWV9KTtcblx0XHQvL2NvbnNvbGUubG9nKFwidHJhbnNpdGlvbiBcIix0cmFuc2l0aW9uUCk7XG5cblx0XHRjb250cm9sbGVyLmNoYW5nZVRhYiA9IGZ1bmN0aW9uIGNoYW5nZVRhYih0ZW1wKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIuY3VycmVudHRhYjIgPSBjb250cm9sbGVyLnJlY29yZHRhYnMyW3RlbXAuaWRdO1xuXG5cdFx0XHRpZiAoSnVuby5Db21tb24uVXRpbC5pc0RlZmluZWRBbmROb3ROdWxsKHRlbXAuc3RhdGUpKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihKdW5vLkNvbW1vbi5VdGlsLmlzRGVmaW5lZEFuZE5vdE51bGwodGVtcC5kZW1vSWQpKXtcblx0XHRcdFx0XHQkc3RhdGUuZ28odGVtcC5zdGF0ZSxcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0ZGVtb2dyYXBoaWNObzogdGVtcC5kZW1vSWRcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCRzdGF0ZS5nbyh0ZW1wLnN0YXRlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoYW5ndWxhci5pc0RlZmluZWQodGVtcC51cmwpKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAodGVtcC5sYWJlbCA9PSBcIlJ4XCIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR3aW4gPSB0ZW1wLmxhYmVsICsgY29udHJvbGxlci5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciBybmQgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwKTtcblx0XHRcdFx0XHR3aW4gPSBcIndpblwiICsgcm5kO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHdpbmRvdy5vcGVuKHRlbXAudXJsLCB3aW4sIFwic2Nyb2xsYmFycz15ZXMsIGxvY2F0aW9uPW5vLCB3aWR0aD0xMDAwLCBoZWlnaHQ9NjAwXCIsIFwiXCIpO1xuXHRcdFx0fVxuXHRcdFx0Ly9jb25zb2xlLmxvZyhjb250cm9sbGVyLnJlY29yZHRhYnMyW3RlbXBdLnBhdGgpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmlzQWN0aXZlID0gZnVuY3Rpb24gaXNBY3RpdmUodGFiKVxuXHRcdHtcblx0XHRcdGlmKEp1bm8uQ29tbW9uLlV0aWwuaXNEZWZpbmVkQW5kTm90TnVsbCgkc3RhdGUuY3VycmVudC5uYW1lKSAmJlxuXHRcdFx0XHRKdW5vLkNvbW1vbi5VdGlsLmlzRGVmaW5lZEFuZE5vdE51bGwodGFiLnN0YXRlKSlcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuICgkc3RhdGUuY3VycmVudC5uYW1lID09PSB0YWIuc3RhdGUpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHRcdC8vIENoZWNrIGlmIHRoZXJlIGhhdmUgYmVlbiBwb3RlbnRpYWwgY2hhbmdlcyB0byBhIG5vdGUsIGRpc3BsYXkgYSB3YXJuaW5nIGlmIG5lZWRlZFxuXHRcdCR3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdGlmIChKdW5vLkNvbW1vbi5VdGlsLmlzRGVmaW5lZEFuZE5vdE51bGwoY29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUpKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZS5ub3RlLnRyaW0oKS5sZW5ndGggIT09IDAgJiYgY29udHJvbGxlci5wYWdlLmlzTm90ZVNhdmVkID09PSBmYWxzZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiAnWW91IGhhdmUgbWFkZSBjaGFuZ2VzIHRvIGEgbm90ZSwgYnV0IHlvdSBkaWQgbm90IHNhdmUgdGhlbSB5ZXQuXFxuTGVhdmluZyB0aGUgcGFnZSB3aWxsIHJldmVydCBhbGwgY2hhbmdlcy4nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdCRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG5cdFx0XHRkZWxldGUgJHdpbmRvdy5vbmJlZm9yZXVubG9hZDtcblx0XHR9KTtcblxuXHRcdC8vIFdhcm4gdXNlciBhYm91dCB1bnNhdmVkIGRhdGEgYmVmb3JlIGEgc3RhdGUgY2hhbmdlXG5cdFx0JHNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKVxuXHRcdHtcblx0XHRcdC8vIElmIHRoZSBlbmNvdW50ZXIgbm90ZSBpcyBub3QgbnVsbC91bmRlZmluZWQgYW5kIHRoZSBuZXcgc3RhdGUgaXMgbm90IGEgY2hpbGQgb2YgcmVjb3JkLCBjb250aW51ZVxuXHRcdFx0aWYgKEp1bm8uQ29tbW9uLlV0aWwuaXNEZWZpbmVkQW5kTm90TnVsbChjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZSkgJiZcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmlzTm90ZVNhdmVkID09PSBmYWxzZSAmJiBkYXRhLm5hbWUuaW5kZXhPZigncmVjb3JkLicpID09PSAtMSlcblx0XHRcdHtcblx0XHRcdFx0aWYoY29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUubm90ZS50cmltKCkubGVuZ3RoICE9PSAwKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIGRpc2NhcmQgPSBjb25maXJtKFwiWW91IGhhdmUgdW5zYXZlZCBub3RlIGRhdGEuIEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBsZWF2ZT9cIik7XG5cdFx0XHRcdFx0aWYgKCFkaXNjYXJkKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLy8vLy9BdXRvU2F2ZVxuXHRcdHZhciBzYXZlSW50ZXJ2YWxTZWNvbmRzID0gMjtcblxuXHRcdHZhciB0aW1lb3V0ID0gbnVsbDtcblx0XHR2YXIgc2F2ZVVwZGF0ZXMgPSBmdW5jdGlvbiBzYXZlVXBkYXRlcygpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5lbmNvdW50ZXJOb3RlLm5vdGUgPT0gY29udHJvbGxlci5wYWdlLmluaXROb3RlKSByZXR1cm47IC8vdXNlciBkaWQgbm90IGlucHV0IGFueXRoaW5nLCBkb24ndCBzYXZlXG5cblx0XHRcdGNvbnNvbGUubG9nKFwic2F2ZVwiLCBjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZSk7XG5cdFx0XHRub3RlU2VydmljZS50bXBTYXZlKCRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vLCBjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZSk7XG5cdFx0fTtcblx0XHR2YXIgc2tpcFRtcFNhdmUgPSBmYWxzZTtcblx0XHR2YXIgbm90ZURpcnR5ID0gZmFsc2U7XG5cblx0XHR2YXIgZGVsYXlUbXBTYXZlID0gZnVuY3Rpb24gZGVsYXlUbXBTYXZlKG5ld1ZhbCwgb2xkVmFsKVxuXHRcdHtcblx0XHRcdGNvbnNvbGUubG9nKFwid2hhdHMgdGhlIHZhbCBcIiwgKG5ld1ZhbCAhPSBvbGRWYWwpKTtcblx0XHRcdGlmICghc2tpcFRtcFNhdmUpXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChuZXdWYWwgIT0gb2xkVmFsKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bm90ZURpcnR5ID0gdHJ1ZTtcblx0XHRcdFx0XHRpZiAodGltZW91dClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHQkdGltZW91dC5jYW5jZWwodGltZW91dCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVvdXQgPSAkdGltZW91dChzYXZlVXBkYXRlcywgc2F2ZUludGVydmFsU2Vjb25kcyAqIDEwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5vdGVEaXJ0eSA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRza2lwVG1wU2F2ZSA9IGZhbHNlOyAvLyBvbmx5IHNraXAgb25jZVxuXHRcdH07XG5cdFx0JHNjb3BlLiR3YXRjaCgnY29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUubm90ZScsIGRlbGF5VG1wU2F2ZSk7XG5cblx0XHQvLy8vLy9cblxuXHRcdC8vLy8vL1RpbWVyXG5cdFx0dmFyIGQgPSBuZXcgRGF0ZSgpOyAvL3RoZSBzdGFydFxuXG5cdFx0dmFyIHRvdGFsU2Vjb25kcyA9IDA7XG5cdFx0dmFyIG15VmFyID0gc2V0SW50ZXJ2YWwoc2V0VGltZSwgMTAwMCk7XG5cblx0XHRjb250cm9sbGVyLmdldEN1cnJlbnRUaW1lclRvZ2dsZSA9IGZ1bmN0aW9uIGdldEN1cnJlbnRUaW1lclRvZ2dsZSgpXG5cdFx0e1xuXHRcdFx0aWYgKGFuZ3VsYXIuaXNEZWZpbmVkKG15VmFyKSlcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIFwiZmEtcGF1c2VcIjtcblx0XHRcdH1cblx0XHRcdHJldHVybiBcImZhLXBsYXlcIjtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci50b2dnbGVUaW1lciA9IGZ1bmN0aW9uIHRvZ2dsZVRpbWVyKClcblx0XHR7XG5cdFx0XHRpZiAoJChcIiNhVG9nZ2xlXCIpLmhhc0NsYXNzKFwiZmEtcGF1c2VcIikpXG5cdFx0XHR7XG5cdFx0XHRcdCQoXCIjYVRvZ2dsZVwiKS5yZW1vdmVDbGFzcyhcImZhLXBhdXNlXCIpO1xuXHRcdFx0XHQkKFwiI2FUb2dnbGVcIikuYWRkQ2xhc3MoXCJmYS1wbGF5XCIpO1xuXHRcdFx0XHRjbGVhckludGVydmFsKG15VmFyKTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0JChcIiNhVG9nZ2xlXCIpLnJlbW92ZUNsYXNzKFwiZmEtcGxheVwiKTtcblx0XHRcdFx0JChcIiNhVG9nZ2xlXCIpLmFkZENsYXNzKFwiZmEtcGF1c2VcIik7XG5cdFx0XHRcdG15VmFyID0gc2V0SW50ZXJ2YWwoc2V0VGltZSwgMTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucGFzdGVUaW1lciA9IGZ1bmN0aW9uIHBhc3RlVGltZXIoKVxuXHRcdHtcblx0XHRcdHZhciBlZCA9IG5ldyBEYXRlKCk7XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZS5ub3RlICs9IFwiXFxuXCIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJ0VGFnXCIpLnZhbHVlICsgXCI6IFwiICsgZC5nZXRIb3VycygpICsgXCI6XCIgKyBwYWQoZC5nZXRNaW51dGVzKCkpICsgXCJcXG5cIiArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZW5kVGFnXCIpLnZhbHVlICsgXCI6IFwiICsgZWQuZ2V0SG91cnMoKSArIFwiOlwiICsgcGFkKGVkLmdldE1pbnV0ZXMoKSkgKyBcIlxcblwiICsgcGFkKHBhcnNlSW50KHRvdGFsU2Vjb25kcyAvIDM2MDApKSArIFwiOlwiICsgcGFkKHBhcnNlSW50KCh0b3RhbFNlY29uZHMgLyA2MCkgJSA2MCkpICsgXCI6XCIgKyBwYWQodG90YWxTZWNvbmRzICUgNjApO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBzZXRUaW1lKClcblx0XHR7XG5cdFx0XHQrK3RvdGFsU2Vjb25kcztcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYVRpbWVyXCIpLmlubmVySFRNTCA9IHBhZChwYXJzZUludCh0b3RhbFNlY29uZHMgLyA2MCkpICsgXCI6XCIgKyBwYWQodG90YWxTZWNvbmRzICUgNjApO1xuXHRcdFx0aWYgKHRvdGFsU2Vjb25kcyA9PSAxMjAwKVxuXHRcdFx0e1xuXHRcdFx0XHQkKFwiI2FUaW1lclwiKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsIFwiI0RGRjBEOFwiKTtcblx0XHRcdH0gLy8xMjAwIHNlYyA9IDIwIG1pbiBsaWdodCBncmVlblxuXHRcdFx0aWYgKHRvdGFsU2Vjb25kcyA9PSAzMDAwKVxuXHRcdFx0e1xuXHRcdFx0XHQkKFwiI2FUaW1lclwiKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsIFwiI0ZERkVDN1wiKTtcblx0XHRcdH0gLy8zNjAwIHNlYyA9IDUwIG1pbiBsaWdodCB5ZWxsb3dcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYWQodmFsKVxuXHRcdHtcblx0XHRcdHZhciB2YWxTdHJpbmcgPSB2YWwgKyBcIlwiO1xuXHRcdFx0aWYgKHZhbFN0cmluZy5sZW5ndGggPCAyKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gXCIwXCIgKyB2YWxTdHJpbmc7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiB2YWxTdHJpbmc7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdCRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGNsZWFySW50ZXJ2YWwobXlWYXIpO1xuXHRcdH0pO1xuXHRcdC8vLy8vL1x0XHRcblxuXG5cdFx0Ly8gTm90ZSBJbnB1dCBMb2dpY1xuXHRcdGNvbnRyb2xsZXIudG9nZ2xlTm90ZSA9IGZ1bmN0aW9uIHRvZ2dsZU5vdGUoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLiRzdG9yYWdlLmhpZGVOb3RlKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLiRzdG9yYWdlLmhpZGVOb3RlID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuJHN0b3JhZ2UuaGlkZU5vdGUgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBUT0RPXG5cdFx0Y29udHJvbGxlci5jYW5jZWxOb3RlRWRpdCA9IGZ1bmN0aW9uIGNhbmNlbE5vdGVFZGl0KClcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZygnQ0FOQ0VMTElORyBFRElUJyk7XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZSA9IG51bGw7XG5cdFx0XHQkcm9vdFNjb3BlLiRlbWl0KCdzdG9wRWRpdGluZ05vdGUnKTtcblx0XHRcdHNraXBUbXBTYXZlID0gdHJ1ZTtcblx0XHRcdGNvbnRyb2xsZXIuZ2V0Q3VycmVudE5vdGUoZmFsc2UpO1xuXHRcdFx0Y29udHJvbGxlci5yZW1vdmVFZGl0aW5nTm90ZUZsYWcoKTtcblx0XHRcdGNvbnRyb2xsZXIuJHN0b3JhZ2UuaGlkZU5vdGUgPSB0cnVlO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmVOb3RlID0gZnVuY3Rpb24gc2F2ZU5vdGUoKVxuXHRcdHtcblx0XHRcdC8vIERvbid0IGxldCB1c2VycyBzYXZlIGFuIGVtcHR5IG5vdGVcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZS5ub3RlLmxlbmd0aCA9PT0gMClcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQoXCJDYW4ndCBzYXZlIGEgYmxhbmsgbm90ZSFcIik7IC8vIFBsYWNlaG9sZGVyIGVycm9yIGhhbmRsaW5nXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSBuZXcgbm90ZSwgaWYgaXQgaXNuJ3QsIHdlIGRvbid0IHdhbnQgdG8gb3ZlcndyaXRlIHRoZSBleGlzdGluZyBvYnNlcnZhdGlvbkRhdGVcblx0XHRcdC8vIE5lZWQgdG8gZmluZCBhIGJldHRlciB3YXkgb2YgcHJldmVudGluZyB0aGlzIGRhdGUgb3ZlcndyaXRlXG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZS5hc3NpZ25lZElzc3VlcyA9IGNvbnRyb2xsZXIucGFnZS5hc3NpZ25lZENNSXNzdWVzO1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUuaXNzdWVEZXNjcmlwdGlvbnMgPSBbXTtcblx0XHRcdGlmKCFKdW5vLkNvbW1vbi5VdGlsLmlzSW5BcnJheSh1c2VyLmRpc3BsYXlOYW1lLCAgY29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUuZWRpdG9yTmFtZXMpKVxuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZS5lZGl0b3JOYW1lcy5wdXNoKHVzZXIuZGlzcGxheU5hbWUpO1xuXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRyb2xsZXIucGFnZS5hc3NpZ25lZENNSXNzdWVzLmxlbmd0aDsgaSsrKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBpZiAoY29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUuaXNzdWVEZXNjcmlwdGlvbnMgPT0gbnVsbClcblx0XHRcdFx0Ly8ge1xuXHRcdFx0XHQvLyBcdGNvbnRyb2xsZXIucGFnZS5lbmNvdW50ZXJOb3RlLmlzc3VlRGVzY3JpcHRpb25zID0gY29udHJvbGxlci5wYWdlLmFzc2lnbmVkQ01Jc3N1ZXNbaV0uaXNzdWUuZGVzY3JpcHRpb247XG5cdFx0XHRcdC8vIH1cblx0XHRcdFx0Ly8gZWxzZVxuXHRcdFx0XHQvLyB7XG5cdFx0XHRcdC8vIFx0Y29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUuaXNzdWVEZXNjcmlwdGlvbnMgKz0gXCIsXCIgKyBjb250cm9sbGVyLnBhZ2UuYXNzaWduZWRDTUlzc3Vlc1tpXS5pc3N1ZS5kZXNjcmlwdGlvbjtcblx0XHRcdFx0Ly8gfVxuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZS5pc3N1ZURlc2NyaXB0aW9ucy5wdXNoKGNvbnRyb2xsZXIucGFnZS5hc3NpZ25lZENNSXNzdWVzW2ldLmlzc3VlLmRlc2NyaXB0aW9uKTtcblx0XHRcdH1cblxuXHRcdFx0bm90ZVNlcnZpY2Uuc2F2ZU5vdGUoJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm8sIGNvbnRyb2xsZXIucGFnZS5lbmNvdW50ZXJOb3RlKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuaXNOb3RlU2F2ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdCRyb290U2NvcGUuJGVtaXQoJ25vdGVTYXZlZCcsIHJlc3VsdHMpO1xuXHRcdFx0XHRcdHNraXBUbXBTYXZlID0gdHJ1ZTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZSA9IHJlc3VsdHM7XG5cdFx0XHRcdFx0Y29udHJvbGxlci4kc3RvcmFnZS5oaWRlTm90ZSA9IHRydWU7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5nZXRDdXJyZW50Tm90ZShmYWxzZSk7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmFzc2lnbmVkQ01Jc3N1ZXMgPSBbXTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRjb250cm9sbGVyLnJlbW92ZUVkaXRpbmdOb3RlRmxhZygpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmVTaWduTm90ZSA9IGZ1bmN0aW9uIHNhdmVTaWduTm90ZSgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUuaXNTaWduZWQgPSB0cnVlO1xuXHRcdFx0Y29udHJvbGxlci5zYXZlTm90ZSgpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmVTaWduVmVyaWZ5Tm90ZSA9IGZ1bmN0aW9uIHNhdmVTaWduVmVyaWZ5Tm90ZSgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUuaXNWZXJpZmllZCA9IHRydWU7XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZS5pc1NpZ25lZCA9IHRydWU7XG5cdFx0XHRjb250cm9sbGVyLnNhdmVOb3RlKCk7XG5cdFx0fTtcblxuXHRcdGJpbGxpbmdTZXJ2aWNlLmdldEJpbGxpbmdSZWdpb24oKS50aGVuKFxuXHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuYmlsbHJlZ2lvbiA9IHJlc3VsdHMubWVzc2FnZTtcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblx0XHRiaWxsaW5nU2VydmljZS5nZXREZWZhdWx0VmlldygpLnRoZW4oXG5cdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5kZWZhdWx0VmlldyA9IHJlc3VsdHMubWVzc2FnZTtcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblx0XHRpZiAoJGxvY2F0aW9uLnNlYXJjaCgpLmFwcG9pbnRtZW50Tm8gIT0gbnVsbClcblx0XHR7XG5cdFx0XHRzY2hlZHVsZVNlcnZpY2UuZ2V0QXBwb2ludG1lbnQoJGxvY2F0aW9uLnNlYXJjaCgpLmFwcG9pbnRtZW50Tm8pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5hcHBvaW50bWVudCA9IHJlc3VsdHM7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGNvbnRyb2xsZXIuc2F2ZVNpZ25CaWxsTm90ZSA9IGZ1bmN0aW9uIHNhdmVTaWduQmlsbE5vdGUoKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5lbmNvdW50ZXJOb3RlLmlzU2lnbmVkID0gdHJ1ZTtcblx0XHRcdGNvbnRyb2xsZXIuc2F2ZU5vdGUoKTtcblxuXHRcdFx0dmFyIGR4Q29kZSA9IFwiXCI7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRyb2xsZXIucGFnZS5hc3NpZ25lZENNSXNzdWVzLmxlbmd0aDsgaSsrKVxuXHRcdFx0e1xuXHRcdFx0XHRkeENvZGUgKz0gXCImZHhDb2RlPVwiICsgY29udHJvbGxlci5wYWdlLmFzc2lnbmVkQ01Jc3N1ZXNbaV0uaXNzdWUuY29kZS5zdWJzdHJpbmcoMCwgMyk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBhcHB0Tm8gPSBcIlwiLFxuXHRcdFx0XHRhcHB0UHJvdmlkZXIgPSBcIlwiLFxuXHRcdFx0XHRhcHB0RGF0ZSA9IFwiXCIsXG5cdFx0XHRcdGFwcHRTdGFydFRpbWUgPSBcIlwiO1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5hcHBvaW50bWVudCAhPSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRhcHB0Tm8gPSBjb250cm9sbGVyLnBhZ2UuYXBwb2ludG1lbnQuaWQ7XG5cdFx0XHRcdGFwcHRQcm92aWRlciA9IGNvbnRyb2xsZXIucGFnZS5hcHBvaW50bWVudC5wcm92aWRlck5vO1xuXHRcdFx0XHR2YXIgZHQgPSBtb21lbnQoY29udHJvbGxlci5wYWdlLmFwcG9pbnRtZW50LmFwcG9pbnRtZW50RGF0ZSkudG9EYXRlKCk7XG5cdFx0XHRcdGFwcHREYXRlID0gZHQuZ2V0RnVsbFllYXIoKSArIFwiLVwiICsgemVybyhkdC5nZXRNb250aCgpICsgMSkgKyBcIi1cIiArIHplcm8oZHQuZ2V0RGF0ZSgpKTtcblx0XHRcdFx0ZHQgPSBuZXcgRGF0ZShjb250cm9sbGVyLnBhZ2UuYXBwb2ludG1lbnQuc3RhcnRUaW1lKTtcblx0XHRcdFx0YXBwdFN0YXJ0VGltZSA9IHplcm8oZHQuZ2V0SG91cnMoKSkgKyBcIjpcIiArIHplcm8oZHQuZ2V0TWludXRlcygpKSArIFwiOlwiICsgemVybyhkdC5nZXRTZWNvbmRzKCkpO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgdXJsID0gXCIuLi9iaWxsaW5nLmRvP2JpbGxSZWdpb249XCIgKyBlbmNvZGVVUklDb21wb25lbnQoY29udHJvbGxlci5wYWdlLmJpbGxyZWdpb24pO1xuXHRcdFx0dXJsICs9IFwiJmJpbGxGb3JtPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGNvbnRyb2xsZXIucGFnZS5kZWZhdWx0Vmlldyk7XG5cdFx0XHR1cmwgKz0gXCImZGVtb2dyYXBoaWNfbmFtZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChkZW1vLmxhc3ROYW1lICsgXCIsXCIgKyBkZW1vLmZpcnN0TmFtZSk7XG5cdFx0XHR1cmwgKz0gXCImZGVtb2dyYXBoaWNfbm89XCIgKyBkZW1vLmRlbW9ncmFwaGljTm87XG5cdFx0XHR1cmwgKz0gXCImcHJvdmlkZXJ2aWV3PVwiICsgdXNlci5wcm92aWRlck5vICsgXCImdXNlcl9ubz1cIiArIHVzZXIucHJvdmlkZXJObztcblx0XHRcdHVybCArPSBcIiZhcHBvaW50bWVudF9ubz1cIiArIGFwcHRObyArIFwiJmFwcHRQcm92aWRlcl9ubz1cIiArIGFwcHRQcm92aWRlcjtcblx0XHRcdHVybCArPSBcIiZhcHBvaW50bWVudF9kYXRlPVwiICsgYXBwdERhdGUgKyBcIiZzdGFydF90aW1lPVwiICsgYXBwdFN0YXJ0VGltZTtcblx0XHRcdHVybCArPSBcIiZob3RjbGljaz0mc3RhdHVzPXQmYk5ld0Zvcm09MVwiICsgZHhDb2RlO1xuXG5cdFx0XHR3aW5kb3cub3Blbih1cmwsIFwiYmlsbGluZ1dpblwiLCBcInNjcm9sbGJhcnM9eWVzLCBsb2NhdGlvbj1ubywgd2lkdGg9XCIgKyBzY3JlZW4ud2lkdGggKyBcIiwgaGVpZ2h0PVwiICsgc2NyZWVuLmhlaWdodCwgXCJcIik7XG5cdFx0fTtcblxuXG5cdFx0Y29uc29sZS5sb2coJ1JlY29yZEN0cmxFbmQnLCAkc3RhdGUpO1xuXG5cdFx0Y29udHJvbGxlci5wYWdlLmN1cnJlbnROb3RlQ29uZmlnID0ge307XG5cblxuXHRcdGNvbnRyb2xsZXIuZ2V0SXNzdWVOb3RlID0gZnVuY3Rpb24gZ2V0SXNzdWVOb3RlKClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUubm90ZUlkICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdG5vdGVTZXJ2aWNlLmdldElzc3VlTm90ZShjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZS5ub3RlSWQpLnRoZW4oXG5cdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmIChyZXN1bHRzICE9IG51bGwpIGNvbnRyb2xsZXIucGFnZS5hc3NpZ25lZENNSXNzdWVzID0gdG9BcnJheShyZXN1bHRzLmFzc2lnbmVkQ01Jc3N1ZXMpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZ2V0Q3VycmVudE5vdGUgPSBmdW5jdGlvbiBnZXRDdXJyZW50Tm90ZShzaG93Tm90ZUFmdGVyTG9hZGluZ0ZsYWcpXG5cdFx0e1xuXHRcdFx0bm90ZVNlcnZpY2UuZ2V0Q3VycmVudE5vdGUoJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm8sICRsb2NhdGlvbi5zZWFyY2goKSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUgPSByZXN1bHRzO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5pbml0Tm90ZSA9IHJlc3VsdHMubm90ZTsgLy9jb21wYXJlIHRoaXMgd2l0aCBjdXJyZW50IG5vdGUgY29udGVudCB0byBkZXRlcm1pbmUgdG1wc2F2ZSBvciBub3Rcblx0XHRcdFx0XHRjb250cm9sbGVyLmdldElzc3VlTm90ZSgpO1xuXHRcdFx0XHRcdC8vIGNvbnRyb2xsZXIuaGlkZU5vdGUgPSBzaG93Tm90ZUFmdGVyTG9hZGluZ0ZsYWc7XG5cdFx0XHRcdFx0Ly8gY29udHJvbGxlci4kc3RvcmFnZS5oaWRlTm90ZSA9IHNob3dOb3RlQWZ0ZXJMb2FkaW5nRmxhZztcblx0XHRcdFx0XHQkcm9vdFNjb3BlLiRlbWl0KCdjdXJyZW50bHlFZGl0aW5nTm90ZScsIGNvbnRyb2xsZXIucGFnZS5lbmNvdW50ZXJOb3RlKTtcblx0XHRcdFx0XHRjb250cm9sbGVyLmluaXRBcHBlbmROb3RlRWRpdG9yKCk7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5pbml0T2JzZXJ2YXRpb25EYXRlKCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmdldEN1cnJlbnROb3RlKHRydWUpO1xuXG5cdFx0Y29udHJvbGxlci5lZGl0Tm90ZSA9IGZ1bmN0aW9uIGVkaXROb3RlKG5vdGUpXG5cdFx0e1xuXHRcdFx0JHJvb3RTY29wZS4kZW1pdCgnJywgbm90ZSk7XG5cdFx0fTtcblxuXHRcdCRyb290U2NvcGUuJG9uKCdsb2FkTm90ZUZvckVkaXQnLCBmdW5jdGlvbihldmVudCwgZGF0YSlcblx0XHR7XG5cdFx0XHQvLyBDaGVjayBpZiBhbm90aGVyIG5vdGUgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZFxuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5lZGl0aW5nTm90ZUlkICE9PSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZygnTm90ZSBpcyBhbHJlYWR5IGJlaW5nIGVkaXRlZCEgRG8geW91IHdhbnQgdG8gc2F2ZSBjaGFuZ2VzPycpO1xuXHRcdFx0XHRjb250cm9sbGVyLmRpc3BsYXlXYXJuaW5nKGRhdGEpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZSA9IGFuZ3VsYXIuY29weShkYXRhKTtcblx0XHRcdGNvbnRyb2xsZXIuZ2V0SXNzdWVOb3RlKCk7XG5cblx0XHRcdC8vTmVlZCB0byBjaGVjayBpZiBub3RlIGhhcyBiZWVuIHNhdmVkIHlldC5cblx0XHRcdGNvbnRyb2xsZXIuJHN0b3JhZ2UuaGlkZU5vdGUgPSBmYWxzZTtcblx0XHRcdCRyb290U2NvcGUuJGVtaXQoJ2N1cnJlbnRseUVkaXRpbmdOb3RlJywgY29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUpO1xuXG5cdFx0XHRjb250cm9sbGVyLnJlbW92ZUVkaXRpbmdOb3RlRmxhZygpO1xuXHRcdH0pO1xuXG5cdFx0Y29udHJvbGxlci5pbml0QXBwZW5kTm90ZUVkaXRvciA9IGZ1bmN0aW9uIGluaXRBcHBlbmROb3RlRWRpdG9yKClcblx0XHR7XG5cdFx0XHRpZiAoJGxvY2F0aW9uLnNlYXJjaCgpLm5vdGVFZGl0b3JUZXh0ICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5lbmNvdW50ZXJOb3RlLm5vdGUgPSBjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZS5ub3RlICsgJGxvY2F0aW9uLnNlYXJjaCgpLm5vdGVFZGl0b3JUZXh0O1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBJbml0aWFsaXplIHRoZSBvYnNlcnZhdGlvbkRhdGUgZm9yIG5ldyBub3Rlc1xuXHRcdGNvbnRyb2xsZXIuaW5pdE9ic2VydmF0aW9uRGF0ZSA9IGZ1bmN0aW9uIGluaXRPYnNlcnZhdGlvbkRhdGUoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZW5jb3VudGVyTm90ZS5vYnNlcnZhdGlvbkRhdGUgPT09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5lbmNvdW50ZXJOb3RlLm9ic2VydmF0aW9uRGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXG5cdFx0JHJvb3RTY29wZS4kb24oXCIkc3RhdGVDaGFuZ2VTdGFydFwiLCBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5yZW1vdmVFZGl0aW5nTm90ZUZsYWcoKTtcblx0XHR9KTtcblxuXHRcdGNvbnRyb2xsZXIuZG9TZXRFZGl0aW5nTm90ZUZsYWcgPSBmdW5jdGlvbiBkb1NldEVkaXRpbmdOb3RlRmxhZygpXG5cdFx0e1xuXHRcdFx0bm90ZVNlcnZpY2Uuc2V0RWRpdGluZ05vdGVGbGFnKGNvbnRyb2xsZXIucGFnZS5lZGl0aW5nTm90ZUlkLCB1c2VyLnByb3ZpZGVyTm8pLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmICghcmVzdWx0cy5zdWNjZXNzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmIChyZXN1bHRzLm1lc3NhZ2UgPT0gXCJQYXJhbWV0ZXIgZXJyb3JcIikgYWxlcnQoXCJQYXJhbWV0ZXIgRXJyb3I6IG5vdGVVVUlEW1wiICsgY29udHJvbGxlci5wYWdlLmVkaXRpbmdOb3RlSWQgKyBcIl0gdXNlcklkW1wiICsgdXNlci5wcm92aWRlck5vICsgXCJdXCIpO1xuXHRcdFx0XHRcdFx0ZWxzZSBhbGVydChcIldhcm5pbmchIEFub3RoZXIgdXNlciBpcyBlZGl0aW5nIHRoaXMgbm90ZSBub3cuXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2V0RWRpdGluZ05vdGVGbGFnID0gZnVuY3Rpb24gc2V0RWRpdGluZ05vdGVGbGFnKClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUudXVpZCA9PSBudWxsKSByZXR1cm47XG5cdFx0XHRjb250cm9sbGVyLnBhZ2UuaXNOb3RlU2F2ZWQgPSBmYWxzZTtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5lZGl0aW5nTm90ZUlkID0gY29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUudXVpZDtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuaXR2U2V0ID09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5pdHZTZXQgPSAkaW50ZXJ2YWwoY29udHJvbGxlci5kb1NldEVkaXRpbmdOb3RlRmxhZygpLCAzMDAwMCk7IC8vc2V0IGZsYWcgZXZlcnkgNSBtaW4gdW50aWwgY2FuY2VsZWRcblx0XHRcdH1cblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuaXR2Q2hlY2sgPT0gbnVsbClcblx0XHRcdHsgLy93YXJuIG9uY2Ugb25seSB3aGVuIHRoZSAxc3QgdGltZSBhbm90aGVyIHVzZXIgdHJpZXMgdG8gZWRpdCB0aGlzIG5vdGVcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLml0dkNoZWNrID0gJGludGVydmFsKGZ1bmN0aW9uKClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5vdGVTZXJ2aWNlLmNoZWNrRWRpdE5vdGVOZXcoY29udHJvbGxlci5wYWdlLmVkaXRpbmdOb3RlSWQsIHVzZXIucHJvdmlkZXJObykudGhlbihcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0aWYgKCFyZXN1bHRzLnN1Y2Nlc3MpXG5cdFx0XHRcdFx0XHRcdHsgLy9zb21lb25lIGVsc2Ugd2FudHMgdG8gZWRpdCB0aGlzIG5vdGVcblx0XHRcdFx0XHRcdFx0XHRhbGVydChcIldhcm5pbmchIEFub3RoZXIgdXNlciB0cmllcyB0byBlZGl0IHRoaXMgbm90ZS4gWW91ciB1cGRhdGUgbWF5IGJlIHJlcGxhY2VkIGJ5IGxhdGVyIHJldmlzaW9uKHMpLlwiKTtcblx0XHRcdFx0XHRcdFx0XHQkaW50ZXJ2YWwuY2FuY2VsKGNvbnRyb2xsZXIucGFnZS5pdHZDaGVjayk7XG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLml0dkNoZWNrID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9LCAxMDAwMCk7IC8vY2hlY2sgZm9yIG5ldyBlZGl0IGV2ZXJ5IDEwIHNlY29uZHNcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5yZW1vdmVFZGl0aW5nTm90ZUZsYWcgPSBmdW5jdGlvbiByZW1vdmVFZGl0aW5nTm90ZUZsYWcoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuZWRpdGluZ05vdGVJZCAhPSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRub3RlU2VydmljZS5yZW1vdmVFZGl0aW5nTm90ZUZsYWcoY29udHJvbGxlci5wYWdlLmVkaXRpbmdOb3RlSWQsIHVzZXIucHJvdmlkZXJObyk7XG5cdFx0XHRcdCRpbnRlcnZhbC5jYW5jZWwoY29udHJvbGxlci5wYWdlLml0dlNldCk7XG5cdFx0XHRcdCRpbnRlcnZhbC5jYW5jZWwoY29udHJvbGxlci5wYWdlLml0dkNoZWNrKTtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLml0dlNldCA9IG51bGw7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5pdHZDaGVjayA9IG51bGw7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5lZGl0aW5nTm90ZUlkID0gbnVsbDtcblx0XHRcdH1cblx0XHR9O1xuXG5cblx0XHRjb250cm9sbGVyLnNlYXJjaFRlbXBsYXRlcyA9IGZ1bmN0aW9uIHNlYXJjaFRlbXBsYXRlcyh0ZXJtKVxuXHRcdHtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdG5hbWU6IHRlcm1cblx0XHRcdH07XG5cblx0XHRcdHJldHVybiB1eFNlcnZpY2Uuc2VhcmNoVGVtcGxhdGVzKHNlYXJjaCwgMCwgMjUpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciByZXNwID0gW107XG5cdFx0XHRcdFx0Zm9yICh2YXIgeCA9IDA7IHggPCByZXN1bHRzLnRlbXBsYXRlcy5sZW5ndGg7IHgrKylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXNwLnB1c2goXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGVuY291bnRlclRlbXBsYXRlTmFtZTogcmVzdWx0cy50ZW1wbGF0ZXNbeF0uZW5jb3VudGVyVGVtcGxhdGVOYW1lXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3A7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmluc2VydFRlbXBsYXRlID0gZnVuY3Rpb24gaW5zZXJ0VGVtcGxhdGUoaXRlbSwgbW9kZWwsIGxhYmVsKVxuXHRcdHtcblx0XHRcdFxuXHRcdFx0dXhTZXJ2aWNlLmdldFRlbXBsYXRlKFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiBtb2RlbFxuXHRcdFx0fSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYgKHJlc3VsdHMudGVtcGxhdGVzICE9PSBudWxsKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHZhciB0ZW1wbGF0ZSA9IHJlc3VsdHMudGVtcGxhdGVzWzBdO1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmVuY291bnRlck5vdGUubm90ZSA9IGNvbnRyb2xsZXIucGFnZS5lbmNvdW50ZXJOb3RlLm5vdGUgKyB0ZW1wbGF0ZS5lbmNvdW50ZXJUZW1wbGF0ZVZhbHVlO1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5vcHRpb25zID0ge1xuXHRcdFx0XHRcdFx0XHRtYWdpY1ZhbDogJydcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmRpc3BsYXlXYXJuaW5nID0gZnVuY3Rpb24gZGlzcGxheVdhcm5pbmcobm90ZVRvRWRpdClcblx0XHR7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKFxuXHRcdFx0e1xuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZWNvcmQvc3VtbWFyeS9zYXZlV2FybmluZy5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnUmVjb3JkLlN1bW1hcnkuU2F2ZVdhcm5pbmdDb250cm9sbGVyIGFzIHNhdmVXYXJuaW5nQ3RybCcsXG5cdFx0XHRcdGJhY2tkcm9wOiAnc3RhdGljJyxcblx0XHRcdFx0c2l6ZTogJ21kJyxcblx0XHRcdFx0cmVzb2x2ZTpcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNhdmVTaWduTm90ZTogZnVuY3Rpb24oKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJldHVybiBjb250cm9sbGVyLnNhdmVTaWduTm90ZTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGNhbmNlbE5vdGVFZGl0OiBmdW5jdGlvbigpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbnRyb2xsZXIuY2FuY2VsTm90ZUVkaXQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gTWlnaHQgbmVlZCB0byBrZWVwIHRoaXMgdG8gY29udGludWUgdGhlIG9yaWdpbmFsIGVkaXQgYWN0aW9uXG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhyZXN1bHRzKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ01vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNlYXJjaElzc3VlcyA9IGZ1bmN0aW9uIHNlYXJjaElzc3Vlcyh0ZXJtKVxuXHRcdHtcblx0XHRcdGNvbnNvbGUubG9nKCdTRUFSQ0hJTkcgRk9SIElTU1VFOiAnLCB0ZXJtKTtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdCd0ZXJtJzogdGVybVxuXHRcdFx0fTtcblx0XHRcdHJldHVybiBub3RlU2VydmljZS5zZWFyY2hJc3N1ZXMoc2VhcmNoLCAwLCAxMDApLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciByZXNwID0gW107XG5cdFx0XHRcdFx0Zm9yICh2YXIgeCA9IDA7IHggPCByZXN1bHRzLmNvbnRlbnQubGVuZ3RoOyB4KyspXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmVzcC5wdXNoKFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRpc3N1ZUlkOiByZXN1bHRzLmNvbnRlbnRbeF0uaWQsXG5cdFx0XHRcdFx0XHRcdGNvZGU6IHJlc3VsdHMuY29udGVudFt4XS5kZXNjcmlwdGlvbiArICcoJyArIHJlc3VsdHMuY29udGVudFt4XS5jb2RlICsgJyknXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHJlc3VsdHMudG90YWwgPiByZXN1bHRzLmNvbnRlbnQubGVuZ3RoKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vd2FybiB1c2VyIHRoZXJlJ3MgbW9yZSByZXN1bHRzIHNvbWVob3c/XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXNwO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5hc3NpZ25Jc3N1ZSA9IGZ1bmN0aW9uIGFzc2lnbklzc3VlKGl0ZW0sIG1vZGVsLCBsYWJlbClcblx0XHR7XG5cdFx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IGNvbnRyb2xsZXIucGFnZS5hc3NpZ25lZENNSXNzdWVzLmxlbmd0aDsgeCsrKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmFzc2lnbmVkQ01Jc3N1ZXNbeF0uaXNzdWUuaWQgPT0gbW9kZWwpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0bm90ZVNlcnZpY2UuZ2V0SXNzdWUobW9kZWwpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciBjbUlzc3VlID0ge1xuXHRcdFx0XHRcdFx0YWN1dGU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0Y2VydGFpbjogZmFsc2UsXG5cdFx0XHRcdFx0XHRpc3N1ZTogcmVzdWx0cyxcblx0XHRcdFx0XHRcdGlzc3VlX2lkOiBpdGVtLmlzc3VlSWQsXG5cdFx0XHRcdFx0XHRtYWpvcjogZmFsc2UsXG5cdFx0XHRcdFx0XHRyZXNvbHZlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHR1bnNhdmVkOiB0cnVlXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuYXNzaWduZWRDTUlzc3Vlcy5wdXNoKGNtSXNzdWUpO1xuXG5cdFx0XHRcdFx0JHNjb3BlLiRicm9hZGNhc3QoJ25vdGVJc3N1ZUFkZGVkJyk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnJlbW92ZUlzc3VlID0gZnVuY3Rpb24gcmVtb3ZlSXNzdWUoaSlcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZygncmVtb3ZlZCBpc3N1ZSBpbiByZWNvcmQgY3RybCcpO1xuXHRcdFx0aS51bmNoZWNrZWQgPSB0cnVlO1xuXHRcdFx0dmFyIG5ld0xpc3QgPSBbXTtcblx0XHRcdGZvciAodmFyIHggPSAwOyB4IDwgY29udHJvbGxlci5wYWdlLmFzc2lnbmVkQ01Jc3N1ZXMubGVuZ3RoOyB4KyspXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuYXNzaWduZWRDTUlzc3Vlc1t4XS5pc3N1ZV9pZCAhPSBpLmlzc3VlX2lkKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmV3TGlzdC5wdXNoKGNvbnRyb2xsZXIucGFnZS5hc3NpZ25lZENNSXNzdWVzW3hdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Y29udHJvbGxlci5wYWdlLmFzc2lnbmVkQ01Jc3N1ZXMgPSBuZXdMaXN0O1xuXG5cdFx0XHQkc2NvcGUuJGJyb2FkY2FzdCgnbm90ZUlzc3VlUmVtb3ZlZCcpO1xuXHRcdH07XG5cblx0XHQvLyBJZiBpbnZlcnNlID09PSBmYWxzZSwgcmV0dXJuIHRydWUgaWYgdGhlIGdpdmVuIGl0ZW0gaXMgc3VwcG9zZWQgdG8gYmUgc2hvd24gb3V0aXNkZSB0aGUgJ21vcmUnIGRyb3Bkb3duIG9uIHRoZSBtZWRpdW0gdmlld1xuXHRcdC8vIElmIGludmVyc2UgPT09IHRydWUsIHJldHVybiB0aGUgaW52ZXJzZSBvZiB0aGUgYWJvdmUgc3RhdGVtZW50LFxuXHRcdGNvbnRyb2xsZXIubWVkaXVtTmF2SXRlbUZpbHRlciA9IGZ1bmN0aW9uIG1lZGl1bU5hdkl0ZW1GaWx0ZXIoaW52ZXJzZSlcblx0XHR7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oaXRlbSlcblx0XHRcdHtcblx0XHRcdFx0dmFyIGxhYmVsc1RvU2hvdyA9IFsnRGV0YWlscycsICdTdW1tYXJ5JywgJ0Zvcm1zJywgJ1RpY2tsZXInLCAnSGVhbHRoIFRyYWNrZXInLCAnUngnLCAnQ29uc3VsdGF0aW9ucyddO1xuXHRcdFx0XHR2YXIgZmlsdGVyVmFsdWUgPSAkLmluQXJyYXkoaXRlbS5sYWJlbCwgbGFiZWxzVG9TaG93KSAhPSAtMTtcblxuXHRcdFx0XHRpZiAoaW52ZXJzZSA9PT0gdHJ1ZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiAhZmlsdGVyVmFsdWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZmlsdGVyVmFsdWU7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmRlbW9ncmFwaGljLmFnZSA9IEp1bm8uQ29tbW9uLlV0aWwuY2FsY0FnZShjb250cm9sbGVyLmRlbW9ncmFwaGljLmRvYlllYXIsIGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMuZG9iTW9udGgsIGNvbnRyb2xsZXIuZGVtb2dyYXBoaWMuZG9iRGF5KTtcblx0XHRjb250cm9sbGVyLmluaXQoKTtcblx0fVxuXSk7XG5cbmZ1bmN0aW9uIHRvQXJyYXkob2JqKVxueyAvL2NvbnZlcnQgc2luZ2xlIG9iamVjdCB0byBhcnJheVxuXHRpZiAob2JqIGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBvYmo7XG5cdGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIFtdO1xuXHRyZXR1cm4gW29ial07XG59XG5cbmZ1bmN0aW9uIHplcm8obilcbntcblx0aWYgKG4gPCAxMCkgbiA9IFwiMFwiICsgbjtcblx0cmV0dXJuIG47XG59IiwiYW5ndWxhci5tb2R1bGUoJ1JlY29yZC5TdW1tYXJ5JykuY29udHJvbGxlcignUmVjb3JkLlN1bW1hcnkuR3JvdXBOb3Rlc0NvbnRyb2xsZXInLCBbXG5cblx0JyRzY29wZScsXG5cdCckdWliTW9kYWwnLFxuXHQnJHVpYk1vZGFsSW5zdGFuY2UnLFxuXHQnJHN0YXRlUGFyYW1zJyxcblx0JyRzdGF0ZScsXG5cdCckaW50ZXJ2YWwnLFxuXHQnbW9kJyxcblx0J2FjdGlvbicsXG5cdCd1c2VyJyxcblx0J25vdGVTZXJ2aWNlJyxcblx0J3NlY3VyaXR5U2VydmljZScsXG5cdCdkaXNlYXNlUmVnaXN0cnlTZXJ2aWNlJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JHVpYk1vZGFsLFxuXHRcdCR1aWJNb2RhbEluc3RhbmNlLFxuXHRcdCRzdGF0ZVBhcmFtcyxcblx0XHQkc3RhdGUsXG5cdFx0JGludGVydmFsLFxuXHRcdG1vZCxcblx0XHRhY3Rpb24sXG5cdFx0dXNlcixcblx0XHRub3RlU2VydmljZSxcblx0XHRzZWN1cml0eVNlcnZpY2UsXG5cdFx0ZGlzZWFzZVJlZ2lzdHJ5U2VydmljZSlcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cblx0XHRjb250cm9sbGVyLnBhZ2UgPSB7fTtcblx0XHRjb250cm9sbGVyLnBhZ2UudGl0bGUgPSBtb2QuZGlzcGxheU5hbWU7XG5cdFx0Y29udHJvbGxlci5wYWdlLml0ZW1zID0gbW9kLnN1bW1hcnlJdGVtO1xuXHRcdGNvbnRyb2xsZXIucGFnZS5xdWlja0xpc3RzID0gW107XG5cdFx0XG5cdFx0Ly9jb250cm9sbGVyLmFjdGlvbiA9IGFjdGlvbjtcblx0XHRjb250cm9sbGVyLnBhZ2UuY29kZSA9IG1vZC5zdW1tYXJ5Q29kZTtcblxuXHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0gPSB7XG5cdFx0XHRhc3NpZ25lZENNSXNzdWVzOiBbXVxuXHRcdH07XG5cdFx0Y29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5lbmNvdW50ZXJOb3RlID0ge1xuXHRcdFx0cG9zaXRpb246IDFcblx0XHR9O1xuXG5cblx0XHQvL3NldCBoaWRkZW4gd2hpY2ggY2FuIGNhbiBtb3ZlIG91dCBvZiBoaWRkZW4gdG8gJHNjb3BlIHZhbHVlc1xuXHRcdHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuXHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uYW5ub3RhdGlvbl9hdHRyaWIgPSBcImFubm9cIiArIG5vdy5nZXRUaW1lKCk7XG5cblxuXHRcdC8vZ2V0IGFjY2VzcyByaWdodHNcblx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHQoXCJfZUNoYXJ0XCIsIFwidVwiLCAkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObykudGhlbihcblx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmNhbm5vdENoYW5nZSA9ICFyZXN1bHRzO1xuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdH0pO1xuXG5cdFx0ZGlzZWFzZVJlZ2lzdHJ5U2VydmljZS5nZXRJc3N1ZVF1aWNrTGlzdHMoKS50aGVuKFxuXHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXN1bHRzKTtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnF1aWNrTGlzdHMgPSByZXN1bHRzO1xuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdH0pO1xuXG5cdFx0Y29udHJvbGxlci5hZGREeEl0ZW0gPSBmdW5jdGlvbiBhZGREeEl0ZW0oaXRlbSlcblx0XHR7XG5cdFx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uYXNzaWduZWRDTUlzc3Vlcy5sZW5ndGg7IHgrKylcblx0XHRcdHtcblx0XHRcdFx0aWYgKGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uYXNzaWduZWRDTUlzc3Vlc1t4XS5pc3N1ZS5jb2RlID09PSBpdGVtLmNvZGUgJiYgY29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5hc3NpZ25lZENNSXNzdWVzW3hdLmlzc3VlLnR5cGUgPT09IGl0ZW0uY29kaW5nU3lzdGVtKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGRpc2Vhc2VSZWdpc3RyeVNlcnZpY2UuZmluZER4SXNzdWUoaXRlbS5jb2RlLCBpdGVtLmNvZGluZ1N5c3RlbSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIGNtSXNzdWUgPSB7XG5cdFx0XHRcdFx0XHRhY3V0ZTogZmFsc2UsXG5cdFx0XHRcdFx0XHRjZXJ0YWluOiBmYWxzZSxcblx0XHRcdFx0XHRcdGlzc3VlOiByZXN1bHRzLFxuXHRcdFx0XHRcdFx0aXNzdWVfaWQ6IHJlc3VsdHMuaWQsXG5cdFx0XHRcdFx0XHRtYWpvcjogZmFsc2UsXG5cdFx0XHRcdFx0XHRyZXNvbHZlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHR1bnNhdmVkOiB0cnVlXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtLmFzc2lnbmVkQ01Jc3N1ZXMucHVzaChjbUlzc3VlKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cblxuXHRcdH07XG5cblx0XHQvL2Rpc2FibGUgY2xpY2sgYW5kIGtleXByZXNzIGlmIHVzZXIgb25seSBoYXMgcmVhZC1hY2Nlc3Ncblx0XHRjb250cm9sbGVyLmNoZWNrQWN0aW9uID0gZnVuY3Rpb24gY2hlY2tBY3Rpb24oZXZlbnQpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5jYW5ub3RDaGFuZ2UpXG5cdFx0XHR7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRkaXNwbGF5SXNzdWVJZCA9IGZ1bmN0aW9uIGRpc3BsYXlJc3N1ZUlkKGlzc3VlQ29kZSlcblx0XHR7XG5cdFx0XHRub3RlU2VydmljZS5nZXRJc3N1ZUlkKGlzc3VlQ29kZSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmlzc3VlSWQgPSByZXN1bHRzLmlkO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0ZGlzcGxheUlzc3VlSWQoY29udHJvbGxlci5wYWdlLmNvZGUpO1xuXG5cdFx0ZGlzcGxheUdyb3VwTm90ZSA9IGZ1bmN0aW9uIGRpc3BsYXlHcm91cE5vdGUoaXRlbSwgaXRlbUlkKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuaXRlbXNbaXRlbUlkXS5ub3RlSWQgIT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0bm90ZVNlcnZpY2UuZ2V0SXNzdWVOb3RlKGNvbnRyb2xsZXIucGFnZS5pdGVtc1tpdGVtSWRdLm5vdGVJZCkudGhlbihcblx0XHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly9jb250cm9sbGVyLm1hc3RlciA9IGFuZ3VsYXIuY29weSggXCJpTm90ZS0tLS1cIiArICBKU09OLnN0cmluZ2lmeShpTm90ZSkgKTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uZW5jb3VudGVyTm90ZSA9IHJlc3VsdHMuZW5jb3VudGVyTm90ZTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uZW5jb3VudGVyTm90ZS5lZGl0b3JOYW1lcyA9IG1vZC5lZGl0b3JOYW1lczsgLy8gR2V0IGVkaXRvciBuYW1lcy4gVE9ETzogQWRkIGVkaXRvciBuYW1lcyB0byB0aGUgb2JqZWN0IG9uIHRoZSBiYWNrIGVuZFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5ncm91cE5vdGVFeHQgPSByZXN1bHRzLmdyb3VwTm90ZUV4dDtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uYXNzaWduZWRDTUlzc3VlcyA9IHJlc3VsdHMuYXNzaWduZWRDTUlzc3VlcztcblxuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5hc3NpZ25lZENNSXNzdWVzID0gW107XG5cblx0XHRcdFx0XHRcdGlmIChyZXN1bHRzLmFzc2lnbmVkQ01Jc3N1ZXMgaW5zdGFuY2VvZiBBcnJheSlcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5hc3NpZ25lZENNSXNzdWVzID0gcmVzdWx0cy5hc3NpZ25lZENNSXNzdWVzO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRpZiAocmVzdWx0cy5hc3NpZ25lZENNSXNzdWVzICE9IG51bGwpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtLmFzc2lnbmVkQ01Jc3N1ZXMucHVzaChyZXN1bHRzLmFzc2lnbmVkQ01Jc3N1ZXMpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGFjdGlvbiA9IGl0ZW1JZDtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuc2V0QXZhaWxhYmxlUG9zaXRpb25zKCk7XG5cblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIucmVtb3ZlRWRpdGluZ05vdGVGbGFnKCk7XG5cblx0XHRcdFx0XHRcdGlmIChjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtLmVuY291bnRlck5vdGUucG9zaXRpb24gPCAxKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtLmVuY291bnRlck5vdGUucG9zaXRpb24gPSAxO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGNvbnRyb2xsZXIucGFnZS5pdGVtc1tpdGVtSWRdLnR5cGUgPT09IFwiZHhfcmVnXCIpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uYXNzaWduZWRDTUlzc3VlcyA9IFtdO1xuXHRcdFx0XHR2YXIgaXRlbUV4dHJhID0gY29udHJvbGxlci5wYWdlLml0ZW1zW2l0ZW1JZF0uZXh0cmE7XG5cdFx0XHRcdGRpc2Vhc2VSZWdpc3RyeVNlcnZpY2UuZmluZER4SXNzdWUoaXRlbUV4dHJhLmNvZGUsIGl0ZW1FeHRyYS5jb2RpbmdTeXN0ZW0pLnRoZW4oXG5cdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHZhciBjbUlzc3VlID0ge1xuXHRcdFx0XHRcdFx0XHRhY3V0ZTogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdGNlcnRhaW46IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRpc3N1ZTogcmVzdWx0cyxcblx0XHRcdFx0XHRcdFx0aXNzdWVfaWQ6IHJlc3VsdHMuaXNzdWVJZCxcblx0XHRcdFx0XHRcdFx0bWFqb3I6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRyZXNvbHZlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdHVuc2F2ZWQ6IHRydWVcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImZpbmQgbGlrZSBpc3N1ZSBcIiwgY21Jc3N1ZSwgcmVzdWx0cyk7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtLmFzc2lnbmVkQ01Jc3N1ZXMucHVzaChjbUlzc3VlKTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uZW5jb3VudGVyTm90ZSA9IHt9O1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5ncm91cE5vdGVFeHQgPSB7fTtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uZW5jb3VudGVyTm90ZSA9IHtcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246IDFcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRhY3Rpb24gPSBpdGVtSWQ7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly9hY3Rpb24gaXMgTlVMTCB3aGVuIG5ldyAsIGFjdGlvbiBpcyBzb21lIGlkIHdoZW4gbm90XG5cdFx0aWYgKGFjdGlvbiAhPSBudWxsKVxuXHRcdHtcblx0XHRcdGRpc3BsYXlHcm91cE5vdGUoY29udHJvbGxlci5wYWdlLml0ZW1zLCBhY3Rpb24pO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0Ly9uZXcgZW50cnlcblx0XHR9XG5cblx0XHRjb250cm9sbGVyLnNldEF2YWlsYWJsZVBvc2l0aW9ucyA9IGZ1bmN0aW9uIHNldEF2YWlsYWJsZVBvc2l0aW9ucygpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5hdmFpbGFibGVQb3NpdGlvbnMgPSBbXTtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2UuaXRlbXMgPT0gbnVsbCB8fCBjb250cm9sbGVyLnBhZ2UuaXRlbXMubGVuZ3RoID09IDApXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuYXZhaWxhYmxlUG9zaXRpb25zLnB1c2goMSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHZhciB4ID0gMDtcblx0XHRcdFx0Zm9yICh4ID0gMDsgeCA8IGNvbnRyb2xsZXIucGFnZS5pdGVtcy5sZW5ndGg7IHgrKylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuYXZhaWxhYmxlUG9zaXRpb25zLnB1c2goeCArIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChhY3Rpb24gPT0gbnVsbClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuYXZhaWxhYmxlUG9zaXRpb25zLnB1c2goeCArIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2V0QXZhaWxhYmxlUG9zaXRpb25zKCk7XG5cblx0XHRjb250cm9sbGVyLmNoYW5nZU5vdGUgPSBmdW5jdGlvbiBjaGFuZ2VOb3RlKGl0ZW0sIGl0ZW1JZClcblx0XHR7XG5cdFx0XHRyZXR1cm4gZGlzcGxheUdyb3VwTm90ZShpdGVtLCBpdGVtSWQpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmVHcm91cE5vdGVzID0gZnVuY3Rpb24gc2F2ZUdyb3VwTm90ZXMoKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtLmVuY291bnRlck5vdGUubm90ZUlkID09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uZW5jb3VudGVyTm90ZS5ub3RlSWQgPSAwO1xuXHRcdFx0fVxuXHRcdFx0Y29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5lbmNvdW50ZXJOb3RlLmNwcCA9IHRydWU7XG5cdFx0XHRjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtLmVuY291bnRlck5vdGUuZWRpdGFibGUgPSB0cnVlO1xuXHRcdFx0Y29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5lbmNvdW50ZXJOb3RlLmlzU2lnbmVkID0gdHJ1ZTtcblx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uZW5jb3VudGVyTm90ZS5vYnNlcnZhdGlvbkRhdGUgPSBuZXcgRGF0ZSgpO1xuXHRcdFx0Y29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5lbmNvdW50ZXJOb3RlLmFwcG9pbnRtZW50Tm8gPSAkc3RhdGVQYXJhbXMuYXBwb2ludG1lbnRObzsgLy9UT0RPOiBtYWtlIHRoaXMgZHluYW1pYyBzbyBpdCBjaGFuZ2VzIG9uIGVkaXRcblx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uZW5jb3VudGVyTm90ZS5lbmNvdW50ZXJUeXBlID0gXCJcIjtcblx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uZW5jb3VudGVyTm90ZS5lbmNvdW50ZXJUaW1lID0gXCJcIjtcblx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uZW5jb3VudGVyTm90ZS5hc3NpZ25lZElzc3VlcyA9IGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uYXNzaWduZWRDTUlzc3Vlcztcblx0XHRcdGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0uZW5jb3VudGVyTm90ZS5zdW1tYXJ5Q29kZSA9IGNvbnRyb2xsZXIucGFnZS5jb2RlOyAvLydvbmdvaW5nY29uY2VybnMnO1xuXG5cdFx0XHRub3RlU2VydmljZS5zYXZlSXNzdWVOb3RlKCRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vLCBjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHRcdFx0XHQkc3RhdGUudHJhbnNpdGlvblRvKCRzdGF0ZS5jdXJyZW50LCAkc3RhdGVQYXJhbXMsIHtcblx0XHRcdFx0XHRcdHJlbG9hZDogdHJ1ZSxcblx0XHRcdFx0XHRcdGluaGVyaXQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0bm90aWZ5OiB0cnVlXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucmVtb3ZlR3JvdXBOb3RlSXNzdWUgPSBmdW5jdGlvbiByZW1vdmVHcm91cE5vdGVJc3N1ZShpKVxuXHRcdHtcblx0XHRcdGNvbnNvbGUubG9nKCdyZW1vdmluZyBpc3N1ZScpO1xuXHRcdFx0aS51bmNoZWNrZWQgPSB0cnVlO1xuXHRcdFx0dmFyIG5ld0xpc3QgPSBbXTtcblx0XHRcdGZvciAodmFyIHggPSAwOyB4IDwgY29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5hc3NpZ25lZENNSXNzdWVzLmxlbmd0aDsgeCsrKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoY29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5hc3NpZ25lZENNSXNzdWVzW3hdLmlzc3VlX2lkICE9IGkuaXNzdWVfaWQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuZXdMaXN0LnB1c2goY29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5hc3NpZ25lZENNSXNzdWVzW3hdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Y29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5hc3NpZ25lZENNSXNzdWVzID0gbmV3TGlzdDtcblx0XHRcdGNvbnNvbGUubG9nKCdORVcgTElTVDogJywgbmV3TGlzdCk7XG5cdFx0fTtcblxuXHRcdC8qXG5cdFx0ICogaGFuZGxlIGNvbmN1cnJlbnQgbm90ZSBlZGl0IC0gRWRpdGluZ05vdGVGbGFnXG5cdFx0ICovXG5cdFx0Y29udHJvbGxlci5kb1NldEVkaXRpbmdOb3RlRmxhZyA9IGZ1bmN0aW9uIGRvU2V0RWRpdGluZ05vdGVGbGFnKClcblx0XHR7XG5cdFx0XHRub3RlU2VydmljZS5zZXRFZGl0aW5nTm90ZUZsYWcoZWRpdGluZ05vdGVJZCwgdXNlci5wcm92aWRlck5vKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAoIXJlc3VsdHMuc3VjY2Vzcylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRpZiAocmVzdWx0cy5tZXNzYWdlID09IFwiUGFyYW1ldGVyIGVycm9yXCIpIGFsZXJ0KFwiUGFyYW1ldGVyIEVycm9yOiBub3RlVVVJRFtcIiArIGVkaXRpbmdOb3RlSWQgKyBcIl0gdXNlcklkW1wiICsgdXNlci5wcm92aWRlck5vICsgXCJdXCIpO1xuXHRcdFx0XHRcdFx0ZWxzZSBhbGVydChcIldhcm5pbmchIEFub3RoZXIgdXNlciBpcyBlZGl0aW5nIHRoaXMgbm90ZSBub3cuXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2V0RWRpdGluZ05vdGVGbGFnID0gZnVuY3Rpb24gc2V0RWRpdGluZ05vdGVGbGFnKClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5lbmNvdW50ZXJOb3RlLnV1aWQgPT0gbnVsbCkgcmV0dXJuO1xuXG5cdFx0XHRjb250cm9sbGVyLnJlbW92ZUVkaXRpbmdOb3RlRmxhZygpOyAvL3JlbW92ZSBhbnkgcHJldmlvdXMgZmxhZyBhY3Rpb25zXG5cdFx0XHRlZGl0aW5nTm90ZUlkID0gY29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5lbmNvdW50ZXJOb3RlLnV1aWQ7XG5cblx0XHRcdGl0dlNldCA9ICRpbnRlcnZhbChjb250cm9sbGVyLmRvU2V0RWRpdGluZ05vdGVGbGFnKCksIDMwMDAwKTsgLy9zZXQgZmxhZyBldmVyeSA1IG1pblxuXHRcdFx0aXR2Q2hlY2sgPSAkaW50ZXJ2YWwoZnVuY3Rpb24oKVxuXHRcdFx0e1xuXHRcdFx0XHRub3RlU2VydmljZS5jaGVja0VkaXROb3RlTmV3KGVkaXRpbmdOb3RlSWQsIHVzZXIucHJvdmlkZXJObykudGhlbihcblx0XHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aWYgKCFyZXN1bHRzLnN1Y2Nlc3MpXG5cdFx0XHRcdFx0XHR7IC8vc29tZW9uZSBlbHNlIHdhbnRzIHRvIGVkaXQgdGhpcyBub3RlXG5cdFx0XHRcdFx0XHRcdGFsZXJ0KFwiV2FybmluZyEgQW5vdGhlciB1c2VyIHRyaWVzIHRvIGVkaXQgdGhpcyBub3RlLiBZb3VyIHVwZGF0ZSBtYXkgYmUgcmVwbGFjZWQgYnkgbGF0ZXIgcmV2aXNpb24ocykuXCIpO1xuXG5cdFx0XHRcdFx0XHRcdC8vY2FuY2VsIDEwc2VjIGNoZWNrIGFmdGVyIDFzdCB0aW1lIHdhcm5pbmcgd2hlbiBhbm90aGVyIHVzZXIgdHJpZXMgdG8gZWRpdCB0aGlzIG5vdGVcblx0XHRcdFx0XHRcdFx0JGludGVydmFsLmNhbmNlbChpdHZDaGVjayk7XG5cdFx0XHRcdFx0XHRcdGl0dkNoZWNrID0gbnVsbDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSwgMTAwMDApOyAvL2NoZWNrIGZvciBuZXcgZWRpdCBldmVyeSAxMCBzZWNcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5yZW1vdmVFZGl0aW5nTm90ZUZsYWcgPSBmdW5jdGlvbiByZW1vdmVFZGl0aW5nTm90ZUZsYWcoKVxuXHRcdHtcblx0XHRcdGlmIChlZGl0aW5nTm90ZUlkICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdG5vdGVTZXJ2aWNlLnJlbW92ZUVkaXRpbmdOb3RlRmxhZyhlZGl0aW5nTm90ZUlkLCB1c2VyLnByb3ZpZGVyTm8pO1xuXHRcdFx0XHQkaW50ZXJ2YWwuY2FuY2VsKGl0dlNldCk7XG5cdFx0XHRcdCRpbnRlcnZhbC5jYW5jZWwoaXR2Q2hlY2spO1xuXHRcdFx0XHRpdHZTZXQgPSBudWxsO1xuXHRcdFx0XHRpdHZDaGVjayA9IG51bGw7XG5cdFx0XHRcdGVkaXRpbmdOb3RlSWQgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH07XG5cblxuXHRcdGNvbnRyb2xsZXIucmVtb3ZlSXNzdWUgPSBmdW5jdGlvbiByZW1vdmVJc3N1ZShpKVxuXHRcdHtcblx0XHRcdGkudW5jaGVja2VkID0gdHJ1ZTtcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXIucmVzdG9yZUlzc3VlID0gZnVuY3Rpb24gcmVzdG9yZUlzc3VlKGkpXG5cdFx0e1xuXHRcdFx0aS51bmNoZWNrZWQgPSBmYWxzZTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5hcmNoaXZlR3JvdXBOb3RlcyA9IGZ1bmN0aW9uIGFyY2hpdmVHcm91cE5vdGVzKClcblx0XHR7XG5cdFx0XHQvL2NvbnRyb2xsZXIubWFzdGVyID0gYW5ndWxhci5jb3B5KGNvbnRyb2xsZXIuZ3JvdXBOb3Rlc0Zvcm0pO1xuXHRcdFx0Y29udHJvbGxlci5ncm91cE5vdGVzRm9ybS5lbmNvdW50ZXJOb3RlLmFyY2hpdmVkID0gdHJ1ZTtcblx0XHRcdGNvbnRyb2xsZXIuc2F2ZUdyb3VwTm90ZXMoKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwoKVxuXHRcdHtcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdH07XG5cblx0XHQvL3RlbXAgbG9hZCBpbnRvIHBvcC11cFxuXHRcdGNvbnRyb2xsZXIub3BlblJldmlzaW9uSGlzdG9yeSA9IGZ1bmN0aW9uIG9wZW5SZXZpc2lvbkhpc3RvcnkoZW5jb3VudGVyTm90ZSlcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZyhjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtKTtcblx0XHRcdHZhciBybmQgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwKTtcblx0XHRcdHdpbiA9IFwid2luXCIgKyBybmQ7XG5cdFx0XHR2YXIgdXJsID0gXCIuLi9DYXNlTWFuYWdlbWVudEVudHJ5LmRvP21ldGhvZD1ub3RlaGlzdG9yeSZub3RlSWQ9XCIgKyBlbmNvdW50ZXJOb3RlLm5vdGVJZDtcblx0XHRcdHdpbmRvdy5vcGVuKHVybCwgd2luLCBcInNjcm9sbGJhcnM9eWVzLCBsb2NhdGlvbj1ubywgd2lkdGg9NjQ3LCBoZWlnaHQ9NjAwXCIsIFwiXCIpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNlYXJjaElzc3VlcyA9IGZ1bmN0aW9uIHNlYXJjaElzc3Vlcyh0ZXJtKVxuXHRcdHtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdCd0ZXJtJzogdGVybVxuXHRcdFx0fTtcblx0XHRcdHJldHVybiBub3RlU2VydmljZS5zZWFyY2hJc3N1ZXMoc2VhcmNoLCAwLCAxMDApLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciByZXNwID0gW107XG5cdFx0XHRcdFx0Zm9yICh2YXIgeCA9IDA7IHggPCByZXN1bHRzLmNvbnRlbnQubGVuZ3RoOyB4KyspXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmVzcC5wdXNoKHtcblx0XHRcdFx0XHRcdFx0aXNzdWVJZDogcmVzdWx0cy5jb250ZW50W3hdLmlkLFxuXHRcdFx0XHRcdFx0XHRjb2RlOiByZXN1bHRzLmNvbnRlbnRbeF0uZGVzY3JpcHRpb24gKyAnKCcgKyByZXN1bHRzLmNvbnRlbnRbeF0uY29kZSArICcpJ1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChyZXN1bHRzLnRvdGFsID4gcmVzdWx0cy5jb250ZW50Lmxlbmd0aClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHQvL3dhcm4gdXNlciB0aGVyZSdzIG1vcmUgcmVzdWx0cyBzb21laG93P1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gcmVzcDtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuYXNzaWduSXNzdWUgPSBmdW5jdGlvbiBhc3NpZ25Jc3N1ZShpdGVtLCBtb2RlbCwgbGFiZWwpXG5cdFx0e1xuXHRcdFx0Zm9yICh2YXIgeCA9IDA7IHggPCBjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtLmFzc2lnbmVkQ01Jc3N1ZXMubGVuZ3RoOyB4KyspXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtLmFzc2lnbmVkQ01Jc3N1ZXNbeF0uaXNzdWUuaWQgPT0gbW9kZWwpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0bm90ZVNlcnZpY2UuZ2V0SXNzdWUobW9kZWwpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciBjbUlzc3VlID0ge1xuXHRcdFx0XHRcdFx0YWN1dGU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0Y2VydGFpbjogZmFsc2UsXG5cdFx0XHRcdFx0XHRpc3N1ZTogcmVzdWx0cyxcblx0XHRcdFx0XHRcdGlzc3VlX2lkOiBpdGVtLmlzc3VlSWQsXG5cdFx0XHRcdFx0XHRtYWpvcjogZmFsc2UsXG5cdFx0XHRcdFx0XHRyZXNvbHZlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHR1bnNhdmVkOiB0cnVlXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRjb250cm9sbGVyLmdyb3VwTm90ZXNGb3JtLmFzc2lnbmVkQ01Jc3N1ZXMucHVzaChjbUlzc3VlKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuaXNTZWxlY3RlZCA9IGZ1bmN0aW9uIGlzU2VsZWN0ZWQoaXRlbSlcblx0XHR7XG5cdFx0XHRpZiAoaXRlbS5pZCA9PSBhY3Rpb24pXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBcImdyb3VwLW5vdGUtc2VsZWN0ZWRcIjtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5hZGRUb0R4UmVnaXN0cnkgPSBmdW5jdGlvbiBhZGRUb0R4UmVnaXN0cnkoaXNzdWUpXG5cdFx0e1xuXHRcdFx0ZGlzZWFzZVJlZ2lzdHJ5U2VydmljZS5hZGRUb0R4UmVnaXN0cnkoJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm8sIGlzc3VlKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhyZXN1bHRzKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cblx0XHR9O1xuXG5cdH1cbl0pOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ1JlY29yZC5TdW1tYXJ5JywgWydDb21tb24nLCAnQ29tbW9uLlNlcnZpY2VzJ10pOyIsImFuZ3VsYXIubW9kdWxlKCdSZWNvcmQuU3VtbWFyeScpLmNvbnRyb2xsZXIoJ1JlY29yZC5TdW1tYXJ5LlJlY29yZFByaW50Q29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyR1aWJNb2RhbCcsXG5cdCckdWliTW9kYWxJbnN0YW5jZScsXG5cdCckZmlsdGVyJyxcblx0J21vZCcsXG5cdCdhY3Rpb24nLFxuXHQnJHN0YXRlUGFyYW1zJyxcblx0J3N1bW1hcnlTZXJ2aWNlJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JHVpYk1vZGFsLFxuXHRcdCR1aWJNb2RhbEluc3RhbmNlLFxuXHRcdCRmaWx0ZXIsXG5cdFx0bW9kLFxuXHRcdGFjdGlvbixcblx0XHQkc3RhdGVQYXJhbXMsXG5cdFx0c3VtbWFyeVNlcnZpY2UpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXIucGFnZU9wdGlvbnMgPSB7fTtcblx0XHRjb250cm9sbGVyLnBhZ2VPcHRpb25zLnByaW50VHlwZSA9IHt9O1xuXHRcdGNvbnRyb2xsZXIucGFnZU9wdGlvbnMuZGF0ZXMgPSB7fTtcblx0XHRjb250cm9sbGVyLnBhZ2UgPSB7fTtcblx0XHRjb250cm9sbGVyLnBhZ2Uuc2VsZWN0ZWRXYXJuaW5nID0gZmFsc2U7XG5cblx0XHQvKlxuXHRcdCAqSWYgbW9kIGxlbmd0aCA+IDAgdGhhbiB0aGUgdXNlciBoYXMgc2VsZWN0ZWQgYSBub3RlLiA9IERlZmF1bHQgdG8gTm90ZVxuXHRcdCAqT3RoZXIgd2lzZSBkZWZhdWx0IHRvIEFsbFxuXHRcdCAqL1xuXHRcdHZhciBhdGxlYXN0T25lU2VsZWN0ZWQgPSBmYWxzZTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1vZC5sZW5ndGg7IGkrKylcblx0XHR7XG5cdFx0XHRpZiAobW9kW2ldLmlzU2VsZWN0ZWQpXG5cdFx0XHR7XG5cdFx0XHRcdGF0bGVhc3RPbmVTZWxlY3RlZCA9IHRydWU7XG5cdFx0XHRcdGkgPSBtb2QubGVuZ3RoO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChhdGxlYXN0T25lU2VsZWN0ZWQpXG5cdFx0e1xuXHRcdFx0Y29uc29sZS5sb2coXCJtb2QgbGVuIFwiLCBtb2QubGVuZ3RoKTtcblx0XHRcdGNvbnRyb2xsZXIucGFnZU9wdGlvbnMucHJpbnRUeXBlID0gJ3NlbGVjdGVkJztcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGNvbnNvbGUubG9nKFwicHJpbnRUeXBlID0gYWxsXCIpO1xuXHRcdFx0Y29udHJvbGxlci5wYWdlT3B0aW9ucy5wcmludFR5cGUgPSAnYWxsJztcblx0XHR9XG5cblx0XHRjb250cm9sbGVyLnByaW50VG9kYXkgPSBmdW5jdGlvbiBwcmludFRvZGF5KClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnBhZ2VPcHRpb25zLnByaW50VHlwZSA9ICdkYXRlcyc7XG5cdFx0XHR2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0XHRjb250cm9sbGVyLnBhZ2VPcHRpb25zLmRhdGVzLnN0YXJ0ID0gZGF0ZTtcblx0XHRcdGNvbnRyb2xsZXIucGFnZU9wdGlvbnMuZGF0ZXMuZW5kID0gZGF0ZTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jYW5jZWxQcmludCA9IGZ1bmN0aW9uIGNhbmNlbFByaW50KClcblx0XHR7XG5cdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHR9O1xuXG5cblx0XHRjb250cm9sbGVyLnNlbmRUb1BociA9IGZ1bmN0aW9uIHNlbmRUb1BocigpXG5cdFx0e1xuXHRcdFx0dmFyIHF1ZXJ5U3RyaW5nID0gXCJkZW1vZ3JhcGhpY19ubz1cIiArICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0cXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZyArIFwiJm1vZHVsZT1lY2hhcnRcIjtcblxuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZU9wdGlvbnMucHJpbnRUeXBlID09ICdhbGwnKVxuXHRcdFx0e1xuXHRcdFx0XHRxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nICsgJyZub3RlczJwcmludD1BTExfTk9URVMnO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoY29udHJvbGxlci5wYWdlT3B0aW9ucy5wcmludFR5cGUgPT0gJ3NlbGVjdGVkJylcblx0XHRcdHtcblx0XHRcdFx0Ly9nZXQgYXJyYXlcblx0XHRcdFx0dmFyIHNlbGVjdGVkTGlzdCA9IFtdO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1vZC5sZW5ndGg7IGkrKylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChtb2RbaV0uaXNTZWxlY3RlZClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRzZWxlY3RlZExpc3QucHVzaChtb2RbaV0ubm90ZUlkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZyArICcmbm90ZXMycHJpbnQ9JyArIHNlbGVjdGVkTGlzdC5qb2luKCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChjb250cm9sbGVyLnBhZ2VPcHRpb25zLnByaW50VHlwZSA9PSAnZGF0ZXMnKVxuXHRcdFx0e1xuXHRcdFx0XHRxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nICsgJyZub3RlczJwcmludD1BTExfTk9URVMnO1xuXHRcdFx0XHRxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nICsgJyZzdGFydERhdGU9JyArIGNvbnRyb2xsZXIucGFnZU9wdGlvbnMuZGF0ZXMuc3RhcnQuZ2V0VGltZSgpO1xuXHRcdFx0XHRxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nICsgJyZlbmREYXRlPScgKyBjb250cm9sbGVyLnBhZ2VPcHRpb25zLmRhdGVzLmVuZC5nZXRUaW1lKCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2VPcHRpb25zLmNwcClcblx0XHRcdHtcblx0XHRcdFx0cXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZyArICcmcHJpbnRDUFA9dHJ1ZSc7XG5cdFx0XHR9XG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlT3B0aW9ucy5jcHApXG5cdFx0XHR7XG5cdFx0XHRcdHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcgKyAnJnByaW50Ung9dHJ1ZSc7XG5cdFx0XHR9XG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlT3B0aW9ucy5jcHApXG5cdFx0XHR7XG5cdFx0XHRcdHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcgKyAnJnByaW50TGFicz10cnVlJztcblx0XHRcdH1cblx0XHRcdGNvbnNvbGUubG9nKFwiUVNcIiArIHF1ZXJ5U3RyaW5nKTtcblxuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZU9wdGlvbnMucHJpbnRUeXBlID09PSAnc2VsZWN0ZWQnICYmIHNlbGVjdGVkTGlzdC5sZW5ndGggPT0gMClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnNlbGVjdGVkV2FybmluZyA9IHRydWU7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLnNlbGVjdGVkV2FybmluZyA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHR3aW5kb3cub3BlbignLi4vU2VuZFRvUGhyLmRvPycgKyBxdWVyeVN0cmluZywgJ19ibGFuaycpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnByaW50ID0gZnVuY3Rpb24gcHJpbnQoKVxuXHRcdHtcblx0XHRcdHZhciBzZWxlY3RlZExpc3QgPSBbXTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbW9kLmxlbmd0aDsgaSsrKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAobW9kW2ldLmlzU2VsZWN0ZWQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzZWxlY3RlZExpc3QucHVzaChtb2RbaV0ubm90ZUlkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlT3B0aW9ucy5wcmludFR5cGUgPT09ICdzZWxlY3RlZCcgJiYgc2VsZWN0ZWRMaXN0Lmxlbmd0aCA9PSAwKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uuc2VsZWN0ZWRXYXJuaW5nID0gdHJ1ZTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2Uuc2VsZWN0ZWRXYXJuaW5nID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnRyb2xsZXIucGFnZU9wdGlvbnMuc2VsZWN0ZWRMaXN0ID0gc2VsZWN0ZWRMaXN0O1xuXHRcdFx0dmFyIG9wcyA9IGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjb250cm9sbGVyLnBhZ2VPcHRpb25zKSk7XG5cdFx0XHR3aW5kb3cub3BlbignLi4vd3MvcnMvcmVjb3JkVVgvJyArICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vICsgJy9wcmludD9wcmludE9wcz0nICsgb3BzLCAnX2JsYW5rJyk7XG5cblxuXG5cdFx0fTtcblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ1JlY29yZC5TdW1tYXJ5JykuY29udHJvbGxlcignUmVjb3JkLlN1bW1hcnkuU2F2ZVdhcm5pbmdDb250cm9sbGVyJywgW1xuXG5cdCckcm9vdFNjb3BlJyxcblx0JyRzY29wZScsXG5cdCckdWliTW9kYWwnLFxuXHQnJHVpYk1vZGFsSW5zdGFuY2UnLFxuXHQnc2F2ZVNpZ25Ob3RlJyxcblx0J2NhbmNlbE5vdGVFZGl0JyxcblxuXHRmdW5jdGlvbihcblx0XHQkcm9vdFNjb3BlLFxuXHRcdCRzY29wZSxcblx0XHQkdWliTW9kYWwsXG5cdFx0JHVpYk1vZGFsSW5zdGFuY2UsXG5cdFx0c2F2ZVNpZ25Ob3RlLFxuXHRcdGNhbmNlbE5vdGVFZGl0KVxuXHR7XG5cblx0XHR2YXIgY29udHJvbGxlciA9IHRoaXM7XG5cblx0XHQvLyBDYW5jZWwgd2FybmluZyBhbmQgbWFpbnRhaW4gbm90ZSBjaGFuZ2VzXG5cdFx0Y29udHJvbGxlci5jYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwoKVxuXHRcdHtcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdH07XG5cblx0XHQvLyBTYXZlIGNoYW5nZXMgdG8gdGhlIG5vdGVcblx0XHRjb250cm9sbGVyLnNhdmUgPSBmdW5jdGlvbiBzYXZlKClcblx0XHR7XG5cdFx0XHRpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKHNhdmVTaWduTm90ZSkpXG5cdFx0XHR7XG5cdFx0XHRcdHNhdmVTaWduTm90ZSgpO1xuXHRcdFx0fVxuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UodHJ1ZSk7XG5cdFx0fTtcblxuXHRcdC8vIENsZWFyIGNoYW5nZXMgdG8gdGhlIG5vdGVcblx0XHRjb250cm9sbGVyLmNsZWFyQ2hhbmdlcyA9IGZ1bmN0aW9uIGNsZWFyQ2hhbmdlcygpXG5cdFx0e1xuXHRcdFx0aWYgKGFuZ3VsYXIuaXNGdW5jdGlvbihjYW5jZWxOb3RlRWRpdCkpXG5cdFx0XHR7XG5cdFx0XHRcdGNhbmNlbE5vdGVFZGl0KCk7XG5cdFx0XHR9XG5cdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSh0cnVlKTtcblx0XHR9O1xuXHR9XG5dKTsiLCIvKlxuXG4gICAgQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuICAgIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiAgICBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiAgICBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gICAgVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gICAgRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiAgICBNY01hc3RlciBVbml2ZXJzaXR5XG4gICAgSGFtaWx0b25cbiAgICBPbnRhcmlvLCBDYW5hZGFcblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdSZWNvcmQuU3VtbWFyeScpLmNvbnRyb2xsZXIoJ1JlY29yZC5TdW1tYXJ5LlN1bW1hcnlDb250cm9sbGVyJywgW1xuXG5cdCckcm9vdFNjb3BlJyxcblx0JyRzY29wZScsXG5cdCckaHR0cCcsXG5cdCckbG9jYXRpb24nLFxuXHQnJHN0YXRlUGFyYW1zJyxcblx0JyRzdGF0ZScsXG5cdCckZmlsdGVyJyxcblx0JyR1aWJNb2RhbCcsXG5cdCckaW50ZXJ2YWwnLFxuXHQndXNlcicsXG5cdCdub3RlU2VydmljZScsXG5cdCdzdW1tYXJ5U2VydmljZScsXG5cdCdzZWN1cml0eVNlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRyb290U2NvcGUsXG5cdFx0JHNjb3BlLFxuXHRcdCRodHRwLFxuXHRcdCRsb2NhdGlvbixcblx0XHQkc3RhdGVQYXJhbXMsXG5cdFx0JHN0YXRlLFxuXHRcdCRmaWx0ZXIsXG5cdFx0JHVpYk1vZGFsLFxuXHRcdCRpbnRlcnZhbCxcblx0XHR1c2VyLFxuXHRcdG5vdGVTZXJ2aWNlLFxuXHRcdHN1bW1hcnlTZXJ2aWNlLFxuXHRcdHNlY3VyaXR5U2VydmljZSlcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29uc29sZS5sb2coXCJpbiBzdW1tYXJ5IEN0cmwgXCIsICRzdGF0ZVBhcmFtcyk7XG5cblx0XHRjb250cm9sbGVyLnBhZ2UgPSB7fTtcblx0XHRjb250cm9sbGVyLnBhZ2UuY29sdW1uT25lID0ge307XG5cdFx0Y29udHJvbGxlci5wYWdlLmNvbHVtbk9uZS5tb2R1bGVzID0ge307XG5cblx0XHRjb250cm9sbGVyLnBhZ2UuY29sdW1uVGhyZWUgPSB7fTtcblx0XHRjb250cm9sbGVyLnBhZ2UuY29sdW1uVGhyZWUubW9kdWxlcyA9IHt9O1xuXHRcdGNvbnRyb2xsZXIucGFnZS5zZWxlY3RlZE5vdGVzID0gW107XG5cblx0XHRjb250cm9sbGVyLnBhZ2Uubm90ZXMgPSB7fTtcblx0XHRjb250cm9sbGVyLmluZGV4ID0gMDtcblx0XHRjb250cm9sbGVyLnBhZ2Uubm90ZXMgPSB7fTtcblx0XHRjb250cm9sbGVyLnBhZ2Uubm90ZXMubm90ZWxpc3QgPSBbXTtcblx0XHRjb250cm9sbGVyLmJ1c3kgPSBmYWxzZTtcblx0XHRjb250cm9sbGVyLnBhZ2Uubm90ZUZpbHRlciA9IHt9O1xuXHRcdGNvbnRyb2xsZXIucGFnZS5jdXJyZW50RmlsdGVyID0gJ25vbmUnO1xuXHRcdGNvbnRyb2xsZXIucGFnZS5vbmx5Tm90ZXMgPSBmYWxzZTsgLy8gRmlsdGVyIGZvciBvbmx5IHNob3dpbmcgZW5jb3VudGVyIG5vdGVzXG5cdFx0Y29udHJvbGxlci5wYWdlLm9ubHlNaW5lID0gZmFsc2U7IC8vIEZpbHRlciBmb3Igb25seSBzaG93aW5nIG5vdGVzIHRoZSBjdXJyZW50IHVzZXIgaGFzIGNyZWF0ZWQvZWRpdGVkXG5cblx0XHRjb250cm9sbGVyLmRlbW9ncmFwaGljTm8gPSAkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObztcblxuXHRcdC8vZ2V0IGFjY2VzcyByaWdodHNcblx0XHRzZWN1cml0eVNlcnZpY2UuaGFzUmlnaHQoXCJfZUNoYXJ0XCIsIFwiclwiLCAkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObykudGhlbihcblx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5wYWdlLmNhblJlYWQgPSByZXN1bHRzO1xuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdH0pO1xuXHRcdHNlY3VyaXR5U2VydmljZS5oYXNSaWdodChcIl9lQ2hhcnRcIiwgXCJ1XCIsICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vKS50aGVuKFxuXHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnBhZ2UuY2Fubm90Q2hhbmdlID0gIXJlc3VsdHM7XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0fSk7XG5cdFx0c2VjdXJpdHlTZXJ2aWNlLmhhc1JpZ2h0KFwiX2VDaGFydFwiLCBcIndcIiwgJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm8pLnRoZW4oXG5cdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5jYW5ub3RBZGQgPSAhcmVzdWx0cztcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblxuXHRcdC8vZGlzYWJsZSBjbGljayBhbmQga2V5cHJlc3MgaWYgdXNlciBvbmx5IGhhcyByZWFkLWFjY2Vzc1xuXHRcdGNvbnRyb2xsZXIuY2hlY2tBY3Rpb24gPSBmdW5jdGlvbiBjaGVja0FjdGlvbihldmVudClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5wYWdlLmNhbm5vdENoYW5nZSlcblx0XHRcdHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIub3BlblJldmlzaW9uSGlzdG9yeSA9IGZ1bmN0aW9uIG9wZW5SZXZpc2lvbkhpc3Rvcnkobm90ZSlcblx0XHR7XG5cdFx0XHQvL3ZhciBybmQgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwKTtcblx0XHRcdHdpbiA9IFwicmV2aXNpb25cIjtcblx0XHRcdHZhciB1cmwgPSBcIi4uL0Nhc2VNYW5hZ2VtZW50RW50cnkuZG8/bWV0aG9kPW5vdGVoaXN0b3J5Jm5vdGVJZD1cIiArIG5vdGUubm90ZUlkO1xuXHRcdFx0d2luZG93Lm9wZW4odXJsLCB3aW4sIFwic2Nyb2xsYmFycz15ZXMsIGxvY2F0aW9uPW5vLCB3aWR0aD02NDcsIGhlaWdodD02MDBcIiwgXCJcIik7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIub3BlblJ4ID0gZnVuY3Rpb24gb3BlblJ4KGRlbW9Obylcblx0XHR7XG5cdFx0XHR3aW4gPSBcIlJ4XCIgKyBkZW1vTm87XG5cdFx0XHR2YXIgdXJsID0gXCIuLi9vc2NhclJ4L2Nob29zZVBhdGllbnQuZG8/ZGVtb2dyYXBoaWNObz1cIiArIGRlbW9Obztcblx0XHRcdHdpbmRvdy5vcGVuKHVybCwgd2luLCBcInNjcm9sbGJhcnM9eWVzLCBsb2NhdGlvbj1ubywgd2lkdGg9OTAwLCBoZWlnaHQ9NjAwXCIsIFwiXCIpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLm9wZW5BbGxlcmdpZXMgPSBmdW5jdGlvbiBvcGVuQWxsZXJnaWVzKGRlbW9Obylcblx0XHR7XG5cdFx0XHR3aW4gPSBcIkFsbGVyZ3lcIiArIGRlbW9Obztcblx0XHRcdHZhciB1cmwgPSBcIi4uL29zY2FyUngvc2hvd0FsbGVyZ3kuZG8/ZGVtb2dyYXBoaWNObz1cIiArIGRlbW9Obztcblx0XHRcdHdpbmRvdy5vcGVuKHVybCwgd2luLCBcInNjcm9sbGJhcnM9eWVzLCBsb2NhdGlvbj1ubywgd2lkdGg9OTAwLCBoZWlnaHQ9NjAwXCIsIFwiXCIpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLm9wZW5QcmV2ZW50aW9ucyA9IGZ1bmN0aW9uIG9wZW5QcmV2ZW50aW9ucyhkZW1vTm8pXG5cdFx0e1xuXHRcdFx0d2luID0gXCJwcmV2ZW50aW9uXCIgKyBkZW1vTm87XG5cdFx0XHR2YXIgdXJsID0gXCIuLi9vc2NhclByZXZlbnRpb24vaW5kZXguanNwP2RlbW9ncmFwaGljX25vPVwiICsgZGVtb05vO1xuXHRcdFx0d2luZG93Lm9wZW4odXJsLCB3aW4sIFwic2Nyb2xsYmFycz15ZXMsIGxvY2F0aW9uPW5vLCB3aWR0aD05MDAsIGhlaWdodD02MDBcIiwgXCJcIik7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIub3BlbkFzc2Vzc21lbnRzID0gZnVuY3Rpb24gb3BlbkFzc2Vzc21lbnRzKClcblx0XHR7XG5cdFx0XHQvLyBvcGVuIGZvcm1zIHRhYiB3aXRoIFwiTGlicmFyeVwiIGxpc3Qgc2VsZWN0ZWRcblx0XHRcdCRzdGF0ZS5nbygncmVjb3JkLmZvcm1zJywge2Zvcm1MaXN0SWQ6IDF9KTtcblx0XHR9O1xuXG5cdFx0Ly9Ob3RlIGRpc3BsYXkgZnVuY3Rpb25zXG5cdFx0Y29udHJvbGxlci5hZGRNb3JlSXRlbXMgPSBmdW5jdGlvbiBhZGRNb3JlSXRlbXMoKVxuXHRcdHtcblx0XHRcdGNvbnNvbGUubG9nKGNvbnRyb2xsZXIuYnVzeSk7XG5cdFx0XHRpZiAoY29udHJvbGxlci5idXN5KSByZXR1cm47XG5cblx0XHRcdGNvbnRyb2xsZXIuYnVzeSA9IHRydWU7XG5cblx0XHRcdG5vdGVTZXJ2aWNlLmdldE5vdGVzRnJvbSgkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObywgY29udHJvbGxlci5pbmRleCwgMjAsIGNvbnRyb2xsZXIucGFnZS5ub3RlRmlsdGVyKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnd2hhdHMgdGhlIGRhdGEnLCBhbmd1bGFyLmlzVW5kZWZpbmVkKHJlc3VsdHMubm90ZWxpc3QpLCByZXN1bHRzLm5vdGVsaXN0KTtcblx0XHRcdFx0XHRpZiAoYW5ndWxhci5pc0RlZmluZWQocmVzdWx0cy5ub3RlbGlzdCkpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly9jb250cm9sbGVyLnBhZ2Uubm90ZXMgPSBkYXRhO1xuXHRcdFx0XHRcdFx0aWYgKHJlc3VsdHMubm90ZWxpc3QgaW5zdGFuY2VvZiBBcnJheSlcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJvayBpdHMgaW4gYW4gYXJyYXlcIiwgY29udHJvbGxlci5idXN5KTtcblx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHRzLm5vdGVsaXN0Lmxlbmd0aDsgaSsrKVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLm5vdGVzLm5vdGVsaXN0LnB1c2gocmVzdWx0cy5ub3RlbGlzdFtpXSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5wYWdlLm5vdGVzLm5vdGVsaXN0LnB1c2gocmVzdWx0cy5ub3RlbGlzdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmluZGV4ID0gY29udHJvbGxlci5wYWdlLm5vdGVzLm5vdGVsaXN0Lmxlbmd0aDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29udHJvbGxlci5idXN5ID0gZmFsc2U7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5lcnJvciA9IGVycm9ycztcblx0XHRcdFx0XHRjb250cm9sbGVyLmJ1c3kgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmFkZE1vcmVJdGVtcygpO1xuXG5cdFx0Y29udHJvbGxlci5lZGl0Tm90ZSA9IGZ1bmN0aW9uIGVkaXROb3RlKG5vdGUpXG5cdFx0e1xuXHRcdFx0JHJvb3RTY29wZS4kZW1pdCgnbG9hZE5vdGVGb3JFZGl0Jywgbm90ZSk7XG5cdFx0fTtcblxuXHRcdC8vIENhbGwgdGhlIGZpbmRHcm91cE5vdGUgZnVuY3Rpb24gYW5kIHNlYXJjaCBmb3IgdGhlIGdpdmVuIG5vdGUsIGlmIGZvdW5kLCBvcGVuIHRoZSBncm91cE5vdGUgZWRpdG9yXG5cdFx0Y29udHJvbGxlci5lZGl0R3JvdXBOb3RlID0gZnVuY3Rpb24gZWRpdEdyb3VwTm90ZShub3RlKVxuXHRcdHtcblx0XHRcdHZhciBvYmogPSBjb250cm9sbGVyLmZpbmRHcm91cE5vdGUobm90ZSk7XG5cblx0XHRcdGlmIChvYmogIT09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdG9iai5tb2R1bGUuZWRpdG9yTmFtZXMgPSBub3RlLmVkaXRvck5hbWVzO1xuXHRcdFx0XHRjb250cm9sbGVyLmdvdG9TdGF0ZShvYmoubm90ZSwgb2JqLm1vZHVsZSwgb2JqLm5vdGUuaWQpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIFRoZXJlIGlzIHByb2JhYmx5IGEgYmV0dGVyIHdheSBvZiBkb2luZyB0aGlzXG5cdFx0Y29udHJvbGxlci5maW5kR3JvdXBOb3RlID0gZnVuY3Rpb24gZmluZEdyb3VwTm90ZShub3RlKVxuXHRcdHtcblx0XHRcdHZhciBtb2R1bGVMaXN0ID0gY29udHJvbGxlci5wYWdlLmNvbHVtbk9uZS5tb2R1bGVzO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtb2R1bGVMaXN0Lmxlbmd0aDsgaSsrKVxuXHRcdFx0e1xuXG5cdFx0XHRcdHZhciBzdW1tYXJ5SXRlbXMgPSBtb2R1bGVMaXN0W2ldLnN1bW1hcnlJdGVtO1xuXHRcdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IHN1bW1hcnlJdGVtcy5sZW5ndGg7IGsrKylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChzdW1tYXJ5SXRlbXNba10ubm90ZUlkID09PSBub3RlLm5vdGVJZClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRub3RlOiBzdW1tYXJ5SXRlbXNba10sXG5cdFx0XHRcdFx0XHRcdG1vZHVsZTogbW9kdWxlTGlzdFtpXVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnBhZ2UuY3VycmVudEVkaXROb3RlID0ge307XG5cblx0XHRjb250cm9sbGVyLmlzTm90ZUJlaW5nRWRpdGVkID0gZnVuY3Rpb24gaXNOb3RlQmVpbmdFZGl0ZWQobm90ZSlcblx0XHR7XG5cblx0XHRcdGlmIChub3RlLnV1aWQgPT09IGNvbnRyb2xsZXIucGFnZS5jdXJyZW50RWRpdE5vdGUudXVpZCAmJiBub3RlLnV1aWQgIT09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHRcdCRyb290U2NvcGUuJG9uKCdjdXJyZW50bHlFZGl0aW5nTm90ZScsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucGFnZS5jdXJyZW50RWRpdE5vdGUgPSBkYXRhO1xuXHRcdH0pO1xuXG5cdFx0Ly8gVE9ET1xuXHRcdCRyb290U2NvcGUuJG9uKCdzdG9wRWRpdGluZ05vdGUnLCBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5wYWdlLmN1cnJlbnRFZGl0Tm90ZSA9IHt9O1xuXHRcdH0pO1xuXG5cdFx0JHJvb3RTY29wZS4kb24oJ25vdGVTYXZlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKVxuXHRcdHtcblx0XHRcdGNvbnNvbGUubG9nKCduZXcgZGF0YSBjb21pbmcgaW4nLCBkYXRhKTtcblx0XHRcdHZhciBub3RlRm91bmQgPSBmYWxzZTtcblx0XHRcdGZvciAodmFyIG5vdGVjb3VudCA9IDA7IG5vdGVjb3VudCA8IGNvbnRyb2xsZXIucGFnZS5ub3Rlcy5ub3RlbGlzdC5sZW5ndGg7IG5vdGVjb3VudCsrKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoZGF0YS51dWlkID09IGNvbnRyb2xsZXIucGFnZS5ub3Rlcy5ub3RlbGlzdFtub3RlY291bnRdLnV1aWQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygndXVpZCAnICsgZGF0YS51dWlkICsgJyBub3RlY291bnQgJyArIG5vdGVjb3VudCwgZGF0YSwgY29udHJvbGxlci5wYWdlLm5vdGVzLm5vdGVsaXN0W25vdGVjb3VudF0pO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5ub3Rlcy5ub3RlbGlzdFtub3RlY291bnRdID0gZGF0YTtcblx0XHRcdFx0XHRub3RlRm91bmQgPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChub3RlRm91bmQgPT0gZmFsc2UpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5ub3Rlcy5ub3RlbGlzdC51bnNoaWZ0KGRhdGEpO1xuXHRcdFx0fVxuXHRcdFx0Y29udHJvbGxlci5pbmRleCA9IGNvbnRyb2xsZXIucGFnZS5ub3Rlcy5ub3RlbGlzdC5sZW5ndGg7XG5cdFx0fSk7XG5cblx0XHQvLyBDaGVjayBpZiBub3RlIHJlZ3VsYXIgbm90ZSwgaWYgbm90LCB3ZSBtdXN0IGVpdGhlciBkaXNwbGF5IHRoZSBncm91cCBub3RlIGVkaXQgd2luZG93IG9yIGhhdmUgbm8gZWRpdCBvcHRpb25cblx0XHRjb250cm9sbGVyLmlzUmVndWxhck5vdGUgPSBmdW5jdGlvbiBpc1JlZ3VsYXJOb3RlKG5vdGUpXG5cdFx0e1xuXHRcdFx0aWYgKG5vdGUuZG9jdW1lbnQgfHwgbm90ZS5yeEFubm90YXRpb24gfHwgbm90ZS5lZm9ybURhdGEgfHwgbm90ZS5lbmNvdW50ZXJGb3JtIHx8IG5vdGUuaW52b2ljZSB8fCBub3RlLnRpY2tsZXJOb3RlIHx8IG5vdGUuY3BwKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH07XG5cblx0XHQvL05vdGUgZGlzcGxheSBmdW5jdGlvbnNcblx0XHRjb250cm9sbGVyLnNldENvbG9yID0gZnVuY3Rpb24gc2V0Q29sb3Iobm90ZSlcblx0XHR7XG5cdFx0XHRpZiAobm90ZS5lZm9ybURhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0J2JvcmRlci1sZWZ0LWNvbG9yJzogJyNERkYwRDgnLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAobm90ZS5kb2N1bWVudClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHQnYm9yZGVyLWxlZnQtY29sb3InOiAnIzYxN0NCMicsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChub3RlLnJ4QW5ub3RhdGlvbilcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHQnYm9yZGVyLWxlZnQtY29sb3InOiAnI0QzRDNEMycsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChub3RlLmVuY291bnRlckZvcm0pXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0J2JvcmRlci1sZWZ0LWNvbG9yJzogJyNCQ0FENzUnLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAobm90ZS5pbnZvaWNlKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdCdib3JkZXItbGVmdC1jb2xvcic6ICcjI0ZGNzI3MicsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChub3RlLnRpY2tsZXJOb3RlKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdCdib3JkZXItbGVmdC1jb2xvcic6ICcjRkZBOTZGJyxcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKG5vdGUuY3BwKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdCdib3JkZXItbGVmdC1jb2xvcic6ICcjOUI4MTY2Jyxcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zaG93Tm90ZUhlYWRlciA9IGZ1bmN0aW9uIHNob3dOb3RlSGVhZGVyKG5vdGUpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucGFnZS5vbmx5Tm90ZXMpXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChub3RlLmRvY3VtZW50IHx8IG5vdGUucnhBbm5vdGF0aW9uIHx8IG5vdGUuZWZvcm1EYXRhIHx8IG5vdGUuZW5jb3VudGVyRm9ybSB8fCBub3RlLmludm9pY2UgfHwgbm90ZS50aWNrbGVyTm90ZSB8fCBub3RlLmNwcClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2hvd05vdGUgPSBmdW5jdGlvbiBzaG93Tm90ZShub3RlKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLnBhZ2Uub25seU5vdGVzKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAobm90ZS5kb2N1bWVudCB8fCBub3RlLnJ4QW5ub3RhdGlvbiB8fCBub3RlLmVmb3JtRGF0YSB8fCBub3RlLmVuY291bnRlckZvcm0gfHwgbm90ZS5pbnZvaWNlIHx8IG5vdGUudGlja2xlck5vdGUgfHwgbm90ZS5jcHApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYoY29udHJvbGxlci5wYWdlLm9ubHlNaW5lKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBIaWRlIG5vdGUgaWYgdGhlIGN1cnJlbnQgdXNlciBpcyBub3QgaW4gdGhlIGxpc3Qgb2YgZWRpdG9ycy5cblx0XHRcdFx0Ly8gVE9ETzogRGVjaWRlIGxhdGVyIGlmIHdlIHdhbnQgdG8gZmlsdGVyIGJhc2VkIG9uIHRoaXMgcmF0aGVyIHRoYW4gdGhlIGF1dGhvciBhbG9uZVxuXHRcdFx0XHQvLyBpZiAoIUp1bm8uQ29tbW9uLlV0aWwuaXNJbkFycmF5KHVzZXIuZm9ybWF0dGVkTmFtZSwgbm90ZS5lZGl0b3JOYW1lcykpXG5cdFx0XHRcdC8vIFx0cmV0dXJuIGZhbHNlO1xuXG5cdFx0XHRcdC8vIEhpZGUgdGhlIG5vdGUgaWYgdGhlIGN1cnJlbnQgdXNlcidzIHByb3ZkZXIgbnVtYmVyIGRvZXMgbm90IG1hdGNoIHRoYXQgb2YgdGhlIG5vdGUgYXV0aG9yXG5cdFx0XHRcdGlmICh1c2VyLnByb3ZpZGVyTm8gIT09IG5vdGUucHJvdmlkZXJObylcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gIW5vdGUuZGVsZXRlZDtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZXROb3RlSGVhZGVyID0gZnVuY3Rpb24gZmlyc3RMaW5lKG5vdGVPYmopXG5cdFx0e1xuXHRcdFx0cmV0dXJuICBub3RlT2JqLm5vdGUudHJpbSgpLnNwbGl0KCdcXG4nKVswXTsgLy8gRmlyc3QgbGluZSBvZiB0aGUgbm90ZSB0ZXh0LCBzcGxpdCBieSBuZXdsaW5lXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIudHJhY2tlclVybCA9IFwiXCI7XG5cblx0XHRjb250cm9sbGVyLmdldFRyYWNrZXJVcmwgPSBmdW5jdGlvbiBnZXRUcmFja2VyVXJsKGRlbW9ncmFwaGljTm8pXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci50cmFja2VyVXJsID0gJy4uL29zY2FyRW5jb3VudGVyL29zY2FyTWVhc3VyZW1lbnRzL0hlYWx0aFRyYWNrZXJQYWdlLmpzcGY/dGVtcGxhdGU9dHJhY2tlciZkZW1vZ3JhcGhpY19ubz0nICsgZGVtb2dyYXBoaWNObyArICcmbnVtRWxlPTQmdHJhY2tlcj1zbGltJztcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci50b2dnbGVMaXN0ID0gZnVuY3Rpb24gdG9nZ2xlTGlzdChtb2QpXG5cdFx0e1xuXG5cdFx0XHQvLyBJZiBhbGwgdGhlIGl0ZW1zIGFyZSBkaXNwbGF5ZWQsIHJlc2V0IGRpc3BsYXlTaXplIHRvIDUgKG1pbiksIGVsc2UsIHNob3cgYWxsIHRoZSBpdGVtc1xuXHRcdFx0aWYgKG1vZC5kaXNwbGF5U2l6ZSA+PSBtb2Quc3VtbWFyeUl0ZW0ubGVuZ3RoKVxuXHRcdFx0e1xuXHRcdFx0XHRtb2QuZGlzcGxheVNpemUgPSA1O1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRtb2QuZGlzcGxheVNpemUgPSBtb2Quc3VtbWFyeUl0ZW0ubGVuZ3RoO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNob3dNb3JlSXRlbXMgPSBmdW5jdGlvbiBzaG93TW9yZUl0ZW1zKG1vZClcblx0XHR7XG5cblx0XHRcdGlmICghYW5ndWxhci5pc0RlZmluZWQobW9kLnN1bW1hcnlJdGVtKSlcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAobW9kLnN1bW1hcnlJdGVtLmxlbmd0aCA9PSAwKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH07XG5cblx0XHQvLyBSZXR1cm4gdHJ1ZSBpZiBhIGdpdmVuIHNlY3Rpb24gaXMgZXhwYW5kZWQsIG90aGVyd2lzZSByZXR1cm4gZmFsc2Vcblx0XHRjb250cm9sbGVyLmlzU2VjdGlvbkV4cGFuZGVkID0gZnVuY3Rpb24gaXNTZWN0aW9uRXhwYW5kZWQobW9kKVxuXHRcdHtcblx0XHRcdGlmIChtb2QuZGlzcGxheVNpemUgPiA1KVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cblx0XHQvLyBSZXR1cm4gdHJ1ZSBpZiBhIGdpdmVuIHNlY3Rpb24gaXMgZW1wdHksIG90aGVyd2lzZSByZXR1cm4gZmFsc2Vcblx0XHRjb250cm9sbGVyLmlzU2VjdGlvbkVtcHR5ID0gZnVuY3Rpb24gaXNTZWN0aW9uRW1wdHkobW9kKVxuXHRcdHtcblx0XHRcdGlmIChtb2Quc3VtbWFyeUl0ZW0ubGVuZ3RoIDw9IDUpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHRcdC8vIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbm90ZSBpcyBhbiB1bnNpZ25lZCBlbmNvdW50ZXIgbm90ZVxuXHRcdGNvbnRyb2xsZXIuaXNVbnNpZ25lZEVuY291bnRlck5vdGUgPSBmdW5jdGlvbiBpc1Vuc2lnbmVkRW5jb3VudGVyTm90ZShub3RlKVxuXHRcdHtcblx0XHRcdHJldHVybiAoIW5vdGUuaXNTaWduZWQgJiYgIW5vdGUuY3BwICYmICFub3RlLmRvY3VtZW50ICYmICFub3RlLnRpY2tsZXJOb3RlICYmICFub3RlLmVmb3JtRGF0YSk7XG5cdFx0fTtcblxuXHRcdC8vIGNvbnRyb2xsZXIuc2hvd01vcmVJdGVtc1N5bWJvbCA9IGZ1bmN0aW9uKG1vZClcblx0XHQvLyB7XG5cdFx0Ly8gXHRpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKG1vZC5zdW1tYXJ5SXRlbSkpXG5cdFx0Ly8gXHR7XG5cdFx0Ly8gXHRcdHJldHVybiBcIlwiO1xuXHRcdC8vIFx0fVxuXG5cdFx0Ly8gXHRpZiAoKG1vZC5kaXNwbGF5U2l6ZSA8IG1vZC5zdW1tYXJ5SXRlbS5sZW5ndGgpICYmIG1vZC5kaXNwbGF5U2l6ZSA9PSBpbml0aWFsRGlzcGxheUxpbWl0KVxuXHRcdC8vIFx0e1xuXHRcdC8vIFx0XHRyZXR1cm4gXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93biBoYW5kLWhvdmVyIHB1bGwtcmlnaHRcIjtcblx0XHQvLyBcdH1cblx0XHQvLyBcdGVsc2UgaWYgKChtb2QuZGlzcGxheVNpemUgPT0gbW9kLnN1bW1hcnlJdGVtLmxlbmd0aCkgJiYgbW9kLmRpc3BsYXlTaXplICE9IGluaXRpYWxEaXNwbGF5TGltaXQpXG5cdFx0Ly8gXHR7XG5cdFx0Ly8gXHRcdHJldHVybiBcImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi11cCBoYW5kLWhvdmVyIHB1bGwtcmlnaHRcIjtcblx0XHQvLyBcdH1cblx0XHQvLyBcdGVsc2UgaWYgKG1vZC5zdW1tYXJ5SXRlbS5sZW5ndGggPD0gaW5pdGlhbERpc3BsYXlMaW1pdClcblx0XHQvLyBcdHtcblx0XHQvLyBcdFx0cmV0dXJuIFwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd24gZ2x5cGhpY29uLWNoZXZyb24tZG93bi1kaXNhYmxlZCBwdWxsLXJpZ2h0XCI7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gXHRlbHNlXG5cdFx0Ly8gXHR7XG5cdFx0Ly8gXHRcdHJldHVybiBcIlwiO1xuXHRcdC8vIFx0fVxuXG5cdFx0Ly8gXHRpZiAoY29udHJvbGxlci5pc1NlY3Rpb25FeHBhbmRlZChtb2QpKVxuXHRcdC8vIFx0e1xuXHRcdC8vIFx0XHRyZXR1cm4gXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tdXAgaGFuZC1ob3ZlciBwdWxsLXJpZ2h0XCI7XG5cdFx0Ly8gXHR9XG5cblx0XHQvLyBcdHJldHVybiBcImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duIGhhbmQtaG92ZXIgcHVsbC1yaWdodFwiO1xuXG5cdFx0Ly8gfTtcblxuXHRcdGZ1bmN0aW9uIGdldExlZnRJdGVtcygpXG5cdFx0e1xuXHRcdFx0c3VtbWFyeVNlcnZpY2UuZ2V0U3VtbWFyeUhlYWRlcnMoJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm8sICdsZWZ0JykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJsZWZ0XCIsIHJlc3VsdHMpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5jb2x1bW5PbmUubW9kdWxlcyA9IHJlc3VsdHM7XG5cdFx0XHRcdFx0ZmlsbEl0ZW1zKGNvbnRyb2xsZXIucGFnZS5jb2x1bW5PbmUubW9kdWxlcyk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdFx0Y29udHJvbGxlci5lcnJvciA9IGVycm9ycztcblx0XHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Z2V0TGVmdEl0ZW1zKCk7XG5cblxuXHRcdGZ1bmN0aW9uIGdldFJpZ2h0SXRlbXMoKVxuXHRcdHtcblx0XHRcdHN1bW1hcnlTZXJ2aWNlLmdldFN1bW1hcnlIZWFkZXJzKCRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vLCAncmlnaHQnKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInJpZ2h0XCIsIHJlc3VsdHMpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIucGFnZS5jb2x1bW5UaHJlZS5tb2R1bGVzID0gcmVzdWx0cztcblx0XHRcdFx0XHRmaWxsSXRlbXMoY29udHJvbGxlci5wYWdlLmNvbHVtblRocmVlLm1vZHVsZXMpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIuZXJyb3IgPSBlcnJvcnM7XG5cdFx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGdldFJpZ2h0SXRlbXMoKTtcblxuXHRcdHZhciBzdW1tYXJ5TGlzdHMgPSB7fTtcblxuXHRcdGZ1bmN0aW9uIGZpbGxJdGVtcyhpdGVtc1RvRmlsbClcblx0XHR7XG5cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXNUb0ZpbGwubGVuZ3RoOyBpKyspXG5cdFx0XHR7XG5cdFx0XHRcdHN1bW1hcnlMaXN0c1tpdGVtc1RvRmlsbFtpXS5zdW1tYXJ5Q29kZV0gPSBpdGVtc1RvRmlsbFtpXTtcblxuXHRcdFx0XHRzdW1tYXJ5U2VydmljZS5nZXRGdWxsU3VtbWFyeSgkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObywgaXRlbXNUb0ZpbGxbaV0uc3VtbWFyeUNvZGUpLnRoZW4oXG5cdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmIChhbmd1bGFyLmlzRGVmaW5lZChyZXN1bHRzLnN1bW1hcnlJdGVtKSlcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0aWYgKHJlc3VsdHMuc3VtbWFyeUl0ZW0gaW5zdGFuY2VvZiBBcnJheSlcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHN1bW1hcnlMaXN0c1tyZXN1bHRzLnN1bW1hcnlDb2RlXS5zdW1tYXJ5SXRlbSA9IHJlc3VsdHMuc3VtbWFyeUl0ZW07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0c3VtbWFyeUxpc3RzW3Jlc3VsdHMuc3VtbWFyeUNvZGVdLnN1bW1hcnlJdGVtID0gW3Jlc3VsdHMuc3VtbWFyeUl0ZW1dO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblxuXHRcdGNvbnRyb2xsZXIuZWRpdEdyb3VwZWROb3RlcyA9IGZ1bmN0aW9uIGVkaXRHcm91cGVkTm90ZXMoc2l6ZSwgbW9kLCBhY3Rpb24pXG5cdFx0e1xuXG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKFxuXHRcdFx0e1xuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZWNvcmQvc3VtbWFyeS9ncm91cE5vdGVzLmpzcCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdSZWNvcmQuU3VtbWFyeS5Hcm91cE5vdGVzQ29udHJvbGxlciBhcyBncm91cE5vdGVzQ3RybCcsXG5cdFx0XHRcdGJhY2tkcm9wOiAnc3RhdGljJyxcblx0XHRcdFx0d2luZG93Q2xhc3M6ICdub3Rlc01vZGFsJyxcblx0XHRcdFx0c2l6ZTogc2l6ZSxcblx0XHRcdFx0cmVzb2x2ZTpcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG1vZDogZnVuY3Rpb24oKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJldHVybiBtb2Q7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRhY3Rpb246IGZ1bmN0aW9uKClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYWN0aW9uO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dXNlcjogZnVuY3Rpb24oKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJldHVybiB1c2VyO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHJlc3VsdHMpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAoZWRpdGluZ05vdGVJZCAhPSBudWxsKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5vdGVTZXJ2aWNlLnJlbW92ZUVkaXRpbmdOb3RlRmxhZyhlZGl0aW5nTm90ZUlkLCB1c2VyLnByb3ZpZGVyTm8pO1xuXHRcdFx0XHRcdFx0JGludGVydmFsLmNhbmNlbChpdHZTZXQpO1xuXHRcdFx0XHRcdFx0aXR2U2V0ID0gbnVsbDtcblx0XHRcdFx0XHRcdCRpbnRlcnZhbC5jYW5jZWwoaXR2Q2hlY2spO1xuXHRcdFx0XHRcdFx0aXR2Q2hlY2sgPSBudWxsO1xuXHRcdFx0XHRcdFx0ZWRpdGluZ05vdGVJZCA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdNb2RhbCBkaXNtaXNzZWQgYXQ6ICcgKyBuZXcgRGF0ZSgpKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0Y29uc29sZS5sb2coJCgnI215TW9kYWwnKSk7XG5cdFx0fTtcblxuXG5cdFx0Y29udHJvbGxlci5nb3RvU3RhdGUgPSBmdW5jdGlvbiBnb3RvU3RhdGUoaXRlbSwgbW9kLCBpdGVtSWQpXG5cdFx0e1xuXHRcdFx0Y29uc29sZS5sb2coJ0lURU06ICcsIGl0ZW0pO1xuXHRcdFx0Y29uc29sZS5sb2coJ01PRDogJywgbW9kKTtcblxuXHRcdFx0aWYgKGl0ZW0gPT0gXCJhZGRcIilcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5lZGl0R3JvdXBlZE5vdGVzKCdtZCcsIG1vZCwgbnVsbCk7XG5cblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGl0ZW0uYWN0aW9uID09ICdhZGQnICYmIGl0ZW0udHlwZSA9PSAnZHhfcmVnJylcblx0XHRcdHtcblxuXHRcdFx0XHRjb250cm9sbGVyLmVkaXRHcm91cGVkTm90ZXMoJ2xnJywgbW9kLCBpdGVtSWQpO1xuXG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChpdGVtLnR5cGUgPT0gJ2xhYicgfHwgaXRlbS50eXBlID09ICdkb2N1bWVudCcgfHwgaXRlbS50eXBlID09ICdyeCcgfHwgaXRlbS50eXBlID09ICdhbGxlcmd5JyB8fCBpdGVtLnR5cGUgPT0gJ3ByZXZlbnRpb24nIHx8IGl0ZW0udHlwZSA9PSAnZHNndWlkZWxpbmUnKVxuXHRcdFx0e1xuXG5cdFx0XHRcdGlmIChpdGVtLnR5cGUgPT0gJ3J4Jylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHdpbiA9IFwiUnhcIiArICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKGl0ZW0udHlwZSA9PSAnYWxsZXJneScpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR3aW4gPSBcIkFsbGVyZ3lcIiArICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKGl0ZW0udHlwZSA9PSAncHJldmVudGlvbicpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR3aW4gPSBcInByZXZlbnRpb25cIiArICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vaXRlbS50eXBlID09ICdsYWInIHx8IGl0ZW0udHlwZSA9PSAnZG9jdW1lbnQnXG5cdFx0XHRcdFx0Ly92YXIgcm5kID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMCk7XG5cdFx0XHRcdFx0d2luID0gXCJ3aW5faXRlbS50eXBlX1wiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0d2luZG93Lm9wZW4oaXRlbS5hY3Rpb24sIHdpbiwgXCJzY3JvbGxiYXJzPXllcywgbG9jYXRpb249bm8sIHdpZHRoPTkwMCwgaGVpZ2h0PTYwMFwiLCBcIlwiKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoaXRlbS5hY3Rpb24gPT0gJ2FjdGlvbicpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuZWRpdEdyb3VwZWROb3RlcygnbGcnLCBtb2QsIGl0ZW1JZCk7XG5cblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0JHN0YXRlLnRyYW5zaXRpb25UbyhpdGVtLmFjdGlvbixcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlbW9ncmFwaGljTm86ICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vLFxuXHRcdFx0XHRcdHR5cGU6IGl0ZW0udHlwZSxcblx0XHRcdFx0XHRpZDogaXRlbS5pZFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bG9jYXRpb246ICdyZXBsYWNlJyxcblx0XHRcdFx0XHRub3RpZnk6IHRydWVcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci52aWV3RWZvcm0gPSBmdW5jdGlvbiB2aWV3RWZvcm0oZUZvcm1JZClcblx0XHR7XG5cdFx0XHQkc3RhdGUudHJhbnNpdGlvblRvKCdyZWNvcmQuZm9ybXMudmlldycsXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZW1vZ3JhcGhpY05vOiAkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObyxcblx0XHRcdFx0XHR0eXBlOiAnZWZvcm0nLFxuXHRcdFx0XHRcdGlkOiBlRm9ybUlkXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsb2NhdGlvbjogJ3JlcGxhY2UnLFxuXHRcdFx0XHRcdG5vdGlmeTogdHJ1ZVxuXHRcdFx0XHR9KTtcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXIudmlld0RvY3VtZW50ID0gZnVuY3Rpb24gdmlld0RvY3VtZW50KGRvY3VtZW50SWQpXG5cdFx0e1xuXHRcdFx0Ly8gZ2V0IG9ubHkgZG9jdW1lbnQgc3VtbWFyeSBpdGVtc1xuXHRcdFx0bGV0IGl0ZW1BcnJheSA9IHN1bW1hcnlMaXN0c1snaW5jb21pbmcnXS5zdW1tYXJ5SXRlbTtcblx0XHRcdGxldCBpdGVtID0gbnVsbDtcblxuXHRcdFx0Ly8gZmluZCB0aGUgc3VtbWFyeSBpdGVtIHRoYXQgbWF0Y2hlcyB0aGUgZG9jdW1lbnQgaWRcblx0XHRcdGZvciAobGV0IGk9MDsgaSA8IGl0ZW1BcnJheS5sZW5ndGg7IGkrKylcblx0XHRcdHtcblx0XHRcdFx0aWYoaXRlbUFycmF5W2ldLmlkID09PSBkb2N1bWVudElkKSB7XG5cdFx0XHRcdFx0aXRlbSA9IGl0ZW1BcnJheVtpXTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBpZiB3ZSBmb3VuZCBhIG1hdGNoaW5nIGRvY3VtZW50LCBvcGVuIGl0XG5cdFx0XHRpZihpdGVtICE9IG51bGwpIHtcblx0XHRcdFx0Y29udHJvbGxlci5nb3RvU3RhdGUoaXRlbSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJpdGVtIG5vdCBsaW5rZWQgdG8gdmFsaWQgZG9jdW1lbnQgaWQ6XCIgKyBkb2N1bWVudElkKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cblx0XHRjb250cm9sbGVyLnNob3dQcmludE1vZGFsID0gZnVuY3Rpb24gc2hvd1ByaW50TW9kYWwobW9kLCBhY3Rpb24pXG5cdFx0e1xuXHRcdFx0dmFyIHNpemUgPSAnbGcnO1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbihcblx0XHRcdHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVjb3JkL3ByaW50LmpzcCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdSZWNvcmQuU3VtbWFyeS5SZWNvcmRQcmludENvbnRyb2xsZXIgYXMgcmVjb3JkUHJpbnRDdHJsJyxcblx0XHRcdFx0YmFja2Ryb3A6ICdzdGF0aWMnLFxuXHRcdFx0XHRzaXplOiBzaXplLFxuXHRcdFx0XHRyZXNvbHZlOlxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bW9kOiBmdW5jdGlvbigpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmV0dXJuIG1vZDtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0YWN0aW9uOiBmdW5jdGlvbigpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmV0dXJuIGFjdGlvbjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhyZXN1bHRzKTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnTW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdC8vIFRvZ2dsZSB3aGV0aGVyIHRoZSBub3RlIGlzIHNlbGVjdGVkIGZvciBwcmludGluZ1xuXHRcdGNvbnRyb2xsZXIudG9nZ2xlSXNTZWxlY3RlZEZvclByaW50ID0gZnVuY3Rpb24gdG9nZ2xlSXNTZWxlY3RlZEZvclByaW50KG5vdGUpXG5cdFx0e1xuXHRcdFx0bm90ZS5pc1NlbGVjdGVkID0gIW5vdGUuaXNTZWxlY3RlZDtcblx0XHR9O1xuXG5cdH1cbl0pO1xuXG5cbnZhciBpdHZTZXQgPSBudWxsO1xudmFyIGl0dkNoZWNrID0gbnVsbDtcbnZhciBlZGl0aW5nTm90ZUlkID0gbnVsbDsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdSZWNvcmQuVHJhY2tlcicsIFsnQ29tbW9uJywgJ0NvbW1vbi5TZXJ2aWNlcyddKTsiLCIvKlxuXG4gICAgQ29weXJpZ2h0IChjKSAyMDAxLTIwMDIuIERlcGFydG1lbnQgb2YgRmFtaWx5IE1lZGljaW5lLCBNY01hc3RlciBVbml2ZXJzaXR5LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgIFRoaXMgc29mdHdhcmUgaXMgcHVibGlzaGVkIHVuZGVyIHRoZSBHUEwgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXG4gICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vclxuICAgIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDJcbiAgICBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiAgICBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UgLSBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNywgVVNBLlxuXG4gICAgVGhpcyBzb2Z0d2FyZSB3YXMgd3JpdHRlbiBmb3IgdGhlXG4gICAgRGVwYXJ0bWVudCBvZiBGYW1pbHkgTWVkaWNpbmVcbiAgICBNY01hc3RlciBVbml2ZXJzaXR5XG4gICAgSGFtaWx0b25cbiAgICBPbnRhcmlvLCBDYW5hZGFcblxuKi9cblxuYW5ndWxhci5tb2R1bGUoJ1JlY29yZC5UcmFja2VyJykuY29udHJvbGxlcignUmVjb3JkLlRyYWNrZXIuVHJhY2tlckNvbnRyb2xsZXInLCBbXG5cblx0JyRyb290U2NvcGUnLFxuXHQnJHNjb3BlJyxcblx0JyRodHRwJyxcblx0JyRsb2NhdGlvbicsXG5cdCckc3RhdGVQYXJhbXMnLFxuXHQnJHN0YXRlJyxcblx0JyR0aW1lb3V0Jyxcblx0J2RlbW9ncmFwaGljU2VydmljZScsXG5cdCdub3RlU2VydmljZScsXG5cdCd1eFNlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRyb290U2NvcGUsXG5cdFx0JHNjb3BlLFxuXHRcdCRodHRwLFxuXHRcdCRsb2NhdGlvbixcblx0XHQkc3RhdGVQYXJhbXMsXG5cdFx0JHN0YXRlLFxuXHRcdCR0aW1lb3V0LFxuXHRcdGRlbW9ncmFwaGljU2VydmljZSxcblx0XHRub3RlU2VydmljZSxcblx0XHR1eFNlcnZpY2UpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblx0XHRjb250cm9sbGVyLmdldFRyYWNrZXJVcmwgPSBmdW5jdGlvbiBnZXRUcmFja2VyVXJsKClcblx0XHR7XG5cblx0XHRcdHVybCA9ICcuLi9vc2NhckVuY291bnRlci9vc2Nhck1lYXN1cmVtZW50cy9IZWFsdGhUcmFja2VyUGFnZS5qc3BmP3RlbXBsYXRlPXRyYWNrZXImZGVtb2dyYXBoaWNfbm89JyArICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vO1xuXG5cdFx0XHRyZXR1cm4gdXJsO1xuXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucmVzaXplSWZyYW1lID0gZnVuY3Rpb24gcmVzaXplSWZyYW1lKGlmcmFtZSlcblx0XHR7XG5cblx0XHRcdHZhciBoID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ7XG5cdFx0XHRpZiAoaCA+IDApXG5cdFx0XHR7XG5cdFx0XHRcdGlmcmFtZS5oZWlnaHQgPSBoICsgXCJweFwiO1xuXHRcdFx0XHQvL2FsZXJ0KFwiaCA+IDBcIik7XG5cdFx0XHR9XG5cdFx0XHQvL2FsZXJ0KFwiaFwiICsgaCk7XG5cdFx0fTtcblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnUmVwb3J0JywgWydDb21tb24nLCAnQ29tbW9uLlNlcnZpY2VzJ10pOyIsImFuZ3VsYXIubW9kdWxlKCdSZXBvcnQnKS5jb250cm9sbGVyKCdSZXBvcnQuUmVwb3J0QmFkQXBwb2ludG1lbnRTaGVldENvbnRyb2xsZXInLCBbXG5cblx0JyRzY29wZScsXG5cdCckbG9nJyxcblx0J3Byb3ZpZGVyU2VydmljZScsXG5cdCckZmlsdGVyJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JGxvZyxcblx0XHRwcm92aWRlclNlcnZpY2UsXG5cdFx0JGZpbHRlcilcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29udHJvbGxlci5wYXJhbXMgPSB7XG5cdFx0XHRwcm92aWRlck5vOiAnJyxcblx0XHRcdHN0YXJ0RGF0ZTogbmV3IERhdGUoKVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNlYXJjaFByb3ZpZGVycyA9IGZ1bmN0aW9uIHNlYXJjaFByb3ZpZGVycyh2YWwpXG5cdFx0e1xuXHRcdFx0dmFyIHNlYXJjaCA9IHtcblx0XHRcdFx0c2VhcmNoVGVybTogdmFsLFxuXHRcdFx0XHRhY3RpdmU6IHRydWVcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gcHJvdmlkZXJTZXJ2aWNlLnNlYXJjaFByb3ZpZGVycyhzZWFyY2gsIDAsIDEwKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR2YXIgcmVzcCA9IFtdO1xuXHRcdFx0XHRcdGZvciAodmFyIHggPSAwOyB4IDwgcmVzdWx0cy5sZW5ndGg7IHgrKylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXNwLnB1c2goXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHByb3ZpZGVyTm86IHJlc3VsdHNbeF0ucHJvdmlkZXJObyxcblx0XHRcdFx0XHRcdFx0bmFtZTogcmVzdWx0c1t4XS5maXJzdE5hbWUgKyAnICcgKyByZXN1bHRzW3hdLmxhc3ROYW1lXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3A7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cdFx0Y29udHJvbGxlci51cGRhdGVQcm92aWRlck5vID0gZnVuY3Rpb24gdXBkYXRlUHJvdmlkZXJObyhpdGVtLCBtb2RlbCwgbGFiZWwpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5wYXJhbXMucHJvdmlkZXJObyA9IG1vZGVsO1xuXHRcdFx0Y29udHJvbGxlci5wYXJhbXMubmFtZSA9IGxhYmVsO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmdlbmVyYXRlUmVwb3J0ID0gZnVuY3Rpb24gZ2VuZXJhdGVSZXBvcnQoKVxuXHRcdHtcblx0XHRcdHZhciBwID0gY29udHJvbGxlci5wYXJhbXM7XG5cdFx0XHR2YXIgc3RhcnREYXRlID0gJGZpbHRlcignZGF0ZScpKHAuc3RhcnREYXRlLCAneXl5eS1NTS1kZCcpO1xuXG5cdFx0XHR2YXIgdXJsID0gJy4uL3JlcG9ydC9yZXBvcnRhcHB0c2hlZXQuanNwP2RzbW9kZT1hbGwmcHJvdmlkZXJfbm89JyArIHAucHJvdmlkZXJObyArICcmc2RhdGU9JyArIHN0YXJ0RGF0ZTtcblx0XHRcdHdpbmRvdy5vcGVuKHVybCwgJ3JlcG9ydF9iYWRBcHB0U2hlZXQnLCAnaGVpZ2h0PTkwMCx3aWR0aD03MDAnKTtcblx0XHR9O1xuXHR9XG5dKTsiLCJhbmd1bGFyLm1vZHVsZSgnUmVwb3J0JykuY29udHJvbGxlcignUmVwb3J0LlJlcG9ydERheVNoZWV0Q29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRsb2cnLFxuXHQnJGZpbHRlcicsXG5cdCdwcm92aWRlclNlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkbG9nLFxuXHRcdCRmaWx0ZXIsXG5cdFx0cHJvdmlkZXJTZXJ2aWNlKVxuXHR7XG5cblx0XHR2YXIgY29udHJvbGxlciA9IHRoaXM7XG5cblx0XHRjb250cm9sbGVyLnBhcmFtcyA9IHtcblx0XHRcdHByb3ZpZGVyTm86ICcnLFxuXHRcdFx0dHlwZTogJycsXG5cdFx0XHRzdGFydERhdGU6IG5ldyBEYXRlKCksXG5cdFx0XHRlbmREYXRlOiBuZXcgRGF0ZSgpLFxuXHRcdFx0c3RhcnRUaW1lOiBudWxsLFxuXHRcdFx0ZW5kVGltZTogbnVsbFxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNlYXJjaFByb3ZpZGVycyA9IGZ1bmN0aW9uIHNlYXJjaFByb3ZpZGVycyh2YWwpXG5cdFx0e1xuXHRcdFx0dmFyIHNlYXJjaCA9IHtcblx0XHRcdFx0c2VhcmNoVGVybTogdmFsLFxuXHRcdFx0XHRhY3RpdmU6IHRydWVcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gcHJvdmlkZXJTZXJ2aWNlLnNlYXJjaFByb3ZpZGVycyhzZWFyY2gsIDAsIDEwKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR2YXIgcmVzcCA9IFtdO1xuXHRcdFx0XHRcdGZvciAodmFyIHggPSAwOyB4IDwgcmVzdWx0cy5sZW5ndGg7IHgrKylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXNwLnB1c2goXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHByb3ZpZGVyTm86IHJlc3VsdHNbeF0ucHJvdmlkZXJObyxcblx0XHRcdFx0XHRcdFx0bmFtZTogcmVzdWx0c1t4XS5maXJzdE5hbWUgKyAnICcgKyByZXN1bHRzW3hdLmxhc3ROYW1lXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3A7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cdFx0Y29udHJvbGxlci51cGRhdGVQcm92aWRlck5vID0gZnVuY3Rpb24gdXBkYXRlUHJvdmlkZXJObyhpdGVtLCBtb2RlbCwgbGFiZWwpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5wYXJhbXMucHJvdmlkZXJObyA9IG1vZGVsO1xuXHRcdFx0Y29udHJvbGxlci5kYXRhLnByb3ZpZGVyTm8gPSBsYWJlbDtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZW5lcmF0ZVJlcG9ydCA9IGZ1bmN0aW9uIGdlbmVyYXRlUmVwb3J0KClcblx0XHR7XG5cdFx0XHR2YXIgcCA9IGNvbnRyb2xsZXIucGFyYW1zO1xuXHRcdFx0aWYgKHAudHlwZSA9PT0gJ2FsbCcgfHwgcC50eXBlID09PSAnYWxsLW5yJylcblx0XHRcdHtcblx0XHRcdFx0dmFyIHN0YXJ0RGF0ZSA9ICRmaWx0ZXIoJ2RhdGUnKShwLnN0YXJ0RGF0ZSwgJ3l5eXktTU0tZGQnKTtcblx0XHRcdFx0dmFyIGVuZERhdGUgPSAkZmlsdGVyKCdkYXRlJykocC5lbmREYXRlLCAneXl5eS1NTS1kZCcpO1xuXG5cdFx0XHRcdHZhciBzdGFydFRpbWUgPSAkZmlsdGVyKCdkYXRlJykocC5zdGFydFRpbWUsICdISDptbScpO1xuXHRcdFx0XHR2YXIgZW5kVGltZSA9ICRmaWx0ZXIoJ2RhdGUnKShwLmVuZFRpbWUsICdISDptbScpO1xuXG5cdFx0XHRcdHZhciB1cmwgPSAnLi4vcmVwb3J0L3JlcG9ydGRheXNoZWV0LmpzcD9kc21vZGU9YWxsJnByb3ZpZGVyX25vPScgKyAocC5wcm92aWRlck5vID09PSAnJyA/ICcqJyA6IHAucHJvdmlkZXJObykgKyAnJnNkYXRlPScgKyBzdGFydERhdGUgKyAnJmVkYXRlPScgKyBlbmREYXRlICsgJyZzVGltZT0nICsgc3RhcnRUaW1lICsgJyZlVGltZT0nICsgZW5kVGltZTtcblxuXHRcdFx0XHRpZiAocC50eXBlID09PSAnYWxsLW5yJylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHVybCArPSAnJnJvc3RlcmVkU3RhdHVzPXRydWUnO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0d2luZG93Lm9wZW4odXJsLCAncmVwb3J0X2RheXNoZWV0JywgJ2hlaWdodD05MDAsd2lkdGg9NzAwJyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChwLnR5cGUgPT09ICduZXcnKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgc3RhcnREYXRlID0gJGZpbHRlcignZGF0ZScpKHAuc3RhcnREYXRlLCAneXl5eS1NTS1kZCcpO1xuXHRcdFx0XHR2YXIgdXJsID0gJy4uL3JlcG9ydC9yZXBvcnRkYXlzaGVldC5qc3A/ZHNtb2RlPW5ldyZwcm92aWRlcl9ubz0nICsgKHAucHJvdmlkZXJObyA9PT0gJycgPyAnKicgOiBwLnByb3ZpZGVyTm8pICsgJyZzZGF0ZT0nICsgc3RhcnREYXRlO1xuXHRcdFx0XHR3aW5kb3cub3Blbih1cmwsICdyZXBvcnRfZGF5c2hlZXQnLCAnaGVpZ2h0PTkwMCx3aWR0aD03MDAnKTtcblx0XHRcdH1cblx0XHRcdGlmIChwLnR5cGUgPT09ICdsYWInKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgc3RhcnREYXRlID0gJGZpbHRlcignZGF0ZScpKHAuc3RhcnREYXRlLCAneXl5eS1NTS1kZCcpO1xuXHRcdFx0XHR2YXIgdXJsID0gJy4uL3JlcG9ydC9wcmludExhYkRheVNoZWV0QWN0aW9uLmRvP3htbFN0eWxlPWxhYkRheVNoZWV0LnhtbCZpbnB1dF9kYXRlPScgKyBzdGFydERhdGU7XG5cdFx0XHRcdHdpbmRvdy5vcGVuKHVybCwgJ3JlcG9ydF9kYXlzaGVldCcsICdoZWlnaHQ9OTAwLHdpZHRoPTcwMCcpO1xuXG5cdFx0XHR9XG5cdFx0XHRpZiAocC50eXBlID09PSAnYmlsbGluZycpXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBzdGFydERhdGUgPSAkZmlsdGVyKCdkYXRlJykocC5zdGFydERhdGUsICd5eXl5LU1NLWRkJyk7XG5cdFx0XHRcdHZhciB1cmwgPSAnLi4vcmVwb3J0L3ByaW50TGFiRGF5U2hlZXRBY3Rpb24uZG8/eG1sU3R5bGU9YmlsbERheVNoZWV0LnhtbCZpbnB1dF9kYXRlPScgKyBzdGFydERhdGU7XG5cdFx0XHRcdHdpbmRvdy5vcGVuKHVybCwgJ3JlcG9ydF9kYXlzaGVldCcsICdoZWlnaHQ9OTAwLHdpZHRoPTcwMCcpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHAudHlwZSA9PT0gJ3RhYicpXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBzdGFydERhdGUgPSAkZmlsdGVyKCdkYXRlJykocC5zdGFydERhdGUsICd5eXl5LU1NLWRkJyk7XG5cdFx0XHRcdHZhciB1cmwgPSAnLi4vcmVwb3J0L3RhYnVsYXJkYXlzaGVldHJlcG9ydC5qc3A/cHJvdmlkZXJfbm89JyArIChwLnByb3ZpZGVyTm8gPT09ICcnID8gJyonIDogcC5wcm92aWRlck5vKSArICcmc2RhdGU9JyArIHN0YXJ0RGF0ZTtcblx0XHRcdFx0d2luZG93Lm9wZW4odXJsLCAncmVwb3J0X2RheXNoZWV0JywgJ2hlaWdodD05MDAsd2lkdGg9NzAwJyk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5wYXJhbXMgPSB7XG5cdFx0XHRcdHByb3ZpZGVyTm86ICcnLFxuXHRcdFx0XHR0eXBlOiAnJyxcblx0XHRcdFx0c3RhcnREYXRlOiBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRlbmREYXRlOiBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRzdGFydFRpbWU6IG51bGwsXG5cdFx0XHRcdGVuZFRpbWU6IG51bGxcblx0XHRcdH07XG5cdFx0fTtcblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ1JlcG9ydCcpLmNvbnRyb2xsZXIoJ1JlcG9ydC5SZXBvcnRFZGJMaXN0Q29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRsb2cnLFxuXHQnJGZpbHRlcicsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCRsb2csXG5cdFx0JGZpbHRlcilcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29udHJvbGxlci5wYXJhbXMgPSB7XG5cdFx0XHRzdGFydERhdGU6IG5ldyBEYXRlKCksXG5cdFx0XHRlbmREYXRlOiBuZXcgRGF0ZSgpLFxuXHRcdFx0dmVyc2lvbjogJycsXG5cdFx0XHRyZWdpb246ICdPTidcblx0XHR9OyAvL3RvZG86IGdyYWIgcmVnaW9uIGZyb20gc29tZXdoZXJlXG5cblx0XHRjb250cm9sbGVyLmdlbmVyYXRlUmVwb3J0ID0gZnVuY3Rpb24gZ2VuZXJhdGVSZXBvcnQoKVxuXHRcdHtcblx0XHRcdCRsb2cubG9nKCdydW4gZWRiIHJlcG9ydCcpO1xuXHRcdFx0dmFyIHN0YXJ0RGF0ZSA9ICRmaWx0ZXIoJ2RhdGUnKShjb250cm9sbGVyLnBhcmFtcy5zdGFydERhdGUsICd5eXl5LU1NLWRkJyk7XG5cdFx0XHR2YXIgZW5kRGF0ZSA9ICRmaWx0ZXIoJ2RhdGUnKShjb250cm9sbGVyLnBhcmFtcy5lbmREYXRlLCAneXl5eS1NTS1kZCcpO1xuXG5cdFx0XHR2YXIgdXJsID0gJyc7XG5cblx0XHRcdGlmIChjb250cm9sbGVyLnBhcmFtcy5yZWdpb24gPT09ICdCQycpXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLnBhcmFtcy52ZXJzaW9uID09ICcwNScpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR1cmwgPSAnLi4vcmVwb3J0L3JlcG9ydGJjZWRibGlzdDIwMDcuanNwP3N0YXJ0RGF0ZT0nICsgc3RhcnREYXRlICsgJyZlbmREYXRlPScgKyBlbmREYXRlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHVybCA9ICcuLi9yZXBvcnQvcmVwb3J0YmNlZGJsaXN0LmpzcD9zdGFydERhdGU9JyArIHN0YXJ0RGF0ZSArICcmZW5kRGF0ZT0nICsgZW5kRGF0ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY29udHJvbGxlci5wYXJhbXMucmVnaW9uID09PSAnT04nKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoY29udHJvbGxlci5wYXJhbXMudmVyc2lvbiA9PSAnMDUnKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dXJsID0gJy4uL3JlcG9ydC9yZXBvcnRvbmVkYmxpc3QuanNwP3N0YXJ0RGF0ZT0nICsgc3RhcnREYXRlICsgJyZlbmREYXRlPScgKyBlbmREYXRlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHVybCA9ICcuLi9yZXBvcnQvcmVwb3J0bmV3ZWRibGlzdC5qc3A/c3RhcnREYXRlPScgKyBzdGFydERhdGUgKyAnJmVuZERhdGU9JyArIGVuZERhdGU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXG5cdFx0XHR3aW5kb3cub3Blbih1cmwsICdyZXBvcnRfZWRiJywgJ2hlaWdodD05MDAsd2lkdGg9NzAwJyk7XG5cblx0XHR9O1xuXHR9XG5dKTsiLCJhbmd1bGFyLm1vZHVsZSgnUmVwb3J0JykuY29udHJvbGxlcignUmVwb3J0LlJlcG9ydEZvbGxvd1VwSW50YWtlQ29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRsb2cnLFxuXHQnJGZpbHRlcicsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCRsb2csXG5cdFx0JGZpbHRlcilcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29udHJvbGxlci5wYXJhbXMgPSB7XG5cdFx0XHRzdGFydERhdGU6IG5ldyBEYXRlKCksXG5cdFx0XHRlbmREYXRlOiBuZXcgRGF0ZSgpLFxuXHRcdFx0aW5jbHVkZVBhc3RGb3JtczogdHJ1ZVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmdlbmVyYXRlUmVwb3J0ID0gZnVuY3Rpb24gZ2VuZXJhdGVSZXBvcnQoKVxuXHRcdHtcblx0XHRcdCRsb2cubG9nKCdydW4gZm9sbG93IHVwIGludGFrZSByZXBvcnQnKTtcblx0XHRcdHZhciBzdGFydERhdGUgPSAkZmlsdGVyKCdkYXRlJykoY29udHJvbGxlci5wYXJhbXMuc3RhcnREYXRlLCAneXl5eS1NTS1kZCcpO1xuXHRcdFx0dmFyIGVuZERhdGUgPSAkZmlsdGVyKCdkYXRlJykoY29udHJvbGxlci5wYXJhbXMuZW5kRGF0ZSwgJ3l5eXktTU0tZGQnKTtcblxuXHRcdFx0dmFyIHVybCA9ICcuLi9QTW1vZHVsZS9HZW5lcmljSW50YWtlL1JlcG9ydC5kbz9tZXRob2Q9cmVwb3J0JnR5cGU9aW5kZXB0aCZzdGFydERhdGU9JyArIHN0YXJ0RGF0ZSArICcmZW5kRGF0ZT0nICsgZW5kRGF0ZSArICcmaW5jbHVkZVBhc3Q9JyArIGNvbnRyb2xsZXIucGFyYW1zLmluY2x1ZGVQYXN0Rm9ybXM7XG5cdFx0XHR3aW5kb3cub3Blbih1cmwsICdyZXBvcnRfZm9sbG93dXBfaW50YWtlJywgJ2hlaWdodD05MDAsd2lkdGg9NzAwJyk7XG5cblx0XHR9O1xuXHR9XG5dKTsiLCJhbmd1bGFyLm1vZHVsZSgnUmVwb3J0JykuY29udHJvbGxlcignUmVwb3J0LlJlcG9ydE5vU2hvd0FwcG9pbnRtZW50U2hlZXRDb250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJGxvZycsXG5cdCckZmlsdGVyJyxcblx0J3Byb3ZpZGVyU2VydmljZScsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCRsb2csXG5cdFx0JGZpbHRlcixcblx0XHRwcm92aWRlclNlcnZpY2UpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXIucGFyYW1zID0ge1xuXHRcdFx0cHJvdmlkZXJObzogJycsXG5cdFx0XHRzdGFydERhdGU6IG5ldyBEYXRlKClcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zZWFyY2hQcm92aWRlcnMgPSBmdW5jdGlvbiBzZWFyY2hQcm92aWRlcnModmFsKVxuXHRcdHtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdHNlYXJjaFRlcm06IHZhbCxcblx0XHRcdFx0YWN0aXZlOiB0cnVlXG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5zZWFyY2hQcm92aWRlcnMoc2VhcmNoLCAwLCAxMCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIHJlc3AgPSBbXTtcblx0XHRcdFx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IHJlc3VsdHMubGVuZ3RoOyB4KyspXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmVzcC5wdXNoKFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRwcm92aWRlck5vOiByZXN1bHRzW3hdLnByb3ZpZGVyTm8sXG5cdFx0XHRcdFx0XHRcdG5hbWU6IHJlc3VsdHNbeF0uZmlyc3ROYW1lICsgJyAnICsgcmVzdWx0c1t4XS5sYXN0TmFtZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXNwO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXIudXBkYXRlUHJvdmlkZXJObyA9IGZ1bmN0aW9uIHVwZGF0ZVByb3ZpZGVyTm8oaXRlbSwgbW9kZWwsIGxhYmVsKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucGFyYW1zLnByb3ZpZGVyTm8gPSBtb2RlbDtcblx0XHRcdGNvbnRyb2xsZXIucGFyYW1zLm5hbWUgPSBsYWJlbDtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZW5lcmF0ZVJlcG9ydCA9IGZ1bmN0aW9uIGdlbmVyYXRlUmVwb3J0KClcblx0XHR7XG5cdFx0XHR2YXIgcCA9IGNvbnRyb2xsZXIucGFyYW1zO1xuXHRcdFx0dmFyIHN0YXJ0RGF0ZSA9ICRmaWx0ZXIoJ2RhdGUnKShwLnN0YXJ0RGF0ZSwgJ3l5eXktTU0tZGQnKTtcblx0XHRcdHZhciB1cmwgPSAnLi4vcmVwb3J0L3JlcG9ydG5vc2hvd2FwcHRsaXN0LmpzcD9wcm92aWRlcl9ubz0nICsgcC5wcm92aWRlck5vICsgJyZzZGF0ZT0nICsgc3RhcnREYXRlO1xuXHRcdFx0d2luZG93Lm9wZW4odXJsLCAncmVwb3J0X25vU2hvd0FwcHRTaGVldCcsICdoZWlnaHQ9OTAwLHdpZHRoPTcwMCcpO1xuXHRcdH07XG5cdH1cbl0pOyIsImFuZ3VsYXIubW9kdWxlKCdSZXBvcnQnKS5jb250cm9sbGVyKCdSZXBvcnQuUmVwb3J0T2xkUGF0aWVudHNDb250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJGxvZycsXG5cdCdwcm92aWRlclNlcnZpY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkbG9nLFxuXHRcdHByb3ZpZGVyU2VydmljZSlcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29udHJvbGxlci5wYXJhbXMgPSB7XG5cdFx0XHRwcm92aWRlck5vOiAnJyxcblx0XHRcdGFnZTogNjVcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zZWFyY2hQcm92aWRlcnMgPSBmdW5jdGlvbiBzZWFyY2hQcm92aWRlcnModmFsKVxuXHRcdHtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdHNlYXJjaFRlcm06IHZhbCxcblx0XHRcdFx0YWN0aXZlOiB0cnVlXG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5zZWFyY2hQcm92aWRlcnMoc2VhcmNoLCAwLCAxMCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciByZXNwID0gW107XG5cdFx0XHRcdFx0Zm9yICh2YXIgeCA9IDA7IHggPCByZXNwb25zZS5sZW5ndGg7IHgrKylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXNwLnB1c2goXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHByb3ZpZGVyTm86IHJlc3BvbnNlW3hdLnByb3ZpZGVyTm8sXG5cdFx0XHRcdFx0XHRcdG5hbWU6IHJlc3BvbnNlW3hdLmZpcnN0TmFtZSArICcgJyArIHJlc3BvbnNlW3hdLmxhc3ROYW1lXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3A7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cdFx0Y29udHJvbGxlci51cGRhdGVQcm92aWRlck5vID0gZnVuY3Rpb24gdXBkYXRlUHJvdmlkZXJObyhpdGVtLCBtb2RlbCwgbGFiZWwpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5wYXJhbXMucHJvdmlkZXJObyA9IG1vZGVsO1xuXHRcdFx0Y29udHJvbGxlci5wYXJhbXMubmFtZSA9IGxhYmVsO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmdlbmVyYXRlUmVwb3J0ID0gZnVuY3Rpb24gZ2VuZXJhdGVSZXBvcnQoKVxuXHRcdHtcblx0XHRcdHZhciBwID0gY29udHJvbGxlci5wYXJhbXM7XG5cdFx0XHR2YXIgdXJsID0gJy4uL3JlcG9ydC9yZXBvcnRwYXRpZW50Y2hhcnRsaXN0c3BlY2lhbC5qc3A/cHJvdmlkZXJfbm89JyArIChwLnByb3ZpZGVyTm8gPT09ICcnID8gJyonIDogcC5wcm92aWRlck5vKSArICcmYWdlPScgKyBwLmFnZTtcblx0XHRcdHdpbmRvdy5vcGVuKHVybCwgJ3JlcG9ydF9vbGRwYXRpZW50cycsICdoZWlnaHQ9OTAwLHdpZHRoPTcwMCcpO1xuXHRcdH07XG5cdH1cbl0pOyIsImFuZ3VsYXIubW9kdWxlKCdSZXBvcnQnKS5jb250cm9sbGVyKCdSZXBvcnQuUmVwb3J0UGF0aWVudENoYXJ0TGlzdENvbnRyb2xsZXInLCBbXG5cblx0JyRzY29wZScsXG5cdCckbG9nJyxcblx0J3Byb3ZpZGVyU2VydmljZScsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCRsb2csXG5cdFx0cHJvdmlkZXJTZXJ2aWNlKVxuXHR7XG5cblx0XHR2YXIgY29udHJvbGxlciA9IHRoaXM7XG5cblx0XHRjb250cm9sbGVyLnBhcmFtcyA9IHt9O1xuXG5cdFx0Y29udHJvbGxlci5zZWFyY2hQcm92aWRlcnMgPSBmdW5jdGlvbiBzZWFyY2hQcm92aWRlcnModmFsKVxuXHRcdHtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdHNlYXJjaFRlcm06IHZhbCxcblx0XHRcdFx0YWN0aXZlOiB0cnVlXG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5zZWFyY2hQcm92aWRlcnMoc2VhcmNoLCAwLCAxMCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIHJlc3AgPSBbXTtcblx0XHRcdFx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IHJlc3VsdHMubGVuZ3RoOyB4KyspXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmVzcC5wdXNoKFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRwcm92aWRlck5vOiByZXN1bHRzW3hdLnByb3ZpZGVyTm8sXG5cdFx0XHRcdFx0XHRcdG5hbWU6IHJlc3VsdHNbeF0uZmlyc3ROYW1lICsgJyAnICsgcmVzdWx0c1t4XS5sYXN0TmFtZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXNwO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXIudXBkYXRlUHJvdmlkZXJObyA9IGZ1bmN0aW9uIHVwZGF0ZVByb3ZpZGVyTm8oaXRlbSwgbW9kZWwsIGxhYmVsKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucGFyYW1zLnByb3ZpZGVyTm8gPSBtb2RlbDtcblx0XHRcdGNvbnRyb2xsZXIucGFyYW1zLm5hbWUgPSBsYWJlbDtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZW5lcmF0ZVJlcG9ydCA9IGZ1bmN0aW9uIGdlbmVyYXRlUmVwb3J0KClcblx0XHR7XG5cdFx0XHR2YXIgcCA9IGNvbnRyb2xsZXIucGFyYW1zO1xuXHRcdFx0aWYgKCFwLnByb3ZpZGVyTm8pXG5cdFx0XHR7XG5cdFx0XHRcdGFsZXJ0KCdQbGVhc2UgZW50ZXIgYSBwcm92aWRlcicpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHR2YXIgdXJsID0gJy4uL3JlcG9ydC9yZXBvcnRwYXRpZW50Y2hhcnRsaXN0LmpzcD9wcm92aWRlcl9ubz0nICsgcC5wcm92aWRlck5vO1xuXHRcdFx0d2luZG93Lm9wZW4odXJsLCAncmVwb3J0X3BhdGllbnRjaGFydGxpc3QnLCAnaGVpZ2h0PTkwMCx3aWR0aD03MDAnKTtcblx0XHR9O1xuXHR9XG5dKTsiLCJhbmd1bGFyLm1vZHVsZSgnUmVwb3J0JykuY29udHJvbGxlcignUmVwb3J0LlJlcG9ydFJlZ2lzdHJhdGlvbkludGFrZUNvbnRyb2xsZXInLCBbXG5cblx0JyRzY29wZScsXG5cdCckbG9nJyxcblx0JyRmaWx0ZXInLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkbG9nLFxuXHRcdCRmaWx0ZXIpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXIucGFyYW1zID0ge1xuXHRcdFx0c3RhcnREYXRlOiBuZXcgRGF0ZSgpLFxuXHRcdFx0ZW5kRGF0ZTogbmV3IERhdGUoKSxcblx0XHRcdGluY2x1ZGVQYXN0Rm9ybXM6IHRydWVcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZW5lcmF0ZVJlcG9ydCA9IGZ1bmN0aW9uIGdlbmVyYXRlUmVwb3J0KClcblx0XHR7XG5cdFx0XHQkbG9nLmxvZygncnVuIHJlZ2lzdHJhdGlvbiBpbnRha2UgcmVwb3J0Jyk7XG5cdFx0XHR2YXIgc3RhcnREYXRlID0gJGZpbHRlcignZGF0ZScpKGNvbnRyb2xsZXIucGFyYW1zLnN0YXJ0RGF0ZSwgJ3l5eXktTU0tZGQnKTtcblx0XHRcdHZhciBlbmREYXRlID0gJGZpbHRlcignZGF0ZScpKGNvbnRyb2xsZXIucGFyYW1zLmVuZERhdGUsICd5eXl5LU1NLWRkJyk7XG5cblx0XHRcdHZhciB1cmwgPSAnLi4vUE1tb2R1bGUvR2VuZXJpY0ludGFrZS9SZXBvcnQuZG8/bWV0aG9kPXJlcG9ydCZ0eXBlPXF1aWNrJnN0YXJ0RGF0ZT0nICsgc3RhcnREYXRlICsgJyZlbmREYXRlPScgKyBlbmREYXRlICsgJyZpbmNsdWRlUGFzdD0nICsgY29udHJvbGxlci5wYXJhbXMuaW5jbHVkZVBhc3RGb3Jtcztcblx0XHRcdHdpbmRvdy5vcGVuKHVybCwgJ3JlcG9ydF9yZWdpc3RyYXRpb25faW50YWtlJywgJ2hlaWdodD05MDAsd2lkdGg9NzAwJyk7XG5cblx0XHR9O1xuXHR9XG5dKTsiLCJhbmd1bGFyLm1vZHVsZSgnUmVwb3J0JykuY29udHJvbGxlcignUmVwb3J0LlJlcG9ydFNITWVudGFsSGVhbHRoQ29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRsb2cnLFxuXHQnJGZpbHRlcicsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCRsb2csXG5cdFx0JGZpbHRlcilcblx0e1xuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXIucGFyYW1zID0ge1xuXHRcdFx0c3RhcnREYXRlOiBuZXcgRGF0ZSgpXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZ2VuZXJhdGVSZXBvcnQgPSBmdW5jdGlvbiBnZW5lcmF0ZVJlcG9ydCgpXG5cdFx0e1xuXHRcdFx0JGxvZy5sb2coJ3J1biBzaCBtZW50YWwgaGVhbHRoIHJlcG9ydCcpO1xuXHRcdFx0dmFyIHN0YXJ0RGF0ZSA9ICRmaWx0ZXIoJ2RhdGUnKShjb250cm9sbGVyLnBhcmFtcy5zdGFydERhdGUsICd5eXl5LU1NLWRkJyk7XG5cblx0XHRcdHZhciB1cmwgPSAnLi4vUE1tb2R1bGUvU3RyZWV0SGVhbHRoSW50YWtlUmVwb3J0QWN0aW9uLmRvP3N0YXJ0RGF0ZT0nICsgc3RhcnREYXRlO1xuXHRcdFx0d2luZG93Lm9wZW4odXJsLCAncmVwb3J0X3NoJywgJ2hlaWdodD05MDAsd2lkdGg9NzAwJyk7XG5cblx0XHR9O1xuXHR9XG5dKTsiLCIvLyBGaWd1cmUgb3V0IHdoYXQgdG8gZG8gd2l0aCB0aGlzLiBcbmFuZ3VsYXIubW9kdWxlKCdvc2NhclByb3ZpZGVyVmlld01vZHVsZScpLmZhY3RvcnkoJ1JlcG9ydE5hdmlnYXRpb24nLCBbICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHJvb3RTY29wZSlcbntcblx0cmV0dXJuIHtcblx0XHRsb2NhdGlvbjogJycsXG5cblx0XHRsb2FkOiBmdW5jdGlvbihtc2cpXG5cdFx0e1xuXHRcdFx0dGhpcy5sb2NhdGlvbiA9IG1zZztcblx0XHR9XG5cdH07XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdSZXBvcnQnKS5jb250cm9sbGVyKCdSZXBvcnQuUmVwb3J0c0NvbnRyb2xsZXInLCBbXG5cblx0JyRzY29wZScsXG5cdCckc3RhdGUnLFxuXHQnJGZpbHRlcicsXG5cdCckbG9nJyxcblx0J1JlcG9ydE5hdmlnYXRpb24nLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkc3RhdGUsXG5cdFx0JGZpbHRlcixcblx0XHQkbG9nLFxuXHRcdFJlcG9ydE5hdmlnYXRpb24pXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdCRzY29wZS4kZW1pdCgnY29uZmlndXJlU2hvd1BhdGllbnRMaXN0JywgZmFsc2UpO1xuXG5cdFx0Y29udHJvbGxlci5yZXBvcnRzID0gW1xuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnRGF5c2hlZXRzJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9kYXlzaGVldC5qc3AnXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnQWN0aXZlIFBhdGllbnRzJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9pZnJhbWUuanNwJyxcblx0XHRcdFx0aWZyYW1lVXJsOiAnLi4vcmVwb3J0L3JlcG9ydGFjdGl2ZXBhdGllbnRsaXN0LmpzcCdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdPbGQgUGF0aWVudHMnLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZXBvcnQvcmVwb3J0X29sZFBhdGllbnRzLmpzcCdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdQYXRpZW50IENoYXJ0IExpc3QnLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZXBvcnQvcmVwb3J0X3BhdGllbnRDaGFydExpc3QuanNwJ1xuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0bmFtZTogJ0VEQiBMaXN0Jyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9lZGJfbGlzdC5qc3AnXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnQmFkIEFwcG9pbnRtZW50cycsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3JlcG9ydC9yZXBvcnRfYmFkQXBwb2ludG1lbnRzLmpzcCdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdObyBTaG93IEFwcG9pbnRtZW50cycsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3JlcG9ydC9yZXBvcnRfbm9TaG93QXBwb2ludG1lbnRzLmpzcCdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdDb25zdWx0YXRpb25zJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9pZnJhbWUuanNwJyxcblx0XHRcdFx0aWZyYW1lVXJsOiAnLi4vb3NjYXJSZXBvcnQvQ29uc3VsdGF0aW9uUmVwb3J0LmpzcCdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdMYWIgUmVxdWlzaXRpb25zJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9pZnJhbWUuanNwJyxcblx0XHRcdFx0aWZyYW1lVXJsOiAnLi4vb3NjYXJSZXBvcnQvTGFiUmVxUmVwb3J0LmpzcCdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdQcmV2ZW50aW9ucycsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3JlcG9ydC9yZXBvcnRfaWZyYW1lLmpzcCcsXG5cdFx0XHRcdGlmcmFtZVVybDogJy4uL29zY2FyUHJldmVudGlvbi9QcmV2ZW50aW9uUmVwb3J0aW5nLmpzcCdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdJbmplY3Rpb25zJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9pZnJhbWUuanNwJyxcblx0XHRcdFx0aWZyYW1lVXJsOiAnLi4vb3NjYXJSZXBvcnQvSW5qZWN0aW9uUmVwb3J0Mi5qc3AnXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnRGVtb2dyYXBoaWMgUmVwb3J0IFRvb2wnLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZXBvcnQvcmVwb3J0X2lmcmFtZS5qc3AnLFxuXHRcdFx0XHRpZnJhbWVVcmw6ICcuLi9vc2NhclJlcG9ydC9SZXBvcnREZW1vZ3JhcGhpY1JlcG9ydC5qc3AnXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnUGF0aWVudCBTdHVkeSBMaXN0Jyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9pZnJhbWUuanNwJyxcblx0XHRcdFx0aWZyYW1lVXJsOiAnLi4vcmVwb3J0L2RlbW9ncmFwaGljc3R1ZHlyZXBvcnQuanNwJ1xuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0bmFtZTogJ0Nocm9uaWMgRGlzZWFzZSBNYW5hZ2VtZW50Jyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9pZnJhbWUuanNwJyxcblx0XHRcdFx0aWZyYW1lVXJsOiAnLi4vb3NjYXJSZXBvcnQvb3NjYXJNZWFzdXJlbWVudHMvU2V0dXBTZWxlY3RDRE1SZXBvcnQuZG8nXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnV2FpdGluZyBMaXN0Jyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9pZnJhbWUuanNwJyxcblx0XHRcdFx0aWZyYW1lVXJsOiAnLi4vb3NjYXJXYWl0aW5nTGlzdC9TZXR1cERpc3BsYXlXYWl0aW5nTGlzdC5kbz93YWl0aW5nTGlzdElkPSdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdGb3JtcycsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3JlcG9ydC9yZXBvcnRfaWZyYW1lLmpzcCcsXG5cdFx0XHRcdGlmcmFtZVVybDogJy4uL3JlcG9ydC9yZXBvcnRGb3JtUmVjb3JkLmpzcCdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdDbGluaWNhbCcsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3JlcG9ydC9yZXBvcnRfaWZyYW1lLmpzcCcsXG5cdFx0XHRcdGlmcmFtZVVybDogJy4uL3JlcG9ydC9DbGluaWNhbFJlcG9ydHMuanNwJ1xuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0bmFtZTogJ1NDQlAgZGVtb2dyYXBoaWMgUmVwb3J0Jyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9pZnJhbWUuanNwJyxcblx0XHRcdFx0aWZyYW1lVXJsOiAnLi4vcmVwb3J0L3JlcG9ydEJDQVJEZW1vLmpzcCdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdSZXBvcnQgQnkgVGVtcGxhdGUnLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZXBvcnQvcmVwb3J0X2lmcmFtZS5qc3AnLFxuXHRcdFx0XHRpZnJhbWVVcmw6ICcuLi9vc2NhclJlcG9ydC9yZXBvcnRCeVRlbXBsYXRlL2hvbWVQYWdlLmpzcCdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdHZW5lcmFsIEZvcm1zJyxcblx0XHRcdFx0Z3JvdXA6ICdDQUlTSScsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3JlcG9ydC9yZXBvcnRfaWZyYW1lLmpzcCcsXG5cdFx0XHRcdGlmcmFtZVVybDogJy4uL1BNbW9kdWxlL0NsaWVudE1hbmFnZXIuZG8/bWV0aG9kPWdldEdlbmVyYWxGb3Jtc1JlcG9ydCdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdSZWdpc3RyYXRpb24gSW50YWtlJyxcblx0XHRcdFx0Z3JvdXA6ICdDQUlTSScsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3JlcG9ydC9yZXBvcnRfcmVnaXN0cmF0aW9uX2ludGFrZS5qc3AnXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnRm9sbG93LXVwIEludGFrZScsXG5cdFx0XHRcdGdyb3VwOiAnQ0FJU0knLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZXBvcnQvcmVwb3J0X2ZvbGxvd3VwX2ludGFrZS5qc3AnXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnQWN0aXZpdHkgUmVwb3J0Jyxcblx0XHRcdFx0Z3JvdXA6ICdDQUlTSScsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3JlcG9ydC9yZXBvcnRfaWZyYW1lLmpzcCcsXG5cdFx0XHRcdGlmcmFtZVVybDogJy4uL1BNbW9kdWxlL1JlcG9ydHMvUHJvZ3JhbUFjdGl2aXR5UmVwb3J0LmRvJ1xuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0bmFtZTogJ1VDRiBSZXBvcnQnLFxuXHRcdFx0XHRncm91cDogJ0NBSVNJJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9pZnJhbWUuanNwJyxcblx0XHRcdFx0aWZyYW1lVXJsOiAnLi4vU3VydmV5TWFuYWdlci5kbz9tZXRob2Q9cmVwb3J0Rm9ybSdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdTSCBNZW50YWwgSGVhbHRoIFJlcG9ydCcsXG5cdFx0XHRcdGdyb3VwOiAnQ0FJU0knLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9yZXBvcnQvcmVwb3J0X3NoX21lbnRhbF9oZWFsdGguanNwJ1xuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0bmFtZTogJ09TSVMgUmVwb3J0Jyxcblx0XHRcdFx0Z3JvdXA6ICdQdWJsaWMgSGVhbHRoJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9pZnJhbWUuanNwJyxcblx0XHRcdFx0aWZyYW1lVXJsOiAnLi4vb3NjYXJSZXBvcnQvT1NJU1JlcG9ydC5qc3AnXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnT25lIFRpbWUgQ29uc3VsdCBDRFMgUmVwb3J0Jyxcblx0XHRcdFx0Z3JvdXA6ICdQdWJsaWMgSGVhbHRoJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvcmVwb3J0L3JlcG9ydF9pZnJhbWUuanNwJyxcblx0XHRcdFx0aWZyYW1lVXJsOiAnLi4vb3NjYXJSZXBvcnQvQ0RTT25lVGltZUNvbnN1bHRSZXBvcnQuanNwJ1xuXHRcdFx0fSxcblxuXHRcdF07XG5cblx0XHRjb250cm9sbGVyLmluaXQgPSBmdW5jdGlvbiBpbml0KClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnJlcG9ydEdyb3VwID0gXCJcIjtcblx0XHRcdGNvbnRyb2xsZXIucmVwb3J0R3JvdXBzID0gY29udHJvbGxlci5nZXRSZXBvcnRHcm91cHMoKTtcblx0XHRcdGNvbnRyb2xsZXIucmVwb3J0U2lkZWJhciA9IFJlcG9ydE5hdmlnYXRpb247XG5cdFx0XHRjb250cm9sbGVyLnRlc3QgPSBjb250cm9sbGVyLnJlcG9ydFNpZGViYXIudXJsO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmVkaXREZW1vZ3JhcGhpY1NldCA9IGZ1bmN0aW9uIGVkaXREZW1vZ3JhcGhpY1NldCgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5zZWxlY3RSZXBvcnQoXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdEZW1vZ3JhcGhpYyBTZXQgRWRpdCcsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3JlcG9ydC9yZXBvcnRfaWZyYW1lLmpzcCcsXG5cdFx0XHRcdGlmcmFtZVVybDogJy4uL29zY2FyUmVwb3J0L2RlbW9ncmFwaGljU2V0RWRpdC5qc3AnXG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5nZXRSZXBvcnRzID0gZnVuY3Rpb24gZ2V0UmVwb3J0cygpXG5cdFx0e1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIucmVwb3J0R3JvdXAgIT0gbnVsbCAmJiBjb250cm9sbGVyLnJlcG9ydEdyb3VwLmxlbmd0aCA+IDApXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBmaWx0ZXJlZCA9ICRmaWx0ZXIoJ2ZpbHRlcicpKGNvbnRyb2xsZXIucmVwb3J0cyxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGdyb3VwOiBjb250cm9sbGVyLnJlcG9ydEdyb3VwXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gZmlsdGVyZWQ7XG5cblx0XHRcdH1cblx0XHRcdHJldHVybiBjb250cm9sbGVyLnJlcG9ydHM7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZ2V0UmVwb3J0R3JvdXBzID0gZnVuY3Rpb24gZ2V0UmVwb3J0R3JvdXBzKClcblx0XHR7XG5cdFx0XHR2YXIgZ3JvdXBzID0gW1xuXHRcdFx0e1xuXHRcdFx0XHR2YWx1ZTogJycsXG5cdFx0XHRcdGxhYmVsOiAnQWxsIEdyb3Vwcydcblx0XHRcdH1dO1xuXHRcdFx0dmFyIGdyb3VwTWFwID0ge307XG5cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY29udHJvbGxlci5yZXBvcnRzLmxlbmd0aDsgaSsrKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoY29udHJvbGxlci5yZXBvcnRzW2ldLmdyb3VwICE9IG51bGwpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRncm91cE1hcFtjb250cm9sbGVyLnJlcG9ydHNbaV0uZ3JvdXBdID0gY29udHJvbGxlci5yZXBvcnRzW2ldLmdyb3VwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZvciAodmFyIGtleSBpbiBncm91cE1hcClcblx0XHRcdHtcblx0XHRcdFx0Z3JvdXBzLnB1c2goXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR2YWx1ZToga2V5LFxuXHRcdFx0XHRcdGxhYmVsOiBrZXlcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBncm91cHM7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2VsZWN0UmVwb3J0ID0gZnVuY3Rpb24gc2VsZWN0UmVwb3J0KHJlcG9ydClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLmN1cnJlbnRSZXBvcnQgPSByZXBvcnQ7XG5cblx0XHRcdGlmIChyZXBvcnQuZGlyZWN0ID09PSB0cnVlKVxuXHRcdFx0e1xuXHRcdFx0XHR3aW5kb3cub3BlbihyZXBvcnQud2luZG93LnVybCwgcmVwb3J0Lm5hbWUsICd3aWR0aD0nICsgcmVwb3J0LndpbmRvdy53aWR0aCArICcmaGVpZ2h0PScgKyByZXBvcnQud2luZG93LmhlaWdodCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdFJlcG9ydE5hdmlnYXRpb24ubG9hZChyZXBvcnQudGVtcGxhdGVVcmwpO1xuXHRcdFx0fVxuXHRcdH07XG5cblxuXHRcdC8vIGNvbnRyb2xsZXIuc2VsZWN0UmVwb3J0KGNvbnRyb2xsZXIucmVwb3J0c1swXSk7XG5cblx0XHQvLyBjb250cm9sbGVyLm9wZW5SZXBvcnRXaW5kb3cgPSBmdW5jdGlvbiBvcGVuUmVwb3J0V2luZG93KHVybCwgbmFtZSlcblx0XHQvLyB7XG5cdFx0Ly8gXHR3aW5kb3cub3Blbih1cmwsIG5hbWUsICdoZWlnaHQ9OTAwLHdpZHRoPTcwMCcpO1xuXHRcdC8vIH07XG5cdH1cbl0pOyIsImFuZ3VsYXIubW9kdWxlKCdTY2hlZHVsZScpLmNvbnRyb2xsZXIoJ1NjaGVkdWxlLkFwcG9pbnRtZW50QWRkQ29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRmaWx0ZXInLFxuXHQnJHVpYk1vZGFsSW5zdGFuY2UnLFxuXHQnJHRpbWVvdXQnLFxuXHQnZGVtb2dyYXBoaWNTZXJ2aWNlJyxcblx0J2RlbW9ncmFwaGljc1NlcnZpY2UnLFxuXHQnbWUnLFxuXHQncHJvdmlkZXJTZXJ2aWNlJyxcblx0J3NjaGVkdWxlU2VydmljZScsXG5cdCdhcHB0RGF0ZScsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCRmaWx0ZXIsXG5cdFx0JHVpYk1vZGFsSW5zdGFuY2UsXG5cdFx0JHRpbWVvdXQsXG5cdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLFxuXHRcdGRlbW9ncmFwaGljc1NlcnZpY2UsXG5cdFx0bWUsXG5cdFx0cHJvdmlkZXJTZXJ2aWNlLFxuXHRcdHNjaGVkdWxlU2VydmljZSxcblx0XHRhcHB0RGF0ZSlcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29udHJvbGxlci50eXBlcyA9IFtdO1xuXG5cdFx0Y29udHJvbGxlci51cmdlbmNpZXMgPSBbXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICcnLFxuXHRcdFx0bGFiZWw6ICdOb3JtYWwnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJ2NyaXRpY2FsJyxcblx0XHRcdGxhYmVsOiAnQ3JpdGljYWwnXG5cdFx0fV07XG5cblx0XHRjb250cm9sbGVyLm1lID0gbWU7XG5cblx0XHRjb250cm9sbGVyLmFwcG9pbnRtZW50ID0ge1xuXHRcdFx0c3RhdHVzOiAndCcsXG5cdFx0XHRhcHBvaW50bWVudERhdGU6ICRmaWx0ZXIoJ2RhdGUnKShhcHB0RGF0ZSwgJ3l5eXktTU0tZGQnKSxcblx0XHRcdHN0YXJ0VGltZTogJzA5OjAwIEFNJyxcblx0XHRcdHR5cGU6ICcnLFxuXHRcdFx0ZHVyYXRpb246IDE1LFxuXHRcdFx0cHJvdmlkZXJOYW1lOiBtZS5mb3JtYXR0ZWROYW1lLFxuXHRcdFx0cHJvdmlkZXJObzogbWUucHJvdmlkZXJObyxcblx0XHRcdHJlYXNvbjogJycsXG5cdFx0XHRub3RlczogJycsXG5cdFx0XHRsb2NhdGlvbjogJycsXG5cdFx0XHRyZXNvdXJjZXM6ICcnLFxuXHRcdFx0Y3JpdGljYWw6ICcnXG5cdFx0fTtcblxuXHRcdHNjaGVkdWxlU2VydmljZS5nZXRUeXBlcygpLnRoZW4oXG5cdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIudHlwZXMgPSByZXN1bHRzLnR5cGVzO1xuXHRcdFx0XHRjb250cm9sbGVyLnR5cGVzLnVuc2hpZnQoXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiAnJyxcblx0XHRcdFx0XHRkdXJhdGlvbjogMTUsXG5cdFx0XHRcdFx0bG9jYXRpb246ICcnLFxuXHRcdFx0XHRcdG5vdGVzOiAnJyxcblx0XHRcdFx0XHRyZWFzb246ICcnLFxuXHRcdFx0XHRcdHJlc291cmNlczogJydcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlc3VsdHMpKTtcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHR9KTtcblxuXHRcdGNvbnRyb2xsZXIuc2VsZWN0VHlwZSA9IGZ1bmN0aW9uIHNlbGVjdFR5cGUoKVxuXHRcdHtcblx0XHRcdHZhciB0eXBlID0gbnVsbDtcblxuXHRcdFx0Zm9yICh2YXIgeCA9IDA7IHggPCBjb250cm9sbGVyLnR5cGVzLmxlbmd0aDsgeCsrKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoY29udHJvbGxlci50eXBlc1t4XS5uYW1lID09IGNvbnRyb2xsZXIuYXBwb2ludG1lbnQudHlwZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGUgPSBjb250cm9sbGVyLnR5cGVzW3hdO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZSAhPSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLmFwcG9pbnRtZW50LmR1cmF0aW9uID0gdHlwZS5kdXJhdGlvbjtcblx0XHRcdFx0Y29udHJvbGxlci5hcHBvaW50bWVudC5sb2NhdGlvbiA9IHR5cGUubG9jYXRpb247XG5cdFx0XHRcdGNvbnRyb2xsZXIuYXBwb2ludG1lbnQubm90ZXMgPSB0eXBlLm5vdGVzO1xuXHRcdFx0XHRjb250cm9sbGVyLmFwcG9pbnRtZW50LnJlYXNvbiA9IHR5cGUucmVhc29uO1xuXHRcdFx0XHRjb250cm9sbGVyLmFwcG9pbnRtZW50LnJlc291cmNlcyA9IHR5cGUucmVzb3VyY2VzO1xuXG5cdFx0XHR9XG5cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKClcblx0XHR7XG5cdFx0XHRpZiAoY29udHJvbGxlci5uZWVkc1VwZGF0ZSlcblx0XHRcdHtcblx0XHRcdFx0aWYgKGNvbmZpcm0oXCJZb3UgaGF2ZSB1bnNhdmVkIGNoYW5nZXMsIGFyZSB5b3Ugc3VyZT9cIikpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZShmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoZmFsc2UpO1xuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZSgpXG5cdFx0e1xuXHRcdFx0dmFyIHQgPSBjb250cm9sbGVyLmFwcG9pbnRtZW50O1xuXG5cdFx0XHRjb250cm9sbGVyLmVycm9ycyA9IFtdO1xuXG5cdFx0XHRpZiAodC5kZW1vZ3JhcGhpYyA9PSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLmVycm9ycy5wdXNoKCdZb3UgbXVzdCBzZWxlY3QgYSBwYXRpZW50Jyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodC5wcm92aWRlck5vID09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIuZXJyb3JzLnB1c2goJ1lvdSBtdXN0IHNlbGVjdCBhIHByb3ZpZGVyJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodC5zdGFydFRpbWUgPT0gbnVsbCB8fCB0LnN0YXJ0VGltZS5sZW5ndGggPT0gMClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5lcnJvcnMucHVzaCgnc3RhcnQgdGltZSBpcyByZXF1aXJlZCcpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHQuZHVyYXRpb24gPT0gbnVsbCB8fCB0LmR1cmF0aW9uLmxlbmd0aCA9PSAwKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLmVycm9ycy5wdXNoKCdzdGFydCB0aW1lIGlzIHJlcXVpcmVkJyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjb250cm9sbGVyLmVycm9ycy5sZW5ndGggPiAwKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zYXZlID0gZnVuY3Rpb24gc2F2ZSgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5zaG93RXJyb3JzID0gdHJ1ZTtcblx0XHRcdGlmICghY29udHJvbGxlci52YWxpZGF0ZSgpKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHZhciB4ID0ge307XG5cdFx0XHR4LnN0YXR1cyA9IGNvbnRyb2xsZXIuYXBwb2ludG1lbnQuc3RhdHVzO1xuXHRcdFx0eC5hcHBvaW50bWVudERhdGUgPSBjb250cm9sbGVyLmFwcG9pbnRtZW50LmFwcG9pbnRtZW50RGF0ZTtcblx0XHRcdHguc3RhcnRUaW1lMTJoV2l0aE1lZGlhbiA9IGNvbnRyb2xsZXIuYXBwb2ludG1lbnQuc3RhcnRUaW1lO1xuXHRcdFx0eC50eXBlID0gY29udHJvbGxlci5hcHBvaW50bWVudC50eXBlO1xuXHRcdFx0eC5kdXJhdGlvbiA9IGNvbnRyb2xsZXIuYXBwb2ludG1lbnQuZHVyYXRpb247XG5cdFx0XHR4LnByb3ZpZGVyTm8gPSBjb250cm9sbGVyLmFwcG9pbnRtZW50LnByb3ZpZGVyTm87XG5cdFx0XHR4LnJlYXNvbiA9IGNvbnRyb2xsZXIuYXBwb2ludG1lbnQucmVhc29uO1xuXHRcdFx0eC5ub3RlcyA9IGNvbnRyb2xsZXIuYXBwb2ludG1lbnQubm90ZXM7XG5cdFx0XHR4LmxvY2F0aW9uID0gY29udHJvbGxlci5hcHBvaW50bWVudC5sb2NhdGlvbjtcblx0XHRcdHgucmVzb3VyY2VzID0gY29udHJvbGxlci5hcHBvaW50bWVudC5yZXNvdXJjZXM7XG5cdFx0XHR4LnVyZ2VuY3kgPSBjb250cm9sbGVyLmFwcG9pbnRtZW50LmNyaXRpY2FsO1xuXHRcdFx0eC5kZW1vZ3JhcGhpY05vID0gY29udHJvbGxlci5hcHBvaW50bWVudC5kZW1vZ3JhcGhpY05vO1xuXG5cdFx0XHQvLyBUT0RPOiBtYWtlIHN1cmUgdGhpcyB3b3JrcyB3aXRoIHRoZSB1cGRhdGVkIGJhY2tlbmQgc2VydmljZSAocmVzcG9uc2UgY2hhbmdlZClcblx0XHRcdGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHgpKTtcblx0XHRcdHNjaGVkdWxlU2VydmljZS5hZGRBcHBvaW50bWVudCh4KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSh0cnVlKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cblxuXHRcdH07XG5cblxuXHRcdGNvbnRyb2xsZXIudXBkYXRlRGVtb2dyYXBoaWNObyA9IGZ1bmN0aW9uIHVwZGF0ZURlbW9ncmFwaGljTm8oaXRlbSwgbW9kZWwsIGxhYmVsKVxuXHRcdHtcblxuXHRcdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLmdldERlbW9ncmFwaGljKG1vZGVsKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmFwcG9pbnRtZW50LmRlbW9ncmFwaGljTm8gPSByZXN1bHRzLmRlbW9ncmFwaGljTm87XG5cdFx0XHRcdFx0Y29udHJvbGxlci5hcHBvaW50bWVudC5kZW1vZ3JhcGhpY05hbWUgPSAnJztcblx0XHRcdFx0XHRjb250cm9sbGVyLmFwcG9pbnRtZW50LmRlbW9ncmFwaGljID0gcmVzdWx0cztcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNlYXJjaFBhdGllbnRzID0gZnVuY3Rpb24gc2VhcmNoUGF0aWVudHModGVybSlcblx0XHR7XG5cdFx0XHR2YXIgc2VhcmNoID0ge1xuXHRcdFx0XHR0eXBlOiAnTmFtZScsXG5cdFx0XHRcdCd0ZXJtJzogdGVybSxcblx0XHRcdFx0YWN0aXZlOiB0cnVlLFxuXHRcdFx0XHRpbnRlZ3JhdG9yOiBmYWxzZSxcblx0XHRcdFx0b3V0b2Zkb21haW46IHRydWVcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gZGVtb2dyYXBoaWNzU2VydmljZS5zZWFyY2goc2VhcmNoLCAwLCAyNSkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24ocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciByZXNwID0gW107XG5cdFx0XHRcdFx0Zm9yICh2YXIgeCA9IDA7IHggPCByZXN1bHRzLmNvbnRlbnQubGVuZ3RoOyB4KyspXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmVzcC5wdXNoKFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRkZW1vZ3JhcGhpY05vOiByZXN1bHRzLmNvbnRlbnRbeF0uZGVtb2dyYXBoaWNObyxcblx0XHRcdFx0XHRcdFx0bmFtZTogcmVzdWx0cy5jb250ZW50W3hdLmxhc3ROYW1lICsgJywnICsgcmVzdWx0cy5jb250ZW50W3hdLmZpcnN0TmFtZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXNwO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zZWFyY2hQcm92aWRlcnMgPSBmdW5jdGlvbiBzZWFyY2hQcm92aWRlcnModmFsKVxuXHRcdHtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdHNlYXJjaFRlcm06IHZhbCxcblx0XHRcdFx0YWN0aXZlOiB0cnVlXG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5zZWFyY2hQcm92aWRlcnMoc2VhcmNoLCAwLCAxMCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIHJlc3AgPSBbXTtcblx0XHRcdFx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IHJlc3VsdHMubGVuZ3RoOyB4KyspXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmVzcC5wdXNoKFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRwcm92aWRlck5vOiByZXN1bHRzW3hdLnByb3ZpZGVyTm8sXG5cdFx0XHRcdFx0XHRcdG5hbWU6IHJlc3VsdHNbeF0uZmlyc3ROYW1lICsgJyAnICsgcmVzdWx0c1t4XS5sYXN0TmFtZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXNwO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHR9KTtcblx0XHR9O1xuXG5cblx0XHRjb250cm9sbGVyLnVwZGF0ZVByb3ZpZGVyTm8gPSBmdW5jdGlvbiB1cGRhdGVQcm92aWRlck5vKGl0ZW0sIG1vZGVsLCBsYWJlbClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLmFwcG9pbnRtZW50LnByb3ZpZGVyTm8gPSBtb2RlbDtcblx0XHRcdGNvbnRyb2xsZXIuYXBwb2ludG1lbnQucHJvdmlkZXJOYW1lID0gbGFiZWw7XG5cdFx0fTtcblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ1NjaGVkdWxlJykuY29udHJvbGxlcignU2NoZWR1bGUuQXBwb2ludG1lbnRWaWV3Q29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRmaWx0ZXInLFxuXHQnJHVpYk1vZGFsSW5zdGFuY2UnLFxuXHQnJHRpbWVvdXQnLFxuXHQnZGVtb2dyYXBoaWNTZXJ2aWNlJyxcblx0J21lJyxcblx0J3Byb3ZpZGVyU2VydmljZScsXG5cdCdzY2hlZHVsZVNlcnZpY2UnLFxuXHQnYXBwb2ludG1lbnQnLFxuXHQnc3RhdHVzTGlzdCcsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCRmaWx0ZXIsXG5cdFx0JHVpYk1vZGFsSW5zdGFuY2UsXG5cdFx0JHRpbWVvdXQsXG5cdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLFxuXHRcdG1lLFxuXHRcdHByb3ZpZGVyU2VydmljZSxcblx0XHRzY2hlZHVsZVNlcnZpY2UsXG5cdFx0YXBwb2ludG1lbnQsXG5cdFx0c3RhdHVzTGlzdClcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29udHJvbGxlci5tZSA9IG1lO1xuXHRcdGNvbnRyb2xsZXIuYXBwb2ludG1lbnQgPSBhcHBvaW50bWVudDtcblx0XHRjb250cm9sbGVyLnN0YXR1c0xpc3QgPSBzdGF0dXNMaXN0LmNvbnRlbnQ7XG5cdFx0Y29udHJvbGxlci5hcHBvaW50bWVudFVwZGF0ZSA9IHt9O1xuXG5cdFx0Y29udHJvbGxlci5hcHBvaW50bWVudFdyaXRlQWNjZXNzID0gZmFsc2U7XG5cblx0XHRjb250cm9sbGVyLmdldFN0YXR1cyA9IGZ1bmN0aW9uIGdldFN0YXR1cyhzdGF0dXMpXG5cdFx0e1xuXG5cdFx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IGNvbnRyb2xsZXIuc3RhdHVzTGlzdC5sZW5ndGg7IHgrKylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoY29udHJvbGxlci5zdGF0dXNMaXN0W3hdKSk7XG5cdFx0XHRcdGlmIChjb250cm9sbGVyLnN0YXR1c0xpc3RbeF0uc3RhdHVzID09IHN0YXR1cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiBjb250cm9sbGVyLnN0YXR1c0xpc3RbeF0uZGVzY3JpcHRpb247XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBzdGF0dXM7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2xvc2UgPSBmdW5jdGlvbiBjbG9zZSgpXG5cdFx0e1xuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoZmFsc2UpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmRlbGV0ZUFwcG9pbnRtZW50ID0gZnVuY3Rpb24gZGVsZXRlQXBwb2ludG1lbnQoKVxuXHRcdHtcblx0XHRcdGlmIChjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgYXBwb2ludG1lbnQ/JykpXG5cdFx0XHR7XG5cdFx0XHRcdHNjaGVkdWxlU2VydmljZS5kZWxldGVBcHBvaW50bWVudChjb250cm9sbGVyLmFwcG9pbnRtZW50LmlkKS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSh0cnVlKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNlYXJjaFByb3ZpZGVycyA9IGZ1bmN0aW9uIHNlYXJjaFByb3ZpZGVycyh2YWwpXG5cdFx0e1xuXHRcdFx0dmFyIHNlYXJjaCA9IHtcblx0XHRcdFx0c2VhcmNoVGVybTogdmFsLFxuXHRcdFx0XHRhY3RpdmU6IHRydWVcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gcHJvdmlkZXJTZXJ2aWNlLnNlYXJjaFByb3ZpZGVycyhzZWFyY2gsIDAsIDEwKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR2YXIgcmVzcCA9IFtdO1xuXHRcdFx0XHRcdGZvciAodmFyIHggPSAwOyB4IDwgcmVzdWx0cy5sZW5ndGg7IHgrKylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXNwLnB1c2goXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHByb3ZpZGVyTm86IHJlc3VsdHNbeF0ucHJvdmlkZXJObyxcblx0XHRcdFx0XHRcdFx0bmFtZTogcmVzdWx0c1t4XS5maXJzdE5hbWUgKyAnICcgKyByZXN1bHRzW3hdLmxhc3ROYW1lXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3A7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblxuXHRcdGNvbnRyb2xsZXIudXBkYXRlUHJvdmlkZXJObyA9IGZ1bmN0aW9uIHVwZGF0ZVByb3ZpZGVyTm8oaXRlbSwgbW9kZWwsIGxhYmVsKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIuYXBwb2ludG1lbnQucHJvdmlkZXJObyA9IG1vZGVsO1xuXHRcdFx0Y29udHJvbGxlci5hcHBvaW50bWVudC5wcm92aWRlck5hbWUgPSBsYWJlbDtcblx0XHR9O1xuXG5cblx0XHRjb250cm9sbGVyLmVkaXRQcm92aWRlciA9IGZ1bmN0aW9uIGVkaXRQcm92aWRlcigpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5zaG93UHJvdmlkZXJGb3JtQ29udHJvbCA9IHRydWU7XG5cdFx0XHRjb250cm9sbGVyLmFwcG9pbnRtZW50VXBkYXRlLnByb3ZpZGVyTm8gPSBjb250cm9sbGVyLmFwcG9pbnRtZW50LnByb3ZpZGVyTm87XG5cdFx0XHRjb250cm9sbGVyLmFwcG9pbnRtZW50VXBkYXRlLnByb3ZpZGVyTmFtZSA9IGNvbnRyb2xsZXIuYXBwb2ludG1lbnQucHJvdmlkZXIubGFzdE5hbWUgKyBcIixcIiArIGNvbnRyb2xsZXIuYXBwb2ludG1lbnQucHJvdmlkZXIubGFzdE5hbWU7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIudXBkYXRlUHJvdmlkZXIgPSBmdW5jdGlvbiB1cGRhdGVQcm92aWRlcihpdGVtLCBtb2RlbCwgbGFiZWwpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHRjb250cm9sbGVyLmFwcG9pbnRtZW50LnByb3ZpZGVyTm8gPSBtb2RlbDtcblx0XHRcdGNvbnRyb2xsZXIuYXBwb2ludG1lbnQucHJvdmlkZXJOYW1lID0gbGFiZWw7XG5cdFx0XHRjb250cm9sbGVyLnNob3dQcm92aWRlckZvcm1Db250cm9sID0gZmFsc2U7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2FuY2VsUHJvdmlkZXJVcGRhdGUgPSBmdW5jdGlvbiBjYW5jZWxQcm92aWRlclVwZGF0ZSgpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5hcHBvaW50bWVudFVwZGF0ZS5wcm92aWRlck5vID0gbnVsbDtcblx0XHRcdGNvbnRyb2xsZXIuYXBwb2ludG1lbnRVcGRhdGUucHJvdmlkZXJOYW1lID0gbnVsbDtcblxuXHRcdFx0Y29udHJvbGxlci5zaG93UHJvdmlkZXJGb3JtQ29udHJvbCA9IGZhbHNlO1xuXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2hvd0FwcG9pbnRtZW50SGlzdG9yeSA9IGZ1bmN0aW9uIHNob3dBcHBvaW50bWVudEhpc3RvcnkoKVxuXHRcdHtcblx0XHRcdHNjaGVkdWxlU2VydmljZS5hcHBvaW50bWVudEhpc3RvcnkoY29udHJvbGxlci5hcHBvaW50bWVudC5kZW1vZ3JhcGhpY05vKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhbGVydChKU09OLnN0cmluZ2lmeShyZXN1bHRzKSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLm5vU2hvd0FwcG9pbnRtZW50ID0gZnVuY3Rpb24gbm9TaG93QXBwb2ludG1lbnQoKVxuXHRcdHtcblx0XHRcdHNjaGVkdWxlU2VydmljZS5ub1Nob3dBcHBvaW50bWVudChjb250cm9sbGVyLmFwcG9pbnRtZW50LmlkKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSh0cnVlKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jYW5jZWxBcHBvaW50bWVudCA9IGZ1bmN0aW9uIGNhbmNlbEFwcG9pbnRtZW50KClcblx0XHR7XG5cdFx0XHRzY2hlZHVsZVNlcnZpY2UuY2FuY2VsQXBwb2ludG1lbnQoY29udHJvbGxlci5hcHBvaW50bWVudC5pZCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UodHJ1ZSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9ycyk7XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0fVxuXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5cbi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ2FsZW5kYXIgRXZlbnQgQ29udHJvbGxlclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09L1xuXG5hbmd1bGFyLm1vZHVsZSgnU2NoZWR1bGUnKS5jb250cm9sbGVyKCdTY2hlZHVsZS5FdmVudENvbnRyb2xsZXInLCBbXG5cblx0XHQnJHNjb3BlJyxcblx0XHQnJHEnLFxuXHRcdCckdGltZW91dCcsXG5cdFx0JyRzdGF0ZScsXG5cdFx0JyR1aWJNb2RhbCcsXG5cdFx0JyR1aWJNb2RhbEluc3RhbmNlJyxcblxuXHRcdCdlcnJvcnNTZXJ2aWNlJyxcblxuXHRcdCdkZW1vZ3JhcGhpY1NlcnZpY2UnLFxuXHRcdCdzZWN1cml0eVNlcnZpY2UnLFxuXHRcdCdrZXlCaW5kaW5nJyxcblx0XHQnZm9jdXMnLFxuXHRcdCd0eXBlJywgJ3BhcmVudFNjb3BlJywgJ2xhYmVsJywgJ2VkaXRNb2RlJywgJ2RhdGEnLFxuXG5cdGZ1bmN0aW9uIChcblx0XHQkc2NvcGUsICRxLCAkdGltZW91dCwgJHN0YXRlLCAkdWliTW9kYWwsICR1aWJNb2RhbEluc3RhbmNlLFxuXG5cdFx0bWVzc2FnZXNGYWN0b3J5LFxuXG5cdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLFxuXHRcdHNlY3VyaXR5U2VydmljZSxcblx0XHRrZXlCaW5kaW5nLFxuXHRcdGZvY3VzLFxuXHRcdHR5cGUsIHBhcmVudFNjb3BlLCBsYWJlbCwgZWRpdE1vZGUsIGRhdGFcblx0KVxue1xuXHQkc2NvcGUucGFyZW50U2NvcGUgPSBwYXJlbnRTY29wZTtcblxuXG5cdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQvLyBBY2Nlc3MgQ29udHJvbFxuXHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vXG5cblxuXHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0Ly8gTG9jYWwgc2NvcGUgdmFyaWFibGVzXG5cdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS9cblxuXHQkc2NvcGUubGFiZWwgPSBsYWJlbDtcblx0JHNjb3BlLmVkaXRNb2RlID0gZWRpdE1vZGU7XG5cblx0JHNjb3BlLmtleUJpbmRpbmcgPSBrZXlCaW5kaW5nO1xuXHQkc2NvcGUuZXZlbnRVdWlkID0gbnVsbDtcblxuXHQkc2NvcGUuc2NoZWR1bGUgPSBkYXRhLnNjaGVkdWxlO1xuXG5cdCRzY29wZS5ldmVudERhdGEgPSB7XG5cdFx0c3RhcnREYXRlOiBudWxsLFxuXHRcdHN0YXJ0VGltZTogbnVsbCxcblx0XHRlbmREYXRlOiBudWxsLFxuXHRcdGVuZFRpbWU6IG51bGwsXG5cdFx0cmVhc29uOiBudWxsLFxuXHRcdG5vdGVzOiBudWxsXG5cdH07XG5cblx0JHNjb3BlLnRpbWVJbnRlcnZhbCA9IGRhdGEudGltZUludGVydmFsO1xuXG5cdCRzY29wZS5sYXN0RXZlbnRMZW5ndGggPSBudWxsO1xuXG5cdCRzY29wZS5wYXRpZW50VHlwZWFoZWFkID0ge307XG5cdCRzY29wZS5hdXRvY29tcGxldGVWYWx1ZXMgPSB7fTtcblxuXHQkc2NvcGUuYWN0aXZlVGVtcGxhdGVFdmVudHMgPSBbXTtcblxuXHQkc2NvcGUuZXZlbnRTdGF0dXNlcyA9ICRzY29wZS5wYXJlbnRTY29wZS5ldmVudFN0YXR1c2VzO1xuXHQkc2NvcGUuZXZlbnRTdGF0dXNPcHRpb25zID0gW107XG5cdCRzY29wZS5zZWxlY3RlZEV2ZW50U3RhdHVzID0gbnVsbDtcblx0JHNjb3BlLmRlZmF1bHRFdmVudFN0YXR1cyA9IG51bGw7XG5cblx0JHNjb3BlLnNlbGVjdGVkU2l0ZU5hbWUgPSBudWxsO1xuXG5cdCRzY29wZS50aW1lcGlja2VyRm9ybWF0ID0gXCJoOm1tIEFcIjtcblxuXHQkc2NvcGUuZmllbGRWYWx1ZU1hcHBpbmcgPSB7XG5cdFx0c3RhcnREYXRlOiAnU3RhcnQgRGF0ZScsXG5cdFx0c3RhcnRUaW1lOiAnU3RhcnQgVGltZScsXG5cdFx0ZW5kRGF0ZTogJ0VuZCBEYXRlJyxcblx0XHRlbmRUaW1lOiAnRW5kIFRpbWUnXG5cdH07XG5cdCRzY29wZS5kaXNwbGF5TWVzc2FnZXMgPSBtZXNzYWdlc0ZhY3RvcnkuZmFjdG9yeSgpO1xuXG5cdCRzY29wZS5pbml0aWFsaXplZCA9IGZhbHNlO1xuXHQkc2NvcGUud29ya2luZyA9IGZhbHNlO1xuXG5cdCRzY29wZS5kZW1vZ3JhcGhpY01vZGVsID0ge1xuXHRcdGRlbW9ncmFwaGljTm86IG51bGwsXG5cdFx0ZnVsbE5hbWU6IG51bGwsXG5cdFx0aGFzUGhvdG86IHRydWUsXG5cdFx0cGF0aWVudFBob3RvVXJsOiAnL2ltYWdlUmVuZGVyaW5nU2VydmxldD9zb3VyY2U9bG9jYWxfY2xpZW50JmNsaWVudElkPTAnLFxuXHRcdGRhdGE6IHtcblx0XHRcdGJpcnRoRGF0ZTogbnVsbCxcblx0XHRcdGhlYWx0aE51bWJlcjogbnVsbCxcblx0XHRcdG9udGFyaW9WZXJzaW9uQ29kZTogbnVsbCxcblx0XHRcdHBob25lTnVtYmVyUHJpbWFyeTogbnVsbFxuXHRcdH0sXG5cdFx0Y2xlYXI6IGZ1bmN0aW9uIGNsZWFyKClcblx0XHR7XG5cdFx0XHR0aGlzLmRlbW9ncmFwaGljTm8gPSBudWxsO1xuXHRcdFx0dGhpcy5mdWxsTmFtZSA9IG51bGw7XG5cdFx0XHR0aGlzLnBhdGllbnRQaG90b1VybCA9ICcvaW1hZ2VSZW5kZXJpbmdTZXJ2bGV0P3NvdXJjZT1sb2NhbF9jbGllbnQmY2xpZW50SWQ9MCc7XG5cdFx0XHR0aGlzLmRhdGEuYmlydGhEYXRlID0gbnVsbDtcblx0XHRcdHRoaXMuZGF0YS5oZWFsdGhOdW1iZXIgPSBudWxsO1xuXHRcdFx0dGhpcy5kYXRhLm9udGFyaW9WZXJzaW9uQ29kZSA9IG51bGw7XG5cdFx0XHR0aGlzLmRhdGEucGhvbmVOdW1iZXJQcmltYXJ5ID0gbnVsbDtcblx0XHR9LFxuXHRcdGZpbGxEYXRhOiBmdW5jdGlvbiBmaWxsRGF0YShkYXRhKVxuXHRcdHtcblx0XHRcdHRoaXMuZGVtb2dyYXBoaWNObyA9IGRhdGEuZGVtb2dyYXBoaWNObztcblx0XHRcdHRoaXMuZnVsbE5hbWUgPSBKdW5vLkNvbW1vbi5VdGlsLmZvcm1hdE5hbWUoZGF0YS5maXJzdE5hbWUsIGRhdGEubGFzdE5hbWUpO1xuXHRcdFx0dGhpcy5wYXRpZW50UGhvdG9VcmwgPSAnL2ltYWdlUmVuZGVyaW5nU2VydmxldD9zb3VyY2U9bG9jYWxfY2xpZW50JmNsaWVudElkPScgKyAoZGF0YS5kZW1vZ3JhcGhpY05vPyBkYXRhLmRlbW9ncmFwaGljTm86IDApO1xuXG5cdFx0XHR2YXIgZGF0ZU9mQmlydGggPSBudWxsO1xuXHRcdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoZGF0YS5kb2IpKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBYWFg6IFBlcmhhcHMgcHV0IHRoaXMgaW4gdXRpbD8gIElzIHRoaXMgZGF0ZSBmb3JtYXQgY29tbW9uIGZvciBqdW5vP1xuXHRcdFx0XHRkYXRlT2ZCaXJ0aCA9IG1vbWVudChkYXRhLmRvYiwgXCJZWVlZLU1NLUREVEhIOm1tOnNzLlNTUytaWlpaXCIsIGZhbHNlKTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0ZGF0ZU9mQmlydGggPSBKdW5vLkNvbW1vbi5VdGlsLmdldERhdGVNb21lbnRGcm9tQ29tcG9uZW50cyhcblx0XHRcdFx0XHRkYXRhLmRvYlllYXIsIGRhdGEuZG9iTW9udGgsIGRhdGEuZG9iRGF5KTtcblx0XHRcdH1cblx0XHRcdHRoaXMuZGF0YS5iaXJ0aERhdGUgPSBKdW5vLkNvbW1vbi5VdGlsLmZvcm1hdE1vbWVudERhdGUoZGF0ZU9mQmlydGgpO1xuXG5cblx0XHRcdHRoaXMuZGF0YS5oZWFsdGhOdW1iZXIgPSBkYXRhLmhpbjtcblx0XHRcdC8vIFhYWDogbm8gdmVyc2lvbiBjb2RlIHdoZW4gbG9hZGVkIGZyb20gYXV0b2NvbXBsZXRlPyAgRG9lcyB0aGF0IG1hdHRlcj9cblx0XHRcdHRoaXMuZGF0YS5vbnRhcmlvVmVyc2lvbkNvZGUgPSBkYXRhLnZlcjtcblx0XHRcdHRoaXMuZGF0YS5waG9uZU51bWJlclByaW1hcnkgPSBkYXRhLnBob25lO1xuXHRcdH0sXG5cdFx0dXBsb2FkUGhvdG86IGZ1bmN0aW9uIHVwbG9hZFBob3RvKGZpbGUpe31cblx0fTtcblxuXHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0Ly8gSW5pdFxuXHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vXG5cblx0JHNjb3BlLmluaXQgPSBmdW5jdGlvbiBpbml0KClcblx0e1xuXHRcdGlmICghc2VjdXJpdHlTZXJ2aWNlLmhhc1Blcm1pc3Npb24oJ3NjaGVkdWxpbmdfY3JlYXRlJykpXG5cdFx0e1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24gKClcblx0XHRcdHtcblx0XHRcdFx0JHNjb3BlLmNhbmNlbCgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0JHNjb3BlLmRlbW9ncmFwaGljTW9kZWwuY2xlYXIoKTtcblxuXHRcdHZhciBtb21lbnRTdGFydCA9IGRhdGEuc3RhcnRUaW1lO1xuXHRcdHZhciBtb21lbnRFbmQgPSBkYXRhLmVuZFRpbWU7XG5cblx0XHQkc2NvcGUuZXZlbnREYXRhLnN0YXJ0VGltZSA9IEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0TW9tZW50VGltZShtb21lbnRTdGFydCwgJHNjb3BlLnRpbWVwaWNrZXJGb3JtYXQpO1xuXHRcdCRzY29wZS5ldmVudERhdGEuZW5kVGltZSA9IEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0TW9tZW50VGltZShtb21lbnRFbmQsICRzY29wZS50aW1lcGlja2VyRm9ybWF0KTtcblx0XHQkc2NvcGUuZXZlbnREYXRhLnN0YXJ0RGF0ZSA9IEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0TW9tZW50RGF0ZShtb21lbnRTdGFydCk7XG5cdFx0JHNjb3BlLmV2ZW50RGF0YS5lbmREYXRlID0gSnVuby5Db21tb24uVXRpbC5mb3JtYXRNb21lbnREYXRlKG1vbWVudEVuZCk7XG5cblx0XHQkc2NvcGUubGFzdEV2ZW50TGVuZ3RoID0gbW9tZW50RW5kLmRpZmYobW9tZW50U3RhcnQsICdtaW51dGVzJyk7XG5cblx0XHQvLyBtYWludGFpbiBhIGxpc3Qgb2YgdGhlICdhY3RpdmUnIHRlbXBsYXRlcyBiYXNlZCBvbiBzdGFydCB0aW1lXG5cdFx0JHNjb3BlLnNldEFjdGl2ZVRlbXBsYXRlRXZlbnRzKCk7XG5cblx0XHQvLyRzY29wZS5ldmVudFN0YXR1c09wdGlvbnMucHVzaChcIlwiKTtcblx0XHRmb3IodmFyIGtleSBpbiAkc2NvcGUuZXZlbnRTdGF0dXNlcylcblx0XHR7XG5cdFx0XHRpZigkc2NvcGUuZXZlbnRTdGF0dXNlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuXHRcdFx0e1xuXHRcdFx0XHQkc2NvcGUuZXZlbnRTdGF0dXNPcHRpb25zLnB1c2goJHNjb3BlLmV2ZW50U3RhdHVzZXNba2V5XSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdCRzY29wZS5kZWZhdWx0RXZlbnRTdGF0dXMgPSBkYXRhLmRlZmF1bHRFdmVudFN0YXR1cztcblx0XHQkc2NvcGUuc2V0U2VsZWN0ZWRFdmVudFN0YXR1cyhkYXRhLmV2ZW50RGF0YS5ldmVudFN0YXR1c0NvZGUpO1xuXG5cblx0XHRpZihlZGl0TW9kZSlcblx0XHR7XG5cdFx0XHQkc2NvcGUuZXZlbnRVdWlkID0gZGF0YS5ldmVudERhdGEuYXBwb2ludG1lbnRObztcblx0XHRcdCRzY29wZS5ldmVudERhdGEucmVhc29uID0gZGF0YS5ldmVudERhdGEucmVhc29uO1xuXHRcdFx0JHNjb3BlLmV2ZW50RGF0YS5ub3RlcyA9IGRhdGEuZXZlbnREYXRhLm5vdGVzO1xuXG5cdFx0XHQvLyBlaXRoZXIgbG9hZCB0aGUgcGF0aWVudCBkYXRhIGFuZCBpbml0IHRoZSBhdXRvY29tcGxldGVcblx0XHRcdC8vIG9yIGVuc3VyZSB0aGUgcGF0aWVudCBtb2RlbCBpcyBjbGVhclxuXHRcdFx0JHNjb3BlLmluaXRQYXRpZW50QXV0b2NvbXBsZXRlKGRhdGEuZXZlbnREYXRhLmRlbW9ncmFwaGljTm8pLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRzY29wZS5pbml0aWFsaXplZCA9IHRydWU7XG5cdFx0XHR9KTtcblx0XHRcdCRzY29wZS5zZWxlY3RlZFNpdGVOYW1lID0gZGF0YS5ldmVudERhdGEuc2l0ZTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdC8vIGNyZWF0ZSBtb2RlOiBhZGp1c3QgdGhlIGVuZCBkYXRlIChpZiBuZWVkZWQpXG5cdFx0XHQvLyBhbmQgY2xlYXIgdGhlIHBhdGllbnQgbW9kZWxcblx0XHRcdCRzY29wZS5hZGp1c3RFbmREYXRldGltZSgpO1xuXHRcdFx0JHNjb3BlLmRlbW9ncmFwaGljTW9kZWwuY2xlYXIoKTtcblxuXHRcdFx0Ly8gYXV0b2ZvY3VzIHRoZSBwYXRpZW50IGZpZWxkXG5cdFx0XHRmb2N1cy5lbGVtZW50KFwiI2lucHV0LXBhdGllbnRcIik7XG5cblx0XHRcdCRzY29wZS5pbml0aWFsaXplZCA9IHRydWU7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5pbml0UGF0aWVudEF1dG9jb21wbGV0ZSA9IGZ1bmN0aW9uIGluaXRQYXRpZW50QXV0b2NvbXBsZXRlKGRlbW9ncmFwaGljTm8pXG5cdHtcblx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoZGVtb2dyYXBoaWNObykgJiYgZGVtb2dyYXBoaWNObyAhPSAwKVxuXHRcdHtcblx0XHRcdGRlbW9ncmFwaGljU2VydmljZS5nZXREZW1vZ3JhcGhpYyhkZW1vZ3JhcGhpY05vKS50aGVuKGZ1bmN0aW9uKGRhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5wYXRpZW50VHlwZWFoZWFkID0gZGF0YTtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSgpO1xuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uKGVycm9ycylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGluaXRpYWxpemluZyBwYXRpZW50IGF1dG9jb21wbGV0ZScsIGVycm9ycyk7XG5cdFx0XHRcdCRzY29wZS5kZW1vZ3JhcGhpY01vZGVsLmNsZWFyKCk7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0JHNjb3BlLmRlbW9ncmFwaGljTW9kZWwuY2xlYXIoKTtcblx0XHRcdGRlZmVycmVkLnJlc29sdmUoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0fTtcblxuXG5cdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQvLyBQcml2YXRlIG1ldGhvZHNcblx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09L1xuXG5cdCRzY29wZS5zZXRTZWxlY3RlZEV2ZW50U3RhdHVzID0gZnVuY3Rpb24gc2V0U2VsZWN0ZWRFdmVudFN0YXR1cyhzZWxlY3RlZENvZGUpXG5cdHtcblx0XHR2YXIgZXZlbnRTdGF0dXNDb2RlID0gJHNjb3BlLmRlZmF1bHRFdmVudFN0YXR1cztcblxuXHRcdGlmKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKHNlbGVjdGVkQ29kZSkpXG5cdFx0e1xuXHRcdFx0ZXZlbnRTdGF0dXNDb2RlID0gc2VsZWN0ZWRDb2RlO1xuXHRcdH1cblxuXHRcdGlmKCFKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhldmVudFN0YXR1c0NvZGUpIHx8XG5cdFx0XHQhSnVuby5Db21tb24uVXRpbC5leGlzdHMoJHNjb3BlLmV2ZW50U3RhdHVzZXNbZXZlbnRTdGF0dXNDb2RlXSkpXG5cdFx0e1xuXHRcdFx0Ly8gaWYgbm90IHNldCBvciBmb3VuZCBqdXN0IHBpY2sgdGhlIGZpcnN0IG9uZVxuXHRcdFx0ZXZlbnRTdGF0dXNDb2RlID0gJHNjb3BlLmV2ZW50U3RhdHVzT3B0aW9uc1swXS5kaXNwbGF5TGV0dGVyO1xuXHRcdH1cblxuXHRcdCRzY29wZS5zZWxlY3RlZEV2ZW50U3RhdHVzID0gJHNjb3BlLmV2ZW50U3RhdHVzZXNbZXZlbnRTdGF0dXNDb2RlXTtcblx0fTtcblxuXHQvLyBNYWtlIGEgbGlzdCBvZiB0aGUgdHlwZXMgb2YgYXBwb2ludG1lbnRzIGF2YWlsYWJsZSBmb3IgdGhpcyBhcHBvaW50bWVudFxuXHQkc2NvcGUuc2V0QWN0aXZlVGVtcGxhdGVFdmVudHMgPSBmdW5jdGlvbiBzZXRBY3RpdmVUZW1wbGF0ZUV2ZW50cygpXG5cdHtcblx0XHQvLyBHZXQgdGVtcGxhdGVzIHRoYXQgaGFwcGVuIGR1cmluZyB0aGUgdGltZSBwZXJpb2Rcblx0XHR2YXIgbW9tZW50U3RhcnQgPSBKdW5vLkNvbW1vbi5VdGlsLmdldERhdGVBbmRUaW1lTW9tZW50KFxuXHRcdFx0JHNjb3BlLmV2ZW50RGF0YS5zdGFydERhdGUsICRzY29wZS5mb3JtYXR0ZWRUaW1lKCRzY29wZS5ldmVudERhdGEuc3RhcnRUaW1lKSk7XG5cdFx0dmFyIG1vbWVudEVuZCA9IEp1bm8uQ29tbW9uLlV0aWwuZ2V0RGF0ZUFuZFRpbWVNb21lbnQoXG5cdFx0XHQkc2NvcGUuZXZlbnREYXRhLmVuZERhdGUsICRzY29wZS5mb3JtYXR0ZWRUaW1lKCRzY29wZS5ldmVudERhdGEuZW5kVGltZSkpO1xuXG5cdFx0dmFyIGFjdGl2ZUV2ZW50cyA9IFtdO1xuXG5cdFx0Ly8gTG9vcCB0aHJvdWdoIHRoZSBldmVudHMgZm9yIHRoaXMgZGF5XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRhdGEuZXZlbnRzLmxlbmd0aDsgaSsrKVxuXHRcdHtcblx0XHRcdGlmKGRhdGEuZXZlbnRzW2ldLnJlbmRlcmluZyAhPSBcImJhY2tncm91bmRcIiB8fCBkYXRhLmV2ZW50c1tpXS5yZXNvdXJjZUlkICE9ICRzY29wZS5zY2hlZHVsZS51dWlkKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGV2ZW50ID0gYW5ndWxhci5jb3B5KGRhdGEuZXZlbnRzW2ldKTtcblxuXHRcdFx0Ly8gaWYgc3RhcnQgdGltZSBpcyBiZWZvcmUgZXZlbnQgZW5kIHRpbWUgb3IgaWYgZW5kIHRpbWUgaXMgYWZ0ZXIgZXZlbnQgc3RhcnRcblx0XHRcdGV2ZW50LnN0YXJ0ID0gSnVuby5Db21tb24uVXRpbC5nZXREYXRldGltZU5vVGltZXpvbmVNb21lbnQoZXZlbnQuc3RhcnQpO1xuXHRcdFx0ZXZlbnQuZW5kID0gSnVuby5Db21tb24uVXRpbC5nZXREYXRldGltZU5vVGltZXpvbmVNb21lbnQoZXZlbnQuZW5kKTtcblxuXHRcdFx0aWYobW9tZW50U3RhcnQuaXNWYWxpZCgpICYmIG1vbWVudEVuZC5pc1ZhbGlkKCkgJiZcblx0XHRcdFx0ZXZlbnQuc3RhcnQuaXNWYWxpZCgpICYmIGV2ZW50LmVuZC5pc1ZhbGlkKCkgJiZcblx0XHRcdFx0bW9tZW50U3RhcnQuaXNCZWZvcmUoZXZlbnQuZW5kKSAmJiBtb21lbnRFbmQuaXNBZnRlcihldmVudC5zdGFydCkpXG5cdFx0XHR7XG5cdFx0XHRcdGV2ZW50LmF2YWlsYWJpbGl0eVR5cGUgPSBkYXRhLmF2YWlsYWJpbGl0eVR5cGVzW2V2ZW50LnNjaGVkdWxlVGVtcGxhdGVDb2RlXTtcblx0XHRcdFx0YWN0aXZlRXZlbnRzLnB1c2goZXZlbnQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdCRzY29wZS5hY3RpdmVUZW1wbGF0ZUV2ZW50cyA9IGFjdGl2ZUV2ZW50cztcblx0fTtcblxuXHQkc2NvcGUuYWRqdXN0RW5kRGF0ZXRpbWUgPSBmdW5jdGlvbiBhZGp1c3RFbmREYXRldGltZShsZW5ndGhNaW51dGVzKVxuXHR7XG5cdFx0Ly8gYWRqdXN0cyB0aGUgZW5kIHRpbWUgdG8gdGhlIHNwZWNpZmllZCBsZW5ndGggb3Jcblx0XHQvLyBhZGp1c3RzIHRvIGtlZXAgdGhlIGV2ZW50IGxlbmd0aCB0aGUgc2FtZSBhcyBpdCBsYXN0IHdhc1xuXG5cdFx0dmFyIG1vbWVudFN0YXJ0ID0gSnVuby5Db21tb24uVXRpbC5nZXREYXRlQW5kVGltZU1vbWVudChcblx0XHRcdCRzY29wZS5ldmVudERhdGEuc3RhcnREYXRlLCAkc2NvcGUuZm9ybWF0dGVkVGltZSgkc2NvcGUuZXZlbnREYXRhLnN0YXJ0VGltZSkpO1xuXG5cdFx0aWYobW9tZW50U3RhcnQuaXNWYWxpZCgpKVxuXHRcdHtcblx0XHRcdHZhciBuZXdFdmVudExlbmd0aCA9IEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKGxlbmd0aE1pbnV0ZXMpID9cblx0XHRcdFx0bGVuZ3RoTWludXRlcyA6ICRzY29wZS5sYXN0RXZlbnRMZW5ndGg7XG5cblx0XHRcdHZhciBtb21lbnRFbmQgPSBtb21lbnRTdGFydC5hZGQobmV3RXZlbnRMZW5ndGgsICdtaW51dGVzJyk7XG5cblx0XHRcdCRzY29wZS5ldmVudERhdGEuZW5kRGF0ZSA9IEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0TW9tZW50RGF0ZShtb21lbnRFbmQpO1xuXHRcdFx0JHNjb3BlLmV2ZW50RGF0YS5lbmRUaW1lID0gSnVuby5Db21tb24uVXRpbC5mb3JtYXRNb21lbnRUaW1lKG1vbWVudEVuZCwgJHNjb3BlLnRpbWVwaWNrZXJGb3JtYXQpO1xuXHRcdH1cblx0fTtcblxuXHQkc2NvcGUudXBkYXRlTGFzdEV2ZW50TGVuZ3RoID0gZnVuY3Rpb24gdXBkYXRlTGFzdEV2ZW50TGVuZ3RoKClcblx0e1xuXHRcdC8vIHNhdmVzIHRoZSBjdXJyZW50IGV2ZW50IGxlbmd0aCwgaWYgdGhlIGRhdGUvdGltZXMgYXJlIHZhbGlkXG5cblx0XHR2YXIgbW9tZW50U3RhcnQgPSBKdW5vLkNvbW1vbi5VdGlsLmdldERhdGVBbmRUaW1lTW9tZW50KFxuXHRcdFx0JHNjb3BlLmV2ZW50RGF0YS5zdGFydERhdGUsICRzY29wZS5mb3JtYXR0ZWRUaW1lKCRzY29wZS5ldmVudERhdGEuc3RhcnRUaW1lKSk7XG5cdFx0dmFyIG1vbWVudEVuZCA9IEp1bm8uQ29tbW9uLlV0aWwuZ2V0RGF0ZUFuZFRpbWVNb21lbnQoXG5cdFx0XHQkc2NvcGUuZXZlbnREYXRhLmVuZERhdGUsICRzY29wZS5mb3JtYXR0ZWRUaW1lKCRzY29wZS5ldmVudERhdGEuZW5kVGltZSkpO1xuXG5cdFx0aWYobW9tZW50U3RhcnQuaXNWYWxpZCgpICYmIG1vbWVudEVuZC5pc1ZhbGlkKCkpXG5cdFx0e1xuXHRcdFx0dmFyIGV2ZW50TGVuZ3RoID0gbW9tZW50RW5kLmRpZmYobW9tZW50U3RhcnQsICdtaW51dGVzJyk7XG5cdFx0XHRpZihldmVudExlbmd0aCA+IDApXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5sYXN0RXZlbnRMZW5ndGggPSBldmVudExlbmd0aDtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLnZhbGlkYXRlRm9ybSA9IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybSgpXG5cdHtcblx0XHQkc2NvcGUuZGlzcGxheU1lc3NhZ2VzLmNsZWFyKCk7XG5cblx0XHRKdW5vLkNvbW1vbi5VdGlsLnZhbGlkYXRlRGF0ZVN0cmluZygkc2NvcGUuZXZlbnREYXRhLnN0YXJ0RGF0ZSxcblx0XHRcdCRzY29wZS5kaXNwbGF5TWVzc2FnZXMsICdzdGFydERhdGUnLCAnU3RhcnQgVGltZScsIHRydWUpO1xuXG5cdFx0SnVuby5Db21tb24uVXRpbC52YWxpZGF0ZVRpbWVTdHJpbmcoJHNjb3BlLmZvcm1hdHRlZFRpbWUoJHNjb3BlLmV2ZW50RGF0YS5zdGFydFRpbWUpLFxuXHRcdFx0JHNjb3BlLmRpc3BsYXlNZXNzYWdlcywgJ3N0YXJ0VGltZScsICdTdGFydCBUaW1lJywgdHJ1ZSk7XG5cblx0XHRKdW5vLkNvbW1vbi5VdGlsLnZhbGlkYXRlRGF0ZVN0cmluZygkc2NvcGUuZXZlbnREYXRhLmVuZERhdGUsXG5cdFx0XHQkc2NvcGUuZGlzcGxheU1lc3NhZ2VzLCAnZW5kRGF0ZScsICdFbmQgVGltZScsIHRydWUpO1xuXG5cdFx0SnVuby5Db21tb24uVXRpbC52YWxpZGF0ZVRpbWVTdHJpbmcoJHNjb3BlLmZvcm1hdHRlZFRpbWUoJHNjb3BlLmV2ZW50RGF0YS5lbmRUaW1lKSxcblx0XHRcdCRzY29wZS5kaXNwbGF5TWVzc2FnZXMsICdlbmRUaW1lJywgJ0VuZCBUaW1lJywgdHJ1ZSk7XG5cblx0XHQvLyBpZiBhbGwgdGhlIGRhdGUvdGltZSBmaWVsZHMgbG9vayBnb29kLCB2YWxpZGF0ZSByYW5nZVxuXHRcdGlmKCEkc2NvcGUuZGlzcGxheU1lc3NhZ2VzLmhhc19lcnJvcnMoKSlcblx0XHR7XG5cdFx0XHR2YXIgc3RhcnREYXRldGltZSA9IEp1bm8uQ29tbW9uLlV0aWwuZ2V0RGF0ZUFuZFRpbWVNb21lbnQoXG5cdFx0XHRcdCRzY29wZS5ldmVudERhdGEuc3RhcnREYXRlLCAkc2NvcGUuZm9ybWF0dGVkVGltZSgkc2NvcGUuZXZlbnREYXRhLnN0YXJ0VGltZSkpO1xuXHRcdFx0dmFyIGVuZERhdGV0aW1lID0gSnVuby5Db21tb24uVXRpbC5nZXREYXRlQW5kVGltZU1vbWVudChcblx0XHRcdFx0JHNjb3BlLmV2ZW50RGF0YS5lbmREYXRlLCAkc2NvcGUuZm9ybWF0dGVkVGltZSgkc2NvcGUuZXZlbnREYXRhLmVuZFRpbWUpKTtcblxuXHRcdFx0aWYoZW5kRGF0ZXRpbWUuaXNTYW1lKHN0YXJ0RGF0ZXRpbWUpIHx8XG5cdFx0XHRcdGVuZERhdGV0aW1lLmlzQmVmb3JlKHN0YXJ0RGF0ZXRpbWUpKVxuXHRcdFx0e1xuXHRcdFx0XHQkc2NvcGUuZGlzcGxheU1lc3NhZ2VzLmFkZFN0YW5kYXJkRXJyb3IoXCJUaGUgYXBwb2ludG1lbnQgbXVzdCBlbmQgYWZ0ZXIgaXQgc3RhcnRzXCIpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiAhJHNjb3BlLmRpc3BsYXlNZXNzYWdlcy5oYXNfZXJyb3JzKCk7XG5cdH07XG5cblx0JHNjb3BlLnNhdmVFdmVudCA9IGZ1bmN0aW9uIHNhdmVFdmVudCgpXG5cdHtcblx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0dmFyIHN0YXJ0RGF0ZXRpbWUgPSBKdW5vLkNvbW1vbi5VdGlsLmdldERhdGVBbmRUaW1lTW9tZW50KFxuXHRcdFx0XHQkc2NvcGUuZXZlbnREYXRhLnN0YXJ0RGF0ZSwgJHNjb3BlLmZvcm1hdHRlZFRpbWUoJHNjb3BlLmV2ZW50RGF0YS5zdGFydFRpbWUpKTtcblxuXHRcdHZhciBlbmREYXRldGltZSA9IEp1bm8uQ29tbW9uLlV0aWwuZ2V0RGF0ZUFuZFRpbWVNb21lbnQoXG5cdFx0XHRcdCRzY29wZS5ldmVudERhdGEuZW5kRGF0ZSwgJHNjb3BlLmZvcm1hdHRlZFRpbWUoJHNjb3BlLmV2ZW50RGF0YS5lbmRUaW1lKSk7XG5cblxuXHRcdHBhcmVudFNjb3BlLnNhdmVFdmVudChcblx0XHRcdGVkaXRNb2RlLFxuXHRcdFx0e1xuXHRcdFx0XHRhcHBvaW50bWVudE5vOiAkc2NvcGUuZXZlbnRVdWlkLFxuXHRcdFx0XHRzdGFydFRpbWU6IHN0YXJ0RGF0ZXRpbWUsXG5cdFx0XHRcdGVuZFRpbWU6IGVuZERhdGV0aW1lLFxuXHRcdFx0XHRyZWFzb246ICRzY29wZS5ldmVudERhdGEucmVhc29uLFxuXHRcdFx0XHRub3RlczogJHNjb3BlLmV2ZW50RGF0YS5ub3Rlcyxcblx0XHRcdFx0cHJvdmlkZXJObzogJHNjb3BlLnNjaGVkdWxlLnV1aWQsXG5cdFx0XHRcdGV2ZW50U3RhdHVzQ29kZTogJHNjb3BlLnNlbGVjdGVkRXZlbnRTdGF0dXMuZGlzcGxheUxldHRlcixcblx0XHRcdFx0ZGVtb2dyYXBoaWNObzogJHNjb3BlLmRlbW9ncmFwaGljTW9kZWwuZGVtb2dyYXBoaWNObyxcblx0XHRcdFx0c2l0ZTogJHNjb3BlLnNlbGVjdGVkU2l0ZU5hbWVcblx0XHRcdH1cblx0XHQpLnRoZW4oXG5cdFx0XHRmdW5jdGlvbihyZXN1bHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihwYXJlbnRTY29wZS5wcm9jZXNzU2F2ZVJlc3VsdHMocmVzdWx0cywgJHNjb3BlLmRpc3BsYXlNZXNzYWdlcykpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChyZXN1bHRzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uIChyZXN1bHRzKVxuXHRcdFx0e1xuXHRcdFx0XHRwYXJlbnRTY29wZS5wcm9jZXNzU2F2ZVJlc3VsdHMocmVzdWx0cywgJHNjb3BlLmRpc3BsYXlNZXNzYWdlcyk7XG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdCgpO1xuXHRcdFx0fSk7XG5cblx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0fTtcblxuXHQkc2NvcGUuZGVsZXRlRXZlbnQgPSBmdW5jdGlvbiBkZWxldGVFdmVudCgpXG5cdHtcblx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0cGFyZW50U2NvcGUuZGVsZXRlRXZlbnQoJHNjb3BlLmV2ZW50VXVpZCkudGhlbihmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSgpO1xuXG5cdFx0fSwgZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGRlZmVycmVkLnJlamVjdCgpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdH07XG5cblx0JHNjb3BlLmZvcm1hdHRlZFRpbWUgPSBmdW5jdGlvbiBmb3JtYXR0ZWRUaW1lKHRpbWVfc3RyKVxuXHR7XG5cdFx0Ly8gdGhlIHRpbWUgcGlja2VyIGZvcm1hdCBpcyBISDpNTSBBTSAtIG5lZWQgdG8gc3RyaXAgc3BhY2VzXG5cdFx0cmV0dXJuIHRpbWVfc3RyLnJlcGxhY2UoLyAvZywnJyk7XG5cdH07XG5cblx0JHNjb3BlLmxvYWRQYXRpZW50RnJvbVR5cGVhaGVhZCA9IGZ1bmN0aW9uIGxvYWRQYXRpZW50RnJvbVR5cGVhaGVhZChwYXRpZW50VHlwZWFoZWFkKVxuXHR7XG5cdFx0JHNjb3BlLmRlbW9ncmFwaGljTW9kZWwuZmlsbERhdGEocGF0aWVudFR5cGVhaGVhZCk7XG5cdH07XG5cblx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdC8vIFdhdGNoZXNcblx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09L1xuXG5cdC8vIHdoZW4gdGhlIHN0YXJ0IGRhdGUgaXMgY2hhbmdlZCxcblx0Ly8gdXBkYXRlIHRoZSBhY3RpdmUgdGVtcGxhdGUgZXZlbnRzXG5cdCRzY29wZS4kd2F0Y2goJ3N0YXJ0RGF0ZScsIGZ1bmN0aW9uKG5ld1N0YXJ0RGF0ZSwgb2xkU3RhcnREYXRlKVxuXHR7XG5cdFx0Ly8gYXZvaWQgcnVubmluZyBmaXJzdCB0aW1lIHRoaXMgZmlyZXMgZHVyaW5nIGluaXRpYWxpemF0aW9uXG5cdFx0aWYobmV3U3RhcnREYXRlICE9PSBvbGRTdGFydERhdGUpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLnNldEFjdGl2ZVRlbXBsYXRlRXZlbnRzKCk7XG5cdFx0XHQkc2NvcGUuYWRqdXN0RW5kRGF0ZXRpbWUoKTtcblx0XHR9XG5cdH0pO1xuXG5cdC8vIHdoZW4gdGhlIHN0YXJ0IHRpbWUgaXMgY2hhbmdlZCxcblx0Ly8gdXBkYXRlIHRoZSBhY3RpdmUgdGVtcGxhdGUgZXZlbnRzIGFuZCBhZGp1c3QgdGhlIGVuZCB0aW1lXG5cdCRzY29wZS4kd2F0Y2goJ3N0YXJ0VGltZScsIGZ1bmN0aW9uKG5ld1N0YXJ0VGltZSwgb2xkU3RhcnRUaW1lKVxuXHR7XG5cdFx0Ly8gYXZvaWQgcnVubmluZyBmaXJzdCB0aW1lIHRoaXMgZmlyZXMgZHVyaW5nIGluaXRpYWxpemF0aW9uXG5cdFx0aWYobmV3U3RhcnRUaW1lICE9PSBvbGRTdGFydFRpbWUpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLnNldEFjdGl2ZVRlbXBsYXRlRXZlbnRzKCk7XG5cdFx0XHQkc2NvcGUuYWRqdXN0RW5kRGF0ZXRpbWUoKTtcblx0XHR9XG5cdH0pO1xuXG5cdC8vIHdoZW4gdGhlIGVuZCBkYXRlIGlzIGNoYW5nZWQsIHRyYWNrIHRoZSBldmVudCBsZW5ndGhcblx0JHNjb3BlLiR3YXRjaCgnZW5kRGF0ZScsIGZ1bmN0aW9uKG5ld0VuZERhdGUsIG9sZEVuZERhdGUpXG5cdHtcblx0XHQvLyBhdm9pZCBydW5uaW5nIGZpcnN0IHRpbWUgdGhpcyBmaXJlcyBkdXJpbmcgaW5pdGlhbGl6YXRpb25cblx0XHRpZihuZXdFbmREYXRlICE9PSBvbGRFbmREYXRlKVxuXHRcdHtcblx0XHRcdCRzY29wZS5zZXRBY3RpdmVUZW1wbGF0ZUV2ZW50cygpO1xuXHRcdFx0JHNjb3BlLnVwZGF0ZUxhc3RFdmVudExlbmd0aCgpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gd2hlbiB0aGUgZW5kIHRpbWUgaXMgY2hhbmdlZCwgdHJhY2sgdGhlIGV2ZW50IGxlbmd0aFxuXHQkc2NvcGUuJHdhdGNoKCdlbmRUaW1lJywgZnVuY3Rpb24obmV3RW5kVGltZSwgb2xkRW5kVGltZSlcblx0e1xuXHRcdC8vIGF2b2lkIHJ1bm5pbmcgZmlyc3QgdGltZSB0aGlzIGZpcmVzIGR1cmluZyBpbml0aWFsaXphdGlvblxuXHRcdGlmKG5ld0VuZFRpbWUgIT09IG9sZEVuZFRpbWUpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLnNldEFjdGl2ZVRlbXBsYXRlRXZlbnRzKCk7XG5cdFx0XHQkc2NvcGUudXBkYXRlTGFzdEV2ZW50TGVuZ3RoKCk7XG5cdFx0fVxuXHR9KTtcblxuXHQkc2NvcGUuJHdhdGNoKCdwYXRpZW50VHlwZWFoZWFkJywgZnVuY3Rpb24oKVxuXHR7XG5cdFx0JHNjb3BlLmxvYWRQYXRpZW50RnJvbVR5cGVhaGVhZCgkc2NvcGUucGF0aWVudFR5cGVhaGVhZCk7XG5cdH0pO1xuXG5cdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQvLyBQdWJsaWMgbWV0aG9kc1xuXHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vXG5cblx0JHNjb3BlLmxvYWRlZE5ld1Bob3RvID0gZnVuY3Rpb24gbG9hZGVkTmV3UGhvdG8oZmlsZSwgZXZlbnQpXG5cdHtcblx0XHRpZihmaWxlID09IG51bGwpXG5cdFx0e1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQkc2NvcGUucHJldmlld19wYXRpZW50X2ltYWdlID0gZmlsZTtcblx0XHQkc2NvcGUubmV3X3Bob3RvID0gdHJ1ZTtcblx0XHQkc2NvcGUuZGVtb2dyYXBoaWNNb2RlbC5oYXNQaG90byA9IHRydWU7XG5cdFx0JHNjb3BlLmRlbW9ncmFwaGljTW9kZWwudXBsb2FkUGhvdG8oZmlsZSk7XG5cdH07XG5cblx0JHNjb3BlLmlzV29ya2luZyA9IGZ1bmN0aW9uIGlzV29ya2luZygpXG5cdHtcblx0XHRyZXR1cm4gJHNjb3BlLndvcmtpbmc7XG5cdH07XG5cblx0JHNjb3BlLmlzSW5pdGlhbGl6ZWQgPSBmdW5jdGlvbiBpc0luaXRpYWxpemVkKClcblx0e1xuXHRcdHJldHVybiAkc2NvcGUuaW5pdGlhbGl6ZWQ7XG5cdH07XG5cblx0JHNjb3BlLmlzUGF0aWVudFNlbGVjdGVkID0gZnVuY3Rpb24gaXNQYXRpZW50U2VsZWN0ZWQoKVxuXHR7XG5cdFx0cmV0dXJuIEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKCRzY29wZS5kZW1vZ3JhcGhpY01vZGVsLmRlbW9ncmFwaGljTm8pO1xuXHR9O1xuXG5cdCRzY29wZS5jbGVhclBhdGllbnQgPSBmdW5jdGlvbiBjbGVhclBhdGllbnQoKVxuXHR7XG5cdFx0JHNjb3BlLmF1dG9jb21wbGV0ZVZhbHVlcy5wYXRpZW50ID0gbnVsbDtcblx0XHQkc2NvcGUuZGVtb2dyYXBoaWNNb2RlbC5jbGVhcigpO1xuXHR9O1xuXG5cdCRzY29wZS5zZXRFdmVudExlbmd0aCA9IGZ1bmN0aW9uIHNldEV2ZW50TGVuZ3RoKG1pbnV0ZXMpXG5cdHtcblx0XHQkc2NvcGUuYWRqdXN0RW5kRGF0ZXRpbWUobWludXRlcyk7XG5cdH07XG5cblx0JHNjb3BlLnNhdmUgPSBmdW5jdGlvbiBzYXZlKClcblx0e1xuXHRcdGlmKCEkc2NvcGUudmFsaWRhdGVGb3JtKCkpXG5cdFx0e1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0JHNjb3BlLndvcmtpbmcgPSB0cnVlO1xuXHRcdCRzY29wZS5zYXZlRXZlbnQoKS50aGVuKGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHQkc2NvcGUucGFyZW50U2NvcGUucmVmZXRjaEV2ZW50cygpO1xuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcblx0XHRcdCRzY29wZS53b3JraW5nID0gZmFsc2U7XG5cdFx0fSwgZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGNvbnNvbGUubG9nKCRzY29wZS5kaXNwbGF5TWVzc2FnZXMuZmllbGRfZXJyb3JzKClbJ2xvY2F0aW9uJ10pO1xuXHRcdFx0aWYoISRzY29wZS5kaXNwbGF5TWVzc2FnZXMuaGFzX3N0YW5kYXJkX2Vycm9ycygpKVxuXHRcdFx0e1xuXHRcdFx0XHQkc2NvcGUuZGlzcGxheU1lc3NhZ2VzLmFkZF9nZW5lcmljX2ZhdGFsX2Vycm9yKCk7XG5cdFx0XHR9XG5cdFx0XHQkc2NvcGUud29ya2luZyA9IGZhbHNlO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5kZWwgPSBmdW5jdGlvbiBkZWwoKVxuXHR7XG5cdFx0JHNjb3BlLndvcmtpbmcgPSB0cnVlO1xuXHRcdCRzY29wZS5kZWxldGVFdmVudCgpLnRoZW4oZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdCRzY29wZS5wYXJlbnRTY29wZS5yZWZldGNoRXZlbnRzKCk7XG5cdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xuXHRcdFx0JHNjb3BlLndvcmtpbmcgPSBmYWxzZTtcblx0XHR9LCBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLmRpc3BsYXlNZXNzYWdlcy5hZGRfZ2VuZXJpY19mYXRhbF9lcnJvcigpO1xuXHRcdFx0JHNjb3BlLndvcmtpbmcgPSBmYWxzZTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gY2FuY2VsKClcblx0e1xuXHRcdCR1aWJNb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHR9O1xuXG5cdCRzY29wZS5zYXZlQW5kQmlsbCA9IGZ1bmN0aW9uIHNhdmVBbmRCaWxsKClcblx0e1xuXHRcdGlmKCEkc2NvcGUudmFsaWRhdGVGb3JtKCkpXG5cdFx0e1xuXHQgIFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0JHNjb3BlLndvcmtpbmcgPSB0cnVlO1xuXHRcdCRzY29wZS5zYXZlRXZlbnQoKS50aGVuKGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHQkc2NvcGUucGFyZW50U2NvcGUucmVmZXRjaEV2ZW50cygpO1xuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcblx0XHRcdCRzY29wZS53b3JraW5nID0gZmFsc2U7XG5cdFx0XHQkc2NvcGUucGFyZW50U2NvcGUub3BlbkNyZWF0ZUludm9pY2UoXG5cdFx0XHRcdCRzY29wZS5ldmVudFV1aWQsXG5cdFx0XHRcdCRzY29wZS5zY2hlZHVsZS51dWlkLFxuXHRcdFx0XHQkc2NvcGUuZGVtb2dyYXBoaWNNb2RlbC5kZW1vZ3JhcGhpY05vKTtcblx0XHR9LCBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLmRpc3BsYXlNZXNzYWdlcy5hZGRfZ2VuZXJpY19mYXRhbF9lcnJvcigpO1xuXHRcdFx0JHNjb3BlLndvcmtpbmcgPSBmYWxzZTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUudmlld0ludm9pY2VzID0gZnVuY3Rpb24gdmlld0ludm9pY2VzKClcblx0e1xuXHRcdCRzY29wZS5wYXJlbnRTY29wZS5vcGVuX3ZpZXdfaW52b2ljZXMoJHNjb3BlLmV2ZW50VXVpZCk7XG5cdH07XG5cblx0JHNjb3BlLmNyZWF0ZVBhdGllbnQgPSBmdW5jdGlvbiBjcmVhdGVQYXRpZW50KClcblx0e1xuXHRcdHZhciBlZGl0TW9kZUNhbGxiYWNrID0gZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfTtcblx0XHR2YXIgb25TYXZlQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuICRzY29wZS5vblBhdGllbnRNb2RhbFNhdmU7IH07XG5cdFx0dmFyIGxvYWRFcnJvckxpbmtQYXRpZW50Rm4gPSBmdW5jdGlvbigpIHsgcmV0dXJuICRzY29wZS5vblBhdGllbnRNb2RhbFNhdmU7IH07XG5cblx0XHQkc2NvcGUuY3JlYXRlX3BhdGllbnRfZGlhbG9nID0gcGFyZW50U2NvcGUuY2FsZW5kYXJfYXBpX2FkYXB0ZXIub3BlblBhdGllbnREaWFsb2coXG5cdFx0XHRcdGVkaXRNb2RlQ2FsbGJhY2ssIG9uU2F2ZUNhbGxiYWNrLCBsb2FkRXJyb3JMaW5rUGF0aWVudEZuKTtcblx0fTtcblxuXHQkc2NvcGUubW9kaWZ5X3BhdGllbnQgPSBmdW5jdGlvbiBtb2RpZnlfcGF0aWVudCgpXG5cdHtcblx0XHRpZighJHNjb3BlLmRlbW9ncmFwaGljTW9kZWwuZGVtb2dyYXBoaWNObylcblx0XHR7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIGVkaXRNb2RlQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH07XG5cdFx0dmFyIG9uU2F2ZUNhbGxiYWNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAkc2NvcGUub25QYXRpZW50TW9kYWxTYXZlOyB9O1xuXHRcdHZhciBsb2FkRXJyb3JMaW5rUGF0aWVudEZuID0gZnVuY3Rpb24oKSB7IHJldHVybiAkc2NvcGUub25QYXRpZW50TW9kYWxTYXZlOyB9O1xuXG5cdFx0JHNjb3BlLm1vZGlmeV9wYXRpZW50X2RpYWxvZyA9IHBhcmVudFNjb3BlLmNhbGVuZGFyX2FwaV9hZGFwdGVyLm9wZW5QYXRpZW50RGlhbG9nKFxuXHRcdFx0XHRlZGl0TW9kZUNhbGxiYWNrLCBvblNhdmVDYWxsYmFjaywgbG9hZEVycm9yTGlua1BhdGllbnRGbik7XG5cdH07XG5cblx0Ly8gZm9yIGNhbGxiYWNrIG9uIGNyZWF0ZS9lZGl0IHBhdGllbnQgbW9kYWxcblx0JHNjb3BlLm9uUGF0aWVudE1vZGFsU2F2ZSA9IGZ1bmN0aW9uIG9uUGF0aWVudE1vZGFsU2F2ZShkZW1vZ3JhcGhpY05vKVxuXHR7XG5cdFx0Ly8gbG9hZCB0aGUgbmV3bHkgY3JlYXRlZC91cGRhdGVkIHBhdGllbnRcblx0XHQkc2NvcGUuZGVtb2dyYXBoaWNNb2RlbC5kZW1vZ3JhcGhpY05vID0gZGVtb2dyYXBoaWNObztcblx0XHQkc2NvcGUuaW5pdFBhdGllbnRBdXRvY29tcGxldGUoKTtcblx0fTtcblxuXHQkc2NvcGUuc2VhcmNoUGF0aWVudHMgPSBmdW5jdGlvbiBzZWFyY2hQYXRpZW50cyh0ZXJtKVxuXHR7XG5cdFx0dmFyIHNlYXJjaCA9IHtcblx0XHRcdHR5cGU6ICdOYW1lJyxcblx0XHRcdCd0ZXJtJzogdGVybSxcblx0XHRcdHN0YXR1czogJ2FjdGl2ZScsXG5cdFx0XHRpbnRlZ3JhdG9yOiBmYWxzZSxcblx0XHRcdG91dG9mZG9tYWluOiB0cnVlXG5cdFx0fTtcblx0XHRyZXR1cm4gZGVtb2dyYXBoaWNzU2VydmljZS5zZWFyY2goc2VhcmNoLCAwLCAyNSkudGhlbihcblx0XHRcdGZ1bmN0aW9uKHJlc3VsdHMpXG5cdFx0XHR7XG5cdFx0XHRcdHZhciByZXNwID0gW107XG5cdFx0XHRcdGZvciAodmFyIHggPSAwOyB4IDwgcmVzdWx0cy5jb250ZW50Lmxlbmd0aDsgeCsrKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmVzcC5wdXNoKFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRkZW1vZ3JhcGhpY05vOiByZXN1bHRzLmNvbnRlbnRbeF0uZGVtb2dyYXBoaWNObyxcblx0XHRcdFx0XHRcdFx0bmFtZTogSnVuby5Db21tb24uVXRpbC5mb3JtYXROYW1lKFxuXHRcdFx0XHRcdFx0XHRcdHJlc3VsdHMuY29udGVudFt4XS5maXJzdE5hbWUsIHJlc3VsdHMuY29udGVudFt4XS5sYXN0TmFtZSlcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiByZXNwO1xuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5uZXdEZW1vZ3JhcGhpYyA9IGZ1bmN0aW9uIG5ld0RlbW9ncmFwaGljKHNpemUpXG5cdHtcblx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKFxuXHRcdFx0e1xuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9wYXRpZW50L25ld1BhdGllbnQuanNwJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ1BhdGllbnQuTmV3UGF0aWVudENvbnRyb2xsZXIgYXMgbmV3UGF0aWVudEN0cmwnLFxuXHRcdFx0XHRiYWNrZHJvcDogJ3N0YXRpYycsXG5cdFx0XHRcdHNpemU6IHNpemVcblx0XHRcdH0pO1xuXG5cdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihcblx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzdWx0cyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdwYXRpZW50ICM6ICcsIHJlc3VsdHMuZGVtb2dyYXBoaWNObyk7XG5cblx0XHRcdFx0JHNjb3BlLmluaXRQYXRpZW50QXV0b2NvbXBsZXRlKHJlc3VsdHMuZGVtb2dyYXBoaWNObylcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdNb2RhbCBkaXNtaXNzZWQgYXQ6ICcgKyBuZXcgRGF0ZSgpKTtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdH0pO1xuXG5cdFx0Y29uc29sZS5sb2coJCgnI215TW9kYWwnKSk7XG5cdH07XG5cblxuXHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0Ly8gIEtleSBCaW5kaW5nc1xuXHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXHQkc2NvcGUua2V5QmluZFNldHRpbmdzID1cblx0e1xuXHRcdFwiY3RybCtlbnRlclwiOiB7XG5cdFx0XHR0aXRsZTogJ0N0cmwrRW50ZXInLFxuXHRcdFx0dG9vbHRpcDogJ1NhdmUnLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdTYXZlIGFwcG9pbnRtZW50Jyxcblx0XHRcdGNhbGxiYWNrX2ZuOiBmdW5jdGlvbiBlbnRlcl9jYWxsYmFjaygpXG5cdFx0XHR7XG5cdFx0XHRcdGlmKCEkc2NvcGUuaXNXb3JraW5nKCkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQkc2NvcGUuc2F2ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0dGFyZ2V0OiBudWxsXG5cdFx0fSxcblx0XHRcImN0cmwrc2hpZnQrZW50ZXJcIjoge1xuXHRcdFx0dGl0bGU6ICdDdHJsK1NoaWZ0K0VudGVyJyxcblx0XHRcdHRvb2x0aXA6ICdTYXZlIEFuZCBCaWxsJyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnU2F2ZSBhbmQgYmlsbCBmb3IgYXBwb2ludG1lbnQnLFxuXHRcdFx0Y2FsbGJhY2tfZm46IGZ1bmN0aW9uIGVudGVyX2NhbGxiYWNrKClcblx0XHRcdHtcblx0XHRcdFx0aWYoISRzY29wZS5pc1dvcmtpbmcoKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCRzY29wZS5zYXZlQW5kQmlsbCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0dGFyZ2V0OiBudWxsXG5cdFx0fVxuXHR9O1xuXHQkc2NvcGUua2V5QmluZGluZy5iaW5kS2V5R2xvYmFsKFwiY3RybCtlbnRlclwiLCAkc2NvcGUua2V5QmluZFNldHRpbmdzW1wiY3RybCtlbnRlclwiXSk7XG5cdCRzY29wZS5rZXlCaW5kaW5nLmJpbmRLZXlHbG9iYWwoXCJjdHJsK3NoaWZ0K2VudGVyXCIsICRzY29wZS5rZXlCaW5kU2V0dGluZ3NbXCJjdHJsK3NoaWZ0K2VudGVyXCJdKTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ1NjaGVkdWxlJywgWydDb21tb24nLCAnQ29tbW9uLlNlcnZpY2VzJywgJ1BhdGllbnRMaXN0J10pOyIsIlxuaW1wb3J0IHtBcHBvaW50bWVudEFwaX0gZnJvbSAnLi4vLi4vZ2VuZXJhdGVkL2FwaS9BcHBvaW50bWVudEFwaSc7XG5pbXBvcnQge1NjaGVkdWxlQXBpfSBmcm9tICcuLi8uLi9nZW5lcmF0ZWQvYXBpL1NjaGVkdWxlQXBpJztcblxuYW5ndWxhci5tb2R1bGUoJ1NjaGVkdWxlJykuY29udHJvbGxlcignU2NoZWR1bGUuU2NoZWR1bGVDb250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJHN0YXRlUGFyYW1zJyxcblx0JyRxJyxcblx0JyRodHRwJyxcblx0JyRodHRwUGFyYW1TZXJpYWxpemVyJyxcblx0JyR1aWJNb2RhbCcsXG5cdCckc3RhdGUnLFxuXHQnZm9jdXNTZXJ2aWNlJyxcblx0J3NjaGVkdWxlU2VydmljZScsXG5cdCdzZWN1cml0eVNlcnZpY2UnLFxuXHQndWlDYWxlbmRhckNvbmZpZycsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCRzdGF0ZVBhcmFtcyxcblx0XHQkcSxcblx0XHQkaHR0cCxcblx0XHQkaHR0cFBhcmFtU2VyaWFsaXplcixcblx0XHQkdWliTW9kYWwsXG5cdFx0JHN0YXRlLFxuXHRcdGZvY3VzU2VydmljZSxcblx0XHRzY2hlZHVsZVNlcnZpY2UsXG5cdFx0c2VjdXJpdHlTZXJ2aWNlLFxuXHRcdHVpQ2FsZW5kYXJDb25maWdcblx0KVxuXHR7XG5cdFx0Ly92YXIgY29udHJvbGxlciA9IHRoaXM7XG5cblx0XHQvLyBYWFg6IHB1dCB0aGlzIGFkZHJlc3Mgc29tZXdoZXJlIGVsc2Vcblx0XHQkc2NvcGUuYXBwb2ludG1lbnRBcGkgPSBuZXcgQXBwb2ludG1lbnRBcGkoJGh0dHAsICRodHRwUGFyYW1TZXJpYWxpemVyLFxuXHRcdFx0J2h0dHA6Ly9sb2NhbGhvc3Q6OTA5MC93cy9ycycpO1xuXG5cdFx0JHNjb3BlLnNjaGVkdWxlQXBpID0gbmV3IFNjaGVkdWxlQXBpKCRodHRwLCAkaHR0cFBhcmFtU2VyaWFsaXplcixcblx0XHRcdCdodHRwOi8vbG9jYWxob3N0OjkwOTAvd3MvcnMnKTtcblxuXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gTG9jYWwgc2NvcGUgdmFyaWFibGVzXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09L1xuXG5cdFx0JHNjb3BlLmNhbGVuZGFyTmFtZSA9ICdjcENhbGVuZGFyJztcblx0XHQkc2NvcGUuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblx0XHQkc2NvcGUuY2FsZW5kYXJMb2FkaW5nID0gZmFsc2U7XG5cblx0XHQkc2NvcGUudWlDb25maWcgPSB7fTtcblx0XHQkc2NvcGUudWlDb25maWdBcHBsaWVkID0ge307XG5cdFx0JHNjb3BlLmV2ZW50U291cmNlcyA9IFtdO1xuXHRcdCRzY29wZS5zZWxlY3RlZFNjaGVkdWxlID0gbnVsbDtcblx0XHQkc2NvcGUuc2VsZWN0ZWRTaXRlTmFtZSA9IG51bGw7XG5cdFx0JHNjb3BlLnNlbGVjdGVkVGltZUludGVydmFsID0gbnVsbDtcblxuXHRcdC8vIGNwQ2FsZW5kYXIgY29udHJvbCBvYmplY3QuICBUaGUgY3BDYWxlbmRhciBkaXJlY3RpdmUgcHV0cyBpdHMgY29udHJvbCBBUEkgbWV0aG9kcyBpblxuXHRcdC8vIHRoaXMgb2JqZWN0LlxuXHRcdCRzY29wZS5jcENhbGVuZGFyQ29udHJvbCA9IHt9O1xuXG5cblx0XHQvLyBQYXJhbWV0ZXJzIGZyb20gZGlyZWN0aXZlIGNvbnRyb2xsZXJcblxuXG5cdFx0JHNjb3BlLnNjaGVkdWxlcyA9IFtdO1xuXHRcdCRzY29wZS5zY2hlZHVsZU9wdGlvbnMgPSBbXTtcblx0XHQkc2NvcGUucmVzb3VyY2VPcHRpb25zID0gW107XG5cdFx0JHNjb3BlLnNpdGVPcHRpb25zID0gW107XG5cdFx0JHNjb3BlLmRlZmF1bHRFdmVudENvbG9yID0gXCIjMzMzXCI7XG5cdFx0JHNjb3BlLmRlZmF1bHRUaW1lSW50ZXJ2YWwgPSAnMDA6MTU6MDAnO1xuXHRcdCRzY29wZS50aW1lSW50ZXJ2YWxPcHRpb25zID1cblx0XHRcdFsnMDA6MDU6MDAnLCcwMDoxMDowMCcsJzAwOjE1OjAwJywnMDA6MzA6MDAnXTtcblx0XHQkc2NvcGUuc2VsZWN0ZWRUaW1lSW50ZXJ2YWwgPSAkc2NvcGUuZGVmYXVsdFRpbWVJbnRlcnZhbDtcblx0XHQkc2NvcGUuZGVmYXVsdEF1dG9SZWZyZXNoTWludXRlcyA9IDM7XG5cdFx0JHNjb3BlLmRlZmF1bHRDYWxlbmRhclZpZXcgPSAnYWdlbmRhV2Vlayc7XG5cdFx0JHNjb3BlLmV2ZW50U3RhdHVzZXMgPSB7fTtcblx0XHQkc2NvcGUucm90YXRlU3RhdHVzZXMgPSBbXTtcblx0XHQkc2NvcGUuYXZhaWxhYmlsaXR5VHlwZXMgPSB7fTtcblx0XHQkc2NvcGUucmVzb3VyY2VPcHRpb25IYXNoID0ge307XG5cdFx0JHNjb3BlLmV2ZW50cyA9IFtdO1xuXHRcdCRzY29wZS5zY2hlZHVsZVRlbXBsYXRlcyA9IHt9O1xuXHRcdCRzY29wZS5zaXRlcyA9IHt9O1xuXG5cdFx0JHNjb3BlLm9wZW5pbmdEaWFsb2cgPSBmYWxzZTtcblx0XHQkc2NvcGUuZGlhbG9nID0gbnVsbDtcblxuXG5cdFx0Ly8gR2xvYmFsIFN0YXRlIHBhcmFtZXRlcnNcblx0XHQkc2NvcGUuZGVmYXVsdERhdGUgPSBudWxsO1xuXHRcdCRzY29wZS5zZWxlY3RlZERhdGUgPSBudWxsO1xuXHRcdCRzY29wZS5zY2hlZHVsZVZpZXdOYW1lID0gbnVsbDtcblx0XHQkc2NvcGUuc2NoZWR1bGVEZWZhdWx0ID0gbnVsbDtcblx0XHQkc2NvcGUuc2NoZWR1bGVUaW1lSW50ZXJ2YWwgPSBudWxsO1xuXHRcdCRzY29wZS5zY2hlZHVsZUF1dG9SZWZyZXNoID0gbnVsbDtcblx0XHQkc2NvcGUuc2NoZWR1bGVBdXRvUmVmcmVzaE1pbnV0ZXMgPSBudWxsO1xuXG5cdFx0JHNjb3BlLnNjaGVkdWxlU2VydmljZSA9IHNjaGVkdWxlU2VydmljZTtcblxuXG5cdFx0JHNjb3BlLmluaXQgPSBmdW5jdGlvbiBpbml0KClcblx0XHR7XG5cdFx0XHQkc2NvcGUudWlDb25maWcuY2FsZW5kYXIuZGVmYXVsdFZpZXcgPSAkc2NvcGUuY2FsZW5kYXJWaWV3TmFtZSgpO1xuXG5cdFx0XHQvLyBYWFg6IGxvYWRTY2hlZHVsZVRlbXBsYXRlcyBzZWVtcyB0byBub3QgYmUgdXNlZFxuXG5cdFx0XHQvL3tcblx0XHRcdFx0JHNjb3BlLmxvYWRBdmFpbGFiaWxpdHlUeXBlcygpLnRoZW4oZnVuY3Rpb24oKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0JHNjb3BlLmxvYWRFdmVudFN0YXR1c2VzKCkudGhlbihmdW5jdGlvbigpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0JHNjb3BlLmxvYWRTY2hlZHVsZU9wdGlvbnMoKS50aGVuKGZ1bmN0aW9uKClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0JHNjb3BlLmxvYWRTaXRlT3B0aW9ucygpLnRoZW4oZnVuY3Rpb24oKVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmxvYWREZWZhdWx0U2VsZWN0aW9ucygpO1xuXG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmxvYWRTZWxlY3RlZFNjaGVkdWxlcygpLnRoZW4oZnVuY3Rpb24oKVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdCRzY29wZS5zZXRDYWxlbmRhclJlc291cmNlcygpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuc2V0RXZlbnRTb3VyY2VzKCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdCRzY29wZS5pbml0RXZlbnRzQXV0b1JlZnJlc2goKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmFwcGx5VWlDb25maWcoJHNjb3BlLnVpQ29uZmlnKTtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiLS0gQ2FsZW5kYXIgSW5pdGlhbGl6ZWQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdCRzY29wZS5pbml0aWFsaXplZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0Ly99KTtcblx0XHR9O1xuXG5cblx0XHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBQdWJsaWMgTWV0aG9kc1xuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS9cblxuXHRcdCRzY29wZS5jYWxlbmRhciA9IGZ1bmN0aW9uIGNhbGVuZGFyKClcblx0XHR7XG5cdFx0XHRyZXR1cm4gdWlDYWxlbmRhckNvbmZpZy5jYWxlbmRhcnNbJHNjb3BlLmNhbGVuZGFyTmFtZV07XG5cdFx0fTtcblxuXHRcdCRzY29wZS5pc1NjaGVkdWxpbmdFbmFibGVkID0gZnVuY3Rpb24gaXNTY2hlZHVsaW5nRW5hYmxlZCgpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5pc0luaXRpYWxpemVkID0gZnVuY3Rpb24gaXNJbml0aWFsaXplZCgpXG5cdFx0e1xuXHRcdFx0cmV0dXJuICRzY29wZS5pbml0aWFsaXplZDtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmhhc1NjaGVkdWxlcyA9IGZ1bmN0aW9uIGhhc1NjaGVkdWxlcygpXG5cdFx0e1xuXHRcdFx0cmV0dXJuICRzY29wZS5zY2hlZHVsZXMubGVuZ3RoID4gMDtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmhhc1NpdGVzID0gZnVuY3Rpb24gaGFzU2l0ZXMoKVxuXHRcdHtcblx0XHRcdHJldHVybiAkc2NvcGUuc2l0ZU9wdGlvbnMubGVuZ3RoID4gMDtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmdldFRpbWVJbnRlcnZhbE9wdGlvbnMgPSBmdW5jdGlvbiBnZXRUaW1lSW50ZXJ2YWxPcHRpb25zKClcblx0XHR7XG5cdFx0XHRyZXR1cm4gJHNjb3BlLnRpbWVJbnRlcnZhbE9wdGlvbnM7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5nZXRTY2hlZHVsZU9wdGlvbnMgPSBmdW5jdGlvbiBnZXRTY2hlZHVsZU9wdGlvbnMoKVxuXHRcdHtcblx0XHRcdHJldHVybiAkc2NvcGUuc2NoZWR1bGVPcHRpb25zO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuZ2V0U2l0ZU9wdGlvbnMgPSBmdW5jdGlvbiBnZXRTaXRlT3B0aW9ucygpXG5cdFx0e1xuXHRcdFx0aWYoIWFuZ3VsYXIuaXNEZWZpbmVkKCRzY29wZS5zZWxlY3RlZFNpdGUpIHx8ICRzY29wZS5zZWxlY3RlZFNpdGUgPT09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZFNpdGUgPSAkc2NvcGUuc2l0ZU9wdGlvbnNbMF07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAkc2NvcGUuc2l0ZU9wdGlvbnM7XG5cdFx0fTtcblxuXHRcdCRzY29wZS52aWV3TmFtZSA9IGZ1bmN0aW9uIHZpZXdOYW1lKClcblx0XHR7XG5cdFx0XHR2YXIgdmlld05hbWUgPSAkc2NvcGUuc2NoZWR1bGVWaWV3TmFtZTtcblxuXHRcdFx0aWYoIUp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKHZpZXdOYW1lKSlcblx0XHRcdHtcblx0XHRcdFx0dmlld05hbWUgPSAkc2NvcGUuZGVmYXVsdENhbGVuZGFyVmlldztcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHZpZXdOYW1lO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuY2FsZW5kYXJFdmVudHMgPSBmdW5jdGlvbiBjYWxlbmRhckV2ZW50cyhzdGFydCwgZW5kLCB0aW1lem9uZSwgY2FsbGJhY2spXG5cdFx0e1xuXHRcdFx0Ly8gbG9hZCB0aGUgZXZlbnRzIGZvciBlYWNoIG9mIHRoZSBsb2FkZWQgc2NoZWR1bGVzXG5cdFx0XHR2YXIgcHJvbWlzZV9hcnJheSA9IFtdO1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8ICRzY29wZS5zY2hlZHVsZXMubGVuZ3RoOyBpKyspXG5cdFx0XHR7XG5cdFx0XHRcdHByb21pc2VfYXJyYXkucHVzaChcblx0XHRcdFx0XHQkc2NvcGUubG9hZFNjaGVkdWxlRXZlbnRzKFxuXHRcdFx0XHRcdFx0JHNjb3BlLnNjaGVkdWxlc1tpXS51dWlkLCAkc2NvcGUuc2VsZWN0ZWRTaXRlTmFtZSwgc3RhcnQsIGVuZCkpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBvbmNlIGFsbCB0aGUgZXZlbnRzIGFyZSBsb2FkZWQsIGNvbmNhdCB0aGVtIHRvZ2V0aGVyIGFuZCBjYWxsYmFja1xuXHRcdFx0JHEuYWxsKHByb21pc2VfYXJyYXkpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0c19hcnJheSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCRzY29wZS5ldmVudHMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCByZXN1bHRzX2FycmF5KTtcblxuXHRcdFx0XHRcdHRyeVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCRzY29wZS5ldmVudHMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjYXRjaChlcnIpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly8gdGhlIGNhbGxiYWNrIHRocm93cyBhbiBlcnJvciBvbiBmaXJzdCBsb2FkLCBpZ25vcmVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5zaG93VGltZUludGVydmFscyA9IGZ1bmN0aW9uIHNob3dUaW1lSW50ZXJ2YWxzKClcblx0XHR7XG5cdFx0XHRyZXR1cm4gJHNjb3BlLnZpZXdOYW1lKCkgIT09ICdtb250aCc7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5jaGFuZ2VWaWV3ID0gZnVuY3Rpb24gY2hhbmdlVmlldyh2aWV3KVxuXHRcdHtcblx0XHRcdC8vIGlmIHN3aXRjaGluZyB0byBvciBmcm9tIHJlc291cmNlRGF5IHZpZXcsIG5lZWQgdG8gdXBkYXRlIHNjaGVkdWxlc1xuXHRcdFx0dmFyIHJlbG9hZF9zY2hlZHVsZXMgPSBmYWxzZTtcblx0XHRcdGlmKHZpZXcgPT09ICdyZXNvdXJjZURheScgfHwgJHNjb3BlLnNjaGVkdWxlVmlld05hbWUgPT09ICdyZXNvdXJjZURheScpXG5cdFx0XHR7XG5cdFx0XHRcdHJlbG9hZF9zY2hlZHVsZXMgPSB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBzYXZlIHRoZSBuZXcgdmlldyB0byBnbG9iYWwgc3RhdGUgc28gaXQgZ2V0cyBwaWNrZWQgdXAgaW4gcmVuZGVyaW5nXG5cdFx0XHQkc2NvcGUuc2NoZWR1bGVWaWV3TmFtZSA9IHZpZXc7XG5cblx0XHRcdGlmKHJlbG9hZF9zY2hlZHVsZXMpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5sb2FkU2VsZWN0ZWRTY2hlZHVsZXMoKS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdCRzY29wZS5zZXRDYWxlbmRhclJlc291cmNlcygpO1xuXHRcdFx0XHRcdFx0JHNjb3BlLnVwZGF0ZUNhbGVuZGFyVmlldygpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHQkc2NvcGUudXBkYXRlQ2FsZW5kYXJWaWV3KCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdCRzY29wZS5zaG93TGVnZW5kID0gZnVuY3Rpb24gc2hvd0xlZ2VuZCgpXG5cdFx0e1xuXHRcdFx0Ly8gaWYgYWxyZWFkeSBvcGVuaW5nIGEgZGlhbG9nIG9yIGhhdmUgb25lIG9wZW4sIGlnbm9yZSBhbmQgcmV0dXJuXG5cdFx0XHRpZigkc2NvcGUub3BlbmluZ0RpYWxvZyB8fCAkc2NvcGUuZGlhbG9nKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQkc2NvcGUub3BlbmluZ0RpYWxvZyA9IHRydWU7XG5cblx0XHRcdHZhciBkYXRhID0ge1xuXHRcdFx0XHRldmVudF9zdGF0dXNlczogJHNjb3BlLmV2ZW50U3RhdHVzZXMsXG5cdFx0XHRcdGF2YWlsYWJpbGl0eV90eXBlczogJHNjb3BlLmF2YWlsYWJpbGl0eVR5cGVzXG5cdFx0XHR9O1xuXG5cdFx0XHQkc2NvcGUuZGlhbG9nID0gJHVpYk1vZGFsLm9wZW4oe1xuXHRcdFx0XHRhbmltYXRpb246IGZhbHNlLFxuXHRcdFx0XHRiYWNrZHJvcDogJ3N0YXRpYycsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdTY2hlZHVsZS5MZWdlbmRDb250cm9sbGVyJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdjb2RlL3NjaGVkdWxlL2xlZ2VuZC5odG1sJyxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGRhdGE6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZGF0YSB9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyB3aGVuIHRoZSBkaWFsb2cgY2xvc2VzIGNsZWFyIHRoZSB2YXJpYWJsZVxuXHRcdFx0JHNjb3BlLmRpYWxvZy5jbG9zZWQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdFx0JHNjb3BlLmRpYWxvZyA9IG51bGw7XG5cdFx0XHR9KTtcblxuXHRcdFx0JHNjb3BlLm9wZW5pbmdEaWFsb2cgPSBmYWxzZTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLnJlZmV0Y2hFdmVudHMgPSBmdW5jdGlvbiByZWZldGNoRXZlbnRzKClcblx0XHR7XG5cdFx0XHQkc2NvcGUuY2FsZW5kYXIoKS5mdWxsQ2FsZW5kYXIoJ3JlZmV0Y2hFdmVudHMnKTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmNoYW5nZURhdGUgPSBmdW5jdGlvbiBjaGFuZ2VEYXRlKGRhdGUpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLmNhbGVuZGFyKCkuZnVsbENhbGVuZGFyKCdnb3RvRGF0ZScsIGRhdGUpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuaXNBZ2VuZGFWaWV3ID0gZnVuY3Rpb24gaXNBZ2VuZGFWaWV3KClcblx0XHR7XG5cdFx0XHRyZXR1cm4gKCRzY29wZS52aWV3TmFtZSgpICE9ICdyZXNvdXJjZURheScpXG5cdFx0fTtcblxuXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gUHJpdmF0ZSBtZXRob2RzXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09L1xuXG5cdFx0JHNjb3BlLmdldFNlbGVjdGVkU2NoZWR1bGUgPSBmdW5jdGlvbiBnZXRTZWxlY3RlZFNjaGVkdWxlKHNjaGVkdWxlT3B0aW9ucylcblx0XHR7XG5cdFx0XHQvLyBwcmlvcml0eTogbGFzdCB1c2VkIGZyb20gZ2xvYmFsIHN0YXRlLCB0aGVuIHByZWZlcmVuY2Ugc2V0dGluZyxcblx0XHRcdC8vIHRoZW4gZGVmYXVsdCAoZmlyc3QgaW4gdGhlIGxpc3QpXG5cdFx0XHR2YXIgc2VsZWN0ZWRVdWlkID0gbnVsbDtcblx0XHRcdGlmKCRzY29wZS5zY2hlZHVsZURlZmF1bHQpXG5cdFx0XHR7XG5cdFx0XHRcdHNlbGVjdGVkVXVpZCA9ICRzY29wZS5zY2hlZHVsZURlZmF1bHQ7XG5cdFx0XHR9XG5cblx0XHRcdGlmKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKHNlbGVjdGVkVXVpZCkpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIG9ubHkgY2hvb3NlIGl0IGlmIGl0IGNhbiBiZSBmb3VuZCBpbiB0aGUgb3B0aW9ucyBsaXN0XG5cdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzY2hlZHVsZU9wdGlvbnMubGVuZ3RoOyBpKyspXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZihzZWxlY3RlZFV1aWQgPT09IHNjaGVkdWxlT3B0aW9uc1tpXS51dWlkKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJldHVybiBzY2hlZHVsZU9wdGlvbnNbaV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmKHNjaGVkdWxlT3B0aW9ucy5sZW5ndGggPiAwKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBzZWxlY3QgdGhlIGZpcnN0IHNjaGVkdWxlIGluIHRoZSBsaXN0IGJ5IGRlZmF1bHRcblx0XHRcdFx0cmV0dXJuIHNjaGVkdWxlT3B0aW9uc1swXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5sb2FkU2VsZWN0ZWRTY2hlZHVsZXMgPSBmdW5jdGlvbiBsb2FkU2VsZWN0ZWRTY2hlZHVsZXMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdHZhciBwcm9taXNlQXJyYXkgPSBbXTtcblxuXHRcdFx0aWYoXG5cdFx0XHRcdEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKCRzY29wZS5zZWxlY3RlZFNjaGVkdWxlLnByb3ZpZGVyTm9zKSAmJlxuXHRcdFx0XHRhbmd1bGFyLmlzQXJyYXkoJHNjb3BlLnNlbGVjdGVkU2NoZWR1bGUucHJvdmlkZXJOb3MpXG5cdFx0XHQpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIFRPRE86IHRoaXMgaXMgcmVhbGx5IGdyb3NzIGFuZCBJIGRvbid0IGxpa2UgaXRcblx0XHRcdFx0Ly8gUG90ZW50aWFsbHkgcHV0IHRoaXMgaW4gdGhlIGNhbGVuZGFyQXBpQWRhcHRlclxuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2goJHNjb3BlLnNlbGVjdGVkU2NoZWR1bGUucHJvdmlkZXJOb3MsIGZ1bmN0aW9uKHByb3ZpZGVyTm8pXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRwcm9taXNlQXJyYXkucHVzaCgkc2NvcGUubG9hZFNjaGVkdWxlKHByb3ZpZGVyTm8udG9TdHJpbmcoKSkpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZigkc2NvcGUuc2VsZWN0ZWRTY2hlZHVsZS5wcm92aWRlck5vcy5sZW5ndGggPiAxKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly8gU2V0IHRoZSBjYWxlbmRhciB0byByZXNvdXJjZSBtb2RlLiAgQWxsIG9mIHRoZXNlIHZhbHVlcyBuZWVkIHRvIGJlIHNldC5cblx0XHRcdFx0XHQkc2NvcGUuc2VsZWN0ZWRSZXNvdXJjZXMgPSAkc2NvcGUuYnVpbGRTZWxlY3RlZFJlc291cmNlcygkc2NvcGUuc2VsZWN0ZWRTY2hlZHVsZS5wcm92aWRlck5vcyk7XG5cdFx0XHRcdFx0JHNjb3BlLnVpQ29uZmlnLmNhbGVuZGFyLnJlc291cmNlcyA9ICRzY29wZS5zZWxlY3RlZFJlc291cmNlcztcblx0XHRcdFx0XHQkc2NvcGUudWlDb25maWcuY2FsZW5kYXIuZGVmYXVsdFZpZXcgPSBcInJlc291cmNlRGF5XCI7XG5cblx0XHRcdFx0XHQvLyBzYXZlIHRoZSBuZXcgdmlldyB0byBnbG9iYWwgc3RhdGUgc28gaXQgZ2V0cyBwaWNrZWQgdXAgaW4gcmVuZGVyaW5nXG5cdFx0XHRcdFx0JHNjb3BlLnNjaGVkdWxlVmlld05hbWUgPSAncmVzb3VyY2VEYXknO1xuXHRcdFx0XHRcdCRzY29wZS51cGRhdGVDYWxlbmRhclZpZXcoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQvLyBSZXNldCBldmVyeXRoaW5nIHRvIHNpbmdsZS1wcm92aWRlciB2aWV3IG1vZGVcblx0XHRcdFx0XHQkc2NvcGUudWlDb25maWcuY2FsZW5kYXIuZGVmYXVsdFZpZXcgPSBcImFnZW5kYVdlZWtcIjtcblx0XHRcdFx0XHQkc2NvcGUuc2NoZWR1bGVWaWV3TmFtZSA9ICdhZ2VuZGFXZWVrJztcblx0XHRcdFx0XHQkc2NvcGUudWlDb25maWcuY2FsZW5kYXIucmVzb3VyY2VzID0gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkc2NvcGUuYXBwbHlVaUNvbmZpZygkc2NvcGUudWlDb25maWcpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZihcblx0XHRcdFx0JHNjb3BlLnZpZXdOYW1lKCkgIT09ICdyZXNvdXJjZURheScgJiZcblx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkU2NoZWR1bGUgIT09IG51bGxcblx0XHRcdClcblx0XHRcdHtcblx0XHRcdFx0cHJvbWlzZUFycmF5LnB1c2goXG5cdFx0XHRcdFx0JHNjb3BlLmxvYWRTY2hlZHVsZSgkc2NvcGUuc2VsZWN0ZWRTY2hlZHVsZS51dWlkKSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuc2VsZWN0ZWRSZXNvdXJjZXMsIGZ1bmN0aW9uKHNlbGVjdGVkKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cHJvbWlzZUFycmF5LnB1c2goJHNjb3BlLmxvYWRTY2hlZHVsZShzZWxlY3RlZC51dWlkKSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29wIHRocm91Z2ggdGhlIHNjaGVkdWxlcyBhZGRlZCBhYm92ZSBhbmQgYWRkIHRoZW0gdG8gdGhlIHNjaGVkdWxlIGxpc3QuXG5cdFx0XHQkcS5hbGwocHJvbWlzZUFycmF5KS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKHJlc3VsdHNBcnJheSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCRzY29wZS5zY2hlZHVsZXMgPSBbXTtcblx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgcmVzdWx0c0FycmF5Lmxlbmd0aDsgaSsrKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdCRzY29wZS5zY2hlZHVsZXNbaV0gPSByZXN1bHRzQXJyYXlbaV0uZGF0YTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzQXJyYXkpO1xuXHRcdFx0XHR9LCBmdW5jdGlvbiBlcnJvcihlcnJvcnMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JzJyk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmxvYWRTY2hlZHVsZSA9IGZ1bmN0aW9uIGxvYWRTY2hlZHVsZShwcm92aWRlcklkKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdC8vIFRPRE86IGZpbGwgdXAgYXZhaWxhYmlsaXRpZXMgYW5kIHJlbGF0aW9ucywgb3IgZmlndXJlIG91dCBob3cgdG8gc2hvdyB0aGF0IGluZm8gd2l0aG91dCB0aGVtXG5cdFx0XHR2YXIgc2NoZWR1bGUgPSB7XG5cdFx0XHRcdHV1aWQ6IHByb3ZpZGVySWQsXG5cdFx0XHRcdGF2YWlsYWJpbGl0aWVzOiBbXSwgLy8gVE9ETzogZmlndXJlIG91dCBpZiB0aGVzZSBoYXZlIGEgSnVubyBlcXVpdmFsZW50LCBJIGRvbid0IHRoaW5rXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBUT0RPOiB0aGV5IGRvLiAgVGhleSBhcmUgdGhpbmdzIGxpa2UgaG9saWRheXMgYW5kIHZhY2F0aW9uIGRheXNcblx0XHRcdFx0cmVsYXRpb25zOiBbXSxcblx0XHRcdFx0ZXZlbnRzOiBbXVxuXHRcdFx0fTtcblxuXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSh7ZGF0YTogc2NoZWR1bGV9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdCRzY29wZS51cGRhdGVDYWxlbmRhclZpZXcgPSBmdW5jdGlvbiB1cGRhdGVDYWxlbmRhclZpZXcoKVxuXHRcdHtcblx0XHRcdCRzY29wZS51aUNvbmZpZy5jYWxlbmRhci5kZWZhdWx0VmlldyA9ICRzY29wZS5jYWxlbmRhclZpZXdOYW1lKCk7XG5cdFx0XHQkc2NvcGUuYXBwbHlVaUNvbmZpZygkc2NvcGUudWlDb25maWcpO1xuXHRcdH07XG5cblx0XHQvLyBUaGlzIGdldHMgdGhlIHZpZXcgbmFtZSwgYnV0IGlmIGl0J3MgcmVzb3VyY2VEYXksIGl0IHdpbGwgZ2V0IGFnZW5kYURheS5cblx0XHQvLyBUT0RPIE5vdCBzdXJlIHdoeSB0aGlzIHdvcmtzIHRoaXMgd2F5LiAgTWF5YmUgaXQgdXNlcyBpdCB0byBnZXQgYSBkYXkgb2YgZXZlbnRzIGZvciBlYWNoXG5cdFx0Ly8gICAgICByZXNvdXJjZSBpbiB0aGUgcmVzb3VyY2UgbGlzdD9cblx0XHQkc2NvcGUuY2FsZW5kYXJWaWV3TmFtZSA9IGZ1bmN0aW9uIGNhbGVuZGFyVmlld05hbWUoKVxuXHRcdHtcblx0XHRcdHZhciB2aWV3ID0gJHNjb3BlLnZpZXdOYW1lKCk7XG5cdFx0XHRpZih2aWV3ID09ICdyZXNvdXJjZURheScpXG5cdFx0XHR7XG5cdFx0XHRcdHZpZXcgPSAnYWdlbmRhRGF5Jztcblx0XHRcdH1cblx0XHRcdHJldHVybiB2aWV3O1xuXHRcdH07XG5cblx0XHQkc2NvcGUuc2V0Q2FsZW5kYXJMb2FkaW5nID0gZnVuY3Rpb24gc2V0Q2FsZW5kYXJMb2FkaW5nKGlzTG9hZGluZylcblx0XHR7XG5cdFx0XHQkc2NvcGUuY2FsZW5kYXJMb2FkaW5nID0gaXNMb2FkaW5nO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuZ2V0TG9hZGVkU2NoZWR1bGUgPSBmdW5jdGlvbiBnZXRMb2FkZWRTY2hlZHVsZSh1dWlkKVxuXHRcdHtcblx0XHRcdHZhciBzY2hlZHVsZSA9IG51bGw7XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnNjaGVkdWxlcy5sZW5ndGg7IGkrKylcblx0XHRcdHtcblx0XHRcdFx0aWYoJHNjb3BlLnNjaGVkdWxlc1tpXS51dWlkID09PSB1dWlkKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c2NoZWR1bGUgPSAkc2NvcGUuc2NoZWR1bGVzW2ldO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gc2NoZWR1bGU7XG5cdFx0fTtcblxuXHRcdC8vIFRPRE86IGNoYW5nZSB0aGlzLCBwZXJoYXBzPyAgSXQgaXMgZ2V0dGluZyB0aGUgcmVzb3VyY2UgZGV0YWlscyBmcm9tIHRoZSBncm91cHNcblx0XHQkc2NvcGUuYnVpbGRTZWxlY3RlZFJlc291cmNlcyA9IGZ1bmN0aW9uIGJ1aWxkU2VsZWN0ZWRSZXNvdXJjZXMocHJvdmlkZXJOb3MpXG5cdFx0e1xuXHRcdFx0dmFyIHNlbGVjdGVkUmVzb3VyY2VzID0gW107XG5cblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBwcm92aWRlck5vcy5sZW5ndGg7IGkrKylcblx0XHRcdHtcblx0XHRcdFx0c2VsZWN0ZWRSZXNvdXJjZXMucHVzaCgkc2NvcGUucmVzb3VyY2VPcHRpb25IYXNoW3Byb3ZpZGVyTm9zW2ldXSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBzZWxlY3RlZFJlc291cmNlcztcblx0XHR9O1xuXG5cdFx0JHNjb3BlLnNldENhbGVuZGFyUmVzb3VyY2VzID0gZnVuY3Rpb24gc2V0Q2FsZW5kYXJSZXNvdXJjZXMoKVxuXHRcdHtcblx0XHRcdGlmKCRzY29wZS52aWV3TmFtZSgpID09PSAncmVzb3VyY2VEYXknKVxuXHRcdFx0e1xuXHRcdFx0XHQkc2NvcGUudWlDb25maWcuY2FsZW5kYXIucmVzb3VyY2VzID0gJHNjb3BlLnNlbGVjdGVkUmVzb3VyY2VzO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHQkc2NvcGUudWlDb25maWcuY2FsZW5kYXIucmVzb3VyY2VzID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdCRzY29wZS5hcHBseVVpQ29uZmlnKCRzY29wZS51aUNvbmZpZyk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5zZXRFdmVudFNvdXJjZXMgPSBmdW5jdGlvbiBzZXRFdmVudFNvdXJjZXMoKVxuXHRcdHtcblx0XHRcdCRzY29wZS5ldmVudFNvdXJjZXMucHVzaCgkc2NvcGUuY2FsZW5kYXJFdmVudHMpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUudXBkYXRlRXZlbnQgPSBmdW5jdGlvbiB1cGRhdGVFdmVudChjYWxFdmVudClcblx0XHR7XG5cdFx0XHQkc2NvcGUuY2FsZW5kYXIoKS5mdWxsQ2FsZW5kYXIoJ3VwZGF0ZUV2ZW50JywgY2FsRXZlbnQpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUudGltZUludGVydmFsTWludXRlcyA9IGZ1bmN0aW9uIHRpbWVJbnRlcnZhbE1pbnV0ZXMoKVxuXHRcdHtcblx0XHRcdHJldHVybiBwYXJzZUludCgkc2NvcGUuc2VsZWN0ZWRUaW1lSW50ZXJ2YWwuc3BsaXQoXCI6XCIpWzFdKTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmxvYWRBdmFpbGFiaWxpdHlUeXBlcyA9IGZ1bmN0aW9uIGxvYWRBdmFpbGFiaWxpdHlUeXBlcygpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0XHRcdHZhciBhdmFpbGFiaWxpdHlUeXBlcyA9IHt9O1xuXG5cdFx0XHRzY2hlZHVsZVNlcnZpY2UuZ2V0U2NoZWR1bGVUZW1wbGF0ZUNvZGVzKCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dmFyIHJlc3VsdCA9IHJlc3VsdHNbaV07XG5cblx0XHRcdFx0XHRcdGF2YWlsYWJpbGl0eVR5cGVzW3Jlc3VsdC5jb2RlXSA9IGFuZ3VsYXIuY29weShyZXN1bHQpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdCRzY29wZS5hdmFpbGFiaWxpdHlUeXBlcyA9IGF2YWlsYWJpbGl0eVR5cGVzO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoYXZhaWxhYmlsaXR5VHlwZXMpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5sb2FkRGVmYXVsdFNlbGVjdGlvbnMgPSBmdW5jdGlvbiBsb2FkRGVmYXVsdFNlbGVjdGlvbnMoKVxuXHRcdHtcblx0XHRcdCRzY29wZS5zZWxlY3RlZFNjaGVkdWxlID0gJHNjb3BlLmdldFNlbGVjdGVkU2NoZWR1bGUoJHNjb3BlLnNjaGVkdWxlT3B0aW9ucyk7XG5cblx0XHRcdC8vJHNjb3BlLnNlbGVjdGVkUmVzb3VyY2VzID0gJHNjb3BlLmdldFNlbGVjdGVkUmVzb3VyY2VzKCRzY29wZS5yZXNvdXJjZU9wdGlvbnMpO1xuXG5cdFx0XHQkc2NvcGUuc2VsZWN0ZWRUaW1lSW50ZXJ2YWwgPSAkc2NvcGUuZ2V0U2VsZWN0ZWRUaW1lSW50ZXJ2YWwoXG5cdFx0XHRcdCRzY29wZS50aW1lSW50ZXJ2YWxPcHRpb25zLCAkc2NvcGUuZGVmYXVsdFRpbWVJbnRlcnZhbCk7XG5cdFx0XHQkc2NvcGUudWlDb25maWcuY2FsZW5kYXIuc2xvdER1cmF0aW9uID0gJHNjb3BlLnNlbGVjdGVkVGltZUludGVydmFsO1xuXHRcdFx0JHNjb3BlLnVpQ29uZmlnLmNhbGVuZGFyLnNsb3RMYWJlbEludGVydmFsID0gJHNjb3BlLnNlbGVjdGVkVGltZUludGVydmFsO1xuXG5cdFx0XHQkc2NvcGUudWlDb25maWcuY2FsZW5kYXIubWluVGltZSA9ICRzY29wZS5nZXRTY2hlZHVsZU1pblRpbWUoKTtcblx0XHRcdCRzY29wZS51aUNvbmZpZy5jYWxlbmRhci5tYXhUaW1lID0gJHNjb3BlLmdldFNjaGVkdWxlTWF4VGltZSgpO1xuXG5cdFx0XHQvLyBzY3JvbGwgc28gdGhhdCBvbmUgaG91ciBhZ28gaXMgdGhlIHRvcCBvZiB0aGUgY2FsZW5kYXJcblx0XHRcdCRzY29wZS51aUNvbmZpZy5jYWxlbmRhci5zY3JvbGxUaW1lID0gbW9tZW50KCkuc3VidHJhY3QoMSwgJ2hvdXJzJykuZm9ybWF0KCdISDptbTpzcycpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuZ2V0U2VsZWN0ZWRUaW1lSW50ZXJ2YWwgPSBmdW5jdGlvbiBnZXRTZWxlY3RlZFRpbWVJbnRlcnZhbChcblx0XHRcdHRpbWVJbnRlcnZhbE9wdGlvbnMsIGRlZmF1bHRUaW1lSW50ZXJ2YWwpXG5cdFx0e1xuXHRcdFx0Ly8gcHJpb3JpdHk6IGxhc3QgdXNlZCBmcm9tIGdsb2JhbCBzdGF0ZSwgdGhlbiBwcmVmZXJlbmNlIHNldHRpbmcsXG5cdFx0XHQvLyB0aGVuIGRlZmF1bHRcblxuXHRcdFx0dmFyIHNlbGVjdGVkVGltZUludGVydmFsID0gbnVsbDtcblxuXHRcdFx0dmFyIHRpbWVJbnRlcnZhbCA9ICRzY29wZS5zY2hlZHVsZVRpbWVJbnRlcnZhbDtcblx0XHRcdGlmKHRpbWVJbnRlcnZhbCA9PT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0dGltZUludGVydmFsID0gJHNjb3BlLnNjaGVkdWxlVGltZUludGVydmFsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZihKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyh0aW1lSW50ZXJ2YWwpKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBvbmx5IGNob29zZSBpdCBpZiBpdCBjYW4gYmUgZm91bmQgaW4gdGhlIG9wdGlvbnMgbGlzdFxuXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGltZUludGVydmFsT3B0aW9ucy5sZW5ndGg7IGkrKylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKHRpbWVJbnRlcnZhbCA9PT0gdGltZUludGVydmFsT3B0aW9uc1tpXSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRzZWxlY3RlZFRpbWVJbnRlcnZhbCA9IHRpbWVJbnRlcnZhbE9wdGlvbnNbaV07XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYoc2VsZWN0ZWRUaW1lSW50ZXJ2YWwgPT09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBkZWZhdWx0VGltZUludGVydmFsO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gc2VsZWN0ZWRUaW1lSW50ZXJ2YWw7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5nZXRTY2hlZHVsZU1pblRpbWUgPSBmdW5jdGlvbiBnZXRTY2hlZHVsZU1pblRpbWUoKVxuXHRcdHtcblx0XHRcdC8vIHJlc3RyaWN0IGRheSB2aWV3IGlmIHVzZXIgcHJlZmVyZW5jZXMgYXJlIHNldFxuXG5cdFx0XHQvKlx0XHRcdFx0dmFyIG1pbl90aW1lID0gc2VydmljZS5nZXRfZ2xvYmFsX3ByZWZlcmVuY2Vfc2V0dGluZygnc2NoZWR1bGVfbWluX3RpbWUnKTtcblx0XHRcdFx0XHRcdGlmICh1dGlsLmV4aXN0cyhtaW5fdGltZSkpIHtcblx0XHRcdFx0XHRcdFx0Ly8gZm9ybWF0OiBISDI0Ok1NOlNTIC0gZXhwZWN0IEhIMjQ6TU0gaW4gcHJlZmVyZW5jZVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gbWluX3RpbWUgKyBcIjowMFwiO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gbnVsbDsqL1xuXG5cdFx0XHRyZXR1cm4gXCIwODowMFwiO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuZ2V0U2NoZWR1bGVNYXhUaW1lID0gZnVuY3Rpb24gZ2V0U2NoZWR1bGVNYXhUaW1lKClcblx0XHR7XG5cdFx0XHQvKlx0XHRcdFx0dmFyIG1heF90aW1lID0gc2VydmljZS5nZXRfZ2xvYmFsX3ByZWZlcmVuY2Vfc2V0dGluZygnc2NoZWR1bGVfbWF4X3RpbWUnKTtcblx0XHRcdFx0XHRcdFx0aWYodXRpbC5leGlzdHMobWF4X3RpbWUpKVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gZm9ybWF0OiBISDI0Ok1NOlNTIC0gZXhwZWN0IEhIMjQ6TU0gaW4gcHJlZmVyZW5jZVxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBtYXhfdGltZSArIFwiOjAwXCI7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gbnVsbDsqL1xuXHRcdFx0cmV0dXJuIFwiMjA6MDBcIjtcblx0XHR9O1xuXG5cdFx0Ly8gTG9hZHMgdGhlIGxpc3Qgb2YgZXZlbnQgc3RhdHVzZXMgZnJvbSB0aGUgQVBJIChpLmUuIGFwcG9pbnRtZW50IHN0YXR1c2VzKS4gIFNldHMgdGhlIGZvbGxvd2luZzpcblx0XHQvLyAkc2NvcGUuZXZlbnRfc3RhdHVzZXMgLSBhIHRhYmxlIHRvIGxvb2sgdXAgYSBzdGF0dXMgYnkgdXVpZC5cblx0XHQvLyAkc2NvcGUucm90YXRlX3N0YXR1c2VzIC0gYW4gYXJyYXkgdG8gZGVzY3JpYmUgaG93IHRvIGN5Y2xlIHRocm91Z2ggc3RhdHVzZXMuXG5cdFx0JHNjb3BlLmxvYWRFdmVudFN0YXR1c2VzID0gZnVuY3Rpb24gbG9hZEV2ZW50U3RhdHVzZXMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdCRzY29wZS5ldmVudFN0YXR1c2VzID0ge307XG5cdFx0XHQkc2NvcGUucm90YXRlU3RhdHVzZXMgPSBbXTtcblxuXHRcdFx0JHNjb3BlLnNjaGVkdWxlQXBpLmdldENhbGVuZGFyQXBwb2ludG1lbnRTdGF0dXNlcygpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmF3UmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciByZXN1bHRzID0gcmF3UmVzdWx0cy5kYXRhLmJvZHk7XG5cblx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgcmVzdWx0cy5sZW5ndGg7IGkrKylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR2YXIgcmVzdWx0ID0gcmVzdWx0c1tpXTtcblx0XHRcdFx0XHRcdCRzY29wZS5ldmVudFN0YXR1c2VzW3Jlc3VsdC5kaXNwbGF5TGV0dGVyXSA9IHJlc3VsdDtcblx0XHRcdFx0XHRcdGlmKHJlc3VsdC5yb3RhdGVzKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHQkc2NvcGUucm90YXRlU3RhdHVzZXMucHVzaChyZXN1bHQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmxvYWRTY2hlZHVsZUV2ZW50cyA9IGZ1bmN0aW9uIGxvYWRTY2hlZHVsZUV2ZW50cyhwcm92aWRlcklkLCBzaXRlTmFtZSwgc3RhcnQsIGVuZClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQvLyBHZXQgZGF0ZSBzdHJpbmdzIHRvIHBhc3MgdG8gdGhlIGJhY2tlbmQuICBUaGUgY2FsZW5kYXIgcHJvdmlkZXMgZGF0ZXRpbWUgdGhhdCBkZXNjcmliZVxuXHRcdFx0Ly8gYW5kIGluY2x1c2l2ZSBzdGFydCB0aW1lIGFuZCBleGNsdXNpdmUgZW5kIHRpbWUsIHNvIG9uZSBzZWNvbmQgaXMgcmVtb3ZlZCBmcm9tXG5cdFx0XHQvLyB0aGUgZW5kIHRpbWUgdG8gY29udmVydCB0byB0aGUgY29ycmVjdCBkYXRlLlxuXHRcdFx0dmFyIHN0YXJ0RGF0ZVN0cmluZyA9IHN0YXJ0LmZvcm1hdChKdW5vLkNvbW1vbi5VdGlsLnNldHRpbmdzLmRhdGVfZm9ybWF0KTtcblx0XHRcdHZhciBlbmREYXRlU3RyaW5nID0gZW5kLnN1YnRyYWN0KDEsICdzZWNvbmRzJykuZm9ybWF0KEp1bm8uQ29tbW9uLlV0aWwuc2V0dGluZ3MuZGF0ZV9mb3JtYXQpO1xuXG5cdFx0XHQkc2NvcGUuc2NoZWR1bGVBcGkuZ2V0Q2FsZW5kYXJFdmVudHMoXG5cdFx0XHRcdHByb3ZpZGVySWQsXG5cdFx0XHRcdHN0YXJ0RGF0ZVN0cmluZyxcblx0XHRcdFx0ZW5kRGF0ZVN0cmluZyxcblx0XHRcdFx0c2l0ZU5hbWVcblx0XHRcdCkudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24ocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhLmJvZHkpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbihyZXN1bHRzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KHJlc3VsdHMuZGF0YS5ib2R5KTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5zYXZlRXZlbnQgPSBmdW5jdGlvbiBzYXZlRXZlbnQoZWRpdE1vZGUsIGNhbGVuZGFyQXBwb2ludG1lbnQpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0aWYoZWRpdE1vZGUpXG5cdFx0XHR7XG5cdFx0XHRcdHRoaXMuYXBwb2ludG1lbnRBcGkudXBkYXRlQXBwb2ludG1lbnQoY2FsZW5kYXJBcHBvaW50bWVudCkudGhlbihcblx0XHRcdFx0XHRmdW5jdGlvbihyZXN1bHQpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQuZGF0YSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbihyZXN1bHQpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KHJlc3VsdC5kYXRhKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5hcHBvaW50bWVudEFwaS5hZGRBcHBvaW50bWVudChjYWxlbmRhckFwcG9pbnRtZW50KS50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uKHJlc3VsdClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdC5kYXRhKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uIChyZXN1bHQpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KHJlc3VsdC5kYXRhKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5tb3ZlRXZlbnQgPSBmdW5jdGlvbiBtb3ZlRXZlbnQoYXBwb2ludG1lbnQsIGRlbHRhLCBhZGp1c3RTdGFydFRpbWUpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0dmFyIHN0YXJ0TW9tZW50ID0gSnVuby5Db21tb24uVXRpbC5nZXREYXRldGltZU5vVGltZXpvbmVNb21lbnQoYXBwb2ludG1lbnQuc3RhcnRUaW1lKTtcblx0XHRcdHZhciBlbmRNb21lbnQgPSBKdW5vLkNvbW1vbi5VdGlsLmdldERhdGV0aW1lTm9UaW1lem9uZU1vbWVudChhcHBvaW50bWVudC5lbmRUaW1lKTtcblxuXHRcdFx0dmFyIG1vdmVkQXBwb2ludG1lbnQgPSBhbmd1bGFyLmNvcHkoYXBwb2ludG1lbnQpO1xuXG5cdFx0XHRpZihhZGp1c3RTdGFydFRpbWUpXG5cdFx0XHR7XG5cdFx0XHRcdG1vdmVkQXBwb2ludG1lbnQuc3RhcnRUaW1lID0gSnVuby5Db21tb24uVXRpbC5mb3JtYXRNb21lbnREYXRlVGltZU5vVGltZXpvbmUoc3RhcnRNb21lbnQuYWRkKGRlbHRhLmFzTWludXRlcygpLCAnbWludXRlcycpKTtcblx0XHRcdH1cblx0XHRcdG1vdmVkQXBwb2ludG1lbnQuZW5kVGltZSA9IEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0TW9tZW50RGF0ZVRpbWVOb1RpbWV6b25lKGVuZE1vbWVudC5hZGQoZGVsdGEuYXNNaW51dGVzKCksICdtaW51dGVzJykpO1xuXG5cdFx0XHQkc2NvcGUuc2F2ZUV2ZW50KHRydWUsIG1vdmVkQXBwb2ludG1lbnQpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoZGF0YS5ib2R5KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhkYXRhKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KGRhdGEuYm9keSk7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdC8vIFJlYWQgdGhlIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIHJlc3VsdHMgYW5kIHJldHVybiBhIGNhbGVuZGFyLWNvbXBhdGlibGUgb2JqZWN0LlxuXHRcdCRzY29wZS5wcm9jZXNzU2F2ZVJlc3VsdHMgPSBmdW5jdGlvbiBwcm9jZXNzU2F2ZVJlc3VsdHMocmVzdWx0cywgZGlzcGxheUVycm9ycylcblx0XHR7XG5cdFx0XHR2YXIgc3RhdHVzID0gKHJlc3VsdHMgfHwge30pLnN0YXR1cztcblxuXHRcdFx0aWYoc3RhdHVzID09ICdTVUNDRVNTJylcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBlcnJvck1lc3NhZ2UgPSAoKHJlc3VsdHMgfHwge30pLmVycm9yIHx8IHt9KS5tZXNzYWdlO1xuXHRcdFx0dmFyIHZhbGlkYXRpb25FcnJvckFycmF5ID0gKChyZXN1bHRzIHx8IHt9KS5lcnJvciB8fCB7fSkudmFsaWRhdGlvbkVycm9ycztcblxuXHRcdFx0aWYoQXJyYXkuaXNBcnJheSh2YWxpZGF0aW9uRXJyb3JBcnJheSkpXG5cdFx0XHR7XG5cdFx0XHRcdGRpc3BsYXlFcnJvcnMuYWRkX3N0YW5kYXJkX2Vycm9yKGVycm9yTWVzc2FnZSk7XG5cdFx0XHRcdC8vZm9yKHZhciBlcnJvciBpbiB2YWxpZGF0aW9uRXJyb3JBcnJheSlcblx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHZhbGlkYXRpb25FcnJvckFycmF5Lmxlbmd0aDsgaSsrKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIGVycm9yID0gdmFsaWRhdGlvbkVycm9yQXJyYXlbaV07XG5cdFx0XHRcdFx0ZGlzcGxheUVycm9ycy5hZGRfZmllbGRfZXJyb3IoZXJyb3IucGF0aCwgZXJyb3IubWVzc2FnZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0JHNjb3BlLmRlbGV0ZUV2ZW50ID0gZnVuY3Rpb24gZGVsZXRlRXZlbnQoYXBwb2ludG1lbnRObylcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQkc2NvcGUuYXBwb2ludG1lbnRBcGkuZGVsZXRlQXBwb2ludG1lbnQoYXBwb2ludG1lbnRObykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24ocmVzdWx0KVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQuZGF0YSk7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24ocmVzdWx0KVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KHJlc3VsdC5kYXRhKTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5vcGVuQ3JlYXRlSW52b2ljZSA9IGZ1bmN0aW9uIG9wZW5DcmVhdGVJbnZvaWNlKFxuXHRcdFx0ZXZlbnRfdXVpZCwgc2NoZWR1bGVfdXVpZCwgZGVtb2dyYXBoaWNzX3BhdGllbnRfdXVpZClcblx0XHR7XG5cdFx0XHR2YXIgc2NoZWR1bGUgPVxuXHRcdFx0XHQkc2NvcGUuZ2V0X2xvYWRlZF9zY2hlZHVsZShzY2hlZHVsZV91dWlkKTtcblxuXHRcdFx0dmFyIHVybCA9ICRzY29wZS5jYWxlbmRhcl9hcGlfYWRhcHRlci5nZXRfY3JlYXRlX2ludm9pY2VfdXJsKGV2ZW50X3V1aWQsXG5cdFx0XHRcdHNjaGVkdWxlLmRlbW9ncmFwaGljc19wcmFjdGl0aW9uZXJfdXVpZCwgZGVtb2dyYXBoaWNzX3BhdGllbnRfdXVpZCk7XG5cblx0XHRcdHdpbmRvdy53aW5kb3dfc2NvcGUgPSAkc2NvcGU7XG5cdFx0XHQkd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJyk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5nZXRJY29uUGF0aCA9IGZ1bmN0aW9uIGdldEljb25QYXRoKGljb24sIHN0YXR1c01vZGlmaWVyKVxuXHRcdHtcblx0XHRcdGlmKCFKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhpY29uKSlcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBtb2RpZmllclN0cmluZyA9IFwiXCI7XG5cblx0XHRcdGlmKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKHN0YXR1c01vZGlmaWVyKSlcblx0XHRcdHtcblx0XHRcdFx0bW9kaWZpZXJTdHJpbmcgPSBzdGF0dXNNb2RpZmllcjtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIFwiLi4vaW1hZ2VzL1wiICsgbW9kaWZpZXJTdHJpbmcgKyBpY29uO1xuXHRcdH07XG5cblx0XHQkc2NvcGUucm90YXRlRXZlbnRTdGF0dXMgPSBmdW5jdGlvbiByb3RhdGVFdmVudFN0YXR1cyhjYWxFdmVudClcblx0XHR7XG5cdFx0XHQkc2NvcGUuc2V0Q2FsZW5kYXJMb2FkaW5nKHRydWUpO1xuXG5cdFx0XHR2YXIgYXBwb2ludG1lbnRObyA9IGNhbEV2ZW50LmRhdGEuYXBwb2ludG1lbnRObztcblxuXHRcdFx0JHNjb3BlLmFwcG9pbnRtZW50QXBpLnNldE5leHRTdGF0dXMoYXBwb2ludG1lbnRObykudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciBuZXdTdGF0dXMgPSByZXNwb25zZS5kYXRhLmJvZHk7XG5cblx0XHRcdFx0XHRjYWxFdmVudC5jb2xvciA9ICRzY29wZS5ldmVudFN0YXR1c2VzW25ld1N0YXR1c10uY29sb3I7XG5cdFx0XHRcdFx0Y2FsRXZlbnQuZGF0YS5ldmVudFN0YXR1c0NvZGUgPSBuZXdTdGF0dXM7XG5cblx0XHRcdFx0XHQkc2NvcGUudXBkYXRlRXZlbnQoY2FsRXZlbnQpO1xuXG5cdFx0XHRcdFx0JHNjb3BlLnNldENhbGVuZGFyTG9hZGluZyhmYWxzZSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIGZhaWx1cmUocmVzcG9uc2UpXG5cdFx0XHRcdHtcblxuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuZ2V0QmlsbGluZ0xpbmsgPSBmdW5jdGlvbiBnZXRCaWxsaW5nTGluayhjYWxFdmVudClcblx0XHR7XG5cdFx0XHR2YXIgc3RhcnRNb21lbnQgPSBKdW5vLkNvbW1vbi5VdGlsLmdldERhdGV0aW1lTm9UaW1lem9uZU1vbWVudChjYWxFdmVudC5kYXRhLnN0YXJ0VGltZSk7XG5cblx0XHRcdHZhciBhcHBvaW50bWVudERhdGUgPSBKdW5vLkNvbW1vbi5VdGlsLmZvcm1hdE1vbWVudERhdGUoc3RhcnRNb21lbnQpO1xuXHRcdFx0dmFyIHN0YXJ0VGltZSA9IEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0TW9tZW50VGltZShzdGFydE1vbWVudCk7XG5cblx0XHRcdHZhciBwcm92aWRlck5vID0gY2FsRXZlbnQucmVzb3VyY2VJZDtcblxuXHRcdFx0dmFyIHJlZmVycmFsTm9QYXJhbWV0ZXIgPSBcIlwiO1xuXHRcdFx0aWYoY2FsRXZlbnQuZGF0YS5iaWxsaW5nUmRvaGlwKVxuXHRcdFx0e1xuXHRcdFx0XHRyZWZlcnJhbE5vUGFyYW1ldGVyID0gXCImcmVmZXJyYWxfbm9fMT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChjYWxFdmVudC5kYXRhLmJpbGxpbmdSZG9oaXApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gXCIuLi9iaWxsaW5nLmRvXCIgK1xuXHRcdFx0XHRcIj9iaWxsUmVnaW9uPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGNhbEV2ZW50LmRhdGEuYmlsbGluZ1JlZ2lvbikgK1xuXHRcdFx0XHRcIiZiaWxsRm9ybT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChjYWxFdmVudC5kYXRhLmJpbGxpbmdGb3JtKSArXG5cdFx0XHRcdFwiJmhvdGNsaWNrPVwiICtcblx0XHRcdFx0XCImYXBwb2ludG1lbnRfbm89XCIgKyBlbmNvZGVVUklDb21wb25lbnQoY2FsRXZlbnQuZGF0YS5hcHBvaW50bWVudE5vKSArXG5cdFx0XHRcdFwiJmRlbW9ncmFwaGljX25hbWU9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoY2FsRXZlbnQuZGF0YS5kZW1vZ3JhcGhpY05hbWUpICtcblx0XHRcdFx0XCImc3RhdHVzPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGNhbEV2ZW50LmRhdGEuZXZlbnRTdGF0dXNDb2RlKSArXG5cdFx0XHRcdFwiJmRlbW9ncmFwaGljX25vPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGNhbEV2ZW50LmRhdGEuZGVtb2dyYXBoaWNObykgK1xuXHRcdFx0XHRcIiZwcm92aWRlcnZpZXc9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocHJvdmlkZXJObykgK1xuXHRcdFx0XHRcIiZ1c2VyX25vPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGNhbEV2ZW50LmRhdGEudXNlclByb3ZpZGVyTm8pICtcblx0XHRcdFx0XCImYXBwdFByb3ZpZGVyX25vPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHByb3ZpZGVyTm8pICtcblx0XHRcdFx0XCImYXBwb2ludG1lbnRfZGF0ZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChhcHBvaW50bWVudERhdGUpICtcblx0XHRcdFx0XCImc3RhcnRfdGltZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChzdGFydFRpbWUpICtcblx0XHRcdFx0XCImYk5ld0Zvcm09MVwiICsgcmVmZXJyYWxOb1BhcmFtZXRlcjtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmdldEVuY291bnRlckxpbmsgPSBmdW5jdGlvbiBnZXRFbmNvdW50ZXJMaW5rKGNhbEV2ZW50KVxuXHRcdHtcblx0XHRcdC8vIFhYWDogUGVyaGFwcyBsaW5rIHRvIHRoZSBuZXcgZW5jb3VudGVyIHBhZ2U/ICBQdXQgaW4gYW4gb3B0aW9uIHRvIGNob29zZSBuZXcgb3Igb2xkLlxuXHRcdFx0dmFyIHByb3ZpZGVyTm8gPSBjYWxFdmVudC5yZXNvdXJjZUlkO1xuXG5cdFx0XHR2YXIgc3RhcnRNb21lbnQgPSBKdW5vLkNvbW1vbi5VdGlsLmdldERhdGV0aW1lTm9UaW1lem9uZU1vbWVudChjYWxFdmVudC5kYXRhLnN0YXJ0VGltZSk7XG5cblx0XHRcdHZhciBhcHBvaW50bWVudERhdGUgPSBKdW5vLkNvbW1vbi5VdGlsLmZvcm1hdE1vbWVudERhdGUoc3RhcnRNb21lbnQpO1xuXHRcdFx0dmFyIHN0YXJ0VGltZSA9IEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0TW9tZW50VGltZShzdGFydE1vbWVudCk7XG5cblx0XHRcdHJldHVybiBcIi4uL29zY2FyRW5jb3VudGVyL0luY29taW5nRW5jb3VudGVyLmRvXCIgK1xuXHRcdFx0XHRcIj9wcm92aWRlck5vPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHByb3ZpZGVyTm8pICtcblx0XHRcdFx0XCImYXBwb2ludG1lbnRObz1cIiArIGVuY29kZVVSSUNvbXBvbmVudChjYWxFdmVudC5kYXRhLmFwcG9pbnRtZW50Tm8pICtcblx0XHRcdFx0XCImZGVtb2dyYXBoaWNObz1cIiArIGVuY29kZVVSSUNvbXBvbmVudChjYWxFdmVudC5kYXRhLmRlbW9ncmFwaGljTm8pICtcblx0XHRcdFx0XCImY3VyUHJvdmlkZXJObz1cIiArIGVuY29kZVVSSUNvbXBvbmVudChjYWxFdmVudC5kYXRhLnVzZXJQcm92aWRlck5vKSArXG5cdFx0XHRcdFwiJnJlYXNvbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChjYWxFdmVudC5kYXRhLnJlYXNvbikgK1xuXHRcdFx0XHRcIiZlbmNUeXBlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KFwiZmFjZSB0byBmYWNlIGVuY291bnRlciB3aXRoIGNsaWVudFwiKSArXG5cblx0XHRcdFx0XCImdXNlck5hbWU9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoY2FsRXZlbnQuZGF0YS51c2VyRmlyc3ROYW1lICsgXCIgXCIgKyBjYWxFdmVudC5kYXRhLnVzZXJMYXN0TmFtZSkgK1xuXHRcdFx0XHRcIiZjdXJEYXRlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0TW9tZW50RGF0ZShtb21lbnQoKSkpICtcblxuXHRcdFx0XHRcIiZhcHBvaW50bWVudERhdGU9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoYXBwb2ludG1lbnREYXRlKSArXG5cdFx0XHRcdFwiJnN0YXJ0VGltZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChzdGFydFRpbWUpICtcblx0XHRcdFx0XCImc3RhdHVzPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGNhbEV2ZW50LmRhdGEuZXZlbnRTdGF0dXNDb2RlKSArXG5cdFx0XHRcdFwiJmFwcHRQcm92aWRlcl9ubz1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwcm92aWRlck5vKSArXG5cdFx0XHRcdFwiJnByb3ZpZGVydmlldz1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwcm92aWRlck5vKTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmdldFJ4TGluayA9IGZ1bmN0aW9uIGdldFJ4TGluayhjYWxFdmVudClcblx0XHR7XG5cdFx0XHRpZiAoY2FsRXZlbnQuZGF0YS5kZW1vZ3JhcGhpY05vICE9IDApXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBwcm92aWRlck5vID0gY2FsRXZlbnQucmVzb3VyY2VJZDtcblxuXHRcdFx0XHRyZXR1cm4gXCIuLi9vc2NhclJ4L2Nob29zZVBhdGllbnQuZG9cIiArXG5cdFx0XHRcdFx0XCI/cHJvdmlkZXJObz1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwcm92aWRlck5vKSArXG5cdFx0XHRcdFx0XCImZGVtb2dyYXBoaWNObz1cIiArIGVuY29kZVVSSUNvbXBvbmVudChjYWxFdmVudC5kYXRhLmRlbW9ncmFwaGljTm8pO1xuXHRcdFx0fVxuXHRcdH07XG5cblxuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIEV2ZW50IEhhbmRsZXJzXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09L1xuXG5cdFx0JHNjb3BlLm9uRXZlbnRSZW5kZXIgPSBmdW5jdGlvbiBvbkV2ZW50UmVuZGVyKGV2ZW50LCBlbGVtZW50LCB2aWV3KVxuXHRcdHtcblx0XHRcdGlmKGV2ZW50LnJlbmRlcmluZyAhPT0gJ2JhY2tncm91bmQnKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgZXZlbnRTaXRlSHRtbCA9ICcnO1xuXHRcdFx0XHR2YXIgZXZlbnRTaXRlID0gJHNjb3BlLnNpdGVzW2V2ZW50LmRhdGEuc2l0ZV07XG5cblx0XHRcdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoZXZlbnRTaXRlKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGV2ZW50U2l0ZUh0bWwgKz0gXCI8c3BhbiBzdHlsZT0nYmFja2dyb3VuZC1jb2xvcjogXCIgKyBldmVudFNpdGUuY29sb3IgKyBcIic+Jm5ic3A7PC9zcGFuPlwiXG5cdFx0XHRcdH1cblxuXG5cdFx0XHRcdHZhciBldmVudFN0YXR1c0h0bWwgPSAnJztcblx0XHRcdFx0dmFyIGV2ZW50U3RhdHVzID1cblx0XHRcdFx0XHQkc2NvcGUuZXZlbnRTdGF0dXNlc1tldmVudC5kYXRhLmV2ZW50U3RhdHVzQ29kZV07XG5cdFx0XHRcdHZhciBldmVudFN0YXR1c1JvdGF0ZSA9IEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKGV2ZW50U3RhdHVzLnNvcnRPcmRlcik7XG5cblx0XHRcdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoZXZlbnRTdGF0dXMpICYmIEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKGV2ZW50U3RhdHVzLmljb24pICYmXG5cdFx0XHRcdFx0SnVuby5Db21tb24uVXRpbC5leGlzdHMoZXZlbnQpICYmIEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKGV2ZW50LmRhdGEpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZXZlbnRTdGF0dXNIdG1sICs9IFwiPGltZyBjbGFzcz0nZXZlbnQtc3RhdHVzXCI7XG5cdFx0XHRcdFx0aWYoZXZlbnRTdGF0dXNSb3RhdGUpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0ZXZlbnRTdGF0dXNIdG1sICs9ICcgcm90YXRlJztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZXZlbnRTdGF0dXNIdG1sICs9IFwiJyBzcmM9J1wiICsgJHNjb3BlLmdldEljb25QYXRoKGV2ZW50U3RhdHVzLmljb24sIGV2ZW50LmRhdGEuZXZlbnRTdGF0dXNNb2RpZmllcikgKyBcIicgLz5cIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRldmVudFN0YXR1c0h0bWwgPSAnPHNwYW4gY2xhc3M9XCJldmVudC1zdGF0dXMnO1xuXHRcdFx0XHRcdGlmKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKGV2ZW50U3RhdHVzKSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRpZihldmVudFN0YXR1c1JvdGF0ZSlcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0ZXZlbnRTdGF0dXNIdG1sICs9ICcgcm90YXRlICc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRldmVudFN0YXR1c0h0bWwgKz0gJ1wiJyArICcgdGl0bGU9XCInICsgSnVuby5Db21tb24uVXRpbC5lc2NhcGVIdG1sKGV2ZW50U3RhdHVzLm5hbWUpICsgJ1wiPicgK1xuXHRcdFx0XHRcdFx0XHRKdW5vLkNvbW1vbi5VdGlsLmVzY2FwZUh0bWwoZXZlbnRTdGF0dXMuZGlzcGxheUxldHRlcikgKyAnPC9zcGFuPic7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRldmVudFN0YXR1c0h0bWwgKz0gJ1wiIHRpdGxlPVwiVW5rbm93blwiPj88L3NwYW4+Jztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgZXZlbnRFbmNvdW50ZXJIdG1sID0gJzxzcGFuIGNsYXNzPVwiZXZlbnQtZW5jb3VudGVyXCIgdGl0bGU9XCJPcGVuIEVuY291bnRlclwiPkU8L3NwYW4+JztcblxuXHRcdFx0XHR2YXIgZXZlbnRJbnZvaWNlSHRtbCA9ICc8c3BhbiBjbGFzcz1cImV2ZW50LWludm9pY2VcIiB0aXRsZT1cIkNyZWF0ZSBJbnZvaWNlXCI+Qjwvc3Bhbj4nO1xuXG5cdFx0XHRcdHZhciBldmVudERlbW9ncmFwaGljSHRtbCA9ICc8c3BhbiBjbGFzcz1cImV2ZW50LWRlbW9ncmFwaGljXCIgdGl0bGU9XCJWaWV3IFBhdGllbnRcIj5NPC9zcGFuPic7XG5cblx0XHRcdFx0dmFyIGV2ZW50UnhIdG1sID0gJzxzcGFuIGNsYXNzPVwiZXZlbnQtcnhcIiB0aXRsZT1cIlZpZXcgUHJlc2NyaXB0aW9uXCI+Ung8L3NwYW4+JztcblxuXHRcdFx0XHR2YXIgZXZlbnREZXRhaWxzID0gXCJcIjtcblx0XHRcdFx0aWYoIUp1bm8uQ29tbW9uLlV0aWwuaXNCbGFuayhldmVudC5kYXRhLmRlbW9ncmFwaGljTmFtZSkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRldmVudERldGFpbHMgPSBKdW5vLkNvbW1vbi5VdGlsLmVzY2FwZUh0bWwoZXZlbnQuZGF0YS5kZW1vZ3JhcGhpY05hbWUpO1xuXHRcdFx0XHRcdGlmKCFKdW5vLkNvbW1vbi5VdGlsLmlzQmxhbmsoZXZlbnQuZGF0YS5yZWFzb24pKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGV2ZW50RGV0YWlscyArPSBcIiAoXCIgKyBKdW5vLkNvbW1vbi5VdGlsLmVzY2FwZUh0bWwoZXZlbnQuZGF0YS5yZWFzb24pICsgXCIpXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZighSnVuby5Db21tb24uVXRpbC5pc0JsYW5rKGV2ZW50LmRhdGEucmVhc29uKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGV2ZW50RGV0YWlscyA9IEp1bm8uQ29tbW9uLlV0aWwuZXNjYXBlSHRtbChldmVudC5kYXRhLnJlYXNvbik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkKGVsZW1lbnQpLmZpbmQoJy5mYy1jb250ZW50JykuaHRtbChldmVudFNpdGVIdG1sICsgZXZlbnRTdGF0dXNIdG1sICsgZXZlbnRFbmNvdW50ZXJIdG1sICtcblx0XHRcdFx0XHRldmVudEludm9pY2VIdG1sICsgZXZlbnREZW1vZ3JhcGhpY0h0bWwgKyBldmVudFJ4SHRtbCArIGV2ZW50RGV0YWlscyk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdCRzY29wZS5vblZpZXdSZW5kZXIgPSBmdW5jdGlvbiBvblZpZXdSZW5kZXIoKVxuXHRcdHtcblx0XHRcdGlmKCRzY29wZS5pc0luaXRpYWxpemVkKCkgJiYgJHNjb3BlLmNhbGVuZGFyKCkpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZERhdGUgPSBtb21lbnQoSnVuby5Db21tb24uVXRpbC5mb3JtYXRNb21lbnREYXRlKFxuXHRcdFx0XHRcdG1vbWVudCgkc2NvcGUuY2FsZW5kYXIoKS5mdWxsQ2FsZW5kYXIoJ2dldERhdGUnKSkpKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVm9vZG9vIHRvIHNldCB0aGUgcmVzb3VyY2UgdmlldyBjb2x1bW4gd2lkdGggZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzkyOTc4NjRcblx0XHRcdCQoXCIjY2EtY2FsZW5kYXJcIikuY3NzKCdtaW4td2lkdGgnLCQoJy5mYy1yZXNvdXJjZS1jZWxsJykubGVuZ3RoKjIwMCk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5hZnRlclJlbmRlciA9IGZ1bmN0aW9uIGFmdGVyUmVuZGVyKClcblx0XHR7XG5cdFx0XHQvLyBWb29kb28gdG8gc2V0IHRoZSByZXNvdXJjZSB2aWV3IGNvbHVtbiB3aWR0aCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTI5Nzg2NFxuXHRcdFx0JCgnLmZjLWFnZW5kYURheS1idXR0b24nKS5jbGljayhmdW5jdGlvbigpXG5cdFx0XHR7XG5cdFx0XHRcdCQoXCIjc2NoZWR1bGVfY29udGFpbmVyXCIpLmNzcygnbWluLXdpZHRoJywkKCcuZmMtcmVzb3VyY2UtY2VsbCcpLmxlbmd0aCoyMDApO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5vcGVuQ3JlYXRlRXZlbnREaWFsb2cgPSBmdW5jdGlvbiBvcGVuQ3JlYXRlRXZlbnREaWFsb2coXG5cdFx0XHRzdGFydCwgZW5kLCBqc0V2ZW50LCB2aWV3LCByZXNvdXJjZSlcblx0XHR7XG5cdFx0XHQvLyBYWFg6IHNoYXJlIGFzIG11Y2ggY29kZSBhcyBwb3NzaWJsZSB3aXRoIGVkaXQgZXZlbnRcblx0XHRcdGlmKCFzZWN1cml0eVNlcnZpY2UuaGFzUGVybWlzc2lvbignc2NoZWR1bGluZ19jcmVhdGUnKSApXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaWYgYWxyZWFkeSBvcGVuaW5nIGEgZGlhbG9nIG9yIGhhdmUgb25lIG9wZW4sIGlnbm9yZSBhbmQgcmV0dXJuXG5cdFx0XHRpZigkc2NvcGUub3BlbmluZ0RpYWxvZyB8fCAkc2NvcGUuZGlhbG9nKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQkc2NvcGUub3BlbmluZ0RpYWxvZyA9IHRydWU7XG5cblx0XHRcdHZhciBzY2hlZHVsZVV1aWQgPSBudWxsO1xuXHRcdFx0dmFyIGRpc3BsYXlOYW1lID0gXCJcIjtcblx0XHRcdGlmKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKHJlc291cmNlKSlcblx0XHRcdHtcblx0XHRcdFx0c2NoZWR1bGVVdWlkID0gcmVzb3VyY2UuaWQ7XG5cdFx0XHRcdGRpc3BsYXlOYW1lID0gcmVzb3VyY2UuZGlzcGxheV9uYW1lO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZigkc2NvcGUuc2VsZWN0ZWRTY2hlZHVsZSAhPT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0c2NoZWR1bGVVdWlkID0gJHNjb3BlLnNlbGVjdGVkU2NoZWR1bGUudXVpZDtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHNjaGVkdWxlID0gJHNjb3BlLmdldExvYWRlZFNjaGVkdWxlKHNjaGVkdWxlVXVpZCk7XG5cdFx0XHRpZihzY2hlZHVsZSAhPT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0Ly92YXIgZGVmYXVsdEV2ZW50U3RhdHVzID0gc2NoZWR1bGUubmV3X2V2ZW50X3N0YXR1c191dWlkO1xuXG5cdFx0XHRcdHZhciBtb2RhbFNjaGVkdWxlID0gYW5ndWxhci5jb3B5KHNjaGVkdWxlKTtcblx0XHRcdFx0bW9kYWxTY2hlZHVsZS5kaXNwbGF5X25hbWUgPSBkaXNwbGF5TmFtZTtcblxuXHRcdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0XHRzY2hlZHVsZTogbW9kYWxTY2hlZHVsZSxcblx0XHRcdFx0XHRkZWZhdWx0RXZlbnRTdGF0dXM6IG51bGwsIC8vZGVmYXVsdEV2ZW50U3RhdHVzLFxuXHRcdFx0XHRcdHN0YXJ0VGltZTogc3RhcnQsXG5cdFx0XHRcdFx0ZW5kVGltZTogZW5kLFxuXHRcdFx0XHRcdHRpbWVJbnRlcnZhbDogJHNjb3BlLnRpbWVJbnRlcnZhbE1pbnV0ZXMoKSxcblx0XHRcdFx0XHRzY2hlZHVsZVRlbXBsYXRlczogJHNjb3BlLnNjaGVkdWxlVGVtcGxhdGVzLFxuXHRcdFx0XHRcdGF2YWlsYWJpbGl0eVR5cGVzOiAkc2NvcGUuYXZhaWxhYmlsaXR5VHlwZXMsXG5cdFx0XHRcdFx0c2l0ZXM6ICRzY29wZS5zaXRlcyxcblx0XHRcdFx0XHRldmVudHM6ICRzY29wZS5ldmVudHMsXG5cdFx0XHRcdFx0ZXZlbnREYXRhOiB7fVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCRzY29wZS5kaWFsb2cgPSAkdWliTW9kYWwub3Blbih7XG5cdFx0XHRcdFx0YW5pbWF0aW9uOiBmYWxzZSxcblx0XHRcdFx0XHRiYWNrZHJvcDogJ3N0YXRpYycsXG5cdFx0XHRcdFx0Y29udHJvbGxlcjogJ1NjaGVkdWxlLkV2ZW50Q29udHJvbGxlcicsXG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvc2NoZWR1bGUvZXZlbnQuanNwJyxcblx0XHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBbZnVuY3Rpb24oKSB7IHJldHVybiAnY3JlYXRlX2VkaXRfZXZlbnQnIH1dLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFtmdW5jdGlvbigpIHsgcmV0dXJuICdBcHBvaW50bWVudCcgfV0sXG5cdFx0XHRcdFx0XHRwYXJlbnRTY29wZTogW2Z1bmN0aW9uKCkgeyByZXR1cm4gJHNjb3BlIH1dLFxuXHRcdFx0XHRcdFx0ZGF0YTogW2Z1bmN0aW9uKCkgeyByZXR1cm4gZGF0YSB9XSxcblx0XHRcdFx0XHRcdGVkaXRNb2RlOiBbZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZSB9XSxcblx0XHRcdFx0XHRcdGtleUJpbmRpbmc6IFtmdW5jdGlvbigpIHtyZXR1cm4ge2JpbmRLZXlHbG9iYWw6IGZ1bmN0aW9uKCl7fX19XSxcblx0XHRcdFx0XHRcdGZvY3VzOiBbZnVuY3Rpb24oKSB7cmV0dXJuIGZvY3VzU2VydmljZX1dLFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0JHNjb3BlLmRpYWxvZy5yZXN1bHQuY2F0Y2goZnVuY3Rpb24ocmVzKSB7XG5cdFx0XHRcdFx0aWYoIShyZXMgPT09ICdjYW5jZWwnIHx8IHJlcyA9PT0gJ2VzY2FwZSBrZXkgcHJlc3MnKSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR0aHJvdyByZXM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyB3aGVuIHRoZSBkaWFsb2cgY2xvc2VzIGNsZWFyIHRoZSB2YXJpYWJsZVxuXHRcdFx0XHQkc2NvcGUuZGlhbG9nLmNsb3NlZC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCRzY29wZS5kaWFsb2cgPSBudWxsO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0JHNjb3BlLm9wZW5pbmdEaWFsb2cgPSBmYWxzZTtcblx0XHR9O1xuXG5cdFx0Ly8gWFhYOiBtYWtlIHRoaXMgd29ya1xuXHRcdCRzY29wZS5vcGVuUGF0aWVudERpYWxvZyA9IGZ1bmN0aW9uIG9wZW5QYXRpZW50RGlhbG9nKGVkaXRNb2RlQ2FsbGJhY2ssIG9uU2F2ZUNhbGxiYWNrLFxuXHRcdFx0bG9hZEVycm9yTGlua1BhdGllbnRGbilcblx0XHR7XG5cdFx0XHQvL2dsb2JhbF9zdGF0ZS5lbmFibGVfa2V5Ym9hcmRfc2hvcnRjdXRzID0gZmFsc2U7XG5cblx0XHRcdHJldHVybiB0aGlzLiR1aWJNb2RhbC5vcGVuKHtcblx0XHRcdFx0YW5pbWF0aW9uOiBmYWxzZSxcblx0XHRcdFx0YmFja2Ryb3A6ICdzdGF0aWMnLFxuXHRcdFx0XHRzaXplOiAnbGcnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnSW52b2ljZS5Db21tb24uUGF0aWVudC5Gb3JtQ29udHJvbGxlcicsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnY29kZS9pbnZvaWNlL2NvbW1vbi9wYXRpZW50L3F1aWNrX2Zvcm0uaHRtbCcsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRlZGl0X21vZGU6IGVkaXRNb2RlQ2FsbGJhY2ssXG5cdFx0XHRcdFx0b25fc2F2ZV9jYWxsYmFjazogb25TYXZlQ2FsbGJhY2ssXG5cdFx0XHRcdFx0bG9hZF9lcnJvcl9saW5rX3BhdGllbnRfZm46IGxvYWRFcnJvckxpbmtQYXRpZW50Rm5cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5vcGVuUGF0aWVudERlbW9ncmFwaGljID0gZnVuY3Rpb24gb3BlblBhdGllbnREZW1vZ3JhcGhpYyhjYWxFdmVudClcblx0XHR7XG5cdFx0XHRpZiAoY2FsRXZlbnQuZGF0YS5kZW1vZ3JhcGhpY05vICE9IDApXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBwYXJhbXMgPSB7XG5cdFx0XHRcdFx0ZGVtb2dyYXBoaWNObzogY2FsRXZlbnQuZGF0YS5kZW1vZ3JhcGhpY05vXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0aWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGNhbEV2ZW50LmRhdGEuYXBwb2ludG1lbnRObykpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRwYXJhbXMuYXBwb2ludG1lbnRObyA9IGNhbEV2ZW50LmRhdGEuYXBwb2ludG1lbnRObztcblx0XHRcdFx0XHRwYXJhbXMuZW5jVHlwZSA9IFwiZmFjZSB0byBmYWNlIGVuY291bnRlciB3aXRoIGNsaWVudFwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JHN0YXRlLmdvKCdyZWNvcmQuc3VtbWFyeScsIHBhcmFtcyk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdCRzY29wZS5vcGVuRWRpdEV2ZW50RGlhbG9nID0gZnVuY3Rpb24gb3BlbkVkaXRFdmVudERpYWxvZyhjYWxFdmVudClcblx0XHR7XG5cdFx0XHRpZighc2VjdXJpdHlTZXJ2aWNlLmhhc1Blcm1pc3Npb24oJ3NjaGVkdWxpbmdfZWRpdCcpIClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBpZiBhbHJlYWR5IG9wZW5pbmcgYSBkaWFsb2cgb3IgaGF2ZSBvbmUgb3BlbiwgaWdub3JlIGFuZCByZXR1cm5cblx0XHRcdGlmKCRzY29wZS5vcGVuaW5nRGlhbG9nIHx8ICRzY29wZS5kaWFsb2cpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0JHNjb3BlLm9wZW5pbmdEaWFsb2cgPSB0cnVlO1xuXG5cdFx0XHR2YXIgc2NoZWR1bGVVdWlkID0gY2FsRXZlbnQucmVzb3VyY2VJZDtcblx0XHRcdHZhciBkaXNwbGF5TmFtZSA9IGNhbEV2ZW50LmRhdGEuZGVtb2dyYXBoaWNOYW1lO1xuXG5cdFx0XHRpZihkaXNwbGF5TmFtZSA9PSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRkaXNwbGF5TmFtZSA9ICcnO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgc2NoZWR1bGUgPSAkc2NvcGUuZ2V0TG9hZGVkU2NoZWR1bGUoc2NoZWR1bGVVdWlkKTtcblxuXHRcdFx0aWYoc2NoZWR1bGUgIT09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdC8vdmFyIGRlZmF1bHRFdmVudFN0YXR1cyA9IHNjaGVkdWxlLm5ld19ldmVudF9zdGF0dXNfdXVpZDtcblxuXHRcdFx0XHR2YXIgbW9kYWxTY2hlZHVsZSA9IGFuZ3VsYXIuY29weShzY2hlZHVsZSk7XG5cdFx0XHRcdG1vZGFsU2NoZWR1bGUuZGlzcGxheV9uYW1lID0gZGlzcGxheU5hbWU7XG5cblx0XHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdFx0c2NoZWR1bGU6IG1vZGFsU2NoZWR1bGUsXG5cdFx0XHRcdFx0ZGVmYXVsdEV2ZW50U3RhdHVzOiBudWxsLCAvL2RlZmF1bHRFdmVudFN0YXR1cyxcblx0XHRcdFx0XHRzdGFydFRpbWU6IGNhbEV2ZW50LnN0YXJ0LFxuXHRcdFx0XHRcdGVuZFRpbWU6IGNhbEV2ZW50LmVuZCxcblx0XHRcdFx0XHR0aW1lSW50ZXJ2YWw6ICRzY29wZS50aW1lSW50ZXJ2YWxNaW51dGVzKCksXG5cdFx0XHRcdFx0YXZhaWxhYmlsaXR5VHlwZXM6ICRzY29wZS5hdmFpbGFiaWxpdHlUeXBlcyxcblx0XHRcdFx0XHRzaXRlczogJHNjb3BlLnNpdGVzLFxuXHRcdFx0XHRcdGV2ZW50czogJHNjb3BlLmV2ZW50cyxcblx0XHRcdFx0XHRldmVudERhdGE6IGNhbEV2ZW50LmRhdGFcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQkc2NvcGUuZGlhbG9nID0gJHVpYk1vZGFsLm9wZW4oe1xuXHRcdFx0XHRcdGFuaW1hdGlvbjogZmFsc2UsXG5cdFx0XHRcdFx0YmFja2Ryb3A6ICdzdGF0aWMnLFxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdTY2hlZHVsZS5FdmVudENvbnRyb2xsZXInLFxuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3NjaGVkdWxlL2V2ZW50LmpzcCcsXG5cdFx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdFx0dHlwZTogW2Z1bmN0aW9uKCkgeyByZXR1cm4gJ2NyZWF0ZV9lZGl0X2V2ZW50JyB9XSxcblx0XHRcdFx0XHRcdGxhYmVsOiBbZnVuY3Rpb24oKSB7IHJldHVybiAnQXBwb2ludG1lbnQnIH1dLFxuXHRcdFx0XHRcdFx0cGFyZW50U2NvcGU6IFtmdW5jdGlvbigpIHsgcmV0dXJuICRzY29wZSB9XSxcblx0XHRcdFx0XHRcdGRhdGE6IFtmdW5jdGlvbigpIHsgcmV0dXJuIGRhdGEgfV0sXG5cdFx0XHRcdFx0XHRlZGl0TW9kZTogW2Z1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZSB9XSxcblx0XHRcdFx0XHRcdGtleUJpbmRpbmc6IFtmdW5jdGlvbigpIHtyZXR1cm4ge2JpbmRLZXlHbG9iYWw6IGZ1bmN0aW9uKCl7fX19XSxcblx0XHRcdFx0XHRcdGZvY3VzOiBbZnVuY3Rpb24oKSB7cmV0dXJuIGZvY3VzU2VydmljZX1dLFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0JHNjb3BlLmRpYWxvZy5yZXN1bHQuY2F0Y2goZnVuY3Rpb24ocmVzKSB7XG5cdFx0XHRcdFx0aWYoIShyZXMgPT09ICdjYW5jZWwnIHx8IHJlcyA9PT0gJ2VzY2FwZSBrZXkgcHJlc3MnKSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR0aHJvdyByZXM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyB3aGVuIHRoZSBkaWFsb2cgY2xvc2VzIGNsZWFyIHRoZSB2YXJpYWJsZVxuXHRcdFx0XHQkc2NvcGUuZGlhbG9nLmNsb3NlZC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCRzY29wZS5kaWFsb2cgPSBudWxsO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0JHNjb3BlLm9wZW5pbmdEaWFsb2cgPSBmYWxzZTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLm9uRXZlbnRDbGlja2VkID0gZnVuY3Rpb24gb25FdmVudENsaWNrZWQoY2FsRXZlbnQsIGpzRXZlbnQsIHZpZXcpXG5cdFx0e1xuXHRcdFx0aWYoJChqc0V2ZW50LnRhcmdldCkuaXMoXCIuZXZlbnQtc3RhdHVzLnJvdGF0ZVwiKSlcblx0XHRcdHtcblx0XHRcdFx0JHNjb3BlLnJvdGF0ZUV2ZW50U3RhdHVzKGNhbEV2ZW50KTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoJChqc0V2ZW50LnRhcmdldCkuaXMoXCIuZXZlbnQtZW5jb3VudGVyXCIpKVxuXHRcdFx0e1xuXHRcdFx0XHR3aW5kb3cub3Blbigkc2NvcGUuZ2V0RW5jb3VudGVyTGluayhjYWxFdmVudCkpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZigkKGpzRXZlbnQudGFyZ2V0KS5pcyhcIi5ldmVudC1pbnZvaWNlXCIpKVxuXHRcdFx0e1xuXHRcdFx0XHR3aW5kb3cub3Blbigkc2NvcGUuZ2V0QmlsbGluZ0xpbmsoY2FsRXZlbnQpKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoJChqc0V2ZW50LnRhcmdldCkuaXMoXCIuZXZlbnQtZGVtb2dyYXBoaWNcIikpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5vcGVuUGF0aWVudERlbW9ncmFwaGljKGNhbEV2ZW50KTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoJChqc0V2ZW50LnRhcmdldCkuaXMoXCIuZXZlbnQtcnhcIikpXG5cdFx0XHR7XG5cdFx0XHRcdHdpbmRvdy5vcGVuKCRzY29wZS5nZXRSeExpbmsoY2FsRXZlbnQpKTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0JHNjb3BlLm9wZW5FZGl0RXZlbnREaWFsb2coY2FsRXZlbnQpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQkc2NvcGUub25FdmVudERyb3AgPSBmdW5jdGlvbiBvbkV2ZW50RHJvcChcblx0XHRcdGNhbEV2ZW50LCBkZWx0YSwgcmV2ZXJ0RnVuYywganNFdmVudCwgdWksIHZpZXcpXG5cdFx0e1xuXHRcdFx0aWYoIXNlY3VyaXR5U2VydmljZS5oYXNQZXJtaXNzaW9uKCdzY2hlZHVsaW5nX2NyZWF0ZScpIClcblx0XHRcdHtcblx0XHRcdFx0cmV2ZXJ0RnVuYygpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIGV2ZW50IHdhcyBkcmFnZ2VkIGFuZCBkcm9wcGVkIG9uIHRoZSBjYWxlbmRhcjpcblx0XHRcdC8vIGxvYWQgdGhlbiB1cGRhdGUgdGhlIHN0YXJ0IGFuZCBlbmQgdGltZSBiYXNlZCBvbiB0aGUgZGVsdGFcblx0XHRcdCRzY29wZS5zZXRDYWxlbmRhckxvYWRpbmcodHJ1ZSk7XG5cblx0XHRcdHZhciBhcHBvaW50bWVudCA9IGFuZ3VsYXIuY29weShjYWxFdmVudC5kYXRhKTtcblx0XHRcdGFwcG9pbnRtZW50LnByb3ZpZGVyTm8gPSBjYWxFdmVudC5yZXNvdXJjZUlkXG5cblx0XHRcdCRzY29wZS5tb3ZlRXZlbnQoYXBwb2ludG1lbnQsIGRlbHRhLCB0cnVlKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiBzdWNjZXNzKGV2ZW50RGF0YSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciBzdGFydE1vbWVudCA9IG1vbWVudChldmVudERhdGEuc3RhcnRUaW1lLCBcIllZWVktTU0tRERUSEg6bW06c3MuU1NTK1paWlpcIiwgZmFsc2UpO1xuXHRcdFx0XHRcdHZhciBlbmRNb21lbnQgPSBtb21lbnQoZXZlbnREYXRhLmVuZFRpbWUsIFwiWVlZWS1NTS1ERFRISDptbTpzcy5TU1MrWlpaWlwiLCBmYWxzZSk7XG5cblx0XHRcdFx0XHRjYWxFdmVudC5kYXRhLnN0YXJ0VGltZSA9IEp1bm8uQ29tbW9uLlV0aWwuZm9ybWF0TW9tZW50VGltZShcblx0XHRcdFx0XHRcdHN0YXJ0TW9tZW50LCBKdW5vLkNvbW1vbi5VdGlsLnNldHRpbmdzLmRhdGV0aW1lX25vX3RpbWV6b25lX2Zvcm1hdCk7XG5cdFx0XHRcdFx0Y2FsRXZlbnQuZGF0YS5lbmRUaW1lID0gSnVuby5Db21tb24uVXRpbC5mb3JtYXRNb21lbnRUaW1lKFxuXHRcdFx0XHRcdFx0ZW5kTW9tZW50LCBKdW5vLkNvbW1vbi5VdGlsLnNldHRpbmdzLmRhdGV0aW1lX25vX3RpbWV6b25lX2Zvcm1hdCk7XG5cblx0XHRcdFx0XHRjYWxFdmVudC5kYXRhLnByb3ZpZGVyTm8gPSBldmVudERhdGEucHJvdmlkZXJObztcblxuXHRcdFx0XHRcdCRzY29wZS5zZXRDYWxlbmRhckxvYWRpbmcoZmFsc2UpO1xuXG5cdFx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdmYWlsZWQgdG8gc2F2ZSBldmVudCcsIGVycm9ycyk7XG5cblx0XHRcdFx0XHQvLyByZXZlcnQgb24gZmFpbFxuXHRcdFx0XHRcdHJldmVydEZ1bmMoKTtcblx0XHRcdFx0XHQkc2NvcGUuc2V0Q2FsZW5kYXJMb2FkaW5nKGZhbHNlKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5vbkV2ZW50UmVzaXplID0gZnVuY3Rpb24gb25FdmVudFJlc2l6ZShjYWxFdmVudCwgZGVsdGEsIHJldmVydEZ1bmMsIGpzRXZlbnQsIHVpLCB2aWV3KVxuXHRcdHtcblx0XHRcdGlmKCFzZWN1cml0eVNlcnZpY2UuaGFzUGVybWlzc2lvbignc2NoZWR1bGluZ19jcmVhdGUnKSApXG5cdFx0XHR7XG5cdFx0XHRcdHJldmVydEZ1bmMoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBldmVudCB3YXMgZXh0ZW5kZWQgYnkgZHJhZ2dpbmcgdGhlIGVuZCBvZiB0aGUgZXZlbnQgb24gdGhlIGNhbGVuZGFyOlxuXHRcdFx0Ly8gbG9hZCB0aGVuIHVwZGF0ZSB0aGUgZW5kIHRpbWUgYmFzZWQgb24gdGhlIGRlbHRhXG5cdFx0XHQkc2NvcGUuc2V0Q2FsZW5kYXJMb2FkaW5nKHRydWUpO1xuXG5cdFx0XHR2YXIgYXBwb2ludG1lbnQgPSBhbmd1bGFyLmNvcHkoY2FsRXZlbnQuZGF0YSk7XG5cdFx0XHRhcHBvaW50bWVudC5wcm92aWRlck5vID0gY2FsRXZlbnQucmVzb3VyY2VJZFxuXG5cdFx0XHQkc2NvcGUubW92ZUV2ZW50KGFwcG9pbnRtZW50LCBkZWx0YSwgZmFsc2UpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoZXZlbnREYXRhKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIHN0YXJ0TW9tZW50ID0gbW9tZW50KGV2ZW50RGF0YS5zdGFydFRpbWUsIFwiWVlZWS1NTS1ERFRISDptbTpzcy5TU1MrWlpaWlwiLCBmYWxzZSk7XG5cdFx0XHRcdFx0dmFyIGVuZE1vbWVudCA9IG1vbWVudChldmVudERhdGEuZW5kVGltZSwgXCJZWVlZLU1NLUREVEhIOm1tOnNzLlNTUytaWlpaXCIsIGZhbHNlKTtcblxuXHRcdFx0XHRcdGNhbEV2ZW50LmRhdGEuc3RhcnRUaW1lID0gSnVuby5Db21tb24uVXRpbC5mb3JtYXRNb21lbnRUaW1lKFxuXHRcdFx0XHRcdFx0c3RhcnRNb21lbnQsIEp1bm8uQ29tbW9uLlV0aWwuc2V0dGluZ3MuZGF0ZXRpbWVfbm9fdGltZXpvbmVfZm9ybWF0KTtcblx0XHRcdFx0XHRjYWxFdmVudC5kYXRhLmVuZFRpbWUgPSBKdW5vLkNvbW1vbi5VdGlsLmZvcm1hdE1vbWVudFRpbWUoXG5cdFx0XHRcdFx0XHRlbmRNb21lbnQsIEp1bm8uQ29tbW9uLlV0aWwuc2V0dGluZ3MuZGF0ZXRpbWVfbm9fdGltZXpvbmVfZm9ybWF0KTtcblxuXHRcdFx0XHRcdGNhbEV2ZW50LmRhdGEucHJvdmlkZXJObyA9IGV2ZW50RGF0YS5wcm92aWRlck5vO1xuXG5cdFx0XHRcdFx0Ly8kc2NvcGUudXBkYXRlX2V2ZW50KGNhbEV2ZW50KTtcblxuXHRcdFx0XHRcdCRzY29wZS5zZXRDYWxlbmRhckxvYWRpbmcoZmFsc2UpO1xuXG5cdFx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yKGVycm9ycylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdmYWlsZWQgdG8gcmVzaXplIGV2ZW50JywgZXJyb3JzKTtcblxuXHRcdFx0XHRcdC8vIHJldmVydCBvbiBmYWlsXG5cdFx0XHRcdFx0cmV2ZXJ0RnVuYygpO1xuXHRcdFx0XHRcdCRzY29wZS5zZXRDYWxlbmRhckxvYWRpbmcoZmFsc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUub25TaXRlQ2hhbmdlZCA9IGZ1bmN0aW9uIG9uU2l0ZUNoYW5nZWQoKVxuXHRcdHtcblx0XHRcdHJldHVybiAkc2NvcGUub25TY2hlZHVsZUNoYW5nZWQoKTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLm9uU2NoZWR1bGVDaGFuZ2VkID0gZnVuY3Rpb24gb25TY2hlZHVsZUNoYW5nZWQoKVxuXHRcdHtcblx0XHRcdHZhciBzZWxlY3RlZFNjaGVkdWxlID0gJHNjb3BlLnNlbGVjdGVkU2NoZWR1bGU7XG5cdFx0XHR2YXIgc2VsZWN0ZWRTaXRlTmFtZSA9ICRzY29wZS5zZWxlY3RlZFNpdGVOYW1lO1xuXG5cdFx0XHRpZighSnVuby5Db21tb24uVXRpbC5leGlzdHMoc2VsZWN0ZWRTY2hlZHVsZSkpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYoSnVuby5Db21tb24uVXRpbC5leGlzdHMoc2VsZWN0ZWRTaXRlTmFtZSkpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZFNpdGVOYW1lID0gc2VsZWN0ZWRTaXRlTmFtZTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkU2l0ZU5hbWUgPSBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyByZWxvYWQgdGhlIHNjaGVkdWxlIGFuZCB0aGVuIGV2ZW50cyBkYXRhLCB0cmlnZ2VyaW5nIGEgcmVyZW5kZXJcblx0XHRcdCRzY29wZS5sb2FkU2VsZWN0ZWRTY2hlZHVsZXMoKS50aGVuKCRzY29wZS5yZWZldGNoRXZlbnRzKTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLm9uVGltZUludGVydmFsQ2hhbmdlZCA9IGZ1bmN0aW9uIG9uVGltZUludGVydmFsQ2hhbmdlZCgpXG5cdFx0e1xuXHRcdFx0JHNjb3BlLnNjaGVkdWxlVGltZUludGVydmFsID0gJHNjb3BlLnNlbGVjdGVkVGltZUludGVydmFsO1xuXG5cdFx0XHQvLyB1cGRhdGluZyB0aGUgY29uZmlnIHdpbGwgYXV0b21hdGljYWxseSB0cmlnZ2VyIGFuIGV2ZW50cyByZWZyZXNoXG5cdFx0XHQkc2NvcGUudWlDb25maWcuY2FsZW5kYXIuc2xvdER1cmF0aW9uID0gJHNjb3BlLnNlbGVjdGVkVGltZUludGVydmFsO1xuXHRcdFx0JHNjb3BlLnVpQ29uZmlnLmNhbGVuZGFyLnNsb3RMYWJlbEludGVydmFsID0gJHNjb3BlLnNlbGVjdGVkVGltZUludGVydmFsO1xuXG5cdFx0XHQkc2NvcGUuYXBwbHlVaUNvbmZpZygkc2NvcGUudWlDb25maWcpO1xuXHRcdH07XG5cblxuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIEluaXQgbWV0aG9kcyBwdWxsZWQgZnJvbSB0aGUgZGlyZWN0aXZlIGNvbnRyb2xsZXJcblx0XHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vXG5cblx0XHQvLyBMb2FkcyB0aGUgc2NoZWR1bGUgZHJvcGRvd24gb3B0aW9ucyBmcm9tIHRoZSBBUEkuICBTZXRzIHRoZSBmb2xsb3dpbmc6XG5cdFx0Ly8gJHNjb3BlLnNjaGVkdWxlX29wdGlvbnMgLSB0aGUgYXJyYXkgdXNlZCB0byBidWlsZCB0aGUgc2NoZWR1bGUgc2VsZWN0aW9uIGRyb3Bkb3duLlxuXHRcdC8vICRzY29wZS5yZXNvdXJjZU9wdGlvbkhhc2ggLSB0YWJsZSB0byBsb29rIHVwIHNjaGVkdWxlIGluZm9ybWF0aW9uIGJ5IHByb3ZpZGVyTm8uICBUaGlzIGlzXG5cdFx0Ly8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlZCB0byBjcmVhdGUgdGhlIHJlc291cmNlIHZpZXcgaGVhZGVycy5cblx0XHQkc2NvcGUubG9hZFNjaGVkdWxlT3B0aW9ucyA9IGZ1bmN0aW9uIGxvYWRTY2hlZHVsZU9wdGlvbnMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdHNjaGVkdWxlU2VydmljZS5nZXRTY2hlZHVsZUdyb3VwcygpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCByZXN1bHRzLmxlbmd0aDsgaSsrKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHZhciBzY2hlZHVsZURhdGEgPSByZXN1bHRzW2ldO1xuXG5cdFx0XHRcdFx0XHRyZXN1bHRzW2ldLnV1aWQgPSByZXN1bHRzW2ldLmlkZW50aWZpZXI7XG5cblx0XHRcdFx0XHRcdCRzY29wZS5zY2hlZHVsZU9wdGlvbnMucHVzaChzY2hlZHVsZURhdGEpO1xuXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHBvc3NpYmxlIHJlc291cmNlcyBieSBpbmZlcnJpbmcgdGhhdCB0aGUgZ3JvdXAgaXMgYSBwcm92aWRlclxuXHRcdFx0XHRcdFx0Ly8gYnkgY2hlY2tpbmcgaWYgdGhlIGFycmF5IGhhcyBvbmUgZW50cnkgYW5kIG1hdGNoZXMgdGhlIGlkZW50aWZpZXJcblx0XHRcdFx0XHRcdC8vIEFsc28gdXNlcyBmaWVsZHMgc3BlY2lmaWMgdG8gSnVuby5cblx0XHRcdFx0XHRcdC8vIFRPRE86IENIQU5HRSBUSElTISFcblx0XHRcdFx0XHRcdGlmKFxuXHRcdFx0XHRcdFx0XHRhbmd1bGFyLmlzQXJyYXkoc2NoZWR1bGVEYXRhLnByb3ZpZGVyTm9zKSAmJlxuXHRcdFx0XHRcdFx0XHRzY2hlZHVsZURhdGEucHJvdmlkZXJOb3MubGVuZ3RoID09IDEgJiZcblx0XHRcdFx0XHRcdFx0c2NoZWR1bGVEYXRhLnByb3ZpZGVyTm9zWzBdLnRvU3RyaW5nKCkgPT0gc2NoZWR1bGVEYXRhLmlkZW50aWZpZXJcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0dmFyIHByb3ZpZGVyTm8gPSBzY2hlZHVsZURhdGEucHJvdmlkZXJOb3NbMF07XG5cblx0XHRcdFx0XHRcdFx0JHNjb3BlLnJlc291cmNlT3B0aW9uSGFzaFtwcm92aWRlck5vXSA9IHtcblx0XHRcdFx0XHRcdFx0XHQnaWQnOiBwcm92aWRlck5vLFxuXHRcdFx0XHRcdFx0XHRcdCd1dWlkJzogcHJvdmlkZXJObyxcblx0XHRcdFx0XHRcdFx0XHQnbmFtZSc6IHByb3ZpZGVyTm8sXG5cdFx0XHRcdFx0XHRcdFx0J3RpdGxlJzogc2NoZWR1bGVEYXRhLm5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0J2Rpc3BsYXlfbmFtZSc6IHNjaGVkdWxlRGF0YS5uYW1lXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9O1xuXG5cdFx0Ly8gTG9hZCB0aGUgbGlzdCBvZiBhdmFpbGFibGUgc2l0ZXMgZnJvbSB0aGUgQVBJLiAgU2V0cyB0aGUgZm9sbG93aW5nOlxuXHRcdC8vICRzY29wZS5zaXRlcyAtIGEgdGFibGUgdG8gbG9va3VwIGEgc2l0ZSdzIGluZm8gYnkgbmFtZVxuXHRcdC8vICRzY29wZS5zaXRlX29wdGlvbnMgLSB0aGUgb3B0aW9ucyBmb3IgdGhlIHNpdGUgc2VsZWN0aW9uIGRyb3Bkb3duXG5cdFx0JHNjb3BlLmxvYWRTaXRlT3B0aW9ucyA9IGZ1bmN0aW9uIGxvYWRTaXRlT3B0aW9ucygpXG5cdFx0e1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JHNjb3BlLmxvYWRTaXRlcygpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCRzY29wZS5zaXRlcyA9IHt9O1xuXHRcdFx0XHRcdCRzY29wZS5zaXRlT3B0aW9ucyA9IFtdO1xuXHRcdFx0XHRcdGlmKGFuZ3VsYXIuaXNBcnJheShyZXN1bHRzKSAmJiByZXN1bHRzLmxlbmd0aCA+IDApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly8gRmlsbCB1cCBsb29rdXAgdGFibGVcblx0XHRcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCByZXN1bHRzLmxlbmd0aDsgaSsrKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHQkc2NvcGUuc2l0ZXNbcmVzdWx0c1tpXS5uYW1lXSA9IHJlc3VsdHNbaV07XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIENyZWF0ZSB0aGUgZHJvcGRvd24gb3B0aW9uc1xuXHRcdFx0XHRcdFx0JHNjb3BlLnNpdGVPcHRpb25zID0gW1xuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dXVpZDogbnVsbCxcblx0XHRcdFx0XHRcdFx0XHRuYW1lOiBudWxsLFxuXHRcdFx0XHRcdFx0XHRcdGRpc3BsYXlfbmFtZTogXCJBbGxcIixcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XTtcblxuXHRcdFx0XHRcdFx0JHNjb3BlLnNpdGVPcHRpb25zID0gJHNjb3BlLnNpdGVPcHRpb25zLmNvbmNhdChyZXN1bHRzKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5sb2FkU2l0ZXMgPSBmdW5jdGlvbiBsb2FkU2l0ZXMoKVxuXHRcdHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdHNjaGVkdWxlU2VydmljZS5nZXRTaXRlcygpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0cylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciBvdXQgPSBbXTtcblx0XHRcdFx0XHRpZihhbmd1bGFyLmlzQXJyYXkocmVzdWx0cykpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdG91dC5wdXNoKHtcblx0XHRcdFx0XHRcdFx0XHR1dWlkOiByZXN1bHRzW2ldLnNpdGVJZCxcblx0XHRcdFx0XHRcdFx0XHRuYW1lOiByZXN1bHRzW2ldLm5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0ZGlzcGxheV9uYW1lOiByZXN1bHRzW2ldLm5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0Y29sb3I6IHJlc3VsdHNbaV0uYmdDb2xvcixcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUob3V0KTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gV2F0Y2hlc1xuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS9cblxuXHRcdCRzY29wZS4kd2F0Y2goJ3NjaGVkdWxlU2VydmljZS5zZWxlY3RlZERhdGUnLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpXG5cdFx0e1xuXHRcdFx0Ly8gYXZvaWQgcnVubmluZyBmaXJzdCB0aW1lIHRoaXMgZmlyZXMgZHVyaW5nIGluaXRpYWxpemF0aW9uXG5cdFx0XHRpZihuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpXG5cdFx0XHR7XG5cdFx0XHRcdCRzY29wZS5jaGFuZ2VEYXRlKG5ld1ZhbHVlKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQ29uZmlnIEFycmF5XG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09L1xuXG5cdFx0JHNjb3BlLmFwcGx5VWlDb25maWcgPSBmdW5jdGlvbiBhcHBseVVpQ29uZmlnKHVpQ29uZmlnKVxuXHRcdHtcblx0XHRcdCRzY29wZS51aUNvbmZpZ0FwcGxpZWQgPSBhbmd1bGFyLmNvcHkodWlDb25maWcpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuaW5pdEV2ZW50c0F1dG9SZWZyZXNoID0gZnVuY3Rpb24gaW5pdEV2ZW50c0F1dG9SZWZyZXNoKClcblx0XHR7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHQvLyBpZiB0aGVyZSBpcyBhbHJlYWR5IGEgcmVmcmVzaCBzZXQgdXAsIHN0b3AgaXRcblx0XHRcdHZhciByZWZyZXNoID0gJHNjb3BlLnNjaGVkdWxlQXV0b1JlZnJlc2g7XG5cdFx0XHRpZihyZWZyZXNoICE9PSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRjbGVhckludGVydmFsKHJlZnJlc2gpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBnZXQgdGhlIHJlZnJlc2ggaW50ZXJ2YWwgZnJvbSBwcmVmZXJlbmNlcywgb3IgdXNlIGRlZmF1bHRcblx0XHRcdHZhciBtaW51dGVzID0gJHNjb3BlLnNjaGVkdWxlQXV0b1JlZnJlc2hNaW51dGVzO1xuXHRcdFx0aWYoIUp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKG1pbnV0ZXMpIHx8ICFKdW5vLkNvbW1vbi5VdGlsLmlzSW50ZWdlclN0cmluZyhtaW51dGVzKSlcblx0XHRcdHtcblx0XHRcdFx0bWludXRlcyA9ICRzY29wZS5kZWZhdWx0QXV0b1JlZnJlc2hNaW51dGVzO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRtaW51dGVzID0gcGFyc2VJbnQobWludXRlcyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmKG1pbnV0ZXMgPiAwKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBzdGFydCB0aGUgYXV0byByZWZyZXNoIGFuZCBzYXZlIGl0cyBJRCB0byBnbG9iYWwgc3RhdGVcblx0XHRcdFx0JHNjb3BlLnNjaGVkdWxlQXV0b1JlZnJlc2ggPSBzZXRJbnRlcnZhbCgkc2NvcGUucmVmZXRjaEV2ZW50cywgbWludXRlcyAqIDYwICogMTAwMCk7XG5cdFx0XHR9XG5cblx0XHRcdGRlZmVycmVkLnJlc29sdmUoKTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fTtcblxuXHRcdC8vIEFueSBjaGFuZ2VzIHRvIHRoaXMgYXJyYXkgbmVlZCB0byBiZSBhcHBsaWVkIGJ5IGNhbGxpbmcgYXBwbHlVaUNvbmZpZygpXG5cdFx0JHNjb3BlLnVpQ29uZmlnID0ge1xuXHRcdFx0Y2FsZW5kYXI6IHtcblx0XHRcdFx0aGVpZ2h0OiAnYXV0bycsIC8vJHNjb3BlLmdldF9zY2hlZHVsZV9oZWlnaHQoKSxcblx0XHRcdFx0bm93SW5kaWNhdG9yOiB0cnVlLFxuXHRcdFx0XHRoZWFkZXI6IHtcblx0XHRcdFx0XHRsZWZ0OiAncHJldixuZXh0IHRvZGF5IHRpdGxlJyxcblx0XHRcdFx0XHRjZW50ZXI6ICcnLFxuXHRcdFx0XHRcdHJpZ2h0OiAnJ1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdGFsbERheVNsb3Q6IGZhbHNlLFxuXG5cdFx0XHRcdGRlZmF1bHRWaWV3OiBudWxsLFxuXHRcdFx0XHRkZWZhdWx0RGF0ZTogJHNjb3BlLmRlZmF1bHREYXRlLFxuXHRcdFx0XHRzbG90RHVyYXRpb246ICRzY29wZS5zZWxlY3RlZFRpbWVJbnRlcnZhbCxcblx0XHRcdFx0c2xvdExhYmVsSW50ZXJ2YWw6ICRzY29wZS5zZWxlY3RlZFRpbWVJbnRlcnZhbCxcblx0XHRcdFx0c2xvdExhYmVsRm9ybWF0OiAnaDptbWEnLFxuXG5cdFx0XHRcdGxvYWRpbmc6ICRzY29wZS5zZXRDYWxlbmRhckxvYWRpbmcsXG5cblx0XHRcdFx0c2VsZWN0YWJsZTogdHJ1ZSxcblx0XHRcdFx0c2VsZWN0OiAkc2NvcGUub3BlbkNyZWF0ZUV2ZW50RGlhbG9nLFxuXHRcdFx0XHRldmVudENsaWNrOiAkc2NvcGUub25FdmVudENsaWNrZWQsXG5cdFx0XHRcdGV2ZW50UmVuZGVyOiAkc2NvcGUub25FdmVudFJlbmRlcixcblx0XHRcdFx0dmlld1JlbmRlcjogJHNjb3BlLm9uVmlld1JlbmRlcixcblx0XHRcdFx0ZXZlbnRBZnRlckFsbFJlbmRlcjogJHNjb3BlLmFmdGVyUmVuZGVyLFxuXG5cdFx0XHRcdGVkaXRhYmxlOiB0cnVlLFxuXHRcdFx0XHRldmVudERyb3A6ICRzY29wZS5vbkV2ZW50RHJvcCxcblx0XHRcdFx0ZXZlbnRSZXNpemU6ICRzY29wZS5vbkV2ZW50UmVzaXplLFxuXHRcdFx0XHRzY2hlZHVsZXJMaWNlbnNlS2V5OiBcIkdQTC1NeS1Qcm9qZWN0LUlzLU9wZW4tU291cmNlXCJcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0JHNjb3BlLmluaXQoKTtcblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ1NldHRpbmdzJykuY29udHJvbGxlcignU2V0dGluZ3MuQ2hhbmdlUGFzc3dvcmRDb250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJHVpYk1vZGFsSW5zdGFuY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkdWliTW9kYWxJbnN0YW5jZSlcblx0e1xuXG5cdFx0JHNjb3BlLmNsb3NlID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKFwiU29tZW9uZSBDbG9zZWQgTWVcIik7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZygncGFzc3dvcmQgc2F2ZWQgLSBOT1QnKTtcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKFwiU29tZW9uZSBTYXZlZCBNZVwiKTtcblx0XHR9O1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdTZXR0aW5ncycsIFsnQ29tbW9uJywgJ0NvbW1vbi5TZXJ2aWNlcyddKTsiLCJhbmd1bGFyLm1vZHVsZSgnU2V0dGluZ3MnKS5jb250cm9sbGVyKCdTZXR0aW5ncy5RdWlja0xpbmtDb250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJHVpYk1vZGFsSW5zdGFuY2UnLFxuXG5cdGZ1bmN0aW9uKFxuXHRcdCRzY29wZSxcblx0XHQkdWliTW9kYWxJbnN0YW5jZSlcblx0e1xuXG5cdFx0JHNjb3BlLnFsbCA9IHt9O1xuXG5cdFx0JHNjb3BlLmNsb3NlID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKCk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5hZGRRdWlja0xpbmsgPSBmdW5jdGlvbihxbEZvcm0pXG5cdFx0e1xuXHRcdFx0aWYgKHFsRm9ybS4kdmFsaWQpXG5cdFx0XHR7XG5cdFx0XHRcdC8vXHRhbGVydCgkc2NvcGUucWxsLnRvU291cmNlKCkpO1xuXHRcdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSgkc2NvcGUucWxsKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5dKTsiLCJhbmd1bGFyLm1vZHVsZSgnU2V0dGluZ3MnKS5jb250cm9sbGVyKCdTZXR0aW5ncy5TZXR0aW5nc0NvbnRyb2xsZXInLCBbXG5cblx0JyRzY29wZScsXG5cdCckaHR0cCcsXG5cdCckc3RhdGUnLFxuXHQnJHVpYk1vZGFsJyxcblx0JyRmaWx0ZXInLFxuXHQncHJvdmlkZXJMaXN0Jyxcblx0J3VzZXInLFxuXHQnYmlsbGluZ1NlcnZpY2VUeXBlcycsXG5cdCdsb2FkZWRTZXR0aW5ncycsXG5cdCdwcm92aWRlclNlcnZpY2UnLFxuXHQnZW5jb3VudGVyRm9ybXMnLFxuXHQnZWZvcm1zJyxcblx0J3RlYW1zJyxcblx0J2dyb3VwTmFtZXMnLFxuXHQnbG9hZGVkQXBwcycsXG5cdCdhcHBTZXJ2aWNlJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JGh0dHAsXG5cdFx0JHN0YXRlLFxuXHRcdCR1aWJNb2RhbCxcblx0XHQkZmlsdGVyLFxuXHRcdHByb3ZpZGVyTGlzdCxcblx0XHR1c2VyLFxuXHRcdGJpbGxpbmdTZXJ2aWNlVHlwZXMsXG5cdFx0bG9hZGVkU2V0dGluZ3MsXG5cdFx0cHJvdmlkZXJTZXJ2aWNlLFxuXHRcdGVuY291bnRlckZvcm1zLFxuXHRcdGVmb3Jtcyxcblx0XHR0ZWFtcyxcblx0XHRncm91cE5hbWVzLFxuXHRcdGxvYWRlZEFwcHMsXG5cdFx0YXBwU2VydmljZSlcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0JHNjb3BlLiRlbWl0KCdjb25maWd1cmVTaG93UGF0aWVudExpc3QnLCBmYWxzZSk7XG5cblx0XHRjb250cm9sbGVyLnByb3ZpZGVyTGlzdCA9IHByb3ZpZGVyTGlzdDtcblx0XHRjb250cm9sbGVyLnVzZXIgPSB1c2VyO1xuXHRcdGNvbnRyb2xsZXIuYmlsbGluZ1NlcnZpY2VUeXBlcyA9IGJpbGxpbmdTZXJ2aWNlVHlwZXM7XG5cdFx0Y29udHJvbGxlci5wcmVmID0gbG9hZGVkU2V0dGluZ3M7XG5cdFx0Y29udHJvbGxlci5lbmNvdW50ZXJGb3JtcyA9IGVuY291bnRlckZvcm1zLmNvbnRlbnQ7XG5cdFx0Y29udHJvbGxlci5lZm9ybXMgPSBlZm9ybXM7XG5cdFx0Y29udHJvbGxlci5sb2FkZWRBcHBzID0gbG9hZGVkQXBwcztcblxuXHRcdGlmIChjb250cm9sbGVyLnByZWYucmVjZW50UGF0aWVudHMgPT0gbnVsbClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnByZWYucmVjZW50UGF0aWVudHMgPSBcIjhcIjtcblx0XHR9XG5cblx0XHQvL2NvbnZlcnQgdG8gdmFsdWUvbGFiZWwgb2JqZWN0IGxpc3QgZnJvbSBzdHJpbmcgYXJyYXlcblx0XHRjb250cm9sbGVyLmZvcm1Hcm91cE5hbWVzID0gW1xuXHRcdHtcblx0XHRcdFwidmFsdWVcIjogXCJcIixcblx0XHRcdFwibGFiZWxcIjogXCJOb25lXCJcblx0XHR9XTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGdyb3VwTmFtZXMubGVuZ3RoOyBpKyspXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5mb3JtR3JvdXBOYW1lcy5wdXNoKFxuXHRcdFx0e1xuXHRcdFx0XHRcInZhbHVlXCI6IGdyb3VwTmFtZXNbaV0sXG5cdFx0XHRcdFwibGFiZWxcIjogZ3JvdXBOYW1lc1tpXVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cblx0XHQvL2NvbnZlcnQgdG8gdmFsdWUvbGFiZWwgb2JqIGxpc3QuIEFkZCBhbGwvbm9uZVxuXHRcdGNvbnRyb2xsZXIudGVhbXMgPSBbXG5cdFx0e1xuXHRcdFx0XCJ2YWx1ZVwiOiBcIi0xXCIsXG5cdFx0XHRcImxhYmVsXCI6IFwiQWxsXCJcblx0XHR9XTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRlYW1zLmxlbmd0aDsgaSsrKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIudGVhbXMucHVzaChcblx0XHRcdHtcblx0XHRcdFx0XCJ2YWx1ZVwiOiB0ZWFtc1tpXSxcblx0XHRcdFx0XCJsYWJlbFwiOiB0ZWFtc1tpXVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGNvbnRyb2xsZXIudGVhbXMucHVzaChcblx0XHR7XG5cdFx0XHRcInZhbHVlXCI6IFwiXCIsXG5cdFx0XHRcImxhYmVsXCI6IFwiTm9uZVwiXG5cdFx0fSk7XG5cblx0XHQvL2FkZCBub25lIC1vcHRpb24gdG8gc3RhcnQuXG5cdFx0Y29udHJvbGxlci5iaWxsaW5nU2VydmljZVR5cGVzTW9kID0gW107XG5cdFx0YW5ndWxhci5jb3B5KGNvbnRyb2xsZXIuYmlsbGluZ1NlcnZpY2VUeXBlcywgY29udHJvbGxlci5iaWxsaW5nU2VydmljZVR5cGVzTW9kKTtcblx0XHRjb250cm9sbGVyLmJpbGxpbmdTZXJ2aWNlVHlwZXNNb2Quc3BsaWNlKDAsIDAsXG5cdFx0e1xuXHRcdFx0XCJ0eXBlXCI6IFwibm9cIixcblx0XHRcdFwibmFtZVwiOiBcIi0tTm9uZS0tXCJcblx0XHR9KTtcblxuXHRcdC8vdGhpcyBuZWVkcyB0byBiZSBkb25lIHRvIGRvIHRoZSB3ZWlyZCBjaGVja2JveCBsaXN0cy4gYmFzaWNhbGx5IGFkZCBhIHByb3BlcnR5IHRvIGVhY2ggZW5jb3VudGVyTGlzdCBvYmplY3QgY2FsbGVkIGNoZWNrZWQ6W3RydWV8ZmFsc2VdXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb250cm9sbGVyLnByZWYuYXBwb2ludG1lbnRTY3JlZW5Gb3Jtcy5sZW5ndGg7IGkrKylcblx0XHR7XG5cdFx0XHR2YXIgc2VsZWN0ZWQgPSAkZmlsdGVyKCdmaWx0ZXInKShjb250cm9sbGVyLmVuY291bnRlckZvcm1zLFxuXHRcdFx0e1xuXHRcdFx0XHRmb3JtTmFtZTogY29udHJvbGxlci5wcmVmLmFwcG9pbnRtZW50U2NyZWVuRm9ybXNbaV1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKHNlbGVjdGVkICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGZvciAodmFyIHggPSAwOyB4IDwgc2VsZWN0ZWQubGVuZ3RoOyB4KyspXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAoc2VsZWN0ZWRbeF0uZm9ybU5hbWUgPT09IGNvbnRyb2xsZXIucHJlZi5hcHBvaW50bWVudFNjcmVlbkZvcm1zW2ldKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHNlbGVjdGVkW3hdLmNoZWNrZWQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vdGhpcyBuZWVkcyB0byBiZSBkb25lIHRvIGRvIHRoZSB3ZWlyZCBjaGVja2JveCBsaXN0cy4gYmFzaWNhbGx5IGFkZCBhIHByb3BlcnR5IHRvIGVhY2ggZW5jb3VudGVyTGlzdCBvYmplY3QgY2FsbGVkIGNoZWNrZWQ6W3RydWV8ZmFsc2VdXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb250cm9sbGVyLnByZWYuYXBwb2ludG1lbnRTY3JlZW5FZm9ybXMubGVuZ3RoOyBpKyspXG5cdFx0e1xuXHRcdFx0dmFyIHNlbGVjdGVkID0gJGZpbHRlcignZmlsdGVyJykoY29udHJvbGxlci5lZm9ybXMsXG5cdFx0XHR7XG5cdFx0XHRcdGlkOiBjb250cm9sbGVyLnByZWYuYXBwb2ludG1lbnRTY3JlZW5FZm9ybXNbaV1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKHNlbGVjdGVkICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGZvciAodmFyIHggPSAwOyB4IDwgc2VsZWN0ZWQubGVuZ3RoOyB4KyspXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAoc2VsZWN0ZWRbeF0uaWQgPT09IGNvbnRyb2xsZXIucHJlZi5hcHBvaW50bWVudFNjcmVlbkVmb3Jtc1tpXSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRzZWxlY3RlZFt4XS5jaGVja2VkID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblxuXHRcdGNvbnRyb2xsZXIudGFicyA9IFtcblx0XHR7XG5cdFx0XHRpZDogMCxcblx0XHRcdGRpc3BsYXlOYW1lOiAnUGVyc29uYScsXG5cdFx0XHRwYXRoOiAncGVyc29uYSdcblx0XHR9LFxuXHRcdHtcblx0XHRcdGlkOiAxLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdHZW5lcmFsJyxcblx0XHRcdHBhdGg6ICdnZW5lcmFsJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0aWQ6IDIsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ1NjaGVkdWxlJyxcblx0XHRcdHBhdGg6ICdzY2hlZHVsZSdcblx0XHR9LFxuXHRcdHtcblx0XHRcdGlkOiAzLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdCaWxsaW5nJyxcblx0XHRcdHBhdGg6ICdiaWxsaW5nJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0aWQ6IDQsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ1J4Jyxcblx0XHRcdHBhdGg6ICdyeCdcblx0XHR9LFxuXHRcdHtcblx0XHRcdGlkOiA1LFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdNYXN0ZXIgRGVtb2dyYXBoaWMnLFxuXHRcdFx0cGF0aDogJ21hc3RlcmRlbW8nXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRpZDogNixcblx0XHRcdGRpc3BsYXlOYW1lOiAnQ29uc3VsdGF0aW9ucycsXG5cdFx0XHRwYXRoOiAnY29uc3VsdHMnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRpZDogNyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnRG9jdW1lbnRzJyxcblx0XHRcdHBhdGg6ICdkb2N1bWVudHMnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRpZDogOCxcblx0XHRcdGRpc3BsYXlOYW1lOiAnU3VtbWFyeScsXG5cdFx0XHRwYXRoOiAnc3VtbWFyeSdcblx0XHR9LFxuXHRcdHtcblx0XHRcdGlkOiA5LFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdlRm9ybXMnLFxuXHRcdFx0cGF0aDogJ2Vmb3Jtcydcblx0XHR9LFxuXHRcdHtcblx0XHRcdGlkOiAxMCxcblx0XHRcdGRpc3BsYXlOYW1lOiAnSW5ib3gnLFxuXHRcdFx0cGF0aDogJ2luYm94J1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0aWQ6IDExLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdQcm9ncmFtcycsXG5cdFx0XHRwYXRoOiAncHJvZ3JhbXMnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRpZDogMTIsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ0ludGVncmF0aW9uJyxcblx0XHRcdHBhdGg6ICdpbnRlZ3JhdGlvbidcblx0XHR9LCBdO1xuXHRcdGNvbnRyb2xsZXIucGFnZVNpemVzID0gW1xuXHRcdHtcblx0XHRcdHZhbHVlOiAnUGFnZVNpemUuQTQnLFxuXHRcdFx0bGFiZWw6ICdBNCdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnUGFnZVNpemUuQTYnLFxuXHRcdFx0bGFiZWw6ICdBNidcblx0XHR9XTtcblxuXHRcdGNvbnRyb2xsZXIucnhJbnRlcmFjdGlvbldhcm5pbmdMZXZlbHMgPSBbXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICcwJyxcblx0XHRcdGxhYmVsOiAnTm90IFNwZWNpZmllZCdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnMScsXG5cdFx0XHRsYWJlbDogJ0xvdydcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnMicsXG5cdFx0XHRsYWJlbDogJ01lZGl1bSdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnMycsXG5cdFx0XHRsYWJlbDogJ0hpZ2gnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJzQnLFxuXHRcdFx0bGFiZWw6ICdOb25lJ1xuXHRcdH1dO1xuXG5cdFx0Y29udHJvbGxlci5zdGFsZURhdGVzID0gW1xuXHRcdHtcblx0XHRcdHZhbHVlOiAnQScsXG5cdFx0XHRsYWJlbDogJ0FsbCdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnMCcsXG5cdFx0XHRsYWJlbDogJzAnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy0xJyxcblx0XHRcdGxhYmVsOiAnLTEnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy0yJyxcblx0XHRcdGxhYmVsOiAnMidcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTMnLFxuXHRcdFx0bGFiZWw6ICczJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICctNCcsXG5cdFx0XHRsYWJlbDogJzQnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy01Jyxcblx0XHRcdGxhYmVsOiAnNSdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTYnLFxuXHRcdFx0bGFiZWw6ICc2J1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICctNycsXG5cdFx0XHRsYWJlbDogJzcnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy04Jyxcblx0XHRcdGxhYmVsOiAnOCdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTknLFxuXHRcdFx0bGFiZWw6ICc5J1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICctMTAnLFxuXHRcdFx0bGFiZWw6ICcxMCdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTExJyxcblx0XHRcdGxhYmVsOiAnMTEnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy0xMicsXG5cdFx0XHRsYWJlbDogJzEyJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICctMTMnLFxuXHRcdFx0bGFiZWw6ICcxMydcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTE0Jyxcblx0XHRcdGxhYmVsOiAnMTQnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy0xNScsXG5cdFx0XHRsYWJlbDogJzE1J1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICctMTYnLFxuXHRcdFx0bGFiZWw6ICcxNidcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTE3Jyxcblx0XHRcdGxhYmVsOiAnMTcnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy0xOCcsXG5cdFx0XHRsYWJlbDogJzE4J1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICctMTknLFxuXHRcdFx0bGFiZWw6ICcxOSdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTIwJyxcblx0XHRcdGxhYmVsOiAnMjAnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy0yMScsXG5cdFx0XHRsYWJlbDogJzIxJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICctMjInLFxuXHRcdFx0bGFiZWw6ICcyMidcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTIzJyxcblx0XHRcdGxhYmVsOiAnMjMnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy0yNCcsXG5cdFx0XHRsYWJlbDogJzI0J1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICctMjUnLFxuXHRcdFx0bGFiZWw6ICcyNSdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTI2Jyxcblx0XHRcdGxhYmVsOiAnMjYnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy0yNycsXG5cdFx0XHRsYWJlbDogJzI3J1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICctMjgnLFxuXHRcdFx0bGFiZWw6ICcyOCdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTI5Jyxcblx0XHRcdGxhYmVsOiAnMjknXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy0zMCcsXG5cdFx0XHRsYWJlbDogJzMwJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICctMzEnLFxuXHRcdFx0bGFiZWw6ICczMSdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTMyJyxcblx0XHRcdGxhYmVsOiAnMzInXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy0zMycsXG5cdFx0XHRsYWJlbDogJzMzJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICctMzQnLFxuXHRcdFx0bGFiZWw6ICczNCdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHZhbHVlOiAnLTM1Jyxcblx0XHRcdGxhYmVsOiAnMzUnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJy0zNicsXG5cdFx0XHRsYWJlbDogJzM2J1xuXHRcdH0sIF07XG5cblx0XHRjb250cm9sbGVyLm9saXNMYWJzID0gW1xuXHRcdHtcblx0XHRcdHZhbHVlOiAnJyxcblx0XHRcdGxhYmVsOiAnJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dmFsdWU6ICc1NTUyJyxcblx0XHRcdGxhYmVsOiAnR2FtbWEtRHluYWNhcmUnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJzU0MDcnLFxuXHRcdFx0bGFiZWw6ICdDTUwnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJzU2ODcnLFxuXHRcdFx0bGFiZWw6ICdMaWZlTGFicydcblx0XHR9XTtcblxuXHRcdGNvbnRyb2xsZXIucGFzdGVGb3JtYXRzID0gW1xuXHRcdHtcblx0XHRcdHZhbHVlOiAnc2luZ2xlJyxcblx0XHRcdGxhYmVsOiAnU2luZ2xlIExpbmUnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJ211bHRpJyxcblx0XHRcdGxhYmVsOiAnTXVsdGkgTGluZSdcblx0XHR9XTtcblxuXHRcdGNvbnRyb2xsZXIubGV0dGVySGVhZE5hbWVEZWZhdWx0cyA9IFtcblx0XHR7XG5cdFx0XHR2YWx1ZTogJzEnLFxuXHRcdFx0bGFiZWw6ICdQcm92aWRlciAodXNlciknXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJzInLFxuXHRcdFx0bGFiZWw6ICdNUlAnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR2YWx1ZTogJzMnLFxuXHRcdFx0bGFiZWw6ICdDbGluaWMnXG5cdFx0fV07XG5cblx0XHRpZiAoY29udHJvbGxlci5wcmVmLmNvbnN1bHRhdGlvbkxldHRlckhlYWROYW1lRGVmYXVsdCA9PSBudWxsKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIucHJlZi5jb25zdWx0YXRpb25MZXR0ZXJIZWFkTmFtZURlZmF1bHQgPSBcIjFcIjtcblx0XHR9XG5cblxuXHRcdGlmICgkc3RhdGUuY3VycmVudC5kYXRhICE9PSB1bmRlZmluZWQpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5jdXJyZW50VGFiID0gJGZpbHRlcignZmlsdGVyJykoY29udHJvbGxlci50YWJzLCB7cGF0aDogJHN0YXRlLmN1cnJlbnQuZGF0YS50YWJ9KVswXTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIuY3VycmVudFRhYiA9IGNvbnRyb2xsZXIudGFic1swXTtcblx0XHR9XG5cblxuXHRcdGNvbnRyb2xsZXIuaXNBY3RpdmUgPSBmdW5jdGlvbih0YWIpXG5cdFx0e1xuXHRcdFx0cmV0dXJuICh0YWIgIT0gbnVsbCAmJiBjb250cm9sbGVyLmN1cnJlbnRUYWIgIT0gbnVsbCAmJiB0YWIuaWQgPT0gY29udHJvbGxlci5jdXJyZW50VGFiLmlkKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jaGFuZ2VUYWIgPSBmdW5jdGlvbih0YWIpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5jdXJyZW50VGFiID0gdGFiO1xuXHRcdFx0JHN0YXRlLmdvKCdzZXR0aW5ncy4nICsgdGFiLnBhdGgpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmUgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0dmFyIG5ld0xpc3QgPSBbXTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY29udHJvbGxlci5wcmVmLmFwcG9pbnRtZW50U2NyZWVuUXVpY2tMaW5rcy5sZW5ndGg7IGkrKylcblx0XHRcdHtcblx0XHRcdFx0aWYgKGNvbnRyb2xsZXIucHJlZi5hcHBvaW50bWVudFNjcmVlblF1aWNrTGlua3NbaV0uY2hlY2tlZCA9PSBudWxsIHx8IGNvbnRyb2xsZXIucHJlZi5hcHBvaW50bWVudFNjcmVlblF1aWNrTGlua3NbaV0uY2hlY2tlZCA9PSBmYWxzZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5ld0xpc3QucHVzaChcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBjb250cm9sbGVyLnByZWYuYXBwb2ludG1lbnRTY3JlZW5RdWlja0xpbmtzW2ldLm5hbWUsXG5cdFx0XHRcdFx0XHR1cmw6IGNvbnRyb2xsZXIucHJlZi5hcHBvaW50bWVudFNjcmVlblF1aWNrTGlua3NbaV0udXJsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGNvbnRyb2xsZXIucHJlZi5hcHBvaW50bWVudFNjcmVlblF1aWNrTGlua3MgPSBuZXdMaXN0O1xuXG5cdFx0XHRwcm92aWRlclNlcnZpY2Uuc2F2ZVNldHRpbmdzKGNvbnRyb2xsZXIudXNlci5wcm92aWRlck5vLCBjb250cm9sbGVyLnByZWYpLnRoZW4oZnVuY3Rpb24oZGF0YSlcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQoJ3NhdmVkJyk7XG5cdFx0XHR9KTtcblxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmNhbmNlbCA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnByZWYgPSB7fTtcblx0XHRcdCRzdGF0ZS5nbygnZGFzaGJvYXJkJyk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2VsZWN0RW5jb3VudGVyRm9ybXMgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0dmFyIHNlbGVjdGVkID0gJGZpbHRlcignZmlsdGVyJykoY29udHJvbGxlci5lbmNvdW50ZXJGb3Jtcyxcblx0XHRcdHtcblx0XHRcdFx0Y2hlY2tlZDogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0XHR2YXIgdG1wID0gW107XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdGVkLmxlbmd0aDsgaSsrKVxuXHRcdFx0e1xuXHRcdFx0XHR0bXAucHVzaChzZWxlY3RlZFtpXS5mb3JtTmFtZSk7XG5cdFx0XHR9XG5cdFx0XHRjb250cm9sbGVyLnByZWYuYXBwb2ludG1lbnRTY3JlZW5Gb3JtcyA9IHRtcDtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zZWxlY3RFRm9ybXMgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0dmFyIHNlbGVjdGVkID0gJGZpbHRlcignZmlsdGVyJykoY29udHJvbGxlci5lZm9ybXMsXG5cdFx0XHR7XG5cdFx0XHRcdGNoZWNrZWQ6IHRydWVcblx0XHRcdH0pO1xuXHRcdFx0dmFyIHRtcCA9IFtdO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7IGkrKylcblx0XHRcdHtcblx0XHRcdFx0dG1wLnB1c2goc2VsZWN0ZWRbaV0uaWQpO1xuXHRcdFx0fVxuXHRcdFx0Y29udHJvbGxlci5wcmVmLmFwcG9pbnRtZW50U2NyZWVuRWZvcm1zID0gdG1wO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnJlbW92ZVF1aWNrTGlua3MgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0dmFyIG5ld0xpc3QgPSBbXTtcblxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb250cm9sbGVyLnByZWYuYXBwb2ludG1lbnRTY3JlZW5RdWlja0xpbmtzLmxlbmd0aDsgaSsrKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoY29udHJvbGxlci5wcmVmLmFwcG9pbnRtZW50U2NyZWVuUXVpY2tMaW5rc1tpXS5jaGVja2VkID09IG51bGwgfHwgY29udHJvbGxlci5wcmVmLmFwcG9pbnRtZW50U2NyZWVuUXVpY2tMaW5rc1tpXS5jaGVja2VkID09IGZhbHNlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmV3TGlzdC5wdXNoKGNvbnRyb2xsZXIucHJlZi5hcHBvaW50bWVudFNjcmVlblF1aWNrTGlua3NbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjb250cm9sbGVyLnByZWYuYXBwb2ludG1lbnRTY3JlZW5RdWlja0xpbmtzID0gbmV3TGlzdDtcblx0XHR9O1xuXG5cblx0XHRjb250cm9sbGVyLm9wZW5DaGFuZ2VQYXNzd29yZE1vZGFsID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdC8qXG4gICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oe1xuICAgICAgICBcdHRlbXBsYXRlVXJsOiAnc3JjL3NldHRpbmdzL2NoYW5nZVBhc3N3b3JkLmpzcCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ2hhbmdlUGFzc3dvcmRDb250cm9sbGVyJ1xuICAgICAgICB9KTtcbiAgICAgKi9cblx0XHRcdHdpbmRvdy5vcGVuKCcuLi9wcm92aWRlci9wcm92aWRlcmNoYW5nZXBhc3N3b3JkLmpzcCcsICdjaGFuZ2VfcGFzc3dvcmQnLCAnd2lkdGg9NzUwLGhlaWdodD01MDAnKTtcblx0XHR9O1xuXG5cblx0XHRjb250cm9sbGVyLm9wZW5RdWlja0xpbmtNb2RhbCA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKFxuXHRcdFx0e1xuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9zZXR0aW5ncy9xdWlja0xpbmsuanNwJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ1F1aWNrTGlua0NvbnRyb2xsZXInXG5cdFx0XHR9KTtcblxuXHRcdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbihzZWxlY3RlZEl0ZW0pXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChzZWxlY3RlZEl0ZW0gIT0gbnVsbClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChzZWxlY3RlZEl0ZW0gIT0gbnVsbCAmJiBzZWxlY3RlZEl0ZW0ubmFtZSAhPSBudWxsICYmIHNlbGVjdGVkSXRlbS51cmwgIT0gbnVsbClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLnByZWYuYXBwb2ludG1lbnRTY3JlZW5RdWlja0xpbmtzLnB1c2goc2VsZWN0ZWRJdGVtKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmVkaXREb2N1bWVudFRlbXBsYXRlcyA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHR3aW5kb3cub3BlbignLi4vYWRtaW4vZGlzcGxheURvY3VtZW50RGVzY3JpcHRpb25UZW1wbGF0ZS5qc3AnLCAnZG9jdW1lbnRfdGVtcGxhdGVzJywgJ3dpZHRoPTcwMCxoZWlnaHQ9NDUwJyk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2hvd1Byb3ZpZGVyQ29sb3VyUG9wdXAgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0d2luZG93Lm9wZW4oJy4uL3Byb3ZpZGVyL3Byb3ZpZGVyQ29sb3VyUGlja2VyLmpzcCcsICdwcm92aWRlcl9jb2xvdXInLCAnd2lkdGg9NzAwLGhlaWdodD00NTAnKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zaG93RGVmYXVsdEVuY291bnRlcldpbmRvd1NpemVQb3B1cCA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHR3aW5kb3cub3BlbignLi4vc2V0UHJvdmlkZXJTdGFsZURhdGUuZG8/bWV0aG9kPXZpZXdFbmNvdW50ZXJXaW5kb3dTaXplJywgJ2VuY291bnRlcl93aW5kb3dfc3onLCAnd2lkdGg9NzAwLGhlaWdodD00NTAnKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5vcGVuQ29uZmlndXJlRUNoYXJ0Q3BwUG9wdXAgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0d2luZG93Lm9wZW4oJy4uL3Byb3ZpZGVyL0NwcFByZWZlcmVuY2VzLmRvJywgJ2NvbmZpZ3VyZV9lY2hhcnRfY3BwJywgJ3dpZHRoPTcwMCxoZWlnaHQ9NDUwJyk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIub3Blbk1hbmFnZUFQSUNsaWVudFBvcHVwID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdHdpbmRvdy5vcGVuKCcuLi9wcm92aWRlci9jbGllbnRzLmpzcCcsICdhcGlfY2xpZW50cycsICd3aWR0aD03MDAsaGVpZ2h0PTQ1MCcpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLm9wZW5NeU9zY2FyVXNlcm5hbWVQb3B1cCA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHR3aW5kb3cub3BlbignLi4vcHJvdmlkZXIvcHJvdmlkZXJJbmRpdm9JZFNldHRlci5qc3AnLCAnaW52aXZvX3NldHRlcicsICd3aWR0aD03MDAsaGVpZ2h0PTQ1MCcpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmF1dGhlbnRpY2F0ZSA9IGZ1bmN0aW9uKGFwcClcblx0XHR7XG5cdFx0XHR3aW5kb3cub3BlbignLi4vYXBwcy9vYXV0aDEuanNwP2lkPScgKyBhcHAuaWQsICdhcHBBdXRoJywgJ3dpZHRoPTcwMCxoZWlnaHQ9NDUwJyk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucmVmcmVzaEFwcExpc3QgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0Y29uc29sZS5sb2coXCJyZWZyZXNoXCIsIGNvbnRyb2xsZXIubG9hZGVkQXBwcyk7XG5cdFx0XHRhcHBTZXJ2aWNlLmdldEFwcHMoKS50aGVuKGZ1bmN0aW9uKGRhdGEpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmxvYWRlZEFwcHMgPSBkYXRhO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbihlcnJvck1lc3NhZ2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImFwcGxpc3Q6XCIgKyBlcnJvck1lc3NhZ2UpO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdFx0Ly8vXG5cdFx0XHRjb25zb2xlLmxvZyhcInJlZnJlc2hcIiwgY29udHJvbGxlci5sb2FkZWRBcHBzKTtcblx0XHR9O1xuXHR9XG5dKTsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdUaWNrbGVyJywgWydDb21tb24nLCAnQ29tbW9uLlNlcnZpY2VzJywgJ0NvbW1vbi5GaWx0ZXJzJ10pOyIsImFuZ3VsYXIubW9kdWxlKCdUaWNrbGVyJykuY29udHJvbGxlcignVGlja2xlci5UaWNrbGVyQWRkQ29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyR1aWJNb2RhbEluc3RhbmNlJyxcblx0JyRmaWx0ZXInLFxuXHQnJHN0YXRlUGFyYW1zJyxcblx0J2RlbW9ncmFwaGljU2VydmljZScsXG5cdCdkZW1vZ3JhcGhpY3NTZXJ2aWNlJyxcblx0J3Byb3ZpZGVyU2VydmljZScsXG5cdCd0aWNrbGVyU2VydmljZScsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCR1aWJNb2RhbEluc3RhbmNlLFxuXHRcdCRmaWx0ZXIsXG5cdFx0JHN0YXRlUGFyYW1zLFxuXHRcdGRlbW9ncmFwaGljU2VydmljZSxcblx0XHRkZW1vZ3JhcGhpY3NTZXJ2aWNlLFxuXHRcdHByb3ZpZGVyU2VydmljZSxcblx0XHR0aWNrbGVyU2VydmljZSlcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Ly8gaG9sZHMgdGhlIHBhdGllbnQgdHlwZWFoZWFkIHNlbGVjdGlvblxuXHRcdGNvbnRyb2xsZXIuZGVtb2dyYXBoaWNTZWFyY2ggPSBudWxsO1xuXG5cdFx0Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gV2F0Y2hlc1xuXHRcdC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cdFx0Ly8gJHNjb3BlLiR3YXRjaCgnY29udHJvbGxlci5kZW1vZ3JhcGhpY1NlYXJjaCcsXG5cblx0XHQvLyBcdGZ1bmN0aW9uKG5ld192YWx1ZSlcblx0XHQvLyBcdHtcblx0XHQvLyBcdFx0Y29uc29sZS5sb2coJ3dhdGNoaW5nIGRlbW9ncmFwaGljU2VhcmNoOiAnLCBuZXdfdmFsdWUpO1xuXG5cdFx0Ly8gXHRcdGlmIChKdW5vLkNvbW1vbi5VdGlsLmV4aXN0cyhuZXdfdmFsdWUpKVxuXHRcdC8vIFx0XHR7XG5cdFx0Ly8gXHRcdFx0Y29udHJvbGxlci51cGRhdGVEZW1vZ3JhcGhpY05vKG5ld192YWx1ZSk7XG5cdFx0Ly8gXHRcdH1cblx0XHQvLyBcdFx0ZWxzZVxuXHRcdC8vIFx0XHR7XG5cdFx0Ly8gXHRcdFx0Ly8gbm8gc2VsZWN0aW9uXG5cdFx0Ly8gXHRcdFx0Y29udHJvbGxlci51cGRhdGVEZW1vZ3JhcGhpY05vKG51bGwpO1xuXHRcdC8vIFx0XHR9XG5cdFx0Ly8gXHR9LCB0cnVlKTtcblxuXHRcdGNvbnRyb2xsZXIudGlja2xlciA9IHtcblx0XHRcdHRlbXBsYXRlOlxuXHRcdFx0e1xuXHRcdFx0XHRpZDogMSxcblx0XHRcdFx0bmFtZTogJydcblx0XHRcdH0sXG5cdFx0XHRzZXJ2aWNlRGF0ZURhdGU6IG5ldyBEYXRlKCksXG5cdFx0XHRzZXJ2aWNlRGF0ZVRpbWU6IFwiMTI6MDAgQU1cIixcblx0XHRcdHN1Z2dlc3RlZFRleHRJZDogMFxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnByaW9yaXRpZXMgPSBbJ0xvdycsICdOb3JtYWwnLCAnSGlnaCddO1xuXG5cdFx0Ly8gaW5pdGlhbGl6YXRpb25cblx0XHRjb250cm9sbGVyLmluaXQgPSBmdW5jdGlvbiBpbml0KClcblx0XHR7XG5cdFx0XHRpZiAoSnVuby5Db21tb24uVXRpbC5leGlzdHMoJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm8pKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZygnaW5pdGlhbGl6aW5nIGRlbW9ncmFwaGljU2VhcmNoIHByZS1zZWxlY3RlZCcsICRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vKTtcblx0XHRcdFx0ZGVtb2dyYXBoaWNTZXJ2aWNlLmdldERlbW9ncmFwaGljKCRzdGF0ZVBhcmFtcy5kZW1vZ3JhcGhpY05vKS50aGVuKGZ1bmN0aW9uKGRhdGEpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmRlbW9ncmFwaGljU2VhcmNoID0ge1xuXHRcdFx0XHRcdFx0ZGVtb2dyYXBoaWNObzogZGF0YS5kZW1vZ3JhcGhpY05vLFxuXHRcdFx0XHRcdFx0Zmlyc3ROYW1lOiBkYXRhLmZpcnN0TmFtZSxcblx0XHRcdFx0XHRcdGxhc3ROYW1lOiBkYXRhLmxhc3ROYW1lLFxuXHRcdFx0XHRcdFx0bmFtZTogZGF0YS5sYXN0TmFtZSArIFwiLFwiICsgZGF0YS5maXJzdE5hbWUgLy8gRm9yIGRpc3BsYXkgcHVycG9zZXNcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGNvbnRyb2xsZXIudXBkYXRlRGVtb2dyYXBoaWNObyhkYXRhKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdCQoJyN0aW1lcGlja2VyJykudGltZXBpY2tlcih7ZGVmYXVsdFRpbWU6IGNvbnRyb2xsZXIudGlja2xlci5zZXJ2aWNlRGF0ZVRpbWV9KTtcblx0XHR9O1xuXG5cdFx0dGlja2xlclNlcnZpY2UuZ2V0VGV4dFN1Z2dlc3Rpb25zKCkudGhlbihmdW5jdGlvbihkYXRhKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIudGV4dFN1Z2dlc3Rpb25zID0gZGF0YS5jb250ZW50O1xuXHRcdFx0Y29udHJvbGxlci50ZXh0U3VnZ2VzdGlvbnMudW5zaGlmdChcblx0XHRcdHtcblx0XHRcdFx0aWQ6IDAsXG5cdFx0XHRcdHN1Z2dlc3RlZFRleHQ6ICcnXG5cdFx0XHR9KTtcblx0XHR9LCBmdW5jdGlvbihyZWFzb24pXG5cdFx0e1xuXHRcdFx0YWxlcnQocmVhc29uKTtcblx0XHR9KTtcblxuXHRcdGNvbnRyb2xsZXIuY2xvc2UgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoZmFsc2UpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnZhbGlkYXRlID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdHZhciB0ID0gY29udHJvbGxlci50aWNrbGVyO1xuXHRcdFx0Y29udHJvbGxlci5lcnJvcnMgPSBbXTtcblxuXHRcdFx0aWYgKHQuZGVtb2dyYXBoaWMgPT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5lcnJvcnMucHVzaCgnWW91IG11c3Qgc2VsZWN0IGEgcGF0aWVudCcpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHQudGFza0Fzc2lnbmVkVG8gPT0gbnVsbCB8fCB0LnRhc2tBc3NpZ25lZFRvLmxlbmd0aCA9PSAwKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLmVycm9ycy5wdXNoKCdZb3UgbXVzdCBhc3NpZ24gYSBwcm92aWRlcicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHQubWVzc2FnZSA9PSBudWxsIHx8IHQubWVzc2FnZS5sZW5ndGggPT0gMClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5lcnJvcnMucHVzaCgnTWVzc2FnZSBpcyByZXF1aXJlZCcpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGNvbnRyb2xsZXIuZXJyb3JzLmxlbmd0aCA+IDApXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmUgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5zaG93RXJyb3JzID0gdHJ1ZTtcblx0XHRcdGlmICghY29udHJvbGxlci52YWxpZGF0ZSgpKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHZhciB0ID0ge307XG5cdFx0XHR0LmRlbW9ncmFwaGljTm8gPSBjb250cm9sbGVyLnRpY2tsZXIuZGVtb2dyYXBoaWMuZGVtb2dyYXBoaWNObztcblx0XHRcdHQudGFza0Fzc2lnbmVkVG8gPSBjb250cm9sbGVyLnRpY2tsZXIudGFza0Fzc2lnbmVkVG87XG5cdFx0XHR0LnByaW9yaXR5ID0gY29udHJvbGxlci50aWNrbGVyLnByaW9yaXR5O1xuXHRcdFx0dC5zdGF0dXMgPSAnQSc7XG5cdFx0XHR0Lm1lc3NhZ2UgPSBjb250cm9sbGVyLnRpY2tsZXIubWVzc2FnZTtcblxuXHRcdFx0dmFyIGdpdmVuRGF0ZSA9IGNvbnRyb2xsZXIudGlja2xlci5zZXJ2aWNlRGF0ZURhdGU7XG5cdFx0XHR2YXIgZ2l2ZW5UaW1lID0gbW9tZW50KGNvbnRyb2xsZXIudGlja2xlci5zZXJ2aWNlRGF0ZVRpbWUsICdoaDptbSBBJyk7XG5cdFx0XHRnaXZlbkRhdGUuc2V0SG91cnMoZ2l2ZW5UaW1lLmdldCgnaG91cicpKTtcblx0XHRcdGdpdmVuRGF0ZS5zZXRNaW51dGVzKGdpdmVuVGltZS5nZXQoJ21pbnV0ZScpKTtcblxuXHRcdFx0dC5zZXJ2aWNlRGF0ZSA9IGdpdmVuRGF0ZTtcblx0XHRcdHRpY2tsZXJTZXJ2aWNlLmFkZCh0KS50aGVuKGZ1bmN0aW9uKGRhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKHRydWUpO1xuXHRcdFx0fSwgZnVuY3Rpb24ocmVhc29uKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChyZWFzb24pO1xuXHRcdFx0fSk7XG5cblxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnVwZGF0ZURlbW9ncmFwaGljTm8gPSBmdW5jdGlvbiB1cGRhdGVEZW1vZ3JhcGhpY05vKGRlbW8pXG5cdFx0e1xuXHRcdFx0aWYgKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKGRlbW8pKVxuXHRcdFx0e1xuXHRcdFx0XHRkZW1vZ3JhcGhpY1NlcnZpY2UuZ2V0RGVtb2dyYXBoaWMoZGVtby5kZW1vZ3JhcGhpY05vKS50aGVuKGZ1bmN0aW9uKGRhdGEpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQvLyB1cGRhdGUgdGhlIHNlbGVjdGVkIHZhbHVlIG9uIHRoZSB0aWNrbGVyIG9iamVjdFxuXHRcdFx0XHRcdGNvbnRyb2xsZXIudGlja2xlci5kZW1vZ3JhcGhpYyA9IGRhdGE7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3NldCBjb250cm9sbGVyLnRpY2tsZXIuZGVtb2dyYXBoaWM6ICcsIGNvbnRyb2xsZXIudGlja2xlci5kZW1vZ3JhcGhpYyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnRpY2tsZXIuZGVtb2dyYXBoaWMgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNlYXJjaFBhdGllbnRzID0gZnVuY3Rpb24gc2VhcmNoUGF0aWVudHModGVybSlcblx0XHR7XG5cdFx0XHR2YXIgc2VhcmNoID0ge1xuXHRcdFx0XHR0eXBlOiAnTmFtZScsXG5cdFx0XHRcdCd0ZXJtJzogdGVybSxcblx0XHRcdFx0c3RhdHVzOiAnYWN0aXZlJyxcblx0XHRcdFx0aW50ZWdyYXRvcjogZmFsc2UsXG5cdFx0XHRcdG91dG9mZG9tYWluOiB0cnVlXG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIGRlbW9ncmFwaGljc1NlcnZpY2Uuc2VhcmNoKHNlYXJjaCwgMCwgMjUpLnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uKHJlc3VsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR2YXIgcmVzcCA9IFtdO1xuXHRcdFx0XHRcdGZvciAodmFyIHggPSAwOyB4IDwgcmVzdWx0cy5jb250ZW50Lmxlbmd0aDsgeCsrKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJlc3AucHVzaChcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0ZGVtb2dyYXBoaWNObzogcmVzdWx0cy5jb250ZW50W3hdLmRlbW9ncmFwaGljTm8sXG5cdFx0XHRcdFx0XHRcdG5hbWU6IHJlc3VsdHMuY29udGVudFt4XS5sYXN0TmFtZSArICcsJyArIHJlc3VsdHMuY29udGVudFt4XS5maXJzdE5hbWVcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gcmVzcDtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IoZXJyb3JzKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JzKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2VhcmNoUHJvdmlkZXJzID0gZnVuY3Rpb24odmFsKVxuXHRcdHtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdHNlYXJjaFRlcm06IHZhbCxcblx0XHRcdFx0YWN0aXZlOiB0cnVlXG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5zZWFyY2hQcm92aWRlcnMoc2VhcmNoLCAwLCAxMCkudGhlbihmdW5jdGlvbihyZXNwb25zZSlcblx0XHRcdHtcblx0XHRcdFx0dmFyIHJlc3AgPSBbXTtcblx0XHRcdFx0Zm9yICh2YXIgeCA9IDA7IHggPCByZXNwb25zZS5sZW5ndGg7IHgrKylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJlc3AucHVzaChcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRwcm92aWRlck5vOiByZXNwb25zZVt4XS5wcm92aWRlck5vLFxuXHRcdFx0XHRcdFx0bmFtZTogcmVzcG9uc2VbeF0uZmlyc3ROYW1lICsgJyAnICsgcmVzcG9uc2VbeF0ubGFzdE5hbWVcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcmVzcDtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnVwZGF0ZVByb3ZpZGVyTm8gPSBmdW5jdGlvbihpdGVtLCBtb2RlbCwgbGFiZWwpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci50aWNrbGVyLnRhc2tBc3NpZ25lZFRvID0gbW9kZWw7XG5cdFx0XHRjb250cm9sbGVyLnRpY2tsZXIudGFza0Fzc2lnbmVkVG9OYW1lID0gbGFiZWw7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuc2V0U3VnZ2VzdGVkVGV4dCA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHR2YXIgcmVzdWx0cyA9ICRmaWx0ZXIoJ2ZpbHRlcicpKGNvbnRyb2xsZXIudGV4dFN1Z2dlc3Rpb25zLFxuXHRcdFx0e1xuXHRcdFx0XHRpZDogY29udHJvbGxlci50aWNrbGVyLnN1Z2dlc3RlZFRleHRJZFxuXHRcdFx0fSwgdHJ1ZSk7XG5cblx0XHRcdGlmIChyZXN1bHRzICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIudGlja2xlci5tZXNzYWdlID0gcmVzdWx0c1swXS5zdWdnZXN0ZWRUZXh0O1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmFkZE1vbnRoc0Zyb21Ob3cgPSBmdW5jdGlvbihudW0pXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci50aWNrbGVyLnNlcnZpY2VEYXRlRGF0ZSA9IG1vbWVudCgpLmFkZChudW0sICdtb250aHMnKS50b0RhdGUoKTtcblx0XHR9O1xuXHR9XG5dKTsiLCJhbmd1bGFyLm1vZHVsZSgnVGlja2xlcicpLmNvbnRyb2xsZXIoJ1RpY2tsZXIuVGlja2xlckNvbW1lbnRDb250cm9sbGVyJywgW1xuXG5cdCckc2NvcGUnLFxuXHQnJHVpYk1vZGFsSW5zdGFuY2UnLFxuXHQndGlja2xlcicsXG5cblx0ZnVuY3Rpb24oXG5cdFx0JHNjb3BlLFxuXHRcdCR1aWJNb2RhbEluc3RhbmNlLFxuXHRcdHRpY2tsZXIpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXIudGlja2xlciA9IHRpY2tsZXI7XG5cblx0XHRjb250cm9sbGVyLmNsb3NlID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKFwiU29tZW9uZSBDbG9zZWQgTWVcIik7XG5cdFx0fTtcblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ1RpY2tsZXInKS5jb250cm9sbGVyKCdUaWNrbGVyLlRpY2tsZXJMaXN0Q29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyR0aW1lb3V0Jyxcblx0JyRyZXNvdXJjZScsXG5cdCckdWliTW9kYWwnLFxuXHQnJGh0dHAnLFxuXHQnJHN0YXRlUGFyYW1zJyxcblx0JyRmaWx0ZXInLFxuXHQnTmdUYWJsZVBhcmFtcycsXG5cdCdzZWN1cml0eVNlcnZpY2UnLFxuXHQndGlja2xlclNlcnZpY2UnLFxuXHQnbm90ZVNlcnZpY2UnLFxuXHQncHJvdmlkZXJTZXJ2aWNlJyxcblx0J3Byb3ZpZGVycycsXG5cblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JHRpbWVvdXQsXG5cdFx0JHJlc291cmNlLFxuXHRcdCR1aWJNb2RhbCxcblx0XHQkaHR0cCxcblx0XHQkc3RhdGVQYXJhbXMsXG5cdFx0JGZpbHRlcixcblx0XHROZ1RhYmxlUGFyYW1zLFxuXHRcdHNlY3VyaXR5U2VydmljZSxcblx0XHR0aWNrbGVyU2VydmljZSxcblx0XHRub3RlU2VydmljZSxcblx0XHRwcm92aWRlclNlcnZpY2UsXG5cdFx0cHJvdmlkZXJzKVxuXHR7XG5cblx0XHR2YXIgY29udHJvbGxlciA9IHRoaXM7XG5cblx0XHR2YXIgdGlja2xlckFQSSA9ICRyZXNvdXJjZSgnLi4vd3MvcnMvdGlja2xlci90aWNrbGVycycpO1xuXG5cdFx0Y29udHJvbGxlci5sYXN0UmVzcG9uc2UgPSBcIlwiOyAvLyBDYW4gYmUgcmVtb3ZlZD9cblx0XHRjb250cm9sbGVyLnByb3ZpZGVycyA9IHByb3ZpZGVycztcblxuXG5cdFx0c2VjdXJpdHlTZXJ2aWNlLmhhc1JpZ2h0cyhcblx0XHR7XG5cdFx0XHRpdGVtczogW1xuXHRcdFx0e1xuXHRcdFx0XHRvYmplY3ROYW1lOiAnX3RpY2tsZXInLFxuXHRcdFx0XHRwcml2aWxlZ2U6ICd3J1xuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0b2JqZWN0TmFtZTogJ190aWNrbGVyJyxcblx0XHRcdFx0cHJpdmlsZWdlOiAncidcblx0XHRcdH1dXG5cdFx0fSkudGhlbihmdW5jdGlvbihyZXN1bHQpXG5cdFx0e1xuXHRcdFx0aWYgKHJlc3VsdC5jb250ZW50ICE9IG51bGwgJiYgcmVzdWx0LmNvbnRlbnQubGVuZ3RoID09IDIpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIudGlja2xlcldyaXRlQWNjZXNzID0gcmVzdWx0LmNvbnRlbnRbMF07XG5cdFx0XHRcdGNvbnRyb2xsZXIudGlja2xlclJlYWRBY2Nlc3MgPSByZXN1bHQuY29udGVudFsxXTtcblxuXHRcdFx0XHRpZiAoY29udHJvbGxlci50aWNrbGVyUmVhZEFjY2Vzcylcblx0XHRcdFx0e1xuXG5cdFx0XHRcdFx0Ly9vYmplY3Qgd2hpY2ggcmVwcmVzZW50cyBhbGwgdGhlIGZpbHRlcnMsIGluaXRpYWxpemUgc3RhdHVzLlxuXHRcdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoID0ge1xuXHRcdFx0XHRcdFx0c3RhdHVzOiAnQSdcblx0XHRcdFx0XHR9O1xuXG5cblx0XHRcdFx0XHRjb250cm9sbGVyLnRhYmxlUGFyYW1zID0gbmV3IE5nVGFibGVQYXJhbXMoXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cGFnZTogMSwgLy8gc2hvdyBmaXJzdCBwYWdlXG5cdFx0XHRcdFx0XHRjb3VudDogMTAsLy8gaW5pdGlhbCBjb3VudCBwZXIgcGFnZVxuXHRcdFx0XHRcdFx0c29ydGluZzoge1xuXHRcdFx0XHRcdFx0XHRTZXJ2aWNlRGF0ZTogXCJkZXNjXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIHRvdGFsOiAwLCAvLyBsZW5ndGggb2YgZGF0YVxuXHRcdFx0XHRcdFx0Z2V0RGF0YTogZnVuY3Rpb24ocGFyYW1zKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHQvLyBhamF4IHJlcXVlc3QgdG8gYXBpXG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLmNvdW50ID0gcGFyYW1zLnVybCgpLmNvdW50O1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5wYWdlID0gcGFyYW1zLnVybCgpLnBhZ2U7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLmluY2x1ZGVMaW5rcyA9ICd0cnVlJztcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5zZWFyY2guaW5jbHVkZUNvbW1lbnRzID0gJ3RydWUnO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5pbmNsdWRlVXBkYXRlcyA9ICd0cnVlJztcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5zZWFyY2guaW5jbHVkZVByb2dyYW0gPSB0cnVlO1xuXG5cdFx0XHRcdFx0XHRcdC8vIG5lZWQgdG8gcGFyc2Ugb3V0IHRoZSBuZy10YWJsZXMgc29ydCBjb2x1bW4vZGlyZWN0aW9uIHZhbHVlc1xuXHRcdFx0XHRcdFx0XHQvLyBmb3IgdXNlIGluIG91ciBnZXQgcGFyYW1ldGVycy5cblx0XHRcdFx0XHRcdFx0dmFyIG15UmVnZXhwID0gL3NvcnRpbmdcXFsoXFx3KylcXF0vZztcblx0XHRcdFx0XHRcdFx0Zm9yKHZhciBrZXkgaW4gcGFyYW1zLnVybCgpKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIG1hdGNoID0gbXlSZWdleHAuZXhlYyhTdHJpbmcoa2V5KSk7XG5cdFx0XHRcdFx0XHRcdFx0aWYobWF0Y2gpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLnNvcnRDb2x1bW4gPSBtYXRjaFsxXTtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuc2VhcmNoLnNvcnREaXJlY3Rpb24gPSBwYXJhbXMudXJsKClbU3RyaW5nKGtleSldO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGlmIChhbmd1bGFyLmlzRGVmaW5lZCgkc3RhdGVQYXJhbXMuZGVtb2dyYXBoaWNObykpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnNlYXJjaC5kZW1vZ3JhcGhpY05vID0gJHN0YXRlUGFyYW1zLmRlbW9ncmFwaGljTm87XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdGlja2xlckFQSS5nZXQoY29udHJvbGxlci5zZWFyY2gpLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSlcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHBhcmFtcy50b3RhbChkYXRhLnRvdGFsKTsgLy8gcmVjYWwuIHBhZ2UgbmF2IGNvbnRyb2xzXG5cdFx0XHRcdFx0XHRcdFx0dmFyIHRpY2tsZXJMaXN0ID0gZGF0YS5jb250ZW50O1xuXHRcdFx0XHRcdFx0XHRcdC8vIEdyYWIgVVJMcyBmb3IgdGlja2xlciBsaW5rc1xuXHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGlja2xlckxpc3QubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRpY2tsZXJMaXN0W2ldLnRpY2tsZXJMaW5rcy5sZW5ndGggPiAwIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWNrbGVyTGlzdFtpXS50aWNrbGVyTGlua1VybCA9IGNvbnRyb2xsZXIuZ2V0TGlua1VybCh0aWNrbGVyTGlzdFtpXS50aWNrbGVyTGlua3NbMF0pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBkYXRhLmNvbnRlbnQ7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGFsZXJ0KCdmYWlsZWQgdG8gbG9hZCByaWdodHMnKTtcblx0XHRcdH1cblx0XHR9LCBmdW5jdGlvbihyZWFzb24pXG5cdFx0e1xuXHRcdFx0YWxlcnQocmVhc29uKTtcblx0XHR9KTtcblxuXHRcdGNvbnRyb2xsZXIuZG9TZWFyY2ggPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci50YWJsZVBhcmFtcy5yZWxvYWQoKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jbGVhciA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnNlYXJjaCA9IGFuZ3VsYXIuY29weShcblx0XHRcdHtcblx0XHRcdFx0c3RhdHVzOiAnQSdcblx0XHRcdH0pO1xuXHRcdFx0Y29udHJvbGxlci50YWJsZVBhcmFtcy5yZWxvYWQoKTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jaGVja0FsbCA9IGZ1bmN0aW9uIGNoZWNrQWxsKGRhdGEpXG5cdFx0e1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGRhdGEsIGZ1bmN0aW9uKHRpY2tsZXIpXG5cdFx0XHR7XG5cdFx0XHRcdHRpY2tsZXIuY2hlY2tlZCA9IHRydWU7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Ly8gY29udHJvbGxlci5jaGVja0FsbCA9IGZ1bmN0aW9uKClcblx0XHQvLyB7XG5cblx0XHQvLyBcdGFuZ3VsYXIuZm9yRWFjaChjb250cm9sbGVyLmxhc3RSZXNwb25zZSwgZnVuY3Rpb24oaXRlbSlcblx0XHQvLyBcdHtcblx0XHQvLyBcdFx0aXRlbS5jaGVja2VkID0gdHJ1ZTtcblx0XHQvLyBcdH0pO1xuXHRcdC8vIH07XG5cblx0XHRjb250cm9sbGVyLmNoZWNrTm9uZSA9IGZ1bmN0aW9uIGNoZWNrTm9uZShkYXRhKVxuXHRcdHtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChkYXRhLCBmdW5jdGlvbih0aWNrbGVyKVxuXHRcdFx0e1xuXHRcdFx0XHR0aWNrbGVyLmNoZWNrZWQgPSBmYWxzZTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmNvbXBsZXRlVGlja2xlcnMgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0dmFyIHNlbGVjdGVkVGlja2xlcnMgPSBbXTtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChjb250cm9sbGVyLnRhYmxlUGFyYW1zLmRhdGEsIGZ1bmN0aW9uKGl0ZW0pXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChpdGVtLmNoZWNrZWQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzZWxlY3RlZFRpY2tsZXJzLnB1c2goaXRlbS5pZCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHR0aWNrbGVyU2VydmljZS5zZXRDb21wbGV0ZWQoc2VsZWN0ZWRUaWNrbGVycykudGhlbihmdW5jdGlvbihkYXRhKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnRhYmxlUGFyYW1zLnJlbG9hZCgpO1xuXHRcdFx0fSwgZnVuY3Rpb24ocmVhc29uKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChyZWFzb24pO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZGVsZXRlVGlja2xlcnMgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0dmFyIHNlbGVjdGVkVGlja2xlcnMgPSBbXTtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChjb250cm9sbGVyLnRhYmxlUGFyYW1zLmRhdGEsIGZ1bmN0aW9uKGl0ZW0pXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChpdGVtLmNoZWNrZWQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzZWxlY3RlZFRpY2tsZXJzLnB1c2goaXRlbS5pZCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHR0aWNrbGVyU2VydmljZS5zZXREZWxldGVkKHNlbGVjdGVkVGlja2xlcnMpLnRoZW4oZnVuY3Rpb24oZGF0YSlcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci50YWJsZVBhcmFtcy5yZWxvYWQoKTtcblx0XHRcdH0sIGZ1bmN0aW9uKHJlYXNvbilcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQocmVhc29uKTtcblx0XHRcdH0pO1xuXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuYWRkVGlja2xlciA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHR2YXIgd2luZG93UHJvcHMgPSBcImhlaWdodD00MDAsd2lkdGg9NjAwLGxvY2F0aW9uPW5vLHNjcm9sbGJhcnM9eWVzLG1lbnViYXJzPW5vLHRvb2xiYXJzPW5vLHJlc2l6YWJsZT15ZXNcIjtcblx0XHRcdC8vd2luZG93Lm9wZW4oJy4uL3RpY2tsZXIvdGlja2xlckFkZC5qc3AnLCd0aWNrbGVyQWRkJyx3aW5kb3dQcm9wcyk7XG5cblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oXG5cdFx0XHR7XG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnc3JjL3RpY2tsZXIvdGlja2xlckFkZC5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnVGlja2xlci5UaWNrbGVyQWRkQ29udHJvbGxlciBhcyB0aWNrbGVyQWRkQ3RybCcsXG5cdFx0XHRcdGJhY2tkcm9wOiAnc3RhdGljJyxcblx0XHRcdFx0c2l6ZTogJ2xnJ1xuXHRcdFx0fSk7XG5cblx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oZGF0YSlcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ2RhdGEgZnJvbSBtb2RhbEluc3RhbmNlICcgKyBkYXRhKTtcblx0XHRcdFx0aWYgKGRhdGEgIT0gbnVsbCAmJiBkYXRhID09IHRydWUpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb250cm9sbGVyLnRhYmxlUGFyYW1zLnJlbG9hZCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBmdW5jdGlvbihyZWFzb24pXG5cdFx0XHR7XG5cdFx0XHRcdGFsZXJ0KHJlYXNvbik7XG5cdFx0XHR9KTtcblxuXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZWRpdFRpY2tsZXIgPSBmdW5jdGlvbih0aWNrbGVyKVxuXHRcdHtcblxuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbihcblx0XHRcdHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdzcmMvdGlja2xlci90aWNrbGVyVmlldy5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnVGlja2xlci5UaWNrbGVyVmlld0NvbnRyb2xsZXIgYXMgdGlja2xlclZpZXdDdHJsJyxcblx0XHRcdFx0YmFja2Ryb3A6ICdzdGF0aWMnLFxuXHRcdFx0XHRzaXplOiAnbGcnLFxuXHRcdFx0XHRyZXNvbHZlOlxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGlja2xlcjogZnVuY3Rpb24oKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJldHVybiB0aWNrbGVyO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dGlja2xlck5vdGU6IGZ1bmN0aW9uKClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbm90ZVNlcnZpY2UuZ2V0VGlja2xlck5vdGUodGlja2xlci5pZCk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR0aWNrbGVyV3JpdGVBY2Nlc3M6IGZ1bmN0aW9uKClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY29udHJvbGxlci50aWNrbGVyV3JpdGVBY2Nlc3M7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRtZTogZnVuY3Rpb24oKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJldHVybiBwcm92aWRlclNlcnZpY2UuZ2V0TWUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKGRhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdkYXRhIGZyb20gbW9kYWxJbnN0YW5jZSAnICsgZGF0YSk7XG5cdFx0XHRcdGlmIChkYXRhICE9IG51bGwgJiYgZGF0YSA9PSB0cnVlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci50YWJsZVBhcmFtcy5yZWxvYWQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgZnVuY3Rpb24ocmVhc29uKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChyZWFzb24pO1xuXHRcdFx0fSk7XG5cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5lZGl0Tm90ZTIgPSBmdW5jdGlvbih0aWNrbGVyKVxuXHRcdHtcblxuXHRcdFx0bm90ZVNlcnZpY2UuZ2V0VGlja2xlck5vdGUodGlja2xlci5pZCkudGhlbihmdW5jdGlvbihkYXRhKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoZGF0YS50aWNrbGVyTm90ZSAhPSBudWxsKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci50aWNrbGVyTm90ZSA9IGRhdGEudGlja2xlck5vdGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29udHJvbGxlci50aWNrbGVyTm90ZSA9IHtcblx0XHRcdFx0XHRcdFwiZWRpdG9yXCI6IFwieW91XCIsXG5cdFx0XHRcdFx0XHRcIm5vdGVcIjogXCJcIixcblx0XHRcdFx0XHRcdFwibm90ZUlkXCI6IDAsXG5cdFx0XHRcdFx0XHRcIm9ic2VydmF0aW9uRGF0ZVwiOiBcIm5vd1wiLFxuXHRcdFx0XHRcdFx0XCJyZXZpc2lvblwiOiAwXG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy90aWNrbGVyL3RpY2tsZXJOb3RlLmpzcCcsXG5cdFx0XHRcdFx0Y29udHJvbGxlcjogJ1RpY2tsZXIuVGlja2xlck5vdGVDb250cm9sbGVyIGFzIHRpY2tsZXJOb3RlQ3RybCcsXG5cdFx0XHRcdFx0YmFja2Ryb3A6ICdzdGF0aWMnLFxuXHRcdFx0XHRcdHJlc29sdmU6XG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dGlja2xlck5vdGU6IGZ1bmN0aW9uKClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvbnRyb2xsZXIudGlja2xlck5vdGU7XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dGlja2xlcjogZnVuY3Rpb24oKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdGlja2xlcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSwgZnVuY3Rpb24ocmVhc29uKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChyZWFzb24pO1xuXHRcdFx0fSk7XG5cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5zaG93Q29tbWVudHMgPSBmdW5jdGlvbih0aWNrbGVyKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIudGlja2xlciA9IHRpY2tsZXI7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKFxuXHRcdFx0e1xuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3NyYy90aWNrbGVyL3RpY2tsZXJDb21tZW50cy5qc3AnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnVGlja2xlci5UaWNrbGVyQ29tbWVudENvbnRyb2xsZXIgYXMgdGlja2xlckNvbW1lbnRDdHJsJyxcblx0XHRcdFx0YmFja2Ryb3A6ICdzdGF0aWMnLFxuXHRcdFx0XHRyZXNvbHZlOlxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGlja2xlcjogZnVuY3Rpb24oKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJldHVybiBjb250cm9sbGVyLnRpY2tsZXI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5wcmludEFyZWEgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0d2luZG93LnByaW50KCk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZ2V0TGlua1VybCA9IGZ1bmN0aW9uIGdldExpbmtVcmwoaW5wdXQpXG5cdFx0e1xuICAgICAgICAgICAgaWYgKGlucHV0ICE9PSBudWxsICYmIGlucHV0LmlkICE9PSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciB1cmwgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LnRhYmxlTmFtZSA9PT0gJ0NNTCcpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB1cmwgPSBcIi4uL2xhYi9DQS9PTi9DTUxEaXNwbGF5LmpzcD9zZWdtZW50SUQ9XCIgKyBpbnB1dC50YWJsZUlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpbnB1dC50YWJsZU5hbWUgPT09ICdNRFMnKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gXCIuLi9vc2Nhck1EUy9TZWdtZW50RGlzcGxheS5qc3A/c2VnbWVudElEPVwiICsgaW5wdXQudGFibGVJZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5wdXQudGFibGVOYW1lID09PSAnSEw3JylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHVybCA9IFwiLi4vbGFiL0NBL0FMTC9sYWJEaXNwbGF5LmpzcD9zZWdtZW50SUQ9XCIgKyBpbnB1dC50YWJsZUlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpbnB1dC50YWJsZU5hbWUgPT09ICdET0MnKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gXCIuLi9kbXMvTWFuYWdlRG9jdW1lbnQuZG8/bWV0aG9kPWRpc3BsYXkmZG9jX25vPVwiICsgaW5wdXQudGFibGVJZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgICAgIH1cblxuXHRcdH07XG5cdH1cbl0pOyIsImFuZ3VsYXIubW9kdWxlKCdUaWNrbGVyJykuY29udHJvbGxlcignVGlja2xlci5UaWNrbGVyTm90ZUNvbnRyb2xsZXInLCBbXG5cblx0JyRzY29wZScsXG5cdCckdWliTW9kYWxJbnN0YW5jZScsXG5cdCckaHR0cCcsXG5cdCd0aWNrbGVyTm90ZScsXG5cdCd0aWNrbGVyJyxcblx0J25vdGVTZXJ2aWNlJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JHVpYk1vZGFsSW5zdGFuY2UsXG5cdFx0JGh0dHAsXG5cdFx0dGlja2xlck5vdGUsXG5cdFx0dGlja2xlcixcblx0XHRub3RlU2VydmljZSlcblx0e1xuXG5cdFx0dmFyIGNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Y29udHJvbGxlci50aWNrbGVyTm90ZSA9IHRpY2tsZXJOb3RlO1xuXHRcdGNvbnRyb2xsZXIub3JpZ2luYWxOb3RlID0gdGlja2xlck5vdGUubm90ZTtcblx0XHRjb250cm9sbGVyLnRpY2tsZXIgPSB0aWNrbGVyO1xuXG5cdFx0Y29udHJvbGxlci5jbG9zZSA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZShcIlNvbWVvbmUgQ2xvc2VkIE1lXCIpO1xuXHRcdH07XG5cdFx0Y29udHJvbGxlci5zYXZlID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdHZhciB1cGRhdGVkTm90ZSA9IGNvbnRyb2xsZXIudGlja2xlck5vdGUubm90ZTtcblx0XHRcdGNvbnRyb2xsZXIudGlja2xlck5vdGUudGlja2xlciA9IGNvbnRyb2xsZXIudGlja2xlcjtcblxuXHRcdFx0bm90ZVNlcnZpY2Uuc2F2ZVRpY2tsZXJOb3RlKGNvbnRyb2xsZXIudGlja2xlck5vdGUpLnRoZW4oZnVuY3Rpb24oZGF0YSlcblx0XHRcdHtcblx0XHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoXCJTb21lb25lIFNhdmVkIE1lXCIpO1xuXHRcdFx0fSwgZnVuY3Rpb24ocmVhc29uKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydChyZWFzb24pO1xuXHRcdFx0fSk7XG5cdFx0fTtcblx0fVxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ1RpY2tsZXInKS5jb250cm9sbGVyKCdUaWNrbGVyLlRpY2tsZXJWaWV3Q29udHJvbGxlcicsIFtcblxuXHQnJHNjb3BlJyxcblx0JyRmaWx0ZXInLFxuXHQnJHVpYk1vZGFsSW5zdGFuY2UnLFxuXHQnJHRpbWVvdXQnLFxuXHQndGlja2xlcicsXG5cdCd0aWNrbGVyU2VydmljZScsXG5cdCd0aWNrbGVyTm90ZScsXG5cdCd0aWNrbGVyV3JpdGVBY2Nlc3MnLFxuXHQncHJvdmlkZXJTZXJ2aWNlJyxcblx0J21lJyxcblxuXHRmdW5jdGlvbihcblx0XHQkc2NvcGUsXG5cdFx0JGZpbHRlcixcblx0XHQkdWliTW9kYWxJbnN0YW5jZSxcblx0XHQkdGltZW91dCxcblx0XHR0aWNrbGVyLFxuXHRcdHRpY2tsZXJTZXJ2aWNlLFxuXHRcdHRpY2tsZXJOb3RlLFxuXHRcdHRpY2tsZXJXcml0ZUFjY2Vzcyxcblx0XHRwcm92aWRlclNlcnZpY2UsXG5cdFx0bWUpXG5cdHtcblxuXHRcdHZhciBjb250cm9sbGVyID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZSA9IGFuZ3VsYXIuY29weSh0aWNrbGVyKTtcblxuXHRcdGNvbnRyb2xsZXIuc2VydmljZURhdGVJbnB1dCA9IG1vbWVudChjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuc2VydmljZURhdGUpLnRvRGF0ZSgpO1xuXHRcdGNvbnRyb2xsZXIuc2VydmljZVRpbWVJbnB1dCA9IG1vbWVudChjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuc2VydmljZURhdGUpLmZvcm1hdChcImhoOm1tIEFcIik7XG5cblx0XHRjb250cm9sbGVyLm1lID0gbWU7XG5cdFx0Y29udHJvbGxlci50aWNrbGVyV3JpdGVBY2Nlc3MgPSB0aWNrbGVyV3JpdGVBY2Nlc3M7XG5cblx0XHQvL3RoaXMgb2JqZWN0IGtlZXBzIHRyYWNrIG9mIHRoZSBjaGFuZ2VzIGJlaW5nIG1hZGVcblx0XHQvLyBjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUgPSB7XG5cdFx0Ly8gXHRtZXNzYWdlOiBjb250cm9sbGVyLnRpY2tsZXIubWVzc2FnZSxcblxuXHRcdC8vIFx0dGFza0Fzc2lnbmVkVG86IGNvbnRyb2xsZXIudGlja2xlci50YXNrQXNzaWduZWRUbyxcblx0XHQvLyBcdHRhc2tBc3NpZ25lZFRvTmFtZTogY29udHJvbGxlci50aWNrbGVyLnRhc2tBc3NpZ25lZE5hbWUsXG5cdFx0Ly8gXHRzZXJ2aWNlRGF0ZTogJGZpbHRlcignZGF0ZScpKGNvbnRyb2xsZXIudGlja2xlci5zZXJ2aWNlRGF0ZSwgJ3l5eXktTU0tZGQnKSxcblx0XHQvLyBcdHNlcnZpY2VUaW1lOiAkZmlsdGVyKCdkYXRlJykoY29udHJvbGxlci50aWNrbGVyLnNlcnZpY2VEYXRlLCAnSEg6bW0nKSxcblxuXHRcdC8vIH07XG5cblx0XHRjb250cm9sbGVyLm5lZWRzVXBkYXRlID0gZmFsc2U7XG5cdFx0Y29udHJvbGxlci5zaG93VXBkYXRlcyA9IGZhbHNlO1xuXHRcdGNvbnRyb2xsZXIuc2hvd0NvbW1lbnRzID0gZmFsc2U7XG5cdFx0Y29udHJvbGxlci5zaG93Q29tbWVudEZvcm1Db250cm9sID0gZmFsc2U7XG5cblx0XHQvLyBjb250cm9sbGVyLnRhc2tBc3NpZ25lZFRvTmFtZSA9IGNvbnRyb2xsZXIudGlja2xlci50YXNrQXNzaWduZWROYW1lO1xuXHRcdGNvbnRyb2xsZXIucHJpb3JpdGllcyA9IFsnTG93JywgJ05vcm1hbCcsICdIaWdoJ107XG5cdFx0Y29udHJvbGxlci5zdGF0dXNlcyA9IFtcblx0XHR7XG5cdFx0XHRpZDogJ0EnLFxuXHRcdFx0bGFiZWw6ICdBY3RpdmUnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRpZDogJ0MnLFxuXHRcdFx0bGFiZWw6ICdDb21wbGV0ZWQnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRpZDogJ0QnLFxuXHRcdFx0bGFiZWw6ICdEZWxldGVkJ1xuXHRcdH1dO1xuXG5cdFx0aWYgKHRpY2tsZXJOb3RlICE9IG51bGwpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci50aWNrbGVyTm90ZSA9IHRpY2tsZXJOb3RlLnRpY2tsZXJOb3RlO1xuXHRcdH1cblxuXHRcdC8vIEtlZXAgdHJhY2sgb2YgdGhlIGN1cnJlbnQgc3RhdHVzIGFzIGFuIG9iamVjdCBjb250YWluaW5nIGlkIGFuZCBsYWJlbFxuXHRcdGlmICh0aWNrbGVyICE9IG51bGwpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci5zZWxlY3RlZFN0YXR1cyA9IGNvbnRyb2xsZXIuc3RhdHVzZXMuZmluZChmdW5jdGlvbihzdGF0dXMpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBzdGF0dXMuaWQgPT0gdGlja2xlci5zdGF0dXM7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyAkc2NvcGUuJHdhdGNoKCdjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuc2VydmljZURhdGUnLFxuXHRcdC8vIFx0ZnVuY3Rpb24obmV3X3ZhbHVlKVxuXHRcdC8vIFx0e1xuXHRcdC8vIFx0XHRjb25zb2xlLmxvZygnY2hhbmdlJywgbmV3X3ZhbHVlKTtcblxuXHRcdC8vIFx0XHRpZiAoY29udHJvbGxlci50aWNrbGVyVXBkYXRlLnNlcnZpY2VEYXRlIGluc3RhbmNlb2YgRGF0ZSAmJiBjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuc2VydmljZVRpbWUgaW5zdGFuY2VvZiBEYXRlKVxuXHRcdC8vIFx0XHR7XG5cblx0XHQvLyBcdFx0XHRjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuc2VydmljZURhdGUgPSBuZXcgRGF0ZShjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuc2VydmljZURhdGUuZ2V0VGltZSgpICsgY29udHJvbGxlci50aWNrbGVyVXBkYXRlLnNlcnZpY2VUaW1lLmdldFRpbWUoKSk7XG5cblx0XHQvLyBcdFx0XHRjb25zb2xlLmxvZygnbmV3IHZhbCcsIGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS5zZXJ2aWNlRGF0ZSk7XG5cdFx0Ly8gXHRcdH1cblxuXG5cdFx0Ly8gXHR9XG5cdFx0Ly8gKTtcblxuXHRcdC8vIFdhdGNoZXMgdGhlIGRhdGUgaW5wdXQgYW5kIHVwZGF0ZXMgc2VydmljZURhdGUgd2hlbiBhIGNoYW5nZSBpcyBtYWRlXG5cdFx0JHNjb3BlLiR3YXRjaChmdW5jdGlvbigpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBjb250cm9sbGVyLnNlcnZpY2VEYXRlSW5wdXQ7XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24obmV3VmFsdWUpXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBuZXdEYXRlID0gbW9tZW50KG5ld1ZhbHVlLmdldFRpbWUoKSkuZm9ybWF0KFwiTU0tREQtWVlZWVwiKTtcblx0XHRcdFx0dmFyIGZpbmFsVmFsID0gbW9tZW50KG5ld0RhdGUgKyBcIi1cIiArIGNvbnRyb2xsZXIuc2VydmljZVRpbWVJbnB1dCwgJ01NLURELVlZWVktaGg6bW0gQScpLnRvRGF0ZSgpLmdldFRpbWUoKTtcblxuXHRcdFx0XHRjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuc2VydmljZURhdGUgPSBmaW5hbFZhbDtcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0Ly8gV2F0Y2hlcyB0aGUgdGltZSBpbnB1dCBhbmQgdXBkYXRlcyBzZXJ2aWNlRGF0ZSB3aGVuIGEgY2hhbmdlIGlzIG1hZGVcblx0XHQkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIGNvbnRyb2xsZXIuc2VydmljZVRpbWVJbnB1dDtcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbihuZXdWYWx1ZSlcblx0XHRcdHtcblx0XHRcdFx0dmFyIGRhdGUgPSBtb21lbnQoY29udHJvbGxlci5zZXJ2aWNlRGF0ZUlucHV0LmdldFRpbWUoKSkuZm9ybWF0KFwiTU0tREQtWVlZWVwiKTtcblx0XHRcdFx0dmFyIGZpbmFsVmFsID0gbW9tZW50KGRhdGUgKyBcIi1cIiArIG5ld1ZhbHVlLCAnTU0tREQtWVlZWS1oaDptbSBBJykudG9EYXRlKCkuZ2V0VGltZSgpO1xuXG5cdFx0XHRcdGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS5zZXJ2aWNlRGF0ZSA9IGZpbmFsVmFsO1xuXHRcdFx0fVxuXHRcdCk7XG5cblx0XHRjb250cm9sbGVyLmNsb3NlID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGlmIChjb250cm9sbGVyLm5lZWRzVXBkYXRlKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoY29uZmlybShcIllvdSBoYXZlIHVuc2F2ZWQgY2hhbmdlcywgYXJlIHlvdSBzdXJlP1wiKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKGZhbHNlKTtcblx0XHRcdH1cblxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmUgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoXCJTb21lb25lIFNhdmVkIE1lXCIpO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnVwZGF0ZVRhc2tBc3NpZ25lZFRvID0gZnVuY3Rpb24oaXRlbSwgbW9kZWwsIGxhYmVsKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdFx0Y29udHJvbGxlci50aWNrbGVyVXBkYXRlLnRhc2tBc3NpZ25lZFRvID0gbW9kZWw7XG5cdFx0XHRjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUudGFza0Fzc2lnbmVkVG9OYW1lID0gbGFiZWw7XG5cdFx0XHRjb250cm9sbGVyLnNob3dUYXNrQXNzaWduZWRUb0Zvcm1Db250cm9sID0gZmFsc2U7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2FuY2VsVGFza0Fzc2lnbmVkVG9VcGRhdGUgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlci50aWNrbGVyVXBkYXRlLnRhc2tBc3NpZ25lZFRvID0gbnVsbDtcblx0XHRcdGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS50YXNrQXNzaWduZWRUb05hbWUgPSBudWxsO1xuXG5cdFx0XHRjb250cm9sbGVyLnNob3dUYXNrQXNzaWduZWRUb0Zvcm1Db250cm9sID0gZmFsc2U7XG5cblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5lZGl0U2VydmljZURhdGVBbmRUaW1lID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdC8vIGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS5zZXJ2aWNlRGF0ZSA9ICRmaWx0ZXIoJ2RhdGUnKShjb250cm9sbGVyLnRpY2tsZXIuc2VydmljZURhdGUsICd5eXl5LU1NLWRkJyk7XG5cdFx0XHQvLyBjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuc2VydmljZVRpbWUgPSAkZmlsdGVyKCdkYXRlJykoY29udHJvbGxlci50aWNrbGVyLnNlcnZpY2VEYXRlLCAnSEg6bW0nKTtcblxuXHRcdFx0Y29udHJvbGxlci5zaG93U2VydmljZURhdGVBbmRUaW1lRm9ybUNvbnRyb2wgPSB0cnVlO1xuXHRcdH07XG5cblxuXHRcdGNvbnRyb2xsZXIudXBkYXRlU2VydmljZURhdGVBbmRUaW1lID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdHZhciBkcCA9IGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS5zZXJ2aWNlRGF0ZS5zcGxpdChcIi1cIik7XG5cdFx0XHR2YXIgdHAgPSBjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuc2VydmljZVRpbWUuc3BsaXQoXCI6XCIpO1xuXG5cdFx0XHRpZiAoZHAubGVuZ3RoICE9IDMgfHwgdHAubGVuZ3RoICE9IDIpXG5cdFx0XHR7XG5cdFx0XHRcdGFsZXJ0KCdJbnZhbGlkIERhdGUvdGltZS4gUGxlYXNlIHVzZSB5eXl5LU1NLWRkIGFuZCBISDptbSBmb3JtYXRzJyk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGQgPSBuZXcgRGF0ZShkcFswXSwgcGFyc2VJbnQoZHBbMV0pIC0gMSwgZHBbMl0sIHRwWzBdLCB0cFsxXSwgMCwgMCk7XG5cblx0XHRcdGlmIChkID09IG51bGwgfHwgaXNOYU4oZC5nZXRUaW1lKCkpKVxuXHRcdFx0e1xuXHRcdFx0XHRhbGVydCgnSW52YWxpZCBEYXRlL3RpbWUuIFBsZWFzZSB1c2UgeXl5eS1NTS1kZCBhbmQgSEg6bW0gZm9ybWF0cycpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRjb250cm9sbGVyLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHRcdGNvbnRyb2xsZXIudGlja2xlci5zZXJ2aWNlRGF0ZSA9IGQ7XG5cdFx0XHRjb250cm9sbGVyLnNob3dTZXJ2aWNlRGF0ZUFuZFRpbWVGb3JtQ29udHJvbCA9IGZhbHNlO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLmNhbmNlbFNlcnZpY2VEYXRlQW5kVGltZVVwZGF0ZSA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuc2VydmljZURhdGUgPSBudWxsO1xuXHRcdFx0Y29udHJvbGxlci5zaG93U2VydmljZURhdGVBbmRUaW1lRm9ybUNvbnRyb2wgPSBmYWxzZTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5lZGl0UHJpb3JpdHkgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0Ly8gY29udHJvbGxlci50aWNrbGVyVXBkYXRlLnByaW9yaXR5ID0gY29udHJvbGxlci50aWNrbGVyLnByaW9yaXR5O1xuXHRcdFx0Y29udHJvbGxlci5wcmlvcml0aWVzID0gWydMb3cnLCAnTm9ybWFsJywgJ0hpZ2gnXTtcblxuXHRcdFx0Y29udHJvbGxlci5zaG93UHJpb3JpdHlGb3JtQ29udHJvbCA9IHRydWU7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIudXBkYXRlUHJpb3JpdHkgPSBmdW5jdGlvbihuZXdQcmlvcml0eSlcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHRcdC8vIGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS5wcmlvcml0eSA9IG5ld1ByaW9yaXR5OyAvLyBEb24ndCBuZWVkIHRoaXMgYW55bW9yZT9cblx0XHRcdGNvbnRyb2xsZXIuc2hvd1ByaW9yaXR5Rm9ybUNvbnRyb2wgPSBmYWxzZTtcblx0XHR9O1xuXG5cblx0XHRjb250cm9sbGVyLmNhbmNlbFByaW9yaXR5VXBkYXRlID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS5wcmlvcml0eSA9IG51bGw7XG5cdFx0XHRjb250cm9sbGVyLnNob3dQcmlvcml0eUZvcm1Db250cm9sID0gZmFsc2U7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZWRpdFN0YXR1cyA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHQvLyBjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuc3RhdHVzTmFtZSA9IGNvbnRyb2xsZXIudGlja2xlci5zdGF0dXNOYW1lO1xuXHRcdFx0Ly8gY29udHJvbGxlci50aWNrbGVyVXBkYXRlLnN0YXR1cyA9IGNvbnRyb2xsZXIudGlja2xlci5zdGF0dXNOYW1lO1xuXHRcdFx0Y29udHJvbGxlci5zaG93U3RhdHVzRm9ybUNvbnRyb2wgPSB0cnVlO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnVwZGF0ZVN0YXR1cyA9IGZ1bmN0aW9uKHNlbGVjdGVkU3RhdHVzKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdFx0Y29udHJvbGxlci50aWNrbGVyVXBkYXRlLnN0YXR1cyA9IHNlbGVjdGVkU3RhdHVzLmlkO1xuXHRcdFx0Y29udHJvbGxlci50aWNrbGVyVXBkYXRlLnN0YXR1c05hbWUgPSBzZWxlY3RlZFN0YXR1cy5sYWJlbDtcblx0XHRcdGNvbnRyb2xsZXIuc2hvd1N0YXR1c0Zvcm1Db250cm9sID0gZmFsc2U7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuY2FuY2VsU3RhdHVzVXBkYXRlID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS5zdGF0dXNOYW1lID0gbnVsbDtcblx0XHRcdGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS5zdGF0dXMgPSBudWxsO1xuXG5cdFx0XHRjb250cm9sbGVyLnNob3dTdGF0dXNGb3JtQ29udHJvbCA9IGZhbHNlO1xuXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuYWRkQ29tbWVudCA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHQvLyBjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUuY29tbWVudCA9ICcnO1xuXHRcdFx0Y29udHJvbGxlci5zaG93Q29tbWVudEZvcm1Db250cm9sID0gdHJ1ZTtcblxuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmVDb21tZW50ID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdFx0aWYgKGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS50aWNrbGVyQ29tbWVudHMgPT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci50aWNrbGVyVXBkYXRlLnRpY2tsZXJDb21tZW50cyA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGNvbW1lbnQgPSB7XG5cdFx0XHRcdG1lc3NhZ2U6IGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS5jb21tZW50LFxuXHRcdFx0XHRwcm92aWRlck5hbWU6IG1lLmZvcm1hdHRlZE5hbWUsXG5cdFx0XHRcdHByb3ZpZGVyTm86IG1lLnByb3ZpZGVyTm8sXG5cdFx0XHRcdHVwZGF0ZURhdGU6IG5ldyBEYXRlKCksXG5cdFx0XHRcdG5ld0NvbW1lbnQ6IHRydWVcblx0XHRcdH07XG5cdFx0XHRjb250cm9sbGVyLnRpY2tsZXJVcGRhdGUudGlja2xlckNvbW1lbnRzLnVuc2hpZnQoY29tbWVudCk7XG5cdFx0XHRjb250cm9sbGVyLnNob3dDb21tZW50Rm9ybUNvbnRyb2wgPSBmYWxzZTtcblx0XHRcdGNvbnRyb2xsZXIuc2hvd0NvbW1lbnRzID0gdHJ1ZTtcblx0XHR9O1xuXG5cdFx0Y29udHJvbGxlci5jYW5jZWxDb21tZW50VXBkYXRlID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS5jb21tZW50ID0gbnVsbDtcblx0XHRcdGNvbnRyb2xsZXIuc2hvd0NvbW1lbnRGb3JtQ29udHJvbCA9IGZhbHNlO1xuXHRcdH07XG5cblxuXHRcdGNvbnRyb2xsZXIuc2VhcmNoUHJvdmlkZXJzID0gZnVuY3Rpb24odmFsKVxuXHRcdHtcblx0XHRcdHZhciBzZWFyY2ggPSB7XG5cdFx0XHRcdHNlYXJjaFRlcm06IHZhbCxcblx0XHRcdFx0YWN0aXZlOiB0cnVlXG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIHByb3ZpZGVyU2VydmljZS5zZWFyY2hQcm92aWRlcnMoc2VhcmNoLCAwLCAxMCkudGhlbihmdW5jdGlvbihyZXNwb25zZSlcblx0XHRcdHtcblx0XHRcdFx0dmFyIHJlc3AgPSBbXTtcblx0XHRcdFx0Zm9yICh2YXIgeCA9IDA7IHggPCByZXNwb25zZS5sZW5ndGg7IHgrKylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJlc3AucHVzaChcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRwcm92aWRlck5vOiByZXNwb25zZVt4XS5wcm92aWRlck5vLFxuXHRcdFx0XHRcdFx0bmFtZTogcmVzcG9uc2VbeF0uZmlyc3ROYW1lICsgJyAnICsgcmVzcG9uc2VbeF0ubGFzdE5hbWVcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcmVzcDtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjb250cm9sbGVyLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdGlmICh0aWNrbGVyLm1lc3NhZ2UgIT0gY29udHJvbGxlci50aWNrbGVyVXBkYXRlLm1lc3NhZ2UpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRyb2xsZXIubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0Ly8gaWYgKHRpY2tsZXIuc2VydmljZURhdGUgIT0gY29udHJvbGxlci50aWNrbGVyVXBkYXRlLnNlcnZpY2VEYXRlLmdldFRpbWUoKSlcblx0XHRcdC8vIHtcblx0XHRcdC8vIFx0Y29udHJvbGxlci5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHQvLyB9XG5cblx0XHRcdGlmICh0aWNrbGVyLnNlcnZpY2VEYXRlICE9IGNvbnRyb2xsZXIudGlja2xlclVwZGF0ZS5zZXJ2aWNlRGF0ZSlcblx0XHRcdHtcblx0XHRcdFx0Y29udHJvbGxlci5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjb250cm9sbGVyLm5lZWRzVXBkYXRlKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgcG9zdERhdGEgPSBhbmd1bGFyLmNvcHkoY29udHJvbGxlci50aWNrbGVyVXBkYXRlKTtcblx0XHRcdFx0Ly8gaWYgKEp1bm8uQ29tbW9uLlV0aWwuZXhpc3RzKHBvc3REYXRhLnNlcnZpY2VEYXRlKSlcblx0XHRcdFx0Ly8ge1xuXHRcdFx0XHQvLyBcdC8vIHBvc3REYXRhLnNlcnZpY2VEYXRlID0gcG9zdERhdGEuc2VydmljZURhdGUuZ2V0VGltZSgpO1xuXHRcdFx0XHQvLyBcdGNvbnNvbGUubG9nKCdQT1NUIERBVEE6ICcsIHBvc3REYXRhKTtcblx0XHRcdFx0Ly8gfVxuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdQb3N0IERBVEE6ICcsIHBvc3REYXRhKTtcblxuXHRcdFx0XHR0aWNrbGVyU2VydmljZS51cGRhdGUocG9zdERhdGEpLnRoZW4oZnVuY3Rpb24oZGF0YSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKHRydWUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoZmFsc2UpO1xuXHRcdFx0fVxuXG5cdFx0fTtcblxuXG5cdFx0Y29udHJvbGxlci5jb21wbGV0ZVRpY2tsZXIgPSBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0dGlja2xlclNlcnZpY2Uuc2V0Q29tcGxldGVkKFt0aWNrbGVyLmlkXSkudGhlbihmdW5jdGlvbihkYXRhKVxuXHRcdFx0e1xuXHRcdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSh0cnVlKTtcblx0XHRcdH0sIGZ1bmN0aW9uKHJlYXNvbilcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQocmVhc29uKTtcblx0XHRcdH0pO1xuXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIuZGVsZXRlVGlja2xlciA9IGZ1bmN0aW9uKClcblx0XHR7XG5cdFx0XHR0aWNrbGVyU2VydmljZS5zZXREZWxldGVkKFt0aWNrbGVyLmlkXSkudGhlbihmdW5jdGlvbihkYXRhKVxuXHRcdFx0e1xuXHRcdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSh0cnVlKTtcblx0XHRcdH0sIGZ1bmN0aW9uKHJlYXNvbilcblx0XHRcdHtcblx0XHRcdFx0YWxlcnQocmVhc29uKTtcblx0XHRcdH0pO1xuXG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXIucHJpbnRUaWNrbGVyID0gZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdHdpbmRvdy5vcGVuKCcuLi9UaWNrbGVyLmRvP21ldGhvZD1wcmludCZpZD0nICsgdGlja2xlci5pZCk7XG5cblx0XHR9O1xuXHR9XG5dKTsiXSwic291cmNlUm9vdCI6IiJ9