(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e,t,n){this.$http=e,this.$httpParamSerializer=t,this.basePath="http://localhost/",this.defaultHeaders={},void 0!==n&&(this.basePath=n)}return e.prototype.addAppointment=function(e,t){var n={method:"POST",url:this.basePath+"/appointment",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.prototype.deleteAppointment=function(e,t){var n=this.basePath+"/appointment/{appointmentNo}".replace("{appointmentNo}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter appointmentNo was null or undefined when calling deleteAppointment.");var a={method:"DELETE",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.setNextStatus=function(e,t){var n=this.basePath+"/appointment/{appointmentNo}/rotate_status".replace("{appointmentNo}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter appointmentNo was null or undefined when calling setNextStatus.");var a={method:"POST",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.updateAppointment=function(e,t){var n={method:"PUT",url:this.basePath+"/appointment",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.$inject=["$http","$httpParamSerializer","basePath"],e}();t.AppointmentApi=o},,,,,,function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e,t,n){this.$http=e,this.$httpParamSerializer=t,this.basePath="http://localhost/",this.defaultHeaders={},void 0!==n&&(this.basePath=n)}return e.prototype.fetchMonthlyData=function(e,t,n,o){var a=this.basePath+"/schedule/fetchMonthly/{providerNo}/{year}/{month}".replace("{year}",encodeURIComponent(String(e))).replace("{month}",encodeURIComponent(String(t))).replace("{providerNo}",encodeURIComponent(String(n))),r=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter year was null or undefined when calling fetchMonthlyData.");if(null===t||void 0===t)throw new Error("Required parameter month was null or undefined when calling fetchMonthlyData.");if(null===n||void 0===n)throw new Error("Required parameter providerNo was null or undefined when calling fetchMonthlyData.");var i={method:"GET",url:a,params:{},headers:r};return o&&(i=Object.assign(i,o)),this.$http(i)},e.prototype.findExistAppointments=function(e,t){var n=this.basePath+"/schedule/{demographicNo}/appointmentHistory".replace("{demographicNo}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter demographicNo was null or undefined when calling findExistAppointments.");var a={method:"POST",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.getAppointment=function(e,t){var n={method:"POST",url:this.basePath+"/schedule/getAppointment",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.prototype.getAppointmentReasons=function(e){var t={method:"GET",url:this.basePath+"/schedule/reasons",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getAppointmentStatuses=function(e){var t={method:"GET",url:this.basePath+"/schedule/statuses",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getAppointmentTypes=function(e){var t={method:"GET",url:this.basePath+"/schedule/types",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getAppointmentsForDay=function(e,t,n){var o=this.basePath+"/schedule/{providerNo}/day/{date}".replace("{providerNo}",encodeURIComponent(String(e))).replace("{date}",encodeURIComponent(String(t))),a=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter providerNo was null or undefined when calling getAppointmentsForDay.");if(null===t||void 0===t)throw new Error("Required parameter date was null or undefined when calling getAppointmentsForDay.");var r={method:"GET",url:o,params:{},headers:a};return n&&(r=Object.assign(r,n)),this.$http(r)},e.prototype.getAppointmentsForDay1=function(e,t){var n=this.basePath+"/schedule/day/{date}".replace("{date}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter date was null or undefined when calling getAppointmentsForDay1.");var a={method:"GET",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.getCalendarAppointmentStatuses=function(e){var t={method:"GET",url:this.basePath+"/schedule/calendar/statuses",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getCalendarEvents=function(e,t,n,o,a){var r=this.basePath+"/schedule/calendar/{providerId}".replace("{providerId}",encodeURIComponent(String(e))),i={},l=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter providerId was null or undefined when calling getCalendarEvents.");void 0!==t&&(i.startDate=t),void 0!==n&&(i.endDate=n),void 0!==o&&(i.site=o);var s={method:"GET",url:r,params:i,headers:l};return a&&(s=Object.assign(s,a)),this.$http(s)},e.prototype.getScheduleGroups=function(e){var t={method:"GET",url:this.basePath+"/schedule/groups",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getScheduleTemplateCodes=function(e){var t={method:"GET",url:this.basePath+"/schedule/templateCodes",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.updateAppointmentStatus=function(e,t,n){var o=this.basePath+"/schedule/appointment/{id}/updateStatus".replace("{id}",encodeURIComponent(String(e))),a=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter id was null or undefined when calling updateAppointmentStatus.");var r={method:"POST",url:o,data:t,params:{},headers:a};return n&&(r=Object.assign(r,n)),this.$http(r)},e.prototype.updateAppointmentType=function(e,t,n){var o=this.basePath+"/schedule/appointment/{id}/updateType".replace("{id}",encodeURIComponent(String(e))),a=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter id was null or undefined when calling updateAppointmentType.");var r={method:"POST",url:o,data:t,params:{},headers:a};return n&&(r=Object.assign(r,n)),this.$http(r)},e.$inject=["$http","$httpParamSerializer","basePath"],e}();t.ScheduleApi=o},function(e,t,n){n(16),n(17),n(18),n(20),n(21),n(22),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94),n(95),n(96),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),e.exports=n(227)},function(module,exports){function popup(e,t,n,o){return popup2(e,t,0,0,n,o)}function newWindow(e,t){var n=document.getElementsByTagName("body")[0].clientWidth,o=document.getElementsByTagName("body")[0].clientHeight;return n=Math.max(n,window.innerWidth),popup2(o=Math.max(o,window.innerHeight),n,0,0,e,t)}function popup2(e,t,n,o,a,r){return void 0===popup2.winRefs&&(popup2.winRefs={}),void 0===popup2.winRefs[r]||popup2.winRefs[r].closed?(windowprops="height="+e+",width="+t+",location=no,scrollbars=yes,menubars=no,toolbars=no,resizable=yes,screenX=0,screenY=0,top="+n+",left="+o,popup2.winRefs[r]=window.open(a,r,windowprops)):(popup2.winRefs[r].location.href=a,popup2.winRefs[r].resizeTo(t,e),popup2.winRefs[r].focus()),popup2.winRefs[r]}function confirmNGo(e,t){return confirm(t)&&(location.href=e),!1}function showHideItem(e){"none"==document.getElementById(e).style.display?showItem(e):hideItem(e)}function showItem(e){document.getElementById(e).style.display=""}function hideItem(e){document.getElementById(e).style.display="none"}function validDate(e){return validDateText(document.getElementById(e).value)}function validDateText(e){var t="/";-1==e.indexOf("/")&&(t="-");var n=e.split(t);return 3==n.length&&(year=n[0]-0,month=n[1]-1,day=n[2]-0,dateObject=new Date(year,month,day),day==dateObject.getDate()&&month==dateObject.getMonth()&&year==dateObject.getFullYear())}function validDateFieldsByClass(e,t){for(var n=document.getElementsByClassName(e,t),o=0;o<n.length;o++)if(!validDateText(n[o].value))return n[o].focus(),!1;return!0}function getMouseCoords(e){var t=new Array(2),n=0,o=0;if(!e)e=window.event;return e.pageX||e.pageY?(n=e.pageX,o=e.pageY):(e.clientX||e.clientY)&&(n=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,o=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),t[0]=n,t[1]=o,t}function checkAll(e,t,n){var o=e.checked,a=document.getElementsByClassName(n,t);for(i=0;i<a.length;i++)a[i].checked=o}function oscarLog(e){window.console&&console.log(e)}function grabEnter(event,callb){if(window.event&&13==window.event.keyCode||event&&13==event.which)return eval(callb),!1}function isNumericInt(e){var t,n=!0;for(i=0;i<e.length&&1==n;i++)t=e.charAt(i),-1=="0123456789".indexOf(t)&&(n=!1);return n}function isNumeric(e){var t,n=!0;for(i=0;i<e.length&&1==n;i++)t=e.charAt(i),-1=="0123456789.".indexOf(t)&&(n=!1);return n}function trim(e){return e=(e=e.replace(/^\s+/g,"")).replace(/\s+$/g,"")}document.getElementsByAttribute=function(e,t,n,o){for(var a,r,i="*"==t&&e.all?e.all:e.getElementsByTagName(t),l=new Array,s=void 0!==o?new RegExp("(^|\\s)"+o+"(\\s|$)"):null,u=0;u<i.length;u++)"string"==typeof(r=(a=i[u]).getAttribute&&a.getAttribute(n))&&r.length>0&&(void 0===o||s&&s.test(r))&&l.push(a);return l}},function(e,t,n){"use strict";window.Juno=window.Juno||{},window.Juno.Common=window.Juno.Common||{},window.Juno.Common.DisplayMessages=function(e,t){var n=this;n.messages_hash={},n.display_field_errors=!0,n.field_errors_label_map={},n.field_errors_label_map_key=null,n.extra_info={},n.meta={},n.saving_message="Saving...",n.init=function(){Juno.Common.Util.exists(e)&&(n.messages_hash=e),n.force_field_error_arrays(),Juno.Common.Util.exists(t)&&(Juno.Common.Util.exists(t.display_field_errors)&&!1===t.display_field_errors&&(n.display_field_errors=!1),Juno.Common.Util.exists(t.field_errors_label_map)&&(n.field_errors_label_map=t.field_errors_label_map,Juno.Common.Util.exists(t.field_errors_label_map_key)&&(n.field_errors_label_map_key=t.field_errors_label_map_key)))},n.merge=function(e){n.messages_hash=angular.merge(n.messages_hash,e.messages_hash)},n.has_alert_warnings=function(){return n.alert_warnings().length>0},n.alert_warnings=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.alert_warnings)?n.messages_hash.alert_warnings:[]},n.add_alert_warning=function(e){n.has_alert_warnings()||(n.messages_hash.alert_warnings=[]),n.messages_hash.alert_warnings.push(e)},n.has_validation_warnings=function(){return n.validation_warnings().length>0},n.add_validation_warning=function(e){n.has_validation_warnings()||(n.messages_hash.validation_warnings=[]),n.messages_hash.validation_warnings.push(e)},n.validation_warnings=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.validation_warnings)?n.messages_hash.validation_warnings:[]},n.has_standard_errors=function(){return n.standard_errors().length>0},n.standard_errors=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_errors)?n.messages_hash.standard_errors:[]},n.add_standard_error=function(e){n.has_standard_errors()||(n.messages_hash.standard_errors=[]),n.messages_hash.standard_errors.push(e)},n.add_generic_fatal_error=function(){n.add_standard_error("Fatal Error")},n.has_standard_warnings=function(){return n.standard_warnings().length>0},n.standard_warnings=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_warnings)?n.messages_hash.standard_warnings:[]},n.add_standard_warning=function(e){n.has_standard_warnings()||(n.messages_hash.standard_warnings=[]),n.messages_hash.standard_warnings.push(e)},n.has_standard_info=function(){return n.standard_info().length>0},n.standard_info=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_info)?n.messages_hash.standard_info:[]},n.add_standard_info=function(e){n.has_standard_info()||(n.messages_hash.standard_info=[]),n.messages_hash.standard_info.push(e)},n.has_standard_success=function(){return n.standard_success().length>0},n.standard_success=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_success)?n.messages_hash.standard_success:[]},n.add_standard_success=function(e){n.has_standard_success()||(n.messages_hash.standard_success=[]),n.messages_hash.standard_success.push(e)},n.has_field_errors=function(){return n.field_errors()&&!angular.equals(n.field_errors(),{})},n.field_errors=function(e){var t={};if(Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.field_errors))if(Juno.Common.Util.exists(e)&&!0===e)for(var o in n.messages_hash.field_errors)t[o]=n.prepend_label(o,n.messages_hash.field_errors[o]);else t=n.messages_hash.field_errors;return t},n.has_one_of_field_error=function(e){for(var t in angular.isArray(e)||(e=[e]),e)if(n.has_field_error(e[t]))return!0;return!1},n.has_indexed_field_error=function(e,t){return!(!Juno.Common.Util.exists(n.extra_info)||!Juno.Common.Util.exists(n.extra_info.index)||n.extra_info.index!=t)&&n.has_field_error(e)},n.has_field_error=function(e){return!!(n.has_field_errors()&&e in n.field_errors())},n.field_error_string=function(e,t){return n.has_field_error(e)?(Juno.Common.Util.exists(t)||(t=", "),n.field_errors()[e].join(t)):""},n.add_field_error=function(e,t){n.has_field_errors()||(n.messages_hash.field_errors={}),n.has_field_error(e)||(n.messages_hash.field_errors[e]=[]),n.messages_hash.field_errors[e].push(t)},n.remove_field_error=function(e){n.has_field_error(e)&&delete n.messages_hash.field_errors[e]},n.has_error_links=function(){return n.error_links().length>0},n.add_error_link=function(e){n.has_error_links()||(n.messages_hash.error_links=[]),n.messages_hash.error_links.push(e)},n.error_links=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.error_links)?n.messages_hash.error_links:[]},n.has_errors=function(){return!!(n.has_field_errors()||n.has_standard_errors()||n.has_error_links())},n.clear=function(){n.messages_hash={}},n.force_field_error_arrays=function(){if(n.has_field_errors())for(var e in n.messages_hash.field_errors)angular.isArray(n.messages_hash.field_errors[e])||(n.messages_hash.field_errors[e]=[angular.copy(n.messages_hash.field_errors[e])])},n.prepend_label=function(e,t){var o="",a=[];if(e in n.field_errors_label_map)for(var r in o=n.field_errors_label_map[e],Juno.Common.Util.exists(n.field_errors_label_map_key)&&(o=n.field_errors_label_map[e][n.field_errors_label_map_key]),t){var i=[o,t[r]].join(" ").trim();a.push(i)}else a=t;return a},n.merge_messages=function(e){for(var t=e.field_errors(),o=e.error_links(),a=e.standard_info(),r=e.standard_warnings(),i=e.standard_errors(),l=e.alert_warnings(),s=e.validation_warnings(),u=e.standard_success(),c=0;c<u.length;c++)n.add_standard_success(u[c]);for(c=0;c<a.length;c++)n.add_standard_info(a[c]);for(c=0;c<r.length;c++)n.add_standard_warning(r[c]);for(c=0;c<i.length;c++)n.add_standard_error(i[c]);for(c=0;c<l.length;c++)n.add_alert_warning(l[c]);for(c=0;c<s.length;c++)n.add_validation_warning(s[c]);for(c=0;c<o.length;c++)n.add_error_link(o[c]);for(var d in t)if(t.hasOwnProperty(d))for(c=0;c<t[d].length;c++)n.add_field_error(d,t[d][c])},n.init()}},function(e,t,n){"use strict";(function(e,t){window.Juno||(window.Juno={}),Juno.Common||(Juno.Common={}),Juno.Common.Util={},Juno.Common.Util.settings={datetime_format:"YYYY-MM-DDTHH:mm:ssZ",datetime_no_timezone_format:"YYYY-MM-DDTHH:mm:ss",time_format:"h:mma",date_format:"YYYY-MM-DD",dayofweek_format:"dddd"},Juno.Common.Util.exists=function(e){return angular.isDefined(e)&&null!==e},Juno.Common.Util.isBlank=function(e){return!Juno.Common.Util.exists(e)||""===e},Juno.Common.Util.toArray=function(e){return e instanceof Array?e:null==e?[]:[e]},Juno.Common.Util.pad0=function(e){var t=e.toString();return 1==t.length&&(t="0"+t),t},Juno.Common.Util.toTrimmedString=function(e){return null==e&&(e=""),e instanceof String&&(e=e.trim()),e},Juno.Common.Util.formatDate=function(e){return(e=Juno.Common.Util.toTrimmedString(e))&&(e instanceof Date||(e=new Date(e)),e=e.getFullYear()+"-"+Juno.Common.Util.pad0(e.getMonth()+1)+"-"+Juno.Common.Util.pad0(e.getDate())),e},Juno.Common.Util.formatTime=function(e){return(e=Juno.Common.Util.toTrimmedString(e))&&(e instanceof Date||(e=new Date(e)),e=Juno.Common.Util.pad0(e.getHours())+":"+Juno.Common.Util.pad0(e.getMinutes())),e},Juno.Common.Util.formatMomentDate=function(e){return e.format(Juno.Common.Util.settings.date_format)},Juno.Common.Util.formatMomentTime=function(e,t){return t||(t=Juno.Common.Util.settings.time_format),e.format(t)},Juno.Common.Util.formatMomentDateTimeNoTimezone=function(e){return e.format(Juno.Common.Util.settings.datetime_no_timezone_format)},Juno.Common.Util.getDateMoment=function(t){return e.utc(t,Juno.Common.Util.settings.date_format,!0)},Juno.Common.Util.getTimeMoment=function(t){return e.utc(t,Juno.Common.Util.settings.time_format,!0)},Juno.Common.Util.getDateMomentFromComponents=function(t,n,o){return e.utc({year:t,month:n,day:o})},Juno.Common.Util.getDateAndTimeMoment=function(t,n){return e.utc(t+" "+n,Juno.Common.Util.settings.date_format+" "+Juno.Common.Util.settings.time_format,!0)},Juno.Common.Util.getDatetimeNoTimezoneMoment=function(t){return e.utc(t,Juno.Common.Util.settings.datetime_no_timezone_format,!0)},Juno.Common.Util.validateDateString=function(e,t,n,o,a){Juno.Common.Util.exists(e)?Juno.Common.Util.getDateMoment(e).isValid()||t.add_field_error(n,o+" is invalid"):a&&t.add_field_error(n,o+"is required")},Juno.Common.Util.validateTimeString=function(e,t,n,o,a){Juno.Common.Util.exists(e)?Juno.Common.Util.getTimeMoment(e).isValid()||t.add_field_error(n,o+"is invalid"):a&&t.add_field_error(n,o+"is required")},Juno.Common.Util.addNewLine=function(e,t){return null==e||""==e.trim()?t:(null==t||""==t.trim()?t=e.trim():t+="\n"+e.trim(),t)},Juno.Common.Util.calcAge=function(e,t,n){var o=new Date(parseInt(e,10),parseInt(t,10),parseInt(n,10)),a=new Date,r=a.getFullYear()-o.getFullYear();return(a.getMonth()<o.getMonth()||a.getMonth()==o.getMonth()&&a.getDate()<o.getDate())&&r--,r},Juno.Common.Util.isInArray=function(e,t){return t.indexOf(e)>-1},Juno.Common.Util.mergeHash=function(e,n){return"undefined"!==n&&(t.extend(!0,e,n),!0)},Juno.Common.Util.noNull=function(e){return"string"==typeof e?e=e.trim():null===e&&(e=""),e},Juno.Common.Util.isUndefinedOrNull=function(e){return angular.isUndefined(e)||null===e},Juno.Common.Util.isDefinedAndNotNull=function(e){return angular.isDefined(e)&&null!==e},Juno.Common.Util.objectArrayIndexOf=function(e,t,n){for(var o=0,a=e.length;o<a;o++)if(e[o][n]===t)return o;return-1},Juno.Common.Util.isIntegerString=function(e){parseInt(e);return!!/^-?\d+$/.test(e.toString())},Juno.Common.Util.escapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[&<>"'\/]/g,function(e){return t[e]})},Juno.Common.Util.formatName=function(e,t){return t||e?e?t?t+", "+e:e:t:null}}).call(this,n(5),n(3))},,function(e,t,n){"use strict";window.Juno=window.Juno||{},Juno.Common=Juno.Common||{},Juno.Common.ServiceHelper={},Juno.Common.ServiceHelper.configHeaders=function(){return{headers:{"Content-Type":"application/json",Accept:"application/json"}}},Juno.Common.ServiceHelper.configHeadersWithCache=function(){return{headers:{"Content-Type":"application/json",Accept:"application/json"},cache:!0}}},function(e,t,n){"use strict";window.Juno=window.Juno||{},Juno.Consults=Juno.Consults||{},Juno.Consults.Common={},Juno.Consults.Common.sortAttachmentDocs=function(e){e.sort(function(e,t){return e.documentType<t.documentType?-1:e.documentType>t.documentType?1:e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0})}},function(e,t,n){n(3),n(23),n(29),n(13),n(31),n(5),n(7),n(33),n(228),n(37),n(38),n(40),n(41),n(42),n(43),n(44),n(46),n(47),n(49),n(50),n(51),n(52),n(53),n(54),n(10),n(55),n(56),angular.module("oscarProviderViewModule",["ui.router","ui.router.state.events","ngResource","ui.bootstrap","ui.calendar","angular-loading-bar","ngTable","ngStorage","Common","Common.Services","Common.Filters","Common.Directives","Common.Util","Layout","Tickler","Record","Record.Summary","Record.Tracker","Record.Details","Record.PHR","Record.Forms","Schedule","Settings","Report","Patient","Patient.Search","PatientList","Inbox","Help","Document","Dashboard","Consults","Admin","Admin.Integration","Admin.Integration.Know2act","Admin.Integration.Fax"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/dashboard"),e.state("dashboardManager",{url:"/dashboard/admin",templateUrl:"src/dashboard/admin/DashboardManager.jsp",controller:"dashboardManagerController"}).state("dashboard",{url:"/dashboard",templateUrl:"src/dashboard/dashboard.jsp",controller:"Dashboard.DashboardController"}).state("inbox",{url:"/inbox",templateUrl:"src/inbox/inbox_popup.jsp",controller:"Inbox.InboxController"}).state("consultRequests",{url:"/consults",templateUrl:"src/consults/consultRequestList.jsp",controller:"Consults.ConsultRequestListController as consultRequestListCtrl"}).state("consultResponses",{url:"/consultResponses",templateUrl:"src/consults/consultResponseList.jsp",controller:"Consults.ConsultResponseListController as consultResponseListCtrl"}).state("billing",{url:"/billing",templateUrl:"src/billing/billing_popup.jsp",controller:"BillingCtrl"}).state("schedule",{url:"/schedule",templateUrl:"src/schedule/view.jsp",controller:"Schedule.ScheduleController"}).state("admin",{url:"/admin",templateUrl:"src/admin/admin_popup.jsp",controller:"AdminCtrl"}).state("ticklers",{url:"/ticklers",templateUrl:"src/tickler/ticklerList.jsp",controller:"Tickler.TicklerListController as ticklerListCtrl",resolve:{providers:["providerService",function(e){return e.searchProviders({active:!0})}]}}).state("search",{url:"/search",templateUrl:"src/patient/search/patientSearch.jsp",controller:"Patient.Search.PatientSearchController as patientSearchCtrl",params:{term:null}}).state("reports",{url:"/reports",templateUrl:"src/report/reports.jsp",controller:"Report.ReportsController as reportsCtrl"}).state("documents",{url:"/documents",templateUrl:"src/document/documents_classic.jsp",controller:"Document.DocumentsController"}).state("settings",{url:"/settings",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",resolve:{user:["providerService",function(e){return e.getMe()}],billingServiceTypes:["billingService",function(e){return e.getUniqueServiceTypes()}],providerList:["providerService",function(e){return e.searchProviders({active:!0})}],loadedSettings:["providerService",function(e){return e.getSettings()}],encounterForms:["formService",function(e){return e.getAllEncounterForms()}],eforms:["formService",function(e){return e.getAllEForms()}],teams:["providerService",function(e){return e.getActiveTeams()}],groupNames:["formService",function(e){return e.getGroupNames()}],loadedApps:["appService",function(e){return e.getApps()}]}}).state("settings.persona",{url:"/persona",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"persona"}}).state("settings.general",{url:"/general",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"general"}}).state("settings.schedule",{url:"/schedule",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"schedule"}}).state("settings.billing",{url:"/billing",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"billing"}}).state("settings.rx",{url:"/rx",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"rx"}}).state("settings.masterdemo",{url:"/masterdemo",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"masterdemo"}}).state("settings.consults",{url:"/consults",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"consults"}}).state("settings.documents",{url:"/documents",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"documents"}}).state("settings.summary",{url:"/summary",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"summary"}}).state("settings.eforms",{url:"/eforms",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"eforms"}}).state("settings.inbox",{url:"/inbox",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"inbox"}}).state("settings.programs",{url:"/programs",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"programs"}}).state("settings.integration",{url:"/integration",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"integration"}}).state("support",{url:"/support",templateUrl:"src/help/support.jsp",controller:"Help.SupportController"}).state("help",{url:"/help",templateUrl:"src/help/help.jsp",controller:"Help.HelpController"}).state("record",{url:"/record/:demographicNo",templateUrl:"src/record/record.jsp",controller:"Record.RecordController as recordCtrl",resolve:{demo:["$stateParams","demographicService",function(e,t){return t.getDemographic(e.demographicNo)}],user:["providerService",function(e){return e.getMe()}],properties:["uxService",function(e){return e.getDisplayProperties()}]}}).state("record.details",{url:"/details",templateUrl:"src/record/details/details.jsp",controller:"Record.Details.DetailsController as detailsCtrl"}).state("record.summary",{url:"/summary?appointmentNo&encType",templateUrl:"src/record/summary/summary.jsp",controller:"Record.Summary.SummaryController as summaryCtrl"}).state("record.forms",{url:"/forms",templateUrl:"src/record/forms/forms.jsp",controller:"Record.Forms.FormController as formCtrl",params:{formListId:0}}).state("record.forms.view",{url:"/view/:type/:id?name",templateUrl:"src/record/forms/forms.jsp",params:{name:{dynamic:!0}},controller:"Record.Forms.FormController as formCtrl"}).state("record.forms.add",{url:"/add/:type/:id",templateUrl:"src/record/forms/forms.jsp",controller:"Record.Forms.FormController as formCtrl"}).state("record.consultRequests",{url:"/consults",templateUrl:"src/consults/consultRequestList.jsp",controller:"Consults.ConsultRequestListController as consultRequestListCtrl"}).state("record.consultResponses",{url:"/consultResponses",templateUrl:"src/consults/consultResponseList.jsp",controller:"Consults.ConsultResponseListController as consultResponseListCtrl"}).state("record.consultRequest",{url:"/consult/:requestId",templateUrl:"src/consults/consultRequest.jsp",controller:"Consults.ConsultRequestController as consultRequestCtrl",resolve:{consult:["$stateParams","consultService",function(e,t){return"new"===e.requestId?t.getNewRequest(e.demographicNo):t.getRequest(e.requestId)}],user:["providerService",function(e){return e.getMe()}]}}).state("record.consultResponse",{url:"/consultResponse/:responseId",templateUrl:"src/consults/consultResponse.jsp",controller:"Consults.ConsultResponseController as consultResponseCtrl",resolve:{consult:["$stateParams","consultService",function(e,t){return t.getResponse(e.responseId,e.demographicNo)}],user:["providerService",function(e){return e.getMe()}]}}).state("record.tickler",{url:"/tickler",templateUrl:"src/tickler/ticklerList.jsp",controller:"Tickler.TicklerListController as ticklerListCtrl",resolve:{providers:["providerService",function(e){return e.searchProviders({active:!0})}]}}).state("record.tracker",{url:"/tracker",templateUrl:"src/record/tracker/tracker.jsp",controller:"Record.Tracker.TrackerController as trackerCtrl"}).state("record.phr",{url:"/phr",templateUrl:"src/record/phr/phr.jsp",controller:"Record.PHR.PHRController as phrCtrl"}).state("k2aConfig",{url:"/k2aConfig",templateUrl:"src/admin/integration/know2act/Know2actConfiguration.jsp",controller:"Admin.Integration.Know2act.k2aConfigController as k2aConfigCtrl"}).state("k2aTemplate",{url:"/k2aTemplate",templateUrl:"src/admin/integration/know2act/Know2actTemplate.jsp",controller:"Admin.Integration.Know2act.k2aTemplateController as k2aTemplateCtrl"}).state("k2aNotification",{url:"/k2aNotification",templateUrl:"src/admin/integration/know2act/Know2actNotifications.jsp",controller:"Admin.Integration.Know2act.k2aNotificationController as k2aNoteCtrl"}).state("faxConfig",{url:"/faxConfig",templateUrl:"src/admin/integration/fax/faxConfiguration.jsp",controller:"Admin.Integration.Fax.FaxConfigurationController as faxController"}).state("faxSendReceive",{url:"/faxSendReceive",templateUrl:"src/admin/integration/fax/faxSendReceive.jsp",controller:"Admin.Integration.Fax.FaxSendReceiveController as faxSendReceiveController"})}]),angular.module("oscarProviderViewModule").factory("Navigation",[function(){return{location:"",load:function(e){this.location=e}}}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";angular.module("Common",[])},function(e,t,n){"use strict";angular.module("Common.Util",[])},function(e,t,n){"use strict";angular.module("Common.Util").service("angularUtil",["$window",function(e){var t={inMobileView:function(){return e.innerWidth<768}};return t}])},function(e,t,n){"use strict";angular.module("Common.Util").service("junoHttp",["$http","$window","$q",function(e,t,n){var o={request:function(t){var a=n.defer();return e(t).then(function(e){o.success_function(e,t,a)},function(e){o.errors_function(e,t,a)},function(e){a.notify(e)}),a.promise},success_function:function(e,t,n){var o=e;try{if("SUCCESS"===o.data.status){var a={meta:angular.copy(o.data.headers),data:angular.copy(o.data.body)};n.resolve(a)}else{if("ERROR"!==o.data.status)throw"Invalid Response Status";var r={meta:angular.copy(o.data.headers),data:angular.copy(o.data.error.message)};n.reject(r)}}catch(e){r={meta:{},data:"An Error has occurred. please contact technical support"};n.reject(r)}},errors_function:function(e,t,n){n.reject(e)},call:function(e,t,n){var a={method:e,url:t,data:n};return o.request(a)},get:function(e,t){var n={method:"GET",url:e};return Juno.Common.Util.mergeHash(n,t),o.request(n)},post:function(e,t){var n={method:"POST",url:e,data:t};return o.request(n)},put:function(e,t){var n={method:"PUT",url:e,data:t};return o.request(n)},del:function(e,t){var n={method:"DELETE",url:e,data:t};return o.request(n)}};return o}])},function(e,t,n){"use strict";window.Juno=window.Juno||{},Juno.Common=Juno.Common||{},Juno.Common.SearchListHelper=function(e,t){var n=this;n.searchParams=t||{},n.defaults={page:1,perPage:10},n.initSearchParameters=function(){var t;if(Juno.Common.Util.exists(e))for(t in e)e.hasOwnProperty(t)&&(n.defaults[t]=e[t])},n.getParams=function(){var e={};for(var t in n.searchParams)n.searchParams.hasOwnProperty(t)&&(e[t]=n.searchParams[t]);for(var t in n.defaults)e.hasOwnProperty(t)||(e[t]=n.defaults[t]);return e},n.initSearchParameters()}},function(e,t,n){"use strict";angular.module("Common.Services",["Common.Util"])},function(e,t,n){"use strict";angular.module("Common.Services").service("appService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/app",getApps:function(){var o=t.defer();return e({url:n.apiPath+"/getApps",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("appServices::getApps error",e),o.reject("An error occured while getting app content")}),o.promise}};return n}])},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").service("autoCompleteService",["$q","demographicService",function(t,n){var o={init_autocomplete_values:function(a,r){var i=t.defer();return n.getDemographic(a.patient).then(function(t){console.log(t),t.dob=e([t.dobYear,t.dobMonth,t.dobDay]),i.resolve({data:{patient:{data:o.formatDemographic(t)}}})}),i.promise},formatDemographic:function(e){return{uuid:e.demographicNo,full_name:e.lastName+","+e.firstName,birth_date:Juno.Common.Util.formatMomentDate(e.dob),health_number:e.hin,phone_number_primary:e.phone}}};return o}])}).call(this,n(5))},function(e,t,n){"use strict";angular.module("Common.Services").service("billingService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/",getUniqueServiceTypes:function(){var o=t.defer();return e.get(n.apiPath+"billing/uniqueServiceTypes",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){o.resolve(e.data.content)},function(e){console.log("billingService::getUniqueServiceTypes error",e),o.reject("An error occured while fetching billing service types")}),o.promise},getBillingRegion:function(){var o=t.defer();return e.get(n.apiPath+"billing/billingRegion",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){o.resolve(e.data)},function(e){console.log("billingService::getBillingRegion error",errorsz),o.reject("An error occured while setting billingRegion")}),o.promise},getDefaultView:function(){var o=t.defer();return e.get(n.apiPath+"billing/defaultView",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){o.resolve(e.data)},function(e){console.log("billingService::getDefaultView error",e),o.reject("An error occured while setting defaultView")}),o.promise}};return n}])},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").service("consultService",["$http","$q","junoHttp",function(t,n,o){var a={apiPath:"../ws/rs/consults/",searchRequests:function(e){var t=n.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params=e,o.get(a.apiPath+"searchRequests",r).then(function(e){t.resolve(e)},function(e){console.log("consultService::searchRequests error",e),t.reject("An error occurred while searching consult requests")}),t.promise},getRequest:function(t){var r=n.defer(),i=Juno.Common.ServiceHelper.configHeaders();return o.get(a.apiPath+"getRequest/"+encodeURIComponent(t),i).then(function(t){t.data.referralDate&&(t.data.referralDate=e(t.data.referralDate).toDate()),t.data.appointmentDate&&(t.data.appointmentDate=e(t.data.appointmentDate).toDate()),t.data.followUpDate&&(t.data.followUpDate=e(t.data.followUpDate).toDate()),r.resolve(t.data)},function(e){console.log("consultService::getRequest error",e),r.reject("An error occurred while getting consult request (requestId="+t+")")}),r.promise},getNewRequest:function(t){var r=n.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={demographicNo:t},o.get(a.apiPath+"getNewRequest",i).then(function(t){t.data.referralDate&&(t.data.referralDate=e(t.data.referralDate).toDate()),t.data.appointmentDate&&(t.data.appointmentDate=e(t.data.appointmentDate).toDate()),t.data.followUpDate&&(t.data.followUpDate=e(t.data.followUpDate).toDate()),r.resolve(t.data)},function(e){console.log("consultService::getNewRequest error",e),r.reject("An error occurred while getting new consult request")}),r.promise},getRequestAttachments:function(e,t,r){var i=n.defer(),l=Juno.Common.ServiceHelper.configHeaders();return l.params={demographicId:encodeURIComponent(t),attached:encodeURIComponent(r)},o.get(a.apiPath+"getRequestAttachments/"+encodeURIComponent(e),l).then(function(e){i.resolve(e.data)},function(t){console.log("consultService::getRequestAttachments error",t),i.reject("An error occured while getting consult attachments (requestId="+e+")")}),i.promise},saveRequest:function(e){var t=n.defer();return o.post(a.apiPath+"saveRequest",e).then(function(e){t.resolve(e.data)},function e(n){console.log("consultService::saveRequest error",e),t.reject("An error occurred while fetching consult request after save")}),t.promise},eSendRequest:function(e){var t=n.defer();return o.get(a.apiPath+"eSendRequest/"+encodeURIComponent(e),Juno.Common.ServiceHelper.configHeaders()).then(function(e){t.resolve(e.data)},function(n){console.log("consultService::eSendRequest error",n),t.reject("An error occurred while e-sending consult request (requestId="+e+")")}),t.promise},searchResponses:function(e){var t=n.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params=e,o.get(a.apiPath+"searchResponses",r).then(function(e){t.resolve(e)},function(e){console.log("consultService::searchRequests error",e),t.reject("An error occured while searching consult requests")}),t.promise},getResponse:function(o,r){var i=n.defer();return"new"===o&&(o=0),t.get(a.apiPath+"getResponse",{params:{responseId:o,demographicNo:r}}).then(function(t){t.data.responseDate&&(t.data.responseDate=e(t.data.responseDate).toDate()),t.data.referralDate&&(t.data.referralDate=e(t.data.referralDate).toDate()),t.data.appointmentDate&&(t.data.appointmentDate=e(t.data.appointmentDate).toDate()),t.data.followUpDate&&(t.data.followUpDate=e(t.data.followUpDate).toDate()),i.resolve(t.data)},function(e){console.log("consultService::getResponse error",e),i.reject("An error occurred while getting consult response (responseId="+o+")")}),i.promise},getResponseAttachments:function(e,o,r){var i=n.defer();return t.get(a.apiPath+"getResponseAttachments?responseId="+encodeURIComponent(e)+"&demographicNo="+encodeURIComponent(o)+"&attached="+encodeURIComponent(r)).then(function(e){i.resolve(e.data)},function(t){console.log("consultService::getResponseAttachments error",t),i.reject("An error occurred while getting consult response attachments (responseId="+e+")")}),i.promise},saveResponse:function(e){var o=n.defer();return t.post(a.apiPath+"saveResponse",e).then(function(e){o.resolve(e.data)},function(e){console.log("consultService::saveResponse error",e),o.reject("An error occurred while fetching consult response after save")}),o.promise},getReferralPathwaysByService:function(e){var o=n.defer();return t.get(a.apiPath+"getReferralPathwaysByService?serviceName="+encodeURIComponent(e)).then(function(e){o.resolve(e.data)},function(e){console.log("consultService::getReferralPathwaysByService error",e),o.reject("An error occured while fetching referral pathways")}),o.promise},getLetterheadList:function(){var e=n.defer(),t=Juno.Common.ServiceHelper.configHeaders();return o.get(a.apiPath+"getLetterheadList",t).then(function(t){e.resolve(t)},function(t){console.log("consultService::getLetterheadList error",t),e.reject("An error occurred while fetching letterheads")}),e.promise}};return a}])}).call(this,n(5))},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").service("demographicService",["$q","junoHttp",function(t,n){var o={apiPath:"../ws/rs/demographic",getDemographic:function(a){var r=t.defer();return n.get(o.apiPath+"/"+encodeURIComponent(a),Juno.Common.ServiceHelper.configHeaders()).then(function(t){t.data.effDate&&(t.data.effDate=e(t.data.effDate).toDate()),t.data.hcRenewDate&&(t.data.hcRenewDate=e(t.data.hcRenewDate).toDate()),t.data.endDate&&(t.data.endDate=e(t.data.endDate).toDate()),t.data.patientStatusDate&&(t.data.patientStatusDate=e(t.data.patientStatusDate).toDate()),t.data.onWaitingListSinceDate&&(t.data.onWaitingListSinceDate=e(t.data.onWaitingListSinceDate).toDate()),t.data.scrPaperChartArchivedDate&&(t.data.scrPaperChartArchivedDate=e(t.data.scrPaperChartArchivedDate).toDate()),t.data.dateJoined&&(t.data.dateJoined=e(t.data.dateJoined).toDate()),t.data.rosterTerminationDate&&(t.data.rosterTerminationDate=e(t.data.rosterTerminationDate).toDate()),t.data.rosterDate&&(t.data.rosterDate=e(t.data.rosterDate).toDate()),r.resolve(t.data)},function(e){console.log("demographicServices::getDemographic error",e),r.reject("An error occurred while fetching demographic")}),r.promise},getDemographicContacts:function(e,a){var r=t.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={category:a},n.get(o.apiPath+"/"+encodeURIComponent(e)+"/contacts",i).then(function(e){r.resolve(e.data)},function(e){console.log("demographicServices::getDemographicContacts error",e),r.reject("An error occurred while fetching demographic contacts")}),r.promise},saveDemographic:function(e){var a=t.defer();return n.post(o.apiPath,e).then(function(e){a.resolve(e.data)},function(e){console.log("demographicServices::updateDemographic error",e),a.reject("An error occurred while saving demographic")}),a.promise},updateDemographic:function(e){var a=t.defer();return n.put(o.apiPath,e).then(function(e){a.resolve(e.data)},function(e){console.log("demographicServices::updateDemographic error",e),a.reject("An error occurred while updating demographic")}),a.promise}};return o}])}).call(this,n(5))},function(e,t,n){"use strict";angular.module("Common.Services").service("demographicsService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/demographics"};return n.SEARCH_MODE=Object.freeze({Name:"search_name",DOB:"search_dob",Phone:"search_phone",Hin:"search_hin",Address:"search_address",Email:"search_email",ChartNo:"search_chart_no",DemographicNo:"search_demographic_no"}),n.STATUS_MODE=Object.freeze({ALL:"all",ACTIVE:"active",INACTIVE:"inactive"}),n.quickSearch=function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={query:o},t.get(n.apiPath+"/quickSearch",r).then(function(e){a.resolve(e)},function(e){console.log("demographicsService::quickSearch error",e),a.reject("An error occurred while searching")}),a.promise},n.search=function(o,a,r){var i=e.defer(),l=Juno.Common.ServiceHelper.configHeaders();return l.params={jsonData:o,page:a,perPage:r},t.get(n.apiPath+"/search",l).then(function(e){i.resolve(e)},function(e){console.log("demographicsService::search error",e),i.reject("An error occurred while searching")}),i.promise},n.searchIntegrator=function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={jsonData:o,itemsToReturn:a},t.get(n.apiPath+"/searchIntegrator",i).then(function(e){r.resolve(e.data)},function(e){console.log("demographicsService::searchIntegrator error",e),r.reject("An error occurred while searching")}),r.promise},n.getStatusList=function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={type:o},t.get(n.apiPath+"/statusList",r).then(function(e){a.resolve(e.data)},function(e){console.log("demographicsService::getStatusList error",e),a.reject("An error occurred while getting status list")}),a.promise},n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("diseaseRegistryService",["$http","$q","junoHttp",function(e,t,n){var o={apiPath:"../ws/rs/dxRegisty/",getQuickLists:function(){var e=t.defer();return n.get(o.apiPath+"quickLists/",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(t){e.resolve(t.data)},function(t){console.log("diseaseRegistryService::getQuickLists error",t),e.reject("An error occurred while fetching quick lists")}),e.promise},getIssueQuickLists:function(){var e=t.defer();return n.get(o.apiPath+"issueQuickLists/",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(t){e.resolve(t.data)},function(t){console.log("diseaseRegistryService::getIssueQuickLists error",t),e.reject("An error occurred while fetching quick lists")}),e.promise},addToDxRegistry:function(n,a){var r=t.defer(),i={};return i.id=a.id,i.type=a.type,i.code=a.code,i.description=a.description,e.post(o.apiPath+encodeURIComponent(n)+"/add",i).then(function(e){r.resolve(e.data)},function(e){console.log("diseaseRegistryService::addToDxRegistry error",e),r.reject("An error occurred while adding to dx registry")}),r.promise},findDxIssue:function(e,a){var r=t.defer(),i=Juno.Common.ServiceHelper.configHeadersWithCache();return i.params={codingSystem:a,code:e},n.get(o.apiPath+"findDxIssue",i).then(function(e){r.resolve(e.data)},function(e){console.log("diseaseRegistryService::findDxIssue error",e),r.reject("An error occurred while retrieving a dx issue")}),r.promise}};return o}])},function(e,t,n){"use strict";angular.module("Common.Services").factory("errorsService",[function(){var e={factory:function(e,t){return new Juno.Common.DisplayMessages(e,t)}};return e}])},function(e,t,n){"use strict";angular.module("Common.Services").service("faxAccountService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/faxAccount",listAccounts:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={page:o,perPage:a},t.get(n.apiPath+"/search",i).then(function(e){r.resolve(e.data)},function(e){console.log("faxService::listAccounts error",e),r.reject("An error occurred while getting fax account data")}),r.promise},isEnabled:function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/"+o+"/enabled",r).then(function(e){a.resolve(e.data)},function(e){console.log("faxService::isEnabled error",e),a.reject("An error occurred while getting fax account data")}),a.promise},getAccountSettings:function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/"+o,r).then(function(e){a.resolve(e.data)},function(e){console.log("faxService::getAccountSettings error",e),a.reject("An error occurred while getting fax account data")}),a.promise},addAccountSettings:function(o){var a=e.defer();return t.post(n.apiPath,o).then(function(e){a.resolve(e.data)},function(e){console.log("faxService::setAccountSettings error",e),a.reject("An error occurred while setting fax account data")}),a.promise},updateAccountSettings:function(o,a){var r=e.defer();return t.put(n.apiPath+"/"+o,a).then(function(e){r.resolve(e.data)},function(e){console.log("faxService::setAccountSettings error",e),r.reject("An error occurred while updating fax account data")}),r.promise},testConnection:function(o){var a=e.defer();let r=o.id,i=n.apiPath+"/testConnection";return r&&null!=r&&""!==r&&(i=n.apiPath+"/"+o.id+"/testConnection"),t.post(i,o).then(function(e){a.resolve(e.data)},function(e){console.log("faxService::validateLogin error",e),a.reject("An error occurred while testing connection")}),a.promise},getInbox:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params=a.getParams(),t.get(n.apiPath+"/"+o+"/inbox",i).then(function(e){r.resolve(e)},function(e){console.log("faxService::getInbox error",e),r.reject("An error occurred while retrieving inbox data")}),r.promise},getOutbox:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params=a.getParams(),t.get(n.apiPath+"/"+o+"/outbox",i).then(function(e){r.resolve(e)},function(e){console.log("faxService::getOutbox error",e),r.reject("An error occurred while retrieving outbox data")}),r.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("faxInboundService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/faxInbound",getNextPullTime:function(){var o=e.defer(),a=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/getNextPullTime",a).then(function(e){o.resolve(e.data)},function(e){console.log("faxService::getNextPullTime error",e),o.reject("An error occurred while getting scheduled pull time")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("faxOutboundService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/faxOutbound",resendOutboundFax:function(o){var a=e.defer();return t.put(n.apiPath+"/"+o+"/resend").then(function(e){a.resolve(e.data)},function(e){console.log("faxService::resendFax error",e),a.reject("An error occurred while resending a fax")}),a.promise},getNextPushTime:function(){var o=e.defer(),a=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/getNextPushTime",a).then(function(e){o.resolve(e.data)},function(e){console.log("faxService::getNextPushTime error",e),o.reject("An error occurred while getting scheduled push time")}),o.promise},getDownloadUrl:function(e){return n.apiPath+"/"+e+"/download"}};return n}])},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").factory("fieldHelperService",["$timeout",function(t){var n={default_scope:{form_group_class:"@caFormGroupClass",label_size:"@caLabelSize",input_size:"@caInputSize",text_length:"@caTextLength",hide_label_colon:"@caTitleNoColon",template:"@caTemplate",name:"@caName",title:"@caTitle",hint:"@caHint",tab_index:"@caTabindex",error_message:"@caError",warning_message:"@caWarning",depends_on_field:"@caDependsOnField",depends_on_value:"@caDependsOnValue",model:"=caModel",disabled:"=caDisabled",hide:"=caHide",focus_field:"=caFocusField",on_focus_fn:"&caFocus",change_fn:"&caChange",blur_fn:"&caBlur"},resolve_template:function(e,t){return Juno.Common.Util.exists(e.caTemplate)?t+"_"+e.caTemplate+".jsp":t+".jsp"},merge_title_messages:function(e){e.title_array=[],Juno.Common.Util.exists(e.error_message)&&e.title_array.push(e.error_message),Juno.Common.Util.exists(e.warning_message)&&e.title_array.push(e.warning_message),0==e.title_array.length&&Juno.Common.Util.exists(e.hint)&&e.title_array.push(e.hint),e.title_string=e.title_array.join("|")},default_link_function:function(o,a,r,i){n.merge_title_messages(o),o.focus_fn=function(){angular.isFunction(o.on_focus_fn)&&t(function(){e(a).is("input:enabled, select:enabled, textarea:enabled")&&e(a).is(":focus")||e(a).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?o.on_focus_fn():console.log("ignoring on focus function - element is no longer in focus",o.name)})},o.$watch("focus_field",function(){Juno.Common.Util.exists(o.name)&&o.focus_field==o.name&&t(function(){e(a).is("input:enabled, select:enabled, textarea:enabled")?e(a).focus().select():e(a).find("input:enabled, select:enabled, textarea:enabled").first().focus().select()})}),o.$on("focusCaFocusField",function(t,n){Juno.Common.Util.exists(o.name)&&o.name==n&&(e(a).is("input:enabled, select:enabled, textarea:enabled")?e(a).focus().select():e(a).find("input:enabled, select:enabled, textarea:enabled").first().focus().select())})},default_controller:["$scope","$element","$attrs",function(e,t,n){this.ignore_focus_field=function(){return!0}}]};return n}])}).call(this,n(3))},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").factory("focusService",["$timeout","$window",function(t,n){var o={element:function(n){t(function(){e(n).focus()})},first_form_input:function(n){n||(n="form:visible:first"),t(function(){e(n+" input:enabled, "+n+" select:enabled, "+n+" textarea:enabled ").first().focus()})},first_error_input:function(n){angular.isObject(n)||(n={});var a=n.selector||"";t(function(){e(a+" .has-error:first input:enabled, "+a+" .has-error:first select:enabled, "+a+" .has-error:first textarea:enabled ").first().focus(),o.first_alert(n)})},first_alert:function(n){angular.isObject(n)||(n={});var o=n.selector||"",a=n.scroll_offset;(!a||a<0)&&(a=10),t(function(){e("body").hasClass("modal-open")?e(".modal").animate({scrollTop:0}):e("html, body").animate({scrollTop:e(o+" .alert:visible:first").offset().top-a},500)})}};return o}])}).call(this,n(3))},function(e,t,n){"use strict";angular.module("Common.Services").service("formService",["$http","$q","junoHttp",function(e,t,n){var o={apiPath:"../ws/rs/forms",getAllFormsByHeading:function(n,a){var r=t.defer();return e.get(o.apiPath+"/"+encodeURIComponent(n)+"/all?heading="+encodeURIComponent(a),Juno.Common.ServiceHelper.configHeaders()).then(function(e){r.resolve(e.data)},function(e){console.log("formService::getAllFormsByHeading error",e),r.reject("An error occurred while fetching forms")}),r.promise},getAllEncounterForms:function(){var n=t.defer();return e.get(o.apiPath+"/allEncounterForms",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getAllEncounterForms error",e),n.reject("An error occurred while fetching encounter forms")}),n.promise},getSelectedEncounterForms:function(){var n=t.defer();return e.get(o.apiPath+"/selectedEncounterForms",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getSelectedEncounterForms error",e),n.reject("An error occurred while fetching selected encounter forms")}),n.promise},getCompletedEncounterForms:function(e){var a=t.defer();return n.get(o.apiPath+"/"+e+"/completedEncounterForms",Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("formService::getCompletedEncounterForms error",e),a.reject("An error occurred while fetching completed encounter forms")}),a.promise},getAllEForms:function(){var n=t.defer();return e.get(o.apiPath+"/allEForms",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data.content)},function(e){console.log("formService::getAllEForms error",e),n.reject("An error occurred while fetching eforms")}),n.promise},getGroupNames:function(){var n=t.defer();return e.get(o.apiPath+"/groupNames",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data.content)},function(e){console.log("formService::getGroupNames error",e),n.reject("An error occurred while fetching group names")}),n.promise},getFormGroups:function(){var n=t.defer();return e.get(o.apiPath+"/getFormGroups",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getFormGroups error",e),n.reject("An error occurred while fetching form groups")}),n.promise},getFavouriteFormGroup:function(){var n=t.defer();return e.get(o.apiPath+"/getFavouriteFormGroup",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getFavouriteFormGroup error",e),n.reject("An error occurred while fetching favourite form groups")}),n.promise},getFormOptions:function(n){var a=t.defer();return e.get(o.apiPath+"/"+encodeURIComponent(n)+"/formOptions",Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("formService::getFormOptions error",e),a.reject("An error occurred while fetching form options")}),a.promise}};return o}])},function(e,t,n){"use strict";angular.module("Common.Services").service("globalStateService",[function(){return{global_settings:{interface_preferences:{scheduler_license_key:""}}}}])},function(e,t,n){"use strict";angular.module("Common.Services").service("inboxService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/inbox",getDashboardItems:function(o){var a=t.defer();return e({url:n.apiPath+"/mine?limit="+encodeURIComponent(o),method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("inboxService::getDashboardItems error",e),a.reject("An error occured while getting inbox content")}),a.promise},getUnAckLabDocCount:function(){var o=t.defer();return e({url:n.apiPath+"/mine/count",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("inboxService::getUnAckLabDocCount error",e),o.reject("An error occured while getting inbox content")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("k2aService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs",getK2aFeed:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={key:"k2a",startPoint:encodeURIComponent(o),numberOfRows:encodeURIComponent(a)},t.get(n.apiPath+"/rssproxy/rss",i).then(function(e){r.resolve(e.data)},function(e){console.log("k2aService::getK2aFeed error",e),r.reject("An error occured while getting k2a content")}),r.promise},isK2AInit:function(){var o=e.defer(),a=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/app/K2AActive",a).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::isK2AInit error",e),o.reject("An error occured while getting k2a content")}),o.promise},initK2A:function(o){var a=e.defer(),r={name:o};return t.post(n.apiPath+"/app/K2AInit",r).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::initK2A error",e),a.reject("An error occured while trying to initialize k2a")}),a.promise},postK2AComment:function(o){var a=e.defer(),r={post:o};return t.post(n.apiPath+"/app/comment",r).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::postK2AComment error",e),a.reject("An error occured while trying to post a comment to k2a")}),a.promise},removeK2AComment:function(o){var a=e.defer();return t.del(n.apiPath+"/app/comment/"+encodeURIComponent(o)).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::removeK2AComment error",e),a.reject("An error occured while trying to remove a comment from k2a")}),a.promise},preventionRulesList:function(){var o=e.defer();return t.get(n.apiPath+"/resources/preventionRulesList",Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::preventionRulesList error",e),o.reject("An error occured while trying to remove a comment from k2a")}),o.promise},loadPreventionRuleById:function(o){var a=e.defer();return t.post(n.apiPath+"/resources/loadPreventionRulesById/"+encodeURIComponent(o.id),o).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::loadPreventionRuleById error",e),a.reject("An error occured while trying to loadPreventionRulesById")}),a.promise},getCurrentPreventionRulesVersion:function(){var o=e.defer();return t.get(n.apiPath+"/resources/currentPreventionRulesVersion",Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::getCurrentPreventionRulesVersion error",e),o.reject("An error occured while trying to getCurrentPreventionRulesVersion")}),o.promise},getNotifications:function(){var o=e.defer();return t.get(n.apiPath+"/resources/notifications",Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::getNotifications error",e),o.reject("An error occured while trying to getNotifications")}),o.promise},getMoreNotification:function(o){var a=e.defer();return t.post(n.apiPath+"/resources/notifications/readmore",o,Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::getMoreNotification error",e),a.reject("An error occured while trying to /resources/notifications/readmore")}),a.promise},ackNotification:function(o){var a=e.defer();return t.post(n.apiPath+"/resources/notifications/"+o+"/ack",Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::ackNotification error",e),a.reject("An error occured while trying to /resources/notifications/ack")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("messageService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/messaging",getUnread:function(o){var a=t.defer();return e({url:n.apiPath+"/unread?startIndex=0&limit="+encodeURIComponent(o),method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("messageService::getUnread error",e),a.reject("An error occurred while getting messages")}),a.promise},getUnreadCount:function(){var o=t.defer();return e({url:n.apiPath+"/count",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("messageService::getUnreadCount error",e),o.reject("An error occurred while getting messages")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("noteService",["$http","$q","junoHttp",function(e,t,n){var o={apiPath:"../ws/rs/notes",getNotesFrom:function(e,a,r,i){var l=t.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={offset:encodeURIComponent(a),numToReturn:encodeURIComponent(r),noteConfig:i},n.post(o.apiPath+"/"+encodeURIComponent(e)+"/all",s).then(function(e){l.resolve(e.data)},function(e){console.log("noteService::getNotesFrom error",e),l.reject("An error occurred while fetching notes")}),l.promise},saveNote:function(e,a){var r=t.defer();return n.post(o.apiPath+"/"+encodeURIComponent(e)+"/save",a).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::saveNote error",e),r.reject("An error occurred while saving note")}),r.promise},saveIssueNote:function(n,a){var r=t.defer();return e.post(o.apiPath+"/"+encodeURIComponent(n)+"/saveIssueNote",a).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::saveIssueNote error",e),r.reject("An error occurred while saving issue note")}),r.promise},getCurrentNote:function(n,a){var r=t.defer();return e.post(o.apiPath+"/"+encodeURIComponent(n)+"/getCurrentNote",a).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::getCurrentNote error",e),r.reject("An error occurred while fetching current note")}),r.promise},tmpSave:function(n,a){var r=t.defer();return e.post(o.apiPath+"/"+encodeURIComponent(n)+"/tmpSave",a).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::tmpSave error",e),r.reject("An error occurred while posting tmp save")}),r.promise},getNoteExt:function(n){var a=t.defer();return e.get(o.apiPath+"/getGroupNoteExt/"+encodeURIComponent(n)).then(function(e){a.resolve(e.data)},function(e){console.log("noteService::getNoteExt error",e),a.reject("An error occurred while fetching note ext")}),a.promise},getIssueNote:function(e){var a=t.defer();return n.get(o.apiPath+"/getIssueNote/"+encodeURIComponent(e),Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("noteService::getIssueNote error",e),a.reject("An error occurred while fetching issue note")}),a.promise},getIssueId:function(n){var a=t.defer();return e.get(o.apiPath+"/getIssueId/"+encodeURIComponent(n)).then(function(e){a.resolve(e.data)},function(e){console.log("noteService::getIssueId error",e),a.reject("An error occurred while fetching issue id")}),a.promise},getTicklerNote:function(n){var a=t.defer();return e.get(o.apiPath+"/ticklerGetNote/"+encodeURIComponent(n),{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("noteService::getTicklerNote error",e),a.reject("An error occurred while fetching tickler note")}),a.promise},saveTicklerNote:function(n){var a=t.defer();return e({url:o.apiPath+"/ticklerSaveNote",method:"POST",data:JSON.stringify(n),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("noteService::saveTicklerNote error",e),a.reject("An error occurred while saving tickler note")}),a.promise},searchIssues:function(n,a,r){var i=t.defer();return e.post(o.apiPath+"/searchIssues?startIndex="+encodeURIComponent(a)+"&itemsToReturn="+encodeURIComponent(r),n).then(function(e){i.resolve(e.data)},function(e){console.log("noteService::searchIssues error",e),i.reject("An error occurred while searching issues")}),i.promise},getIssue:function(n){var a=t.defer();return e.post(o.apiPath+"/getIssueById/"+encodeURIComponent(n)).then(function(e){a.resolve(e.data)},function(e){console.log("noteService::getIssue error",e),a.reject("An error occurred while fetching issue")}),a.promise},setEditingNoteFlag:function(n,a){var r=t.defer();return e.post(o.apiPath+"/setEditingNoteFlag?noteUUID="+encodeURIComponent(n)+"&userId="+encodeURIComponent(a)).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::setEditingNoteFlag error",e),r.reject("An error occurred while setting editing note flag")}),r.promise},checkEditNoteNew:function(n,a){var r=t.defer();return e.post(o.apiPath+"/checkEditNoteNew?noteUUID="+encodeURIComponent(n)+"&userId="+encodeURIComponent(a)).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::checkEditNoteNew error",e),r.reject("An error occurred while checking edit note new")}),r.promise},removeEditingNoteFlag:function(n,a){var r=t.defer();return e.post(o.apiPath+"/removeEditingNoteFlag?noteUUID="+encodeURIComponent(n)+"&userId="+encodeURIComponent(a)).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::removeEditingNoteFlag error",e),r.reject("An error occurred while removing editing note flag")}),r.promise}};return o}])},function(e,t,n){"use strict";angular.module("Common.Services").service("patientDetailStatusService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/patientDetailStatusService",getStatus:function(o){var a=t.defer();return e.get(n.apiPath+"/getStatus?demographicNo="+encodeURIComponent(o),Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("patientDetailStatusService::getStatus error",e),a.reject("An error occurred while fetching status")}),a.promise},validateHC:function(o,a){var r=t.defer();return e.get(n.apiPath+"/validateHC?hin="+encodeURIComponent(o)+"&ver="+encodeURIComponent(a),Juno.Common.ServiceHelper.configHeaders()).then(function(e){r.resolve(e.data)},function(e){console.log("patientDetailStatusService::validateHC error",e),r.reject("An error occurred while fetching health card validation info")}),r.promise},isUniqueHC:function(o,a){var r=t.defer();return e.get(n.apiPath+"/isUniqueHC?hin="+encodeURIComponent(o)+"&demographicNo="+encodeURIComponent(a),Juno.Common.ServiceHelper.configHeaders()).then(function(e){r.resolve(e.data)},function(e){console.log("patientDetailStatusService::isUniqueHC error",e),r.reject("An error occurred while checking health card uniqueness")}),r.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("personaService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/persona",getDashboardMenu:function(){var o=t.defer();return e({url:n.apiPath+"/dashboardMenu",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("personaService::getDashboardMenu error",e),o.reject("An error occured while getting the dashboard menu from persona")}),o.promise},getNavBar:function(){var o=t.defer();return e({url:n.apiPath+"/navbar",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("personaService::getNavBar error",e),o.reject("An error occured while getting navbar from persona")}),o.promise},getPatientListConfig:function(){var o=t.defer();return e({url:n.apiPath+"/patientList/config",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("personaService::getPatientListConfig error",e),o.reject("An error occured while getting getPatientListConfig from persona")}),o.promise},setPatientListConfig:function(o){var a=t.defer();return e({url:n.apiPath+"/patientList/config",method:"POST",data:o,headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("personaService::setPatientListConfig error",e),a.reject("An error occured while setting setPatientListConfig from persona")}),a.promise},setCurrentProgram:function(o){var a=t.defer();return e({url:n.apiPath+"/setDefaultProgramInDomain?programId="+encodeURIComponent(o),method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("personaService::setCurrentProgram error",e),a.reject("An error occured while setting current")}),a.promise},getDashboardPreferences:function(){var o=t.defer();return e({url:n.apiPath+"/preferences",method:"POST",data:{type:"dashboard"},headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("personaService::getDashboardPreferences error",e),o.reject("An error occured while getting preferences from persona")}),o.promise},updateDashboardPreferences:function(o){var a=t.defer();return e({url:n.apiPath+"/updatePreferences",method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("personaService::updateDashboardPreferences error",e),a.reject("An error occured while updating preferences")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("programService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/",getPrograms:function(){var o=t.defer();return e.get(n.apiPath+"program/programList",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){console.log(e.data),o.resolve(e.data.content)},function(e){console.log("error fetching program list:",e),o.reject("An error occured while fetching program list")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("providerService",["$http","$q","junoHttp",function(e,t,n){var o={apiPath:"../ws/rs/providerService",getMe:function(){var n=t.defer();return e.get(o.apiPath+"/provider/me",o.configHeaders).then(function(e){n.resolve(e.data)},function(e){console.log("providerService::getMe error",e),n.reject("An error occured while getting user data")}),n.promise},getProvider:function(n){var a=t.defer();return e.get(o.apiPath+"/provider/"+encodeURIComponent(n),o.configHeaders).then(function(e){a.resolve(e.data)},function(e){console.log("providerService::getProvider error",e),a.reject("An error occured while getting user data")}),a.promise},searchProviders:function(n){var a=t.defer();return e({url:o.apiPath+"/providers/search",method:"POST",data:JSON.stringify(n),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data.content)},function(e){console.log("providerService::searchProviders error",e),a.reject("An error occured while fetching provider list")}),a.promise},getSettings:function(){var n=t.defer();return e({url:o.apiPath+"/settings/get",method:"GET"}).then(function(e){n.resolve(e.data.content[0])},function(e){console.log("providerService::getSettings error",e),n.reject("An error occured while fetching provider settings")}),n.promise},saveSettings:function(n,a){var r=t.defer();return e({url:o.apiPath+"/settings/"+n+"/save",method:"POST",data:JSON.stringify(a),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){r.resolve(e.data)},function(e){console.log("providerService::saveSettings error",e),r.reject("An error occured while saving settings")}),r.promise},getActiveTeams:function(){var n=t.defer();return e({url:o.apiPath+"/getActiveTeams",method:"GET"}).then(function(e){n.resolve(e.data.content)},function(e){console.log("providerService::getActiveTeams error",e),n.reject("An error occured while fetching provider teams")}),n.promise},getRecentPatientList:function(){var e=t.defer(),a=Juno.Common.ServiceHelper.configHeaders();return n.get(o.apiPath+"/getRecentDemographicsViewed",a).then(function(t){e.resolve(t.data)},function(t){e.reject("An error occurred while getting RecentDemographicsViewed: "+t)}),e.promise}};return o}])},function(e,t,n){"use strict";angular.module("Common.Services").service("providersService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/providers",search:function(o,a,r,i){var l=e.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={searchText:o,searchMode:a,page:r,perPage:i},t.get(n.apiPath,s).then(function(e){l.resolve(e.data)},function(e){console.log("providersService::search error",e),l.reject("An error occurred while getting providers data")}),l.promise},getBySecurityRole:function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={role:o},t.get(n.apiPath+"/bySecurityRole",r).then(function(e){a.resolve(e.data)},function(e){console.log("providersService::getBySecurityRole error",e),a.reject("An error occurred while getting providers data")}),a.promise},getByType:function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={type:o},t.get(n.apiPath+"/byType",r).then(function(e){a.resolve(e.data)},function(e){console.log("providersService::getByType error",e),a.reject("An error occurred while getting providers data")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("reportingService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/reporting/",getDemographicSetList:function(){var o=e.defer(),a=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"demographicSets/list",a).then(function(e){o.resolve(e.data)},function(e){console.log("reportingService::demographicSets error",e),o.reject("An error occurred while fetching demographicSets")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("resultsService",[function(){var e={factory:function(e,t){var n={data:{},meta:{},has_results:!1,error_type:null};return util.exists(e)&&!angular.equals(e,{})&&(n.data=e,angular.equals(e,{})||angular.equals(e,[])||(n.has_results=!0)),util.exists(t)?n.meta=t:(n.meta={},n.meta.pagination={page:1,per_page:10,total:0,total_pages:0}),n}};return e}])},function(e,t,n){"use strict";angular.module("Common.Services").service("scheduleService",["$http","$q","junoHttp",function(e,t,n){var o={apiPath:"../ws/rs/",selectedDate:null,getStatuses:function(){var n=t.defer();return e.get(o.apiPath+"schedule/statuses",o.configHeadersWithCache).then(function(e){n.resolve(e.data)},function(e){console.log("scheduleService::getStatuses error",e),n.reject("An error occurred while fetching statuses")}),n.promise},getTypes:function(){var n=t.defer();return e.get(o.apiPath+"schedule/types",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){n.resolve(e.data)},function(e){console.log("scheduleService::getStatuses error",e),n.reject("An error occurred while fetching types")}),n.promise},getAppointments:function(e){var a=t.defer(),r=Juno.Common.ServiceHelper.configHeaders();return n.get(o.apiPath+"schedule/day/"+encodeURIComponent(e),r).then(function(e){a.resolve(e.data)},function(e){console.log("scheduleService::getAppointments error",e),a.reject("An error occurred while getting appointments")}),a.promise},addAppointment:function(n){var a=t.defer();return e({url:o.apiPath+"schedule/add",method:"POST",data:JSON.stringify(n),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("scheduleService::addAppointment error",e),a.reject("An error occurred while saving appointment")}),a.promise},getAppointment:function(n){var a=t.defer();return e({url:o.apiPath+"schedule/getAppointment",method:"POST",data:{id:n},headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data.appointment)},function(e){console.log("scheduleService::getAppointment error",e),a.reject("An error occurred while getting appointment")}),a.promise},deleteAppointment:function(n){var a=t.defer();return e({url:o.apiPath+"schedule/deleteAppointment",method:"POST",data:{id:n},headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("scheduleService::deleteAppointment error",e),a.reject("An error occurred while deleting appointment")}),a.promise},appointmentHistory:function(n){var a=t.defer();return e({url:o.apiPath+"schedule/"+encodeURIComponent(n)+"/appointmentHistory",method:"POST",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("scheduleService::appointmentHistory error",e),a.reject("An error occurred while getting appointment history")}),a.promise},cancelAppointment:function(n){var a=t.defer();return e({url:o.apiPath+"schedule/appointment/"+encodeURIComponent(n)+"/updateStatus",method:"POST",data:{status:"C"},headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("scheduleService::cancelAppointment error",e),a.reject("An error occurred while cancelling appointment")}),a.promise},noShowAppointment:function(n){var a=t.defer();return e({url:o.apiPath+"schedule/appointment/"+encodeURIComponent(n)+"/updateStatus",method:"POST",data:{status:"N"},headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("scheduleService::noShowAppointment error",e),a.reject("An error occurred while setting no show appointment")}),a.promise},getScheduleGroups:function(){var e=t.defer();return n.get(o.apiPath+"schedule/groups",{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(t){e.resolve(t.data)},function(t){console.log("scheduleService::getScheduleGroups error",t),e.reject()}),e.promise},getSchedulesForCalendar:function(e,a,r,i){var l=t.defer(),s=o.apiPath+"schedule/calendar/";return s+=encodeURIComponent(e)+"/",s+="?startDate="+encodeURIComponent(a),s+="&endDate="+encodeURIComponent(r),null!=i&&(s+="&site="+encodeURIComponent(i)),n.get(s,{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){l.resolve(e.data)},function(e){console.log("scheduleService::getSchedulesForCalendar error",e),l.reject()}),l.promise},getScheduleTemplateCodes:function(){var e=t.defer();return n.get(o.apiPath+"schedule/templateCodes",{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(t){e.resolve(t.data)},function(t){console.log("scheduleService::getAvailabilityTypes error",t),e.reject()}),e.promise},getAppointmentStatuses:function(){var e=t.defer();return n.get(o.apiPath+"schedule/calendar/statuses",{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(t){e.resolve(t.data)},function(t){console.log("scheduleService::getAppointmentStatuses error",t),e.reject()}),e.promise},getSites:function(){var e=t.defer();return n.get(o.apiPath+"sites",{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(t){e.resolve(t.data)},function(t){console.log("scheduleService::getSites error",t),e.reject()}),e.promise}};return o}])},function(e,t,n){"use strict";angular.module("Common.Services").service("securityService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/",user:null,getUser:function(){return n.user},setUser:function(e){n.user=e},hasRight:function(o,a,r){var i=t.defer(),l=n.apiPath+"persona/hasRight?objectName="+encodeURIComponent(o)+"&privilege="+encodeURIComponent(a)+"&demographicNo="+encodeURIComponent(r);return e.get(l,n.configHeadersWithCache).then(function(e){i.resolve(e.data.success)},function(e){console.log("securityService::hasRight error",e),i.reject("An error occured while fetching access right")}),i.promise},hasRights:function(o){var a=t.defer();return e({url:n.apiPath+"persona/hasRights",method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("securityService::hasRights error",e),a.reject("An error occured while fetching access rights")}),a.promise},isAllowedAccessToPatientRecord:function(o){var a=t.defer();return e({url:n.apiPath+"persona/isAllowedAccessToPatientRecord",method:"POST",data:JSON.stringify({demographicNo:o}),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("securityService::isAllowedAccessToPatientRecord error",e),a.reject("An error occured while fetching access rights")}),a.promise},hasOneOfPermissions:function(e){return!0},hasPermission:function(e){return!0}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("staticDataService",[function(){var e={getGenders:function(){var e=[];return e.push({value:"M",label:"Male"}),e.push({value:"F",label:"Female"}),e.push({value:"T",label:"Transgender"}),e.push({value:"O",label:"Other"}),e.push({value:"U",label:"Undefined"}),e},getTitles:function(){var e=[];return e.push({value:"MISS",label:"MISS"}),e.push({value:"MRS",label:"MRS"}),e.push({value:"MS",label:"MS"}),e.push({value:"MR",label:"MR"}),e.push({value:"MSSR",label:"MSSR"}),e.push({value:"DR",label:"DR"}),e.push({value:"PROF",label:"PROF"}),e.push({value:"REEVE",label:"REEVE"}),e.push({value:"REV",label:"REV"}),e.push({value:"RT_HON",label:"RT_HON"}),e.push({value:"SEN",label:"SEN"}),e.push({value:"SGT",label:"SGT"}),e.push({value:"SR",label:"SR"}),e},getProvinces:function(){var e=[];return e.push({value:"AB",label:"AB-Alberta"}),e.push({value:"BC",label:"BC-British Columbia"}),e.push({value:"MB",label:"MB-Manitoba"}),e.push({value:"NB",label:"NB-New Brunswick"}),e.push({value:"NL",label:"NL-Newfoundland Labrador"}),e.push({value:"NT",label:"NT-Northwest Territory"}),e.push({value:"NS",label:"NS-Nova Scotia"}),e.push({value:"NU",label:"NU-Nunavut"}),e.push({value:"ON",label:"ON-Ontario"}),e.push({value:"PE",label:"PE-Prince Edward Island"}),e.push({value:"QC",label:"QC-Quebec"}),e.push({value:"SK",label:"SK-Saskatchewan"}),e.push({value:"YT",label:"YT-Yukon"}),e.push({value:"US",label:"US resident"}),e.push({value:"US-AK",label:"US-AK-Alaska"}),e.push({value:"US-AL",label:"US-AL-Alabama"}),e.push({value:"US-AR",label:"US-AR-Arkansas"}),e.push({value:"US-AZ",label:"US-AZ-Arizona"}),e.push({value:"US-CA",label:"US-CA-California"}),e.push({value:"US-CO",label:"US-CO-Colorado"}),e.push({value:"US-CT",label:"US-CT-Connecticut"}),e.push({value:"US-CZ",label:"US-CZ-Canal Zone"}),e.push({value:"US-DC",label:"US-DC-District Of Columbia"}),e.push({value:"US-DE",label:"US-DE-Delaware"}),e.push({value:"US-FL",label:"US-FL-Florida"}),e.push({value:"US-GA",label:"US-GA-Georgia"}),e.push({value:"US-GU",label:"US-GU-Guam"}),e.push({value:"US-HI",label:"US-HI-Hawaii"}),e.push({value:"US-IA",label:"US-IA-Iowa"}),e.push({value:"US-ID",label:"US-ID-Idaho"}),e.push({value:"US-IL",label:"US-IL-Illinois"}),e.push({value:"US-IN",label:"US-IN-Indiana"}),e.push({value:"US-KS",label:"US-KS-Kansas"}),e.push({value:"US-KY",label:"US-KY-Kentucky"}),e.push({value:"US-LA",label:"US-LA-Louisiana"}),e.push({value:"US-MA",label:"US-MA-Massachusetts"}),e.push({value:"US-MD",label:"US-MD-Maryland"}),e.push({value:"US-ME",label:"US-ME-Maine"}),e.push({value:"US-MI",label:"US-MI-Michigan"}),e.push({value:"US-MN",label:"US-MN-Minnesota"}),e.push({value:"US-MO",label:"US-MO-Missouri"}),e.push({value:"US-MS",label:"US-MS-Mississippi"}),e.push({value:"US-MT",label:"US-MT-Montana"}),e.push({value:"US-NC",label:"US-NC-North Carolina"}),e.push({value:"US-ND",label:"US-ND-North Dakota"}),e.push({value:"US-NE",label:"US-NE-Nebraska"}),e.push({value:"US-NH",label:"US-NH-New Hampshire"}),e.push({value:"US-NJ",label:"US-NJ-New Jersey"}),e.push({value:"US-NM",label:"US-NM-New Mexico"}),e.push({value:"US-NU",label:"US-NU-Nunavut"}),e.push({value:"US-NV",label:"US-NV-Nevada"}),e.push({value:"US-NY",label:"US-NY-New York"}),e.push({value:"US-OH",label:"US-OH-Ohio"}),e.push({value:"US-OK",label:"US-OK-Oklahoma"}),e.push({value:"US-OR",label:"US-OR-Oregon"}),e.push({value:"US-PA",label:"US-PA-Pennsylvania"}),e.push({value:"US-PR",label:"US-PR-Puerto Rico"}),e.push({value:"US-RI",label:"US-RI-Rhode Island"}),e.push({value:"US-SC",label:"US-SC-South Carolina"}),e.push({value:"US-SD",label:"US-SD-South Dakota"}),e.push({value:"US-TN",label:"US-TN-Tennessee"}),e.push({value:"US-TX",label:"US-TX-Texas"}),e.push({value:"US-UT",label:"US-UT-Utah"}),e.push({value:"US-VA",label:"US-VA-Virginia"}),e.push({value:"US-VI",label:"US-VI-Virgin Islands"}),e.push({value:"US-VT",label:"US-VT-Vermont"}),e.push({value:"US-WA",label:"US-WA-Washington"}),e.push({value:"US-WI",label:"US-WI-Wisconsin"}),e.push({value:"US-WV",label:"US-WV-West Virginia"}),e.push({value:"US-WY",label:"US-WY-Wyoming"}),e.push({value:"OT",label:"Other"}),e},getCountries:function(){var e=[];return e.push({value:"AF",label:"AFGHANISTAN"}),e.push({value:"AX",label:"ALAND ISLANDS"}),e.push({value:"AL",label:"ALBANIA"}),e.push({value:"DZ",label:"ALGERIA"}),e.push({value:"AS",label:"AMERICAN SAMOA"}),e.push({value:"AD",label:"ANDORRA"}),e.push({value:"AO",label:"ANGOLA"}),e.push({value:"AI",label:"ANGUILLA"}),e.push({value:"AQ",label:"ANTARCTICA"}),e.push({value:"AG",label:"ANTIGUA AND BARBUDA"}),e.push({value:"AR",label:"ARGENTINA"}),e.push({value:"AM",label:"ARMENIA"}),e.push({value:"AW",label:"ARUBA"}),e.push({value:"AU",label:"AUSTRALIA"}),e.push({value:"AT",label:"AUSTRIA"}),e.push({value:"AZ",label:"AZERBAIJAN"}),e.push({value:"BS",label:"BAHAMAS"}),e.push({value:"BH",label:"BAHRAIN"}),e.push({value:"BD",label:"BANGLADESH"}),e.push({value:"BB",label:"BARBADOS"}),e.push({value:"BY",label:"BELARUS"}),e.push({value:"BE",label:"BELGIUM"}),e.push({value:"BZ",label:"BELIZE"}),e.push({value:"BJ",label:"BENIN"}),e.push({value:"BM",label:"BERMUDA"}),e.push({value:"BT",label:"BHUTAN"}),e.push({value:"BO",label:"BOLIVIA"}),e.push({value:"BA",label:"BOSNIA AND HERZEGOVINA"}),e.push({value:"BW",label:"BOTSWANA"}),e.push({value:"BV",label:"BOUVET ISLAND"}),e.push({value:"BR",label:"BRAZIL"}),e.push({value:"IO",label:"BRITISH INDIAN OCEAN TERRITORY"}),e.push({value:"BN",label:"BRUNEI DARUSSALAM"}),e.push({value:"BG",label:"BULGARIA"}),e.push({value:"BF",label:"BURKINA FASO"}),e.push({value:"BI",label:"BURUNDI"}),e.push({value:"KH",label:"CAMBODIA"}),e.push({value:"CM",label:"CAMEROON"}),e.push({value:"CA",label:"CANADA"}),e.push({value:"CV",label:"CAPE VERDE"}),e.push({value:"KY",label:"CAYMAN ISLANDS"}),e.push({value:"CF",label:"CENTRAL AFRICAN REPUBLIC"}),e.push({value:"TD",label:"CHAD"}),e.push({value:"CL",label:"CHILE"}),e.push({value:"CN",label:"CHINA"}),e.push({value:"CX",label:"CHRISTMAS ISLAND"}),e.push({value:"CC",label:"COCOS (KEELING) ISLANDS"}),e.push({value:"CO",label:"COLOMBIA"}),e.push({value:"KM",label:"COMOROS"}),e.push({value:"CG",label:"CONGO"}),e.push({value:"CD",label:"CONGO, THE DEMOCRATIC REPUBLIC OF THE"}),e.push({value:"CK",label:"COOK ISLANDS"}),e.push({value:"CR",label:"COSTA RICA"}),e.push({value:"CI",label:"CÃ¯TE D IVOIRE"}),e.push({value:"HR",label:"CROATIA"}),e.push({value:"CU",label:"CUBA"}),e.push({value:"CY",label:"CYPRUS"}),e.push({value:"CZ",label:"CZECH REPUBLIC"}),e.push({value:"DK",label:"DENMARK"}),e.push({value:"DJ",label:"DJIBOUTI"}),e.push({value:"DM",label:"DOMINICA"}),e.push({value:"DO",label:"DOMINICAN REPUBLIC"}),e.push({value:"EC",label:"ECUADOR"}),e.push({value:"EG",label:"EGYPT"}),e.push({value:"SV",label:"EL SALVADOR"}),e.push({value:"GQ",label:"EQUATORIAL GUINEA"}),e.push({value:"ER",label:"ERITREA"}),e.push({value:"EE",label:"ESTONIA"}),e.push({value:"ET",label:"ETHIOPIA"}),e.push({value:"FK",label:"FALKLAND ISLANDS (MALVINAS)"}),e.push({value:"FO",label:"FAROE ISLANDS"}),e.push({value:"FJ",label:"FIJI"}),e.push({value:"FI",label:"FINLAND"}),e.push({value:"FR",label:"FRANCE"}),e.push({value:"GF",label:"FRENCH GUIANA"}),e.push({value:"PF",label:"FRENCH POLYNESIA"}),e.push({value:"TF",label:"FRENCH SOUTHERN TERRITORIES"}),e.push({value:"GA",label:"GABON"}),e.push({value:"GM",label:"GAMBIA"}),e.push({value:"GE",label:"GEORGIA"}),e.push({value:"DE",label:"GERMANY"}),e.push({value:"GH",label:"GHANA"}),e.push({value:"GI",label:"GIBRALTAR"}),e.push({value:"GR",label:"GREECE"}),e.push({value:"GL",label:"GREENLAND"}),e.push({value:"GD",label:"GRENADA"}),e.push({value:"GP",label:"GUADELOUPE"}),e.push({value:"GU",label:"GUAM"}),e.push({value:"GT",label:"GUATEMALA"}),e.push({value:"GG",label:"GUERNSEY"}),e.push({value:"GN",label:"GUINEA"}),e.push({value:"GW",label:"GUINEA-BISSAU"}),e.push({value:"GY",label:"GUYANA"}),e.push({value:"HT",label:"HAITI"}),e.push({value:"HM",label:"HEARD ISLAND AND MCDONALD ISLANDS"}),e.push({value:"VA",label:"HOLY SEE (VATICAN CITY STATE)"}),e.push({value:"HN",label:"HONDURAS"}),e.push({value:"HK",label:"HONG KONG"}),e.push({value:"HU",label:"HUNGARY"}),e.push({value:"IS",label:"ICELAND"}),e.push({value:"IN",label:"INDIA"}),e.push({value:"ID",label:"INDONESIA"}),e.push({value:"IR",label:"IRAN, ISLAMIC REPUBLIC OF"}),e.push({value:"IQ",label:"IRAQ"}),e.push({value:"IE",label:"IRELAND"}),e.push({value:"IM",label:"ISLE OF MAN"}),e.push({value:"IL",label:"ISRAEL"}),e.push({value:"IT",label:"ITALY"}),e.push({value:"JM",label:"JAMAICA"}),e.push({value:"JP",label:"JAPAN"}),e.push({value:"JE",label:"JERSEY"}),e.push({value:"JO",label:"JORDAN"}),e.push({value:"KZ",label:"KAZAKHSTAN"}),e.push({value:"KE",label:"KENYA"}),e.push({value:"KI",label:"KIRIBATI"}),e.push({value:"KP",label:"KOREA, DEMOCRATIC PEOPLES REPUBLIC OF"}),e.push({value:"KR",label:"KOREA, REPUBLIC OF"}),e.push({value:"KW",label:"KUWAIT"}),e.push({value:"KG",label:"KYRGYZSTAN"}),e.push({value:"LA",label:"LAO PEOPLES DEMOCRATIC REPUBLIC"}),e.push({value:"LV",label:"LATVIA"}),e.push({value:"LB",label:"LEBANON"}),e.push({value:"LS",label:"LESOTHO"}),e.push({value:"LR",label:"LIBERIA"}),e.push({value:"LY",label:"LIBYAN ARAB JAMAHIRIYA"}),e.push({value:"LI",label:"LIECHTENSTEIN"}),e.push({value:"LT",label:"LITHUANIA"}),e.push({value:"LU",label:"LUXEMBOURG"}),e.push({value:"MO",label:"MACAO"}),e.push({value:"MK",label:"MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF"}),e.push({value:"MG",label:"MADAGASCAR"}),e.push({value:"MW",label:"MALAWI"}),e.push({value:"MY",label:"MALAYSIA"}),e.push({value:"MV",label:"MALDIVES"}),e.push({value:"ML",label:"MALI"}),e.push({value:"MT",label:"MALTA"}),e.push({value:"MH",label:"MARSHALL ISLANDS"}),e.push({value:"MQ",label:"MARTINIQUE"}),e.push({value:"MR",label:"MAURITANIA"}),e.push({value:"MU",label:"MAURITIUS"}),e.push({value:"YT",label:"MAYOTTE"}),e.push({value:"MX",label:"MEXICO"}),e.push({value:"FM",label:"MICRONESIA, FEDERATED STATES OF"}),e.push({value:"MD",label:"MOLDOVA"}),e.push({value:"MC",label:"MONACO"}),e.push({value:"MN",label:"MONGOLIA"}),e.push({value:"ME",label:"MONTENEGRO"}),e.push({value:"MS",label:"MONTSERRAT"}),e.push({value:"MA",label:"MOROCCO"}),e.push({value:"MZ",label:"MOZAMBIQUE"}),e.push({value:"MM",label:"MYANMAR"}),e.push({value:"NA",label:"NAMIBIA"}),e.push({value:"NR",label:"NAURU"}),e.push({value:"NP",label:"NEPAL"}),e.push({value:"NL",label:"NETHERLANDS"}),e.push({value:"AN",label:"NETHERLANDS ANTILLES"}),e.push({value:"NC",label:"NEW CALEDONIA"}),e.push({value:"NZ",label:"NEW ZEALAND"}),e.push({value:"NI",label:"NICARAGUA"}),e.push({value:"NE",label:"NIGER"}),e.push({value:"NG",label:"NIGERIA"}),e.push({value:"NU",label:"NIUE"}),e.push({value:"NF",label:"NORFOLK ISLAND"}),e.push({value:"MP",label:"NORTHERN MARIANA ISLANDS"}),e.push({value:"NO",label:"NORWAY"}),e.push({value:"OM",label:"OMAN"}),e.push({value:"PK",label:"PAKISTAN"}),e.push({value:"PW",label:"PALAU"}),e.push({value:"PS",label:"PALESTINIAN TERRITORY, OCCUPIED"}),e.push({value:"PA",label:"PANAMA"}),e.push({value:"PG",label:"PAPUA NEW GUINEA"}),e.push({value:"PY",label:"PARAGUAY"}),e.push({value:"PE",label:"PERU"}),e.push({value:"PH",label:"PHILIPPINES"}),e.push({value:"PN",label:"PITCAIRN"}),e.push({value:"PL",label:"POLAND"}),e.push({value:"PT",label:"PORTUGAL"}),e.push({value:"PR",label:"PUERTO RICO"}),e.push({value:"QA",label:"QATAR"}),e.push({value:"RE",label:"RÆUNION"}),e.push({value:"RO",label:"ROMANIA"}),e.push({value:"RU",label:"RUSSIAN FEDERATION"}),e.push({value:"RW",label:"RWANDA"}),e.push({value:"BL",label:"SAINT BARTHÆLEMY"}),e.push({value:"SH",label:"SAINT HELENA"}),e.push({value:"KN",label:"SAINT KITTS AND NEVIS"}),e.push({value:"LC",label:"SAINT LUCIA"}),e.push({value:"MF",label:"SAINT MARTIN"}),e.push({value:"PM",label:"SAINT PIERRE AND MIQUELON"}),e.push({value:"VC",label:"SAINT VINCENT AND THE GRENADINES"}),e.push({value:"WS",label:"SAMOA"}),e.push({value:"SM",label:"SAN MARINO"}),e.push({value:"ST",label:"SAO TOME AND PRINCIPE"}),e.push({value:"SA",label:"SAUDI ARABIA"}),e.push({value:"SN",label:"SENEGAL"}),e.push({value:"RS",label:"SERBIA"}),e.push({value:"SC",label:"SEYCHELLES"}),e.push({value:"SL",label:"SIERRA LEONE"}),e.push({value:"SG",label:"SINGAPORE"}),e.push({value:"SK",label:"SLOVAKIA"}),e.push({value:"SI",label:"SLOVENIA"}),e.push({value:"SB",label:"SOLOMON ISLANDS"}),e.push({value:"SO",label:"SOMALIA"}),e.push({value:"ZA",label:"SOUTH AFRICA"}),e.push({value:"GS",label:"SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS"}),e.push({value:"ES",label:"SPAIN"}),e.push({value:"LK",label:"SRI LANKA"}),e.push({value:"SD",label:"SUDAN"}),e.push({value:"SR",label:"SURINAME"}),e.push({value:"SJ",label:"SVALBARD AND JAN MAYEN"}),e.push({value:"SZ",label:"SWAZILAND"}),e.push({value:"SE",label:"SWEDEN"}),e.push({value:"CH",label:"SWITZERLAND"}),e.push({value:"SY",label:"SYRIAN ARAB REPUBLIC"}),e.push({value:"TW",label:"TAIWAN, PROVINCE OF CHINA"}),e.push({value:"TJ",label:"TAJIKISTAN"}),e.push({value:"TZ",label:"TANZANIA, UNITED REPUBLIC OF"}),e.push({value:"TH",label:"THAILAND"}),e.push({value:"TL",label:"TIMOR-LESTE"}),e.push({value:"TG",label:"TOGO"}),e.push({value:"TK",label:"TOKELAU"}),e.push({value:"TO",label:"TONGA"}),e.push({value:"TT",label:"TRINIDAD AND TOBAGO"}),e.push({value:"TN",label:"TUNISIA"}),e.push({value:"TR",label:"TURKEY"}),e.push({value:"TM",label:"TURKMENISTAN"}),e.push({value:"TC",label:"TURKS AND CAICOS ISLANDS"}),e.push({value:"TV",label:"TUVALU"}),e.push({value:"UG",label:"UGANDA"}),e.push({value:"UA",label:"UKRAINE"}),e.push({value:"AE",label:"UNITED ARAB EMIRATES"}),e.push({value:"GB",label:"UNITED KINGDOM"}),e.push({value:"US",label:"UNITED STATES"}),e.push({value:"UM",label:"UNITED STATES MINOR OUTLYING ISLANDS"}),e.push({value:"UY",label:"URUGUAY"}),e.push({value:"UZ",label:"UZBEKISTAN"}),e.push({value:"VU",label:"VANUATU"}),e.push({value:"VA",label:"VATICAN CITY STATE"}),e.push({value:"VE",label:"VENEZUELA"}),e.push({value:"VN",label:"VIET NAM"}),e.push({value:"VG",label:"VIRGIN ISLANDS, BRITISH"}),e.push({value:"VI",label:"VIRGIN ISLANDS, U.S."}),e.push({value:"WF",label:"WALLIS AND FUTUNA"}),e.push({value:"EH",label:"WESTERN SAHARA"}),e.push({value:"YE",label:"YEMEN"}),e.push({value:"ZM",label:"ZAMBIA"}),e.push({value:"ZW",label:"ZIMBABWE"}),e},getEngFre:function(){var e=[];return e.push({value:"English",label:"English"}),e.push({value:"French",label:"French"}),e.push({value:"Other",label:"Other"}),e},getSpokenLanguages:function(){var e=[];return e.push({value:"English",label:"English"}),e.push({value:"French",label:"French"}),e.push({value:"Abkhazian",label:"Abkhazian"}),e.push({value:"Achinese",label:"Achinese"}),e.push({value:"Acoli",label:"Acoli"}),e.push({value:"Adangme",label:"Adangme"}),e.push({value:"Adyghe",label:"Adyghe"}),e.push({value:"Afar",label:"Afar"}),e.push({value:"Afrihili",label:"Afrihili"}),e.push({value:"Afrikaans",label:"Afrikaans"}),e.push({value:"Afro-Asiatic (Other)",label:"Afro-Asiatic"}),e.push({value:"Ainu",label:"Ainu"}),e.push({value:"Akan",label:"Akan"}),e.push({value:"Akkadian",label:"Akkadian"}),e.push({value:"Albanian",label:"Albanian"}),e.push({value:"Aleut",label:"Aleut"}),e.push({value:"Algonquian Languages",label:"Algonquian Languages"}),e.push({value:"Altaic (Other)",label:"Altaic"}),e.push({value:"Amharic",label:"Amharic"}),e.push({value:"Angika",label:"Angika"}),e.push({value:"Apache Languages",label:"Apache Languages"}),e.push({value:"Arabic",label:"Arabic"}),e.push({value:"Aramaic",label:"Aramaic"}),e.push({value:"Arapaho",label:"Arapaho"}),e.push({value:"Araucanian",label:"Araucanian"}),e.push({value:"Arawak",label:"Arawak"}),e.push({value:"Argonese",label:"Argonese"}),e.push({value:"Armenian",label:"Armenian"}),e.push({value:"Aromanian",label:"Aromanian"}),e.push({value:"Artificial (Other)",label:"Artificial"}),e.push({value:"Assamese",label:"Assamese"}),e.push({value:"Asturian",label:"Asturian"}),e.push({value:"Athapascan Languages",label:"Athapascan Languages"}),e.push({value:"Australian Languages",label:"Australian Languages"}),e.push({value:"Austronesian (Other)",label:"Austronesian"}),e.push({value:"Avaric",label:"Avaric"}),e.push({value:"Avestan",label:"Avestan"}),e.push({value:"Awadhi",label:"Awadhi"}),e.push({value:"Aymara",label:"Aymara"}),e.push({value:"Azerbaijani",label:"Azerbaijani"}),e.push({value:"Balinese",label:"Balinese"}),e.push({value:"Baltic (Other)",label:"Baltic"}),e.push({value:"Baluchi",label:"Baluchi"}),e.push({value:"Bambara",label:"Bambara"}),e.push({value:"Bamileke Languages",label:"Bamileke Languages"}),e.push({value:"Banda",label:"Banda"}),e.push({value:"Bantu (Other)",label:"Bantu"}),e.push({value:"Basa",label:"Basa"}),e.push({value:"Bashkir",label:"Bashkir"}),e.push({value:"Basque",label:"Basque"}),e.push({value:"Batak (Indonesia)",label:"Batak (Indonesia)"}),e.push({value:"Beja",label:"Beja"}),e.push({value:"Belarusian",label:"Belarusian"}),e.push({value:"Bemba",label:"Bemba"}),e.push({value:"Bengali",label:"Bengali"}),e.push({value:"Berber (Other)",label:"Berber"}),e.push({value:"Bhojpuri",label:"Bhojpuri"}),e.push({value:"Bihari",label:"Bihari"}),e.push({value:"Bikol",label:"Bikol"}),e.push({value:"Bini",label:"Bini"}),e.push({value:"Bislama",label:"Bislama"}),e.push({value:"Blin",label:"Blin"}),e.push({value:"Bokmal, Norwegian",label:"Bokmal, Norwegian"}),e.push({value:"Bosnian",label:"Bosnian"}),e.push({value:"Braj",label:"Braj"}),e.push({value:"Breton",label:"Breton"}),e.push({value:"Buginese",label:"Buginese"}),e.push({value:"Bulgarian",label:"Bulgarian"}),e.push({value:"Buriat",label:"Buriat"}),e.push({value:"Burmese",label:"Burmese"}),e.push({value:"Caddo",label:"Caddo"}),e.push({value:"Cantonese",label:"Cantonese"}),e.push({value:"Carib",label:"Carib"}),e.push({value:"Catalan",label:"Catalan"}),e.push({value:"Caucasian (Other)",label:"Caucasian"}),e.push({value:"Cebuano",label:"Cebuano"}),e.push({value:"Celtic (Other)",label:"Celtic"}),e.push({value:"Central American Indian (Other)",label:"Central American Indian"}),e.push({value:"Chagatai",label:"Chagatai"}),e.push({value:"Chamic Languages",label:"Chamic Languages"}),e.push({value:"Chamorro",label:"Chamorro"}),e.push({value:"Chechen",label:"Chechen"}),e.push({value:"Cherokee",label:"Cherokee"}),e.push({value:"Cheyenne",label:"Cheyenne"}),e.push({value:"Chibcha",label:"Chibcha"}),e.push({value:"Chichewa",label:"Chichewa"}),e.push({value:"Chinese",label:"Chinese"}),e.push({value:"Chinook Jargon",label:"Chinook Jargon"}),e.push({value:"Chipewyan",label:"Chipewyan"}),e.push({value:"Choctaw",label:"Choctaw"}),e.push({value:"Chuukese",label:"Chuukese"}),e.push({value:"Chuvash",label:"Chuvash"}),e.push({value:"Classical Nepal Bhasa",label:"Classical Nepal Bhasa"}),e.push({value:"Coptic",label:"Coptic"}),e.push({value:"Cornish",label:"Cornish"}),e.push({value:"Corsican",label:"Corsican"}),e.push({value:"Cree",label:"Cree"}),e.push({value:"Creek",label:"Creek"}),e.push({value:"Creoles And Pidgins (Other)",label:"Creoles & Pidgins"}),e.push({value:"Creoles And Pidgins, English-Based (Other)",label:"Creoles & Pidgins, ENG-Based"}),e.push({value:"Creoles And Pidgins, French-Based (Other)",label:"Creoles & Pidgins, FRE-Based"}),e.push({value:"Creoles And Pidgins, Portuguese-Based (Other)",label:"Creoles & Pidgins, POR-Based"}),e.push({value:"Crimean Tatar",label:"Crimean Tatar"}),e.push({value:"Croatian",label:"Croatian"}),e.push({value:"Cushitic (Other)",label:"Cushitic"}),e.push({value:"Czech",label:"Czech"}),e.push({value:"Dakota",label:"Dakota"}),e.push({value:"Danish",label:"Danish"}),e.push({value:"Dargwa",label:"Dargwa"}),e.push({value:"Dayak",label:"Dayak"}),e.push({value:"Delaware",label:"Delaware"}),e.push({value:"Dhivehi",label:"Dhivehi"}),e.push({value:"Dinka",label:"Dinka"}),e.push({value:"Dogri",label:"Dogri"}),e.push({value:"Dogrib",label:"Dogrib"}),e.push({value:"Dravidian (Other)",label:"Dravidian"}),e.push({value:"Duala",label:"Duala"}),e.push({value:"Dutch",label:"Dutch"}),e.push({value:"Dyula",label:"Dyula"}),e.push({value:"Dzongkha",label:"Dzongkha"}),e.push({value:"Eastern Frisian",label:"Eastern Frisian"}),e.push({value:"Efik",label:"Efik"}),e.push({value:"Egyptian (Ancient)",label:"Egyptian (Ancient)"}),e.push({value:"Ekajuk",label:"Ekajuk"}),e.push({value:"Elamite",label:"Elamite"}),e.push({value:"Erzya",label:"Erzya"}),e.push({value:"Esperanto",label:"Esperanto"}),e.push({value:"Estonian",label:"Estonian"}),e.push({value:"Ewe",label:"Ewe"}),e.push({value:"Ewondo",label:"Ewondo"}),e.push({value:"Fang",label:"Fang"}),e.push({value:"Fanti",label:"Fanti"}),e.push({value:"Faroese",label:"Faroese"}),e.push({value:"Fijian",label:"Fijian"}),e.push({value:"Filipino; Pilipino",label:"Filipino; Pilipino"}),e.push({value:"Finnish",label:"Finnish"}),e.push({value:"Finno-Ugrian (Other)",label:"Finno-Ugrian"}),e.push({value:"Fon",label:"Fon"}),e.push({value:"Friulian",label:"Friulian"}),e.push({value:"Fulah",label:"Fulah"}),e.push({value:"Ga",label:"Ga"}),e.push({value:"Gaelic",label:"Gaelic"}),e.push({value:"Gallegan",label:"Gallegan"}),e.push({value:"Ganda",label:"Ganda"}),e.push({value:"Gayo",label:"Gayo"}),e.push({value:"Gbaya",label:"Gbaya"}),e.push({value:"Geez",label:"Geez"}),e.push({value:"Georgian",label:"Georgian"}),e.push({value:"German",label:"German"}),e.push({value:"Germanic (Other)",label:"Germanic"}),e.push({value:"Gikuyu",label:"Gikuyu"}),e.push({value:"Gilbertese",label:"Gilbertese"}),e.push({value:"Gondi",label:"Gondi"}),e.push({value:"Gorontalo",label:"Gorontalo"}),e.push({value:"Gothic",label:"Gothic"}),e.push({value:"Grebo",label:"Grebo"}),e.push({value:"Greek, Modern (1453-)",label:"Greek, Modern (1453-)"}),e.push({value:"Guarani",label:"Guarani"}),e.push({value:"Gujarati",label:"Gujarati"}),e.push({value:"Gwich'in",label:"Gwich'in"}),e.push({value:"Haida",label:"Haida"}),e.push({value:"Haitian Creole",label:"Haitian Creole"}),e.push({value:"Hausa",label:"Hausa"}),e.push({value:"Hawaiian",label:"Hawaiian"}),e.push({value:"Hebrew",label:"Hebrew"}),e.push({value:"Herero",label:"Herero"}),e.push({value:"Hiligaynon",label:"Hiligaynon"}),e.push({value:"Himachali",label:"Himachali"}),e.push({value:"Hindi",label:"Hindi"}),e.push({value:"Hiri Motu",label:"Hiri Motu"}),e.push({value:"Hittite",label:"Hittite"}),e.push({value:"Hmong",label:"Hmong"}),e.push({value:"Hungarian",label:"Hungarian"}),e.push({value:"Hupa",label:"Hupa"}),e.push({value:"Iban",label:"Iban"}),e.push({value:"Icelandic",label:"Icelandic"}),e.push({value:"Ido",label:"Ido"}),e.push({value:"Igbo",label:"Igbo"}),e.push({value:"Ijo",label:"Ijo"}),e.push({value:"Iloko",label:"Iloko"}),e.push({value:"Inari Sami",label:"Inari Sami"}),e.push({value:"Indic (Other)",label:"Indic"}),e.push({value:"Indo-European (Other)",label:"Indo-European"}),e.push({value:"Indonesian",label:"Indonesian"}),e.push({value:"Ingush",label:"Ingush"}),e.push({value:"Interlingua (International Auxiliary Lang. Assoc.)",label:"Interlingua (IALA)"}),e.push({value:"Interlingue",label:"Interlingue"}),e.push({value:"Inuktitut",label:"Inuktitut"}),e.push({value:"Inupiaq",label:"Inupiaq"}),e.push({value:"Iranian (Other)",label:"Iranian"}),e.push({value:"Irish",label:"Irish"}),e.push({value:"Iroquoian Languages",label:"Iroquoian Languages"}),e.push({value:"Italian",label:"Italian"}),e.push({value:"Japanese",label:"Japanese"}),e.push({value:"Javanese",label:"Javanese"}),e.push({value:"Judeo-Arabic",label:"Judeo-Arabic"}),e.push({value:"Judeo-Persian",label:"Judeo-Persian"}),e.push({value:"Kabardian",label:"Kabardian"}),e.push({value:"Kabyle",label:"Kabyle"}),e.push({value:"Kachin",label:"Kachin"}),e.push({value:"Kalaallisut",label:"Kalaallisut"}),e.push({value:"Kalmyk",label:"Kalmyk"}),e.push({value:"Kamba",label:"Kamba"}),e.push({value:"Kannada",label:"Kannada"}),e.push({value:"Kanuri",label:"Kanuri"}),e.push({value:"Kara-Kalpak",label:"Kara-Kalpak"}),e.push({value:"Karachay-Balkar",label:"Karachay-Balkar"}),e.push({value:"Karelian",label:"Karelian"}),e.push({value:"Karen",label:"Karen"}),e.push({value:"Kashmiri",label:"Kashmiri"}),e.push({value:"Kashubian",label:"Kashubian"}),e.push({value:"Kawi",label:"Kawi"}),e.push({value:"Kazakh",label:"Kazakh"}),e.push({value:"Khasi",label:"Khasi"}),e.push({value:"Khmer",label:"Khmer"}),e.push({value:"Khoisan (Other)",label:"Khoisan"}),e.push({value:"Khotanese",label:"Khotanese"}),e.push({value:"Kimbundu",label:"Kimbundu"}),e.push({value:"Kinyarwanda",label:"Kinyarwanda"}),e.push({value:"Kirghiz",label:"Kirghiz"}),e.push({value:"Klingon",label:"Klingon"}),e.push({value:"Komi",label:"Komi"}),e.push({value:"Kongo",label:"Kongo"}),e.push({value:"Konkani",label:"Konkani"}),e.push({value:"Korean",label:"Korean"}),e.push({value:"Kosraean",label:"Kosraean"}),e.push({value:"Kpelle",label:"Kpelle"}),e.push({value:"Kru",label:"Kru"}),e.push({value:"Kumyk",label:"Kumyk"}),e.push({value:"Kurdish",label:"Kurdish"}),e.push({value:"Kurukh",label:"Kurukh"}),e.push({value:"Kutenai",label:"Kutenai"}),e.push({value:"Kwanyama",label:"Kwanyama"}),e.push({value:"Ladino",label:"Ladino"}),e.push({value:"Lahnda",label:"Lahnda"}),e.push({value:"Lamba",label:"Lamba"}),e.push({value:"Lao",label:"Lao"}),e.push({value:"Latin",label:"Latin"}),e.push({value:"Latvian",label:"Latvian"}),e.push({value:"Lezghian",label:"Lezghian"}),e.push({value:"Limburgish",label:"Limburgish"}),e.push({value:"Lingala",label:"Lingala"}),e.push({value:"Lithuanian",label:"Lithuanian"}),e.push({value:"Lojban",label:"Lojban"}),e.push({value:"Low German",label:"Low German"}),e.push({value:"Lower Sorbian",label:"Lower Sorbian"}),e.push({value:"Lozi",label:"Lozi"}),e.push({value:"Luba-Katanga",label:"Luba-Katanga"}),e.push({value:"Luba-Lulua",label:"Luba-Lulua"}),e.push({value:"Luiseno",label:"Luiseno"}),e.push({value:"Lule Sami",label:"Lule Sami"}),e.push({value:"Lunda",label:"Lunda"}),e.push({value:"Luo (Kenya And Tanzania)",label:"Luo (Kenya & Tanzania)"}),e.push({value:"Lushai",label:"Lushai"}),e.push({value:"Luxembourgish",label:"Luxembourgish"}),e.push({value:"Macedonian",label:"Macedonian"}),e.push({value:"Madurese",label:"Madurese"}),e.push({value:"Magahi",label:"Magahi"}),e.push({value:"Maithili",label:"Maithili"}),e.push({value:"Makasar",label:"Makasar"}),e.push({value:"Malagasy",label:"Malagasy"}),e.push({value:"Malay",label:"Malay"}),e.push({value:"Malayalam",label:"Malayalam"}),e.push({value:"Maltese",label:"Maltese"}),e.push({value:"Manchu",label:"Manchu"}),e.push({value:"Mandar",label:"Mandar"}),e.push({value:"Mandarin",label:"Mandarin"}),e.push({value:"Mandingo",label:"Mandingo"}),e.push({value:"Manipuri",label:"Manipuri"}),e.push({value:"Manobo Languages",label:"Manobo Languages"}),e.push({value:"Manx",label:"Manx"}),e.push({value:"Maori",label:"Maori"}),e.push({value:"Marathi",label:"Marathi"}),e.push({value:"Mari",label:"Mari"}),e.push({value:"Marshall",label:"Marshall"}),e.push({value:"Marwari",label:"Marwari"}),e.push({value:"Masai",label:"Masai"}),e.push({value:"Mayan Languages",label:"Mayan Languages"}),e.push({value:"Mende",label:"Mende"}),e.push({value:"Micmac",label:"Micmac"}),e.push({value:"Minangkabau",label:"Minangkabau"}),e.push({value:"Mirandese",label:"Mirandese"}),e.push({value:"Miscellaneous Languages",label:"Miscellaneous Languages"}),e.push({value:"Mohawk",label:"Mohawk"}),e.push({value:"Moksha",label:"Moksha"}),e.push({value:"Moldavian",label:"Moldavian"}),e.push({value:"Mon-Khmer (Other)",label:"Mon-Khmer"}),e.push({value:"Mongo",label:"Mongo"}),e.push({value:"Mongolian",label:"Mongolian"}),e.push({value:"Mossi",label:"Mossi"}),e.push({value:"Multiple Languages",label:"Multiple Languages"}),e.push({value:"Munda Languages",label:"Munda Languages"}),e.push({value:"N'Ko",label:"N'Ko"}),e.push({value:"Nahuatl",label:"Nahuatl"}),e.push({value:"Nauru",label:"Nauru"}),e.push({value:"Navajo",label:"Navajo"}),e.push({value:"Ndonga",label:"Ndonga"}),e.push({value:"Neapolitan",label:"Neapolitan"}),e.push({value:"Nepal Bhasa",label:"Nepal Bhasa"}),e.push({value:"Nepali",label:"Nepali"}),e.push({value:"Nias",label:"Nias"}),e.push({value:"Niger-Kordofanian (Other)",label:"Niger-Kordofanian"}),e.push({value:"Nilo-Saharan (Other)",label:"Nilo-Saharan"}),e.push({value:"Niuean",label:"Niuean"}),e.push({value:"Nogai",label:"Nogai"}),e.push({value:"Norse, Old",label:"Norse, Old"}),e.push({value:"North American Indian (Other)",label:"North American Indian"}),e.push({value:"North Ndebele",label:"North Ndebele"}),e.push({value:"Northern Frisian",label:"Northern Frisian"}),e.push({value:"Northern Sami",label:"Northern Sami"}),e.push({value:"Northern Sotho",label:"Northern Sotho"}),e.push({value:"Norwegian",label:"Norwegian"}),e.push({value:"Norwegian Nynorsk",label:"Norwegian Nynorsk"}),e.push({value:"Nubian Languages",label:"Nubian Languages"}),e.push({value:"Nyamwezi",label:"Nyamwezi"}),e.push({value:"Nyankole",label:"Nyankole"}),e.push({value:"Nyoro",label:"Nyoro"}),e.push({value:"Nzima",label:"Nzima"}),e.push({value:"Occitan (Post 1500)",label:"Occitan (Post 1500)"}),e.push({value:"Ojibwa",label:"Ojibwa"}),e.push({value:"Old Church Slavonic",label:"Old Church Slavonic"}),e.push({value:"Oriya",label:"Oriya"}),e.push({value:"Oromo",label:"Oromo"}),e.push({value:"Osage",label:"Osage"}),e.push({value:"Ossetic",label:"Ossetic"}),e.push({value:"Otomian Languages",label:"Otomian Languages"}),e.push({value:"Pahlavi",label:"Pahlavi"}),e.push({value:"Palauan",label:"Palauan"}),e.push({value:"Pali",label:"Pali"}),e.push({value:"Pampanga",label:"Pampanga"}),e.push({value:"Pangasinan",label:"Pangasinan"}),e.push({value:"Papiamento",label:"Papiamento"}),e.push({value:"Papuan (Other)",label:"Papuan"}),e.push({value:"Persian",label:"Persian"}),e.push({value:"Philippine (Other)",label:"Philippine"}),e.push({value:"Phoenician",label:"Phoenician"}),e.push({value:"Pohnpeian",label:"Pohnpeian"}),e.push({value:"Polish",label:"Polish"}),e.push({value:"Portuguese",label:"Portuguese"}),e.push({value:"Prakrit Languages",label:"Prakrit Languages"}),e.push({value:"Punjabi",label:"Punjabi"}),e.push({value:"Pushto",label:"Pushto"}),e.push({value:"Quechua",label:"Quechua"}),e.push({value:"Raeto-Romance",label:"Raeto-Romance"}),e.push({value:"Rajasthani",label:"Rajasthani"}),e.push({value:"Rapanui",label:"Rapanui"}),e.push({value:"Rarotongan",label:"Rarotongan"}),e.push({value:"Romance (Other)",label:"Romance"}),e.push({value:"Romanian",label:"Romanian"}),e.push({value:"Romany",label:"Romany"}),e.push({value:"Rundi",label:"Rundi"}),e.push({value:"Russian",label:"Russian"}),e.push({value:"Salishan Languages",label:"Salishan Languages"}),e.push({value:"Samaritan Aramaic",label:"Samaritan Aramaic"}),e.push({value:"Sami Languages",label:"Sami Languages"}),e.push({value:"Samoan",label:"Samoan"}),e.push({value:"Sandawe",label:"Sandawe"}),e.push({value:"Sango",label:"Sango"}),e.push({value:"Sanskrit",label:"Sanskrit"}),e.push({value:"Santali",label:"Santali"}),e.push({value:"Sardinian",label:"Sardinian"}),e.push({value:"Sasak",label:"Sasak"}),e.push({value:"Scots",label:"Scots"}),e.push({value:"Selkup",label:"Selkup"}),e.push({value:"Semitic (Other)",label:"Semitic"}),e.push({value:"Serbian",label:"Serbian"}),e.push({value:"Serer",label:"Serer"}),e.push({value:"Shan",label:"Shan"}),e.push({value:"Shona",label:"Shona"}),e.push({value:"Sichuan Yi",label:"Sichuan Yi"}),e.push({value:"Sicilian",label:"Sicilian"}),e.push({value:"Sidamo",label:"Sidamo"}),e.push({value:"Sign Languages",label:"Sign Languages"}),e.push({value:"Siksika",label:"Siksika"}),e.push({value:"Sindhi",label:"Sindhi"}),e.push({value:"Sinhalese",label:"Sinhalese"}),e.push({value:"Sino-Tibetan (Other)",label:"Sino-Tibetan"}),e.push({value:"Siouan Languages",label:"Siouan Languages"}),e.push({value:"Skolt Sami",label:"Skolt Sami"}),e.push({value:"Slave (Athapascan)",label:"Slave (Athapascan)"}),e.push({value:"Slavic (Other)",label:"Slavic"}),e.push({value:"Slovak",label:"Slovak"}),e.push({value:"Slovenian",label:"Slovenian"}),e.push({value:"Sogdian",label:"Sogdian"}),e.push({value:"Somali",label:"Somali"}),e.push({value:"Songhai",label:"Songhai"}),e.push({value:"Soninke",label:"Soninke"}),e.push({value:"Sorbian Languages",label:"Sorbian Languages"}),e.push({value:"Sotho, Southern",label:"Sotho, Southern"}),e.push({value:"South American Indian (Other)",label:"South American Indian"}),e.push({value:"South Ndebele",label:"South Ndebele"}),e.push({value:"Southern Altai",label:"Southern Altai"}),e.push({value:"Southern Sami",label:"Southern Sami"}),e.push({value:"Spanish; Castilian",label:"Spanish; Castilian"}),e.push({value:"Sranan Togo",label:"Sranan Togo"}),e.push({value:"Sukuma",label:"Sukuma"}),e.push({value:"Sumerian",label:"Sumerian"}),e.push({value:"Sundanese",label:"Sundanese"}),e.push({value:"Susu",label:"Susu"}),e.push({value:"Swahili",label:"Swahili"}),e.push({value:"Swati",label:"Swati"}),e.push({value:"Swedish",label:"Swedish"}),e.push({value:"Swiss German",label:"Swiss German"}),e.push({value:"Syriac",label:"Syriac"}),e.push({value:"Tagalog",label:"Tagalog"}),e.push({value:"Tahitian",label:"Tahitian"}),e.push({value:"Tai (Other)",label:"Tai"}),e.push({value:"Tajik",label:"Tajik"}),e.push({value:"Tamashek",label:"Tamashek"}),e.push({value:"Tamil",label:"Tamil"}),e.push({value:"Tatar",label:"Tatar"}),e.push({value:"Telugu",label:"Telugu"}),e.push({value:"Tereno",label:"Tereno"}),e.push({value:"Tetum",label:"Tetum"}),e.push({value:"Thai",label:"Thai"}),e.push({value:"Tibetan",label:"Tibetan"}),e.push({value:"Tigre",label:"Tigre"}),e.push({value:"Tigrinya",label:"Tigrinya"}),e.push({value:"Timne",label:"Timne"}),e.push({value:"Tiv",label:"Tiv"}),e.push({value:"Tlingit",label:"Tlingit"}),e.push({value:"Tok Pisin",label:"Tok Pisin"}),e.push({value:"Tokelau",label:"Tokelau"}),e.push({value:"Tonga (Nyasa)",label:"Tonga (Nyasa)"}),e.push({value:"Tonga (Tonga Islands)",label:"Tonga (Tonga Islands)"}),e.push({value:"Tsimshian",label:"Tsimshian"}),e.push({value:"Tsonga",label:"Tsonga"}),e.push({value:"Tswana",label:"Tswana"}),e.push({value:"Tumbuka",label:"Tumbuka"}),e.push({value:"Tupi Languages",label:"Tupi Languages"}),e.push({value:"Turkish",label:"Turkish"}),e.push({value:"Turkmen",label:"Turkmen"}),e.push({value:"Tuvalu",label:"Tuvalu"}),e.push({value:"Tuvinian",label:"Tuvinian"}),e.push({value:"Twi",label:"Twi"}),e.push({value:"Udmurt",label:"Udmurt"}),e.push({value:"Ugaritic",label:"Ugaritic"}),e.push({value:"Ukrainian",label:"Ukrainian"}),e.push({value:"Umbundu",label:"Umbundu"}),e.push({value:"Undetermined",label:"Undetermined"}),e.push({value:"Upper Sorbian",label:"Upper Sorbian"}),e.push({value:"Urdu",label:"Urdu"}),e.push({value:"Uyghur",label:"Uyghur"}),e.push({value:"Uzbek",label:"Uzbek"}),e.push({value:"Vai",label:"Vai"}),e.push({value:"Venda",label:"Venda"}),e.push({value:"Vietnamese",label:"Vietnamese"}),e.push({value:"Volapuk",label:"Volapuk"}),e.push({value:"Votic",label:"Votic"}),e.push({value:"Wakashan Languages",label:"Wakashan Languages"}),e.push({value:"Walamo",label:"Walamo"}),e.push({value:"Walloon",label:"Walloon"}),e.push({value:"Waray",label:"Waray"}),e.push({value:"Washo",label:"Washo"}),e.push({value:"Welsh",label:"Welsh"}),e.push({value:"Western Frisian",label:"Western Frisian"}),e.push({value:"Wolof",label:"Wolof"}),e.push({value:"Xhosa",label:"Xhosa"}),e.push({value:"Yakut",label:"Yakut"}),e.push({value:"Yao",label:"Yao"}),e.push({value:"Yapese",label:"Yapese"}),e.push({value:"Yiddish",label:"Yiddish"}),e.push({value:"Yoruba",label:"Yoruba"}),e.push({value:"Yupik Languages",label:"Yupik Languages"}),e.push({value:"Zande",label:"Zande"}),e.push({value:"Zapotec",label:"Zapotec"}),e.push({value:"Zazaki",label:"Zazaki"}),e.push({value:"Zenaga",label:"Zenaga"}),e.push({value:"Zhuang",label:"Zhuang"}),e.push({value:"Zulu",label:"Zulu"}),e.push({value:"Zuni",label:"Zuni"}),e},getRosterTerminationReasons:function(){var e=[];return e.push({value:"39",label:"Assigned member status ended; roster transferred per physician request"}),e.push({value:"59",label:"Enrolment ended; patient out of geographic area"}),e.push({value:"57",label:"Enrolment terminated by patient"}),e.push({value:"12",label:"Health Number error"}),e.push({value:"38",label:"Long Term Care enrolment ended; patient has left Long Term Care"}),e.push({value:"82",label:"Ministry has not received enrolment/ Consent form"}),e.push({value:"60",label:"No current eligibility"}),e.push({value:"73",label:"No current eligibility"}),e.push({value:"74",label:"No current eligibility"}),e.push({value:"37",label:"Original enrolment ended; patient now enrolled as Long Term Care"}),e.push({value:"36",label:"Original enrolment ended; patient now re-enroled"}),e.push({value:"24",label:"Patient added to roster in error"}),e.push({value:"14",label:"Patient identified as deceased on ministry database"}),e.push({value:"51",label:"Patient no longer meets selection criteria for your roster"}),e.push({value:"41",label:"Patient no longer meets selection criteria for your roster - assigned to another physician"}),e.push({value:"61",label:"Patient out of geographic area; address over-ride applied"}),e.push({value:"62",label:"Patient out of geographic area; address over-ride removed"}),e.push({value:"35",label:"Patient transferred from roster per physician request"}),e.push({value:"42",label:"Physician ended enrolment; patient entered Long Term Care facility"}),e.push({value:"54",label:"Physician ended enrolment; patient left province"}),e.push({value:"53",label:"Physician ended enrolment; patient moved out of geographic area"}),e.push({value:"56",label:"Physician ended enrolment; per patient request"}),e.push({value:"44",label:"Physician ended patient enrolment"}),e.push({value:"40",label:"Physician reported member as deceased"}),e.push({value:"32",label:"Pre-member/ Assigned member ended; now enrolled or registered with photo health card"}),e.push({value:"30",label:"Pre-member/ Assigned member ended; now enrolled or registered with red and white health card"}),e.push({value:"33",label:"Termination reason cannot be released (due to patient confidentiality)"}),e.push({value:"84",label:"Termination reason cannot be released (due to patient confidentiality)"}),e.push({value:"90",label:"Termination reason cannot be released (due to patient confidentiality)"}),e.push({value:"91",label:"Termination reason cannot be released (due to patient confidentiality)"}),e},getSecurityQuestions:function(){var e=[];return e.push({value:"What was the name of your high school?",label:"What was the name of your high school?"}),e.push({value:"What is your spouse's maiden name?",label:"What is your spouse's maiden name?"}),e.push({value:"What is the name of the street you grew up on?",label:"What is the name of the street you grew up on?"}),e.push({value:"In what city were you born?",label:"In what city were you born?"}),e.push({value:"What is the middle name of your oldest child?",label:"What is the middle name of your oldest child?"}),e.push({value:"What is your oldest cousin's first name?",label:"What is your oldest cousin's first name?"}),e.push({value:"What is your mother's middle name?",label:"What is your mother's middle name?"}),e.push({value:"What is your grandmother's first name?",label:"What is your grandmother's first name?"}),e.push({value:"What year did you graduate from high school?",label:"What year did you graduate from high school?"}),e},getConsultUrgencies:function(){var e=[];return e.push({value:"2",name:"Non-Urgent"}),e.push({value:"1",name:"Urgent"}),e.push({value:"3",name:"Return"}),e},getConsultRequestStatuses:function(){var e=[];return e.push({value:"1",name:"Not Complete"}),e.push({value:"2",name:"Preliminary Pending Specialist"}),e.push({value:"3",name:"Pending Callback"}),e.push({value:"4",name:"Completed"}),e.push({value:"5",name:"Cancelled"}),e.push({value:"6",name:"Appointment Booked"}),e.push({value:"7",name:"Deleted"}),e},getConsultResponseStatuses:function(){var e=[];return e.push({value:1,name:"Not Complete"}),e.push({value:2,name:"Pending Referring Doctor Callback"}),e.push({value:3,name:"Pending Patient Callback"}),e.push({value:4,name:"Completed"}),e.push({value:5,name:"Cancelled"}),e},getHours:function(){return["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]},getMinutes:function(){return["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"]},getRxInteractionLevels:function(){var e=[];return e.push({value:0,name:"Not Specified"}),e.push({value:1,name:"Low"}),e.push({value:2,name:"Medium"}),e.push({value:3,name:"High"}),e.push({value:4,name:"None"}),e}};return e}])},function(e,t,n){"use strict";angular.module("Common.Services").service("summaryService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/recordUX",getSummaryHeaders:function(o,a){var r=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/summary/"+a).then(function(e){r.resolve(e.data)},function(e){console.log("summaryService::getSummaryHeaders error",e),r.reject("An error occurred while fetching summary headers")}),r.promise},getFullSummary:function(o,a){var r=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/fullSummary/"+a).then(function(e){r.resolve(e.data)},function(e){console.log("summaryService::getFullSummary error",e),r.reject("An error occurred while fetching full summary")}),r.promise},getFamilyHistory:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getFamilyHistory").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getFamilyHistory error",e),a.reject("An error occurred while fetching family history")}),a.promise},getMedicalHistory:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getMedicalHistory").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getMedicalHistory error",e),a.reject("An error occurred while fetching medical history")}),a.promise},getSocialHistory:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getSocialHistory").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getSocialHistory error",e),a.reject("An error occurred while fetching social history")}),a.promise},getOngoingConcerns:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getOngoingConcerns").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getOngoingConcerns error",e),a.reject("An error occurred while fetching ongoing concerns")}),a.promise},getOtherMeds:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getOtherMeds").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getOtherMeds error",e),a.reject("An error occurred while fetching other meds")}),a.promise},getReminders:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getReminders").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getReminders error",e),a.reject("An error occurred while fetching reminders")}),a.promise},getRiskFactors:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getRiskFactors").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getRiskFactors error",e),a.reject("An error occurred while fetching risk factors")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("systemPreferenceService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/systemPreference",getPreference:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={default:a},t.get(n.apiPath+"/"+o,i).then(function(e){r.resolve(e.data)},function(e){console.log("systemPreferenceService::getPreference error",e),r.reject("An error occurred while getting system preference data")}),r.promise},setPreference:function(o,a){var r=e.defer();return t.put(n.apiPath+"/"+o,a).then(function(e){r.resolve(e.data)},function(e){console.log("systemPreferenceService::setPreference error",e),r.reject("An error occurred while setting system preference data")}),r.promise},isPreferenceEnabled:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={default:a},t.get(n.apiPath+"/"+o+"/enabled",i).then(function(e){r.resolve(e.data)},function(e){console.log("systemPreferenceService::isPreferenceEnabled error",e),r.reject("An error occurred while getting system preference enabled status")}),r.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("ticklerService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/tickler",setCompleted:function(o){var a=t.defer();return e({url:n.apiPath+"/complete",method:"POST",data:JSON.stringify({ticklers:o}),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("ticklerService::setCompleted error",e),a.reject("An error occurred while setting ticklers to completed status")}),a.promise},setDeleted:function(o){var a=t.defer();return e({url:n.apiPath+"/delete",method:"POST",data:JSON.stringify({ticklers:o}),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("ticklerService::setDeleted error",e),a.reject("An error occurred while setting ticklers to deleted status")}),a.promise},search:function(o,a,r){var i=t.defer();return e({url:n.apiPath+"/search?startIndex="+encodeURIComponent(a)+"&limit="+encodeURIComponent(r),method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){i.resolve(e.data)},function(e){console.log("ticklerService::search error",e),i.reject("An error occurred while searching ticklers")}),i.promise},update:function(o){var a=t.defer();return e({url:n.apiPath+"/update",method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("ticklerService::update error",e),a.reject("An error occurred while updating tickler")}),a.promise},getTextSuggestions:function(){var o=t.defer();return e({url:n.apiPath+"/textSuggestions",method:"GET"}).then(function(e){o.resolve(e.data)},function(e){console.log("ticklerService::getTextSuggestions error",e),o.reject("An error occurred while getting tickler text suggestions")}),o.promise},add:function(o){var a=t.defer();return e({url:n.apiPath+"/add",method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("ticklerService::add error",e),a.reject("An error occurred while saving tickler")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("reportByTemplateService",["$http","$q","junoHttp",function(e,t,n){var o={apiPath:"../ws/rs",isK2AInit:function(){var n=t.defer();return e({url:o.apiPath+"/reportByTemplate/K2AActive",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){n.resolve(e.data)},function(e){console.log("reportByTemplateService::isK2AInit error",e),n.reject("An error occurred while fetching k2a content")}),n.promise},getAllK2AReports:function(){var e=t.defer(),a=Juno.Common.ServiceHelper.configHeaders();return n.get(o.apiPath+"/reportByTemplate/allReports",a).then(function(t){e.resolve(t.data)},function(t){console.log("reportByTemplateService::getAllK2AReports error",t),e.reject("An error occurred while fetching k2a reports")}),e.promise},getK2AReportById:function(n){var a=t.defer();return e({url:o.apiPath+"/reportByTemplate/getReportById/"+encodeURIComponent(n),method:"POST",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("reportByTemplateService::getK2AReportById error",e),a.reject("An error occurred while fetching k2a report")}),a.promise},getK2AUrl:function(){var e=t.defer(),a=Juno.Common.ServiceHelper.configHeaders();return n.get(o.apiPath+"/reportByTemplate/K2AUrl/",a).then(function(t){e.resolve(t.data)},function(t){console.log("reportByTemplateService::getK2AUrl error",t),e.reject("An error occurred while fetching k2a url")}),e.promise}};return o}])},function(e,t,n){"use strict";angular.module("Common.Services").service("uxService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/recordUX",menu:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/recordMenu").then(function(e){a.resolve(e.data)},function(e){console.log("uxService::menu error",e),a.reject("An error occurred while fetching menu")}),a.promise},searchTemplates:function(o,a,r){var i=t.defer();return e.post(n.apiPath+"/searchTemplates?startIndex="+encodeURIComponent(a)+"&itemsToReturn="+encodeURIComponent(r),o).then(function(e){i.resolve(e.data)},function(e){console.log("uxService::searchTemplates error",e),i.reject("An error occurred while searching templates")}),i.promise},getTemplate:function(o){var a=t.defer();return e.post(n.apiPath+"/template",o).then(function(e){a.resolve(e.data)},function(e){console.log("uxService::getTemplate error",e),a.reject("An error occurred while fetching template")}),a.promise},getDisplayProperties:function(){var o=t.defer();return e.get(n.apiPath+"/properties").then(function(e){o.resolve(e.data)},function(e){console.log("uxService:getDisplayProperties error",e),o.reject("An error occurred while fetching display properties.")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("specialistsService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/specialists/",searchSpecialists:function(o,a,r,i){var l=e.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={searchName:o,searchRefNo:a,page:r,perPage:i},console.log("params",s.params),t.get(n.apiPath,s).then(function(e){l.resolve(e.data)},function(e){console.log("SpecialistsService::searchSpecialists error",e),l.reject("An error occurred while searching Specialists")}),l.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("referralDoctorsService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/referralDoctors/",searchReferralDoctors:function(o,a,r,i){var l=e.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={searchName:o,searchRefNo:a,page:r,perPage:i},t.get(n.apiPath,s).then(function(e){l.resolve(e.data)},function(e){console.log("ReferralDoctorsService::searchReferralDoctors error",e),l.reject("An error occurred while searching ReferralDoctors")}),l.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Filters",[])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("age",[function(){return function(e){return null!==e&&null!==e.years?e.years<1&&e.months<1?e.days+"d":e.years<2?e.months+"m":e.years+" y":""}}])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("cut",[function(){return function(e,t,n,o){if(!e)return"";if(!(n=parseInt(n,10)))return e;if(e.length<=n)return e;if(e=e.substr(0,n),t){var a=e.lastIndexOf(" ");-1!==a&&(e=e.substr(0,a))}return e+(o||" …")}}])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("offset",[function(){return function(e,t){return null===e?0:(t=parseInt(t,10),e.slice(t))}}])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("startFrom",[function(){return function(e,t){return t=+t,e}}])},function(e,t,n){"use strict";angular.module("Common.Directives",["Common.Services"])},function(e,t,n){"use strict";angular.module("Common.Directives").service("typeaheadHelper",["$timeout",function(e){var t={defaultTypeaheadScope:function(){var e={model:"=junoModel",placeholder:"@junoPlaceholder",onSearchFn:"&junoOnSearchFn",onAddFn:"&junoOnAddFn",searchButtonTitle:"@junoSearchButtonTitle",addButtonTitle:"@junoAddButtonTitle"};return e},initTypeahead:function(t){t.findMatches=function(e){console.log("findMatches function must be defined by the typeahead implementation")},t.formatMatchSelection=function(e){console.log("formatMatch function must be defined by the typeahead implementation")},t.optionsTemplateUrl=null,t.forceSelection=!1,t.searchField=null,t.typeaheadModelOptions={debounce:{default:250,blur:250}},angular.isDefined(t.model)||(t.model=null),t.autocompleteMinLength=1,t.hasButtons=function(){return t.hasSearchButton()||t.hasAddButton()},t.hasSearchButton=function(){return angular.isFunction(t.onSearchFn())},t.hasAddButton=function(){return angular.isFunction(t.onAddFn())},t.hasTemplateUrl=function(){return Juno.Common.Util.exists(t.optionsTemplateUrl)},t.hasForceSelectionEnabled=function(){return Juno.Common.Util.exists(t.forceSelection)&&t.forceSelection},t.formatMatch=function(e){return console.log("- Formatting Match -------------"),console.log(e),console.log("--------------------------------"),Juno.Common.Util.exists(e)?t.isDummySelection(e)?e.searchQuery:t.formatMatchSelection(e):null},t.onSelect=function(e,n,o,a){t.model=e},t.onBlur=function(){t.hasForceSelectionEnabled()&&angular.isString(t.searchField)&&(console.log("typeaheadHelper::onBlur - setting model to null (forceSelectionEnabled)"),t.model=null)},t.onChange=function(){t.hasForceSelectionEnabled()||t.onSelect(t.createDummySelection())},t.onSearch=function(){e(function(){angular.isFunction(t.onSearchFn())&&t.onSearchFn()(t.model)})},t.onAdd=function(){e(function(){angular.isFunction(t.onAddFn())&&t.onAddFn()(t.model)})},t.createDummySelection=function(){return{isTypeaheadSearchQuery:!0,searchQuery:t.searchField}},t.isDummySelection=function(e){return Juno.Common.Util.exists(e)&&e.isTypeaheadSearchQuery},t.$watch("model",function(){t.searchField=t.model})}};return t}])},function(e,t,n){"use strict";angular.module("Common.Directives").directive("junoPatientSearchTypeahead",["$q","typeaheadHelper","demographicsService",function(e,t,n){return{restrict:"E",scope:t.defaultTypeaheadScope(),templateUrl:"src/common/directives/typeahead.jsp",replace:!0,link:function(o,a,r,i){t.initTypeahead(o),o.optionsTemplateUrl="src/common/directives/patientSearchTypeaheadOption.jsp",o.findMatches=function(t){var o=e.defer();return n.quickSearch(t).then(function(e){var n=e.data,a=e.meta;a.total>10&&n.push({moreResults:!0,total:a.total,searchQuery:t}),o.resolve(n)},function(){o.reject()}),o.promise},o.formatMatchSelection=function(e){return e.moreResults?null:Juno.Common.Util.formatName(e.firstName,e.lastName)}}}}])},function(e,t,n){"use strict";angular.module("Common.Directives").directive("junoPatientTypeahead",["$q","typeaheadHelper","demographicsService",function(e,t,n){return{restrict:"E",scope:t.defaultTypeaheadScope(),templateUrl:"src/common/directives/typeahead.jsp",replace:!0,link:function(o,a,r,i){t.initTypeahead(o),o.forceSelection=!0,o.findMatches=function(t){var o=e.defer(),a={type:n.SEARCH_MODE.Name,term:t,status:n.STATUS_MODE.ACTIVE,integrator:!1,outofdomain:!0};return n.search(a,0,25).then(function(e){o.resolve(e.data)},function(){o.reject()}),o.promise},o.formatMatchSelection=function(e){return e.lastName+", "+e.firstName},o.typeaheadLabel=function(e){return o.formatMatchSelection(e)}}}}])},function(e,t,n){"use strict";angular.module("Common.Directives").directive("junoDatepickerPopup",[function(){var e={model:"=junoModel",placeholder:"@",showIcon:"=",disableInput:"="};return{restrict:"E",scope:e,templateUrl:function(e,t){return"src/common/directives/datepickerPopup"+t.type+".jsp"},replace:!0,link:function(e,t,n,o){e.format="yyyy-MM-dd",e.dateOptions={showWeeks:!1},e.opened=!1,e.openDatepicker=function(){e.opened=!0}}}}])},function(e,t,n){(function(e){n(13),angular.module("Common.Directives").directive("resizable",[function(){return{restrict:"A",scope:{callback:"&onResize"},link:function(t,n,o){n.resizable({handles:"n, nw, ne",minHeight:250,minWidth:510,maxWidth:window.innerWidth,maxHeight:window.innerHeight/1.5}),n.on("resizestop",function(e,n){t.callback&&t.callback()}),n.on("resize",function(){e(".note-editor-textarea").css("height",n.height()-145-e(".note-editor-issues").height())}),t.$on("noteIssueAdded",function(){var t=e("#note-editor").height()+33;e("#note-editor").height(t)}),t.$on("noteIssueRemoved",function(){var t=e("#note-editor").height()-33;e("#note-editor").height(t)})}}}])}).call(this,n(3))},function(e,t){angular.module("Common.Directives").directive("draggable",[function(){return{restrict:"A",link:function(e,t,n){t.draggable({axis:"x",containment:"#main-body"})}}}])},function(e,t,n){(function(e,t){angular.module("ui.calendar",[]).constant("uiCalendarConfig",{calendars:{}}).controller("uiCalendarCtrl",["$scope","$locale",function(t,n){var o=t.eventSources,a=t.calendarWatchEvent?t.calendarWatchEvent:angular.noop,r=1;this.eventFingerprint=function(t){t._id||(t._id=r++);var n=a({event:t})||"",o=e.isMoment(t.start)?t.start.unix():t.start?e(t.start).unix():"",i=e.isMoment(t.end)?t.end.unix():t.end?e(t.end).unix():"";return""+t._id+(t.id||"")+(t.title||"")+(t.url||"")+o+i+(t.allDay||"")+(t.className||"")+n};var i=1,l=1;this.sourceFingerprint=function(e){var t=""+(e.__id||(e.__id=i++)),n=angular.isObject(e)&&e.events;return n&&(t=t+"-"+(n.__id||(n.__id=l++))),t},this.allEvents=function(){for(var e=[],t=0,n=o.length;t<n;t++){var a=o[t];if(angular.isArray(a))e.push(a);else if(angular.isObject(a)&&angular.isArray(a.events)){var r={};for(var i in a)"_id"!==i&&"events"!==i&&(r[i]=a[i]);for(var l=0;l<a.events.length;l++)angular.extend(a.events[l],r);e.push(a.events)}}return Array.prototype.concat.apply([],e)},this.changeWatcher=function(e,t){var n,o=function(){for(var n,o,a=angular.isFunction(e)?e():e,i=[],l=0,s=a.length;l<s;l++)o=a[l],n=t(o),r[n]=o,i.push(n);return i},a=function(e,t){var n,o,a=[],r={};for(n=0,o=t.length;n<o;n++)r[t[n]]=!0;for(n=0,o=e.length;n<o;n++)r[e[n]]||a.push(e[n]);return a},r={};return n={subscribe:function(e,i){e.$watch(o,function(e,o){!(i&&!1===i(e,o))&&function(e,o){var i,l,s,u,c={},d=a(o,e);for(i=0,l=d.length;i<l;i++){var p=d[i];s=r[p],delete r[p];var m=t(s);m===p?n.onRemoved(s):(c[m]=p,n.onChanged(s))}var h=a(e,o);for(i=0,l=h.length;i<l;i++)u=h[i],s=r[u],c[u]||n.onAdded(s)}(e,o)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}},this.getFullCalendarConfig=function(e,n){var o={};return angular.extend(o,n),angular.extend(o,e),angular.forEach(o,function(e,n){var a;"function"==typeof e&&(o[n]=(a=o[n],function(){if(t.$root.$$phase)return a.apply(this,arguments);var e=arguments,n=this;return t.$root.$apply(function(){return a.apply(n,e)})}))}),o},this.getLocaleConfig=function(e){if(!e.lang||e.useNgLocale){var t=function(e){var t,n;for(n in t=[],e)t[n]=e[n];return t},o=n.DATETIME_FORMATS;return{monthNames:t(o.MONTH),monthNamesShort:t(o.SHORTMONTH),dayNames:t(o.DAY),dayNamesShort:t(o.SHORTDAY)}}return{}}}]).directive("uiCalendar",["uiCalendarConfig",function(e){return{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&",enabled:"=ngEnabled"},controller:"uiCalendarCtrl",link:function(n,o,a,r){var i,l=n.eventSources,s=!1,u=r.changeWatcher(l,r.sourceFingerprint),c=r.changeWatcher(r.allEvents,r.eventFingerprint),d=null;n.destroyCalendar=function(){i&&i.fullCalendar&&i.fullCalendar("destroy"),i=a.calendar?e.calendars[a.calendar]=t(o).html(""):t(o).html("")},n.initCalendar=function(){n.enabled&&(i||(i=angular.element(o).html("")),i.fullCalendar(d),a.calendar&&(e.calendars[a.calendar]=i))},n.$on("$destroy",function(){n.destroyCalendar()}),u.onAdded=function(t){i&&i.fullCalendar&&(i.fullCalendar(d),a.calendar&&(e.calendars[a.calendar]=i),i.fullCalendar("addEventSource",t),s=!0)},u.onRemoved=function(e){i&&i.fullCalendar&&(i.fullCalendar("removeEventSource",e),s=!0)},u.onChanged=function(){i&&i.fullCalendar&&(i.fullCalendar("refetchEvents"),s=!0)},c.onAdded=function(e){i&&i.fullCalendar&&i.fullCalendar("renderEvent",e,!!e.stick)},c.onRemoved=function(e){i&&i.fullCalendar&&i.fullCalendar("removeEvents",e._id)},c.onChanged=function(e){if(i&&i.fullCalendar)for(var t=i.fullCalendar("clientEvents",e._id),n=0;n<t.length;n++){var o=t[n];o=angular.extend(o,e),i.fullCalendar("updateEvent",o)}},u.subscribe(n),c.subscribe(n,function(){if(!0===s)return s=!1,!1}),n.$watch(function(){var t,o=a.uiCalendar?n.$parent.$eval(a.uiCalendar):{};t=r.getFullCalendarConfig(o,e);var i=r.getLocaleConfig(t);angular.extend(i,t),d={eventSources:l},angular.extend(d,i),d.calendars=null;var s={};for(var u in d)"eventSources"!==u&&(s[u]=d[u]);return JSON.stringify(s)},function(e,t){e!==t?(n.destroyCalendar(),n.initCalendar()):e&&angular.isUndefined(i)&&n.initCalendar()})}}}])}).call(this,n(5),n(3))},function(e,t,n){"use strict";(function(e){angular.module("Common.Directives").directive("selectOptionTooltip",["$parse",function(t){console.log("CUSTOM SELECT TOOLTIP LOADED");return{priority:1e3,require:"ngModel",replace:!0,link:function(n,o,a,r){n.addCustomAttr=function(t,o,a,r){e("option",o).each(function(o,i){var l={};l[t]=a[o],e(i).attr("title",r(n,l))})};var i=a.selectOptionTooltip.match(/(.+)\s+for\s+(.+)\s+in\s+(.+)/),l=i[3],s=t(i[1]);n.$watchCollection(l,function(e){e&&n.addCustomAttr(i[2],o,e,s)})}}}])}).call(this,n(3))},function(e,t,n){(function(e){angular.module("Common").directive("caFieldAlphadate",["fieldHelperService",function(t){var n=angular.copy(t.default_scope);n.placeholder="@caPlaceholder";return{restrict:"EAC",scope:n,templateUrl:function(e,n){return t.resolve_template(n,"src/common/directives/clinicaid/ca_field_alphadate")},replace:!0,link:function(n,o,a,r){n.input_placeholder=n.placeholder,angular.isDefined(n.input_placeholder)||(n.input_placeholder="yyyy-mm-dd"),n.on_blur=function(){var t=e(n.model,["YYYY-MM-DD","YYYYMMDD"],!0);t.isValid()?n.model=t.format("YYYY-MM-DD"):n.model=null},t.default_link_function(n,o,a,r)},controller:t.default_controller}}])}).call(this,n(5))},function(e,t){angular.module("Common").directive("caFieldAlpha",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_alpha")},replace:!0,link:e.default_link_function,controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldAutocomplete",["$q","globalStateService","$timeout","fieldHelperService","autoCompleteService","resultsService","focusService",function(e,t,n,o,a,r,i){var l=["yes_no_boolean","gender","schedule","schedule_type","schedule_template","schedule_event_status","user_roles","user_type","province","country","custom_tax","alberta_location_code","alberta_default_time_role_modifier","service_modifier","ontario_office_code","ontario_service_location_indicator","bc_service_location_code","bc_referral_code","sask_clinic","sask_oop_province","sask_mode","sask_location_of_service","sask_location_of_service_short","sask_corporation_indicator","sask_submission_type","sask_submission_file","provider"],s=angular.copy(o.default_scope);s.placeholder="@caPlaceholder",s.input_group_class="@caInputGroupClass",s.autocomplete_type="@caAutocompleteType",s.params="=caParams",s.params_fn="&caParamsFn",s.on_select_fn="&caOnSelect",s.on_select_data="=caOnSelectData",s.on_clear_fn="&caClear",s.on_clear_data="=caClearData",s.on_create_fn="&caCreate",s.create_if="=caCreateIf",s.on_modify_fn="&caModify",s.modify_if="=caModifyIf",s.create_on_not_found="=?caCreateOnNotFound",s.editable="=?caEditable",s.ca_exclude_list="=caExcludeList";return{restrict:"E",scope:s,templateUrl:function(e,t){return o.resolve_template(t,"code/common/directives/ca_field_autocomplete")},replace:!0,link:function(t,n,r,s){t.autocomplete=a,t.search_field=null,angular.isDefined(t.model)||(t.model=null),Juno.Common.Util.exists(t.create_on_not_found)||(t.create_on_not_found=!1),Juno.Common.Util.exists(t.editable)||(t.editable=!1),-1!=Object.keys(t.autocomplete.dao_map).indexOf(t.autocomplete_type)||-1!=Object.keys(Clinicaid.Model.GenericRef.REF_DEFINITIONS).indexOf(t.autocomplete_type)?(t.autocomplete_min_length=-1!=l.indexOf(t.autocomplete_type)?0:1,t.input_placeholder=t.placeholder,angular.isDefined(t.input_placeholder)||(t.input_placeholder="Search..."),t.clear_autocomplete_search=function(){t.search_field=null},t.clear_autocomplete_model=function(e){t.model=null,angular.isFunction(t.on_clear_fn())&&t.on_clear_fn()(t.on_clear_data),e&&i.element(n.find("input"))},t.on_select=function(e,n,o,a){t.model=e,t.change_fn(),angular.isFunction(t.on_select_fn())&&t.on_select_fn()(e,n,o,a,t.on_select_data)},t.create_on_not_found_fn=function(e){Juno.Common.Util.exists(e)&&t.autocomplete.create_on_not_found(e,t.autocomplete_type,!0).then(function(e){t.on_select(e.data,e.data,null,null,t.on_select_data),angular.isFunction(t.change_fn)&&t.change_fn()},function(e){console.log("error:",e)})},t.on_change=function(){if(t.editable){var e=t.autocomplete.build_model_object(t.autocomplete_type,t.search_field);t.on_select(e,e,null,null,t.on_select_data),t.create_on_not_found&&t.create_on_not_found_fn(e)}else t.clear_autocomplete_model()},t.on_blur=function(){null==t.model&&(t.clear_autocomplete_model(),t.clear_autocomplete_search(),Juno.Common.Util.exists(t.model_on_focus)&&angular.isFunction(t.change_fn)&&t.change_fn()),angular.isFunction(t.blur_fn)&&t.blur_fn()},t.on_focus=function(){t.model_on_focus=angular.copy(t.model),angular.isFunction(t.focus_fn)&&t.focus_fn()},t.on_create=null,angular.isFunction(t.on_create_fn())&&(t.on_create=function(){t.on_create_fn()()}),t.on_modify=null,angular.isFunction(t.on_modify_fn())&&(t.on_modify=function(){t.on_modify_fn()()}),t.show_modify_if=void 0===t.modify_if||t.modify_if,t.autocomplete_items=function(n){var o=e.defer(),r=t.params?t.params:{};if(angular.isFunction(t.params_fn)){var i=t.params_fn();angular.isFunction(i)&&(i=i()),angular.extend(r,i)}return a.get_items(t.autocomplete_type,n,r).then(function(e){var n=e.data;Juno.Common.Util.exists(t.ca_exclude_list)&&(n=t.prune_items(n)),o.resolve(n)},function(e){o.reject(e)}),o.promise},t.prune_items=function(e){for(var n=[],o=0;o<e.length;o++){for(var a=!1,r=0;r<t.ca_exclude_list.length;r++){var i=t.ca_exclude_list[r];"string"==typeof i?e[o].data[e[o].value_field]==i&&(a=!0):e[o].data[e[o].value_field]==i.data[t.ca_exclude_list[r].value_field]&&(a=!0)}a||n.push(e[o])}return n},t.autocomplete_input_formatter=function(e){return null!=e?e.autocomplete_input_formatted:null},t.show_create=function(){return t.on_create&&!t.model&&(void 0===t.create_if||t.create_if)},t.show_modify=function(){return t.on_modify&&t.model&&!t.model.dummy_record&&(void 0===t.modify_if||t.modify_if)},t.show_buttons=function(){return!t.disabled&&(t.model||t.show_create())},t.$watch("model",function(e,n){t.search_field=t.model}),o.default_link_function(t,n,r,s)):console.log("invalid autocomplete type:",t.autocomplete_type,"valid values: (",Object.keys(t.autocomplete.dao_map),Object.keys(Clinicaid.Model.GenericRef.REF_DEFINITIONS))},controller:o.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldBoolean",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_boolean")},replace:!0,link:function(t,n,o,a){Juno.Common.Util.exists(t.model)||(t.model=!1),e.default_link_function(t,n,o,a)},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldButtonGroup",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);return t.field_settings="=caFieldSettings",t.field_default="=caFieldDefault",{restrict:"EAC",scope:t,templateUrl:"src/common/directives/clinicaid/ca_field_button_group.jsp",replace:!0,link:function(t,n,o,a){e.default_link_function(t,n,o,a),t.selected_values=[t.field_default],t.is_selected=function(e){return-1!=t.selected_values.indexOf(e)},t.toggle_selected=function(e){var n=t.selected_values.indexOf(e);-1==n?t.selected_values.push(e):t.selected_values.splice(n,1),t.model=t.selected_values.join(",")}},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldColor",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:"src/common/directives/clinicaid/ca_field_color.jsp",replace:!0,link:e.default_link_function,controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldCurrencyFilter",["$filter",function(e){return{require:"ngModel",restrict:"EAC",link:function(t,n,o,a){a.$parsers.push(function(e){null==e&&(e="0");var t=e.replace(/[$,]/g,"");""==t.trim()&&(t="0");var n=parseFloat(t).toFixed(4);return isNaN(n)&&(n=null),n}),a.$formatters.unshift(function(t){return null==t?null:e("myCurrencyFilter")(t)})}}}])},function(e,t){angular.module("Common").directive("caFieldCurrency",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:"src/common/directives/clinicaid/ca_field_currency.jsp",replace:!0,link:e.default_link_function,controller:e.default_controller}}])},function(e,t,n){(function(e){angular.module("Common").directive("caFieldDate3",["$timeout","fieldHelperService",function(t,n){var o=angular.copy(n.default_scope);delete o.focus_fn,o.on_focus_fn_year="&caFocusYear",o.on_focus_fn_month="&caFocusMonth",o.on_focus_fn_day="&caFocusDay";var a=function(e,t,n){if(n.field_year="",n.field_month="",n.field_day="",e){var o=e.split("-");angular.isDefined(o[0])&&(n.field_year=o[0]),angular.isDefined(o[1])&&(n.field_month=o[1]),angular.isDefined(o[2])&&(n.field_day=o[2])}},r=function(e,t,n){n.field_year||n.field_month||n.field_day?n.model=n.field_year+"-"+n.field_month+"-"+n.field_day:n.model=null};return{restrict:"E",scope:o,templateUrl:function(e,t){return n.resolve_template(t,"src/common/directives/clinicaid/ca_field_date3")},replace:!0,link:function(o,i,l,s){n.merge_title_messages(o),o.field_year="",o.field_month="",o.field_day="",o.focus_fn_year=function(){angular.isFunction(o.on_focus_fn_year)&&t(function(){e(i).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?o.on_focus_fn_year():console.log("ignoring on focus function - element is no longer in focus",o.name)})},o.focus_fn_month=function(){angular.isFunction(o.on_focus_fn_month)&&t(function(){e(i).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?o.on_focus_fn_month():console.log("ignoring on focus function - element is no longer in focus",o.name)})},o.focus_fn_day=function(){angular.isFunction(o.on_focus_fn_day)&&t(function(){e(i).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?o.on_focus_fn_day():console.log("ignoring on focus function - element is no longer in focus",o.name)})},o.$watch("focus_field",function(t,n,o){o.focus_field==o.name+"[year]"?e(i).find(".ca-field-date3 input").get(0).focus().select():o.focus_field==o.name+"[month]"?e(i).find(".ca-field-date3 input").get(1).focus().select():o.focus_field==o.name+"[day]"&&e(i).find(".ca-field-date3 input").get(2).focus().select()}),o.$on("focusCaFocusField",function(t,n){Juno.Common.Util.exists(o.name)&&o.name==n&&e(i).find(".ca-field-date3 input").get(0).focus().select()}),o.$watch("model",a),o.$watch("field_year",r),o.$watch("field_month",r),o.$watch("field_day",r)},controller:n.default_controller}}])}).call(this,n(3))},function(e,t,n){(function(e){angular.module("Common").directive("caFieldDate",["$compile","$timeout","fieldHelperService",function(t,n,o){var a=angular.copy(o.default_scope);a.date_picker_id="@caDatePickerId",a.orientation="@caOrientation",a.use_multi_date="@caUseMultiDate",a.container_id="@caContainerId";return{restrict:"EA",scope:a,replace:!0,templateUrl:function(e,t){return"bare"==t.caTemplate?"src/common/directives/clinicaid/ca_field_date_bare.jsp":"src/common/directives/clinicaid/ca_field_date.jsp"},link:function(a,r,i,l){a.initialization_complete=!1,a.delayed_change_fn=function(){!0===a.initialization_complete&&a.change_fn()},o.merge_title_messages(a),a.datepicker=null,a.is_multi_date=!1,a.CTRL_KEY=17,a.LEFT_SHIFT_KEY=16,a.ctrl_key_down=!1,a.shift_key_down=!1,a.is_visible=!1,a.container=e("body"),a.container_id||(a.container=e("#"+a.container_id));a.create_datepicker=function(){null==a.container_id?a.datepicker.datepicker({multidate:a.is_multi_date,autoclose:!a.is_multi_date,todayHighlight:!0,todayBtn:"linked",clearBtn:!0,toggleActive:a.is_multi_date,orientation:a.orientation,format:"yyyy-mm-dd",showOnFocus:!1,keyboardNavigation:!1}):a.datepicker.datepicker({multidate:a.is_multi_date,autoclose:!a.is_multi_date,todayHighlight:!0,todayBtn:"linked",clearBtn:!0,toggleActive:a.is_multi_date,orientation:a.orientation,format:"yyyy-mm-dd",container:"#"+a.container_id,showOnFocus:!1,keyboardNavigation:!1}),a.datepicker.datepicker().on("show",function(){a.is_visible=!0}),a.datepicker.datepicker().on("hide",function(){a.is_visible=!1})},a.toggle_multi=function(e,t){"true"==a.use_multi_date&&(a.is_multi_date=e||!a.is_multi_date,a.datepicker.datepicker("remove"),a.create_datepicker(),a.datepicker.datepicker("show"),t&&t.length>0&&r.find("input").val(t))},a.key_up=function(e){if("true"==a.use_multi_date){if(!a.is_multi_date){var t=r.find("input").val();-1!=t.search(",")&&a.toggle_multi(!0,t)}e.keyCode==a.CTRL_KEY?(a.close_date_picker(e),a.ctrl_key_down=!1):e.keyCode==a.LEFT_SHIFT_KEY&&(a.close_date_picker(e),a.shift_key_down=!1)}},a.key_down=function(e){if("true"==a.use_multi_date){if(a.ctrl_key_down)return;e.keyCode==a.CTRL_KEY?(a.ctrl_key_down=!0,a.toggle_multi(!0)):e.keyCode==a.LEFT_SHIFT_KEY&&(a.shift_key_down=!0,a.toggle_multi(!0))}},a.on_focus=function(e){a.is_visible||a.open_date_picker(e),a.focus_fn()},a.on_click=function(e){a.is_visible||a.open_date_picker(e)},a.open_date_picker=function(e){var t=r.find("input").val().split(","),n=!1;t&&t.length>1&&(n=!0),a.datepicker.datepicker("setDates",t),"true"==a.use_multi_date&&n!=a.is_multi_date?a.toggle_multi():a.datepicker.datepicker("show")},a.close_date_picker=function(e){a.datepicker.datepicker("hide")},a.focus_fn=function(){angular.isFunction(a.on_focus_fn)&&n(function(){e(r).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?a.on_focus_fn():console.log("ignoring on focus function - element is no longer in focus",a.name)})},a.$watch("focus_field",function(){if(a.focus_field==a.name){var e=r.find("input");n(function(){e.is(":focus")||e.focus(),e.select()})}}),n(function(){var n=i.caDatePickerId;n||(n="ca-date-picker"),a.datepicker=e("#"+n).find("input"),a.create_datepicker(),a.datepicker.on("show",function(n){var o=e(".datepicker.datepicker-dropdown"),r=o.find("tfoot");"true"==a.use_multi_date?r.replaceWith("<tfoot><tr><th style='display: table-cell;' ng-class=\"{active: is_multi_date}\" ng-click='toggle_multi()' colspan='2' class='multi'>Multi</th><th style='display: table-cell;' ng-click='close_date_picker()' colspan='3' class='multi'>Close</th><th style='display: table-cell;' colspan='2' class='clear'>Clear</th></tr>"):r.replaceWith("<tfoot><tr><th style='display: table-cell;' colspan='4' class='today'>Today</th><th style='display: table-cell;' colspan='3' class='clear'>Clear</th></tr>"),r=o.find("tfoot"),t(r.contents())(a),a.initialization_complete=!0})})},controller:o.default_controller}}])}).call(this,n(3))},function(e,t){angular.module("Common").directive("caFieldNumber",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);t.pad_length="@caPadLength";return{restrict:"EAC",scope:t,templateUrl:"src/common/directives/clinicaid/ca_field_number.jsp",replace:!0,link:function(t,n,o,a){t.pad_length||(t.pad_length=0),e.default_link_function(t,n,o,a)},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldSelect",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);t.options="=caOptions",t.include_empty_option="@caEmptyOption";return{restrict:"EAC",scope:t,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_select")},replace:!0,link:e.default_link_function,controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldText",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);t.rows="@caRows",t.max_characters="@caMaxCharacters";return{restrict:"EAC",scope:t,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_text")},replace:!0,link:function(t,n,o,a){t.model||(t.model=""),t.$watch("model",function(e,n){Juno.Common.Util.exists(t.model)&&t.model.length>t.max_characters&&(t.error_message="Character limit exceeded. Max allowed: "+t.max_characters)}),e.default_link_function(t,n,o,a)},controller:e.default_controller}}])},function(e,t,n){(function(e){angular.module("Common").directive("caFieldTime",["fieldHelperService","$timeout",function(t,n){var o=angular.copy(t.default_scope);o.minute_step="=caMinuteStep";return{restrict:"EAC",scope:o,templateUrl:function(e,n){return t.resolve_template(n,"src/common/directives/clinicaid/ca_field_time")},replace:!0,link:function(o,a,r,i){o.picker_container=null,o.toggle_widget=function(){o.picker_container.timepicker("showWidget")},n(function(){o.picker_container=e("#input-"+o.name),o.picker_container.timepicker({defaultTime:!1,minuteStep:o.minute_step,icons:{up:"fa fa-chevron-up",down:"fa fa-chevron-down"}})}),t.default_link_function(o,a,r,i)},controller:t.default_controller}}])}).call(this,n(3))},function(e,t){angular.module("Common").directive("caFieldToggle",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);return t.true_text="@caTrueText",t.false_text="@caFalseText",t.true_value="@caTrueValue",t.false_value="@caFalseValue",{restrict:"EAC",scope:t,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_toggle")},replace:!0,link:function(t,n,o,a){e.default_link_function(t,n,o,a)},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFocusField",[function(){return{restrict:"A",replace:!1,priority:100,require:["?^caFieldAlpha","?^caFieldAlphadate","?^caFieldAutocomplete","?^caFieldBoolean","?^caFieldColor","?^caFieldCurrency","?^caFieldDate","?^caFieldDate3","?^caFieldNumber","?^caFieldSelect","?^caFieldText","?^caFieldTime"],link:function(e,t,n,o){for(var a=n.caName,r=!1,i=0;i<o.length;i++)if(o[i]&&o[i].ignore_focus_field()){r=!0;break}if(angular.isDefined(e.form_nav)&&!r){var l=n.caFocusField;e.$watch(l,function(){Juno.Common.Util.exists(a)&&a==e.form_nav.focus_field&&t[0].focus().select()}),e.$on("focusCaFocusField",function(e,n){Juno.Common.Util.exists(a)&&a==n&&t[0].focus().select()})}}}}])},function(e,t){angular.module("Common").directive("caInfoMessages",[function(){return{restrict:"E",scope:{saving:"=?caSavingFlag",errors:"=caErrorsObject",field_value_map:"=?caFieldValueMap",success_message:"@caSuccessMessage",field_value_map_label_key:"@caFieldValueMapLabelKey",displayFieldErrors:"=?caDisplayFieldErrors",prepend_name_to_field_errors:"=?caPrependNameToFieldErrors",error_link_functions:"=?caErrorLinkFunctions"},templateUrl:"src/common/directives/clinicaid/ca_info_messages.jsp",link:function(e,t,n,o){Juno.Common.Util.exists(e.displayFieldErrors)&&!1===e.displayFieldErrors||(e.displayFieldErrors=!0),Juno.Common.Util.exists(e.prepend_name_to_field_errors)&&!1===e.prepend_name_to_field_errors||(e.prepend_name_to_field_errors=!0),e.get_label=function(t){var n=t;return Juno.Common.Util.exists(e.field_value_map)&&e.field_value_map.hasOwnProperty(t)&&(n=Juno.Common.Util.exists(e.field_value_map_label_key)?e.field_value_map[t][e.field_value_map_label_key]:e.field_value_map[t]),n},e.force_array=function(e){return angular.isArray(e)?e:[e]},e.has_sub_errors=function(e){return!angular.isString(e)&&angular.isObject(e)},e.error_link_has_function=function(t){var n=e.errors.error_links()[t];return e.error_link_functions&&n.js_fn&&angular.isFunction(e.error_link_functions[n.js_fn])},e.execute_error_link_fn=function(t){var n=e.errors.error_links()[t];e.error_link_has_function(t)?e.error_link_functions[n.js_fn](n.uuid):console.log("error link does not have a function!",n)},e.should_display_field_errors=function(){return Juno.Common.Util.exists(e.errors)&&e.errors.has_field_errors()&&e.displayFieldErrors&&e.errors.displayFieldErrors}}}}])},function(e,t,n){(function(e){angular.module("Common").directive("caKeyBindScope",["$rootScope",function(t){return{scope:{identifier:"@caIdentifier",key_combo:"@caKeyCombo",callback_fn:"=caCallbackFn",key_bind_settings:"=caKeyBindSettings"},restrict:"EA",link:function(n,o,a,r){if(null==n.identifier)return console.log("The following ca_key_bind_scope element is missing the required ca-identifier attribute"),void console.log(o);var i=function(t){var n=t.parents("ca-key-bind-scope"),o=[];return e.each(n,function(e,n){try{o.unshift(n.attributes["ca-identifier"].nodeValue)}catch(e){console.log("This ca-key-bind-scope element has an invalid parent: "),console.log(t)}}),o}(o);if(null!=n.key_bind_settings)for(var l in n.key_bind_settings)t.ca_key_binding.bind_key_element(n,o,n.identifier,angular.copy(i),l,n.key_bind_settings[l]);else console.log("No key bind settings set for ca-key-bind-scope directive ("+n.identifier+")")}}}])}).call(this,n(3))},function(e,t){angular.module("Common").directive("caPagination",["$timeout",function(e){return{restrict:"E",scope:{pagination:"=caModel",change_page_callback:"=caChangePage"},templateUrl:"src/common/directives/clinicaid/ca_pagination.jsp",replace:!0,link:function(t,n,o,a){t.mode="pages",t.change_page=function(e){Juno.Common.Util.exists(e)&&e!=t.pagination.current_page&&e>0&&e<=t.pagination.total_pages&&t.change_page_callback(e)},t.expand_ellipsis=function(){t.go_to_page_num=t.pagination.current_page,t.mode="goto",e(function(){n.find("input").focus().select()})},t.close_ellipsis=function(){t.mode="pages"},t.go_to_page=function(){if(Juno.Common.Util.isIntegerString(t.go_to_page_num)){var e=parseInt(t.go_to_page_num);e<=0?e=1:e>t.pagination.total_pages&&(e=t.pagination.total_pages),t.change_page(e),t.close_ellipsis()}}}}}])},function(e,t){angular.module("Common").directive("caQuill",["$timeout",function(e){return{restrict:"A",require:"ngModel",replace:!0,templateUrl:"src/common/directives/clinicaid/ca_quill.jsp",link:function(t,n,o,a){var r,i={modules:{toolbar:{container:".wysiwyg-toolbar"},"image-tooltip":!0,"link-tooltip":!0},theme:"snow"},l=o.quill?t.$eval(o.quill):{};angular.extend(i,l),e(function(){r=new Quill(n.children()[1],i),a.$render(),r.on("text-change",function(e,n){var o;o=this.getHTML(),t.$apply(function(){a.$setViewValue(o)})})}),a.$render=function(){angular.isDefined(r)&&e(function(){r.setHTML(a.$viewValue||"")})}}}}])},function(e,t,n){(function(e){angular.module("Common").directive("caStickySearchResultsFooter",["$document","$timeout",function(t,n){return{restrict:"A",scope:{eventName:"@caEventName"},link:function(o,a,r,i){var l=angular.element(a[0].querySelector(".search-results-records")),s=angular.element(a[0].querySelector(".search-results-scrollbar")),u=angular.element(s[0].querySelector(".scrollbar")),c=angular.element(a[0].querySelector(".stickied-table-wrapper")),d=angular.element(c[0].querySelector("table")),p=angular.element(a[0].querySelector(".search-results-footer")),m=angular.element(a[0].querySelector(".search-results-records")),h=angular.element(t.find("#center-panel-wrapper")),g=angular.element(t.find("#layout-sidebar"));s.scroll(function(){c.scrollLeft(s.scrollLeft())}),c.scroll(function(){s.scrollLeft(c.scrollLeft())}),o.$on(o.eventName,function(){n(o.update_search_results_footer)}),o.update_search_results_footer=function(){h.height()>=g.height()&&m.offset().top+m.height()>e(window).height()?(p.addClass("fixed").removeClass("static"),p.css("width",l.width()),s.width(c.width()),u.width(d.width()),s.width()<u.width()?c.css("padding-bottom",p.height()-15):c.css("padding-bottom",p.height())):(p.addClass("static").removeClass("fixed"),p.css("width","initial"),c.css("padding-bottom",0))}}}}])}).call(this,n(3))},function(e,t){angular.module("Common").directive("zeroPad",["$filter",function(e){return{restrict:"A",link:function(t,n,o,a){a.$formatters.unshift(function(t){return e("numberFixedLength")(t,4)}),a.$parsers.unshift(function(t){return e("numberFixedLength")(t,4)})}}}])},function(e,t){angular.module("Common").directive("compileHtml",["$compile",function(e){return function(t,n,o){t.$watch(function(e){return e.$eval(o.compileHtml)},function(o){n.jsp(o),e(n.contents())(t)})}}])},function(e,t){angular.module("Common").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,n,o){var a=e(o.fileModel).assign;n.bind("change",function(){t.$apply(function(){a(t,n[0].files[0])})})}}}])},function(e,t){angular.module("Common").directive("resizeHandler",["$parse",function(e){return{restrict:"A",link:function(t,n,o){t.$on("resize::resize",function(){e(o.resizeHandler)(t)})}}}])},function(e,t){angular.module("Common").directive("resize",["$window",function(e){return{link:function(t){angular.element(e).on("resize",function(e){t.$broadcast("resize::resize")})}}}])},function(e,t){angular.module("Common").directive("scrollHandler",["$parse",function(e){return{restrict:"A",link:function(t,n,o){t.$on("scroll::scroll",function(){e(o.scrollHandler)(t)})}}}])},function(e,t){angular.module("Common").directive("scroll",["$window",function(e){return{link:function(t){angular.element(e).on("scroll",function(e){t.$broadcast("scroll::scroll")})}}}])},function(e,t){angular.module("Common").directive("caZeroPad",["$filter",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,o,a){a.$formatters.unshift(function(t){var n=o.caZeroPad;return n||(n=0),e("numberFixedLength")(t,n)}),a.$parsers.unshift(function(t){var n=o.caZeroPad;return n||(n=0),e("numberFixedLength")(t,n)})}}}])},function(e,t,n){"use strict";angular.module("Layout",["Common","Common.Services"])},function(e,t){angular.module("Layout").controller("Layout.BodyController",["$rootScope","$scope","providerService","securityService",function(e,t,n,o){var a=this;a.init=function(){n.getMe().then(function(e){o.setUser(e)},function(e){console.log(e)})},a.showPatientList=!0,t.$on("configureShowPatientList",function(e,t){console.log("Layout.BodyController updating showPatientList",t),a.showPatientList=t})}])},function(e,t,n){"use strict";(function(e){angular.module("Layout").controller("Layout.NavBarController",["$rootScope","$scope","$q","$timeout","$location","$state","$uibModal","securityService","personaService","billingService","inboxService","messageService",function(t,n,o,a,r,i,l,s,u,c,d,p){var m=this;m.init=function(){m.unAckLabDocTotal=0,m.unreadMessageTotal=0,m.demographicSearch=null,c.getBillingRegion().then(function(e){m.billRegion=e.message},function(e){console.log(e)}),s.hasRights({items:[{objectName:"_search",privilege:"r"},{objectName:"_demographic",privilege:"w"},{objectName:"_msg",privilege:"r"}]}).then(function(e){null!==e.content&&(m.searchRights=e.content[0],m.newDemographicRights=e.content[1],m.messageRights=e.content[2])},function(e){console.log(e)}),u.getDashboardMenu().then(function(e){e.menus&&(m.dashboardMenu=e.menus.menu)},function(e){console.log(e)}),u.getNavBar().then(function(e){m.currentProgram=e.currentProgram.program,e.programDomain.program instanceof Array?m.programDomain=e.programDomain.program:m.programDomain=[e.programDomain.program],m.unreadMessagesCount=e.unreadMessagesCount,m.unreadPatientMessagesCount=e.unreadPatientMessagesCount,m.getUnAckLabDocCount(),m.getUnreadMessageCount(),m.demographicSearchDropDownItems=e.menus.patientSearchMenu.items,m.menuItems=e.menus.menu.items,m.userMenuItems=e.menus.userMenu.items,m.messengerMenu=e.menus.messengerMenu.items},function(e){console.log(e)})},n.$watch(function(){return s.getUser()},function(e){m.me=e},!0),n.$watch(function(){return m.demographicSearch},function(e){null==e||e.isTypeaheadSearchQuery||(e.moreResults?m.goToPatientSearch(e.searchQuery):m.goToPatientRecord(e.demographicNo),m.demographicSearch=null)},!0),m.getUnAckLabDocCount=function(){d.getUnAckLabDocCount().then(function(e){m.unAckLabDocTotal=e},function(e){console.log(e)})},m.getUnreadMessageCount=function(){p.getUnreadCount().then(function(e){m.unreadMessageTotal=e},function(e){console.log(e)})},m.getNavBar=function(){u.getNavBar().then(function(e){m.currentProgram=e.currentProgram.program,e.programDomain.program instanceof Array?m.programDomain=e.programDomain.program:m.programDomain=[e.programDomain.program],m.unreadMessagesCount=e.unreadMessagesCount,m.unreadPatientMessagesCount=e.unreadPatientMessagesCount,m.demographicSearchDropDownItems=e.menus.patientSearchMenu.items,m.menuItems=e.menus.menu.items,m.userMenuItems=e.menus.userMenu.items,m.messengerMenu=e.menus.messengerMenu.items},function(e){console.log(e)})},m.onPatientSearch=function(e){null===e?m.goToPatientSearch():e.isTypeaheadSearchQuery&&m.goToPatientSearch(e.searchQuery),m.demographicSearch=null},m.goToPatientSearch=function(e){i.go("search",{term:e},{reload:"search"})},m.goToPatientRecord=function(e){i.go("record.details",{demographicNo:e,hideNote:!0},{reload:"record.details"})},m.transition=function(e){var t;if(console.log("transition",e),angular.isDefined(e)&&angular.isDefined(e.state)&&null!==e.state){var n="",o="";"Inbox"===e.label?(n="../dms/inboxManage.do?method=prepareForIndexPage",o="inbox"):"Billing"===e.label?(n="../billing.do?billRegion=CLINICAID&action=invoice_reports",o="billing"):"Admin"===e.label?(n="../administration/",o="admin"):"eDocs"===e.label?(n="../dms/documentReport.jsp?function=provider&functionid="+encodeURIComponent(m.me.providerNo),o="edocView"):a(function(){i.go(e.state)}),""!==n&&""!==o&&(t=window.open(n,o,"scrollbars=1,height=700,width=1000"),window.focus&&t.focus())}else if(angular.isDefined(e)&&angular.isDefined(e.url)&&null!==e.url){if(console.log(e),"Schedule"===e.label){var l="",s=r.path(),u=(s=s.substring(1)).split("/");return 1===u.length?l="?module="+encodeURIComponent(u[0]):3===u.length&&(l="?record="+encodeURIComponent(u[1])+"&module="+encodeURIComponent(u[2])),window.location=e.url+l,!1}angular.isDefined(e)&&angular.isDefined(e.openNewWindow)&&e.openNewWindow?(t=window.open(e.url),window.focus&&t.focus()):window.location=e.url}},m.openMessenger=function(e){if(null!=m.me)if(angular.isDefined(e)&&angular.isDefined(e.url)&&"phr"===e.url)window.open("../phr/PhrMessage.do?method=viewMessages","INDIVOMESSENGER"+encodeURIComponent(m.me.providerNo),"height=700,width=1024,scrollbars=1");else if(angular.isDefined(e)&&angular.isDefined(e.url)&&"k2a"===e.url){"-"===e.extra?window.open("../apps/oauth1.jsp?id=K2A","appAuth","width=700,height=450,scrollbars=1").focus():window.open("../apps/notifications.jsp","appAuth","width=450,height=700,scrollbars=1").focus()}else window.open("../oscarMessenger/DisplayMessages.do?providerNo="+encodeURIComponent(m.me.providerNo),"msgs","height=700,width=1024,scrollbars=1")},m.newDemographic=function(t){l.open({templateUrl:"src/patient/newPatient.jsp",controller:"Patient.NewPatientController as newPatientCtrl",backdrop:"static",size:t}).result.then(function(e){console.log(e),console.log("patient #: ",e.demographicNo),console.log(r.path()),r.path("/record/"+encodeURIComponent(e.demographicNo)+"/details"),console.log(r.path())},function(e){console.log("Modal dismissed at: "+new Date),console.log(e)}),console.log(e("#myModal"))},m.isActive=function(e){return i.current.name===e.state},m.changeProgram=function(e){u.setCurrentProgram(e).then(function(e){m.getNavBar()},function(e){console.log(e)})},m.mediumNavItemFilter=function(t){return function(n){var o=-1!=e.inArray(n.label,["Dashboard","Schedule","Inbox","Consultations","Ticklers"]);return!0===t?!o:o}},m.smallNavItemFilter=function(t){return function(n){var o=-1!=e.inArray(n.label,["Dashboard"]);return!0===t?!o:o}}}])}).call(this,n(3))},function(e,t,n){"use strict";angular.module("Patient",["Common","Common.Services"])},function(e,t,n){"use strict";angular.module("Patient").controller("Patient.NewPatientController",["$scope","$uibModal","$uibModalInstance","demographicService","securityService","programService","staticDataService",function(e,t,n,o,a,r,i){var l=this;l.demographic={},l.submitDisabled=!1,a.hasRight("_demographic","w").then(function(e){l.hasRight=e},function(e){console.log(e)}),r.getPrograms().then(function(e){l.programs=e,1==l.programs.length&&(l.demographic.admissionProgramId=l.programs[0].id)},function(e){console.log(e)}),l.genders=i.getGenders(),l.save=function(t){if(console.log(l.demographic.lastName),console.log(l.demographic.firstName),console.log(l.demographic.dobYear),console.log(l.demographic.dobMonth),console.log(l.demographic.dobDay),console.log(l.demographic.sex),console.log(l.demographic),console.log(t.$valid),console.log(e),l.submitDisabled=!0,t.$valid){if(console.log("Saving..."),!l.isCorrectDate(l.demographic.dobYear,l.demographic.dobMonth,l.demographic.dobDay))return alert("Incorrect Date of Birth!"),void(l.submitDisabled=!1);l.demographic.dateOfBirth=l.demographic.dobYear+"-"+l.demographic.dobMonth+"-"+l.demographic.dobDay,l.demographic.patientStatusDate=new Date,l.demographic.dateJoined=new Date,l.demoRetVal={},o.saveDemographic(l.demographic).then(function(e){console.log(e),l.demoRetVal=e,n.close(e)},function(e){console.log(e),l.submitDisabled=!1})}else console.log("ERR!!"),l.submitDisabled=!1},l.ok=function(){n.close(l.selected.item)},l.cancel=function(){n.dismiss("cancel")},l.capName=function(){null!=l.demographic.lastName&&(l.demographic.lastName=l.demographic.lastName.toUpperCase()),null!=l.demographic.firstName&&(l.demographic.firstName=l.demographic.firstName.toUpperCase())},l.isCorrectDate=function(e,t,n){var o=new Date(e,t-1,n);return"Invalid Date"!=o&&(o.getFullYear()==e&&(o.getMonth()==t-1&&o.getDate()==n))}}])},function(e,t,n){"use strict";angular.module("Dashboard",["Common","Common.Services"])},function(e,t){angular.module("Dashboard").controller("Dashboard.DashboardController",["$scope","$uibModal","NgTableParams","providerService","ticklerService","messageService","inboxService","k2aService","noteService","securityService","personaService",function(e,t,n,o,a,r,i,l,s,u,c){var d=this;d.displayDate=function(){return new Date},d.me=null,d.k2aActive=!1,d.k2aFeedActive=!1,d.busyLoadingData=!1,c.getDashboardPreferences().then(function(e){d.prefs=e.dashboardPreferences},function(e){console.log(e)}),u.hasRights({items:[{objectName:"_tickler",privilege:"w"},{objectName:"_tickler",privilege:"r"}]}).then(function(e){null!=e.content&&2==e.content.length&&(d.ticklerWriteAccess=e.content[0],d.ticklerReadAccess=e.content[1])},function(e){console.log(e)}),d.inboxTableParams=new n({page:1,count:10},{getData:function(e){return i.getDashboardItems(e.count()).then(function(t){return console.log("INBOX DATA: ",t),e.total(t.total),t.content},function(e){console.log(e)})}}),d.openInbox=function(){newwindow=window.open("../dms/inboxManage.do?method=prepareForIndexPage","inbox","height=700,width=1000"),window.focus&&newwindow.focus()},d.updateK2aActive=function(){l.isK2AInit().then(function(e){d.k2aActive=e})},d.loadMoreK2aFeed=function(){d.updateFeed(d.k2afeed.length,10)},d.authenticateK2A=function(e){window.open("../apps/oauth1.jsp?id="+e,"appAuth","width=700,height=450")},d.agreeWithK2aPost=function(e){e.agree?l.removeK2AComment(e.agreeId).then(function(t){e.agree=!1,e.agreeCount--,e.agreeId=""},function(e){alert(e)}):e.agree||e.disagree||(void 0===e.newComment&&(e.newComment={}),e.newComment.agree=!0,e.newComment.body="",d.commentOnK2aPost(e))},d.disagreeWithK2aPost=function(e){e.disagree&&l.removeK2AComment(e.agreeId).then(function(t){e.disagree=!1,e.disagreeCount--,e.agreeId=""},function(e){alert(e)}),e.agree||e.disagree||(void 0===e.newComment&&(e.newComment={}),e.newComment.agree=!1,e.newComment.body="",d.commentOnK2aPost(e))},d.commentOnK2aPost=function(e){e.newComment.postId=e.id,l.postK2AComment(e.newComment).then(function(t){e.newComment.body="",e.newComment.agree="",e.agreeId=t.agreeId,void 0!==t.post[0].agree?t.post[0].agree?(e.agree=!0,e.agreeId=t.post[0].agreeId,e.agreeCount++):(e.disagree=!0,e.agreeId=t.post[0].agreeId,e.disagreeCount++):(e.commentCount++,e.comments.unshift(t.post[0]))},function(e){alert(e)})},d.updateTicklers=function(){a.search({status:"A",creator:d.me.providerNo,overdueOnly:"property"},0,6).then(function(e){if(d.totalTicklers=e.total,null!=e.content)if(e.content instanceof Array)d.ticklers=e.content;else{var t=new Array;t[0]=e.content,d.ticklers=t}},function(e){console.log(e)})},d.updateMessages=function(){r.getUnread(6).then(function(e){if(d.totalMessages=e.total,null!=e.content)if(e.content instanceof Array)d.messages=e.content;else{var t=new Array;t[0]=e.content,d.messages=t}},function(e){console.log(e)})},d.updateReports=function(){i.getDashboardItems(5).then(function(e){if(null!=e.content){if(e.content instanceof Array)d.inbox=e.content;else{var t=new Array;t[0]=e.content,d.inbox=t}d.totalInbox=e.total}},function(e){console.log(e)})},d.updateFeed=function(e,t){d.busyLoadingData||(d.busyLoadingData=!0,l.getK2aFeed(e,t).then(function(e){if(e.content instanceof Array){for(var t=e.content,n=0;n<t.length;n++){if(!Array.isArray(t[n].comments))(o=new Array)[0]=t[n].comments,t[n].comments=o}void 0===d.k2afeed?d.k2afeed=t:d.k2afeed=d.k2afeed.concat(t),d.k2aFeedActive=!0,d.busyLoadingData=!1}else{var o;if(e.content.authenticatek2a)d.authenticatek2a=e.content.description;else(o=new Array)[0]=e.content,d.k2afeed=o,d.k2aFeedActive=!0}},function(e){alert(e),d.busyLoadingData=!1}))},d.updateDashboard=function(){d.updateTicklers(),d.updateMessages(),d.updateReports(),d.updateFeed(0,10),d.updateK2aActive()},e.$watch(function(){return u.getUser()},function(e){d.me=e,null!=e&&d.updateDashboard()},!0),d.isTicklerExpiredOrHighPriority=function(e){var t=!1;return Date.parse(e.serviceDate)<new Date&&(t=!0),"High"==e.priority&&(t=!0),t},d.isTicklerHighPriority=function(e){Date.parse(e.serviceDate),new Date;var t=!1;return"High"==e.priority&&(t=!0),t},d.openClassicMessenger=function(){null!=d.me&&window.open("../oscarMessenger/DisplayMessages.do?providerNo="+d.me.providerNo,"msgs","height=700,width=1024,scrollbars=1")},d.viewMessage=function(e){window.open("../oscarMessenger/ViewMessage.do?messageID="+e.id+"&boxType=0","msg"+e.id,"height=700,width=1024,scrollbars=1")},d.viewTickler=function(e){t.open({templateUrl:"src/tickler/ticklerView.jsp",controller:"Tickler.TicklerViewController as  ticklerViewCtrl",backdrop:"static",size:"lg",resolve:{tickler:function(){return e},ticklerNote:function(){return s.getTicklerNote(e.id)},ticklerWriteAccess:function(){return d.ticklerWriteAccess},me:function(){return d.me}}}).result.then(function(e){null!=e&&1==e&&d.updateTicklers()},function(e){console.log(e)})},d.configureTicklers=function(){t.open({templateUrl:"src/tickler/configureDashboard.jsp",controller:"Dashboard.TicklerConfigureController as ticklerConfigureCtrl",backdrop:"static",size:"md",resolve:{prefs:function(){return c.getDashboardPreferences()}}}).result.then(function(e){1==e&&(d.updateTicklers(),c.getDashboardPreferences().then(function(e){d.prefs=e.dashboardPreferences}))},function(e){console.log(e)})}}])},function(e,t){angular.module("Dashboard").controller("Dashboard.TicklerConfigureController",["$scope","$uibModalInstance","personaService","prefs",function(e,t,n,o){var a=this;a.prefs=o.dashboardPreferences,a.close=function(){t.close(!1)},a.save=function(){n.updateDashboardPreferences(a.prefs).then(function(e){t.close(!0)},function(e){t.close(!1),console.log(e)})}}])},function(e,t,n){"use strict";angular.module("PatientList",["Common","Common.Services"])},function(e,t){angular.module("PatientList").service("patientListState",[function(){this.tabItems=[]}])},function(e,t){angular.module("PatientList").controller("PatientList.PatientListController",["$scope","$http","$state","$uibModal","angularUtil","Navigation","personaService","providerService","patientListState","scheduleService","reportingService",function(e,t,n,o,a,r,i,l,s,u,c){var d=this;d.sidebar=r,d.showFilter=!0,d.patientListConfig={},d.goToRecord=function(e){if(0!=e.demographicNo){var t={demographicNo:e.demographicNo};angular.isDefined(e.appointmentNo)&&(t.appointmentNo=e.appointmentNo,t.encType="face to face encounter with client",a.inMobileView()&&(d.hidePatientList(),console.log("hiding patientlist"))),n.go("record.summary",t)}},d.query="",d.isActive=function(e){return null!==d.currenttab&&e===d.currenttab.id},d.isMoreActive=function(e){return null!==d.currentmoretab&&e===d.currentmoretab.id},d.showPatientList=function(){e.$emit("configureShowPatientList",!0)},d.hidePatientList=function(){e.$emit("configureShowPatientList",!1)},d.changeMoreTab=function(e,t){d.currentmoretab;d.currentmoretab=d.moreTabItems[e],d.showFilter=!0,d.currenttab=null,d.refresh(t)},d.changeTab=function(e,t){d.currenttab!==s.tabItems[e]&&(d.currenttab=s.tabItems[e],d.showFilter=!0,d.currentmoretab=null,d.refresh(t))},d.getMoreTabClass=function(e){return null!=d.currentmoretab&&e==d.currentmoretab.id?"more-tab-highlight":""},d.currentPage=0,d.pageSize=8,d.patients=null,d.numberOfPages=function(){return null==d.nPages||0==d.nPages?1:d.nPages},e.$on("updatePatientListPagination",function(e,t){console.log("updatePatientListPagination="+t),d.nPages=Math.ceil(t/d.pageSize),console.log("nPages="+d.nPages)}),d.changePage=function(t){d.currentPage=t,e.$broadcast("updatePatientList",{currentPage:d.currentPage,pageSize:d.pageSize})},e.$on("togglePatientListFilter",function(e,t){console.log("received a togglePatientListFilter event:"+t),d.showFilter=t}),d.process=function(e,t){e.serviceMethod().then(function(t){d.patients=t,d.nPages=1,null!=d.patients&&d.patients.length>0&&(d.nPages=Math.ceil(d.patients.length/d.pageSize)),d.template=e.template,r.load(d.template),d.changePage(0)},function(e){alert("error loading data for patient list:"+e)})},d.refresh=function(e){null!=d.currenttab&&d.process(d.currenttab,e),null!=d.currentmoretab&&d.process(d.currentmoretab,e)},e.$on("juno:patientListRefresh",function(){d.refresh()}),l.getRecentPatientList().then(function(e){d.recentPatientList=e},function(e){console.log(e)}),i.getPatientListConfig().then(function(e){d.patientListConfig=e,d.pageSize=d.patientListConfig.numberOfApptstoShow},function(e){console.log(e)}),d.getTabItems=function(){return s.tabItems},d.manageConfiguration=function(){o.open({templateUrl:"src/patientlist/patientListConfiguration.jsp",controller:"PatientList.PatientListConfigController as patientListConfigCtrl",backdrop:!1,size:"lg",resolve:{config:function(){return d.patientListConfig}}}).result.then(function(t){i.setPatientListConfig(t).then(function(t){d.patientListConfig=t,d.pageSize=d.patientListConfig.numberOfApptstoShow,e.$emit("updatePatientListPagination",d.patients.length)},function(e){console.log(e)})},function(e){console.log(e)})},s.tabItems=[{id:0,label:"Appts.",template:"src/patientlist/patientList1.jsp",serviceMethod:function(){return u.getAppointments("today").then(function(e){return e.patients})}},{id:1,label:"Recent",template:"src/patientlist/recent.jsp",serviceMethod:function(){return l.getRecentPatientList().then(function(e){return d.recentPatientList=e,e})}}],d.moreTabItems=[{id:0,label:"Patient Sets",template:"src/patientlist/demographicSets.jsp",serviceMethod:function(){return c.getDemographicSetList().then(function(e){return e.content})}},{id:1,label:"Caseload",template:"src/patientlist/program.jsp",serviceMethod:function(){return Promise.resolve([])}}],d.changeTab(0)}])},function(e,t){angular.module("PatientList").controller("PatientList.PatientListAppointmentListController",["$scope","$http","$q","$filter","$uibModal","$state","Navigation","scheduleService","providerService","patientListState",function(e,t,n,o,a,r,i,l,s,u){var c=this;c.statusCodeMap=new Map,c.statuses=null,c.dateOptions={showWeeks:!1},e.selectedDate=null,e.$watch("selectedDate",function(e,t){e!==t&&(l.selectedDate=e)}),l.getStatuses().then(function(e){c.statuses=e.content,c.statusCodeMap=new Map(c.statuses.map(e=>[e.status,e]))},function(e){console.log(e)}),c.getAppointmentStatusDescriptionByStatusCode=function(e){let t=c.statusCodeMap.get(e),n="";return t&&(n=t.description),n},c.getAppointmentStatusColourByStatusCode=function(e){let t=c.statusCodeMap.get(e),n="#000000";return t&&(n=t.color),n},c.today=function(){c.appointmentDate=new Date},c.today(),c.clear=function(){c.appointmentDate=null},c.open=function(e){e.preventDefault(),e.stopPropagation(),c.opened=!0},Date.prototype.AddDays=function(e){return this.setTime(this.getTime()+864e5*e),this},c.switchDay=function(e){var t=c.appointmentDate;t.AddDays(e),c.appointmentDate=t;var n=o("date")(t,"yyyy-MM-dd");c.changeApptList(n)},c.changeApptDate=function(){void 0==c.appointmentDate&&c.today();var e=o("date")(c.appointmentDate,"yyyy-MM-dd");c.changeApptList(e)},c.changeApptList=function(t){c.currenttab=u.tabItems[0],c.currenttab.serviceMethod=function(){return l.getAppointments(t).then(function(e){return e.patients})},c.showFilter=!0,e.$emit("juno:patientListRefresh")},c.addNewAppointment=function(){a.open({templateUrl:"src/schedule/appointmentAdd.jsp",controller:"Schedule.AppointmentAddController as appointmentAddCtrl",backdrop:"static",size:"lg",resolve:{me:function(){return s.getMe()},apptDate:function(){return c.appointmentDate}}}).result.then(function(e){c.switchDay(0)},function(e){console.log(e)})},c.viewAppointment=function(e){a.open({templateUrl:"src/schedule/appointmentView.jsp",controller:"Schedule.AppointmentViewController as appointmentViewCtrl",backdrop:"static",size:"lg",resolve:{me:function(){return s.getMe()},appointment:function(){return l.getAppointment(e)},statusList:function(){return l.getStatuses()}}}).result.then(function(e){c.switchDay(0)},function(e){console.log(e)})},c.isScheduleActive=function(){return"schedule"==r.current.name}}])},function(e,t){angular.module("PatientList").controller("PatientList.PatientListConfigController",["$scope","$uibModalInstance","config",function(e,t,n){var o=this;o.patientListConfig=n,o.cancel=function(){t.dismiss()},o.saveConfiguration=function(){t.close(o.patientListConfig)}}])},function(e,t){angular.module("PatientList").controller("PatientList.PatientListDemographicSetController",["$scope","$http","reportingService",function(e,t,n){var o=this;n.getDemographicSetList().then(function(e){o.sets=e.content},function(e){alert("Failed to get sets lists.")})}])},function(e,t){angular.module("PatientList").controller("PatientList.PatientListProgramController",["$scope","$http",function(e,t){var n=this;e.$on("updatePatientList",function(e,t){console.log("updatePatientList="+JSON.stringify(t)),n.updateData(t.currentPage,t.pageSize)}),n.updateData=function(o,a){t({url:"../ws/rs/program/patientList?startIndex="+o*a+"&numToReturn="+a,method:"GET",headers:{"Content-Type":"application/json"}}).then(function(t){n.admissions=t.data.content,e.$emit("updatePatientListPagination",t.data.total)},function(e){console.log(e)})},n.updateData(0,n.pageSize),e.$emit("togglePatientListFilter",!1)}])},function(e,t,n){"use strict";angular.module("Record",["Common","Common.Services"])},function(e,t,n){(function(e,t){function n(e){return e<10&&(e="0"+e),e}angular.module("Record").controller("Record.RecordController",["$rootScope","$scope","$window","$http","$localStorage","$location","$state","$stateParams","$timeout","$interval","$uibModal","demographicService","demo","user","properties","noteService","uxService","securityService","scheduleService","billingService",function(o,a,r,i,l,s,u,c,d,p,m,h,g,f,v,b,S,C,N,y){var A=this;A.demographicNo=c.demographicNo,A.demographic=g,A.properties=v,A.page={},A.page.assignedCMIssues=[],A.page.itvSet=null,A.page.itvCheck=null,A.page.editingNoteId=null,A.page.isNoteSaved=!1,A.$storage=l,A.recordtabs2=[],A.init=function(){A.fillMenu()},C.hasRight("_eChart","w",A.demographicNo).then(function(e){A.page.cannotChange=!e},function(e){console.log(e)}),A.checkAction=function(e){A.page.cannotChange&&(e.preventDefault(),e.stopPropagation())},A.isNaN=function(e){return isNaN(e)},A.fillMenu=function(){S.menu(c.demographicNo).then(function(e){A.recordtabs2=e},function(e){console.log(e)})},A.changeTab=function(e){if(A.currenttab2=A.recordtabs2[e.id],Juno.Common.Util.isDefinedAndNotNull(e.state))Juno.Common.Util.isDefinedAndNotNull(e.demoId)?u.go(e.state,{demographicNo:e.demoId}):u.go(e.state);else if(angular.isDefined(e.url)){if("Rx"==e.label)win=e.label+A.demographicNo;else{var t=Math.round(1e3*Math.random());win="win"+t}window.open(e.url,win,"scrollbars=yes, location=no, width=1000, height=600","")}},A.isActive=function(e){return!(!Juno.Common.Util.isDefinedAndNotNull(u.current.name)||!Juno.Common.Util.isDefinedAndNotNull(e.state))&&u.current.name===e.state},r.onbeforeunload=function(e){if(Juno.Common.Util.isDefinedAndNotNull(A.page.encounterNote)&&0!==A.page.encounterNote.note.trim().length&&!1===A.page.isNoteSaved)return"You have made changes to a note, but you did not save them yet.\nLeaving the page will revert all changes."},a.$on("$destroy",function(){delete r.onbeforeunload}),a.$on("$stateChangeStart",function(e,t){Juno.Common.Util.isDefinedAndNotNull(A.page.encounterNote)&&!1===A.page.isNoteSaved&&-1===t.name.indexOf("record.")&&(0!==A.page.encounterNote.note.trim().length&&(confirm("You have unsaved note data. Are you sure you want to leave?")||e.preventDefault()))});var D=null,w=function(){A.page.encounterNote.note!=A.page.initNote&&(console.log("save",A.page.encounterNote),b.tmpSave(c.demographicNo,A.page.encounterNote))},_=!1;a.$watch("controller.page.encounterNote.note",function(e,t){_||(e!=t?(!0,D&&d.cancel(D),D=d(w,2e3)):!1),_=!1});var I=new Date,P=0,T=setInterval(R,1e3);function R(){++P,document.getElementById("aTimer").innerHTML=U(parseInt(P/60))+":"+U(P%60),1200==P&&e("#aTimer").css("background-color","#DFF0D8"),3e3==P&&e("#aTimer").css("background-color","#FDFEC7")}function U(e){var t=e+"";return t.length<2?"0"+t:t}A.getCurrentTimerToggle=function(){return angular.isDefined(T)?"fa-pause":"fa-play"},A.toggleTimer=function(){e("#aToggle").hasClass("fa-pause")?(e("#aToggle").removeClass("fa-pause"),e("#aToggle").addClass("fa-play"),clearInterval(T)):(e("#aToggle").removeClass("fa-play"),e("#aToggle").addClass("fa-pause"),T=setInterval(R,1e3))},A.pasteTimer=function(){var e=new Date;A.page.encounterNote.note+="\n"+document.getElementById("startTag").value+": "+I.getHours()+":"+U(I.getMinutes())+"\n"+document.getElementById("endTag").value+": "+e.getHours()+":"+U(e.getMinutes())+"\n"+U(parseInt(P/3600))+":"+U(parseInt(P/60%60))+":"+U(P%60)},a.$on("$destroy",function(){clearInterval(T)}),A.toggleNote=function(){A.$storage.hideNote?A.$storage.hideNote=!1:A.$storage.hideNote=!0},A.cancelNoteEdit=function(){console.log("CANCELLING EDIT"),A.page.encounterNote=null,o.$emit("stopEditingNote"),_=!0,A.getCurrentNote(!1),A.removeEditingNoteFlag(),A.$storage.hideNote=!0},A.updateCurrentNote=function(e){A.page.encounterNote.note=e},A.saveNote=function(){if(0!==A.page.encounterNote.note.length){A.page.encounterNote.assignedIssues=A.page.assignedCMIssues,A.page.encounterNote.issueDescriptions=[],Juno.Common.Util.isInArray(f.displayName,A.page.encounterNote.editorNames)||A.page.encounterNote.editorNames.push(f.displayName);for(var e=0;e<A.page.assignedCMIssues.length;e++)A.page.encounterNote.issueDescriptions.push(A.page.assignedCMIssues[e].issue.description);b.saveNote(c.demographicNo,A.page.encounterNote).then(function(e){A.page.isNoteSaved=!0,o.$emit("noteSaved",e),_=!0,A.page.encounterNote=e,A.$storage.hideNote=!0,A.getCurrentNote(!1),A.page.assignedCMIssues=[]},function(e){console.log(e)}),A.removeEditingNoteFlag()}else alert("Can't save a blank note!")},A.saveSignNote=function(){A.page.encounterNote.isSigned=!0,A.saveNote()},A.saveSignVerifyNote=function(){A.page.encounterNote.isVerified=!0,A.page.encounterNote.isSigned=!0,A.saveNote()},y.getBillingRegion().then(function(e){A.page.billregion=e.message},function(e){console.log(e)}),y.getDefaultView().then(function(e){A.page.defaultView=e.message},function(e){console.log(e)}),null!=s.search().appointmentNo&&N.getAppointment(s.search().appointmentNo).then(function(e){A.page.appointment=e},function(e){console.log(e)}),A.saveSignBillNote=function(){A.page.encounterNote.isSigned=!0,A.saveNote();for(var e="",o=0;o<A.page.assignedCMIssues.length;o++)e+="&dxCode="+A.page.assignedCMIssues[o].issue.code.substring(0,3);var a="",r="",i="",l="";if(null!=A.page.appointment){a=A.page.appointment.id,r=A.page.appointment.providerNo;var s=t(A.page.appointment.appointmentDate).toDate();i=s.getFullYear()+"-"+n(s.getMonth()+1)+"-"+n(s.getDate()),l=n((s=new Date(A.page.appointment.startTime)).getHours())+":"+n(s.getMinutes())+":"+n(s.getSeconds())}var u="../billing.do?billRegion="+encodeURIComponent(A.page.billregion);u+="&billForm="+encodeURIComponent(A.page.defaultView),u+="&demographic_name="+encodeURIComponent(g.lastName+","+g.firstName),u+="&demographic_no="+g.demographicNo,u+="&providerview="+f.providerNo+"&user_no="+f.providerNo,u+="&appointment_no="+a+"&apptProvider_no="+r,u+="&appointment_date="+i+"&start_time="+l,u+="&hotclick=&status=t&bNewForm=1"+e,window.open(u,"billingWin","scrollbars=yes, location=no, width="+screen.width+", height="+screen.height,"")},A.page.currentNoteConfig={},A.getIssueNote=function(){null!=A.page.encounterNote.noteId&&b.getIssueNote(A.page.encounterNote.noteId).then(function(e){var t;null!=e&&(A.page.assignedCMIssues=(t=e.assignedCMIssues)instanceof Array?t:null==t?[]:[t])},function(e){console.log(e)})},A.getCurrentNote=function(e){b.getCurrentNote(c.demographicNo,s.search()).then(function(e){A.page.encounterNote=e,A.page.initNote=e.note,A.getIssueNote(),o.$emit("currentlyEditingNote",A.page.encounterNote),A.initAppendNoteEditor(),A.initObservationDate()},function(e){console.log(e)})},A.getCurrentNote(!0),A.editNote=function(e){o.$emit("",e)},o.$on("loadNoteForEdit",function(e,t){if(null!==A.page.editingNoteId)return console.log("Note is already being edited! Do you want to save changes?"),void A.displayWarning(t);A.page.encounterNote=angular.copy(t),A.getIssueNote(),A.$storage.hideNote=!1,o.$emit("currentlyEditingNote",A.page.encounterNote),A.removeEditingNoteFlag()}),A.initAppendNoteEditor=function(){null!=s.search().noteEditorText&&(A.page.encounterNote.note=A.page.encounterNote.note+s.search().noteEditorText)},A.initObservationDate=function(){null===A.page.encounterNote.observationDate&&(A.page.encounterNote.observationDate=new Date)},o.$on("$stateChangeStart",function(){A.removeEditingNoteFlag()}),A.doSetEditingNoteFlag=function(){b.setEditingNoteFlag(A.page.editingNoteId,f.providerNo).then(function(e){e.success||("Parameter error"==e.message?alert("Parameter Error: noteUUID["+A.page.editingNoteId+"] userId["+f.providerNo+"]"):alert("Warning! Another user is editing this note now."))},function(e){console.log(e)})},A.setEditingNoteFlag=function(){null!=A.page.encounterNote.uuid&&(A.page.isNoteSaved=!1,A.page.editingNoteId=A.page.encounterNote.uuid,null==A.page.itvSet&&(A.page.itvSet=p(A.doSetEditingNoteFlag(),3e4)),null==A.page.itvCheck&&(A.page.itvCheck=p(function(){b.checkEditNoteNew(A.page.editingNoteId,f.providerNo).then(function(e){e.success||(alert("Warning! Another user tries to edit this note. Your update may be replaced by later revision(s)."),p.cancel(A.page.itvCheck),A.page.itvCheck=null)},function(e){console.log(e)})},1e4)))},A.removeEditingNoteFlag=function(){null!=A.page.editingNoteId&&(b.removeEditingNoteFlag(A.page.editingNoteId,f.providerNo),p.cancel(A.page.itvSet),p.cancel(A.page.itvCheck),A.page.itvSet=null,A.page.itvCheck=null,A.page.editingNoteId=null)},A.searchTemplates=function(e){var t={name:e};return S.searchTemplates(t,0,25).then(function(e){for(var t=[],n=0;n<e.templates.length;n++)t.push({encounterTemplateName:e.templates[n].encounterTemplateName});return t},function(e){console.log(e)})},A.insertTemplate=function(e,t,n){S.getTemplate({name:t}).then(function(e){if(null!==e.templates){var t=e.templates[0];A.page.encounterNote.note=A.page.encounterNote.note+t.encounterTemplateValue,A.options={magicVal:""}}},function(e){console.log(e)})},A.displayWarning=function(e){m.open({templateUrl:"src/record/summary/saveWarning.jsp",controller:"Record.Summary.SaveWarningController as saveWarningCtrl",backdrop:"static",size:"md",resolve:{saveSignNote:function(){return A.saveSignNote},cancelNoteEdit:function(){return A.cancelNoteEdit}}}).result.then(function(e){console.log(e)},function(e){console.log("Modal dismissed at: "+new Date),console.log(e)})},A.searchIssues=function(e){console.log("SEARCHING FOR ISSUE: ",e);var t={term:e};return b.searchIssues(t,0,100).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({issueId:e.content[n].id,code:e.content[n].description+"("+e.content[n].code+")"});return e.total,e.content.length,t},function(e){console.log(e)})},A.assignIssue=function(e,t,n){for(var o=0;o<A.page.assignedCMIssues.length;o++)if(A.page.assignedCMIssues[o].issue.id==t)return;b.getIssue(t).then(function(t){var n={acute:!1,certain:!1,issue:t,issue_id:e.issueId,major:!1,resolved:!1,unsaved:!0};A.page.assignedCMIssues.push(n),a.$broadcast("noteIssueAdded")},function(e){console.log(e)})},A.removeIssue=function(e){console.log("removed issue in record ctrl"),e.unchecked=!0;for(var t=[],n=0;n<A.page.assignedCMIssues.length;n++)A.page.assignedCMIssues[n].issue_id!=e.issue_id&&t.push(A.page.assignedCMIssues[n]);A.page.assignedCMIssues=t,a.$broadcast("noteIssueRemoved")},A.mediumNavItemFilter=function(t){return function(n){var o=-1!=e.inArray(n.label,["Details","Summary","Forms","Tickler","Health Tracker","Rx","Consultations"]);return!0===t?!o:o}},A.demographic.age=Juno.Common.Util.calcAge(A.demographic.dobYear,A.demographic.dobMonth,A.demographic.dobDay),A.init()}])}).call(this,n(3),n(5))},function(e,t,n){"use strict";angular.module("Record.Summary",["Common","Common.Services"])},function(e,t){angular.module("Record.Summary").controller("Record.Summary.SummaryController",["$rootScope","$scope","$http","$location","$stateParams","$state","$filter","$uibModal","$interval","user","noteService","summaryService","securityService",function(e,t,r,i,l,s,u,c,d,p,m,h,g){var f=this;f.page={},f.page.columnOne={},f.page.columnOne.modules={},f.page.columnThree={},f.page.columnThree.modules={},f.page.selectedNotes=[],f.page.notes={},f.index=0,f.page.notes={},f.page.notes.notelist=[],f.busy=!1,f.page.noteFilter={},f.page.currentFilter="none",f.page.onlyNotes=!1,f.page.onlyMine=!1,f.demographicNo=l.demographicNo,g.hasRight("_eChart","r",l.demographicNo).then(function(e){f.page.canRead=e},function(e){console.log(e)}),g.hasRight("_eChart","u",l.demographicNo).then(function(e){f.page.cannotChange=!e},function(e){console.log(e)}),g.hasRight("_eChart","w",l.demographicNo).then(function(e){f.page.cannotAdd=!e},function(e){console.log(e)}),f.checkAction=function(e){f.page.cannotChange&&(e.preventDefault(),e.stopPropagation())},f.openRevisionHistory=function(e){win="revision";var t="../CaseManagementEntry.do?method=notehistory&noteId="+e.noteId;window.open(t,win,"scrollbars=yes, location=no, width=647, height=600","")},f.openRx=function(e){win="Rx"+e;var t="../oscarRx/choosePatient.do?demographicNo="+e;window.open(t,win,"scrollbars=yes, location=no, width=900, height=600","")},f.openAllergies=function(e){win="Allergy"+e;var t="../oscarRx/showAllergy.do?demographicNo="+e;return window.open(t,win,"scrollbars=yes, location=no, width=900, height=600",""),!1},f.openPreventions=function(e){win="prevention"+e;var t="../oscarPrevention/index.jsp?demographic_no="+e;return window.open(t,win,"scrollbars=yes, location=no, width=900, height=600",""),!1},f.openAssessments=function(){s.go("record.forms",{formListId:1})},f.addMoreItems=function(){f.busy||(f.busy=!0,m.getNotesFrom(l.demographicNo,f.index,20,f.page.noteFilter).then(function(e){if(angular.isDefined(e.notelist)){if(e.notelist instanceof Array)for(var t=0;t<e.notelist.length;t++)f.page.notes.notelist.push(e.notelist[t]);else f.page.notes.notelist.push(e.notelist);f.index=f.page.notes.notelist.length}f.busy=!1},function(e){console.log(e),f.error=e,f.busy=!1}))},f.addMoreItems(),f.editNote=function(t){e.$emit("loadNoteForEdit",t)},f.editGroupNote=function(e){var t=f.findGroupNote(e);if(null!==t)return t.module.editorNames=e.editorNames,void f.gotoState(t.note,t.module,t.note.id)},f.findGroupNote=function(e){for(var t=f.page.columnOne.modules,n=0;n<t.length;n++)for(var o=t[n].summaryItem,a=0;a<o.length;a++)if(o[a].noteId===e.noteId)return{note:o[a],module:t[n]};return null},f.page.currentEditNote={},f.isNoteBeingEdited=function(e){return e.uuid===f.page.currentEditNote.uuid&&null!==e.uuid},e.$on("currentlyEditingNote",function(e,t){f.page.currentEditNote=t}),e.$on("stopEditingNote",function(){f.page.currentEditNote={}}),e.$on("noteSaved",function(e,t){for(var n=!1,o=0;o<f.page.notes.notelist.length;o++)if(t.uuid==f.page.notes.notelist[o].uuid){f.page.notes.notelist[o]=t,n=!0;break}0==n&&f.page.notes.notelist.unshift(t),f.index=f.page.notes.notelist.length}),f.isRegularNote=function(e){return!(e.document||e.rxAnnotation||e.eformData||e.encounterForm||e.invoice||e.ticklerNote||e.cpp)},f.setColor=function(e){return e.eformData?{"border-left-color":"#DFF0D8"}:e.document?{"border-left-color":"#617CB2"}:e.rxAnnotation?{"border-left-color":"#D3D3D3"}:e.encounterForm?{"border-left-color":"#BCAD75"}:e.invoice?{"border-left-color":"##FF7272"}:e.ticklerNote?{"border-left-color":"#FFA96F"}:e.cpp?{"border-left-color":"#9B8166"}:void 0},f.showNoteHeader=function(e){return!f.page.onlyNotes||!(e.document||e.rxAnnotation||e.eformData||e.encounterForm||e.invoice||e.ticklerNote||e.cpp)},f.showNote=function(e){return(!f.page.onlyNotes||!(e.document||e.rxAnnotation||e.eformData||e.encounterForm||e.invoice||e.ticklerNote||e.cpp))&&((!f.page.onlyMine||p.providerNo===e.providerNo)&&!e.deleted)},f.getNoteHeader=function(e){return e.note.trim().split("\n")[0]},f.trackerUrl="",f.getTrackerUrl=function(e){f.trackerUrl="../oscarEncounter/oscarMeasurements/HealthTrackerPage.jspf?template=tracker&demographic_no="+e+"&numEle=4&tracker=slim"},f.toggleList=function(e){e.displaySize>=e.summaryItem.length?e.displaySize=5:e.displaySize=e.summaryItem.length},f.showMoreItems=function(e){return!!angular.isDefined(e.summaryItem)&&0!=e.summaryItem.length},f.isSectionExpanded=function(e){return e.displaySize>5},f.isSectionEmpty=function(e){return e.summaryItem.length<=5},f.isUnsignedEncounterNote=function(e){return!(e.isSigned||e.cpp||e.document||e.ticklerNote||e.eformData)},h.getSummaryHeaders(l.demographicNo,"left").then(function(e){f.page.columnOne.modules=e,b(f.page.columnOne.modules)},function(e){console.log(e),f.error=e}),h.getSummaryHeaders(l.demographicNo,"right").then(function(e){f.page.columnThree.modules=e,b(f.page.columnThree.modules)},function(e){console.log(e),f.error=e});var v={};function b(e){for(var t=0;t<e.length;t++)v[e[t].summaryCode]=e[t],h.getFullSummary(l.demographicNo,e[t].summaryCode).then(function(e){angular.isDefined(e.summaryItem)&&(e.summaryItem instanceof Array?v[e.summaryCode].summaryItem=e.summaryItem:v[e.summaryCode].summaryItem=[e.summaryItem])},function(e){console.log(e)})}f.editGroupedNotes=function(e,t,r){c.open({templateUrl:"src/record/summary/groupNotes.jsp",controller:"Record.Summary.GroupNotesController as groupNotesCtrl",backdrop:"static",windowClass:"notesModal",size:e,resolve:{mod:function(){return t},action:function(){return r},user:function(){return p}}}).result.then(function(e){console.log(e)},function(e){null!=a&&(m.removeEditingNoteFlag(a,p.providerNo),d.cancel(n),n=null,d.cancel(o),o=null,a=null),console.log(e)})},f.gotoState=function(e,t,n){if("add"==e)f.editGroupedNotes("md",t,null);else if("add"==e.action&&"dx_reg"==e.type)f.editGroupedNotes("lg",t,n);else{if("lab"==e.type||"document"==e.type||"rx"==e.type||"allergy"==e.type||"prevention"==e.type||"dsguideline"==e.type)return"rx"==e.type?win="Rx"+l.demographicNo:"allergy"==e.type?win="Allergy"+l.demographicNo:"prevention"==e.type?win="prevention"+l.demographicNo:win="win_item.type_",window.open(e.action,win,"scrollbars=yes, location=no, width=900, height=600",""),!1;"action"==e.action?f.editGroupedNotes("lg",t,n):s.transitionTo(e.action,{demographicNo:l.demographicNo,type:e.type,id:e.id},{location:"replace",notify:!0})}},f.viewEform=function(e){s.transitionTo("record.forms.view",{demographicNo:l.demographicNo,type:"eform",id:e},{location:"replace",notify:!0})},f.viewDocument=function(e){let t=v.incoming.summaryItem,n=null;for(let o=0;o<t.length;o++)if(t[o].id===e){n=t[o];break}null!=n?f.gotoState(n):console.error("item not linked to valid document id:"+e)},f.showPrintModal=function(e,t){c.open({templateUrl:"src/record/print.jsp",controller:"Record.Summary.RecordPrintController as recordPrintCtrl",backdrop:"static",size:"lg",resolve:{mod:function(){return e},action:function(){return t}}}).result.then(function(e){console.log(e)},function(e){console.log(e)})},f.toggleIsSelectedForPrint=function(e){e.isSelected=!e.isSelected}}]);var n=null,o=null,a=null},function(e,t){angular.module("Record.Summary").controller("Record.Summary.RecordPrintController",["$scope","$uibModal","$uibModalInstance","$filter","mod","action","$stateParams","summaryService",function(e,t,n,o,a,r,i,l){var s=this;s.pageOptions={},s.pageOptions.printType={},s.pageOptions.dates={},s.page={},s.page.selectedWarning=!1;for(var u=!1,c=0;c<a.length;c++)a[c].isSelected&&(u=!0,c=a.length);u?(console.log("mod len ",a.length),s.pageOptions.printType="selected"):(console.log("printType = all"),s.pageOptions.printType="all"),s.printToday=function(){s.pageOptions.printType="dates";var e=new Date;s.pageOptions.dates.start=e,s.pageOptions.dates.end=e},s.cancelPrint=function(){n.dismiss("cancel")},s.sendToPhr=function(){var e="demographic_no="+i.demographicNo;if(e+="&module=echart","all"==s.pageOptions.printType)e+="&notes2print=ALL_NOTES";else if("selected"==s.pageOptions.printType){for(var t=[],n=0;n<a.length;n++)a[n].isSelected&&t.push(a[n].noteId);e=e+"&notes2print="+t.join()}else"dates"==s.pageOptions.printType&&(e=(e=(e+="&notes2print=ALL_NOTES")+"&startDate="+s.pageOptions.dates.start.getTime())+"&endDate="+s.pageOptions.dates.end.getTime());s.pageOptions.cpp&&(e+="&printCPP=true"),s.pageOptions.cpp&&(e+="&printRx=true"),s.pageOptions.cpp&&(e+="&printLabs=true"),console.log("QS"+e),"selected"!==s.pageOptions.printType||0!=t.length?(s.page.selectedWarning=!1,window.open("../SendToPhr.do?"+e,"_blank")):s.page.selectedWarning=!0},s.print=function(){for(var e=[],t=0;t<a.length;t++)a[t].isSelected&&e.push(a[t].noteId);if("selected"!==s.pageOptions.printType||0!=e.length){s.page.selectedWarning=!1,s.pageOptions.selectedList=e;var n=encodeURIComponent(JSON.stringify(s.pageOptions));window.open("../ws/rs/recordUX/"+i.demographicNo+"/print?printOps="+n,"_blank")}else s.page.selectedWarning=!0}}])},function(e,t){angular.module("Record.Summary").controller("Record.Summary.GroupNotesController",["$scope","$uibModal","$uibModalInstance","$stateParams","$state","$interval","mod","action","user","noteService","securityService","diseaseRegistryService",function(e,t,n,o,a,r,i,l,s,u,c,d){var p=this;p.page={},p.page.title=i.displayName,p.page.items=i.summaryItem,p.page.quickLists=[],p.page.code=i.summaryCode,p.groupNotesForm={assignedCMIssues:[]},p.groupNotesForm.encounterNote={position:1};var m=new Date;p.groupNotesForm.annotation_attrib="anno"+m.getTime(),c.hasRight("_eChart","u",o.demographicNo).then(function(e){p.page.cannotChange=!e},function(e){console.log(e)}),d.getIssueQuickLists().then(function(e){console.log(e),p.page.quickLists=e},function(e){console.log(e)}),p.addDxItem=function(e){for(var t=0;t<p.groupNotesForm.assignedCMIssues.length;t++)if(p.groupNotesForm.assignedCMIssues[t].issue.code===e.code&&p.groupNotesForm.assignedCMIssues[t].issue.type===e.codingSystem)return;d.findDxIssue(e.code,e.codingSystem).then(function(e){var t={acute:!1,certain:!1,issue:e,issue_id:e.id,major:!1,resolved:!1,unsaved:!0};p.groupNotesForm.assignedCMIssues.push(t)},function(e){console.log(e)})},p.checkAction=function(e){p.page.cannotChange&&(e.preventDefault(),e.stopPropagation())},displayIssueId=function(e){u.getIssueId(e).then(function(e){p.page.issueId=e.id},function(e){console.log(e)})},displayIssueId(p.page.code),displayGroupNote=function(e,t){if(null!=p.page.items[t].noteId)u.getIssueNote(p.page.items[t].noteId).then(function(e){p.groupNotesForm.encounterNote=e.encounterNote,p.groupNotesForm.encounterNote.editorNames=i.editorNames,p.groupNotesForm.groupNoteExt=e.groupNoteExt,p.groupNotesForm.assignedCMIssues=e.assignedCMIssues,p.groupNotesForm.assignedCMIssues=[],e.assignedCMIssues instanceof Array?p.groupNotesForm.assignedCMIssues=e.assignedCMIssues:null!=e.assignedCMIssues&&p.groupNotesForm.assignedCMIssues.push(e.assignedCMIssues),l=t,p.setAvailablePositions(),p.removeEditingNoteFlag(),p.groupNotesForm.encounterNote.position<1&&(p.groupNotesForm.encounterNote.position=1)},function(e){console.log(e)});else if("dx_reg"===p.page.items[t].type){p.groupNotesForm.assignedCMIssues=[];var n=p.page.items[t].extra;d.findDxIssue(n.code,n.codingSystem).then(function(e){var n={acute:!1,certain:!1,issue:e,issue_id:e.issueId,major:!1,resolved:!1,unsaved:!0};console.log("find like issue ",n,e),p.groupNotesForm.assignedCMIssues.push(n),p.groupNotesForm.encounterNote={},p.groupNotesForm.groupNoteExt={},p.groupNotesForm.encounterNote={position:1},l=t},function(e){console.log(e)})}},null!=l&&displayGroupNote(p.page.items,l),p.setAvailablePositions=function(){if(p.availablePositions=[],null==p.page.items||0==p.page.items.length)p.availablePositions.push(1);else{var e=0;for(e=0;e<p.page.items.length;e++)p.availablePositions.push(e+1);null==l&&p.availablePositions.push(e+1)}},p.setAvailablePositions(),p.changeNote=function(e,t){return displayGroupNote(e,t)},p.saveGroupNotes=function(){null==p.groupNotesForm.encounterNote.noteId&&(p.groupNotesForm.encounterNote.noteId=0),p.groupNotesForm.encounterNote.cpp=!0,p.groupNotesForm.encounterNote.editable=!0,p.groupNotesForm.encounterNote.isSigned=!0,p.groupNotesForm.encounterNote.observationDate=new Date,p.groupNotesForm.encounterNote.appointmentNo=o.appointmentNo,p.groupNotesForm.encounterNote.encounterType="",p.groupNotesForm.encounterNote.encounterTime="",p.groupNotesForm.encounterNote.assignedIssues=p.groupNotesForm.assignedCMIssues,p.groupNotesForm.encounterNote.summaryCode=p.page.code,u.saveIssueNote(o.demographicNo,p.groupNotesForm).then(function(e){n.dismiss("cancel"),a.transitionTo(a.current,o,{reload:!0,inherit:!1,notify:!0})},function(e){console.log(e)})},p.removeGroupNoteIssue=function(e){console.log("removing issue"),e.unchecked=!0;for(var t=[],n=0;n<p.groupNotesForm.assignedCMIssues.length;n++)p.groupNotesForm.assignedCMIssues[n].issue_id!=e.issue_id&&t.push(p.groupNotesForm.assignedCMIssues[n]);p.groupNotesForm.assignedCMIssues=t,console.log("NEW LIST: ",t)},p.doSetEditingNoteFlag=function(){u.setEditingNoteFlag(editingNoteId,s.providerNo).then(function(e){e.success||("Parameter error"==e.message?alert("Parameter Error: noteUUID["+editingNoteId+"] userId["+s.providerNo+"]"):alert("Warning! Another user is editing this note now."))},function(e){console.log(e)})},p.setEditingNoteFlag=function(){null!=p.groupNotesForm.encounterNote.uuid&&(p.removeEditingNoteFlag(),editingNoteId=p.groupNotesForm.encounterNote.uuid,itvSet=r(p.doSetEditingNoteFlag(),3e4),itvCheck=r(function(){u.checkEditNoteNew(editingNoteId,s.providerNo).then(function(e){e.success||(alert("Warning! Another user tries to edit this note. Your update may be replaced by later revision(s)."),r.cancel(itvCheck),itvCheck=null)},function(e){console.log(e)})},1e4))},p.removeEditingNoteFlag=function(){null!=editingNoteId&&(u.removeEditingNoteFlag(editingNoteId,s.providerNo),r.cancel(itvSet),r.cancel(itvCheck),itvSet=null,itvCheck=null,editingNoteId=null)},p.removeIssue=function(e){e.unchecked=!0},p.restoreIssue=function(e){e.unchecked=!1},p.archiveGroupNotes=function(){p.groupNotesForm.encounterNote.archived=!0,p.saveGroupNotes()},p.cancel=function(){n.dismiss("cancel")},p.openRevisionHistory=function(e){console.log(p.groupNotesForm);var t=Math.round(1e3*Math.random());win="win"+t;var n="../CaseManagementEntry.do?method=notehistory&noteId="+e.noteId;window.open(n,win,"scrollbars=yes, location=no, width=647, height=600","")},p.searchIssues=function(e){var t={term:e};return u.searchIssues(t,0,100).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({issueId:e.content[n].id,code:e.content[n].description+"("+e.content[n].code+")"});return e.total,e.content.length,t},function(e){console.log(e)})},p.assignIssue=function(e,t,n){for(var o=0;o<p.groupNotesForm.assignedCMIssues.length;o++)if(p.groupNotesForm.assignedCMIssues[o].issue.id==t)return;u.getIssue(t).then(function(t){var n={acute:!1,certain:!1,issue:t,issue_id:e.issueId,major:!1,resolved:!1,unsaved:!0};p.groupNotesForm.assignedCMIssues.push(n)},function(e){console.log(e)})},p.isSelected=function(e){if(e.id==l)return"group-note-selected"},p.addToDxRegistry=function(e){d.addToDxRegistry(o.demographicNo,e).then(function(e){console.log(e)},function(e){console.log(e)})}}])},function(e,t){angular.module("Record.Summary").controller("Record.Summary.SaveWarningController",["$rootScope","$scope","$uibModal","$uibModalInstance","saveSignNote","cancelNoteEdit",function(e,t,n,o,a,r){this.cancel=function(){o.dismiss("cancel")},this.save=function(){angular.isFunction(a)&&a(),o.close(!0)},this.clearChanges=function(){angular.isFunction(r)&&r(),o.close(!0)}}])},function(e,t,n){"use strict";angular.module("Record.Forms",["Common","Common.Services"])},function(e,t,n){(function(e,t){angular.module("Record.Forms").controller("Record.Forms.FormController",["$scope","$http","$location","$stateParams","$state","demographicService","demo","formService","user","securityService",function(n,o,a,r,i,l,s,u,c,d){var p=this;console.log("form ctrl ",r,i),p.demographicNo=r.demographicNo,p.providerNo=c.providerNo,p.page={},p.page.currentFormList=[],p.page.currentForm={},p.page.currentlistId=r.formListId,console.log("What is the state "+i.params.type+" : "+angular.isUndefined(i.params.type)+" id "+i.params.id,i),d.hasRights({items:[{objectName:"_admin",privilege:"w"},{objectName:"_admin.eform",privilege:"w"}]}).then(function(e){p.adminAccess=e.content[0],p.adminEformAccess=e.content[1],null!=e.content&&2==e.content.length?(p.adminAccess||p.adminEformAccess)&&(p.hasAdminAccess=!0):alert("failed to load rights")},function(e){console.log(e)}),p.page.formlists=[{id:0,label:"Completed"},{id:1,label:"Library"}],p.page.formlists.forEach(function(e,t){console.log("What is the item ",e),u.getAllFormsByHeading(r.demographicNo,e.label).then(function(e){p.page.currentFormList[t]=Juno.Common.Util.toArray(e.list)},function(e){console.log(e)})}),p.page.encounterFormlist=[],p.page.formGroups=[],p.getFormGroups=function(){u.getFormGroups().then(function(e){e instanceof Array?p.page.formGroups=e:p.page.formGroups.push(e);for(var t=0;t<p.page.formGroups.length;t++)p.page.formGroups[t].summaryItem instanceof Array||(p.page.formGroups[t].summaryItem=[p.page.formGroups[t].summaryItem])},function(e){console.log(e)})},p.getFormGroups(),p.page.formOptions=[],p.favouriteGroup=null,getFavouriteFormGroup=function(){u.getFavouriteFormGroup().then(function(e){p.favouriteGroup=e,p.favouriteGroup.summaryItem instanceof Array||(p.favouriteGroup.summaryItem=[p.favouriteGroup.summaryItem])},function(e){console.log(e)})},getFavouriteFormGroup(),u.getFormOptions(p.demographicNo).then(function(e){console.log("data",e),e.items instanceof Array?p.page.formOptions=e.items:p.page.formOptions.push(e.items),console.log("form options",p.page.formOptions)},function(e){console.log(e)}),u.getCompletedEncounterForms(r.demographicNo).then(function(e){p.page.encounterFormlist[0]=e},function(e){console.log(e)}),u.getSelectedEncounterForms().then(function(e){p.page.encounterFormlist[1]=e},function(e){console.log(e)}),p.changeTo=function(e){p.page.currentlistId=e,console.log("set currentlist to "+e),0==e&&u.getAllFormsByHeading(r.demographicNo,"Completed").then(function(e){console.debug("whats the index0",e),p.page.currentFormList[0]=Juno.Common.Util.toArray(e.list)},function(e){console.log(e)})},p.viewFormState=function(n,o){for(;document.getElementById("formInViewFrame").hasChildNodes();)document.getElementById("formInViewFrame").removeChild(document.getElementById("formInViewFrame").firstChild);var l=a.search().name,s={demographicNo:r.demographicNo,type:"eform"===n.type?"eform":"form",id:n.id||n.formId};"eform"===n.type&&n.id||"form"===n.type&&n.formId?(s.name="form"===n.type?n.name||l:"",i.go("record.forms.view",s)):"eform"===n.type?i.go("record.forms.add",s):i.go("record.forms"),void 0===o&&(o=1);var u="";"eform"===n.type?u=Juno.Common.Util.isUndefinedOrNull(n.id)?"../eform/efmformadd_data.jsp?fid="+n.formId+"&demographic_no="+r.demographicNo:"../eform/efmshowform_data.jsp?fdid="+n.id:u=angular.isDefined(n.formId)?"../form/forwardshortcutname.jsp?formname="+(n.name||l)+"&demographic_no="+r.demographicNo+"&formId="+n.formId:n.formValue+r.demographicNo+"&formId=0&provNo="+c.providerNo+"&parentAjaxId=forms";if(1===o)e("html, body").animate({scrollTop:0},"slow");else if(2===o){var d=Math.round(1e3*Math.random());return win="win"+d,void window.open(u,win,"scrollbars=yes, location=no, width=900, height=600","")}p.page.currentForm=n;var m=new t.Parent("formInViewFrame",u,{});p.pymParent=m,e("iframe").load(function(){var e=Math.max(document.getElementById("formInViewFrame").firstChild.contentWindow.document.body.scrollHeight,document.getElementById("formInViewFrame").firstChild.contentWindow.document.body.offsetHeight)+30+"px";document.getElementById("formInViewFrame").firstChild.style.height=e})},p.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},p.currentEformGroup={},p.setCurrentEFormGroup=function(e){p.currentEformGroup=e},p.openFormFromGroups=function(e){console.log("group item",e),e.formId=e.id,delete e.id,p.viewFormState(e,2)},p.formOption=function(e){var t=!1;if("send2PHR"==e.extra){for(var n="",o=0;o<p.page.currentFormList[p.page.currentlistId].length;o++)p.page.currentFormList[p.page.currentlistId][o].isChecked&&(n=n+"&sendToPhr="+p.page.currentFormList[p.page.currentlistId][o].id,t=!0);if(t){var a=Math.round(1e3*Math.random());win="win"+a;var r="../eform/efmpatientformlistSendPhrAction.jsp?clientId="+p.demographicNo+n;window.open(r,win,"scrollbars=yes, location=no, width=900, height=600","")}}t||alert("No Documents Selected")},p.getListClass=function(e){if(e===p.page.currentlistId)return"active"},p.getGroupListClass=function(e){if(e===p.currentEformGroup)return"active"},p.getActiveFormClass=function(e){return e.type!==p.page.currentForm.type||e.id!==p.page.currentForm.id||Juno.Common.Util.isUndefinedOrNull(e.id)?e.type===p.page.currentForm.type&&e.formId===p.page.currentForm.formId&&Juno.Common.Util.isUndefinedOrNull(e.id)?"active":void 0:"active"};var m=i.current.name;if("record.forms.view"===m||"record.forms.add"===m){var h={};h.type=i.params.type,"record.forms.view"===m&&"eform"===h.type?h.id=i.params.id:h.formId=i.params.id,p.viewFormState(h),p.changeTo("record.forms.view"===m?0:1)}p.keypress=function(e){if(1==e.altKey&&38==e.keyCode)console.log("up",e),console.log(p.page.currentFormList[p.page.currentlistId].indexOf(p.page.currentForm)),(t=p.page.currentFormList[p.page.currentlistId].indexOf(p.page.currentForm))>0&&(p.page.currentForm=p.page.currentFormList[p.page.currentlistId][t-1],p.viewFormState(p.page.currentForm));else if(1==e.altKey&&40==e.keyCode){console.log("down",e);var t=p.page.currentFormList[p.page.currentlistId].indexOf(p.page.currentForm);console.log(t,p.page.currentFormList[p.page.currentlistId].length),t<=p.page.currentFormList[p.page.currentlistId].length&&(p.page.currentForm=p.page.currentFormList[p.page.currentlistId][t+1],p.viewFormState(p.page.currentForm))}else console.log("keypress",e.altKey,e.key,e)}}])}).call(this,n(3),n(10))},function(e,t,n){"use strict";angular.module("Record.Details",["Common","Common.Services"])},function(e,t){function n(e,t,n,o,a){if(null==t)return a;var r=n[e];return null!=r&&null!=o[r]?o[r].value!=t&&a.push({id:o[r].id,key:e,value:t,hidden:o[r].hidden}):a.push({key:e,value:t}),a}function o(e,t,n){return i(e,t,n)?"":r(e,t,n)?e+"-"+t+"-"+n:null}angular.module("Record.Details").controller("Record.Details.DetailsController",["$scope","$http","$location","$stateParams","$state","$window","demographicService","demographicsService","providersService","patientDetailStatusService","securityService","staticDataService","referralDoctorsService","user",function(e,t,m,h,g,f,v,b,S,C,N,y,A,D){var w=this;w.page={};var _,I,P,T,R,U,k,M,E,L,x,F,O,H,j,J,$={},B={},G={},K="Check to set preferred contact number",Y="Preferred contact number";w.properties=e.$parent.recordCtrl.properties,w.init=function(){v.getDemographic(h.demographicNo).then(function(e){if(w.page.demo=e,w.initDemographicVars(),w.checkAccess(),S.getBySecurityRole("doctor").then(function(e){w.page.doctors=e}),S.getBySecurityRole("nurse").then(function(e){w.page.nurses=e}),S.getBySecurityRole("midwife").then(function(e){w.page.midwives=e}),v.getDemographicContacts(w.page.demo.demographicNo,"personal").then(function(e){w.page.demoContacts=d(e)}),v.getDemographicContacts(w.page.demo.demographicNo,"professional").then(function(e){w.page.demoContactPros=d(e)}),null!=w.page.demo.notes&&(w.page.demo.scrNotes=w.page.demo.notes,/^<unotes>[\s\S]*/.test(w.page.demo.scrNotes)&&(w.page.demo.scrNotes=w.page.demo.scrNotes.substring("<unotes>".length)),/[\s\S]*<\/unotes>$/.test(w.page.demo.scrNotes)&&(w.page.demo.scrNotes=w.page.demo.scrNotes.substring(0,w.page.demo.scrNotes.lastIndexOf("</unotes>")))),null!=w.page.demo.familyDoctor){var t=w.formatDocOutput(w.page.demo.familyDoctor);w.page.demo.scrReferralDocNo=t.number,w.page.demo.scrReferralDoc=t.name}if(null!=w.page.demo.familyDoctor2){var n=w.formatDocOutput(w.page.demo.familyDoctor2);w.page.demo.scrFamilyDocNo=n.number,w.page.demo.scrFamilyDoc=n.name}if(null!=w.page.demo.extras){w.page.demo.extras=p(w.page.demo.extras);for(var o=0;o<w.page.demo.extras.length;o++)"demo_cell"==w.page.demo.extras[o].key?w.page.demo.scrDemoCell=w.page.demo.extras[o].value:"aboriginal"==w.page.demo.extras[o].key?w.page.demo.scrAboriginal=w.page.demo.extras[o].value:"hPhoneExt"==w.page.demo.extras[o].key?w.page.demo.scrHPhoneExt=w.page.demo.extras[o].value:"wPhoneExt"==w.page.demo.extras[o].key?w.page.demo.scrWPhoneExt=w.page.demo.extras[o].value:"cytolNum"==w.page.demo.extras[o].key?w.page.demo.scrCytolNum=w.page.demo.extras[o].value:"phoneComment"==w.page.demo.extras[o].key?w.page.demo.scrPhoneComment=w.page.demo.extras[o].value:"paper_chart_archived"==w.page.demo.extras[o].key?w.page.demo.scrPaperChartArchived=w.page.demo.extras[o].value:"paper_chart_archived_date"==w.page.demo.extras[o].key?w.page.demo.scrPaperChartArchivedDate=w.page.demo.extras[o].value:"usSigned"==w.page.demo.extras[o].key?w.page.demo.scrUsSigned=w.page.demo.extras[o].value:"privacyConsent"==w.page.demo.extras[o].key?w.page.demo.scrPrivacyConsent=w.page.demo.extras[o].value:"informedConsent"==w.page.demo.extras[o].key?w.page.demo.scrInformedConsent=w.page.demo.extras[o].value:"securityQuestion1"==w.page.demo.extras[o].key?w.page.demo.scrSecurityQuestion1=w.page.demo.extras[o].value:"securityAnswer1"==w.page.demo.extras[o].key?w.page.demo.scrSecurityAnswer1=w.page.demo.extras[o].value:"rxInteractionWarningLevel"==w.page.demo.extras[o].key&&(w.page.demo.scrRxInteractionLevel=w.page.demo.extras[o].value),$[w.page.demo.extras[o].key]=o}if(w.page.demo.scrCellPhone=c(w.page.demo.scrDemoCell),w.page.demo.scrHomePhone=c(w.page.demo.phone),w.page.demo.scrWorkPhone=c(w.page.demo.alternativePhone),null!=w.page.demo.waitingListNames&&null!=w.page.demo.waitingListNames.id){var a={};a.id=w.page.demo.waitingListNames.id,a.name=w.page.demo.waitingListNames.name,a.groupNo=w.page.demo.waitingListNames.groupNo,a.providerNo=w.page.demo.waitingListNames.providerNo,a.createDate=w.page.demo.waitingListNames.createDate,a.isHistory=w.page.demo.waitingListNames.isHistory,w.page.demo.waitingListNames=[a]}w.page.cellPhonePreferredMsg=K,w.page.homePhonePreferredMsg=K,w.page.workPhonePreferredMsg=K,u(w.page.demo.scrDemoCell)?(w.page.demo.scrPreferredPhone="C",w.page.preferredPhoneNumber=w.page.demo.scrCellPhone,w.page.cellPhonePreferredMsg=Y,w.page.cellPhonePreferredColor="#ffff99"):u(w.page.demo.phone)?(w.page.demo.scrPreferredPhone="H",w.page.preferredPhoneNumber=w.page.demo.scrHomePhone,w.page.homePhonePreferredMsg=Y,w.page.homePhonePreferredColor="#ffff99"):u(w.page.demo.alternativePhone)?(w.page.demo.scrPreferredPhone="W",w.page.preferredPhoneNumber=w.page.demo.scrWorkPhone,w.page.workPhonePreferredMsg=Y,w.page.workPhonePreferredColor="#ffff99"):w.page.preferredPhoneNumber=w.page.demo.scrHomePhone,w.page.dataChanged=!1,w.page.genders=y.getGenders(),w.page.titles=y.getTitles(),w.page.provinces=y.getProvinces(),w.page.countries=y.getCountries(),w.page.engFre=y.getEngFre(),w.page.spokenlangs=y.getSpokenLanguages(),w.page.rosterTermReasons=y.getRosterTerminationReasons(),w.page.securityQuestions=y.getSecurityQuestions(),w.page.rxInteractionLevels=y.getRxInteractionLevels(),C.getStatus(h.demographicNo).then(function(e){w.page.macPHRLoggedIn=e.macPHRLoggedIn,w.page.macPHRIdsSet=e.macPHRIdsSet,w.page.macPHRVerificationLevel=e.macPHRVerificationLevel,w.page.integratorEnabled=e.integratorEnabled,w.page.integratorOffline=e.integratorOffline,w.page.integratorAllSynced=e.integratorAllSynced,w.page.conformanceFeaturesEnabled=e.conformanceFeaturesEnabled,w.page.workflowEnhance=e.workflowEnhance,w.page.billregion=e.billregion,w.page.defaultView=e.defaultView,w.page.hospitalView=e.hospitalView,w.page.integratorEnabled&&(w.page.integratorOffline?(w.page.integratorStatusColor="#ff5500",w.page.integratorStatusMsg="NOTE: Integrator is not available at this time"):w.page.integratorAllSynced||(w.page.integratorStatusColor="#ff5500",w.page.integratorStatusMsg="NOTE: Integrated Community is not synced")),w.page.billingHistoryLabel="Invoice List","ON"==w.page.billregion&&(w.page.billingHistoryLabel="Billing History")},function(e){console.log(e)}),b.getStatusList("roster").then(function(e){w.page.rosterStatusList=p(e),w.page.rosterStatusList.unshift({value:"FS",label:"FS - fee for service"}),w.page.rosterStatusList.unshift({value:"TE",label:"TE - terminated"}),w.page.rosterStatusList.unshift({value:"NR",label:"NR - not rostered"}),w.page.rosterStatusList.unshift({value:"RO",label:"RO - rostered"})}),b.getStatusList("patient").then(function(e){w.page.patientStatusList=p(e),w.page.patientStatusList.unshift({value:"FI",label:"FI - Fired"}),w.page.patientStatusList.unshift({value:"MO",label:"MO - Moved"}),w.page.patientStatusList.unshift({value:"DE",label:"DE - Deceased"}),w.page.patientStatusList.unshift({value:"IN",label:"IN - Inactive"}),w.page.patientStatusList.unshift({value:"AC",label:"AC - Active"})}),w.formatDate("DobM"),w.formatDate("DobD"),w.page.demo.age=Juno.Common.Util.calcAge(w.page.demo.dobYear,w.page.demo.dobMonth,w.page.demo.dobDay),w.formatLastName(),w.formatFirstName(),w.setSwipeReady(),w.validateHCSave()},function(e){alert("Error loading demographic: ",e)})},w.initDemographicVars=function(){G.C=w.page.demo.scrCellPhone,G.H=w.page.demo.scrHomePhone,G.W=w.page.demo.scrWorkPhone,G.HX=w.page.demo.scrHPhoneExt,G.WX=w.page.demo.scrWPhoneExt,_=w.page.demo.hin,I=w.page.demo.ver,P=w.page.demo.chartNo,T=w.page.demo.scrCytolNum,R=w.page.demo.scrReferralDocNo,k=w.page.demo.sin,M=w.page.demo.effDate,E=w.page.demo.hcRenewDate,L=w.page.demo.rosterDate,x=w.page.demo.rosterTerminationDate,F=w.page.demo.patientStatusDate,O=w.page.demo.dateJoined,H=w.page.demo.endDate,j=w.page.demo.onWaitingListSinceDate,J=w.page.demo.scrPaperChartArchivedDate},w.checkAccess=function(){N.hasRight("_demographic","r",w.page.demo.demographicNo).then(function(e){w.page.canRead=e},function(e){console.log(e)}),N.hasRight("_demographic","u",w.page.demo.demographicNo).then(function(e){w.page.cannotChange=!e},function(e){console.log(e)})},w.isNaN=function(e){return isNaN(e)},w.checkAction=function(e){w.page.cannotChange&&(e.preventDefault(),e.stopPropagation(),w.setSwipeReady())},e.$watch(function(){return w.page.demo},function(e,t){e!==t&&angular.isDefined(t)&&angular.isDefined(e)&&(w.page.dataChanged=!0)},!0),f.onbeforeunload=function(){if(!0===w.page.dataChanged&&"record.details"===g.current.name)return"You have unsaved patient data. Are you sure you want to leave?"},e.$on("$destroy",function(){delete f.onbeforeunload}),e.$on("$stateChangeStart",function(e){!0===w.page.dataChanged&&(confirm("You have unsaved patient data. Are you sure you want to leave?")?v.getDemographic(h.demographicNo).then(function(e){},function(e){alert("Error loading demographic: ",e)}):e.preventDefault())}),w.formatLastName=function(){w.page.demo.lastName=w.page.demo.lastName.toUpperCase()},w.formatFirstName=function(){w.page.demo.firstName=w.page.demo.firstName.toUpperCase()},w.setSwipeReady=function(e){"off"==e?(w.page.readyForSwipe="",w.page.swipecardMsg="Click for Card Swipe"):"done"==e?w.page.readyForSwipe="btn-primary":(w.page.readyForSwipe="btn-success",w.page.swipecardMsg="Ready for Card Swipe",w.page.swipecard="")},w.healthCardHandler=function(e){if(13==e){var t=w.page.swipecard;if(w.page.swipecard="","%E?"==t.substring(0,3))alert("Error reading card");else{if("610054"==t.substring(2,8)){B.issuer="ON",B.hin=t.substring(8,18);var n=t.indexOf("^")+1,o=t.indexOf("^",n);B.fullName=t.substring(n,o),B.lastName=B.fullName.split("/")[0],B.firstName=B.fullName.split("/")[1].trim(),B.sex=t.substring(o+8,o+9),B.dob=t.substring(o+9,o+17),B.hinExp=t.substring(o+1,o+5)+B.dob.substring(6,8),B.hinVer=t.substring(o+17,o+19),B.firstNameShort=t.substring(o+19,o+24),B.issueDate=t.substring(o+24,o+30),B.lang=t.substring(o+30,o+32),l(B.dob)||(B.dob=null,B.hinExp=null),l(B.hinExp)||(B.hinExp=null),l(B.issueDate)||(B.issueDate=null),w.setSwipeReady("done"),w.healthCardUpdateDemographics()}else alert("Not Ontario Health Card");w.validateHC()}}},w.healthCardUpdateDemographics=function(){var e=new Date;w.page.demo.hcType!=B.issuer&&(w.page.demo.hcType=B.issuer,w.page.hcTypeColor="#ffff99"),w.page.demo.lastName!=B.lastName&&(w.page.demo.lastName=B.lastName,w.page.lastNameColor="#ffff99"),w.page.demo.firstName!=B.firstName&&(w.page.demo.firstName=B.firstName,w.page.firstNameColor="#ffff99"),l(B.hin)&&w.page.demo.hin!=B.hin&&(w.page.demo.hin=B.hin,w.page.hinColor="#ffff99"),w.page.demo.ver!=B.hinVer&&(w.page.demo.ver=B.hinVer,w.page.verColor="#ffff99");var t=1==B.sex?"M":2==B.sex?"F":null;null!=t&&w.page.demo.sex!=t&&(w.page.demo.sex=t,w.page.sexColor="#ffff99");var n={};if(null!=B.dob&&(n.year=B.dob.substring(0,4),n.month=B.dob.substring(4,6),n.day=B.dob.substring(6),w.page.demo.dobYear!=n.year&&(w.page.demo.dobYear=n.year,w.page.dobYearColor="#ffff99"),w.page.demo.dobMonth!=n.month&&(w.page.demo.dobMonth=n.month,w.page.dobMonthColor="#ffff99"),w.page.demo.dobDay!=n.day&&(w.page.demo.dobDay=n.day,w.page.dobDayColor="#ffff99")),null!=B.issueDate){var a="20"+B.issueDate.substring(0,2)+"-"+B.issueDate.substring(2,4)+"-"+B.issueDate.substring(4);w.page.demo.effDate!=a&&(w.page.demo.effDate=a,w.page.effDateColor="#ffff99")}if(null!=B.hinExp){a="20"+B.hinExp.substring(0,2)+"-"+B.hinExp.substring(2,4)+"-"+B.hinExp.substring(4);w.page.demo.hcRenewDate!=a&&(w.page.demo.hcRenewDate=a,w.page.hcRenewDateColor="#ffff99");var r=o("20"+B.hinExp.substring(0,2),B.hinExp.substring(2,4),B.hinExp.substring(4));null!=r&&e>r&&(alert("This health card has expired!"),w.page.hcRenewDateColor="#ffff99")}},w.validateHC=function(){"ON"==w.page.demo.hcType&&null!=w.page.demo.hin&&""!=w.page.demo.hin&&(null==w.page.demo.ver&&(w.page.demo.ver=""),C.validateHC(w.page.demo.hin,w.page.demo.ver).then(function(e){null==e.valid?(w.page.HCValidation="n/a",w.page.swipecardMsg="Done Health Card Action"):(w.page.HCValidation=e.valid?"valid":"invalid",w.page.swipecardMsg=e.responseDescription+" ("+e.responseCode+")")},function(e){console.log(e)}))},w.checkHin=function(){"ON"==w.page.demo.hcType&&null!=w.page.demo.hin&&""!=w.page.demo.hin&&(w.page.demo.hin.length>10&&(w.page.demo.hin=_),l(w.page.demo.hin)||(w.page.demo.hin=_)),_=w.page.demo.hin,w.page.HCValidation=null},w.checkHinVer=function(){"ON"==w.page.demo.hcType&&(w.page.demo.ver.length>2&&(w.page.demo.ver=I),/^[a-zA-Z()]*$/.test(w.page.demo.ver)||(w.page.demo.ver=I),w.page.demo.ver=w.page.demo.ver.toUpperCase()),I=w.page.demo.ver},w.checkDate=function(e){"DobY"==e?w.page.demo.dobYear=function(e){for(var t=0;t<e.length;t++)l(e.charAt(t))||(e=e.substring(0,t)+e.substring(t+1));""!=e&&((e=parseInt(e).toString()).length>4&&(e=e.substring(0,4)),0==e&&(e=""));return e}(w.page.demo.dobYear):"DobM"==e?w.page.demo.dobMonth=function(e){for(var t=0;t<e.length;t++)l(e.charAt(t))||(e=e.substring(0,t)+e.substring(t+1));""!=e&&(e.length>2&&(e=e.substring(0,2)),e>12&&(e=e.substring(0,1)));return e}(w.page.demo.dobMonth):"DobD"==e&&(w.page.demo.dobDay=function(e,t,n){for(var o=0;o<e.length;o++)l(e.charAt(o))||(e=e.substring(0,o)+e.substring(o+1));""!=e&&(e.length>2&&(e=e.substring(0,2)),null==t?e>31&&(e=e.substring(0,1)):null==n?e>a[t-1]&&e.substring(0,1):r(n,t,e)||(e=e.substring(0,1)));return e}(w.page.demo.dobDay,w.page.demo.dobMonth,w.page.demo.dobYear)),console.log("MONTH: ",w.page.demo.dobMonth),w.page.demo.age=Juno.Common.Util.calcAge(w.page.demo.dobYear,w.page.demo.dobMonth,w.page.demo.dobDay)},w.formatDate=function(e){"DobM"==e&&null!=w.page.demo.dobMonth&&1==String(w.page.demo.dobMonth).length?w.page.demo.dobMonth="0"+w.page.demo.dobMonth:"DobD"==e&&null!=w.page.demo.dobDay&&1==String(w.page.demo.dobDay).length&&(w.page.demo.dobDay="0"+w.page.demo.dobDay)},w.checkPatientStatus=function(){var e=new Date;if("AC"==w.page.demo.patientStatus&&null!=w.page.demo.endDate&&""!=w.page.demo.endDate&&function(e){if(null==e||""==e)return!0;var t=e.toString().split("-");if(3!=t.length)return!1;var n=new Date(t[0],t[1]-1,t[2]);return!isNaN(n.getTime())&&n.getFullYear()==t[0]&&n.getMonth()==t[1]-1&&n.getDate()==t[2]}(w.page.demo.endDate)){var t=w.page.demo.endDate.split("-");if(e>new Date(t[0],t[1]-1,t[2]))return alert("Patient Status cannot be Active after End Date."),!1}return!0},w.isPostalComplete=function(){var e=w.page.demo.address.province;return null===w.page.demo.address.postal||null===e||"OT"===e||0===e.indexOf("US")||(!!w.isPostalValid()||(w.resetEditState(),!1))},w.isPostalValid=function(){var e=w.page.demo.address.postal.replace(/\s/g,"");return 0===e.length?(w.page.demo.address.postal=null,!0):new RegExp(/^[A-Za-z]\d[A-Za-z]\d[A-Za-z]\d$/).test(e)?(w.page.demo.address.postal=e.substring(0,3)+" "+e.substring(3),!0):(alert("Invalid/Incomplete Postal Code"),!1)},w.checkEmail=function(){if(null==w.page.demo.email||""==w.page.demo.email)return!0;var e=/^[^@]+@[^@]+$/;if(e.test(w.page.demo.email)){var t=w.page.demo.email.split("@");if((e=/^[!#%&'=`~\{}\-\$\*\+\/\?\^\|\w]+(\.[!#%&'=`~\{}\-\$\*\+\/\?\^\|\w]+)*$/).test(t[0])&&(e=/^[^\W_]+(([^\W_]|-)+[^\W_]+)*(\.[^\W_]+(([^\W_]|-)+[^\W_]+)*)*\.[^\W_]{2,3}$/).test(t[1]))return!0}return alert("Invalid email address"),!1},w.checkChartNo=function(){null!=w.page.demo.chartNo&&""!=w.page.demo.chartNo&&w.page.demo.chartNo.length>10?w.page.demo.chartNo=P:P=w.page.demo.chartNo},w.checkCytoNum=function(){null!=w.page.demo.scrCytolNum&&""!=w.page.demo.scrCytolNum?l(w.page.demo.scrCytolNum)?T=w.page.demo.scrCytolNum:w.page.demo.scrCytolNum=T:T=w.page.demo.scrCytolNum},w.checkReferralDocNo=function(){w.validateDocNo(w.page.demo.scrReferralDocNo,!0)?R=w.page.demo.scrReferralDocNo:w.page.demo.scrReferralDocNo=R},w.checkFamilyDocNo=function(){w.validateDocNo(w.page.demo.scrFamilyDocNo,!0)?U=w.page.demo.scrFamilyDocNo:w.page.demo.scrFamilyDocNo=U},w.validateDocNo=function(e,t){return!!(null==e||""===e||l(e)&&e.length<10)||(t||alert("Invalid Doctor Number"),!1)},w.checkSin=function(){if(null!=w.page.demo.sin&&""!=w.page.demo.sin){var e=w.page.demo.sin.replace(/\s/g,"");!l(e)||e.length>9?w.page.demo.sin=k:(e.length>6?w.page.demo.sin=e.substring(0,3)+" "+e.substring(3,6)+" "+e.substring(6):e.length>3&&(w.page.demo.sin=e.substring(0,3)+" "+e.substring(3)),k=w.page.demo.sin)}else k=w.page.demo.sin},w.validateSin=function(){if(null==w.page.demo.sin||""==w.page.demo.sin)return!0;var e=w.page.demo.sin.replace(/\s/g,"");if(l(e)&&9==e.length){for(var t=0,n=0;n<e.length;n++){var o=Number(e.charAt(n))*(n%2+1);t+=o%10+Math.floor(o/10)}if(t%10==0)return!0}return alert("Invalid SIN #"),!1},w.preventManualEffDate=function(){null==w.page.demo.effDate?w.page.demo.effDate=M:M=w.page.demo.effDate},w.preventManualHcRenewDate=function(){null==w.page.demo.hcRenewDate?w.page.demo.hcRenewDate=E:E=w.page.demo.hcRenewDate},w.preventManualRosterDate=function(){null==w.page.demo.rosterDate?w.page.demo.rosterDate=L:L=w.page.demo.rosterDate},w.preventManualRosterTerminationDate=function(){null==w.page.demo.rosterTerminationDate?w.page.demo.rosterTerminationDate=x:x=w.page.demo.rosterTerminationDate},w.preventManualPatientStatusDate=function(){null==w.page.demo.patientStatusDate?w.page.demo.patientStatusDate=F:F=w.page.demo.patientStatusDate},w.preventManualDateJoined=function(){null==w.page.demo.dateJoined?w.page.demo.dateJoined=O:O=w.page.demo.dateJoined},w.preventManualEndDate=function(){null==w.page.demo.endDate?w.page.demo.endDate=H:H=w.page.demo.endDate},w.preventManualOnWaitingListSinceDate=function(){null==w.page.demo.onWaitingListSinceDate?w.page.demo.onWaitingListSinceDate=j:j=w.page.demo.onWaitingListSinceDate},w.preventManualPaperChartArchivedDate=function(){null==w.page.demo.scrPaperChartArchivedDate?w.page.demo.scrPaperChartArchivedDate=J:J=w.page.demo.scrPaperChartArchivedDate},w.isRosterTerminated=function(){return null!==w.page.demo&&void 0!==w.page.demo?"TE"===w.page.demo.rosterStatus:null},w.showReferralDocList=function(){w.page.showReferralDocList=!w.page.showReferralDocList},w.searchReferralDocsName=function(e){return w.searchReferralDocs(e,null)},w.searchReferralDocsRefNo=function(e){return w.searchReferralDocs(null,e)},w.searchReferralDocs=function(e,t){return A.searchReferralDoctors(e,t,1,10).then(function(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var o=e[n].lastName+", "+e[n].firstName;t[n]={label:o,name:o,referralNo:e[n].referralNo},null!=e[n].specialtyType&&""!=e[n].specialtyType&&(t[n].label+=" ["+e[n].specialtyType+"]")}return t},function(e){return[]})},w.chooseReferralDoc=function(e,t,n){w.page.demo.scrReferralDocNo=e.referralNo,w.page.demo.scrReferralDoc=e.name,w.checkReferralDocNo()},w.chooseFamilyDoc=function(e,t,n){w.page.demo.scrFamilyDocNo=e.referralNo,w.page.demo.scrFamilyDoc=e.name,w.checkFamilyDocNo()},w.showAddNewRosterStatus=function(){w.page.showAddNewRosterStatus=!w.page.showAddNewRosterStatus,w.page.newRosterStatus=null},w.showAddNewPatientStatus=function(){w.page.showAddNewPatientStatus=!w.page.showAddNewPatientStatus,w.page.newPatientStatus=null},w.addNewRosterStatus=function(){null!=w.page.newRosterStatus&&""!=w.page.newRosterStatus&&(w.page.rosterStatusList.push({value:w.page.newRosterStatus,label:w.page.newRosterStatus}),w.page.demo.rosterStatus=w.page.newRosterStatus),w.showAddNewRosterStatus()},w.addNewPatientStatus=function(){null!=w.page.newPatientStatus&&""!=w.page.newPatientStatus&&(w.page.patientStatusList.push({value:w.page.newPatientStatus,label:w.page.newPatientStatus}),w.page.demo.patientStatus=w.page.newPatientStatus),w.showAddNewPatientStatus()},w.checkPhone=function(e){"C"==e?s(w.page.demo.scrCellPhone)?w.page.demo.scrCellPhone=G.C:G.C=w.page.demo.scrCellPhone:"H"==e?s(w.page.demo.scrHomePhone)?w.page.demo.scrHomePhone=G.H:G.H=w.page.demo.scrHomePhone:"W"==e?s(w.page.demo.scrWorkPhone)?w.page.demo.scrWorkPhone=G.W:G.W=w.page.demo.scrWorkPhone:"HX"==e&&null!=w.page.demo.scrHPhoneExt&&""!=w.page.demo.scrHPhoneExt?l(w.page.demo.scrHPhoneExt)?G.HX=w.page.demo.scrHPhoneExt:w.page.demo.scrHPhoneExt=G.HX:"WX"==e&&null!=w.page.demo.scrWPhoneExt&&""!=w.page.demo.scrWPhoneExt&&(l(w.page.demo.scrWPhoneExt)?G.WX=w.page.demo.scrWPhoneExt:w.page.demo.scrWPhoneExt=G.WX)},w.setPreferredPhone=function(){w.page.cellPhonePreferredMsg=K,w.page.cellPhonePreferredColor="",w.page.homePhonePreferredMsg=K,w.page.homePhonePreferredColor="",w.page.workPhonePreferredMsg=K,w.page.workPhonePreferredColor="","C"==w.page.demo.scrPreferredPhone?(w.page.preferredPhoneNumber=w.page.demo.scrCellPhone,w.page.cellPhonePreferredMsg=Y,w.page.cellPhonePreferredColor="#ffff99"):"H"==w.page.demo.scrPreferredPhone?(w.page.preferredPhoneNumber=w.page.demo.scrHomePhone,w.page.homePhonePreferredMsg=Y,w.page.homePhonePreferredColor="#ffff99"):"W"==w.page.demo.scrPreferredPhone&&(w.page.preferredPhoneNumber=w.page.demo.scrWorkPhone,w.page.workPhonePreferredMsg=Y,w.page.workPhonePreferredColor="#ffff99")},w.isPhoneVoid=function(e){return null==e||""==e},w.showEnrollmentHistory=function(){var e="../demographic/EnrollmentHistory.jsp?demographicNo="+w.page.demo.demographicNo;window.open(e,"enrollmentHistory","width=650, height=1000")},w.launchPhoto=function(){var e="../casemgmt/uploadimage.jsp?demographicNo="+w.page.demo.demographicNo;window.open(e,"uploadWin","width=500, height=300")},w.manageContacts=function(){var e=!0;if(w.page.dataChanged>0&&(e=confirm("You may have unsaved data. Are you sure to leave?")),e){var t="../demographic/Contact.do?method=manage&demographic_no="+w.page.demo.demographicNo;window.open(t,"ManageContacts","width=960, height=700")}},w.printLabel=function(e){var t=null;"PDFLabel"===e?t="../demographic/printDemoLabelAction.do?appointment_no=null&demographic_no="+w.page.demo.demographicNo:"PDFAddress"===e?t="../demographic/printDemoAddressLabelAction.do?demographic_no="+w.page.demo.demographicNo:"PDFChart"===e?t="../demographic/printDemoChartLabelAction.do?demographic_no="+w.page.demo.demographicNo:"PrintLabel"===e?t="../demographic/demographiclabelprintsetting.jsp?demographic_no="+w.page.demo.demographicNo:"ClientLab"===e&&(t="../demographic/printClientLabLabelAction.do?demographic_no="+w.page.demo.demographicNo),window.open(t,"Print","width=960, height=700")},w.integratorDo=function(e){var t=null;"ViewCommunity"==e?t="../admin/viewIntegratedCommunity.jsp":"Linking"==e?t="../integrator/manage_linked_clients.jsp?demographicId="+w.page.demo.demographicNo:"Compare"==e?t="../demographic/DiffRemoteDemographics.jsp?demographicId="+w.page.demo.demographicNo:"Update"==e?t="../demographic/copyLinkedDemographicInfoAction.jsp?displaymode=edit&dboperation=search_detail&demographicId="+w.page.demo.demographicNo+"&demographic_no="+w.page.demo.demographicNo:"SendNote"==e&&(t="../demographic/followUpSelection.jsp?demographicId="+w.page.demo.demographicNo),window.open(t,"Integrator","width=960, height=700")},w.macPHRDo=function(e){var t=null;if("Register"==e){if(!w.page.macPHRLoggedIn)return void alert("Please login to PHR first");t="../phr/indivo/RegisterIndivo.jsp?demographicNo="+w.page.demo.demographicNo}else"SendMessage"==e?t="../phr/PhrMessage.do?method=createMessage&providerNo="+D.providerNo+"&demographicNo="+w.page.demo.demographicNo:"ViewRecord"==e?t="../demographic/viewPhrRecord.do?demographic_no="+w.page.demo.demographicNo:"Verification"==e&&(t="../phr/PHRVerification.jsp?demographic_no="+w.page.demo.demographicNo);window.open(t,"MacPHR","width=960, height=700")},w.appointmentDo=function(e){var t=null;"ApptHistory"==e?t="../demographic/demographiccontrol.jsp?displaymode=appt_history&dboperation=appt_history&limit1=0&limit2=25&orderby=appttime&demographic_no="+w.page.demo.demographicNo+"&last_name="+encodeURI(w.page.demo.lastName)+"&first_name="+encodeURI(w.page.demo.firstName):"WaitingList"==e&&(t="../oscarWaitingList/SetupDisplayPatientWaitingList.do?demographic_no="+w.page.demo.demographicNo),window.open(t,"Appointment","width=960, height=700")},w.isClinicaidBilling=function(){return"CLINICAID"==w.page.billregion},w.billingDo=function(e){var t=new Date,n=null;"BillingHistory"===e?n="CLINICAID"===w.page.billregion?"../billing.do?billRegion=CLINICAID&action=invoice_reports&patient_remote_id="+w.page.demo.demographicNo:"ON"===w.page.billregion?"../billing/CA/ON/billinghistory.jsp?demographic_no="+w.page.demo.demographicNo+"&last_name="+encodeURI(w.page.demo.lastName)+"&first_name="+encodeURI(w.page.demo.firstName)+"&orderby=appointment_date&displaymode=appt_history&dboperation=appt_history&limit1=0&limit2=10":"../billing/CA/BC/billcontroller.page.jsp?lastName="+encodeURI(w.page.demo.lastName)+"&firstName="+encodeURI(w.page.demo.firstName)+"&filterPatient=true&demographicNo="+w.page.demo.demographicNo:"CreateInvoice"===e?n="../billing.do?billRegion="+w.page.billregion+"&billForm="+w.page.defaultView+"&hotclick=&appointment_no=0&demographic_name="+encodeURI(w.page.demo.lastName)+encodeURI(",")+encodeURI(w.page.demo.firstName)+"&demographic_no="+w.page.demo.demographicNo+"&providerview="+w.page.demo.providerNo+"&user_no="+D.providerNo+"&apptProvider_no=none&appointment_date="+t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"&start_time=00:00:00&bNewForm=1&status=t":"FluBilling"===e?n="../billing/CA/ON/specialtyBilling/fluBilling/addFluBilling.jsp?function=demographic&functionid="+w.page.demo.demographicNo+"&creator="+D.providerNo+"&demographic_name="+encodeURI(w.page.demo.lastName)+encodeURI(",")+encodeURI(w.page.demo.firstName)+"&hin="+w.page.demo.hin+w.page.demo.ver+"&demo_sex="+w.page.demo.sex+"&demo_hctype="+w.page.demo.hcType+"&rd="+encodeURI(w.page.demo.scrReferralDoc)+"&rdohip="+w.page.demo.scrReferralDocNo+"&dob="+w.page.demo.dobYear+w.page.demo.dobMonth+w.page.demo.dobDay+"&mrp="+w.page.demo.providerNo:"HospitalBilling"===e?n="../billing/CA/ON/billingShortcutPg1.jsp?billRegion="+w.page.billregion+"&billForm="+encodeURI(w.page.hospitalView)+"&hotclick=&appointment_no=0&demographic_name="+encodeURI(w.page.demo.lastName)+encodeURI(",")+encodeURI(w.page.demo.firstName)+"&demographic_no="+w.page.demo.demographicNo+"&providerview="+w.page.demo.providerNo+"&user_no="+D.providerNo+"&apptProvider_no=none&appointment_date="+t.getFullYear+"-"+(t.getMonth()+1)+"-"+t.getDate()+"&start_time=00:00:00&bNewForm=1&status=t":"AddBatchBilling"===e?n="../billing/CA/ON/addBatchBilling.jsp?demographic_no="+w.page.demo.demographicNo+"&creator="+D.providerNo+"&demographic_name="+encodeURI(w.page.demo.lastName)+encodeURI(",")+encodeURI(w.page.demo.firstName)+"&hin="+w.page.demo.hin+w.page.demo.ver+"&dob="+w.page.demo.dobYear+w.page.demo.dobMonth+w.page.demo.dobDay:"AddINR"===e?n="../billing/CA/ON/inr/addINRbilling.jsp?function=demographic&functionid="+w.page.demo.demographicNo+"&creator="+D.providerNo+"&demographic_name="+encodeURI(w.page.demo.lastName)+encodeURI(",")+encodeURI(w.page.demo.firstName)+"&hin="+w.page.demo.hin+w.page.demo.ver+"&dob="+w.page.demo.dobYear+w.page.demo.dobMonth+w.page.demo.dobDay:"BillINR"===e&&(n="../billing/CA/ON/inr/reportINR.jsp?provider_no="+D.providerNo),window.open(n,"Billing","width=960, height=700")},w.exportDemographic=function(){var e="../demographic/demographicExport.jsp?demographicNo="+w.page.demo.demographicNo;window.open(e,"DemographicExport","width=960, height=700")},w.formatDocOutput=function(e){var t,n,o=e.indexOf("<rdohip>")+"<rdohip>".length,a=e.indexOf("</rdohip>");return a>o&&a>=0&&o>=0&&(t=e.substring(o,a)),o=e.indexOf("<rd>")+"<rd>".length,(a=e.indexOf("</rd>"))>o&&a>=0&&o>=0&&(n=e.substring(o,a)),{number:t,name:n}},w.formatDocInput=function(e,t){var n="<rdohip></rdohip>",o="<rd></rd>";return null!=t&&""!==t&&(n="<rdohip>"+t+"</rdohip>"),null!=e&&""!==e&&(o="<rd>"+e+"</rd>"),n+o},w.validateHCSave=function(e){null==w.page.demo.hin||""==w.page.demo.hin?e&&w.save():C.isUniqueHC(w.page.demo.hin,w.page.demo.demographicNo).then(function(t){t.success?"ON"!=w.page.demo.hcType?e&&w.save():(null==w.page.demo.ver&&(w.page.demo.ver=""),C.validateHC(w.page.demo.hin,w.page.demo.ver).then(function(t){null==t.valid?w.page.HCValidation="n/a":t.valid||(alert("Health Card Validation failed: "+t.responseDescription+" ("+t.responseCode+")"),e=!1),e&&w.save()},function(e){console.log(e)})):alert("HIN is already in use!")},function(e){console.log(e)})},w.save=function(){if(w.page.saving=!0,null!=w.page.demo.lastName&&""!=w.page.demo.lastName)if(null!=w.page.demo.firstName&&""!=w.page.demo.firstName)if(null!=w.page.demo.sex&&""!=w.page.demo.sex)if(i(w.page.demo.dobYear,w.page.demo.dobMonth,w.page.demo.dobDay))alert("Date of Birth is required");else if(w.page.demo.dateOfBirth=o(w.page.demo.dobYear,w.page.demo.dobMonth,w.page.demo.dobDay),null!=w.page.demo.dateOfBirth){if(w.checkPatientStatus()&&w.isPostalComplete()&&w.validateSin()&&w.validateDocNo(w.page.demo.scrReferralDocNo)&&w.validateDocNo(w.page.demo.scrFamilyDocNo)){null!=w.page.demo.scrNotes&&(w.page.demo.notes="<unotes>"+w.page.demo.scrNotes+"</unotes>"),w.page.demo.familyDoctor=w.formatDocInput(w.page.demo.scrReferralDoc,w.page.demo.scrReferralDocNo),w.page.demo.familyDoctor2=w.formatDocInput(w.page.demo.scrFamilyDoc,w.page.demo.scrFamilyDocNo),w.page.demo.scrDemoCell=w.page.demo.scrCellPhone,w.page.demo.phone=w.page.demo.scrHomePhone,w.page.demo.alternativePhone=w.page.demo.scrWorkPhone,"C"==w.page.demo.scrPreferredPhone?w.page.demo.scrDemoCell+="*":"H"==w.page.demo.scrPreferredPhone?w.page.demo.phone+="*":"W"==w.page.demo.scrPreferredPhone&&(w.page.demo.alternativePhone+="*");var e=[];e=n("demo_cell",w.page.demo.scrDemoCell,$,w.page.demo.extras,e),e=n("aboriginal",w.page.demo.scrAboriginal,$,w.page.demo.extras,e),e=n("hPhoneExt",w.page.demo.scrHPhoneExt,$,w.page.demo.extras,e),e=n("wPhoneExt",w.page.demo.scrWPhoneExt,$,w.page.demo.extras,e),e=n("cytolNum",w.page.demo.scrCytolNum,$,w.page.demo.extras,e),e=n("phoneComment",w.page.demo.scrPhoneComment,$,w.page.demo.extras,e),e=n("paper_chart_archived",w.page.demo.scrPaperChartArchived,$,w.page.demo.extras,e),e=n("paper_chart_archived_date",w.page.demo.scrPaperChartArchivedDate,$,w.page.demo.extras,e),e=n("usSigned",w.page.demo.scrUsSigned,$,w.page.demo.extras,e),e=n("privacyConsent",w.page.demo.scrPrivacyConsent,$,w.page.demo.extras,e),e=n("informedConsent",w.page.demo.scrInformedConsent,$,w.page.demo.extras,e),e=n("securityQuestion1",w.page.demo.scrSecurityQuestion1,$,w.page.demo.extras,e),e=n("securityAnswer1",w.page.demo.scrSecurityAnswer1,$,w.page.demo.extras,e),e=n("rxInteractionWarningLevel",w.page.demo.scrRxInteractionLevel,$,w.page.demo.extras,e),w.page.demo.extras=e,v.updateDemographic(w.page.demo).then(function(){w.resetEditState()},function(){w.page.saving=!1,alert("Failed to save demographic")})}}else alert("Invalid Date of Birth");else alert("Sex is required");else alert("First Name is required");else alert("Last Name is required")},w.resetEditState=function(){w.page.saving=!1,w.page.dataChanged=!1},w.init()}]);var a=[31,28,31,30,31,30,31,31,30,31,30,31];function r(e,t,n){if(null!=e&&""!=e&&null!=t&&""!=t&&null!=n&&""!=n){var o=a[t-1];return 2==t&&(e%4==0&&e%100!=0||e%400==0)&&(o=29),n>0&&n<=o}return i(e,t,n)}function i(e,t,n){return!(null!=e&&""!=e||null!=t&&""!=t||null!=n&&""!=n)}function l(e){return/^[0-9]+$/.test(e)}function s(e){return null!=e&&!/^[0-9 \-\()]*$/.test(e)}function u(e){return null!=(e=String(e))&&""!=e&&"*"==e.charAt(e.length-1)}function c(e){return u(e)&&(e=e.substring(0,e.length-1)),e}function d(e){var t=e;if(null!=e.role){var n={};n.role=e.role,n.sdm=e.sdm,n.ec=e.ec,n.category=e.category,n.lastName=e.lastName,n.firstName=e.firstName,n.phone=e.phone,t=[n]}for(var o=0;o<t.length;o++)1==t[o].sdm&&(t[o].role+=" /sdm"),1==t[o].ec&&(t[o].role+=" /ec"),null!=t[o].role&&""!=t[o].role||(t[o].role="-"),null==t[o].phone||""==t[o].phone?t[o].phone="-":"*"==t[o].phone.charAt(t[o].phone.length-1)&&(t[o].phone=t[o].phone.substring(0,t[o].phone.length-1));return t}function p(e){return e instanceof Array?e:null==e?[]:[e]}},function(e,t,n){"use strict";angular.module("Record.PHR",["Common","Common.Services"])},function(e,t,n){(function(e){angular.module("Record.PHR").controller("Record.PHR.PHRController",["$scope","$http","$location","$state","$stateParams","demographicService","demo","formService",function(t,n,o,a,r,i,l,s){var u=this;console.log("phr ctrl ",r,a),u.page={},u.page.currentFormList=[],u.page.currentForm={},u.page.currentlistId=0,console.log("What is the state "+a.params.type+" : "+angular.isUndefined(a.params.type)+" id "+a.params.id,a),u.page.formlists=[{id:0,label:"Data"}],u.page.currentFormList[0]=[{id:0,name:"Glucose",url:"../oscarEncounter/myoscar/measurements_glucose.do?type=GLUCOSE&demoNo=",type:"frame"},{id:1,name:"BP",url:"../oscarEncounter/myoscar/measurements_blood_pressure.do?type=BLOOD_PRESSURE&demoNo=",type:"frame"},{id:2,name:"Height & Weight",url:"../oscarEncounter/myoscar/measurements_height_and_weight.do?type=HEIGHT_AND_WEIGHT&demoNo=",type:"frame"},{id:3,name:"Open Record",url:"../demographic/viewPhrRecord.do?demographic_no=",type:"window"},{id:4,name:"Send a Message",url:"../phr/PhrMessage.do?method=createMessage&demographicNo=",type:"window"},{id:5,name:"Data Sync",url:"../admin/oscar_myoscar_sync_config_redirect.jsp?uselessParam=",type:"window"}],u.changeTo=function(e){u.page.currentlistId=e,console.log("set currentlist to "+e),0==e&&s.getAllFormsByHeading(r.demographicNo,"Completed").then(function(e){console.debug("whats the index0",e),u.page.currentFormList[0]=e.list},function(e){console.log(e)})},u.viewFormState=function(t){for(;document.getElementById("formInViewFrame").hasChildNodes();)document.getElementById("formInViewFrame").removeChild(document.getElementById("formInViewFrame").firstChild);var n=t.url+r.demographicNo;if(console.log("item",t),"frame"!=t.type){var o=Math.round(1e3*Math.random());return win="win"+o,void window.open(n,win,"scrollbars=yes, location=no, width=900, height=600","")}u.page.currentForm=t;var a=new e.Parent("formInViewFrame",n,{});u.pymParent=a},u.getListClass=function(e){if(e===u.page.currentlistId)return"active"},u.getActiveFormClass=function(e){return e.type==u.page.currentForm.type&&e.id==u.page.currentForm.id&&angular.isDefined(e.id)?"active":e.type==u.page.currentForm.type&&angular.isUndefined(e.id)&&e.formId==u.page.currentForm.formId?"active":void 0},u.keypress=function(e){if(1==e.altKey&&"Up"==e.key)console.log("up",e),console.log(u.page.currentFormList[u.page.currentlistId].indexOf(u.page.currentForm)),(t=u.page.currentFormList[u.page.currentlistId].indexOf(u.page.currentForm))>0&&(u.page.currentForm=u.page.currentFormList[u.page.currentlistId][t-1],u.viewFormState(u.page.currentForm));else if(1==e.altKey&&"Down"==e.key){console.log("down",e);var t=u.page.currentFormList[u.page.currentlistId].indexOf(u.page.currentForm);console.log(t,u.page.currentFormList[u.page.currentlistId].length),t<=u.page.currentFormList[u.page.currentlistId].length&&(u.page.currentForm=u.page.currentFormList[u.page.currentlistId][t+1],u.viewFormState(u.page.currentForm))}else console.log("keypress",e.altKey,e.key,e)}}])}).call(this,n(10))},function(e,t,n){"use strict";angular.module("Record.Tracker",["Common","Common.Services"])},function(e,t){angular.module("Record.Tracker").controller("Record.Tracker.TrackerController",["$rootScope","$scope","$http","$location","$stateParams","$state","$timeout","demographicService","noteService","uxService",function(e,t,n,o,a,r,i,l,s,u){this.getTrackerUrl=function(){return url="../oscarEncounter/oscarMeasurements/HealthTrackerPage.jspf?template=tracker&demographic_no="+a.demographicNo,url},this.resizeIframe=function(e){var t=e.contentWindow.document.body.scrollHeight;t>0&&(e.height=t+"px")}}])},function(e,t,n){"use strict";angular.module("Tickler",["Common","Common.Services","Common.Filters"])},function(e,t){angular.module("Tickler").controller("Tickler.TicklerListController",["$scope","$timeout","$resource","$uibModal","$http","$stateParams","$filter","NgTableParams","securityService","ticklerService","noteService","providerService","providers",function(e,t,n,o,a,r,i,l,s,u,c,d,p){var m=this,h=n("../ws/rs/tickler/ticklers");m.lastResponse="",m.providers=p,s.hasRights({items:[{objectName:"_tickler",privilege:"w"},{objectName:"_tickler",privilege:"r"}]}).then(function(e){null!=e.content&&2==e.content.length?(m.ticklerWriteAccess=e.content[0],m.ticklerReadAccess=e.content[1],m.ticklerReadAccess&&(m.search={status:"A"},m.tableParams=new l({page:1,count:10,sorting:{ServiceDate:"desc"}},{getData:function(e){m.search.count=e.url().count,m.search.page=e.url().page,m.search.includeLinks="true",m.search.includeComments="true",m.search.includeUpdates="true",m.search.includeProgram=!0;var t=/sorting\[(\w+)\]/g;for(var n in e.url()){var o=t.exec(String(n));o&&(m.search.sortColumn=o[1],m.search.sortDirection=e.url()[String(n)])}return angular.isDefined(r.demographicNo)&&(m.search.demographicNo=r.demographicNo),h.get(m.search).$promise.then(function(t){e.total(t.total);for(var n=t.content,o=0;o<n.length;o++)n[o].ticklerLinks.length>0&&(n[o].ticklerLinkUrl=m.getLinkUrl(n[o].ticklerLinks[0]));return t.content})}}))):alert("failed to load rights")},function(e){alert(e)}),m.doSearch=function(){m.tableParams.reload()},m.clear=function(){m.search=angular.copy({status:"A"}),m.tableParams.reload()},m.checkAll=function(e){angular.forEach(e,function(e){e.checked=!0})},m.checkNone=function(e){angular.forEach(e,function(e){e.checked=!1})},m.completeTicklers=function(){var e=[];angular.forEach(m.tableParams.data,function(t){t.checked&&e.push(t.id)}),u.setCompleted(e).then(function(e){m.tableParams.reload()},function(e){alert(e)})},m.deleteTicklers=function(){var e=[];angular.forEach(m.tableParams.data,function(t){t.checked&&e.push(t.id)}),u.setDeleted(e).then(function(e){m.tableParams.reload()},function(e){alert(e)})},m.addTickler=function(){o.open({templateUrl:"src/tickler/ticklerAdd.jsp",controller:"Tickler.TicklerAddController as ticklerAddCtrl",backdrop:"static",size:"lg"}).result.then(function(e){console.log("data from modalInstance "+e),null!=e&&1==e&&m.tableParams.reload()},function(e){alert(e)})},m.editTickler=function(e){o.open({templateUrl:"src/tickler/ticklerView.jsp",controller:"Tickler.TicklerViewController as ticklerViewCtrl",backdrop:"static",size:"lg",resolve:{tickler:function(){return e},ticklerNote:function(){return c.getTicklerNote(e.id)},ticklerWriteAccess:function(){return m.ticklerWriteAccess},me:function(){return d.getMe()}}}).result.then(function(e){console.log("data from modalInstance "+e),null!=e&&1==e&&m.tableParams.reload()},function(e){alert(e)})},m.editNote2=function(e){c.getTicklerNote(e.id).then(function(t){null!=t.ticklerNote?m.ticklerNote=t.ticklerNote:m.ticklerNote={editor:"you",note:"",noteId:0,observationDate:"now",revision:0};o.open({templateUrl:"src/tickler/ticklerNote.jsp",controller:"Tickler.TicklerNoteController as ticklerNoteCtrl",backdrop:"static",resolve:{ticklerNote:function(){return m.ticklerNote},tickler:function(){return e}}})},function(e){alert(e)})},m.showComments=function(e){m.tickler=e;o.open({templateUrl:"src/tickler/ticklerComments.jsp",controller:"Tickler.TicklerCommentController as ticklerCommentCtrl",backdrop:"static",resolve:{tickler:function(){return m.tickler}}})},m.printArea=function(){window.print()},m.getLinkUrl=function(e){if(null!==e&&null!==e.id){var t="";return"CML"===e.tableName?t="../lab/CA/ON/CMLDisplay.jsp?segmentID="+e.tableId:"MDS"===e.tableName?t="../oscarMDS/SegmentDisplay.jsp?segmentID="+e.tableId:"HL7"===e.tableName?t="../lab/CA/ALL/labDisplay.jsp?segmentID="+e.tableId:"DOC"===e.tableName&&(t="../dms/ManageDocument.do?method=display&doc_no="+e.tableId),t}}}])},function(e,t,n){(function(e){angular.module("Tickler").controller("Tickler.TicklerViewController",["$scope","$filter","$uibModalInstance","$timeout","tickler","ticklerService","ticklerNote","ticklerWriteAccess","providerService","me",function(t,n,o,a,r,i,l,s,u,c){var d=this;d.ticklerUpdate=angular.copy(r),d.serviceDateInput=e(d.ticklerUpdate.serviceDate).toDate(),d.serviceTimeInput=e(d.ticklerUpdate.serviceDate).format("hh:mm A"),d.me=c,d.ticklerWriteAccess=s,d.needsUpdate=!1,d.showUpdates=!1,d.showComments=!1,d.showCommentFormControl=!1,d.priorities=["Low","Normal","High"],d.statuses=[{id:"A",label:"Active"},{id:"C",label:"Completed"},{id:"D",label:"Deleted"}],null!=l&&(d.ticklerNote=l.ticklerNote),null!=r&&(d.selectedStatus=d.statuses.find(function(e){return e.id==r.status})),t.$watch(function(){return d.serviceDateInput},function(t){var n=e(t.getTime()).format("MM-DD-YYYY"),o=e(n+"-"+d.serviceTimeInput,"MM-DD-YYYY-hh:mm A").toDate().getTime();d.ticklerUpdate.serviceDate=o}),t.$watch(function(){return d.serviceTimeInput},function(t){var n=e(d.serviceDateInput.getTime()).format("MM-DD-YYYY"),o=e(n+"-"+t,"MM-DD-YYYY-hh:mm A").toDate().getTime();d.ticklerUpdate.serviceDate=o}),d.close=function(){d.needsUpdate?confirm("You have unsaved changes, are you sure?")&&o.close(!1):(d.ticklerUpdate=void 0,o.close(!1))},d.save=function(){o.close("Someone Saved Me")},d.updateTaskAssignedTo=function(e,t,n){d.needsUpdate=!0,d.ticklerUpdate.taskAssignedTo=t,d.ticklerUpdate.taskAssignedToName=n,d.showTaskAssignedToFormControl=!1},d.cancelTaskAssignedToUpdate=function(){d.ticklerUpdate.taskAssignedTo=null,d.ticklerUpdate.taskAssignedToName=null,d.showTaskAssignedToFormControl=!1},d.editServiceDateAndTime=function(){d.showServiceDateAndTimeFormControl=!0},d.updateServiceDateAndTime=function(){var e=d.ticklerUpdate.serviceDate.split("-"),t=d.ticklerUpdate.serviceTime.split(":");if(3==e.length&&2==t.length){var n=new Date(e[0],parseInt(e[1])-1,e[2],t[0],t[1],0,0);null==n||isNaN(n.getTime())?alert("Invalid Date/time. Please use yyyy-MM-dd and HH:mm formats"):(d.needsUpdate=!0,d.tickler.serviceDate=n,d.showServiceDateAndTimeFormControl=!1)}else alert("Invalid Date/time. Please use yyyy-MM-dd and HH:mm formats")},d.cancelServiceDateAndTimeUpdate=function(){d.ticklerUpdate.serviceDate=null,d.showServiceDateAndTimeFormControl=!1},d.editPriority=function(){d.priorities=["Low","Normal","High"],d.showPriorityFormControl=!0},d.updatePriority=function(e){d.needsUpdate=!0,d.showPriorityFormControl=!1},d.cancelPriorityUpdate=function(){d.ticklerUpdate.priority=null,d.showPriorityFormControl=!1},d.editStatus=function(){d.showStatusFormControl=!0},d.updateStatus=function(e){d.needsUpdate=!0,d.ticklerUpdate.status=e.id,d.ticklerUpdate.statusName=e.label,d.showStatusFormControl=!1},d.cancelStatusUpdate=function(){d.ticklerUpdate.statusName=null,d.ticklerUpdate.status=null,d.showStatusFormControl=!1},d.addComment=function(){d.showCommentFormControl=!0},d.saveComment=function(){d.needsUpdate=!0,null==d.ticklerUpdate.ticklerComments&&(d.ticklerUpdate.ticklerComments=[]);var e={message:d.ticklerUpdate.comment,providerName:c.formattedName,providerNo:c.providerNo,updateDate:new Date,newComment:!0};d.ticklerUpdate.ticklerComments.unshift(e),d.showCommentFormControl=!1,d.showComments=!0},d.cancelCommentUpdate=function(){d.ticklerUpdate.comment=null,d.showCommentFormControl=!1},d.searchProviders=function(e){var t={searchTerm:e,active:!0};return u.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t})},d.saveChanges=function(){if(r.message!=d.ticklerUpdate.message&&(d.needsUpdate=!0),r.serviceDate!=d.ticklerUpdate.serviceDate&&(d.needsUpdate=!0),d.needsUpdate){var e=angular.copy(d.ticklerUpdate);console.log("Post DATA: ",e),i.update(e).then(function(e){o.close(!0)})}else o.close(!1)},d.completeTickler=function(){i.setCompleted([r.id]).then(function(e){o.close(!0)},function(e){alert(e)})},d.deleteTickler=function(){i.setDeleted([r.id]).then(function(e){o.close(!0)},function(e){alert(e)})},d.printTickler=function(){window.open("../Tickler.do?method=print&id="+r.id)}}])}).call(this,n(5))},function(e,t,n){(function(e,t){angular.module("Tickler").controller("Tickler.TicklerAddController",["$scope","$uibModalInstance","$filter","$stateParams","demographicService","demographicsService","providerService","ticklerService",function(n,o,a,r,i,l,s,u){var c=this;c.demographicSearch=null,c.tickler={template:{id:1,name:""},serviceDateDate:new Date,serviceDateTime:"12:00 AM",suggestedTextId:0},c.priorities=["Low","Normal","High"],c.init=function(){Juno.Common.Util.exists(r.demographicNo)&&(console.log("initializing demographicSearch pre-selected",r.demographicNo),i.getDemographic(r.demographicNo).then(function(e){c.demographicSearch={demographicNo:e.demographicNo,firstName:e.firstName,lastName:e.lastName,name:e.lastName+","+e.firstName},c.updateDemographicNo(e)})),e("#timepicker").timepicker({defaultTime:c.tickler.serviceDateTime})},u.getTextSuggestions().then(function(e){c.textSuggestions=e.content,c.textSuggestions.unshift({id:0,suggestedText:""})},function(e){alert(e)}),c.close=function(){o.close(!1)},c.validate=function(){var e=c.tickler;return c.errors=[],null==e.demographic&&c.errors.push("You must select a patient"),null!=e.taskAssignedTo&&0!=e.taskAssignedTo.length||c.errors.push("You must assign a provider"),null!=e.message&&0!=e.message.length||c.errors.push("Message is required"),!(c.errors.length>0)},c.save=function(){if(c.showErrors=!0,c.validate()){var e={};e.demographicNo=c.tickler.demographic.demographicNo,e.taskAssignedTo=c.tickler.taskAssignedTo,e.priority=c.tickler.priority,e.status="A",e.message=c.tickler.message;var n=c.tickler.serviceDateDate,a=t(c.tickler.serviceDateTime,"hh:mm A");n.setHours(a.get("hour")),n.setMinutes(a.get("minute")),e.serviceDate=n,u.add(e).then(function(e){o.close(!0)},function(e){alert(e)})}},c.updateDemographicNo=function(e){Juno.Common.Util.exists(e)?i.getDemographic(e.demographicNo).then(function(e){c.tickler.demographic=e,console.log("set controller.tickler.demographic: ",c.tickler.demographic)}):c.tickler.demographic=null},c.searchPatients=function(e){var t={type:l.SEARCH_MODE.Name,term:e,status:l.STATUS_MODE.ACTIVE,integrator:!1,outofdomain:!0};return l.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.data.length;n++)t.push({demographicNo:e.data[n].demographicNo,name:e.data[n].lastName+","+e.data[n].firstName});return t},function(e){console.log(e)})},c.searchProviders=function(e){var t={searchTerm:e,active:!0};return s.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t})},c.updateProviderNo=function(e,t,n){c.tickler.taskAssignedTo=t,c.tickler.taskAssignedToName=n},c.setSuggestedText=function(){var e=a("filter")(c.textSuggestions,{id:c.tickler.suggestedTextId},!0);null!=e&&(c.tickler.message=e[0].suggestedText)},c.addMonthsFromNow=function(e){c.tickler.serviceDateDate=t().add(e,"months").toDate()}}])}).call(this,n(3),n(5))},function(e,t){angular.module("Tickler").controller("Tickler.TicklerNoteController",["$scope","$uibModalInstance","$http","ticklerNote","tickler","noteService",function(e,t,n,o,a,r){var i=this;i.ticklerNote=o,i.originalNote=o.note,i.tickler=a,i.close=function(){t.close("Someone Closed Me")},i.save=function(){i.ticklerNote.note;i.ticklerNote.tickler=i.tickler,r.saveTicklerNote(i.ticklerNote).then(function(e){t.close("Someone Saved Me")},function(e){alert(e)})}}])},function(e,t){angular.module("Tickler").controller("Tickler.TicklerCommentController",["$scope","$uibModalInstance","tickler",function(e,t,n){this.tickler=n,this.close=function(){t.close("Someone Closed Me")}}])},function(e,t,n){"use strict";angular.module("Schedule",["Common","Common.Services","PatientList"])},function(e,t,n){"use strict";n.r(t),function(e,t){var o=n(8),a=n(14);angular.module("Schedule").controller("Schedule.ScheduleController",["$scope","$stateParams","$q","$http","$httpParamSerializer","$uibModal","$state","focusService","scheduleService","securityService","uiCalendarConfig",function(n,r,i,l,s,u,c,d,p,m,h){n.appointmentApi=new o.AppointmentApi(l,s,"../ws/rs"),n.scheduleApi=new a.ScheduleApi(l,s,"../ws/rs"),n.calendarName="cpCalendar",n.initialized=!1,n.calendarLoading=!1,n.uiConfig={},n.uiConfigApplied={},n.eventSources=[],n.selectedSchedule=null,n.selectedSiteName=null,n.selectedTimeInterval=null,n.cpCalendarControl={},n.schedules=[],n.scheduleOptions=[],n.resourceOptions=[],n.siteOptions=[],n.defaultEventColor="#333",n.defaultTimeInterval="00:15:00",n.timeIntervalOptions=["00:05:00","00:10:00","00:15:00","00:30:00"],n.selectedTimeInterval=n.defaultTimeInterval,n.defaultAutoRefreshMinutes=3,n.defaultCalendarView="agendaWeek",n.eventStatuses={},n.rotateStatuses=[],n.availabilityTypes={},n.resourceOptionHash={},n.events=[],n.scheduleTemplates={},n.sites={},n.openingDialog=!1,n.dialog=null,n.defaultDate=null,n.selectedDate=null,n.scheduleViewName=null,n.scheduleDefault=null,n.scheduleTimeInterval=null,n.scheduleAutoRefresh=null,n.scheduleAutoRefreshMinutes=null,n.scheduleService=p,n.init=function(){n.uiConfig.calendar.defaultView=n.calendarViewName(),n.loadAvailabilityTypes().then(function(){n.loadEventStatuses().then(function(){n.loadScheduleOptions().then(function(){n.loadSiteOptions().then(function(){n.loadDefaultSelections(),n.loadSelectedSchedules().then(function(){n.setCalendarResources(),n.setEventSources(),n.initEventsAutoRefresh(),n.applyUiConfig(n.uiConfig),console.log("-- Calendar Initialized ----------------------------"),n.initialized=!0})})})})})},n.calendar=function(){return h.calendars[n.calendarName]},n.isSchedulingEnabled=function(){return!0},n.isInitialized=function(){return n.initialized},n.hasSchedules=function(){return n.schedules.length>0},n.hasSites=function(){return n.siteOptions.length>0},n.getTimeIntervalOptions=function(){return n.timeIntervalOptions},n.getScheduleOptions=function(){return n.scheduleOptions},n.getSiteOptions=function(){return angular.isDefined(n.selectedSite)&&null!==n.selectedSite||(n.selectedSite=n.siteOptions[0]),n.siteOptions},n.viewName=function(){var e=n.scheduleViewName;return Juno.Common.Util.exists(e)||(e=n.defaultCalendarView),e},n.calendarEvents=function(e,t,o,a){for(var r=[],l=0;l<n.schedules.length;l++)r.push(n.loadScheduleEvents(n.schedules[l].uuid,n.selectedSiteName,e,t));i.all(r).then(function(e){n.events=Array.prototype.concat.apply([],e);try{a(n.events)}catch(e){}})},n.showTimeIntervals=function(){return"month"!==n.viewName()},n.changeView=function(e){var t=!1;"resourceDay"!==e&&"resourceDay"!==n.scheduleViewName||(t=!0),n.scheduleViewName=e,t?n.loadSelectedSchedules().then(function(){n.setCalendarResources(),n.updateCalendarView()}):n.updateCalendarView()},n.showLegend=function(){if(!n.openingDialog&&!n.dialog){n.openingDialog=!0;var e={event_statuses:n.eventStatuses,availability_types:n.availabilityTypes};n.dialog=u.open({animation:!1,backdrop:"static",controller:"Schedule.LegendController",templateUrl:"code/schedule/legend.html",resolve:{data:function(){return e}}}),n.dialog.closed.then(function(){n.dialog=null}),n.openingDialog=!1}},n.refetchEvents=function(){n.calendar().fullCalendar("refetchEvents")},n.changeDate=function(e){n.calendar().fullCalendar("gotoDate",e)},n.isAgendaView=function(){return"resourceDay"!=n.viewName()},n.getSelectedSchedule=function(e){var t=null;if(n.scheduleDefault&&(t=n.scheduleDefault),Juno.Common.Util.exists(t))for(var o=0;o<e.length;o++)if(t===e[o].uuid)return e[o];return e.length>0?e[0]:null},n.loadSelectedSchedules=function(){var e=i.defer(),t=[];return Juno.Common.Util.exists(n.selectedSchedule.providerNos)&&angular.isArray(n.selectedSchedule.providerNos)?(angular.forEach(n.selectedSchedule.providerNos,function(e){t.push(n.loadSchedule(e.toString()))}),n.selectedSchedule.providerNos.length>1?(n.selectedResources=n.buildSelectedResources(n.selectedSchedule.providerNos),n.uiConfig.calendar.resources=n.selectedResources,n.uiConfig.calendar.defaultView="resourceDay",n.scheduleViewName="resourceDay",n.updateCalendarView()):(n.uiConfig.calendar.defaultView="agendaWeek",n.scheduleViewName="agendaWeek",n.uiConfig.calendar.resources=!1),n.applyUiConfig(n.uiConfig)):"resourceDay"!==n.viewName()&&null!==n.selectedSchedule?t.push(n.loadSchedule(n.selectedSchedule.uuid)):angular.forEach(n.selectedResources,function(e){t.push(n.loadSchedule(e.uuid))}),i.all(t).then(function(t){n.schedules=[];for(var o=0;o<t.length;o++)n.schedules[o]=t[o].data;e.resolve(t)},function(e){console.log("errors")}),e.promise},n.loadSchedule=function(e){var t=i.defer(),n={uuid:e,availabilities:[],relations:[],events:[]};return t.resolve({data:n}),t.promise},n.updateCalendarView=function(){n.uiConfig.calendar.defaultView=n.calendarViewName(),n.applyUiConfig(n.uiConfig)},n.calendarViewName=function(){var e=n.viewName();return"resourceDay"==e&&(e="agendaDay"),e},n.setCalendarLoading=function(e){n.calendarLoading=e},n.getLoadedSchedule=function(e){for(var t=null,o=0;o<n.schedules.length;o++)if(n.schedules[o].uuid===e){t=n.schedules[o];break}return t},n.buildSelectedResources=function(e){for(var t=[],o=0;o<e.length;o++)t.push(n.resourceOptionHash[e[o]]);return t},n.setCalendarResources=function(){"resourceDay"===n.viewName()?n.uiConfig.calendar.resources=n.selectedResources:n.uiConfig.calendar.resources=!1,n.applyUiConfig(n.uiConfig)},n.setEventSources=function(){n.eventSources.push(n.calendarEvents)},n.updateEvent=function(e){n.calendar().fullCalendar("updateEvent",e)},n.timeIntervalMinutes=function(){return parseInt(n.selectedTimeInterval.split(":")[1])},n.loadAvailabilityTypes=function(){var e=i.defer(),t={};return p.getScheduleTemplateCodes().then(function(o){for(var a=0;a<o.length;a++){var r=o[a];t[r.code]=angular.copy(r)}n.availabilityTypes=t,e.resolve(t)}),e.promise},n.loadDefaultSelections=function(){n.selectedSchedule=n.getSelectedSchedule(n.scheduleOptions),n.selectedTimeInterval=n.getSelectedTimeInterval(n.timeIntervalOptions,n.defaultTimeInterval),n.uiConfig.calendar.slotDuration=n.selectedTimeInterval,n.uiConfig.calendar.slotLabelInterval=n.selectedTimeInterval,n.uiConfig.calendar.minTime=n.getScheduleMinTime(),n.uiConfig.calendar.maxTime=n.getScheduleMaxTime(),n.uiConfig.calendar.scrollTime=e().subtract(1,"hours").format("HH:mm:ss")},n.getSelectedTimeInterval=function(e,t){var o=null,a=n.scheduleTimeInterval;if(null===a&&(a=n.scheduleTimeInterval),Juno.Common.Util.exists(a))for(var r=0;r<e.length;r++)if(a===e[r]){o=e[r];break}return null===o?t:o},n.getScheduleMinTime=function(){return"08:00"},n.getScheduleMaxTime=function(){return"20:00"},n.loadEventStatuses=function(){var e=i.defer();return n.eventStatuses={},n.rotateStatuses=[],n.scheduleApi.getCalendarAppointmentStatuses().then(function(t){for(var o=t.data.body,a=0;a<o.length;a++){var r=o[a];n.eventStatuses[r.displayLetter]=r,r.rotates&&n.rotateStatuses.push(r)}e.resolve(o)}),e.promise},n.loadScheduleEvents=function(e,t,o,a){var r=i.defer(),l=o.format(Juno.Common.Util.settings.date_format),s=a.subtract(1,"seconds").format(Juno.Common.Util.settings.date_format);return n.scheduleApi.getCalendarEvents(e,l,s,t).then(function(e){r.resolve(e.data.body)},function(e){r.reject(e.data.body)}),r.promise},n.saveEvent=function(e,t){var o=i.defer();return e?this.appointmentApi.updateAppointment(t).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}):n.appointmentApi.addAppointment(t).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},n.moveEvent=function(e,t,o){var a=i.defer(),r=Juno.Common.Util.getDatetimeNoTimezoneMoment(e.startTime),l=Juno.Common.Util.getDatetimeNoTimezoneMoment(e.endTime),s=angular.copy(e);return o&&(s.startTime=Juno.Common.Util.formatMomentDateTimeNoTimezone(r.add(t.asMinutes(),"minutes"))),s.endTime=Juno.Common.Util.formatMomentDateTimeNoTimezone(l.add(t.asMinutes(),"minutes")),n.saveEvent(!0,s).then(function(e){a.resolve(e.body)},function(e){a.reject(e.body)}),a.promise},n.processSaveResults=function(e,t){if("SUCCESS"==(e||{}).status)return!0;var n=((e||{}).error||{}).message,o=((e||{}).error||{}).validationErrors;if(Array.isArray(o)){t.add_standard_error(n);for(var a=0;a<o.length;a++){var r=o[a];t.add_field_error(r.path,r.message)}}},n.deleteEvent=function(e){var t=i.defer();return n.appointmentApi.deleteAppointment(e).then(function(e){t.resolve(e.data)},function(e){t.reject(e.data)}),t.promise},n.openCreateInvoice=function(e,t,o){var a=n.get_loaded_schedule(t),r=n.calendar_api_adapter.get_create_invoice_url(e,a.demographics_practitioner_uuid,o);window.window_scope=n,$window.open(r,"_blank")},n.getIconPath=function(e,t){if(!Juno.Common.Util.exists(e))return"";var n="";return Juno.Common.Util.exists(t)&&(n=t),"../images/"+n+e},n.rotateEventStatus=function(e){n.setCalendarLoading(!0);var t=e.data.appointmentNo;n.appointmentApi.setNextStatus(t).then(function(t){var o=t.data.body;e.color=n.eventStatuses[o].color,e.data.eventStatusCode=o,n.updateEvent(e),n.setCalendarLoading(!1)},function(e){})},n.getBillingLink=function(e){var t=Juno.Common.Util.getDatetimeNoTimezoneMoment(e.data.startTime),n=Juno.Common.Util.formatMomentDate(t),o=Juno.Common.Util.formatMomentTime(t),a=e.resourceId,r="";return e.data.billingRdohip&&(r="&referral_no_1="+encodeURIComponent(e.data.billingRdohip)),"../billing.do?billRegion="+encodeURIComponent(e.data.billingRegion)+"&billForm="+encodeURIComponent(e.data.billingForm)+"&hotclick=&appointment_no="+encodeURIComponent(e.data.appointmentNo)+"&demographic_name="+encodeURIComponent(e.data.demographicName)+"&status="+encodeURIComponent(e.data.eventStatusCode)+"&demographic_no="+encodeURIComponent(e.data.demographicNo)+"&providerview="+encodeURIComponent(a)+"&user_no="+encodeURIComponent(e.data.userProviderNo)+"&apptProvider_no="+encodeURIComponent(a)+"&appointment_date="+encodeURIComponent(n)+"&start_time="+encodeURIComponent(o)+"&bNewForm=1"+r},n.getEncounterLink=function(t){var n=t.resourceId,o=Juno.Common.Util.getDatetimeNoTimezoneMoment(t.data.startTime),a=Juno.Common.Util.formatMomentDate(o),r=Juno.Common.Util.formatMomentTime(o);return"../oscarEncounter/IncomingEncounter.do?providerNo="+encodeURIComponent(n)+"&appointmentNo="+encodeURIComponent(t.data.appointmentNo)+"&demographicNo="+encodeURIComponent(t.data.demographicNo)+"&curProviderNo="+encodeURIComponent(t.data.userProviderNo)+"&reason="+encodeURIComponent(t.data.reason)+"&encType="+encodeURIComponent("face to face encounter with client")+"&userName="+encodeURIComponent(t.data.userFirstName+" "+t.data.userLastName)+"&curDate="+encodeURIComponent(Juno.Common.Util.formatMomentDate(e()))+"&appointmentDate="+encodeURIComponent(a)+"&startTime="+encodeURIComponent(r)+"&status="+encodeURIComponent(t.data.eventStatusCode)+"&apptProvider_no="+encodeURIComponent(n)+"&providerview="+encodeURIComponent(n)},n.getRxLink=function(e){if(0!=e.data.demographicNo){var t=e.resourceId;return"../oscarRx/choosePatient.do?providerNo="+encodeURIComponent(t)+"&demographicNo="+encodeURIComponent(e.data.demographicNo)}},n.onEventRender=function(e,o,a){if("background"!==e.rendering){var r="",i=n.sites[e.data.site];Juno.Common.Util.exists(i)&&(r+="<span style='background-color: "+i.color+"'>&nbsp;</span>");var l="",s=n.eventStatuses[e.data.eventStatusCode],u=Juno.Common.Util.exists(s.sortOrder);Juno.Common.Util.exists(s)&&Juno.Common.Util.exists(s.icon)&&Juno.Common.Util.exists(e)&&Juno.Common.Util.exists(e.data)?(l+="<img class='event-status",u&&(l+=" rotate"),l+="' src='"+n.getIconPath(s.icon,e.data.eventStatusModifier)+"' />"):(l='<span class="event-status',Juno.Common.Util.exists(s)?(u&&(l+=" rotate "),l+='" title="'+Juno.Common.Util.escapeHtml(s.name)+'">'+Juno.Common.Util.escapeHtml(s.displayLetter)+"</span>"):l+='" title="Unknown">?</span>');var c="";Juno.Common.Util.isBlank(e.data.demographicName)?Juno.Common.Util.isBlank(e.data.reason)||(c=Juno.Common.Util.escapeHtml(e.data.reason)):(c=Juno.Common.Util.escapeHtml(e.data.demographicName),Juno.Common.Util.isBlank(e.data.reason)||(c+=" ("+Juno.Common.Util.escapeHtml(e.data.reason)+")")),t(o).find(".fc-content").html(r+l+'<span class="event-encounter" title="Open Encounter">E</span><span class="event-invoice" title="Create Invoice">B</span><span class="event-demographic" title="View Patient">M</span><span class="event-rx" title="View Prescription">Rx</span>'+c)}},n.onViewRender=function(){n.isInitialized()&&n.calendar()&&(n.selectedDate=e(Juno.Common.Util.formatMomentDate(e(n.calendar().fullCalendar("getDate"))))),t("#ca-calendar").css("min-width",200*t(".fc-resource-cell").length)},n.afterRender=function(){t(".fc-agendaDay-button").click(function(){t("#schedule_container").css("min-width",200*t(".fc-resource-cell").length)})},n.openCreateEventDialog=function(e,t,o,a,r){if(m.hasPermission("scheduling_create")&&!n.openingDialog&&!n.dialog){n.openingDialog=!0;var i=null,l="";Juno.Common.Util.exists(r)?(i=r.id,l=r.display_name):null!==n.selectedSchedule&&(i=n.selectedSchedule.uuid);var s=n.getLoadedSchedule(i);if(null!==s){var c=angular.copy(s);c.display_name=l;var p={schedule:c,defaultEventStatus:null,startTime:e,endTime:t,timeInterval:n.timeIntervalMinutes(),scheduleTemplates:n.scheduleTemplates,availabilityTypes:n.availabilityTypes,sites:n.sites,events:n.events,eventData:{}};n.dialog=u.open({animation:!1,backdrop:"static",controller:"Schedule.EventController",templateUrl:"src/schedule/event.jsp",resolve:{type:[function(){return"create_edit_event"}],label:[function(){return"Appointment"}],parentScope:[function(){return n}],data:[function(){return p}],editMode:[function(){return!1}],keyBinding:[function(){return{bindKeyGlobal:function(){}}}],focus:[function(){return d}]}}),n.dialog.result.catch(function(e){if("cancel"!==e&&"escape key press"!==e)throw e}),n.dialog.closed.then(function(){n.dialog=null})}n.openingDialog=!1}},n.openPatientDialog=function(e,t,n){return this.$uibModal.open({animation:!1,backdrop:"static",size:"lg",controller:"Invoice.Common.Patient.FormController",templateUrl:"code/invoice/common/patient/quick_form.html",resolve:{edit_mode:e,on_save_callback:t,load_error_link_patient_fn:n}})},n.openPatientDemographic=function(e){if(0!=e.data.demographicNo){var t={demographicNo:e.data.demographicNo};angular.isDefined(e.data.appointmentNo)&&(t.appointmentNo=e.data.appointmentNo,t.encType="face to face encounter with client"),c.go("record.summary",t)}},n.openEditEventDialog=function(e){if(m.hasPermission("scheduling_edit")&&!n.openingDialog&&!n.dialog){n.openingDialog=!0;var t=e.resourceId,o=e.data.demographicName;null==o&&(o="");var a=n.getLoadedSchedule(t);if(null!==a){var r=angular.copy(a);r.display_name=o;var i={schedule:r,defaultEventStatus:null,startTime:e.start,endTime:e.end,timeInterval:n.timeIntervalMinutes(),availabilityTypes:n.availabilityTypes,sites:n.sites,events:n.events,eventData:e.data};n.dialog=u.open({animation:!1,backdrop:"static",controller:"Schedule.EventController",templateUrl:"src/schedule/event.jsp",resolve:{type:[function(){return"create_edit_event"}],label:[function(){return"Appointment"}],parentScope:[function(){return n}],data:[function(){return i}],editMode:[function(){return!0}],keyBinding:[function(){return{bindKeyGlobal:function(){}}}],focus:[function(){return d}]}}),n.dialog.result.catch(function(e){if("cancel"!==e&&"escape key press"!==e)throw e}),n.dialog.closed.then(function(){n.dialog=null})}n.openingDialog=!1}},n.onEventClicked=function(e,o,a){t(o.target).is(".event-status.rotate")?n.rotateEventStatus(e):t(o.target).is(".event-encounter")?window.open(n.getEncounterLink(e)):t(o.target).is(".event-invoice")?window.open(n.getBillingLink(e)):t(o.target).is(".event-demographic")?n.openPatientDemographic(e):t(o.target).is(".event-rx")?window.open(n.getRxLink(e)):n.openEditEventDialog(e)},n.onEventDrop=function(t,o,a,r,i,l){if(m.hasPermission("scheduling_create")){n.setCalendarLoading(!0);var s=angular.copy(t.data);s.providerNo=t.resourceId,n.moveEvent(s,o,!0).then(function(o){var a=e(o.startTime,"YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ",!1),r=e(o.endTime,"YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ",!1);t.data.startTime=Juno.Common.Util.formatMomentTime(a,Juno.Common.Util.settings.datetime_no_timezone_format),t.data.endTime=Juno.Common.Util.formatMomentTime(r,Juno.Common.Util.settings.datetime_no_timezone_format),t.data.providerNo=o.providerNo,n.setCalendarLoading(!1)},function(e){console.log("failed to save event",e),a(),n.setCalendarLoading(!1)})}else a()},n.onEventResize=function(t,o,a,r,i,l){if(m.hasPermission("scheduling_create")){n.setCalendarLoading(!0);var s=angular.copy(t.data);s.providerNo=t.resourceId,n.moveEvent(s,o,!1).then(function(o){var a=e(o.startTime,"YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ",!1),r=e(o.endTime,"YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ",!1);t.data.startTime=Juno.Common.Util.formatMomentTime(a,Juno.Common.Util.settings.datetime_no_timezone_format),t.data.endTime=Juno.Common.Util.formatMomentTime(r,Juno.Common.Util.settings.datetime_no_timezone_format),t.data.providerNo=o.providerNo,n.setCalendarLoading(!1)},function(e){console.log("failed to resize event",e),a(),n.setCalendarLoading(!1)})}else a()},n.onSiteChanged=function(){return n.onScheduleChanged()},n.onScheduleChanged=function(){var e=n.selectedSchedule,t=n.selectedSiteName;Juno.Common.Util.exists(e)&&(Juno.Common.Util.exists(t)?n.selectedSiteName=t:n.selectedSiteName=null,n.loadSelectedSchedules().then(n.refetchEvents))},n.onTimeIntervalChanged=function(){n.scheduleTimeInterval=n.selectedTimeInterval,n.uiConfig.calendar.slotDuration=n.selectedTimeInterval,n.uiConfig.calendar.slotLabelInterval=n.selectedTimeInterval,n.applyUiConfig(n.uiConfig)},n.loadScheduleOptions=function(){var e=i.defer();return p.getScheduleGroups().then(function(t){for(var o=0;o<t.length;o++){var a=t[o];if(t[o].uuid=t[o].identifier,n.scheduleOptions.push(a),angular.isArray(a.providerNos)&&1==a.providerNos.length&&a.providerNos[0].toString()==a.identifier){var r=a.providerNos[0];n.resourceOptionHash[r]={id:r,uuid:r,name:r,title:a.name,display_name:a.name}}}e.resolve(t)}),e.promise},n.loadSiteOptions=function(){var e=i.defer();return n.loadSites().then(function(t){if(n.sites={},n.siteOptions=[],angular.isArray(t)&&t.length>0){for(var o=0;o<t.length;o++)n.sites[t[o].name]=t[o];n.siteOptions=[{uuid:null,name:null,display_name:"All"}],n.siteOptions=n.siteOptions.concat(t)}e.resolve(t)}),e.promise},n.loadSites=function(){var e=i.defer();return p.getSites().then(function(t){var n=[];if(angular.isArray(t))for(var o=0;o<t.length;o++)n.push({uuid:t[o].siteId,name:t[o].name,display_name:t[o].name,color:t[o].bgColor});e.resolve(n)}),e.promise},n.$watch("scheduleService.selectedDate",function(e,t){e!==t&&n.changeDate(e)}),n.applyUiConfig=function(e){n.uiConfigApplied=angular.copy(e)},n.initEventsAutoRefresh=function(){var e=i.defer(),t=n.scheduleAutoRefresh;null!==t&&clearInterval(t);var o=n.scheduleAutoRefreshMinutes;return(o=Juno.Common.Util.exists(o)&&Juno.Common.Util.isIntegerString(o)?parseInt(o):n.defaultAutoRefreshMinutes)>0&&(n.scheduleAutoRefresh=setInterval(n.refetchEvents,60*o*1e3)),e.resolve(),e.promise},n.uiConfig={calendar:{height:"auto",nowIndicator:!0,header:{left:"prev,next today title",center:"",right:""},allDaySlot:!1,defaultView:null,defaultDate:n.defaultDate,slotDuration:n.selectedTimeInterval,slotLabelInterval:n.selectedTimeInterval,slotLabelFormat:"h:mma",loading:n.setCalendarLoading,selectable:!0,select:n.openCreateEventDialog,eventClick:n.onEventClicked,eventRender:n.onEventRender,viewRender:n.onViewRender,eventAfterAllRender:n.afterRender,editable:!0,eventDrop:n.onEventDrop,eventResize:n.onEventResize,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source"}},n.init()}])}.call(this,n(5),n(3))},function(e,t,n){"use strict";(function(e,t){angular.module("Schedule").controller("Schedule.EventController",["$scope","$q","$timeout","$state","$uibModal","$uibModalInstance","errorsService","demographicService","securityService","keyBinding","focus","type","parentScope","label","editMode","data",function(n,o,a,r,i,l,s,u,c,d,p,m,h,g,f,v){n.parentScope=h,n.label=g,n.editMode=f,n.keyBinding=d,n.eventUuid=null,n.schedule=v.schedule,n.eventData={startDate:null,startTime:null,endDate:null,endTime:null,reason:null,notes:null},n.timeInterval=v.timeInterval,n.lastEventLength=null,n.patientTypeahead={},n.autocompleteValues={},n.activeTemplateEvents=[],n.eventStatuses=n.parentScope.eventStatuses,n.eventStatusOptions=[],n.selectedEventStatus=null,n.defaultEventStatus=null,n.selectedSiteName=null,n.timepickerFormat="h:mm A",n.fieldValueMapping={startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time"},n.displayMessages=s.factory(),n.initialized=!1,n.working=!1,n.demographicModel={demographicNo:null,fullName:null,hasPhoto:!0,patientPhotoUrl:"/imageRenderingServlet?source=local_client&clientId=0",data:{birthDate:null,healthNumber:null,ontarioVersionCode:null,phoneNumberPrimary:null},clear:function(){this.demographicNo=null,this.fullName=null,this.patientPhotoUrl="/imageRenderingServlet?source=local_client&clientId=0",this.data.birthDate=null,this.data.healthNumber=null,this.data.ontarioVersionCode=null,this.data.phoneNumberPrimary=null},fillData:function(t){this.demographicNo=t.demographicNo,this.fullName=Juno.Common.Util.formatName(t.firstName,t.lastName),this.patientPhotoUrl="/imageRenderingServlet?source=local_client&clientId="+(t.demographicNo?t.demographicNo:0);var n=null;n=Juno.Common.Util.exists(t.dob)?e(t.dob,"YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ",!1):Juno.Common.Util.getDateMomentFromComponents(t.dobYear,t.dobMonth,t.dobDay),this.data.birthDate=Juno.Common.Util.formatMomentDate(n),this.data.healthNumber=t.hin,this.data.ontarioVersionCode=t.ver,this.data.phoneNumberPrimary=t.phone},uploadPhoto:function(e){}},n.init=function(){c.hasPermission("scheduling_create")||a(function(){n.cancel()}),n.demographicModel.clear();var e=v.startTime,t=v.endTime;for(var o in n.eventData.startTime=Juno.Common.Util.formatMomentTime(e,n.timepickerFormat),n.eventData.endTime=Juno.Common.Util.formatMomentTime(t,n.timepickerFormat),n.eventData.startDate=Juno.Common.Util.formatMomentDate(e),n.eventData.endDate=Juno.Common.Util.formatMomentDate(t),n.lastEventLength=t.diff(e,"minutes"),n.setActiveTemplateEvents(),n.eventStatuses)n.eventStatuses.hasOwnProperty(o)&&n.eventStatusOptions.push(n.eventStatuses[o]);n.defaultEventStatus=v.defaultEventStatus,n.setSelectedEventStatus(v.eventData.eventStatusCode),f?(n.eventUuid=v.eventData.appointmentNo,n.eventData.reason=v.eventData.reason,n.eventData.notes=v.eventData.notes,n.initPatientAutocomplete(v.eventData.demographicNo).then(function(){n.initialized=!0}),n.selectedSiteName=v.eventData.site):(n.adjustEndDatetime(),n.demographicModel.clear(),p.element("#input-patient"),n.initialized=!0)},n.initPatientAutocomplete=function(e){var t=o.defer();return Juno.Common.Util.exists(e)&&0!=e?u.getDemographic(e).then(function(e){n.patientTypeahead=e,t.resolve()},function(e){console.log("error initializing patient autocomplete",e),n.demographicModel.clear(),t.resolve()}):(n.demographicModel.clear(),t.resolve()),t.promise},n.setSelectedEventStatus=function(e){var t=n.defaultEventStatus;Juno.Common.Util.exists(e)&&(t=e),Juno.Common.Util.exists(t)&&Juno.Common.Util.exists(n.eventStatuses[t])||(t=n.eventStatusOptions[0].displayLetter),n.selectedEventStatus=n.eventStatuses[t]},n.setActiveTemplateEvents=function(){for(var e=Juno.Common.Util.getDateAndTimeMoment(n.eventData.startDate,n.formattedTime(n.eventData.startTime)),t=Juno.Common.Util.getDateAndTimeMoment(n.eventData.endDate,n.formattedTime(n.eventData.endTime)),o=[],a=0;a<v.events.length;a++)if("background"==v.events[a].rendering&&v.events[a].resourceId==n.schedule.uuid){var r=angular.copy(v.events[a]);r.start=Juno.Common.Util.getDatetimeNoTimezoneMoment(r.start),r.end=Juno.Common.Util.getDatetimeNoTimezoneMoment(r.end),e.isValid()&&t.isValid()&&r.start.isValid()&&r.end.isValid()&&e.isBefore(r.end)&&t.isAfter(r.start)&&(r.availabilityType=v.availabilityTypes[r.scheduleTemplateCode],o.push(r))}n.activeTemplateEvents=o},n.adjustEndDatetime=function(e){var t=Juno.Common.Util.getDateAndTimeMoment(n.eventData.startDate,n.formattedTime(n.eventData.startTime));if(t.isValid()){var o=Juno.Common.Util.exists(e)?e:n.lastEventLength,a=t.add(o,"minutes");n.eventData.endDate=Juno.Common.Util.formatMomentDate(a),n.eventData.endTime=Juno.Common.Util.formatMomentTime(a,n.timepickerFormat)}},n.updateLastEventLength=function(){var e=Juno.Common.Util.getDateAndTimeMoment(n.eventData.startDate,n.formattedTime(n.eventData.startTime)),t=Juno.Common.Util.getDateAndTimeMoment(n.eventData.endDate,n.formattedTime(n.eventData.endTime));if(e.isValid()&&t.isValid()){var o=t.diff(e,"minutes");o>0&&(n.lastEventLength=o)}},n.validateForm=function(){if(n.displayMessages.clear(),Juno.Common.Util.validateDateString(n.eventData.startDate,n.displayMessages,"startDate","Start Time",!0),Juno.Common.Util.validateTimeString(n.formattedTime(n.eventData.startTime),n.displayMessages,"startTime","Start Time",!0),Juno.Common.Util.validateDateString(n.eventData.endDate,n.displayMessages,"endDate","End Time",!0),Juno.Common.Util.validateTimeString(n.formattedTime(n.eventData.endTime),n.displayMessages,"endTime","End Time",!0),!n.displayMessages.has_errors()){var e=Juno.Common.Util.getDateAndTimeMoment(n.eventData.startDate,n.formattedTime(n.eventData.startTime)),t=Juno.Common.Util.getDateAndTimeMoment(n.eventData.endDate,n.formattedTime(n.eventData.endTime));(t.isSame(e)||t.isBefore(e))&&n.displayMessages.addStandardError("The appointment must end after it starts")}return!n.displayMessages.has_errors()},n.saveEvent=function(){var e=o.defer(),t=Juno.Common.Util.getDateAndTimeMoment(n.eventData.startDate,n.formattedTime(n.eventData.startTime)),a=Juno.Common.Util.getDateAndTimeMoment(n.eventData.endDate,n.formattedTime(n.eventData.endTime));return h.saveEvent(f,{appointmentNo:n.eventUuid,startTime:t,endTime:a,reason:n.eventData.reason,notes:n.eventData.notes,providerNo:n.schedule.uuid,eventStatusCode:n.selectedEventStatus.displayLetter,demographicNo:n.demographicModel.demographicNo,site:n.selectedSiteName}).then(function(t){h.processSaveResults(t,n.displayMessages)?e.resolve(t):e.reject(t)},function(t){h.processSaveResults(t,n.displayMessages),e.reject()}),e.promise},n.deleteEvent=function(){var e=o.defer();return h.deleteEvent(n.eventUuid).then(function(){e.resolve()},function(){e.reject()}),e.promise},n.formattedTime=function(e){return e.replace(/ /g,"")},n.loadPatientFromTypeahead=function(e){n.demographicModel.fillData(e)},n.$watch("startDate",function(e,t){e!==t&&(n.setActiveTemplateEvents(),n.adjustEndDatetime())}),n.$watch("startTime",function(e,t){e!==t&&(n.setActiveTemplateEvents(),n.adjustEndDatetime())}),n.$watch("endDate",function(e,t){e!==t&&(n.setActiveTemplateEvents(),n.updateLastEventLength())}),n.$watch("endTime",function(e,t){e!==t&&(n.setActiveTemplateEvents(),n.updateLastEventLength())}),n.$watch("patientTypeahead",function(){n.loadPatientFromTypeahead(n.patientTypeahead)}),n.loadedNewPhoto=function(e,t){null!=e&&(n.preview_patient_image=e,n.new_photo=!0,n.demographicModel.hasPhoto=!0,n.demographicModel.uploadPhoto(e))},n.isWorking=function(){return n.working},n.isInitialized=function(){return n.initialized},n.isPatientSelected=function(){return Juno.Common.Util.exists(n.demographicModel.demographicNo)},n.hasSites=function(){return h.siteOptions.length>0},n.clearPatient=function(){n.autocompleteValues.patient=null,n.demographicModel.clear()},n.setEventLength=function(e){n.adjustEndDatetime(e)},n.save=function(){if(!n.validateForm())return!1;n.working=!0,n.saveEvent().then(function(){n.parentScope.refetchEvents(),l.close(),n.working=!1},function(){console.log(n.displayMessages.field_errors().location),n.displayMessages.has_standard_errors()||n.displayMessages.add_generic_fatal_error(),n.working=!1})},n.del=function(){n.working=!0,n.deleteEvent().then(function(){n.parentScope.refetchEvents(),l.close(),n.working=!1},function(){n.displayMessages.add_generic_fatal_error(),n.working=!1})},n.cancel=function(){l.dismiss("cancel")},n.saveAndBill=function(){if(!n.validateForm())return!1;n.working=!0,n.saveEvent().then(function(){n.parentScope.refetchEvents(),l.close(),n.working=!1,n.parentScope.openCreateInvoice(n.eventUuid,n.schedule.uuid,n.demographicModel.demographicNo)},function(){n.displayMessages.add_generic_fatal_error(),n.working=!1})},n.viewInvoices=function(){n.parentScope.open_view_invoices(n.eventUuid)},n.createPatient=function(){n.create_patient_dialog=h.calendar_api_adapter.openPatientDialog(function(){return!1},function(){return n.onPatientModalSave},function(){return n.onPatientModalSave})},n.modify_patient=function(){if(n.demographicModel.demographicNo){n.modify_patient_dialog=h.calendar_api_adapter.openPatientDialog(function(){return!0},function(){return n.onPatientModalSave},function(){return n.onPatientModalSave})}},n.onPatientModalSave=function(e){n.demographicModel.demographicNo=e,n.initPatientAutocomplete()},n.searchPatients=function(e){var t={type:"Name",term:e,status:"active",integrator:!1,outofdomain:!0};return demographicsService.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({demographicNo:e.content[n].demographicNo,name:Juno.Common.Util.formatName(e.content[n].firstName,e.content[n].lastName)});return t},function(e){console.log(e)})},n.newDemographic=function(e){i.open({templateUrl:"src/patient/newPatient.jsp",controller:"Patient.NewPatientController as newPatientCtrl",backdrop:"static",size:e}).result.then(function(e){console.log(e),console.log("patient #: ",e.demographicNo),n.initPatientAutocomplete(e.demographicNo)},function(e){console.log("Modal dismissed at: "+new Date),console.log(e)}),console.log(t("#myModal"))},n.keyBindSettings={"ctrl+enter":{title:"Ctrl+Enter",tooltip:"Save",description:"Save appointment",callback_fn:function(){n.isWorking()||n.save()},target:null},"ctrl+shift+enter":{title:"Ctrl+Shift+Enter",tooltip:"Save And Bill",description:"Save and bill for appointment",callback_fn:function(){n.isWorking()||n.saveAndBill()},target:null}},n.keyBinding.bindKeyGlobal("ctrl+enter",n.keyBindSettings["ctrl+enter"]),n.keyBinding.bindKeyGlobal("ctrl+shift+enter",n.keyBindSettings["ctrl+shift+enter"])}])}).call(this,n(5),n(3))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(8);angular.module("Schedule").controller("Schedule.AppointmentAddController",["$scope","$filter","$uibModalInstance","$timeout","$http","$httpParamSerializer","demographicService","demographicsService","me","providerService","scheduleService","apptDate",function(n,o,a,r,i,l,s,u,c,d,p,m){var h=this;h.appointmentApi=new t.AppointmentApi(i,l,"../ws/rs"),h.types=[],h.urgencies=[{value:"",label:"Normal"},{value:"critical",label:"Critical"}],h.me=c,h.appointment={status:"t",appointmentDate:o("date")(m,"yyyy-MM-dd"),startTime:"09:00 AM",type:"",duration:15,providerName:c.formattedName,providerNo:c.providerNo,reason:"",notes:"",location:"",resources:"",critical:""},p.getTypes().then(function(e){h.types=e.types,h.types.unshift({name:"",duration:15,location:"",notes:"",reason:"",resources:""}),console.log(JSON.stringify(e))},function(e){console.log(e)}),h.selectType=function(){for(var e=null,t=0;t<h.types.length;t++)if(h.types[t].name==h.appointment.type){e=h.types[t];break}null!=e&&(h.appointment.duration=e.duration,h.appointment.location=e.location,h.appointment.notes=e.notes,h.appointment.reason=e.reason,h.appointment.resources=e.resources)},h.close=function(){h.needsUpdate?confirm("You have unsaved changes, are you sure?")&&a.close(!1):a.close(!1)},h.validate=function(){var e=h.appointment;return h.errors=[],null==e.demographic&&h.errors.push("You must select a patient"),null==e.providerNo&&h.errors.push("You must select a provider"),null!=e.startTime&&0!=e.startTime.length||h.errors.push("start time is required"),null!=e.duration&&0!=e.duration.length||h.errors.push("start time is required"),!(h.errors.length>0)},h.save=function(){if(h.showErrors=!0,h.validate()){var t=Juno.Common.Util.getDateAndTimeMoment(h.appointment.appointmentDate,h.formattedTime(h.appointment.startTime)),n=Juno.Common.Util.getDateAndTimeMoment(h.appointment.appointmentDate,h.formattedTime(h.appointment.startTime)).add(e.duration(h.appointment.duration,"minutes")),o={eventStatusCode:h.appointment.status,startTime:t,endTime:n,reason:h.appointment.reason,notes:h.appointment.notes,demographicNo:h.appointment.demographicNo,providerNo:h.appointment.providerNo,site:h.appointment.location,type:h.appointment.type,resources:h.appointment.resources,urgency:h.appointment.critical};console.log(JSON.stringify(o)),h.appointmentApi.addAppointment(o).then(function(e){a.close(!0)},function(e){console.log(e)})}},h.formattedTime=function(e){return e.replace(/ /g,"")},h.updateDemographicNo=function(e,t,n){s.getDemographic(t).then(function(e){h.appointment.demographicNo=e.demographicNo,h.appointment.demographicName="",h.appointment.demographic=e},function(e){console.log(e)})},h.searchPatients=function(e){var t={type:u.SEARCH_MODE.Name,term:e,status:u.STATUS_MODE.ACTIVE,integrator:!1,outofdomain:!0};return u.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.data.length;n++)t.push({demographicNo:e.data[n].demographicNo,name:e.data[n].lastName+","+e.data[n].firstName});return t},function(e){console.log(e)})},h.searchProviders=function(e){var t={searchTerm:e,active:!0};return d.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},h.updateProviderNo=function(e,t,n){h.appointment.providerNo=t,h.appointment.providerName=n}}])}.call(this,n(5))},function(e,t){angular.module("Schedule").controller("Schedule.AppointmentViewController",["$scope","$filter","$uibModalInstance","$timeout","demographicService","me","providerService","scheduleService","appointment","statusList",function(e,t,n,o,a,r,i,l,s,u){var c=this;c.me=r,c.appointment=s,c.statusList=u.content,c.appointmentUpdate={},c.appointmentWriteAccess=!1,c.getStatus=function(e){for(var t=0;t<c.statusList.length;t++)if(console.log(JSON.stringify(c.statusList[t])),c.statusList[t].status==e)return c.statusList[t].description;return e},c.close=function(){n.close(!1)},c.deleteAppointment=function(){confirm("Are you sure you want to delete this appointment?")&&l.deleteAppointment(c.appointment.id).then(function(e){n.close(!0)},function(e){console.log(e)})},c.searchProviders=function(e){var t={searchTerm:e,active:!0};return i.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},c.updateProviderNo=function(e,t,n){c.appointment.providerNo=t,c.appointment.providerName=n},c.editProvider=function(){c.showProviderFormControl=!0,c.appointmentUpdate.providerNo=c.appointment.providerNo,c.appointmentUpdate.providerName=c.appointment.provider.lastName+","+c.appointment.provider.lastName},c.updateProvider=function(e,t,n){c.needsUpdate=!0,c.appointment.providerNo=t,c.appointment.providerName=n,c.showProviderFormControl=!1},c.cancelProviderUpdate=function(){c.appointmentUpdate.providerNo=null,c.appointmentUpdate.providerName=null,c.showProviderFormControl=!1},c.showAppointmentHistory=function(){l.appointmentHistory(c.appointment.demographicNo).then(function(e){alert(JSON.stringify(e))},function(e){console.log(e)})},c.noShowAppointment=function(){l.noShowAppointment(c.appointment.id).then(function(e){n.close(!0)},function(e){console.log(e)})},c.cancelAppointment=function(){l.cancelAppointment(c.appointment.id).then(function(e){n.close(!0)},function(e){console.log(e)})}}])},function(e,t,n){"use strict";angular.module("Admin",["Common","Common.Services"])},function(e,t){angular.module("oscarProviderViewModule").controller("AdminCtrl",["$scope","$http",function(e,t){}])},function(e,t,n){"use strict";angular.module("Admin.Integration",["Common","Common.Services"])},function(e,t,n){"use strict";angular.module("Admin.Integration.Fax",["Common","Common.Services"])},function(e,t){angular.module("Admin.Integration.Fax").controller("Admin.Integration.Fax.FaxConfigurationController",["$uibModal","faxAccountService","providerService","systemPreferenceService",function(e,t,n,o){var a=this;a.faxAccountList=[],a.loggedInProvider=null,a.masterFaxDisabled=!0,a.masterFaxEnabledInbound=!1,a.masterFaxEnabledOutbound=!1,a.initialize=function(){null==a.loggedInProvider&&n.getMe().then(function(e){a.loggedInProvider=e},function(e){console.error(e)}),o.isPreferenceEnabled("masterFaxEnabledInbound",a.masterFaxEnabledInbound).then(function(e){a.masterFaxEnabledInbound=e,a.updateMasterFaxDisabledStatus()},function(e){console.error(e)}),o.isPreferenceEnabled("masterFaxEnabledOutbound",a.masterFaxEnabledOutbound).then(function(e){a.masterFaxEnabledOutbound=e,a.updateMasterFaxDisabledStatus()},function(e){console.error(e)}),t.listAccounts().then(function(e){a.faxAccountList=e},function(e){console.error(e)})},a.editNewFaxAccount=function(){a.editFaxAccount()},a.editFaxAccount=function(t){let n=!0;t&&(n=!1),e.open({templateUrl:"src/admin/integration/fax/faxConfigurationEdit.jsp",controller:"Admin.Integration.Fax.FaxConfigurationEditController as faxConfigEditController",backdrop:"static",windowClass:"faxEditModal",resolve:{faxAccount:function(){return t},masterFaxEnabledInbound:function(){return a.masterFaxEnabledInbound},masterFaxEnabledOutbound:function(){return a.masterFaxEnabledOutbound}}}).result.then(function(e){n?a.faxAccountList.push(e):angular.copy(e,t)},function(e){})},a.saveMasterFaxEnabledStateInbound=function(){a.setSystemProperty("masterFaxEnabledInbound",a.masterFaxEnabledInbound),a.updateMasterFaxDisabledStatus()},a.saveMasterFaxEnabledStateOutbound=function(){a.setSystemProperty("masterFaxEnabledOutbound",a.masterFaxEnabledOutbound),a.updateMasterFaxDisabledStatus()},a.updateMasterFaxDisabledStatus=function(){a.masterFaxDisabled=!a.masterFaxEnabledInbound&&!a.masterFaxEnabledOutbound},a.setSystemProperty=function(e,t){o.setPreference(e,t).then(function(e){},function(e){console.error(e)})},a.initialize()}])},function(e,t){angular.module("Admin.Integration.Fax").controller("Admin.Integration.Fax.FaxConfigurationEditController",["$uibModal","$uibModalInstance","faxAccountService","faxAccount","masterFaxEnabledInbound","masterFaxEnabledOutbound",function(e,t,n,o,a,r){var i=this;i.connectionStatusEnum=Object.freeze({unknown:1,success:2,failure:3}),i.coverLetterOptions=["None","Basic","Standard","Company","Personal"],i.initialize=function(){o?(i.faxAccount=angular.copy(o),i.faxAccount.connectionStatus||i.setDefaultConnectionStatus()):i.faxAccount={enabled:!0,enableInbound:!1,enableOutbound:!1,accountLogin:null,accountEmail:"",password:"",displayName:"",coverLetterOption:"",faxNumber:"",connectionStatus:i.connectionStatusEnum.unknown},i.masterFaxEnabledInbound=a,i.masterFaxEnabledOutbound=r,i.masterFaxEnabledInbound||(i.faxAccount.enableInbound=!1),i.masterFaxEnabledOutbound||(i.faxAccount.enableOutbound=!1)},i.saveSettings=function(e){if(!e.$valid)return void alert("The form contains errors");let o=function(e){e.connectionStatus=i.faxAccount.connectionStatus,t.close(e)},a=function(e){console.error(e)};i.faxAccount.id?n.updateAccountSettings(i.faxAccount.id,i.faxAccount).then(o,a):n.addAccountSettings(i.faxAccount).then(o,a)},i.cancel=function(){t.dismiss("cancel")},i.testConnection=function(){n.testConnection(i.faxAccount).then(function(e){i.faxAccount.connectionStatus=e?i.connectionStatusEnum.success:i.connectionStatusEnum.failure},function(e){console.error(e),i.faxAccount.connectionStatus=i.connectionStatusEnum.unknown})},i.setDefaultConnectionStatus=function(){i.faxAccount.connectionStatus=i.connectionStatusEnum.unknown},i.initialize()}])},function(e,t,n){(function(e){angular.module("Admin.Integration.Fax").controller("Admin.Integration.Fax.FaxSendReceiveController",["NgTableParams","providerService","faxAccountService","faxInboundService","faxOutboundService",function(t,n,o,a,r){var i=this;i.systemStatusEnum=Object.freeze({sent:"SENT",queued:"QUEUED",error:"ERROR"}),i.tabEnum=Object.freeze({inbox:0,outbox:1}),i.activeTab=i.tabEnum.outbox,i.loggedInProviderNo=null,i.nextPullTime=null,i.nextPushTime=null,i.selectedFaxAccount=null,i.faxAccountList=[],i.outboxItemList=[],i.inboxItemList=[],i.inbox={search:{page:1,count:10,sorting:{DateSent:"desc"}},startDate:null,endDate:null},i.outbox={search:{page:1,count:10,sorting:{DateSent:"desc"}},startDate:null,endDate:null},i.initialize=function(){o.listAccounts().then(function(e){i.faxAccountList=e,i.faxAccountList.length>0&&(i.selectedFaxAccount=i.faxAccountList[0])},function(e){console.error(e)}),i.loadNextPushTime(),i.loadNextPullTime()},i.loadOutboxItems=function(){i.tableParamsOutbox=new t(i.outbox.search,{getData:function(e){i.outbox.search=e.url();let t={page:i.outbox.search.page,perPage:i.outbox.search.count},n={startDate:i.formatOptionalDateParam(i.outbox.startDate),endDate:i.formatOptionalDateParam(i.outbox.endDate)};var a=new Juno.Common.SearchListHelper(t,n);return o.getOutbox(i.selectedFaxAccount.id,a).then(function(e){return i.outboxItemList=e.data,i.tableParamsOutbox.total(e.meta.total),i.outboxItemList},function(e){console.error(e),alert("Failed to load outbox")})}}),i.loadNextPushTime()},i.loadInboxItems=function(){i.tableParamsInbox=new t(i.inbox.search,{getData:function(e){i.inbox.search=e.url(),console.info(i.inbox);let t={page:i.inbox.search.page,perPage:i.inbox.search.count},n={startDate:i.formatOptionalDateParam(i.inbox.startDate),endDate:i.formatOptionalDateParam(i.inbox.endDate)};var a=new Juno.Common.SearchListHelper(t,n);return o.getInbox(i.selectedFaxAccount.id,a).then(function(e){return i.inboxItemList=e.data,i.tableParamsInbox.total(e.meta.total),i.inboxItemList},function(e){console.error(e),alert("Failed to load inbox")})}}),i.loadNextPullTime()},i.resendFax=function(e){e.systemStatus="RESEND",r.resendOutboundFax(e.id).then(function(t){angular.copy(t,e),console.info(e),e.systemStatus===i.systemStatusEnum.error&&alert(e.systemStatusMessage)},function(t){e.systemStatus=i.systemStatusEnum.error,console.error(t),alert(t)})},i.loadNextPullTime=function(){a.getNextPullTime().then(function(e){i.nextPullTime=e},function(e){i.nextPullTime=null,console.error(e),alert(e)})},i.loadNextPushTime=function(){r.getNextPushTime().then(function(e){i.nextPushTime=e},function(e){i.nextPushTime=null,console.error(e),alert(e)})},i.changeTab=function(e){i.activeTab=e},i.openDocument=function(e){let t=function(){let t="segmentID="+e+"&providerNo="+i.loggedInProviderNo+"&status=A&inWindow=true&chartView&demoName=",n="ShowDocument"+e;window.open("../dms/showDocument.jsp?"+t,n,"scrollbars=1,width=1024,height=768")};null==i.loggedInProviderNo?n.getMe().then(function(e){i.loggedInProviderNo=e.providerNo,t()},function(e){console.error(e)}):t()},i.viewDownloadFile=function(e){let t=r.getDownloadUrl(e),n="ViewFaxFile"+e;window.open(t,n,"scrollbars=1,width=1024,height=768")},i.formatOptionalDateParam=function(t){return Juno.Common.Util.isUndefinedOrNull(t)?null:e(t).format("YYYY-MM-DD")},i.initialize()}])}).call(this,n(5))},function(e,t,n){"use strict";angular.module("Admin.Integration.Know2act",["Common","Common.Services"])},function(e,t){angular.module("Admin.Integration.Know2act").controller("Admin.Integration.Know2act.k2aConfigController",["k2aService",function(e){var t=this;t.PrevListQuantity=10,t.availablePreventionRuleSets=[],t.currentPreventionRulesSet=[],t.clinicName="",t.k2aActive=!1,t.checkStatus=function(){e.isK2AInit().then(function(e){t.k2aActive=e,t.k2aActive&&(t.getPreventionRulesList(),t.getCurrentPreventionRulesVersion())},function(e){console.error(e),alert("Failed to verify K2A Status")})},t.checkStatus(),t.getPreventionRulesList=function(){e.preventionRulesList().then(function(e){t.availablePreventionRuleSets=e,console.log("availablePreventionRuleSets",t.availablePreventionRuleSets)},function(e){console.error(e)})},t.getCurrentPreventionRulesVersion=function(){e.getCurrentPreventionRulesVersion().then(function(e){t.currentPreventionRulesSet=e,console.log("currentPreventionRulesSet",e)},function(e){console.error(e)})},t.loadPreventionRuleById=function(t){e.loadPreventionRuleById(t).then(function(t){e.getCurrentPreventionRulesVersion()})},t.increasePrevListQuantity=function(){t.PrevListQuantity=t.availablePreventionRuleSets.length},t.initK2A=function(){e.initK2A(t.clinicName).then(function(e){console.info("Init complete, check status",e),t.checkStatus()},function(e){console.log(e),alert("Failed to initialize K2A")})}}])},function(e,t){angular.module("Admin.Integration.Know2act").controller("Admin.Integration.Know2act.k2aNotificationController",["k2aService",function(e){var t=this;t.page={},t.page.notifications=[],t.readMore=function(t){e.getMoreNotification(t).then(function(e){window.open(e,"moreInfo","width=700,height=700").focus()},function(e){console.error(e)})},t.archive=function(n){e.ackNotification(n).then(function(e){t.getNotifications()},function(e){console.error(e),alert("Failed to acknowledge notification")})},t.getNotifications=function(){e.getNotifications().then(function(e){t.page.notifications=e},function(e){console.error(e),alert("Failed to load notifications")})},t.getNotifications()}])},function(e,t){angular.module("Admin.Integration.Know2act").controller("Admin.Integration.Know2act.k2aTemplateController",["reportByTemplateService","k2aService",function(e,t){var n=this;n.message="",n.k2aActive=!1,n.k2aReports=null,n.K2A_URL="",n.dtOptions={},n.checkStatus=function(){t.isK2AInit().then(function(e){n.k2aActive=e},function(e){console.error(e),alert("Failed to verify K2A Status")})},n.checkStatus(),n.getAllK2AReports=function(){e.getAllK2AReports().then(function(e){n.k2aReports=e,console.log("k2a reports",n.k2aReports)})},n.getAllK2AReports(),n.saveK2AReport=function(t){e.getK2AReportById(t).then(function(e){n.message=e,console.log(n.message),refreshParent()})},n.openK2AUrl=function(){e.getK2AUrl().then(function(e){window.open(e+"/#/ws/rs/posts/browse/Report")},function(e){console.log(e)})},n.refreshParent=function(){window.opener.document.location.href="../../../../oscarReport/reportByTemplate/homePage.jsp"},window.onunload=n.refreshParent()}])},function(e,t){angular.module("oscarProviderViewModule").controller("BillingCtrl",["$scope","$http",function(e,t){}])},function(e,t,n){"use strict";angular.module("Consults",["Common","Common.Services"])},function(e,t,n){(function(e){angular.module("Consults").controller("Consults.ConsultRequestAttachmentController",["$uibModalInstance","consultService","consult",function(t,n,o){var a=this;a.atth={},a.atth.patientName=o.demographic.lastName+", "+o.demographic.firstName,a.atth.attachedDocs=o.attachments,null!=a.atth.attachedDocs[0]&&(a.atth.selectedAttachedDoc=a.atth.attachedDocs[0]);var r=0;null!=o.id&&(r=o.id),n.getRequestAttachments(r,o.demographicId).then(function(e){null==o.availableDocs&&(o.availableDocs=Juno.Common.Util.toArray(e)),a.atth.availableDocs=o.availableDocs,null!=a.atth.availableDocs[0]&&(a.atth.selectedAvailableDoc=a.atth.availableDocs[0])},function(e){console.log(e)}),a.openDoc=function(e){window.open("../"+e.url)},a.attach=function(){if(null!=a.atth.selectedAvailableDoc){a.atth.attachedDocs.push(a.atth.selectedAvailableDoc),a.atth.selectedAttachedDoc=a.atth.selectedAvailableDoc,a.atth.selectedAttachedDoc.attached=!0;var t=a.atth.availableDocs.map(function(e){return e.documentNo+e.documentType}).indexOf(a.atth.selectedAvailableDoc.documentNo+a.atth.selectedAvailableDoc.documentType);a.atth.availableDocs.splice(t,1);var n=e("#selAvailDoc")[0].selectedIndex;n>=a.atth.availableDocs.length&&(n=a.atth.availableDocs.length-1),a.atth.selectedAvailableDoc=a.atth.availableDocs[n],o.attachmentsChanged=!0}},a.detach=function(){if(null!=a.atth.selectedAttachedDoc){a.atth.availableDocs.push(a.atth.selectedAttachedDoc),a.atth.selectedAvailableDoc=a.atth.selectedAttachedDoc,a.atth.selectedAvailableDoc.attached=!1;var t=a.atth.attachedDocs.map(function(e){return e.documentNo+e.documentType}).indexOf(a.atth.selectedAttachedDoc.documentNo+a.atth.selectedAttachedDoc.documentType);a.atth.attachedDocs.splice(t,1);var n=e("#selAttachDoc")[0].selectedIndex;n>=a.atth.attachedDocs.length&&(n=a.atth.attachedDocs.length-1),a.atth.selectedAttachedDoc=a.atth.attachedDocs[n],o.attachmentsChanged=!0}},a.done=function(){console.log("CLOSE MODAL"),t.close()}}])}).call(this,n(3))},function(e,t,n){(function(e){angular.module("Consults").controller("Consults.ConsultResponseAttachmentController",["$uibModalInstance","consultService","consult",function(t,n,o){controller.atth={},controller.atth.patientName=o.demographic.lastName+", "+o.demographic.firstName,controller.atth.attachedDocs=o.attachments,null!=controller.atth.attachedDocs[0]&&(controller.atth.selectedAttachedDoc=controller.atth.attachedDocs[0]);var a=0;null!=o.id&&(a=o.id),n.getResponseAttachments(a,o.demographic.demographicNo).then(function(e){null==o.availableDocs&&(o.availableDocs=Juno.Common.Util.toArray(e)),controller.atth.availableDocs=o.availableDocs,Juno.Consults.Common.sortAttachmentDocs(controller.atth.availableDocs),null!=controller.atth.availableDocs[0]&&(controller.atth.selectedAvailableDoc=controller.atth.availableDocs[0])},function(e){console.log(e)}),controller.openDoc=function(e){window.open("../"+e.url)},controller.attach=function(){if(null!=controller.atth.selectedAvailableDoc){controller.atth.attachedDocs.push(controller.atth.selectedAvailableDoc),controller.atth.selectedAttachedDoc=controller.atth.selectedAvailableDoc,controller.atth.selectedAttachedDoc.attached=!0,Juno.Consults.Common.sortAttachmentDocs(controller.atth.attachedDocs);var t=e("#selAvailDoc").val();controller.atth.availableDocs.splice(t,1),t>=controller.atth.availableDocs.length&&(t=controller.atth.availableDocs.length-1),controller.atth.selectedAvailableDoc=controller.atth.availableDocs[t],o.attachmentsChanged=!0}},controller.detach=function(){if(null!=controller.atth.selectedAttachedDoc){controller.atth.availableDocs.push(controller.atth.selectedAttachedDoc),controller.atth.selectedAvailableDoc=controller.atth.selectedAttachedDoc,controller.atth.selectedAvailableDoc.attached=!1,Juno.Consults.Common.sortAttachmentDocs(controller.atth.availableDocs);var t=e("#selAttachDoc").val();controller.atth.attachedDocs.splice(t,1),t>=controller.atth.attachedDocs.length&&(t=controller.atth.attachedDocs.length-1),controller.atth.selectedAttachedDoc=controller.atth.attachedDocs[t],o.attachmentsChanged=!0}},controller.done=function(){t.close()}}])}).call(this,n(3))},function(e,t,n){(function(e){angular.module("Consults").controller("Consults.ConsultRequestListController",["$scope","$timeout","$state","$location","NgTableParams","consultService","providerService","demographicService","demographicsService","securityService","staticDataService",function(t,n,o,a,r,i,l,s,u,c,d){var p=this;c.hasRight("_con","r").then(function(e){p.consultReadAccess=e},function(e){console.log(e)}),c.hasRight("_con","u").then(function(e){p.consultUpdateAccess=e},function(e){console.log(e)}),c.hasRight("_con","w").then(function(e){p.consultWriteAccess=e},function(e){console.log(e)}),p.statuses=d.getConsultRequestStatuses(),p.urgencies=d.getConsultUrgencies(),p.lastResponse="",p.teams=[],p.consult={};p.search={team:"All Teams",startIndex:0,numToReturn:10},l.getActiveTeams().then(function(e){p.teams=e,p.teams.unshift("All Teams"),console.log(JSON.stringify(e))},function(e){alert(e),console.log(e)}),p.searchPatients=function(e){var t={type:u.SEARCH_MODE.Name,term:e,status:u.STATUS_MODE.ACTIVE,integrator:!1,outofdomain:!0};return u.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.data.length;n++)t.push({demographicNo:e.data[n].demographicNo,name:e.data[n].lastName+", "+e.data[n].firstName});return t},function(e){console.log(e)})},p.searchMrps=function(e){var t={searchTerm:e,active:!0};return l.searchProviders(t).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({mrpNo:e[n].providerNo,name:e[n].name});return t},function(e){console.log(e)})},p.updateMrpNo=function(e){e instanceof Object?(p.search.mrpNo=Number(e.mrpNo),p.consult.mrpName=e.name):l.getProvider(e).then(function(e){p.consult.mrpName=e.lastName+", "+e.firstName},function(e){console.log(e)})},p.updateDemographicNo=function(e,t){null!=e?(p.search.demographicNo=e.demographicNo,p.consult.demographicName=e.name):s.getDemographic(t).then(function(e){p.consult.demographicName=e.lastName+", "+e.firstName},function(e){console.log(e)})},p.checkAll=function(){angular.forEach(p.lastResponse,function(e){e.checked=!0})},p.checkNone=function(){angular.forEach(p.lastResponse,function(e){e.checked=!1})},p.editConsult=function(e){var t="/record/"+e.demographic.demographicNo+"/consult/"+e.id;a.path(t).search(p.searchParams)},p.addConsult=function(){if(!p.consultWriteAccess)return alert("You don't have right to create new consult"),!1;var e="/record/"+p.search.demographicNo+"/consult/new";a.path(e).search(p.searchParams)},p.removeDemographicAssignment=function(){p.search.demographicNo=null,p.consult.demographicName=null},p.removeMrpAssignment=function(){p.search.mrpNo=null,p.consult.mrpName=null},p.doSearch=function(){p.tableParams.reload()},p.clear=function(){p.removeDemographicAssignment(),p.removeMrpAssignment();var e=null==o.params.demographicNo?null:Number(o.params.demographicNo);p.search={team:"All Teams",startIndex:0,numToReturn:10,demographicNo:e},p.doSearch()},p.setSearchParams=function(){p.searchParams={},"record.consultRequests"===o.$current.name?p.searchParams.list="patient":null!=p.search.demographicNo&&(p.searchParams.srhDemoNo=p.search.demographicNo),null!=p.search.mrpNo&&(p.searchParams.srhMrpNo=p.search.mrpNo),null!=p.search.status&&(p.searchParams.srhStatus=p.search.status),"All Teams"!=p.search.team&&(p.searchParams.srhTeam=p.search.team),null!=p.search.referralStartDate&&(p.searchParams.srhRefStartDate=p.search.referralStartDate.getTime()),null!=p.search.referralEndDate&&(p.searchParams.srhRefEndDate=p.search.referralEndDate.getTime()),null!=p.search.appointmentStartDate&&(p.searchParams.srhApptStartDate=p.search.appointmentStartDate.getTime()),null!=p.search.appointmentEndDate&&(p.searchParams.srhApptEndDate=p.search.appointmentEndDate.getTime()),null!=p.search.page&&(p.searchParams.srhToPage=p.search.page),null!=p.search.perPage&&(p.searchParams.srhCountPerPage=p.search.perPage),null!=p.search.sortDirection&&(p.searchParams.srhSortMode=p.search.sortColumn,p.searchParams.srhSortDir=p.search.sortDirection)},p.justOpen=!0,p.search.sortColumn="ReferralDate",p.search.sortDirection="desc",p.tableParams=new r({page:1,count:10,sorting:{ReferralDate:"desc"}},{getData:function(t){p.justOpen&&(p.getSavedSearchVals(),p.justOpen=!1),p.setSearchParams();var n=t.url().count,o=t.url().page;p.search.startIndex=(o-1)*n,p.search.numToReturn=parseInt(n),p.search.page=t.url().page,p.search.perPage=t.url().count;var a=/sorting\[(\w+)\]/g;for(var r in t.url()){var l=a.exec(String(r));l&&(p.search.sortColumn=l[1],p.search.sortDirection=t.url()[String(r)])}var s=angular.copy(p.search);return"All Teams"===s.team&&(s.team=null),i.searchRequests(s).then(function(n){t.total(parseInt(n.meta.total[0]));for(var o=0;o<n.data.length;o++){for(var a=n.data[o],r=0;r<p.statuses.length;r++)if(a.status==p.statuses[r].value){a.statusDescription=p.statuses[r].name;break}for(r=0;r<p.urgencies.length;r++)if(a.urgency==p.urgencies[r].value){a.urgencyDescription=p.urgencies[r].name;break}if(1==a.urgency&&(a.urgencyColor="text-danger"),4!=a.status&&5!=a.status&&7!=a.status){var i=e(a.referralDate).toDate();i.setMonth(i.getMonth()+1),new Date>=i&&(a.outstanding=!0)}}return p.lastResponse=n.data,n.data},function(e){alert(e),console.log(e)})}}),p.getSavedSearchVals=function(){null!=o.params.demographicNo?(p.hideSearchPatient=!0,p.search.demographicNo=Number(o.params.demographicNo)):null!=a.search().srhDemoNo&&(p.search.demographicNo=Number(a.search().srhDemoNo),p.updateDemographicNo(null,a.search().srhDemoNo)),null!=a.search().srhMrpNo&&(p.search.mrpNo=Number(a.search().srhMrpNo),p.updateMrpNo(a.search().srhMrpNo)),null!=a.search().srhRefStartDate&&(p.search.referralStartDate=new Date(Number(a.search().srhRefStartDate))),null!=a.search().srhRefEndDate&&(p.search.referralEndDate=new Date(Number(a.search().srhRefEndDate))),null!=a.search().srhApptStartDate&&(p.search.appointmentStartDate=new Date(Number(a.search().srhApptStartDate))),null!=a.search().srhApptEndDate&&(p.search.appointmentEndDate=new Date(Number(a.search().srhApptEndDate))),null!=a.search().srhStatus&&(p.search.status=Number(a.search().srhStatus)),null!=a.search().srhTeam&&(p.search.team=a.search().srhTeam),null!=a.search().srhCountPerPage&&(p.search.perPage=a.search().srhCountPerPage),null!=a.search().srhToPage&&(p.search.page=a.search().srhToPage),null!=a.search().srhSortMode&&null!=a.search().srhSortDir&&(p.search.sortColumn=a.search().sortMode,p.search.sortDirection=a.search().srhSortDir)},p.popup=function(e,t,n,o){windowprops="height="+e+",width="+t+",location=no,scrollbars=yes,menubars=no,toolbars=no,resizable=yes,screenX=0,screenY=0,top=0,left=0";var a=window.open(n,o,windowprops);null!=a&&null==a.opener&&(a.opener=self)}}])}).call(this,n(5))},function(e,t,n){(function(e,t){angular.module("Consults").controller("Consults.ConsultRequestController",["$scope","$http","$q","$resource","$location","$uibModal","consultService","demographicService","securityService","summaryService","staticDataService","consult","user",function(n,o,a,r,i,l,s,u,c,d,p,m,h){var g=this;g.consult=m,console.log(m),m.faxList=Juno.Common.Util.toArray(m.faxList),m.serviceList=Juno.Common.Util.toArray(m.serviceList),m.sendToList=Juno.Common.Util.toArray(m.sendToList),g.urgencies=p.getConsultUrgencies(),g.statuses=p.getConsultRequestStatuses(),g.hours=p.getHours(),g.minutes=p.getMinutes(),g.parseTime=function(e){var t=e.split(":");m.appointmentHour=t[0],m.appointmentMinute=t[1]},null!==m.appointmentTime&&g.parseTime(m.appointmentTime),g.initialize=function(){c.hasRight("_con","r").then(function(e){g.consultReadAccess=e},function(e){console.error(e)}),c.hasRight("_con","u").then(function(e){g.consultUpdateAccess=e},function(e){console.error(e)}),c.hasRight("_con","w").then(function(e){g.consultWriteAccess=e},function(e){console.error(e)}),u.getDemographic(m.demographicId).then(function(e){m.demographic=e,m.demographic.extras=Juno.Common.Util.toArray(m.demographic.extras);for(var t=0;t<m.demographic.extras.length;t++)if("demo_cell"==m.demographic.extras[t].key){m.demographic.cellPhone=m.demographic.extras[t].value;break}},function(e){console.error(e)}),s.getLetterheadList().then(function(e){if(m.letterheadList=Juno.Common.Util.toArray(e.data),null===m.letterhead)g.changeLetterhead(m.letterheadList[0]);else for(var t=0;t<m.letterheadList.length;t++)if(m.letterheadList[t].id===m.letterheadName){g.changeLetterhead(m.letterheadList[t]);break}},function(e){console.error(e)});for(var e=0;e<m.serviceList.length;e++)if(m.serviceList[e].serviceId==m.serviceId){g.specialists=Juno.Common.Util.toArray(m.serviceList[e].specialists);break}angular.forEach(g.specialists,function(e){m.professionalSpecialist&&e.id==m.professionalSpecialist.id&&(m.professionalSpecialist=e)}),m.attachments=Juno.Common.Util.toArray(m.attachments),Juno.Consults.Common.sortAttachmentDocs(m.attachments)},g.initialize(),g.changeLetterhead=function(e){m.letterhead=e,m.letterheadName=m.letterhead.id,m.letterheadAddress=m.letterhead.address,m.letterheadPhone=m.letterhead.phone,m.letterheadFax=m.letterhead.fax},g.consultChanged=0,n.$watchCollection(function(){return g.consult},function(e,t){g.consultChanged++}),n.$on("$stateChangeStart",function(e){g.consultChanged>0&&(confirm("You may have unsaved data. Are you sure to leave?")||e.preventDefault())}),g.changeService=function(t){var o=e("#serviceId")[0].selectedIndex;null!==o?g.specialists=Juno.Common.Util.toArray(m.serviceList[o].specialists):n.specialists=null},g.writeToBox=function(e,t){for(var n=Juno.Common.Util.toArray(e.summaryItem),o=null,a=0;a<n.length;a++)o=Juno.Common.Util.addNewLine(n[a].displayName,o);"clinicalInfo"==t?m.clinicalInfo=Juno.Common.Util.addNewLine(o,m.clinicalInfo):"concurrentProblems"==t?m.concurrentProblems=Juno.Common.Util.addNewLine(o,m.concurrentProblems):"currentMeds"==t&&(m.currentMeds=Juno.Common.Util.addNewLine(o,m.currentMeds))},g.getFamilyHistory=function(e){d.getFamilyHistory(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No family history"),g.writeToBox(t,e)},function(e){alert("Error grabbing family history!"),console.error(e)})},g.getMedicalHistory=function(e){d.getMedicalHistory(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No medical history"),g.writeToBox(t,e)},function(e){alert("Error grabbing medical history!"),console.error(e)})},g.getSocialHistory=function(e){d.getSocialHistory(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No social history"),g.writeToBox(t,e)},function(e){alert("Error grabbing social history!"),console.error(e)})},g.getOngoingConcerns=function(e){d.getOngoingConcerns(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No ongoing concerns"),g.writeToBox(t,e)},function(e){alert("Error grabbing ongoing concerns!"),console.error(e)})},g.getOtherMeds=function(e){d.getOtherMeds(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No other meds"),g.writeToBox(t,e)},function(e){alert("Error grabbing other meds!"),console.error(e)})},g.getReminders=function(e){d.getReminders(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No reminders"),g.writeToBox(t,e)},function(e){alert("Error grabbing reminders!"),console.error(e)})},g.getAllergies=function(e){d.getAllergies(m.demographicId).then(function(t){g.writeToBox(t,e)},function(e){console.error(e)})},g.invalidData=function(){return g.consult.urgency?g.consult.letterheadName?g.consult.professionalSpecialist?(null==g.consult.demographic||""==g.consult.demographic)&&(alert("Error! Invalid patient!"),!0):(alert("Please select a Specialist"),!0):(alert("Please select a Letterhead"),!0):(alert("Please select an Urgency"),!0)},g.setAppointmentTime=function(){null==m.appointmentHour||null==m.appointmentMinute||m.patientWillBook?m.appointmentTime=null:(apptTime=t(Date.now()),apptTime.set("hours",m.appointmentHour),apptTime.set("minute",m.appointmentMinute),m.appointmentTime=apptTime)},g.openAttach=function(e){window.open("../"+e.url)},g.attachFiles=function(){l.open({templateUrl:"src/consults/consultAttachment.jsp",controller:"Consults.ConsultRequestAttachmentController as consultAttachmentCtrl",windowClass:"attachment-modal-window",size:"lg",resolve:{consult:function(){return m}}}).result.then(function(){m.attachmentsChanged&&(g.consultChanged++,m.attachmentsChanged=!1)},function(e){console.error(e)})},g.setESendEnabled=function(){g.eSendEnabled=null!=m.professionalSpecialist&&null!=m.professionalSpecialist.eDataUrl&&""!=m.professionalSpecialist.eDataUrl.trim()},g.setESendEnabled(),g.save=function(){var e=a.defer(),t=!0;return g.consultWriteAccess||null!=m.id||(alert("You don't have right to save new consult"),t=!1),g.consultUpdateAccess||(alert("You don't have right to update consult"),t=!1),g.invalidData()&&(t=!1),t?(g.consultSaving=!0,g.setAppointmentTime(),s.saveRequest(m).then(function(t){null==m.id&&i.path("/record/"+m.demographicId+"/consult/"+t.id),e.resolve(t.id)},function(t){console.error(t),e.reject(t)}).finally(function(){g.setESendEnabled(),g.consultSaving=!1,g.consultChanged=0})):e.reject("Invalid"),e.promise},g.close=function(){"patient"===i.search().list?i.path("/record/"+m.demographicId+"/consults"):i.path("/consults")},g.saveAndFax=function(){g.save().then(function(e){var t=m.demographicId,n=Juno.Common.Util.noNull(m.letterhead.fax),o=Juno.Common.Util.noNull(m.professionalSpecialist.faxNumber);window.open("../fax/CoverPage.jsp?reqId="+e+"&demographicNo="+t+"&letterheadFax="+n+"&fax="+o)},function(e){})},g.eSend=function(){g.eSendEnabled&&s.eSendRequest(m.id).then(function(e){alert(e.message)},function(e){console.error(e)})},g.saveAndPrint=function(){g.save().then(function(e){g.print(e)},function(e){})},g.print=function(e){window.open("../oscarEncounter/oscarConsultationRequest/printPdf2.do?reqId="+e+"&demographicNo="+m.demographicId)}}])}).call(this,n(3),n(5))},function(e,t){angular.module("Consults").controller("Consults.ConsultResponseListController",["$scope","$timeout","$state","$location","NgTableParams","consultService","providerService","demographicService","demographicsService","securityService","staticDataService",function(e,t,n,o,a,r,i,l,s,u,c){var d=this;d.onRecordPage=!1,d.demographicNo=null,d.statuses=c.getConsultResponseStatuses(),d.urgencies=c.getConsultUrgencies(),d.lastResponse="",d.teams=[],d.consult={};d.search={team:"All Teams",startIndex:0,numToReturn:10},d.init=function(){n.params.demographicNo&&(d.demographicNo=parseInt(n.params.demographicNo),d.onRecordPage=!0,d.search.list="patient"),d.getAccessRights(),d.getTeams()},d.getAccessRights=function(){u.hasRight("_con","r").then(function(e){d.consultReadAccess=e},function(e){console.log(e)}),u.hasRight("_con","u").then(function(e){d.consultUpdateAccess=e},function(e){console.log(e)}),u.hasRight("_con","w").then(function(e){d.consultWriteAccess=e},function(e){console.log(e)})},d.getTeams=function(){i.getActiveTeams().then(function(e){d.teams=e,d.teams.unshift("All Teams"),d.search.team="All Teams"},function(e){console.log(e)})},d.searchPatients=function(e){var t={type:s.SEARCH_MODE.Name,term:e,status:s.STATUS_MODE.ACTIVE,integrator:!1,outofdomain:!0};return s.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.data.length;n++)t.push({demographicNo:e.data[n].demographicNo,name:e.data[n].lastName+", "+e.data[n].firstName});return t},function(e){console.log(e)})},d.searchMrps=function(e){var t={searchTerm:e,active:!0};return i.searchProviders(t).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({mrpNo:e[n].providerNo,name:e[n].name});return t},function(e){console.log(e)})},d.updateMrpNo=function(e){Juno.Common.Util.exists(e)?(d.search.mrpNo=Number(e.mrpNo),d.consult.mrpName=e.name):i.getProvider(e).then(function(t){d.search.mrpNo=Number(e),d.consult.mrpName=t.lastName+", "+t.firstName,d.doSearch(!0)},function(e){console.log(e)})},d.updateDemographicNo=function(e,t,n){null!==e&&(d.demographicName=e.name,d.demographicNo=e.demographicNo,d.tableParams.reload())},d.checkAll=function(){angular.forEach(d.lastResponse,function(e){e.checked=!0})},d.checkNone=function(){angular.forEach(d.lastResponse,function(e){e.checked=!1})},d.editConsult=function(e){return e?(url="/record/"+e.demographic.demographicNo+"/consultResponse/"+e.id,o.path(url).search(d.search),!0):(alert("Something went wrong"),!1)},d.addConsult=function(){if(!d.consultWriteAccess)return alert("You don't have right to create new consult response"),!1;if(d.demographicNo){var e="/record/"+d.demographicNo+"/consultResponse/new";return o.path(e).search(d.search),!0}return alert("Something went wrong"),!1},d.removeDemographicAssignment=function(){d.demographicNo=null,d.demographicName=null,d.tableParams.reload()},d.removeMrpAssignment=function(){d.search.mrpNo=null,d.consult.mrpName=null,d.tableParams.reload()},d.clear=function(){d.onRecordPage||d.removeDemographicAssignment(),d.removeMrpAssignment(),d.search={team:"All Teams",startIndex:0,numToReturn:10},d.doSearch()},d.doSearch=function(e){o.search(d.search),d.tableParams.reload()},d.tableParams=new a({page:1,count:10,sorting:{ReferralDate:"desc"}},{getData:function(e){d.getSavedSearchParams();var t=e._params.count,n=e.url().page;d.search.startIndex=(n-1)*t,d.search.numToReturn=parseInt(t),d.search.page=e.url().page,d.search.perPage=e.url().count;var o=/sorting\[(\w+)\]/g;for(var a in e.url()){var i=o.exec(String(a));i&&(d.search.sortColumn=i[1],d.search.sortDirection=e.url()[String(a)])}var l=angular.copy(d.search);return"All Teams"===l.team&&(l.team=null),d.demographicNo&&(l.demographicNo=d.demographicNo),r.searchResponses(l).then(function(t){e.total(parseInt(t.meta.total[0]));for(var n=0;n<t.data.length;n++){for(var o=t.data[n],a=0;a<d.statuses.length;a++)if(o.status===d.statuses[a].value){o.statusDescription=d.statuses[a].name;break}for(a=0;a<d.urgencies.length;a++)if(o.urgency===d.urgencies[a].value){o.urgencyDescription=d.urgencies[a].name;break}1===o.urgency&&(o.urgencyColor="text-danger")}return d.lastResponse=t.data,t.data},function(e){console.log(e)})}}),d.getSavedSearchParams=function(){null!=n.params.demographicNo?(d.hideSearchPatient=!0,d.updateDemographicNo(null,n.params.demographicNo)):null!=o.search().srhDemoNo&&d.updateDemographicNo(null,o.search().srhDemoNo),null!=o.search().srhMrpNo&&d.updateMrpNo(o.search().srhMrpNo),o.search().referralStartDate&&(d.search.referralStartDate=new Date(o.search().referralStartDate)),null!=o.search().referralEndDate&&(d.search.referralEndDate=new Date(o.search().referralEndDate)),null!=o.search().appointmentStartDate&&(d.search.appointmentStartDate=new Date(o.search().appointmentStartDate)),null!=o.search().appointmentEndDate&&(d.search.appointmentEndDate=new Date(o.search().appointmentEndDate)),null!=o.search().status&&(d.search.status=Number(o.search().status)),null!=o.search().team&&(d.search.team=o.search().team),null!=o.search().countPerPage&&(d.countPerPage=o.search().countPerPage),null!=o.search().toPage&&(d.toPage=o.search().toPage),null!=o.search().sortColumn&&null!=o.search().sortDirection&&(d.search.sortColumn=o.search().sortColumn,d.search.sortDirection=o.search().sortDirection)},d.init()}])},function(e,t,n){(function(e,t){angular.module("Consults").controller("Consults.ConsultResponseController",["$scope","$http","$resource","$location","$uibModal","consultService","demographicService","securityService","summaryService","staticDataService","consult","user",function(n,o,a,r,i,l,s,u,c,d,p,m){var h=this;h.initialize=function(){u.hasRight("_con","r").then(function(e){h.consultReadAccess=e},function(e){console.log(e)}),u.hasRight("_con","u").then(function(e){h.consultUpdateAccess=e},function(e){console.log(e)}),u.hasRight("_con","w").then(function(e){h.consultWriteAccess=e},function(e){console.log(e)}),h.consult=p,p.referringDoctorList=Juno.Common.Util.toArray(p.referringDoctorList),p.faxList=Juno.Common.Util.toArray(p.faxList),p.sendToList=Juno.Common.Util.toArray(p.sendToList),p.attachments=Juno.Common.Util.toArray(p.attachments),Juno.Consults.Common.sortAttachmentDocs(p.attachments),l.getLetterheadList().then(function(e){if(p.letterheadList=Juno.Common.Util.toArray(e.data),null===p.letterhead)h.changeLetterhead(p.letterheadList[0]);else for(var t=0;t<p.letterheadList.length;t++)if(p.letterheadList[t].id===p.letterheadName){h.changeLetterhead(p.letterheadList[t]);break}},function(e){console.log(e)}),angular.forEach(p.referringDoctorList,function(e){null!==p.referringDoctor&&e.id===p.referringDoctor.id&&(p.referringDoctor=e)}),p.demographic.extras=Juno.Common.Util.toArray(p.demographic.extras);for(var e=0;e<p.demographic.extras.length;e++)if("demo_cell"==p.demographic.extras[e].key){p.demographic.cellPhone=p.demographic.extras[e].value;break}},h.initialize(),h.changeLetterhead=function(e){p.letterhead=e,p.letterheadName=p.letterhead.id,p.letterheadAddress=p.letterhead.address,p.letterheadPhone=p.letterhead.phone,p.letterheadFax=p.letterhead.fax},h.urgencies=d.getConsultUrgencies(),h.statuses=d.getConsultResponseStatuses(),h.hours=d.getHours(),h.minutes=d.getMinutes(),h.parseTime=function(e){var t=e.split(":");p.appointmentHour=t[0],p.appointmentMinute=t[1]},null!==p.appointmentTime&&h.parseTime(p.appointmentTime),h.consultChanged=-1,n.$watchCollection(function(){return h.consult},function(){h.consultChanged++}),n.$on("$stateChangeStart",function(e){h.consultChanged>0&&(confirm("You may have unsaved data. Are you sure to leave?")||e.preventDefault())}),h.writeToBox=function(e,t){for(var n=Juno.Common.Util.toArray(e.summaryItem),o=null,a=0;a<n.length;a++)o=Juno.Common.Util.addNewLine(n[a].displayName,o);"clinicalInfo"==t?p.clinicalInfo=Juno.Common.Util.addNewLine(o,p.clinicalInfo):"concurrentProblems"==t?p.concurrentProblems=Juno.Common.Util.addNewLine(o,p.concurrentProblems):"currentMeds"==t&&(p.currentMeds=Juno.Common.Util.addNewLine(o,p.currentMeds))},h.getFamilyHistory=function(e){c.getFamilyHistory(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No family history"),h.writeToBox(t,e)},function(e){alert("Error grabbing family history!"),console.log(e)})},h.getMedicalHistory=function(e){c.getMedicalHistory(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No medical history"),h.writeToBox(t,e)},function(e){alert("Error grabbing medical history!"),console.log(e)})},h.getSocialHistory=function(e){c.getSocialHistory(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No social history"),h.writeToBox(t,e)},function(e){alert("Error grabbing social history!"),console.log(e)})},h.getOngoingConcerns=function(e){c.getOngoingConcerns(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No ongoing concerns"),h.writeToBox(t,e)},function(e){alert("Error grabbing ongoing concerns!"),console.log(e)})},h.getOtherMeds=function(e){c.getOtherMeds(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No other meds"),h.writeToBox(t,e)},function(e){alert("Error grabbing other meds!"),console.log(e)})},h.getReminders=function(e){c.getReminders(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No reminders"),h.writeToBox(t,e)},function(e){alert("Error grabbing reminders!"),console.log(e)})},h.invalidData=function(){return h.consult.urgency?h.consult.letterheadName?Juno.Common.Util.isUndefinedOrNull(h.consult.referringDoctor)?(alert("Please select a Referring Doctor"),!0):(!h.consult.demographic||""===h.consult.demographic)&&(alert("Error! Invalid patient!"),!0):(alert("Please select a Letterhead"),!0):(alert("Please select an Urgency"),!0)},h.setAppointmentTime=function(){null!==p.appointmentHour&&null!==p.appointmentMinute?(apptTime=e(Date.now()),apptTime.set("hours",p.appointmentHour),apptTime.set("minute",p.appointmentMinute),p.appointmentTime=apptTime):p.appointmentTime=null},h.openAttach=function(e){window.open("../"+e.url)},h.attachFiles=function(){i.open({templateUrl:"src/consults/consultAttachment.jsp",controller:"Consults.ConsultResponseAttachmentController as consultAttachmentCtrl",windowClass:"attachment-modal-window",backdrop:"static",resolve:{consult:function(){return p}}}).result.then(function(e){p.attachmentsChanged&&(h.consultChanged++,p.attachmentsChanged=!1)},function(e){console.log(e)})},h.save=function(){return h.consultWriteAccess||null!=p.id?h.consultUpdateAccess?!h.invalidData()&&(h.consultSaving=!0,h.setAppointmentTime(),l.saveResponse(p).then(function(e){null===p.id&&r.path("/record/"+p.demographic.demographicNo+"/consultResponse/"+e.body.id)},function(e){console.log(e)}),h.consultSaving=!1,h.consultChanged=-1,!0):(alert("You don't have right to update consult"),!1):(alert("You don't have right to save new consult"),!1)},h.close=function(){"patient"===r.search().list?r.path("/record/"+p.demographic.demographicNo+"/consultResponses"):r.path("/consultResponses")};var g="<html><style>body{width:800px;font-family:arial,verdana,tahoma,helvetica,sans serif}table{width:100%}th{text-align:left;font-weight:bold;width:1px;white-space:nowrap}td{vertical-align:top}label{font-weight:bold}em{font-size:small}.large{font-size:large}.center{text-align:center}</style><style media='print'>button{display:none}.noprint{display:none}</style><script>function printAttachments(url){window.open('../'+url);}<\/script><body>";h.sendFax=function(){var e=Juno.Common.Util.toTrimmedString(h.urgencies[t("#urgency").val()].name),n=Juno.Common.Util.toTrimmedString(p.letterheadList[t("#letterhead").val()].name),o=Juno.Common.Util.getPrintPage2(e,n,p,m),a=encodeURIComponent(g+o),r=p.id,i=p.demographic.demographicNo,l=Juno.Common.Util.toTrimmedString(p.letterheadFax),s=Juno.Common.Util.toTrimmedString(p.referringDoctor.faxNumber);window.open("../fax/CoverPage.jsp?consultResponsePage="+a+"&reqId="+r+"&demographicNo="+i+"&letterheadFax="+l+"&fax="+s)},h.printPreview=function(){if(!h.invalidData()){var e=window.open("","consultResponsePrintWin","width=830,height=900,scrollbars=yes,location=no");e.document.open();for(var n="",o=0;o<p.attachments.length;o++)n+="<div class='noprint'><button onclick=printAttachments('"+p.attachments[o].url+"')>Print attachment</button> "+p.attachments[o].displayName+"</div>";var a=Juno.Common.Util.toTrimmedString(h.urgencies[t("#urgency").val()].name),r=Juno.Common.Util.toTrimmedString(p.letterheadList[t("#letterhead").val()].name),i=h.getPrintPage2(a,r,p,m);e.document.write(g+"<button onclick='window.print()'>Print</button><button onclick='window.close()'>Close</button>"+n+i),e.document.close()}},h.getPrintPage2=function(e,t,n,o){var a=Juno.Common.Util.toTrimmedString(n.letterheadList[0].name),r=Juno.Common.Util.formatDate(n.responseDate),i=Juno.Common.Util.formatDate(n.referralDate),l=Juno.Common.Util.toTrimmedString(n.letterheadAddress),s=Juno.Common.Util.toTrimmedString(n.letterheadPhone),u=Juno.Common.Util.toTrimmedString(n.letterheadFax),c=Juno.Common.Util.toTrimmedString(n.referringDoctor.name),d=Juno.Common.Util.toTrimmedString(n.referringDoctor.phoneNumber),p=Juno.Common.Util.toTrimmedString(n.referringDoctor.faxNumber),m=Juno.Common.Util.toTrimmedString(n.referringDoctor.streetAddress),h=Juno.Common.Util.toTrimmedString(n.demographic.lastName)+", "+Juno.Common.Util.toTrimmedString(n.demographic.firstName),g=Juno.Common.Util.toTrimmedString(n.demographic.phone),f=Juno.Common.Util.toTrimmedString(n.demographic.alternativePhone),v=Juno.Common.Util.formatDate(n.demographic.dateOfBirth),b=Juno.Common.Util.toTrimmedString(n.demographic.sexDesc),S=Juno.Common.Util.toTrimmedString(n.demographic.hin)+"-"+Juno.Common.Util.toTrimmedString(n.demographic.ver),C=Juno.Common.Util.toTrimmedString(n.demographic.chartNo),N="";null!=n.demographic.address&&(N=Juno.Common.Util.toTrimmedString(n.demographic.address.address)+", "+Juno.Common.Util.toTrimmedString(n.demographic.address.city)+", "+Juno.Common.Util.toTrimmedString(n.demographic.address.province)+" "+Juno.Common.Util.toTrimmedString(n.demographic.address.postal));var y=Juno.Common.Util.formatDate(n.appointmentDate),A=Juno.Common.Util.formatTime(n.appointmentTime),D=Juno.Common.Util.toTrimmedString(n.reasonForReferral);return"<div class='center'><label class='large'>"+a+"</label><br/><label>Consultation Response</label><br/></div><br/><table><tr><td><label>Date: </label>"+r+"</td><td rowspan=6 width=10></td><td><label>Status: </label>"+e+"</td></tr><tr><td colspan=2></td></tr><tr><th>FROM:</th><th>TO:</th></tr><tr><td><p class='large'>"+t+"</p>"+l+"<br/><label>Tel: </label>"+s+"<br/><label>Fax: </label>"+u+"</td><td><table><tr><th>Referring Doctor:</th><td>"+c+"</td></tr><tr><th>Phone:</th><td>"+d+"</td></tr><tr><th>Fax:</th><td>"+p+"</td></tr><tr><th>Address:</th><td>"+m+"</td></tr></table></td></tr><tr><td colspan=2></td></tr><tr><td><table><tr><th>Patient:</th><td>"+h+"</td></tr><tr><th>Address:</th><td>"+N+"</td></tr><tr><th>Phone:</th><td>"+g+"</td></tr><tr><th>Work Phone:</th><td>"+f+"</td></tr><tr><th>Birthdate:</th><td>"+v+"</td></tr></table></td><td><table><tr><th>Sex:</th><td>"+b+"</td></tr><tr><th>Health Card No:</th><td>"+S+"</td></tr><tr><th>Appointment date:</th><td>"+y+"</td></tr><tr><th>Appointment time:</th><td>"+A+"</td></tr><tr><th>Chart No:</th><td>"+C+"</td></tr></table></td></tr></table><br/><table><tr><th>Examination:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.examination)+"<hr></td></tr><tr><th>Impression:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.impression)+"<hr></td></tr><tr><th>Plan:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.plan)+"<hr></td></tr><tr><td></td></tr><tr><th>Reason for consultation: (Date: "+i+")</th></tr><tr><td>"+D+"<hr></td></tr><tr><th>Pertinent Clinical Information:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.clinicalInfo)+"<hr></td></tr><tr><th>Significant Concurrent Problems:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.concurrentProblems)+"<hr></td></tr><tr><th>Current Medications:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.currentMeds)+"<hr></td></tr><tr><th>Allergies:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.allergies)+"<hr></td></tr><tr><td><label>Consultant: </label>"+(Juno.Common.Util.toTrimmedString(o.lastName)+", "+Juno.Common.Util.toTrimmedString(o.firstName))+"</td></tr><tr><td></td></tr><tr><td><div class='center'><em>Created by: OSCAR The open-source EMR www.oscarcanada.org</em></div></td></tr></table></body></html>"}}])}).call(this,n(5),n(3))},function(e,t,n){"use strict";angular.module("Inbox",[])},function(e,t){angular.module("Inbox").controller("Inbox.InboxController",["$scope","$http",function(e,t){}])},function(e,t,n){"use strict";angular.module("Patient.Search",["Common.Services"])},function(e,t,n){"use strict";(function(e){angular.module("Patient.Search").controller("Patient.Search.PatientSearchController",["$q","$state","$stateParams","$uibModal","NgTableParams","securityService","demographicsService",function(t,n,o,a,r,i,l){var s={demographicReadAccess:null,search:{}};return s.STATUS_MODE=l.STATUS_MODE,s.SEARCH_MODE=l.SEARCH_MODE,s.defaultStatus=l.STATUS_MODE.ACTIVE,s.init=function(){s.clearParams(),Juno.Common.Util.exists(o.term)&&(s.search.term=o.term),s.search.status=s.defaultStatus,i.hasRights({items:[{objectName:"_demographic",privilege:"r"}]}).then(function(e){Juno.Common.Util.exists(e.content)&&1===e.content.length?(s.demographicReadAccess=e.content[0],s.demographicReadAccess&&s.initTable()):(console.log("failed to load rights",e),s.demographicReadAccess=!1)},function(e){console.log(e),s.demographicReadAccess=!1})},s.initTable=function(){s.tableParams=new r({page:1,count:10,sorting:{DemographicName:"asc"}},{getData:function(e){var n=t.defer(),o=e.url().count,a=e.url().page;s.search.params=e.url();var r=[];return r.push(l.search(s.search,a,o)),s.integratorResults=null,s.search.integrator&&r.push(l.searchIntegrator(s.search,100)),t.all(r).then(function(t){var o=t[0];e.total(o.meta.total),s.search.integrator&&(s.integratorResults=t[1]),n.resolve(o.data)},function(e){console.log("patient search failed",e),n.reject()}),n.promise}})},s.searchPatients=function(){if(s.search.type===l.SEARCH_MODE.DOB){var t=e(s.search.term,["YYYY-MM-DD","YYYY/MM/DD"],!0);if(!t.isValid())return void alert("Please enter Date of Birth in format YYYY-MM-DD.");s.search.term=t.format("YYYY-MM-DD")}s.tableParams.page(1),s.tableParams.reload()},s.clearParams=function(e){Juno.Common.Util.exists(e)||(e=l.SEARCH_MODE.Name),s.search={type:e,term:"",status:s.defaultStatus,integrator:!1,outofdomain:!0},s.searchTermPlaceHolder=s.search.type===l.SEARCH_MODE.DOB?"YYYY-MM-DD":"Search Term",Juno.Common.Util.exists(s.tableParams)&&(s.tableParams.page(1),s.tableParams.reload())},s.toggleParam=function(e){["integrator","outofdomain"].indexOf(e)>-1&&(s.search[e]=!s.search[e])},s.loadRecord=function(e){n.go("record.details",{demographicNo:e,hideNote:!0})},s.showIntegratorResults=function(){var e=[],t=0;Juno.Common.Util.exists(s.integratorResults)&&(e=s.integratorResults.content,t=s.integratorResults.total),a.open({templateUrl:"src/patientsearch/remotePatientResults.jsp",controller:"RemotePatientResultsController",resolve:{results:function(){return e},total:function(){return t}}})},s}])}).call(this,n(5))},function(e,t,n){"use strict";angular.module("Patient.Search").controller("Patient.Search.RemotePatientResultsController",["$http","$scope","$uibModalInstance","results","total",function(e,t,n,o,a){t.results=o,t.total=a,t.currentPage=1,t.pageSize=5,t.startIndex=0,t.close=function(){n.close("Someone Closed Me")},t.doImport=function(e){var t="../appointment/copyRemoteDemographic.jsp?remoteFacilityId="+e.remoteFacilityId+"&demographic_no="+e.demographicNo;window.open(t,"ImportDemo","width=700, height=1027")},t.save=function(){n.close("Someone Saved Me")},t.prevPage=function(){0!=t.startIndex&&(t.currentPage--,t.startIndex=(t.currentPage-1)*t.pageSize)},t.nextPage=function(){t.startIndex+t.pageSize>t.total||(t.currentPage++,t.startIndex=(t.currentPage-1)*t.pageSize)}}])},function(e,t,n){"use strict";angular.module("Report",["Common","Common.Services"])},function(e,t){angular.module("oscarProviderViewModule").factory("ReportNavigation",["$rootScope",function(e){return{location:"",load:function(e){this.location=e}}}]),angular.module("Report").controller("Report.ReportsController",["$scope","$state","$filter","$log","ReportNavigation",function(e,t,n,o,a){var r=this;e.$emit("configureShowPatientList",!1),r.reports=[{name:"Daysheets",templateUrl:"src/report/report_daysheet.jsp"},{name:"Active Patients",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/reportactivepatientlist.jsp"},{name:"Old Patients",templateUrl:"src/report/report_oldPatients.jsp"},{name:"Patient Chart List",templateUrl:"src/report/report_patientChartList.jsp"},{name:"EDB List",templateUrl:"src/report/report_edb_list.jsp"},{name:"Bad Appointments",templateUrl:"src/report/report_badAppointments.jsp"},{name:"No Show Appointments",templateUrl:"src/report/report_noShowAppointments.jsp"},{name:"Consultations",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/ConsultationReport.jsp"},{name:"Lab Requisitions",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/LabReqReport.jsp"},{name:"Preventions",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarPrevention/PreventionReporting.jsp"},{name:"Injections",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/InjectionReport2.jsp"},{name:"Demographic Report Tool",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/ReportDemographicReport.jsp"},{name:"Patient Study List",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/demographicstudyreport.jsp"},{name:"Chronic Disease Management",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/oscarMeasurements/SetupSelectCDMReport.do"},{name:"Waiting List",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarWaitingList/SetupDisplayWaitingList.do?waitingListId="},{name:"Forms",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/reportFormRecord.jsp"},{name:"Clinical",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/ClinicalReports.jsp"},{name:"SCBP demographic Report",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/reportBCARDemo.jsp"},{name:"Report By Template",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/reportByTemplate/homePage.jsp"},{name:"General Forms",group:"CAISI",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../PMmodule/ClientManager.do?method=getGeneralFormsReport"},{name:"Registration Intake",group:"CAISI",templateUrl:"src/report/report_registration_intake.jsp"},{name:"Follow-up Intake",group:"CAISI",templateUrl:"src/report/report_followup_intake.jsp"},{name:"Activity Report",group:"CAISI",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../PMmodule/Reports/ProgramActivityReport.do"},{name:"UCF Report",group:"CAISI",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../SurveyManager.do?method=reportForm"},{name:"SH Mental Health Report",group:"CAISI",templateUrl:"src/report/report_sh_mental_health.jsp"},{name:"OSIS Report",group:"Public Health",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/OSISReport.jsp"},{name:"One Time Consult CDS Report",group:"Public Health",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/CDSOneTimeConsultReport.jsp"}],r.init=function(){r.reportGroup="",r.reportGroups=r.getReportGroups(),r.reportSidebar=a,r.test=r.reportSidebar.url},r.editDemographicSet=function(){r.selectReport({name:"Demographic Set Edit",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/demographicSetEdit.jsp"})},r.getReports=function(){return null!=r.reportGroup&&r.reportGroup.length>0?n("filter")(r.reports,{group:r.reportGroup}):r.reports},r.getReportGroups=function(){for(var e=[{value:"",label:"All Groups"}],t={},n=0;n<r.reports.length;n++)null!=r.reports[n].group&&(t[r.reports[n].group]=r.reports[n].group);for(var o in t)e.push({value:o,label:o});return e},r.selectReport=function(e){r.currentReport=e,!0===e.direct?window.open(e.window.url,e.name,"width="+e.window.width+"&height="+e.window.height):a.load(e.templateUrl)}}])},function(e,t){angular.module("Report").controller("Report.ReportBadAppointmentSheetController",["$scope","$log","providerService","$filter",function(e,t,n,o){var a=this;a.params={providerNo:"",startDate:new Date},a.searchProviders=function(e){var t={searchTerm:e,active:!0};return n.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},a.updateProviderNo=function(e,t,n){a.params.providerNo=t,a.params.name=n},a.generateReport=function(){var e=a.params,t=o("date")(e.startDate,"yyyy-MM-dd"),n="../report/reportapptsheet.jsp?dsmode=all&provider_no="+e.providerNo+"&sdate="+t;window.open(n,"report_badApptSheet","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportDaySheetController",["$scope","$log","$filter","providerService",function(e,t,n,o){var a=this;a.params={providerNo:"",type:"",startDate:new Date,endDate:new Date,startTime:null,endTime:null},a.searchProviders=function(e){var t={searchTerm:e,active:!0};return o.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},a.updateProviderNo=function(e,t,n){a.params.providerNo=t,a.data.providerNo=n},a.generateReport=function(){var e=a.params;if("all"===e.type||"all-nr"===e.type){var t=n("date")(e.startDate,"yyyy-MM-dd"),o=n("date")(e.endDate,"yyyy-MM-dd"),r=n("date")(e.startTime,"HH:mm"),i=n("date")(e.endTime,"HH:mm"),l="../report/reportdaysheet.jsp?dsmode=all&provider_no="+(""===e.providerNo?"*":e.providerNo)+"&sdate="+t+"&edate="+o+"&sTime="+r+"&eTime="+i;"all-nr"===e.type&&(l+="&rosteredStatus=true"),window.open(l,"report_daysheet","height=900,width=700")}if("new"===e.type){t=n("date")(e.startDate,"yyyy-MM-dd"),l="../report/reportdaysheet.jsp?dsmode=new&provider_no="+(""===e.providerNo?"*":e.providerNo)+"&sdate="+t;window.open(l,"report_daysheet","height=900,width=700")}if("lab"===e.type){l="../report/printLabDaySheetAction.do?xmlStyle=labDaySheet.xml&input_date="+(t=n("date")(e.startDate,"yyyy-MM-dd"));window.open(l,"report_daysheet","height=900,width=700")}if("billing"===e.type){l="../report/printLabDaySheetAction.do?xmlStyle=billDaySheet.xml&input_date="+(t=n("date")(e.startDate,"yyyy-MM-dd"));window.open(l,"report_daysheet","height=900,width=700")}if("tab"===e.type){t=n("date")(e.startDate,"yyyy-MM-dd"),l="../report/tabulardaysheetreport.jsp?provider_no="+(""===e.providerNo?"*":e.providerNo)+"&sdate="+t;window.open(l,"report_daysheet","height=900,width=700")}},a.reset=function(){a.params={providerNo:"",type:"",startDate:new Date,endDate:new Date,startTime:null,endTime:null}}}])},function(e,t){angular.module("Report").controller("Report.ReportEdbListController",["$scope","$log","$filter",function(e,t,n){var o=this;o.params={startDate:new Date,endDate:new Date,version:"",region:"ON"},o.generateReport=function(){t.log("run edb report");var e=n("date")(o.params.startDate,"yyyy-MM-dd"),a=n("date")(o.params.endDate,"yyyy-MM-dd"),r="";"BC"===o.params.region&&(r="05"==o.params.version?"../report/reportbcedblist2007.jsp?startDate="+e+"&endDate="+a:"../report/reportbcedblist.jsp?startDate="+e+"&endDate="+a),"ON"===o.params.region&&(r="05"==o.params.version?"../report/reportonedblist.jsp?startDate="+e+"&endDate="+a:"../report/reportnewedblist.jsp?startDate="+e+"&endDate="+a),window.open(r,"report_edb","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportFollowUpIntakeController",["$scope","$log","$filter",function(e,t,n){var o=this;o.params={startDate:new Date,endDate:new Date,includePastForms:!0},o.generateReport=function(){t.log("run follow up intake report");var e="../PMmodule/GenericIntake/Report.do?method=report&type=indepth&startDate="+n("date")(o.params.startDate,"yyyy-MM-dd")+"&endDate="+n("date")(o.params.endDate,"yyyy-MM-dd")+"&includePast="+o.params.includePastForms;window.open(e,"report_followup_intake","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportNoShowAppointmentSheetController",["$scope","$log","$filter","providerService",function(e,t,n,o){var a=this;a.params={providerNo:"",startDate:new Date},a.searchProviders=function(e){var t={searchTerm:e,active:!0};return o.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},a.updateProviderNo=function(e,t,n){a.params.providerNo=t,a.params.name=n},a.generateReport=function(){var e=a.params,t=n("date")(e.startDate,"yyyy-MM-dd"),o="../report/reportnoshowapptlist.jsp?provider_no="+e.providerNo+"&sdate="+t;window.open(o,"report_noShowApptSheet","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportOldPatientsController",["$scope","$log","providerService",function(e,t,n){var o=this;o.params={providerNo:"",age:65},o.searchProviders=function(e){var t={searchTerm:e,active:!0};return n.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},o.updateProviderNo=function(e,t,n){o.params.providerNo=t,o.params.name=n},o.generateReport=function(){var e=o.params,t="../report/reportpatientchartlistspecial.jsp?provider_no="+(""===e.providerNo?"*":e.providerNo)+"&age="+e.age;window.open(t,"report_oldpatients","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportPatientChartListController",["$scope","$log","providerService",function(e,t,n){var o=this;o.params={},o.searchProviders=function(e){var t={searchTerm:e,active:!0};return n.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},o.updateProviderNo=function(e,t,n){o.params.providerNo=t,o.params.name=n},o.generateReport=function(){var e=o.params;if(!e.providerNo)return alert("Please enter a provider"),!1;var t="../report/reportpatientchartlist.jsp?provider_no="+e.providerNo;window.open(t,"report_patientchartlist","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportRegistrationIntakeController",["$scope","$log","$filter",function(e,t,n){var o=this;o.params={startDate:new Date,endDate:new Date,includePastForms:!0},o.generateReport=function(){t.log("run registration intake report");var e="../PMmodule/GenericIntake/Report.do?method=report&type=quick&startDate="+n("date")(o.params.startDate,"yyyy-MM-dd")+"&endDate="+n("date")(o.params.endDate,"yyyy-MM-dd")+"&includePast="+o.params.includePastForms;window.open(e,"report_registration_intake","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportSHMentalHealthController",["$scope","$log","$filter",function(e,t,n){var o=this;o.params={startDate:new Date},o.generateReport=function(){t.log("run sh mental health report");var e="../PMmodule/StreetHealthIntakeReportAction.do?startDate="+n("date")(o.params.startDate,"yyyy-MM-dd");window.open(e,"report_sh","height=900,width=700")}}])},function(e,t,n){"use strict";angular.module("Document",["Common","Common.Services"])},function(e,t){angular.module("Document").controller("Document.DocumentsController",["$scope","securityService",function(e,t){var n=this;n.me=null,e.$watch(function(){return t.getUser()},function(e){n.me=e,null!=e&&window.open("../dms/documentReport.jsp?function=provider&functionid="+n.me.providerNo,"edocView","height=700,width=1024")},!0),n.openPopup=function(){window.open("../dms/documentReport.jsp?function=provider&functionid="+n.me.providerNo,"edocView","height=700,width=1024")}}])},function(e,t,n){"use strict";angular.module("Settings",["Common","Common.Services"])},function(e,t){angular.module("Settings").controller("Settings.SettingsController",["$scope","$http","$state","$uibModal","$filter","providerList","user","billingServiceTypes","loadedSettings","providerService","encounterForms","eforms","teams","groupNames","loadedApps","appService",function(e,t,n,o,a,r,i,l,s,u,c,d,p,m,h,g){var f=this;e.$emit("configureShowPatientList",!1),f.providerList=r,f.user=i,f.billingServiceTypes=l,f.pref=s,f.encounterForms=c.content,f.eforms=d,f.loadedApps=h,null==f.pref.recentPatients&&(f.pref.recentPatients="8"),f.formGroupNames=[{value:"",label:"None"}];for(var v=0;v<m.length;v++)f.formGroupNames.push({value:m[v],label:m[v]});f.teams=[{value:"-1",label:"All"}];for(v=0;v<p.length;v++)f.teams.push({value:p[v],label:p[v]});f.teams.push({value:"",label:"None"}),f.billingServiceTypesMod=[],angular.copy(f.billingServiceTypes,f.billingServiceTypesMod),f.billingServiceTypesMod.splice(0,0,{type:"no",name:"--None--"});for(v=0;v<f.pref.appointmentScreenForms.length;v++){if(null!=(S=a("filter")(f.encounterForms,{formName:f.pref.appointmentScreenForms[v]})))for(var b=0;b<S.length;b++)S[b].formName===f.pref.appointmentScreenForms[v]&&(S[b].checked=!0)}for(v=0;v<f.pref.appointmentScreenEforms.length;v++){var S;if(null!=(S=a("filter")(f.eforms,{id:f.pref.appointmentScreenEforms[v]})))for(b=0;b<S.length;b++)S[b].id===f.pref.appointmentScreenEforms[v]&&(S[b].checked=!0)}f.tabs=[{id:0,displayName:"Persona",path:"persona"},{id:1,displayName:"General",path:"general"},{id:2,displayName:"Schedule",path:"schedule"},{id:3,displayName:"Billing",path:"billing"},{id:4,displayName:"Rx",path:"rx"},{id:5,displayName:"Master Demographic",path:"masterdemo"},{id:6,displayName:"Consultations",path:"consults"},{id:7,displayName:"Documents",path:"documents"},{id:8,displayName:"Summary",path:"summary"},{id:9,displayName:"eForms",path:"eforms"},{id:10,displayName:"Inbox",path:"inbox"},{id:11,displayName:"Programs",path:"programs"},{id:12,displayName:"Integration",path:"integration"}],f.pageSizes=[{value:"PageSize.A4",label:"A4"},{value:"PageSize.A6",label:"A6"}],f.rxInteractionWarningLevels=[{value:"0",label:"Not Specified"},{value:"1",label:"Low"},{value:"2",label:"Medium"},{value:"3",label:"High"},{value:"4",label:"None"}],f.staleDates=[{value:"A",label:"All"},{value:"0",label:"0"},{value:"-1",label:"-1"},{value:"-2",label:"2"},{value:"-3",label:"3"},{value:"-4",label:"4"},{value:"-5",label:"5"},{value:"-6",label:"6"},{value:"-7",label:"7"},{value:"-8",label:"8"},{value:"-9",label:"9"},{value:"-10",label:"10"},{value:"-11",label:"11"},{value:"-12",label:"12"},{value:"-13",label:"13"},{value:"-14",label:"14"},{value:"-15",label:"15"},{value:"-16",label:"16"},{value:"-17",label:"17"},{value:"-18",label:"18"},{value:"-19",label:"19"},{value:"-20",label:"20"},{value:"-21",label:"21"},{value:"-22",label:"22"},{value:"-23",label:"23"},{value:"-24",label:"24"},{value:"-25",label:"25"},{value:"-26",label:"26"},{value:"-27",label:"27"},{value:"-28",label:"28"},{value:"-29",label:"29"},{value:"-30",label:"30"},{value:"-31",label:"31"},{value:"-32",label:"32"},{value:"-33",label:"33"},{value:"-34",label:"34"},{value:"-35",label:"35"},{value:"-36",label:"36"}],f.olisLabs=[{value:"",label:""},{value:"5552",label:"Gamma-Dynacare"},{value:"5407",label:"CML"},{value:"5687",label:"LifeLabs"}],f.pasteFormats=[{value:"single",label:"Single Line"},{value:"multi",label:"Multi Line"}],f.letterHeadNameDefaults=[{value:"1",label:"Provider (user)"},{value:"2",label:"MRP"},{value:"3",label:"Clinic"}],null==f.pref.consultationLetterHeadNameDefault&&(f.pref.consultationLetterHeadNameDefault="1"),void 0!==n.current.data?f.currentTab=a("filter")(f.tabs,{path:n.current.data.tab})[0]:f.currentTab=f.tabs[0],f.isActive=function(e){return null!=e&&null!=f.currentTab&&e.id==f.currentTab.id},f.changeTab=function(e){f.currentTab=e,n.go("settings."+e.path)},f.save=function(){for(var e=[],t=0;t<f.pref.appointmentScreenQuickLinks.length;t++)null!=f.pref.appointmentScreenQuickLinks[t].checked&&0!=f.pref.appointmentScreenQuickLinks[t].checked||e.push({name:f.pref.appointmentScreenQuickLinks[t].name,url:f.pref.appointmentScreenQuickLinks[t].url});f.pref.appointmentScreenQuickLinks=e,u.saveSettings(f.user.providerNo,f.pref).then(function(e){alert("saved")})},f.cancel=function(){f.pref={},n.go("dashboard")},f.selectEncounterForms=function(){for(var e=a("filter")(f.encounterForms,{checked:!0}),t=[],n=0;n<e.length;n++)t.push(e[n].formName);f.pref.appointmentScreenForms=t},f.selectEForms=function(){for(var e=a("filter")(f.eforms,{checked:!0}),t=[],n=0;n<e.length;n++)t.push(e[n].id);f.pref.appointmentScreenEforms=t},f.removeQuickLinks=function(){for(var e=[],t=0;t<f.pref.appointmentScreenQuickLinks.length;t++)null!=f.pref.appointmentScreenQuickLinks[t].checked&&0!=f.pref.appointmentScreenQuickLinks[t].checked||e.push(f.pref.appointmentScreenQuickLinks[t]);f.pref.appointmentScreenQuickLinks=e},f.openChangePasswordModal=function(){window.open("../provider/providerchangepassword.jsp","change_password","width=750,height=500")},f.openQuickLinkModal=function(){o.open({templateUrl:"src/settings/quickLink.jsp",controller:"QuickLinkController"}).result.then(function(e){null!=e&&null!=e&&null!=e.name&&null!=e.url&&f.pref.appointmentScreenQuickLinks.push(e)})},f.editDocumentTemplates=function(){window.open("../admin/displayDocumentDescriptionTemplate.jsp","document_templates","width=700,height=450")},f.showProviderColourPopup=function(){window.open("../provider/providerColourPicker.jsp","provider_colour","width=700,height=450")},f.showDefaultEncounterWindowSizePopup=function(){window.open("../setProviderStaleDate.do?method=viewEncounterWindowSize","encounter_window_sz","width=700,height=450")},f.openConfigureEChartCppPopup=function(){window.open("../provider/CppPreferences.do","configure_echart_cpp","width=700,height=450")},f.openManageAPIClientPopup=function(){window.open("../provider/clients.jsp","api_clients","width=700,height=450")},f.openMyOscarUsernamePopup=function(){window.open("../provider/providerIndivoIdSetter.jsp","invivo_setter","width=700,height=450")},f.authenticate=function(e){window.open("../apps/oauth1.jsp?id="+e.id,"appAuth","width=700,height=450")},f.refreshAppList=function(){console.log("refresh",f.loadedApps),g.getApps().then(function(e){f.loadedApps=e},function(e){console.log("applist:"+e)}),console.log("refresh",f.loadedApps)}}])},function(e,t){angular.module("Settings").controller("Settings.ChangePasswordController",["$scope","$uibModalInstance",function(e,t){e.close=function(){t.close("Someone Closed Me")},e.changePassword=function(){console.log("password saved - NOT"),t.close("Someone Saved Me")}}])},function(e,t){angular.module("Settings").controller("Settings.QuickLinkController",["$scope","$uibModalInstance",function(e,t){e.qll={},e.close=function(){t.close()},e.addQuickLink=function(n){n.$valid&&t.close(e.qll)}}])},function(e,t,n){"use strict";angular.module("Help",[])},function(e,t){angular.module("Help").controller("Help.SupportController",["$scope","$http",function(e,t){e.ospInfo={name:"OscarHost.ca",phone:"250-900-7373",contact:"Oscarhost Support",email:"support@oscarhost.ca",url:"https://help.oscarhost.ca"},e.buildInfo={versionDisplayName:"15-Beta",version:"master-0000"}}])},function(e,t){angular.module("Help").controller("Help.HelpController",["$scope","$http",function(e,t){}])},function(e,t,n){"use strict";t.__esModule=!0}],[[15,1,2]]]);
//# sourceMappingURL=bundle.aad48bc8738b916c5fd6.js.map